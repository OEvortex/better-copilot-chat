"use strict";var M2t=Object.create;var V6=Object.defineProperty;var N2t=Object.getOwnPropertyDescriptor;var L2t=Object.getOwnPropertyNames;var k2t=Object.getPrototypeOf,D2t=Object.prototype.hasOwnProperty;var q=(t,e)=>()=>(t&&(e=t(t=0)),e);var m=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Xs=(t,e)=>{for(var r in e)V6(t,r,{get:e[r],enumerable:!0})},LRe=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of L2t(e))!D2t.call(t,o)&&o!==r&&V6(t,o,{get:()=>e[o],enumerable:!(n=N2t(e,o))||n.enumerable});return t};var yt=(t,e,r)=>(r=t!=null?M2t(k2t(t)):{},LRe(e||!t||!t.__esModule?V6(r,"default",{value:t,enumerable:!0}):r,t)),cn=t=>LRe(V6({},"__esModule",{value:!0}),t);var Nr=m(l_=>{"use strict";Object.defineProperty(l_,"__esModule",{value:!0});l_.IInstantiationService=l_._util=void 0;l_.createDecorator=kRe;l_.refineServiceDecorator=q2t;var Ih;(function(t){t.serviceIds=new Map,t.DI_TARGET="$di$target",t.DI_DEPENDENCIES="$di$dependencies";function e(r){return r[t.DI_DEPENDENCIES]||[]}t.getServiceDependencies=e})(Ih||(l_._util=Ih={}));l_.IInstantiationService=kRe("instantiationService");function U2t(t,e,r){e[Ih.DI_TARGET]===e?e[Ih.DI_DEPENDENCIES].push({id:t,index:r}):(e[Ih.DI_DEPENDENCIES]=[{id:t,index:r}],e[Ih.DI_TARGET]=e)}function kRe(t){if(Ih.serviceIds.has(t))return Ih.serviceIds.get(t);let e=function(r,n,o){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");U2t(e,r,o)};return e.toString=()=>t,Ih.serviceIds.set(t,e),e}function q2t(t){return t}});var PJ=m(Ph=>{"use strict";var DRe;Object.defineProperty(Ph,"__esModule",{value:!0});Ph.SetWithKey=void 0;Ph.groupBy=F2t;Ph.groupByMap=j2t;Ph.diffSets=B2t;Ph.diffMaps=$2t;Ph.intersection=V2t;function F2t(t,e){let r=Object.create(null);for(let n of t){let o=e(n),s=r[o];s||(s=r[o]=[]),s.push(n)}return r}function j2t(t,e){let r=new Map;for(let n of t){let o=e(n),s=r.get(o);s||(s=[],r.set(o,s)),s.push(n)}return r}function B2t(t,e){let r=[],n=[];for(let o of t)e.has(o)||r.push(o);for(let o of e)t.has(o)||n.push(o);return{removed:r,added:n}}function $2t(t,e){let r=[],n=[];for(let[o,s]of t)e.has(o)||r.push(s);for(let[o,s]of e)t.has(o)||n.push(s);return{removed:r,added:n}}function V2t(t,e){let r=new Set;for(let n of e)t.has(n)&&r.add(n);return r}var IJ=class{static{DRe=Symbol.toStringTag}constructor(e,r){this.toKey=r,this._map=new Map,this[DRe]="SetWithKey";for(let n of e)this.add(n)}get size(){return this._map.size}add(e){let r=this.toKey(e);return this._map.set(r,e),this}delete(e){return this._map.delete(this.toKey(e))}has(e){return this._map.has(this.toKey(e))}*entries(){for(let e of this._map.values())yield[e,e]}keys(){return this.values()}*values(){for(let e of this._map.values())yield e}clear(){this._map.clear()}forEach(e,r){this._map.forEach(n=>e.call(r,n,n,this))}[Symbol.iterator](){return this.values()}};Ph.SetWithKey=IJ});var Gr=m(tr=>{"use strict";Object.defineProperty(tr,"__esModule",{value:!0});tr.BugIndicatingError=tr.ErrorNoTelemetry=tr.ExpectedError=tr.NotSupportedError=tr.NotImplementedError=tr.ReadonlyError=tr.PendingMigrationError=tr.CancellationError=tr.canceledName=tr.errorHandler=tr.ErrorHandler=void 0;tr.setUnexpectedErrorHandler=H2t;tr.isSigPipeError=G2t;tr.onBugIndicatingError=z2t;tr.onUnexpectedError=W2t;tr.onUnexpectedExternalError=K2t;tr.transformErrorForSerialization=URe;tr.transformErrorFromSerialization=qRe;tr.isCancellationError=DJ;tr.canceled=Y2t;tr.illegalArgument=Q2t;tr.illegalState=Z2t;tr.getErrorMessage=J2t;var H6=class{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?Jy.isErrorNoTelemetry(e)?new Jy(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach(r=>{r(e)})}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}};tr.ErrorHandler=H6;tr.errorHandler=new H6;function H2t(t){tr.errorHandler.setUnexpectedErrorHandler(t)}function G2t(t){if(!t||typeof t!="object")return!1;let e=t;return e.code==="EPIPE"&&e.syscall?.toUpperCase()==="WRITE"}function z2t(t){tr.errorHandler.onUnexpectedError(t)}function W2t(t){DJ(t)||tr.errorHandler.onUnexpectedError(t)}function K2t(t){DJ(t)||tr.errorHandler.onUnexpectedExternalError(t)}function URe(t){if(t instanceof Error){let{name:e,message:r,cause:n}=t,o=t.stacktrace||t.stack;return{$isError:!0,name:e,message:r,stack:o,noTelemetry:Jy.isErrorNoTelemetry(t),cause:n?URe(n):void 0,code:t.code}}return t}function qRe(t){let e;return t.noTelemetry?e=new Jy:(e=new Error,e.name=t.name),e.message=t.message,e.stack=t.stack,t.code&&(e.code=t.code),t.cause&&(e.cause=qRe(t.cause)),e}tr.canceledName="Canceled";function DJ(t){return t instanceof G6?!0:t instanceof Error&&t.name===tr.canceledName&&t.message===tr.canceledName}var G6=class extends Error{constructor(){super(tr.canceledName),this.name=this.message}};tr.CancellationError=G6;var RJ=class t extends Error{static{this._name="PendingMigrationError"}static is(e){return e instanceof t||e instanceof Error&&e.name===t._name}constructor(e){super(e),this.name=t._name}};tr.PendingMigrationError=RJ;function Y2t(){let t=new Error(tr.canceledName);return t.name=t.message,t}function Q2t(t){return t?new Error(`Illegal argument: ${t}`):new Error("Illegal argument")}function Z2t(t){return t?new Error(`Illegal state: ${t}`):new Error("Illegal state")}var OJ=class extends TypeError{constructor(e){super(e?`${e} is read-only and cannot be changed`:"Cannot change read-only property")}};tr.ReadonlyError=OJ;function J2t(t){return t?t.message?t.message:t.stack?t.stack.split(`
`)[0]:String(t):"Error"}var MJ=class extends Error{constructor(e){super("NotImplemented"),e&&(this.message=e)}};tr.NotImplementedError=MJ;var NJ=class extends Error{constructor(e){super("NotSupported"),e&&(this.message=e)}};tr.NotSupportedError=NJ;var LJ=class extends Error{constructor(){super(...arguments),this.isExpected=!0}};tr.ExpectedError=LJ;var Jy=class t extends Error{constructor(e){super(e),this.name="CodeExpectedError"}static fromError(e){if(e instanceof t)return e;let r=new t;return r.message=e.message,r.stack=e.stack,r}static isErrorNoTelemetry(e){return e.name==="CodeExpectedError"}};tr.ErrorNoTelemetry=Jy;var kJ=class t extends Error{constructor(e){super(e||"An unexpected bug occurred."),Object.setPrototypeOf(this,t.prototype)}};tr.BugIndicatingError=kJ});var qJ=m(UJ=>{"use strict";Object.defineProperty(UJ,"__esModule",{value:!0});UJ.createSingleCallFunction=X2t;function X2t(t,e){let r=this,n=!1,o;return function(){if(n)return o;if(n=!0,e)try{o=t.apply(r,arguments)}finally{e()}else o=t.apply(r,arguments);return o}}});var u_=m(ea=>{"use strict";Object.defineProperty(ea,"__esModule",{value:!0});ea.MonotonousArray=void 0;ea.findLast=e5t;ea.findLastIdx=FRe;ea.findLastMonotonous=t5t;ea.findLastIdxMonotonous=jJ;ea.findFirstMonotonous=r5t;ea.findFirstIdxMonotonousOrArrLen=BJ;ea.findFirstIdxMonotonous=n5t;ea.findFirstMax=jRe;ea.findLastMax=i5t;ea.findFirstMin=o5t;ea.findMaxIdx=s5t;ea.mapFindFirst=a5t;function e5t(t,e,r=t.length-1){let n=FRe(t,e,r);if(n!==-1)return t[n]}function FRe(t,e,r=t.length-1){for(let n=r;n>=0;n--){let o=t[n];if(e(o))return n}return-1}function t5t(t,e){let r=jJ(t,e);return r===-1?void 0:t[r]}function jJ(t,e,r=0,n=t.length){let o=r,s=n;for(;o<s;){let a=Math.floor((o+s)/2);e(t[a])?o=a+1:s=a}return o-1}function r5t(t,e){let r=BJ(t,e);return r===t.length?void 0:t[r]}function BJ(t,e,r=0,n=t.length){let o=r,s=n;for(;o<s;){let a=Math.floor((o+s)/2);e(t[a])?s=a:o=a+1}return o}function n5t(t,e,r=0,n=t.length){let o=BJ(t,e,r,n);return o===t.length?-1:o}var FJ=class t{static{this.assertInvariants=!1}constructor(e){this._array=e,this._findLastMonotonousLastIdx=0}findLastMonotonous(e){if(t.assertInvariants){if(this._prevFindLastPredicate){for(let n of this._array)if(this._prevFindLastPredicate(n)&&!e(n))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this._prevFindLastPredicate=e}let r=jJ(this._array,e,this._findLastMonotonousLastIdx);return this._findLastMonotonousLastIdx=r+1,r===-1?void 0:this._array[r]}};ea.MonotonousArray=FJ;function jRe(t,e){if(t.length===0)return;let r=t[0];for(let n=1;n<t.length;n++){let o=t[n];e(o,r)>0&&(r=o)}return r}function i5t(t,e){if(t.length===0)return;let r=t[0];for(let n=1;n<t.length;n++){let o=t[n];e(o,r)>=0&&(r=o)}return r}function o5t(t,e){return jRe(t,(r,n)=>-e(r,n))}function s5t(t,e){if(t.length===0)return-1;let r=0;for(let n=1;n<t.length;n++){let o=t[n];e(o,t[r])>0&&(r=n)}return r}function a5t(t,e){for(let r of t){let n=e(r);if(n!==void 0)return n}}});var Ui=m(ht=>{"use strict";Object.defineProperty(ht,"__esModule",{value:!0});ht.Permutation=ht.CallbackIterable=ht.ArrayQueue=ht.booleanComparator=ht.numberComparator=ht.CompareResult=void 0;ht.tail=u5t;ht.equals=d5t;ht.removeFastWithoutKeepingOrder=f5t;ht.binarySearch=p5t;ht.binarySearch2=BRe;ht.quickSelect=$J;ht.groupBy=h5t;ht.groupAdjacentBy=m5t;ht.forEachAdjacent=g5t;ht.forEachWithNeighbors=_5t;ht.concatArrays=v5t;ht.sortedDiff=$Re;ht.delta=y5t;ht.top=E5t;ht.topAsync=T5t;ht.coalesce=S5t;ht.coalesceInPlace=b5t;ht.move=C5t;ht.isFalsyOrEmpty=A5t;ht.isNonEmptyArray=x5t;ht.distinct=w5t;ht.uniqueFilter=I5t;ht.commonPrefixLength=P5t;ht.range=R5t;ht.index=O5t;ht.insert=M5t;ht.remove=HRe;ht.arrayInsert=N5t;ht.shuffle=L5t;ht.pushToStart=k5t;ht.pushToEnd=D5t;ht.pushMany=U5t;ht.mapArrayOrNot=q5t;ht.asArray=F5t;ht.getRandomElement=j5t;ht.insertInto=GRe;ht.splice=B5t;ht.compareBy=$5t;ht.tieBreakComparators=V5t;ht.reverseOrder=z5t;ht.compareUndefinedSmallest=W5t;ht.findAsync=K5t;ht.sum=Y5t;ht.sumBy=Q5t;var c5t=u_(),l5t=Gr();function u5t(t){if(t.length===0)throw new Error("Invalid tail call");return[t.slice(0,t.length-1),t[t.length-1]]}function d5t(t,e,r=(n,o)=>n===o){if(t===e)return!0;if(!t||!e||t.length!==e.length)return!1;for(let n=0,o=t.length;n<o;n++)if(!r(t[n],e[n]))return!1;return!0}function f5t(t,e){let r=t.length-1;e<r&&(t[e]=t[r]),t.pop()}function p5t(t,e,r){return BRe(t.length,n=>r(t[n],e))}function BRe(t,e){let r=0,n=t-1;for(;r<=n;){let o=(r+n)/2|0,s=e(o);if(s<0)r=o+1;else if(s>0)n=o-1;else return o}return-(r+1)}function $J(t,e,r){if(t=t|0,t>=e.length)throw new TypeError("invalid index");let n=e[Math.floor(e.length*Math.random())],o=[],s=[],a=[];for(let c of e){let l=r(c,n);l<0?o.push(c):l>0?s.push(c):a.push(c)}return t<o.length?$J(t,o,r):t<o.length+a.length?a[0]:$J(t-(o.length+a.length),s,r)}function h5t(t,e){let r=[],n;for(let o of t.slice(0).sort(e))!n||e(n[0],o)!==0?(n=[o],r.push(n)):n.push(o);return r}function*m5t(t,e){let r,n;for(let o of t)n!==void 0&&e(n,o)?r.push(o):(r&&(yield r),r=[o]),n=o;r&&(yield r)}function g5t(t,e){for(let r=0;r<=t.length;r++)e(r===0?void 0:t[r-1],r===t.length?void 0:t[r])}function _5t(t,e){for(let r=0;r<t.length;r++)e(r===0?void 0:t[r-1],t[r],r+1===t.length?void 0:t[r+1])}function v5t(...t){return[].concat(...t)}function $Re(t,e,r){let n=[];function o(c,l,u){if(l===0&&u.length===0)return;let d=n[n.length-1];d&&d.start+d.deleteCount===c?(d.deleteCount+=l,d.toInsert.push(...u)):n.push({start:c,deleteCount:l,toInsert:u})}let s=0,a=0;for(;;){if(s===t.length){o(s,0,e.slice(a));break}if(a===e.length){o(s,t.length-s,[]);break}let c=t[s],l=e[a],u=r(c,l);u===0?(s+=1,a+=1):u<0?(o(s,1,[]),s+=1):u>0&&(o(s,0,[l]),a+=1)}return n}function y5t(t,e,r){let n=$Re(t,e,r),o=[],s=[];for(let a of n)o.push(...t.slice(a.start,a.start+a.deleteCount)),s.push(...a.toInsert);return{removed:o,added:s}}function E5t(t,e,r){if(r===0)return[];let n=t.slice(0,r).sort(e);return VRe(t,e,n,r,t.length),n}function T5t(t,e,r,n,o){return r===0?Promise.resolve([]):new Promise((s,a)=>{(async()=>{let c=t.length,l=t.slice(0,r).sort(e);for(let u=r,d=Math.min(r+n,c);u<c;u=d,d=Math.min(d+n,c)){if(u>r&&await new Promise(f=>setTimeout(f)),o&&o.isCancellationRequested)throw new l5t.CancellationError;VRe(t,e,l,u,d)}return l})().then(s,a)})}function VRe(t,e,r,n,o){for(let s=r.length;n<o;n++){let a=t[n];if(e(a,r[s-1])<0){r.pop();let c=(0,c5t.findFirstIdxMonotonousOrArrLen)(r,l=>e(a,l)<0);r.splice(c,0,a)}}}function S5t(t){return t.filter(e=>!!e)}function b5t(t){let e=0;for(let r=0;r<t.length;r++)t[r]&&(t[e]=t[r],e+=1);t.length=e}function C5t(t,e,r){t.splice(r,0,t.splice(e,1)[0])}function A5t(t){return!Array.isArray(t)||t.length===0}function x5t(t){return Array.isArray(t)&&t.length>0}function w5t(t,e=r=>r){let r=new Set;return t.filter(n=>{let o=e(n);return r.has(o)?!1:(r.add(o),!0)})}function I5t(t){let e=new Set;return r=>{let n=t(r);return e.has(n)?!1:(e.add(n),!0)}}function P5t(t,e,r=(n,o)=>n===o){let n=0;for(let o=0,s=Math.min(t.length,e.length);o<s&&r(t[o],e[o]);o++)n++;return n}function R5t(t,e){let r=typeof e=="number"?t:0;typeof e=="number"?r=t:(r=0,e=t);let n=[];if(r<=e)for(let o=r;o<e;o++)n.push(o);else for(let o=r;o>e;o--)n.push(o);return n}function O5t(t,e,r){return t.reduce((n,o)=>(n[e(o)]=r?r(o):o,n),Object.create(null))}function M5t(t,e){return t.push(e),()=>HRe(t,e)}function HRe(t,e){let r=t.indexOf(e);if(r>-1)return t.splice(r,1),e}function N5t(t,e,r){let n=t.slice(0,e),o=t.slice(e);return n.concat(r,o)}function L5t(t,e){let r;if(typeof e=="number"){let n=e;r=()=>{let o=Math.sin(n++)*179426549;return o-Math.floor(o)}}else r=Math.random;for(let n=t.length-1;n>0;n-=1){let o=Math.floor(r()*(n+1)),s=t[n];t[n]=t[o],t[o]=s}}function k5t(t,e){let r=t.indexOf(e);r>-1&&(t.splice(r,1),t.unshift(e))}function D5t(t,e){let r=t.indexOf(e);r>-1&&(t.splice(r,1),t.push(e))}function U5t(t,e){for(let r of e)t.push(r)}function q5t(t,e){return Array.isArray(t)?t.map(e):e(t)}function F5t(t){return Array.isArray(t)?t:[t]}function j5t(t){return t[Math.floor(Math.random()*t.length)]}function GRe(t,e,r){let n=zRe(t,e),o=t.length,s=r.length;t.length=o+s;for(let a=o-1;a>=n;a--)t[a+s]=t[a];for(let a=0;a<s;a++)t[a+n]=r[a]}function B5t(t,e,r,n){let o=zRe(t,e),s=t.splice(o,r);return s===void 0&&(s=[]),GRe(t,o,n),s}function zRe(t,e){return e<0?Math.max(e+t.length,0):Math.min(e,t.length)}var d_;(function(t){function e(s){return s<0}t.isLessThan=e;function r(s){return s<=0}t.isLessThanOrEqual=r;function n(s){return s>0}t.isGreaterThan=n;function o(s){return s===0}t.isNeitherLessOrGreaterThan=o,t.greaterThan=1,t.lessThan=-1,t.neitherLessOrGreaterThan=0})(d_||(ht.CompareResult=d_={}));function $5t(t,e){return(r,n)=>e(t(r),t(n))}function V5t(...t){return(e,r)=>{for(let n of t){let o=n(e,r);if(!d_.isNeitherLessOrGreaterThan(o))return o}return d_.neitherLessOrGreaterThan}}var H5t=(t,e)=>t-e;ht.numberComparator=H5t;var G5t=(t,e)=>(0,ht.numberComparator)(t?1:0,e?1:0);ht.booleanComparator=G5t;function z5t(t){return(e,r)=>-t(e,r)}function W5t(t){return(e,r)=>e===void 0?r===void 0?d_.neitherLessOrGreaterThan:d_.lessThan:r===void 0?d_.greaterThan:t(e,r)}var VJ=class{constructor(e){this.firstIdx=0,this.items=e,this.lastIdx=this.items.length-1}get length(){return this.lastIdx-this.firstIdx+1}takeWhile(e){let r=this.firstIdx;for(;r<this.items.length&&e(this.items[r]);)r++;let n=r===this.firstIdx?null:this.items.slice(this.firstIdx,r);return this.firstIdx=r,n}takeFromEndWhile(e){let r=this.lastIdx;for(;r>=0&&e(this.items[r]);)r--;let n=r===this.lastIdx?null:this.items.slice(r+1,this.lastIdx+1);return this.lastIdx=r,n}peek(){if(this.length!==0)return this.items[this.firstIdx]}peekLast(){if(this.length!==0)return this.items[this.lastIdx]}dequeue(){let e=this.items[this.firstIdx];return this.firstIdx++,e}removeLast(){let e=this.items[this.lastIdx];return this.lastIdx--,e}takeCount(e){let r=this.items.slice(this.firstIdx,this.firstIdx+e);return this.firstIdx+=e,r}};ht.ArrayQueue=VJ;var HJ=class t{static{this.empty=new t(e=>{})}constructor(e){this.iterate=e}forEach(e){this.iterate(r=>(e(r),!0))}toArray(){let e=[];return this.iterate(r=>(e.push(r),!0)),e}filter(e){return new t(r=>this.iterate(n=>e(n)?r(n):!0))}map(e){return new t(r=>this.iterate(n=>r(e(n))))}some(e){let r=!1;return this.iterate(n=>(r=e(n),!r)),r}findFirst(e){let r;return this.iterate(n=>e(n)?(r=n,!1):!0),r}findLast(e){let r;return this.iterate(n=>(e(n)&&(r=n),!0)),r}findLastMaxBy(e){let r,n=!0;return this.iterate(o=>((n||d_.isGreaterThan(e(o,r)))&&(n=!1,r=o),!0)),r}};ht.CallbackIterable=HJ;var GJ=class t{constructor(e){this._indexMap=e}static createSortPermutation(e,r){let n=Array.from(e.keys()).sort((o,s)=>r(e[o],e[s]));return new t(n)}apply(e){return e.map((r,n)=>e[this._indexMap[n]])}inverse(){let e=this._indexMap.slice();for(let r=0;r<this._indexMap.length;r++)e[this._indexMap[r]]=r;return new t(e)}};ht.Permutation=GJ;async function K5t(t,e){return(await Promise.all(t.map(async(n,o)=>({element:n,ok:await e(n,o)})))).find(n=>n.ok)?.element}function Y5t(t){return t.reduce((e,r)=>e+r,0)}function Q5t(t,e){return t.reduce((r,n)=>r+e(n),0)}});var f_=m(mi=>{"use strict";var WRe,KRe,YRe;Object.defineProperty(mi,"__esModule",{value:!0});mi.NKeyMap=mi.SetMap=mi.BidirectionalMap=mi.CounterSet=mi.MRUCache=mi.LRUCache=mi.LinkedMap=mi.ResourceSet=mi.ResourceMap=void 0;mi.getOrSet=Z5t;mi.mapToString=J5t;mi.setToString=X5t;mi.mapsStrictEqualIgnoreOrder=tMt;function Z5t(t,e,r){let n=t.get(e);return n===void 0&&(n=r,t.set(e,n)),n}function J5t(t){let e=[];return t.forEach((r,n)=>{e.push(`${n} => ${r}`)}),`Map(${t.size}) {${e.join(", ")}}`}function X5t(t){let e=[];return t.forEach(r=>{e.push(r)}),`Set(${t.size}) {${e.join(", ")}}`}var zJ=class{constructor(e,r){this.uri=e,this.value=r}};function eMt(t){return Array.isArray(t)}var j2=class t{static{this.defaultToKey=e=>e.toString()}constructor(e,r){if(this[WRe]="ResourceMap",e instanceof t)this.map=new Map(e.map),this.toKey=r??t.defaultToKey;else if(eMt(e)){this.map=new Map,this.toKey=r??t.defaultToKey;for(let[n,o]of e)this.set(n,o)}else this.map=new Map,this.toKey=e??t.defaultToKey}set(e,r){return this.map.set(this.toKey(e),new zJ(e,r)),this}get(e){return this.map.get(this.toKey(e))?.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,r){typeof r<"u"&&(e=e.bind(r));for(let[n,o]of this.map)e(o.value,o.uri,this)}*values(){for(let e of this.map.values())yield e.value}*keys(){for(let e of this.map.values())yield e.uri}*entries(){for(let e of this.map.values())yield[e.uri,e.value]}*[(WRe=Symbol.toStringTag,Symbol.iterator)](){for(let[,e]of this.map)yield[e.uri,e.value]}};mi.ResourceMap=j2;var WJ=class{constructor(e,r){this[KRe]="ResourceSet",!e||typeof e=="function"?this._map=new j2(e):(this._map=new j2(r),e.forEach(this.add,this))}get size(){return this._map.size}add(e){return this._map.set(e,e),this}clear(){this._map.clear()}delete(e){return this._map.delete(e)}forEach(e,r){this._map.forEach((n,o)=>e.call(r,o,o,this))}has(e){return this._map.has(e)}entries(){return this._map.entries()}keys(){return this._map.keys()}values(){return this._map.keys()}[(KRe=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}};mi.ResourceSet=WJ;var z6=class{constructor(){this[YRe]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,r=0){let n=this._map.get(e);if(n)return r!==0&&this.touch(n,r),n.value}set(e,r,n=0){let o=this._map.get(e);if(o)o.value=r,n!==0&&this.touch(o,n);else{switch(o={key:e,value:r,next:void 0,previous:void 0},n){case 0:this.addItemLast(o);break;case 1:this.addItemFirst(o);break;case 2:this.addItemLast(o);break;default:this.addItemLast(o);break}this._map.set(e,o),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let r=this._map.get(e);if(r)return this._map.delete(e),this.removeItem(r),this._size--,r.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,r){let n=this._state,o=this._head;for(;o;){if(r?e.bind(r)(o.value,o.key,this):e(o.value,o.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");o=o.next}}keys(){let e=this,r=this._state,n=this._head,o={[Symbol.iterator](){return o},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let s={value:n.key,done:!1};return n=n.next,s}else return{value:void 0,done:!0}}};return o}values(){let e=this,r=this._state,n=this._head,o={[Symbol.iterator](){return o},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let s={value:n.value,done:!1};return n=n.next,s}else return{value:void 0,done:!0}}};return o}entries(){let e=this,r=this._state,n=this._head,o={[Symbol.iterator](){return o},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let s={value:[n.key,n.value],done:!1};return n=n.next,s}else return{value:void 0,done:!0}}};return o}[(YRe=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let r=this._head,n=this.size;for(;r&&n>e;)this._map.delete(r.key),r=r.next,n--;this._head=r,this._size=n,r&&(r.previous=void 0),this._state++}trimNew(e){if(e>=this.size)return;if(e===0){this.clear();return}let r=this._tail,n=this.size;for(;r&&n>e;)this._map.delete(r.key),r=r.previous,n--;this._tail=r,this._size=n,r&&(r.next=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let r=e.next,n=e.previous;if(!r||!n)throw new Error("Invalid list");r.previous=n,n.next=r}e.next=void 0,e.previous=void 0,this._state++}touch(e,r){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(r!==1&&r!==2)){if(r===1){if(e===this._head)return;let n=e.next,o=e.previous;e===this._tail?(o.next=void 0,this._tail=o):(n.previous=o,o.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(r===2){if(e===this._tail)return;let n=e.next,o=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=o,o.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((r,n)=>{e.push([n,r])}),e}fromJSON(e){this.clear();for(let[r,n]of e)this.set(r,n)}};mi.LinkedMap=z6;var W6=class extends z6{constructor(e,r=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,r),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,r=2){return super.get(e,r)}peek(e){return super.get(e,0)}set(e,r){return super.set(e,r,2),this}checkTrim(){this.size>this._limit&&this.trim(Math.round(this._limit*this._ratio))}},KJ=class extends W6{constructor(e,r=1){super(e,r)}trim(e){this.trimOld(e)}set(e,r){return super.set(e,r),this.checkTrim(),this}};mi.LRUCache=KJ;var YJ=class extends W6{constructor(e,r=1){super(e,r)}trim(e){this.trimNew(e)}set(e,r){return this._limit<=this.size&&!this.has(e)&&this.trim(Math.round(this._limit*this._ratio)-1),super.set(e,r),this}};mi.MRUCache=YJ;var QJ=class{constructor(){this.map=new Map}add(e){return this.map.set(e,(this.map.get(e)||0)+1),this}delete(e){let r=this.map.get(e)||0;return r===0?!1:(r--,r===0?this.map.delete(e):this.map.set(e,r),!0)}has(e){return this.map.has(e)}};mi.CounterSet=QJ;var ZJ=class{constructor(e){if(this._m1=new Map,this._m2=new Map,e)for(let[r,n]of e)this.set(r,n)}clear(){this._m1.clear(),this._m2.clear()}set(e,r){this._m1.set(e,r),this._m2.set(r,e)}get(e){return this._m1.get(e)}getKey(e){return this._m2.get(e)}delete(e){let r=this._m1.get(e);return r===void 0?!1:(this._m1.delete(e),this._m2.delete(r),!0)}forEach(e,r){this._m1.forEach((n,o)=>{e.call(r,n,o,this)})}keys(){return this._m1.keys()}values(){return this._m1.values()}};mi.BidirectionalMap=ZJ;var JJ=class{constructor(){this.map=new Map}add(e,r){let n=this.map.get(e);n||(n=new Set,this.map.set(e,n)),n.add(r)}delete(e,r){let n=this.map.get(e);n&&(n.delete(r),n.size===0&&this.map.delete(e))}forEach(e,r){let n=this.map.get(e);n&&n.forEach(r)}get(e){let r=this.map.get(e);return r||new Set}};mi.SetMap=JJ;function tMt(t,e){if(t===e)return!0;if(t.size!==e.size)return!1;for(let[r,n]of t)if(!e.has(r)||e.get(r)!==n)return!1;for(let[r]of e)if(!t.has(r))return!1;return!0}var XJ=class{constructor(){this._data=new Map}set(e,...r){let n=this._data;for(let o=0;o<r.length-1;o++)n.has(r[o])||n.set(r[o],new Map),n=n.get(r[o]);n.set(r[r.length-1],e)}get(...e){let r=this._data;for(let n=0;n<e.length-1;n++){if(!r.has(e[n]))return;r=r.get(e[n])}return r.get(e[e.length-1])}clear(){this._data.clear()}*values(){function*e(r){for(let n of r.values())n instanceof Map?yield*e(n):yield n}yield*e(this._data)}toString(){let e=(r,n)=>{let o="";for(let[s,a]of r)o+=`${"  ".repeat(n)}${s}: `,a instanceof Map?o+=`
`+e(a,n+1):o+=`${a}
`;return o};return e(this._data,0)}};mi.NKeyMap=XJ});var qi=m(p_=>{"use strict";Object.defineProperty(p_,"__esModule",{value:!0});p_.ok=rMt;p_.assertNever=nMt;p_.assert=iMt;p_.softAssert=oMt;p_.assertFn=sMt;p_.checkAdjacentItems=aMt;var B2=Gr();function rMt(t,e){if(!t)throw new Error(e?`Assertion failed (${e})`:"Assertion Failed")}function nMt(t,e="Unreachable"){throw new Error(e)}function iMt(t,e="unexpected state"){if(!t)throw typeof e=="string"?new B2.BugIndicatingError(`Assertion Failed: ${e}`):e}function oMt(t,e="Soft Assertion Failed"){t||(0,B2.onUnexpectedError)(new B2.BugIndicatingError(e))}function sMt(t){if(!t()){debugger;t(),(0,B2.onUnexpectedError)(new B2.BugIndicatingError("Assertion Failed"))}}function aMt(t,e){let r=0;for(;r<t.length-1;){let n=t[r],o=t[r+1];if(!e(n,o))return!1;r++}return!0}});var Ol=m(Dn=>{"use strict";Object.defineProperty(Dn,"__esModule",{value:!0});Dn.isOneOf=void 0;Dn.isString=eX;Dn.isStringArray=lMt;Dn.isArrayOf=QRe;Dn.isObject=ZRe;Dn.isTypedArray=uMt;Dn.isNumber=dMt;Dn.isIterable=fMt;Dn.isAsyncIterable=pMt;Dn.isBoolean=hMt;Dn.isUndefined=JRe;Dn.isDefined=mMt;Dn.isUndefinedOrNull=K6;Dn.assertType=gMt;Dn.assertReturnsDefined=_Mt;Dn.assertDefined=vMt;Dn.assertReturnsAllDefined=yMt;Dn.typeCheck=TMt;Dn.isEmptyObject=bMt;Dn.isFunction=tX;Dn.areFunctions=CMt;Dn.validateConstraints=AMt;Dn.validateConstraint=XRe;Dn.upcast=xMt;var cMt=qi();function eX(t){return typeof t=="string"}function lMt(t){return QRe(t,eX)}function QRe(t,e){return Array.isArray(t)&&t.every(e)}function ZRe(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)&&!(t instanceof RegExp)&&!(t instanceof Date)}function uMt(t){let e=Object.getPrototypeOf(Uint8Array);return typeof t=="object"&&t instanceof e}function dMt(t){return typeof t=="number"&&!isNaN(t)}function fMt(t){return!!t&&typeof t[Symbol.iterator]=="function"}function pMt(t){return!!t&&typeof t[Symbol.asyncIterator]=="function"}function hMt(t){return t===!0||t===!1}function JRe(t){return typeof t>"u"}function mMt(t){return!K6(t)}function K6(t){return JRe(t)||t===null}function gMt(t,e){if(!t)throw new Error(e?`Unexpected type, expected '${e}'`:"Unexpected type")}function _Mt(t){return(0,cMt.assert)(t!=null,"Argument is `undefined` or `null`."),t}function vMt(t,e){if(t==null)throw typeof e=="string"?new Error(e):e}function yMt(...t){let e=[];for(let r=0;r<t.length;r++){let n=t[r];if(K6(n))throw new Error(`Assertion Failed: argument at index ${r} is undefined or null`);e.push(n)}return e}var EMt=(t,e)=>e.includes(t);Dn.isOneOf=EMt;function TMt(t){}var SMt=Object.prototype.hasOwnProperty;function bMt(t){if(!ZRe(t))return!1;for(let e in t)if(SMt.call(t,e))return!1;return!0}function tX(t){return typeof t=="function"}function CMt(...t){return t.length>0&&t.every(tX)}function AMt(t,e){let r=Math.min(t.length,e.length);for(let n=0;n<r;n++)XRe(t[n],e[n])}function XRe(t,e){if(eX(e)){if(typeof t!==e)throw new Error(`argument does not match constraint: typeof ${e}`)}else if(tX(e)){try{if(t instanceof e)return}catch{}if(!K6(t)&&t.constructor===e||e.length===1&&e.call(void 0,t)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}function xMt(t){return t}});var rX=m(Y6=>{"use strict";Object.defineProperty(Y6,"__esModule",{value:!0});Y6.Iterable=void 0;var wMt=Ol(),eOe;(function(t){function e(A){return!!A&&typeof A=="object"&&typeof A[Symbol.iterator]=="function"}t.is=e;let r=Object.freeze([]);function n(){return r}t.empty=n;function*o(A){yield A}t.single=o;function s(A){return e(A)?A:o(A)}t.wrap=s;function a(A){return A||r}t.from=a;function*c(A){for(let O=A.length-1;O>=0;O--)yield A[O]}t.reverse=c;function l(A){return!A||A[Symbol.iterator]().next().done===!0}t.isEmpty=l;function u(A){return A[Symbol.iterator]().next().value}t.first=u;function d(A,O){let L=0;for(let j of A)if(O(j,L++))return!0;return!1}t.some=d;function f(A,O){let L=0;for(let j of A)if(!O(j,L++))return!1;return!0}t.every=f;function p(A,O){for(let L of A)if(O(L))return L}t.find=p;function*h(A,O){for(let L of A)O(L)&&(yield L)}t.filter=h;function*_(A,O){let L=0;for(let j of A)yield O(j,L++)}t.map=_;function*g(A,O){let L=0;for(let j of A)yield*O(j,L++)}t.flatMap=g;function*v(...A){for(let O of A)(0,wMt.isIterable)(O)?yield*O:yield O}t.concat=v;function E(A,O,L){let j=L;for(let $ of A)j=O(j,$);return j}t.reduce=E;function y(A){let O=0;for(let L of A)O++;return O}t.length=y;function*S(A,O,L=A.length){for(O<-A.length&&(O=0),O<0&&(O+=A.length),L<0?L+=A.length:L>A.length&&(L=A.length);O<L;O++)yield A[O]}t.slice=S;function b(A,O=Number.POSITIVE_INFINITY){let L=[];if(O===0)return[L,A];let j=A[Symbol.iterator]();for(let $=0;$<O;$++){let Q=j.next();if(Q.done)return[L,t.empty()];L.push(Q.value)}return[L,{[Symbol.iterator](){return j}}]}t.consume=b;async function w(A){let O=[];for await(let L of A)O.push(L);return O}t.asyncToArray=w;async function P(A){let O=[];for await(let L of A)O=O.concat(L);return O}t.asyncToArrayFlat=P})(eOe||(Y6.Iterable=eOe={}))});var Ar=m(Lr=>{"use strict";Object.defineProperty(Lr,"__esModule",{value:!0});Lr.DisposableMap=Lr.ImmortalReference=Lr.AsyncReferenceCollection=Lr.ReferenceCollection=Lr.RefCountedDisposable=Lr.MandatoryMutableDisposable=Lr.MutableDisposable=Lr.Disposable=Lr.DisposableStore=Lr.DisposableTracker=Lr.GCBasedDisposableTracker=void 0;Lr.setDisposableTracker=nOe;Lr.trackDisposable=TA;Lr.markAsDisposed=SA;Lr.markAsSingleton=LMt;Lr.isDisposable=iOe;Lr.dispose=Z6;Lr.disposeIfDisposable=kMt;Lr.combinedDisposable=DMt;Lr.toDisposable=fX;Lr.disposeOnReturn=UMt;Lr.thenIfNotDisposed=qMt;Lr.thenRegisterOrDispose=FMt;var tOe=Ui(),IMt=PJ(),PMt=f_(),RMt=qJ(),OMt=rX(),rOe=Gr(),MMt=!1,Xy=null,nX=class{constructor(){this._registry=new FinalizationRegistry(e=>{console.warn(`[LEAKED DISPOSABLE] ${e}`)})}trackDisposable(e){let r=new Error("CREATED via:").stack;this._registry.register(e,r,e)}setParent(e,r){r?this._registry.unregister(e):this.trackDisposable(e)}markAsDisposed(e){this._registry.unregister(e)}markAsSingleton(e){this._registry.unregister(e)}};Lr.GCBasedDisposableTracker=nX;var iX=class t{constructor(){this.livingDisposables=new Map}static{this.idx=0}getDisposableData(e){let r=this.livingDisposables.get(e);return r||(r={parent:null,source:null,isSingleton:!1,value:e,idx:t.idx++},this.livingDisposables.set(e,r)),r}trackDisposable(e){let r=this.getDisposableData(e);r.source||(r.source=new Error().stack)}setParent(e,r){let n=this.getDisposableData(e);n.parent=r}markAsDisposed(e){this.livingDisposables.delete(e)}markAsSingleton(e){this.getDisposableData(e).isSingleton=!0}getRootParent(e,r){let n=r.get(e);if(n)return n;let o=e.parent?this.getRootParent(this.getDisposableData(e.parent),r):e;return r.set(e,o),o}getTrackedDisposables(){let e=new Map;return[...this.livingDisposables.entries()].filter(([,n])=>n.source!==null&&!this.getRootParent(n,e).isSingleton).flatMap(([n])=>n)}computeLeakingDisposables(e=10,r){let n;if(r)n=r;else{let l=new Map,u=[...this.livingDisposables.values()].filter(f=>f.source!==null&&!this.getRootParent(f,l).isSingleton);if(u.length===0)return;let d=new Set(u.map(f=>f.value));if(n=u.filter(f=>!(f.parent&&d.has(f.parent))),n.length===0)throw new Error("There are cyclic diposable chains!")}if(!n)return;function o(l){function u(f,p){for(;f.length>0&&p.some(h=>typeof h=="string"?h===f[0]:f[0].match(h));)f.shift()}let d=l.source.split(`
`).map(f=>f.trim().replace("at ","")).filter(f=>f!=="");return u(d,["Error",/^trackDisposable \(.*\)$/,/^DisposableTracker.trackDisposable \(.*\)$/]),d.reverse()}let s=new PMt.SetMap;for(let l of n){let u=o(l);for(let d=0;d<=u.length;d++)s.add(u.slice(0,d).join(`
`),l)}n.sort((0,tOe.compareBy)(l=>l.idx,tOe.numberComparator));let a="",c=0;for(let l of n.slice(0,e)){c++;let u=o(l),d=[];for(let f=0;f<u.length;f++){let p=u[f];p=`(shared with ${s.get(u.slice(0,f+1).join(`
`)).size}/${n.length} leaks) at ${p}`;let _=s.get(u.slice(0,f).join(`
`)),g=(0,IMt.groupBy)([..._].map(v=>o(v)[f]),v=>v);delete g[u[f]];for(let[v,E]of Object.entries(g))E&&d.unshift(`    - stacktraces of ${E.length} other leaks continue with ${v}`);d.unshift(p)}a+=`


==================== Leaking disposable ${c}/${n.length}: ${l.value.constructor.name} ====================
${d.join(`
`)}
============================================================

`}return n.length>e&&(a+=`


... and ${n.length-e} more leaking disposables

`),{leaks:n,details:a}}};Lr.DisposableTracker=iX;function nOe(t){Xy=t}if(MMt){let t="__is_disposable_tracked__";nOe(new class{trackDisposable(e){let r=new Error("Potentially leaked disposable").stack;setTimeout(()=>{e[t]||console.log(r)},3e3)}setParent(e,r){if(e&&e!==EA.None)try{e[t]=!0}catch{}}markAsDisposed(e){if(e&&e!==EA.None)try{e[t]=!0}catch{}}markAsSingleton(e){}})}function TA(t){return Xy?.trackDisposable(t),t}function SA(t){Xy?.markAsDisposed(t)}function eE(t,e){Xy?.setParent(t,e)}function NMt(t,e){if(Xy)for(let r of t)Xy.setParent(r,e)}function LMt(t){return Xy?.markAsSingleton(t),t}function iOe(t){return typeof t=="object"&&t!==null&&typeof t.dispose=="function"&&t.dispose.length===0}function Z6(t){if(OMt.Iterable.is(t)){let e=[];for(let r of t)if(r)try{r.dispose()}catch(n){e.push(n)}if(e.length===1)throw e[0];if(e.length>1)throw new AggregateError(e,"Encountered errors while disposing of store");return Array.isArray(t)?[]:t}else if(t)return t.dispose(),t}function kMt(t){for(let e of t)iOe(e)&&e.dispose();return[]}function DMt(...t){let e=fX(()=>Z6(t));return NMt(t,e),e}var oX=class{constructor(e){this._isDisposed=!1,this._fn=e,TA(this)}dispose(){if(!this._isDisposed){if(!this._fn)throw new Error("Unbound disposable context: Need to use an arrow function to preserve the value of this");this._isDisposed=!0,SA(this),this._fn()}}};function fX(t){return new oX(t)}var $2=class t{static{this.DISABLE_DISPOSED_WARNING=!1}constructor(){this._toDispose=new Set,this._isDisposed=!1,TA(this)}dispose(){this._isDisposed||(SA(this),this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{Z6(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e||e===EA.None)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return eE(e,this),this._isDisposed?t.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}delete(e){if(e){if(e===this)throw new Error("Cannot dispose a disposable on itself!");this._toDispose.delete(e),e.dispose()}}deleteAndLeak(e){e&&this._toDispose.has(e)&&(this._toDispose.delete(e),eE(e,null))}assertNotDisposed(){this._isDisposed&&(0,rOe.onUnexpectedError)(new rOe.BugIndicatingError("Object disposed"))}};Lr.DisposableStore=$2;var EA=class{static{this.None=Object.freeze({dispose(){}})}constructor(){this._store=new $2,TA(this),eE(this._store,this)}dispose(){SA(this),this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}};Lr.Disposable=EA;var Q6=class{constructor(){this._isDisposed=!1,TA(this)}get value(){return this._isDisposed?void 0:this._value}set value(e){this._isDisposed||e===this._value||(this._value?.dispose(),e&&eE(e,this),this._value=e)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,SA(this),this._value?.dispose(),this._value=void 0}clearAndLeak(){let e=this._value;return this._value=void 0,e&&eE(e,null),e}};Lr.MutableDisposable=Q6;var sX=class{constructor(e){this._disposable=new Q6,this._isDisposed=!1,this._disposable.value=e}get value(){return this._disposable.value}set value(e){this._isDisposed||e===this._disposable.value||(this._disposable.value=e)}dispose(){this._isDisposed=!0,this._disposable.dispose()}};Lr.MandatoryMutableDisposable=sX;var aX=class{constructor(e){this._disposable=e,this._counter=1}acquire(){return this._counter++,this}release(){return--this._counter===0&&this._disposable.dispose(),this}};Lr.RefCountedDisposable=aX;var cX=class{constructor(){this.references=new Map}acquire(e,...r){let n=this.references.get(e);n||(n={counter:0,object:this.createReferencedObject(e,...r)},this.references.set(e,n));let{object:o}=n,s=(0,RMt.createSingleCallFunction)(()=>{--n.counter===0&&(this.destroyReferencedObject(e,n.object),this.references.delete(e))});return n.counter++,{object:o,dispose:s}}};Lr.ReferenceCollection=cX;var lX=class{constructor(e){this.referenceCollection=e}async acquire(e,...r){let n=this.referenceCollection.acquire(e,...r);try{return{object:await n.object,dispose:()=>n.dispose()}}catch(o){throw n.dispose(),o}}};Lr.AsyncReferenceCollection=lX;var uX=class{constructor(e){this.object=e}dispose(){}};Lr.ImmortalReference=uX;function UMt(t){let e=new $2;try{t(e)}finally{e.dispose()}}var dX=class{constructor(){this._store=new Map,this._isDisposed=!1,TA(this)}dispose(){SA(this),this._isDisposed=!0,this.clearAndDisposeAll()}clearAndDisposeAll(){if(this._store.size)try{Z6(this._store.values())}finally{this._store.clear()}}has(e){return this._store.has(e)}get size(){return this._store.size}get(e){return this._store.get(e)}set(e,r,n=!1){this._isDisposed&&console.warn(new Error("Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!").stack),n||this._store.get(e)?.dispose(),this._store.set(e,r),eE(r,this)}deleteAndDispose(e){this._store.get(e)?.dispose(),this._store.delete(e)}deleteAndLeak(e){let r=this._store.get(e);return r&&eE(r,null),this._store.delete(e),r}keys(){return this._store.keys()}values(){return this._store.values()}[Symbol.iterator](){return this._store[Symbol.iterator]()}};Lr.DisposableMap=dX;function qMt(t,e){let r=!1;return t.then(n=>{r||e(n)}),fX(()=>{r=!0})}function FMt(t,e){return t.then(r=>(e.isDisposed?r.dispose():e.add(r),r))}});var V2=m(J6=>{"use strict";Object.defineProperty(J6,"__esModule",{value:!0});J6.LinkedList=void 0;var ti=class t{static{this.Undefined=new t(void 0)}constructor(e){this.element=e,this.next=t.Undefined,this.prev=t.Undefined}},pX=class{constructor(){this._first=ti.Undefined,this._last=ti.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===ti.Undefined}clear(){let e=this._first;for(;e!==ti.Undefined;){let r=e.next;e.prev=ti.Undefined,e.next=ti.Undefined,e=r}this._first=ti.Undefined,this._last=ti.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,r){let n=new ti(e);if(this._first===ti.Undefined)this._first=n,this._last=n;else if(r){let s=this._last;this._last=n,n.prev=s,s.next=n}else{let s=this._first;this._first=n,n.next=s,s.prev=n}this._size+=1;let o=!1;return()=>{o||(o=!0,this._remove(n))}}shift(){if(this._first!==ti.Undefined){let e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==ti.Undefined){let e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==ti.Undefined&&e.next!==ti.Undefined){let r=e.prev;r.next=e.next,e.next.prev=r}else e.prev===ti.Undefined&&e.next===ti.Undefined?(this._first=ti.Undefined,this._last=ti.Undefined):e.next===ti.Undefined?(this._last=this._last.prev,this._last.next=ti.Undefined):e.prev===ti.Undefined&&(this._first=this._first.next,this._first.prev=ti.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==ti.Undefined;)yield e.element,e=e.next}};J6.LinkedList=pX});var H2=m(X6=>{"use strict";Object.defineProperty(X6,"__esModule",{value:!0});X6.StopWatch=void 0;var jMt=globalThis.performance.now.bind(globalThis.performance),hX=class t{static create(e){return new t(e)}constructor(e){this._now=e===!1?Date.now:jMt,this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}};X6.StopWatch=hX});var Fi=m(tn=>{"use strict";Object.defineProperty(tn,"__esModule",{value:!0});tn.ValueWithChangeEvent=tn.Relay=tn.EventBufferer=tn.DynamicListEventMultiplexer=tn.EventMultiplexer=tn.MicrotaskEmitter=tn.DebounceEmitter=tn.PauseableEmitter=tn.AsyncEmitter=tn.createEventDeliveryQueue=tn.Emitter=tn.ListenerRefusalError=tn.ListenerLeakError=tn.EventProfiling=tn.Event=void 0;tn.setGlobalLeakWarningThreshold=GMt;tn.trackSetChanges=YMt;var BMt=PJ(),G2=Gr(),$Mt=qJ(),Ml=Ar(),sOe=V2(),VMt=H2(),oOe=!1,HMt=!1,e8;(function(t){t.None=()=>Ml.Disposable.None;function e(K){if(HMt){let{onDidAddListener:N}=K,G=W2.create(),Y=0;K.onDidAddListener=()=>{++Y===2&&(console.warn("snapshotted emitter LIKELY used public and SHOULD HAVE BEEN created with DisposableStore. snapshotted here"),G.print()),N?.()}}}function r(K,N){return h(K,()=>{},0,void 0,!0,void 0,N)}t.defer=r;function n(K){return(N,G=null,Y)=>{let J=!1,ie;return ie=K(oe=>{if(!J)return ie?ie.dispose():J=!0,N.call(G,oe)},null,Y),J&&ie.dispose(),ie}}t.once=n;function o(K,N){return t.once(t.filter(K,N))}t.onceIf=o;function s(K,N,G){return f((Y,J=null,ie)=>K(oe=>Y.call(J,N(oe)),null,ie),G)}t.map=s;function a(K,N,G){return f((Y,J=null,ie)=>K(oe=>{N(oe),Y.call(J,oe)},null,ie),G)}t.forEach=a;function c(K,N,G){return f((Y,J=null,ie)=>K(oe=>N(oe)&&Y.call(J,oe),null,ie),G)}t.filter=c;function l(K){return K}t.signal=l;function u(...K){return(N,G=null,Y)=>{let J=(0,Ml.combinedDisposable)(...K.map(ie=>ie(oe=>N.call(G,oe))));return p(J,Y)}}t.any=u;function d(K,N,G,Y){let J=G;return s(K,ie=>(J=N(J,ie),J),Y)}t.reduce=d;function f(K,N){let G,Y={onWillAddFirstListener(){G=K(J.fire,J)},onDidRemoveLastListener(){G?.dispose()}};N||e(Y);let J=new ka(Y);return N?.add(J),J.event}function p(K,N){return N instanceof Array?N.push(K):N&&N.add(K),K}function h(K,N,G=100,Y=!1,J=!1,ie,oe){let ne,de,Ee,Me=0,He,Je={leakWarningThreshold:ie,onWillAddFirstListener(){ne=K(St=>{Me++,de=N(de,St),Y&&!Ee&&(lt.fire(de),de=void 0),He=()=>{let Dt=de;de=void 0,Ee=void 0,(!Y||Me>1)&&lt.fire(Dt),Me=0},typeof G=="number"?(Ee&&clearTimeout(Ee),Ee=setTimeout(He,G)):Ee===void 0&&(Ee=null,queueMicrotask(He))})},onWillRemoveListener(){J&&Me>0&&He?.()},onDidRemoveLastListener(){He=void 0,ne.dispose()}};oe||e(Je);let lt=new ka(Je);return oe?.add(lt),lt.event}t.debounce=h;function _(K,N=0,G){return t.debounce(K,(Y,J)=>Y?(Y.push(J),Y):[J],N,void 0,!0,void 0,G)}t.accumulate=_;function g(K,N=(Y,J)=>Y===J,G){let Y=!0,J;return c(K,ie=>{let oe=Y||!N(ie,J);return Y=!1,J=ie,oe},G)}t.latch=g;function v(K,N,G){return[t.filter(K,N,G),t.filter(K,Y=>!N(Y),G)]}t.split=v;function E(K,N=!1,G=[],Y){let J=G.slice(),ie=K(de=>{J?J.push(de):ne.fire(de)});Y&&Y.add(ie);let oe=()=>{J?.forEach(de=>ne.fire(de)),J=null},ne=new ka({onWillAddFirstListener(){ie||(ie=K(de=>ne.fire(de)),Y&&Y.add(ie))},onDidAddFirstListener(){J&&(N?setTimeout(oe):oe())},onDidRemoveLastListener(){ie&&ie.dispose(),ie=null}});return Y&&Y.add(ne),ne.event}t.buffer=E;function y(K,N){return(Y,J,ie)=>{let oe=N(new b);return K(function(ne){let de=oe.evaluate(ne);de!==S&&Y.call(J,de)},void 0,ie)}}t.chain=y;let S=Symbol("HaltChainable");class b{constructor(){this.steps=[]}map(N){return this.steps.push(N),this}forEach(N){return this.steps.push(G=>(N(G),G)),this}filter(N){return this.steps.push(G=>N(G)?G:S),this}reduce(N,G){let Y=G;return this.steps.push(J=>(Y=N(Y,J),Y)),this}latch(N=(G,Y)=>G===Y){let G=!0,Y;return this.steps.push(J=>{let ie=G||!N(J,Y);return G=!1,Y=J,ie?J:S}),this}evaluate(N){for(let G of this.steps)if(N=G(N),N===S)break;return N}}function w(K,N,G=Y=>Y){let Y=(...ne)=>oe.fire(G(...ne)),J=()=>K.on(N,Y),ie=()=>K.removeListener(N,Y),oe=new ka({onWillAddFirstListener:J,onDidRemoveLastListener:ie});return oe.event}t.fromNodeEventEmitter=w;function P(K,N,G=Y=>Y){let Y=(...ne)=>oe.fire(G(...ne)),J=()=>K.addEventListener(N,Y),ie=()=>K.removeEventListener(N,Y),oe=new ka({onWillAddFirstListener:J,onDidRemoveLastListener:ie});return oe.event}t.fromDOMEventEmitter=P;function A(K,N){let G,Y=new Promise((J,ie)=>{let oe=n(K)(J,null,N);G=()=>oe.dispose()});return Y.cancel=G,Y}t.toPromise=A;function O(K,N){return K(G=>N.fire(G))}t.forward=O;function L(K,N,G){return N(G),K(Y=>N(Y))}t.runAndSubscribe=L;class j{constructor(N,G){this._observable=N,this._counter=0,this._hasChanged=!1;let Y={onWillAddFirstListener:()=>{N.addObserver(this),this._observable.reportChanges()},onDidRemoveLastListener:()=>{N.removeObserver(this)}};G||e(Y),this.emitter=new ka(Y),G&&G.add(this.emitter)}beginUpdate(N){this._counter++}handlePossibleChange(N){}handleChange(N,G){this._hasChanged=!0}endUpdate(N){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function $(K,N){return new j(K,N).emitter.event}t.fromObservable=$;function Q(K){return(N,G,Y)=>{let J=0,ie=!1,oe={beginUpdate(){J++},endUpdate(){J--,J===0&&(K.reportChanges(),ie&&(ie=!1,N.call(G)))},handlePossibleChange(){},handleChange(){ie=!0}};K.addObserver(oe),K.reportChanges();let ne={dispose(){K.removeObserver(oe)}};return Y instanceof Ml.DisposableStore?Y.add(ne):Array.isArray(Y)&&Y.push(ne),ne}}t.fromObservableLight=Q})(e8||(tn.Event=e8={}));var t8=class t{static{this.all=new Set}static{this._idPool=0}constructor(e){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${e}_${t._idPool++}`,t.all.add(this)}start(e){this._stopWatch=new VMt.StopWatch,this.listenerCount=e}stop(){if(this._stopWatch){let e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}};tn.EventProfiling=t8;var z2=-1;function GMt(t){let e=z2;return z2=t,{dispose(){z2=e}}}var mX=class t{static{this._idPool=1}constructor(e,r,n=(t._idPool++).toString(16).padStart(3,"0")){this._errorHandler=e,this.threshold=r,this.name=n,this._warnCountdown=0}dispose(){this._stacks?.clear()}check(e,r){let n=this.threshold;if(n<=0||r<n)return;this._stacks||(this._stacks=new Map);let o=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,o+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=n*.5;let[s,a]=this.getMostFrequentStack(),c=`[${this.name}] potential listener LEAK detected, having ${r} listeners already. MOST frequent listener (${a}):`;console.warn(c),console.warn(s);let l=new r8(c,s);this._errorHandler(l)}return()=>{let s=this._stacks.get(e.value)||0;this._stacks.set(e.value,s-1)}}getMostFrequentStack(){if(!this._stacks)return;let e,r=0;for(let[n,o]of this._stacks)(!e||r<o)&&(e=[n,o],r=o);return e}},W2=class t{static create(){let e=new Error;return new t(e.stack??"")}constructor(e){this.value=e}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},r8=class extends Error{constructor(e,r){super(e),this.name="ListenerLeakError",this.stack=r}};tn.ListenerLeakError=r8;var n8=class extends Error{constructor(e,r){super(e),this.name="ListenerRefusalError",this.stack=r}};tn.ListenerRefusalError=n8;var zMt=0,bA=class{constructor(e){this.value=e,this.id=zMt++}},WMt=2,aOe=(t,e)=>{if(t instanceof bA)e(t);else for(let r=0;r<t.length;r++){let n=t[r];n&&e(n)}},ka=class{constructor(e){this._size=0,this._options=e,this._leakageMon=z2>0||this._options?.leakWarningThreshold?new mX(e?.onListenerError??G2.onUnexpectedError,this._options?.leakWarningThreshold??z2):void 0,this._perfMon=this._options?._profName?new t8(this._options._profName):void 0,this._deliveryQueue=this._options?.deliveryQueue}dispose(){if(!this._disposed){if(this._disposed=!0,this._deliveryQueue?.current===this&&this._deliveryQueue.reset(),this._listeners){if(oOe){let e=this._listeners;queueMicrotask(()=>{aOe(e,r=>r.stack?.print())})}this._listeners=void 0,this._size=0}this._options?.onDidRemoveLastListener?.(),this._leakageMon?.dispose()}}get event(){return this._event??=(e,r,n)=>{if(this._leakageMon&&this._size>this._leakageMon.threshold**2){let l=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(l);let u=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],d=new n8(`${l}. HINT: Stack shows most frequent listener (${u[1]}-times)`,u[0]);return(this._options?.onListenerError||G2.onUnexpectedError)(d),Ml.Disposable.None}if(this._disposed)return Ml.Disposable.None;r&&(e=e.bind(r));let o=new bA(e),s,a;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(o.stack=W2.create(),s=this._leakageMon.check(o.stack,this._size+1)),oOe&&(o.stack=a??W2.create()),this._listeners?this._listeners instanceof bA?(this._deliveryQueue??=new i8,this._listeners=[this._listeners,o]):this._listeners.push(o):(this._options?.onWillAddFirstListener?.(this),this._listeners=o,this._options?.onDidAddFirstListener?.(this)),this._options?.onDidAddListener?.(this),this._size++;let c=(0,Ml.toDisposable)(()=>{s?.(),this._removeListener(o)});return n instanceof Ml.DisposableStore?n.add(c):Array.isArray(n)&&n.push(c),c},this._event}_removeListener(e){if(this._options?.onWillRemoveListener?.(this),!this._listeners)return;if(this._size===1){this._listeners=void 0,this._options?.onDidRemoveLastListener?.(this),this._size=0;return}let r=this._listeners,n=r.indexOf(e);if(n===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,r[n]=void 0;let o=this._deliveryQueue.current===this;if(this._size*WMt<=r.length){let s=0;for(let a=0;a<r.length;a++)r[a]?r[s++]=r[a]:o&&s<this._deliveryQueue.end&&(this._deliveryQueue.end--,s<this._deliveryQueue.i&&this._deliveryQueue.i--);r.length=s}}_deliver(e,r){if(!e)return;let n=this._options?.onListenerError||G2.onUnexpectedError;if(!n){e.value(r);return}try{e.value(r)}catch(o){n(o)}}_deliverQueue(e){let r=e.current._listeners;for(;e.i<e.end;)this._deliver(r[e.i++],e.value);e.reset()}fire(e){if(this._deliveryQueue?.current&&(this._deliverQueue(this._deliveryQueue),this._perfMon?.stop()),this._perfMon?.start(this._size),this._listeners)if(this._listeners instanceof bA)this._deliver(this._listeners,e);else{let r=this._deliveryQueue;r.enqueue(this,e,this._listeners.length),this._deliverQueue(r)}this._perfMon?.stop()}hasListeners(){return this._size>0}};tn.Emitter=ka;var KMt=()=>new i8;tn.createEventDeliveryQueue=KMt;var i8=class{constructor(){this.i=-1,this.end=0}enqueue(e,r,n){this.i=0,this.end=n,this.current=e,this.value=r}reset(){this.i=this.end,this.current=void 0,this.value=void 0}},gX=class extends ka{async fireAsync(e,r,n){if(this._listeners)for(this._asyncDeliveryQueue||(this._asyncDeliveryQueue=new sOe.LinkedList),aOe(this._listeners,o=>this._asyncDeliveryQueue.push([o.value,e]));this._asyncDeliveryQueue.size>0&&!r.isCancellationRequested;){let[o,s]=this._asyncDeliveryQueue.shift(),a=[],c={...s,token:r,waitUntil:l=>{if(Object.isFrozen(a))throw new Error("waitUntil can NOT be called asynchronous");n&&(l=n(l,o)),a.push(l)}};try{o(c)}catch(l){(0,G2.onUnexpectedError)(l);continue}Object.freeze(a),await Promise.allSettled(a).then(l=>{for(let u of l)u.status==="rejected"&&(0,G2.onUnexpectedError)(u.reason)})}}};tn.AsyncEmitter=gX;var o8=class extends ka{get isPaused(){return this._isPaused!==0}constructor(e){super(e),this._isPaused=0,this._eventQueue=new sOe.LinkedList,this._mergeFn=e?.merge}pause(){this._isPaused++}resume(){if(this._isPaused!==0&&--this._isPaused===0)if(this._mergeFn){if(this._eventQueue.size>0){let e=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(e))}}else for(;!this._isPaused&&this._eventQueue.size!==0;)super.fire(this._eventQueue.shift())}fire(e){this._size&&(this._isPaused!==0?this._eventQueue.push(e):super.fire(e))}};tn.PauseableEmitter=o8;var _X=class extends o8{constructor(e){super(e),this._delay=e.delay??100}fire(e){this._handle||(this.pause(),this._handle=setTimeout(()=>{this._handle=void 0,this.resume()},this._delay)),super.fire(e)}};tn.DebounceEmitter=_X;var vX=class extends ka{constructor(e){super(e),this._queuedEvents=[],this._mergeFn=e?.merge}fire(e){this.hasListeners()&&(this._queuedEvents.push(e),this._queuedEvents.length===1&&queueMicrotask(()=>{this._mergeFn?super.fire(this._mergeFn(this._queuedEvents)):this._queuedEvents.forEach(r=>super.fire(r)),this._queuedEvents=[]}))}};tn.MicrotaskEmitter=vX;var s8=class{constructor(){this.hasListeners=!1,this.events=[],this.emitter=new ka({onWillAddFirstListener:()=>this.onFirstListenerAdd(),onDidRemoveLastListener:()=>this.onLastListenerRemove()})}get event(){return this.emitter.event}add(e){let r={event:e,listener:null};this.events.push(r),this.hasListeners&&this.hook(r);let n=()=>{this.hasListeners&&this.unhook(r);let o=this.events.indexOf(r);this.events.splice(o,1)};return(0,Ml.toDisposable)((0,$Mt.createSingleCallFunction)(n))}onFirstListenerAdd(){this.hasListeners=!0,this.events.forEach(e=>this.hook(e))}onLastListenerRemove(){this.hasListeners=!1,this.events.forEach(e=>this.unhook(e))}hook(e){e.listener=e.event(r=>this.emitter.fire(r))}unhook(e){e.listener?.dispose(),e.listener=null}dispose(){this.emitter.dispose();for(let e of this.events)e.listener?.dispose();this.events=[]}};tn.EventMultiplexer=s8;var yX=class{constructor(e,r,n,o){this._store=new Ml.DisposableStore;let s=this._store.add(new s8),a=this._store.add(new Ml.DisposableMap);function c(l){a.set(l,s.add(o(l)))}for(let l of e)c(l);this._store.add(r(l=>{c(l)})),this._store.add(n(l=>{a.deleteAndDispose(l)})),this.event=s.event}dispose(){this._store.dispose()}};tn.DynamicListEventMultiplexer=yX;var EX=class{constructor(){this.data=[]}wrapEvent(e,r,n){return(o,s,a)=>e(c=>{let l=this.data[this.data.length-1];if(!r){l?l.buffers.push(()=>o.call(s,c)):o.call(s,c);return}let u=l;if(!u){o.call(s,r(n,c));return}u.items??=[],u.items.push(c),u.buffers.length===0&&l.buffers.push(()=>{u.reducedResult??=n?u.items.reduce(r,n):u.items.reduce(r),o.call(s,u.reducedResult)})},void 0,a)}bufferEvents(e){let r={buffers:new Array};this.data.push(r);let n=e();return this.data.pop(),r.buffers.forEach(o=>o()),n}};tn.EventBufferer=EX;var TX=class{constructor(){this.listening=!1,this.inputEvent=e8.None,this.inputEventListener=Ml.Disposable.None,this.emitter=new ka({onDidAddFirstListener:()=>{this.listening=!0,this.inputEventListener=this.inputEvent(this.emitter.fire,this.emitter)},onDidRemoveLastListener:()=>{this.listening=!1,this.inputEventListener.dispose()}}),this.event=this.emitter.event}set input(e){this.inputEvent=e,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=e(this.emitter.fire,this.emitter))}dispose(){this.inputEventListener.dispose(),this.emitter.dispose()}};tn.Relay=TX;var SX=class{static const(e){return new bX(e)}constructor(e){this._value=e,this._onDidChange=new ka,this.onDidChange=this._onDidChange.event}get value(){return this._value}set value(e){e!==this._value&&(this._value=e,this._onDidChange.fire(void 0))}};tn.ValueWithChangeEvent=SX;var bX=class{constructor(e){this.value=e,this.onDidChange=e8.None}};function YMt(t,e,r){let n=new Ml.DisposableMap,o=new Set(t());for(let a of o)n.set(a,r(a));let s=new Ml.DisposableStore;return s.add(e(()=>{let a=t(),c=(0,BMt.diffSets)(o,a);for(let l of c.removed)n.deleteAndDispose(l);for(let l of c.added)n.set(l,r(l));o=new Set(a)})),s.add(n),s}});var Oh=m(Rh=>{"use strict";Object.defineProperty(Rh,"__esModule",{value:!0});Rh.CancellationTokenPool=Rh.CancellationTokenSource=Rh.CancellationToken=void 0;Rh.cancelOnDispose=ZMt;var cOe=Fi(),QMt=Ar(),lOe=Object.freeze(function(t,e){let r=setTimeout(t.bind(e),0);return{dispose(){clearTimeout(r)}}}),a8;(function(t){function e(r){return r===t.None||r===t.Cancelled||r instanceof CA?!0:!r||typeof r!="object"?!1:typeof r.isCancellationRequested=="boolean"&&typeof r.onCancellationRequested=="function"}t.isCancellationToken=e,t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:cOe.Event.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:lOe})})(a8||(Rh.CancellationToken=a8={}));var CA=class{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?lOe:(this._emitter||(this._emitter=new cOe.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}},K2=class{constructor(e){this._token=void 0,this._parentListener=void 0,this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new CA),this._token}cancel(){this._token?this._token instanceof CA&&this._token.cancel():this._token=a8.Cancelled}dispose(e=!1){e&&this.cancel(),this._parentListener?.dispose(),this._token?this._token instanceof CA&&this._token.dispose():this._token=a8.None}};Rh.CancellationTokenSource=K2;function ZMt(t){let e=new K2;return t.add({dispose(){e.cancel()}}),e.token}var CX=class{constructor(){this._source=new K2,this._listeners=new QMt.DisposableStore,this._total=0,this._cancelled=0,this._isDone=!1}get token(){return this._source.token}add(e){if(this._isDone)return;if(this._total++,e.isCancellationRequested){this._cancelled++,this._check();return}let r=e.onCancellationRequested(()=>{r.dispose(),this._cancelled++,this._check()});this._listeners.add(r)}_check(){!this._isDone&&this._total>0&&this._total===this._cancelled&&(this._isDone=!0,this._listeners.dispose(),this._source.cancel())}dispose(){this._listeners.dispose(),this._source.dispose()}};Rh.CancellationTokenPool=CX});var AX=m(c8=>{"use strict";Object.defineProperty(c8,"__esModule",{value:!0});c8.getNLSMessages=JMt;c8.getNLSLanguage=XMt;function JMt(){return globalThis._VSCODE_NLS_MESSAGES}function XMt(){return globalThis._VSCODE_NLS_LANGUAGE}});var pOe=m(h_=>{"use strict";Object.defineProperty(h_,"__esModule",{value:!0});h_.getNLSMessages=h_.getNLSLanguage=void 0;h_.localize=tNt;h_.localize2=rNt;var uOe=AX(),dOe=AX();Object.defineProperty(h_,"getNLSLanguage",{enumerable:!0,get:function(){return dOe.getNLSLanguage}});Object.defineProperty(h_,"getNLSMessages",{enumerable:!0,get:function(){return dOe.getNLSMessages}});var eNt=(0,uOe.getNLSLanguage)()==="pseudo"||typeof document<"u"&&document.location&&typeof document.location.hash=="string"&&document.location.hash.indexOf("pseudo=true")>=0;function l8(t,e){let r;return e.length===0?r=t:r=t.replace(/\{(\d+)\}/g,(n,o)=>{let s=o[0],a=e[s],c=n;return typeof a=="string"?c=a:(typeof a=="number"||typeof a=="boolean"||a===void 0||a===null)&&(c=String(a)),c}),eNt&&(r="\uFF3B"+r.replace(/[aouei]/g,"$&$&")+"\uFF3D"),r}function tNt(t,e,...r){return l8(typeof t=="number"?fOe(t,e):e,r)}function fOe(t,e){let r=(0,uOe.getNLSMessages)()?.[t];if(typeof r!="string"){if(typeof e=="string")return e;throw new Error(`!!! NLS MISSING: ${t} !!!`)}return r}function rNt(t,e,...r){let n;typeof t=="number"?n=fOe(t,e):n=e;let o=l8(n,r);return{value:o,original:e===n?o:l8(e,r)}}});var m_=m(Ce=>{"use strict";var nNt=Ce&&Ce.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),iNt=Ce&&Ce.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),oNt=Ce&&Ce.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),o=0;o<n.length;o++)n[o]!=="default"&&nNt(r,e,n[o]);return iNt(r,e),r}})();Object.defineProperty(Ce,"__esModule",{value:!0});Ce.isAndroid=Ce.isEdge=Ce.isSafari=Ce.isFirefox=Ce.isChrome=Ce.OS=Ce.setTimeout0=Ce.setTimeout0IsFaster=Ce.translationsConfigFile=Ce.platformLocale=Ce.locale=Ce.Language=Ce.language=Ce.userAgent=Ce.platform=Ce.isCI=Ce.isMobile=Ce.isIOS=Ce.webWorkerOrigin=Ce.isWebWorker=Ce.isWeb=Ce.isElectron=Ce.isNative=Ce.isLinuxSnap=Ce.isLinux=Ce.isMacintosh=Ce.isWindows=Ce.LANGUAGE_DEFAULT=void 0;Ce.PlatformToString=cNt;Ce.isLittleEndian=lNt;Ce.isBigSurOrNewer=uNt;Ce.isTahoeOrNewer=dNt;var sNt=oNt(pOe());Ce.LANGUAGE_DEFAULT="en";var Z2=!1,J2=!1,Q2=!1,_Oe=!1,vOe=!1,wX=!1,yOe=!1,IX=!1,EOe=!1,TOe=!1,Y2,u8=Ce.LANGUAGE_DEFAULT,xX=Ce.LANGUAGE_DEFAULT,SOe,Mh,Nh=globalThis,_c;typeof Nh.vscode<"u"&&typeof Nh.vscode.process<"u"?_c=Nh.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(_c=process);var bOe=typeof _c?.versions?.electron=="string",aNt=bOe&&_c?.type==="renderer";if(typeof _c=="object"){Z2=_c.platform==="win32",J2=_c.platform==="darwin",Q2=_c.platform==="linux",_Oe=Q2&&!!_c.env.SNAP&&!!_c.env.SNAP_REVISION,yOe=bOe,EOe=!!_c.env.CI||!!_c.env.BUILD_ARTIFACTSTAGINGDIRECTORY||!!_c.env.GITHUB_WORKSPACE,Y2=Ce.LANGUAGE_DEFAULT,u8=Ce.LANGUAGE_DEFAULT;let t=_c.env.VSCODE_NLS_CONFIG;if(t)try{let e=JSON.parse(t);Y2=e.userLocale,xX=e.osLocale,u8=e.resolvedLanguage||Ce.LANGUAGE_DEFAULT,SOe=e.languagePack?.translationsConfigFile}catch{}vOe=!0}else typeof navigator=="object"&&!aNt?(Mh=navigator.userAgent,Z2=Mh.indexOf("Windows")>=0,J2=Mh.indexOf("Macintosh")>=0,IX=(Mh.indexOf("Macintosh")>=0||Mh.indexOf("iPad")>=0||Mh.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,Q2=Mh.indexOf("Linux")>=0,TOe=Mh?.indexOf("Mobi")>=0,wX=!0,u8=sNt.getNLSLanguage()||Ce.LANGUAGE_DEFAULT,Y2=navigator.language.toLowerCase(),xX=Y2):console.error("Unable to resolve platform.");function cNt(t){switch(t){case 0:return"Web";case 1:return"Mac";case 2:return"Linux";case 3:return"Windows"}}var d8=0;J2?d8=1:Z2?d8=3:Q2&&(d8=2);Ce.isWindows=Z2;Ce.isMacintosh=J2;Ce.isLinux=Q2;Ce.isLinuxSnap=_Oe;Ce.isNative=vOe;Ce.isElectron=yOe;Ce.isWeb=wX;Ce.isWebWorker=wX&&typeof Nh.importScripts=="function";Ce.webWorkerOrigin=Ce.isWebWorker?Nh.origin:void 0;Ce.isIOS=IX;Ce.isMobile=TOe;Ce.isCI=EOe;Ce.platform=d8;Ce.userAgent=Mh;Ce.language=u8;var hOe;(function(t){function e(){return Ce.language}t.value=e;function r(){return Ce.language.length===2?Ce.language==="en":Ce.language.length>=3?Ce.language[0]==="e"&&Ce.language[1]==="n"&&Ce.language[2]==="-":!1}t.isDefaultVariant=r;function n(){return Ce.language==="en"}t.isDefault=n})(hOe||(Ce.Language=hOe={}));Ce.locale=Y2;Ce.platformLocale=xX;Ce.translationsConfigFile=SOe;Ce.setTimeout0IsFaster=typeof Nh.postMessage=="function"&&!Nh.importScripts;Ce.setTimeout0=(()=>{if(Ce.setTimeout0IsFaster){let t=[];Nh.addEventListener("message",r=>{if(r.data&&r.data.vscodeScheduleAsyncWork)for(let n=0,o=t.length;n<o;n++){let s=t[n];if(s.id===r.data.vscodeScheduleAsyncWork){t.splice(n,1),s.callback();return}}});let e=0;return r=>{let n=++e;t.push({id:n,callback:r}),Nh.postMessage({vscodeScheduleAsyncWork:n},"*")}}return t=>setTimeout(t)})();Ce.OS=J2||IX?2:Z2?1:3;var mOe=!0,gOe=!1;function lNt(){if(!gOe){gOe=!0;let t=new Uint8Array(2);t[0]=1,t[1]=2,mOe=new Uint16Array(t.buffer)[0]===513}return mOe}Ce.isChrome=!!(Ce.userAgent&&Ce.userAgent.indexOf("Chrome")>=0);Ce.isFirefox=!!(Ce.userAgent&&Ce.userAgent.indexOf("Firefox")>=0);Ce.isSafari=!!(!Ce.isChrome&&Ce.userAgent&&Ce.userAgent.indexOf("Safari")>=0);Ce.isEdge=!!(Ce.userAgent&&Ce.userAgent.indexOf("Edg/")>=0);Ce.isAndroid=!!(Ce.userAgent&&Ce.userAgent.indexOf("Android")>=0);function uNt(t){return parseFloat(t)>=20}function dNt(t){return parseFloat(t)>=25}});var f8=m(x0=>{"use strict";Object.defineProperty(x0,"__esModule",{value:!0});x0.arch=x0.platform=x0.env=x0.cwd=void 0;var COe=m_(),tE,PX=globalThis.vscode;if(typeof PX<"u"&&typeof PX.process<"u"){let t=PX.process;tE={get platform(){return t.platform},get arch(){return t.arch},get env(){return t.env},cwd(){return t.cwd()}}}else typeof process<"u"&&typeof process?.versions?.node=="string"?tE={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:tE={get platform(){return COe.isWindows?"win32":COe.isMacintosh?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};x0.cwd=tE.cwd;x0.env=tE.env;x0.platform=tE.platform;x0.arch=tE.arch});var Nl=m(Ue=>{"use strict";var fNt=Ue&&Ue.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),pNt=Ue&&Ue.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),hNt=Ue&&Ue.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),o=0;o<n.length;o++)n[o]!=="default"&&fNt(r,e,n[o]);return pNt(r,e),r}})();Object.defineProperty(Ue,"__esModule",{value:!0});Ue.delimiter=Ue.sep=Ue.toNamespacedPath=Ue.parse=Ue.format=Ue.extname=Ue.basename=Ue.dirname=Ue.relative=Ue.resolve=Ue.join=Ue.isAbsolute=Ue.normalize=Ue.posix=Ue.win32=void 0;var AA=hNt(f8()),mNt=65,gNt=97,_Nt=90,vNt=122,rE=46,es=47,vc=92,Lh=58,yNt=63,p8=class extends Error{constructor(e,r,n){let o;typeof r=="string"&&r.indexOf("not ")===0?(o="must not be",r=r.replace(/^not /,"")):o="must be";let s=e.indexOf(".")!==-1?"property":"argument",a=`The "${e}" ${s} ${o} of type ${r}`;a+=`. Received type ${typeof n}`,super(a),this.code="ERR_INVALID_ARG_TYPE"}};function ENt(t,e){if(t===null||typeof t!="object")throw new p8(e,"Object",t)}function ji(t,e){if(typeof t!="string")throw new p8(e,"string",t)}var yc=AA.platform==="win32";function lr(t){return t===es||t===vc}function RX(t){return t===es}function kh(t){return t>=mNt&&t<=_Nt||t>=gNt&&t<=vNt}function h8(t,e,r,n){let o="",s=0,a=-1,c=0,l=0;for(let u=0;u<=t.length;++u){if(u<t.length)l=t.charCodeAt(u);else{if(n(l))break;l=es}if(n(l)){if(!(a===u-1||c===1))if(c===2){if(o.length<2||s!==2||o.charCodeAt(o.length-1)!==rE||o.charCodeAt(o.length-2)!==rE){if(o.length>2){let d=o.lastIndexOf(r);d===-1?(o="",s=0):(o=o.slice(0,d),s=o.length-1-o.lastIndexOf(r)),a=u,c=0;continue}else if(o.length!==0){o="",s=0,a=u,c=0;continue}}e&&(o+=o.length>0?`${r}..`:"..",s=2)}else o.length>0?o+=`${r}${t.slice(a+1,u)}`:o=t.slice(a+1,u),s=u-a-1;a=u,c=0}else l===rE&&c!==-1?++c:c=-1}return o}function TNt(t){return t?`${t[0]==="."?"":"."}${t}`:""}function AOe(t,e){ENt(e,"pathObject");let r=e.dir||e.root,n=e.base||`${e.name||""}${TNt(e.ext)}`;return r?r===e.root?`${r}${n}`:`${r}${t}${n}`:n}Ue.win32={resolve(...t){let e="",r="",n=!1;for(let o=t.length-1;o>=-1;o--){let s;if(o>=0){if(s=t[o],ji(s,`paths[${o}]`),s.length===0)continue}else e.length===0?s=AA.cwd():(s=AA.env[`=${e}`]||AA.cwd(),(s===void 0||s.slice(0,2).toLowerCase()!==e.toLowerCase()&&s.charCodeAt(2)===vc)&&(s=`${e}\\`));let a=s.length,c=0,l="",u=!1,d=s.charCodeAt(0);if(a===1)lr(d)&&(c=1,u=!0);else if(lr(d))if(u=!0,lr(s.charCodeAt(1))){let f=2,p=f;for(;f<a&&!lr(s.charCodeAt(f));)f++;if(f<a&&f!==p){let h=s.slice(p,f);for(p=f;f<a&&lr(s.charCodeAt(f));)f++;if(f<a&&f!==p){for(p=f;f<a&&!lr(s.charCodeAt(f));)f++;(f===a||f!==p)&&(l=`\\\\${h}\\${s.slice(p,f)}`,c=f)}}}else c=1;else kh(d)&&s.charCodeAt(1)===Lh&&(l=s.slice(0,2),c=2,a>2&&lr(s.charCodeAt(2))&&(u=!0,c=3));if(l.length>0)if(e.length>0){if(l.toLowerCase()!==e.toLowerCase())continue}else e=l;if(n){if(e.length>0)break}else if(r=`${s.slice(c)}\\${r}`,n=u,u&&e.length>0)break}return r=h8(r,!n,"\\",lr),n?`${e}\\${r}`:`${e}${r}`||"."},normalize(t){ji(t,"path");let e=t.length;if(e===0)return".";let r=0,n,o=!1,s=t.charCodeAt(0);if(e===1)return RX(s)?"\\":t;if(lr(s))if(o=!0,lr(t.charCodeAt(1))){let c=2,l=c;for(;c<e&&!lr(t.charCodeAt(c));)c++;if(c<e&&c!==l){let u=t.slice(l,c);for(l=c;c<e&&lr(t.charCodeAt(c));)c++;if(c<e&&c!==l){for(l=c;c<e&&!lr(t.charCodeAt(c));)c++;if(c===e)return`\\\\${u}\\${t.slice(l)}\\`;c!==l&&(n=`\\\\${u}\\${t.slice(l,c)}`,r=c)}}}else r=1;else kh(s)&&t.charCodeAt(1)===Lh&&(n=t.slice(0,2),r=2,e>2&&lr(t.charCodeAt(2))&&(o=!0,r=3));let a=r<e?h8(t.slice(r),!o,"\\",lr):"";if(a.length===0&&!o&&(a="."),a.length>0&&lr(t.charCodeAt(e-1))&&(a+="\\"),!o&&n===void 0&&t.includes(":")){if(a.length>=2&&kh(a.charCodeAt(0))&&a.charCodeAt(1)===Lh)return`.\\${a}`;let c=t.indexOf(":");do if(c===e-1||lr(t.charCodeAt(c+1)))return`.\\${a}`;while((c=t.indexOf(":",c+1))!==-1)}return n===void 0?o?`\\${a}`:a:o?`${n}\\${a}`:`${n}${a}`},isAbsolute(t){ji(t,"path");let e=t.length;if(e===0)return!1;let r=t.charCodeAt(0);return lr(r)||e>2&&kh(r)&&t.charCodeAt(1)===Lh&&lr(t.charCodeAt(2))},join(...t){if(t.length===0)return".";let e,r;for(let s=0;s<t.length;++s){let a=t[s];ji(a,"path"),a.length>0&&(e===void 0?e=r=a:e+=`\\${a}`)}if(e===void 0)return".";let n=!0,o=0;if(typeof r=="string"&&lr(r.charCodeAt(0))){++o;let s=r.length;s>1&&lr(r.charCodeAt(1))&&(++o,s>2&&(lr(r.charCodeAt(2))?++o:n=!1))}if(n){for(;o<e.length&&lr(e.charCodeAt(o));)o++;o>=2&&(e=`\\${e.slice(o)}`)}return Ue.win32.normalize(e)},relative(t,e){if(ji(t,"from"),ji(e,"to"),t===e)return"";let r=Ue.win32.resolve(t),n=Ue.win32.resolve(e);if(r===n||(t=r.toLowerCase(),e=n.toLowerCase(),t===e))return"";if(r.length!==t.length||n.length!==e.length){let _=r.split("\\"),g=n.split("\\");_[_.length-1]===""&&_.pop(),g[g.length-1]===""&&g.pop();let v=_.length,E=g.length,y=v<E?v:E,S;for(S=0;S<y&&_[S].toLowerCase()===g[S].toLowerCase();S++);return S===0?n:S===y?E>y?g.slice(S).join("\\"):v>y?"..\\".repeat(v-1-S)+"..":"":"..\\".repeat(v-S)+g.slice(S).join("\\")}let o=0;for(;o<t.length&&t.charCodeAt(o)===vc;)o++;let s=t.length;for(;s-1>o&&t.charCodeAt(s-1)===vc;)s--;let a=s-o,c=0;for(;c<e.length&&e.charCodeAt(c)===vc;)c++;let l=e.length;for(;l-1>c&&e.charCodeAt(l-1)===vc;)l--;let u=l-c,d=a<u?a:u,f=-1,p=0;for(;p<d;p++){let _=t.charCodeAt(o+p);if(_!==e.charCodeAt(c+p))break;_===vc&&(f=p)}if(p!==d){if(f===-1)return n}else{if(u>d){if(e.charCodeAt(c+p)===vc)return n.slice(c+p+1);if(p===2)return n.slice(c+p)}a>d&&(t.charCodeAt(o+p)===vc?f=p:p===2&&(f=3)),f===-1&&(f=0)}let h="";for(p=o+f+1;p<=s;++p)(p===s||t.charCodeAt(p)===vc)&&(h+=h.length===0?"..":"\\..");return c+=f,h.length>0?`${h}${n.slice(c,l)}`:(n.charCodeAt(c)===vc&&++c,n.slice(c,l))},toNamespacedPath(t){if(typeof t!="string"||t.length===0)return t;let e=Ue.win32.resolve(t);if(e.length<=2)return t;if(e.charCodeAt(0)===vc){if(e.charCodeAt(1)===vc){let r=e.charCodeAt(2);if(r!==yNt&&r!==rE)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(kh(e.charCodeAt(0))&&e.charCodeAt(1)===Lh&&e.charCodeAt(2)===vc)return`\\\\?\\${e}`;return e},dirname(t){ji(t,"path");let e=t.length;if(e===0)return".";let r=-1,n=0,o=t.charCodeAt(0);if(e===1)return lr(o)?t:".";if(lr(o)){if(r=n=1,lr(t.charCodeAt(1))){let c=2,l=c;for(;c<e&&!lr(t.charCodeAt(c));)c++;if(c<e&&c!==l){for(l=c;c<e&&lr(t.charCodeAt(c));)c++;if(c<e&&c!==l){for(l=c;c<e&&!lr(t.charCodeAt(c));)c++;if(c===e)return t;c!==l&&(r=n=c+1)}}}}else kh(o)&&t.charCodeAt(1)===Lh&&(r=e>2&&lr(t.charCodeAt(2))?3:2,n=r);let s=-1,a=!0;for(let c=e-1;c>=n;--c)if(lr(t.charCodeAt(c))){if(!a){s=c;break}}else a=!1;if(s===-1){if(r===-1)return".";s=r}return t.slice(0,s)},basename(t,e){e!==void 0&&ji(e,"suffix"),ji(t,"path");let r=0,n=-1,o=!0,s;if(t.length>=2&&kh(t.charCodeAt(0))&&t.charCodeAt(1)===Lh&&(r=2),e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,c=-1;for(s=t.length-1;s>=r;--s){let l=t.charCodeAt(s);if(lr(l)){if(!o){r=s+1;break}}else c===-1&&(o=!1,c=s+1),a>=0&&(l===e.charCodeAt(a)?--a===-1&&(n=s):(a=-1,n=c))}return r===n?n=c:n===-1&&(n=t.length),t.slice(r,n)}for(s=t.length-1;s>=r;--s)if(lr(t.charCodeAt(s))){if(!o){r=s+1;break}}else n===-1&&(o=!1,n=s+1);return n===-1?"":t.slice(r,n)},extname(t){ji(t,"path");let e=0,r=-1,n=0,o=-1,s=!0,a=0;t.length>=2&&t.charCodeAt(1)===Lh&&kh(t.charCodeAt(0))&&(e=n=2);for(let c=t.length-1;c>=e;--c){let l=t.charCodeAt(c);if(lr(l)){if(!s){n=c+1;break}continue}o===-1&&(s=!1,o=c+1),l===rE?r===-1?r=c:a!==1&&(a=1):r!==-1&&(a=-1)}return r===-1||o===-1||a===0||a===1&&r===o-1&&r===n+1?"":t.slice(r,o)},format:AOe.bind(null,"\\"),parse(t){ji(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.length,n=0,o=t.charCodeAt(0);if(r===1)return lr(o)?(e.root=e.dir=t,e):(e.base=e.name=t,e);if(lr(o)){if(n=1,lr(t.charCodeAt(1))){let f=2,p=f;for(;f<r&&!lr(t.charCodeAt(f));)f++;if(f<r&&f!==p){for(p=f;f<r&&lr(t.charCodeAt(f));)f++;if(f<r&&f!==p){for(p=f;f<r&&!lr(t.charCodeAt(f));)f++;f===r?n=f:f!==p&&(n=f+1)}}}}else if(kh(o)&&t.charCodeAt(1)===Lh){if(r<=2)return e.root=e.dir=t,e;if(n=2,lr(t.charCodeAt(2))){if(r===3)return e.root=e.dir=t,e;n=3}}n>0&&(e.root=t.slice(0,n));let s=-1,a=n,c=-1,l=!0,u=t.length-1,d=0;for(;u>=n;--u){if(o=t.charCodeAt(u),lr(o)){if(!l){a=u+1;break}continue}c===-1&&(l=!1,c=u+1),o===rE?s===-1?s=u:d!==1&&(d=1):s!==-1&&(d=-1)}return c!==-1&&(s===-1||d===0||d===1&&s===c-1&&s===a+1?e.base=e.name=t.slice(a,c):(e.name=t.slice(a,s),e.base=t.slice(a,c),e.ext=t.slice(s,c))),a>0&&a!==n?e.dir=t.slice(0,a-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null};var SNt=(()=>{if(yc){let t=/\\/g;return()=>{let e=AA.cwd().replace(t,"/");return e.slice(e.indexOf("/"))}}return()=>AA.cwd()})();Ue.posix={resolve(...t){let e="",r=!1;for(let n=t.length-1;n>=0&&!r;n--){let o=t[n];ji(o,`paths[${n}]`),o.length!==0&&(e=`${o}/${e}`,r=o.charCodeAt(0)===es)}if(!r){let n=SNt();e=`${n}/${e}`,r=n.charCodeAt(0)===es}return e=h8(e,!r,"/",RX),r?`/${e}`:e.length>0?e:"."},normalize(t){if(ji(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===es,r=t.charCodeAt(t.length-1)===es;return t=h8(t,!e,"/",RX),t.length===0?e?"/":r?"./":".":(r&&(t+="/"),e?`/${t}`:t)},isAbsolute(t){return ji(t,"path"),t.length>0&&t.charCodeAt(0)===es},join(...t){if(t.length===0)return".";let e=[];for(let r=0;r<t.length;++r){let n=t[r];ji(n,"path"),n.length>0&&e.push(n)}return e.length===0?".":Ue.posix.normalize(e.join("/"))},relative(t,e){if(ji(t,"from"),ji(e,"to"),t===e||(t=Ue.posix.resolve(t),e=Ue.posix.resolve(e),t===e))return"";let r=1,n=t.length,o=n-r,s=1,a=e.length-s,c=o<a?o:a,l=-1,u=0;for(;u<c;u++){let f=t.charCodeAt(r+u);if(f!==e.charCodeAt(s+u))break;f===es&&(l=u)}if(u===c)if(a>c){if(e.charCodeAt(s+u)===es)return e.slice(s+u+1);if(u===0)return e.slice(s+u)}else o>c&&(t.charCodeAt(r+u)===es?l=u:u===0&&(l=0));let d="";for(u=r+l+1;u<=n;++u)(u===n||t.charCodeAt(u)===es)&&(d+=d.length===0?"..":"/..");return`${d}${e.slice(s+l)}`},toNamespacedPath(t){return t},dirname(t){if(ji(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===es,r=-1,n=!0;for(let o=t.length-1;o>=1;--o)if(t.charCodeAt(o)===es){if(!n){r=o;break}}else n=!1;return r===-1?e?"/":".":e&&r===1?"//":t.slice(0,r)},basename(t,e){e!==void 0&&ji(e,"suffix"),ji(t,"path");let r=0,n=-1,o=!0,s;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,c=-1;for(s=t.length-1;s>=0;--s){let l=t.charCodeAt(s);if(l===es){if(!o){r=s+1;break}}else c===-1&&(o=!1,c=s+1),a>=0&&(l===e.charCodeAt(a)?--a===-1&&(n=s):(a=-1,n=c))}return r===n?n=c:n===-1&&(n=t.length),t.slice(r,n)}for(s=t.length-1;s>=0;--s)if(t.charCodeAt(s)===es){if(!o){r=s+1;break}}else n===-1&&(o=!1,n=s+1);return n===-1?"":t.slice(r,n)},extname(t){ji(t,"path");let e=-1,r=0,n=-1,o=!0,s=0;for(let a=t.length-1;a>=0;--a){let c=t[a];if(c==="/"){if(!o){r=a+1;break}continue}n===-1&&(o=!1,n=a+1),c==="."?e===-1?e=a:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||n===-1||s===0||s===1&&e===n-1&&e===r+1?"":t.slice(e,n)},format:AOe.bind(null,"/"),parse(t){ji(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.charCodeAt(0)===es,n;r?(e.root="/",n=1):n=0;let o=-1,s=0,a=-1,c=!0,l=t.length-1,u=0;for(;l>=n;--l){let d=t.charCodeAt(l);if(d===es){if(!c){s=l+1;break}continue}a===-1&&(c=!1,a=l+1),d===rE?o===-1?o=l:u!==1&&(u=1):o!==-1&&(u=-1)}if(a!==-1){let d=s===0&&r?1:s;o===-1||u===0||u===1&&o===a-1&&o===s+1?e.base=e.name=t.slice(d,a):(e.name=t.slice(d,o),e.base=t.slice(d,a),e.ext=t.slice(o,a))}return s>0?e.dir=t.slice(0,s-1):r&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};Ue.posix.win32=Ue.win32.win32=Ue.win32;Ue.posix.posix=Ue.win32.posix=Ue.posix;Ue.normalize=yc?Ue.win32.normalize:Ue.posix.normalize;Ue.isAbsolute=yc?Ue.win32.isAbsolute:Ue.posix.isAbsolute;Ue.join=yc?Ue.win32.join:Ue.posix.join;Ue.resolve=yc?Ue.win32.resolve:Ue.posix.resolve;Ue.relative=yc?Ue.win32.relative:Ue.posix.relative;Ue.dirname=yc?Ue.win32.dirname:Ue.posix.dirname;Ue.basename=yc?Ue.win32.basename:Ue.posix.basename;Ue.extname=yc?Ue.win32.extname:Ue.posix.extname;Ue.format=yc?Ue.win32.format:Ue.posix.format;Ue.parse=yc?Ue.win32.parse:Ue.posix.parse;Ue.toNamespacedPath=yc?Ue.win32.toNamespacedPath:Ue.posix.toNamespacedPath;Ue.sep=yc?Ue.win32.sep:Ue.posix.sep;Ue.delimiter=yc?Ue.win32.delimiter:Ue.posix.delimiter});var g8=m(qd=>{"use strict";Object.defineProperty(qd,"__esModule",{value:!0});qd.WeakCachedFunction=qd.CachedFunction=qd.LRUCachedFunction=qd.Cache=void 0;qd.identity=m8;var bNt=Oh(),OX=class{constructor(e){this.task=e,this.result=null}get(){if(this.result)return this.result;let e=new bNt.CancellationTokenSource,r=this.task(e.token);return this.result={promise:r,dispose:()=>{this.result=null,e.cancel(),e.dispose()}},this.result}};qd.Cache=OX;function m8(t){return t}var MX=class{constructor(e,r){this.lastCache=void 0,this.lastArgKey=void 0,typeof e=="function"?(this._fn=e,this._computeKey=m8):(this._fn=r,this._computeKey=e.getCacheKey)}get(e){let r=this._computeKey(e);return this.lastArgKey!==r&&(this.lastArgKey=r,this.lastCache=this._fn(e)),this.lastCache}};qd.LRUCachedFunction=MX;var NX=class{get cachedValues(){return this._map}constructor(e,r){this._map=new Map,this._map2=new Map,typeof e=="function"?(this._fn=e,this._computeKey=m8):(this._fn=r,this._computeKey=e.getCacheKey)}get(e){let r=this._computeKey(e);if(this._map2.has(r))return this._map2.get(r);let n=this._fn(e);return this._map.set(e,n),this._map2.set(r,n),n}};qd.CachedFunction=NX;var LX=class{constructor(e,r){this._map=new WeakMap,typeof e=="function"?(this._fn=e,this._computeKey=m8):(this._fn=r,this._computeKey=e.getCacheKey)}get(e){let r=this._computeKey(e);if(this._map.has(r))return this._map.get(r);let n=this._fn(e);return this._map.set(r,n),n}};qd.WeakCachedFunction=LX});var nE=m(_8=>{"use strict";Object.defineProperty(_8,"__esModule",{value:!0});_8.Lazy=void 0;var g_;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Running=1]="Running",t[t.Completed=2]="Completed"})(g_||(g_={}));var kX=class{constructor(e){this.executor=e,this._state=g_.Uninitialized}get hasValue(){return this._state===g_.Completed}get value(){if(this._state===g_.Uninitialized){this._state=g_.Running;try{this._value=this.executor()}catch(e){this._error=e}finally{this._state=g_.Completed}}else if(this._state===g_.Running)throw new Error("Cannot read the value of a lazy that is being initialized");if(this._error)throw this._error;return this._value}get rawValue(){return this._value}};_8.Lazy=kX});var Fo=m(Ne=>{"use strict";Object.defineProperty(Ne,"__esModule",{value:!0});Ne.Ellipsis=Ne.InvisibleCharacters=Ne.AmbiguousCharacters=Ne.noBreakWhitespace=Ne.UTF8_BOM_CHARACTER=Ne.UNUSUAL_LINE_TERMINATORS=Ne.GraphemeIterator=Ne.CodePointIterator=void 0;Ne.isFalsyOrWhitespace=ANt;Ne.format=wNt;Ne.format2=PNt;Ne.htmlAttributeEncodeValue=RNt;Ne.escape=ONt;Ne.escapeRegExpCharacters=IOe;Ne.count=MNt;Ne.truncate=NNt;Ne.truncateMiddle=LNt;Ne.trim=kNt;Ne.ltrim=POe;Ne.rtrim=ROe;Ne.convertSimple2RegExpPattern=DNt;Ne.createRegExp=UNt;Ne.regExpLeadsToEndlessLoop=qNt;Ne.joinStrings=FNt;Ne.splitLines=jNt;Ne.splitLinesIncludeSeparators=BNt;Ne.indexOfPattern=$Nt;Ne.firstNonWhitespaceIndex=OOe;Ne.getLeadingWhitespace=VNt;Ne.lastNonWhitespaceIndex=HNt;Ne.getIndentationLength=GNt;Ne.replaceAsync=zNt;Ne.compare=WNt;Ne.compareSubstring=MOe;Ne.compareIgnoreCase=KNt;Ne.compareSubstringIgnoreCase=v8;Ne.isAsciiDigit=YNt;Ne.isLowerAsciiLetter=UX;Ne.isUpperAsciiLetter=QNt;Ne.equalsIgnoreCase=ZNt;Ne.startsWithIgnoreCase=JNt;Ne.commonPrefixLength=XNt;Ne.commonSuffixLength=e4t;Ne.isHighSurrogate=jX;Ne.isLowSurrogate=y8;Ne.computeCodePoint=BX;Ne.getNextCodePoint=NOe;Ne.nextCharLength=LOe;Ne.prevCharLength=kOe;Ne.getCharContainingOffset=r4t;Ne.charCount=n4t;Ne.containsRTL=o4t;Ne.isBasicASCII=a4t;Ne.containsUnusualLineTerminators=c4t;Ne.isFullWidthCharacter=l4t;Ne.isEmojiImprecise=DOe;Ne.lcut=u4t;Ne.forAnsiStringParts=h4t;Ne.removeAnsiEscapeCodes=qOe;Ne.removeAnsiEscapeCodesFromPrompt=g4t;Ne.startsWithUTF8BOM=FOe;Ne.stripUTF8BOM=_4t;Ne.fuzzyContains=v4t;Ne.containsUppercaseCharacter=y4t;Ne.uppercaseFirstLetter=E4t;Ne.getNLines=T4t;Ne.singleLetterHash=S4t;Ne.getGraphemeBreakType=b4t;Ne.getLeftDeleteOffset=A4t;Ne.multibyteAwareBtoa=P4t;var CNt=g8(),xOe=nE();function ANt(t){return!t||typeof t!="string"?!0:t.trim().length===0}var xNt=/{(\d+)}/g;function wNt(t,...e){return e.length===0?t:t.replace(xNt,function(r,n){let o=parseInt(n,10);return isNaN(o)||o<0||o>=e.length?r:e[o]})}var INt=/{([^}]+)}/g;function PNt(t,e){return Object.keys(e).length===0?t:t.replace(INt,(r,n)=>e[n]??r)}function RNt(t){return t.replace(/[<>"'&]/g,e=>{switch(e){case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"'":return"&apos;";case"&":return"&amp;"}return e})}function ONt(t){return t.replace(/[<>&]/g,function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return e}})}function IOe(t){return t.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function MNt(t,e){let r=0,n=t.indexOf(e);for(;n!==-1;)r++,n=t.indexOf(e,n+e.length);return r}function NNt(t,e,r=Ne.Ellipsis){return t.length<=e?t:`${t.substr(0,e)}${r}`}function LNt(t,e,r=Ne.Ellipsis){if(t.length<=e)return t;let n=Math.ceil(e/2)-r.length/2,o=Math.floor(e/2)-r.length/2;return`${t.substr(0,n)}${r}${t.substr(t.length-o)}`}function kNt(t,e=" "){let r=POe(t,e);return ROe(r,e)}function POe(t,e){if(!t||!e)return t;let r=e.length;if(r===0||t.length===0)return t;let n=0;for(;t.indexOf(e,n)===n;)n=n+r;return t.substring(n)}function ROe(t,e){if(!t||!e)return t;let r=e.length,n=t.length;if(r===0||n===0)return t;let o=n,s=-1;for(;s=t.lastIndexOf(e,o-1),!(s===-1||s+r!==o);){if(s===0)return"";o=s}return t.substring(0,o)}function DNt(t){return t.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}function UNt(t,e,r={}){if(!t)throw new Error("Cannot create regex from empty string");e||(t=IOe(t)),r.wholeWord&&(/\B/.test(t.charAt(0))||(t="\\b"+t),/\B/.test(t.charAt(t.length-1))||(t=t+"\\b"));let n="";return r.global&&(n+="g"),r.matchCase||(n+="i"),r.multiline&&(n+="m"),r.unicode&&(n+="u"),new RegExp(t,n)}function qNt(t){return t.source==="^"||t.source==="^$"||t.source==="$"||t.source==="^\\s*$"?!1:!!(t.exec("")&&t.lastIndex===0)}function FNt(t,e){return t.filter(r=>r!=null&&r!==!1).join(e)}function jNt(t){return t.split(/\r\n|\r|\n/)}function BNt(t){let e=[],r=t.split(/(\r\n|\r|\n)/);for(let n=0;n<Math.ceil(r.length/2);n++)e.push(r[2*n]+(r[2*n+1]??""));return e}function $Nt(t,e){let r=e.exec(t);return r?r.index:-1}function OOe(t){for(let e=0,r=t.length;e<r;e++){let n=t.charCodeAt(e);if(n!==32&&n!==9)return e}return-1}function VNt(t,e=0,r=t.length){for(let n=e;n<r;n++){let o=t.charCodeAt(n);if(o!==32&&o!==9)return t.substring(e,n)}return t.substring(e,r)}function HNt(t,e=t.length-1){for(let r=e;r>=0;r--){let n=t.charCodeAt(r);if(n!==32&&n!==9)return r}return-1}function GNt(t){let e=OOe(t);return e===-1?t.length:e}function zNt(t,e,r){let n=[],o=0;for(let s of t.matchAll(e)){if(n.push(t.slice(o,s.index)),s.index===void 0)throw new Error("match.index should be defined");o=s.index+s[0].length,n.push(r(s[0],...s.slice(1),s.index,t,s.groups))}return n.push(t.slice(o)),Promise.all(n).then(s=>s.join(""))}function WNt(t,e){return t<e?-1:t>e?1:0}function MOe(t,e,r=0,n=t.length,o=0,s=e.length){for(;r<n&&o<s;r++,o++){let l=t.charCodeAt(r),u=e.charCodeAt(o);if(l<u)return-1;if(l>u)return 1}let a=n-r,c=s-o;return a<c?-1:a>c?1:0}function KNt(t,e){return v8(t,e,0,t.length,0,e.length)}function v8(t,e,r=0,n=t.length,o=0,s=e.length){for(;r<n&&o<s;r++,o++){let l=t.charCodeAt(r),u=e.charCodeAt(o);if(l===u)continue;if(l>=128||u>=128)return MOe(t.toLowerCase(),e.toLowerCase(),r,n,o,s);UX(l)&&(l-=32),UX(u)&&(u-=32);let d=l-u;if(d!==0)return d}let a=n-r,c=s-o;return a<c?-1:a>c?1:0}function YNt(t){return t>=48&&t<=57}function UX(t){return t>=97&&t<=122}function QNt(t){return t>=65&&t<=90}function ZNt(t,e){return t.length===e.length&&v8(t,e)===0}function JNt(t,e){let r=e.length;return e.length>t.length?!1:v8(t,e,0,r)===0}function XNt(t,e){let r=Math.min(t.length,e.length),n;for(n=0;n<r;n++)if(t.charCodeAt(n)!==e.charCodeAt(n))return n;return r}function e4t(t,e){let r=Math.min(t.length,e.length),n,o=t.length-1,s=e.length-1;for(n=0;n<r;n++)if(t.charCodeAt(o-n)!==e.charCodeAt(s-n))return n;return r}function jX(t){return 55296<=t&&t<=56319}function y8(t){return 56320<=t&&t<=57343}function BX(t,e){return(t-55296<<10)+(e-56320)+65536}function NOe(t,e,r){let n=t.charCodeAt(r);if(jX(n)&&r+1<e){let o=t.charCodeAt(r+1);if(y8(o))return BX(n,o)}return n}function t4t(t,e){let r=t.charCodeAt(e-1);if(y8(r)&&e>1){let n=t.charCodeAt(e-2);if(jX(n))return BX(n,r)}return r}var xA=class{get offset(){return this._offset}constructor(e,r=0){this._str=e,this._len=e.length,this._offset=r}setOffset(e){this._offset=e}prevCodePoint(){let e=t4t(this._str,this._offset);return this._offset-=e>=65536?2:1,e}nextCodePoint(){let e=NOe(this._str,this._len,this._offset);return this._offset+=e>=65536?2:1,e}eol(){return this._offset>=this._len}};Ne.CodePointIterator=xA;var wA=class{get offset(){return this._iterator.offset}constructor(e,r=0){this._iterator=new xA(e,r)}nextGraphemeLength(){let e=X2.getInstance(),r=this._iterator,n=r.offset,o=e.getGraphemeBreakType(r.nextCodePoint());for(;!r.eol();){let s=r.offset,a=e.getGraphemeBreakType(r.nextCodePoint());if(wOe(o,a)){r.setOffset(s);break}o=a}return r.offset-n}prevGraphemeLength(){let e=X2.getInstance(),r=this._iterator,n=r.offset,o=e.getGraphemeBreakType(r.prevCodePoint());for(;r.offset>0;){let s=r.offset,a=e.getGraphemeBreakType(r.prevCodePoint());if(wOe(a,o)){r.setOffset(s);break}o=a}return n-r.offset}eol(){return this._iterator.eol()}};Ne.GraphemeIterator=wA;function LOe(t,e){return new wA(t,e).nextGraphemeLength()}function kOe(t,e){return new wA(t,e).prevGraphemeLength()}function r4t(t,e){e>0&&y8(t.charCodeAt(e))&&e--;let r=e+LOe(t,e);return[r-kOe(t,r),r]}function n4t(t){let e=new wA(t),r=0;for(;!e.eol();)r++,e.nextGraphemeLength();return r}var DX;function i4t(){return/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/}function o4t(t){return DX||(DX=i4t()),DX.test(t)}var s4t=/^[\t\n\r\x20-\x7E]*$/;function a4t(t){return s4t.test(t)}Ne.UNUSUAL_LINE_TERMINATORS=/[\u2028\u2029]/;function c4t(t){return Ne.UNUSUAL_LINE_TERMINATORS.test(t)}function l4t(t){return t>=11904&&t<=55215||t>=63744&&t<=64255||t>=65281&&t<=65374}function DOe(t){return t>=127462&&t<=127487||t===8986||t===8987||t===9200||t===9203||t>=9728&&t<=10175||t===11088||t===11093||t>=127744&&t<=128591||t>=128640&&t<=128764||t>=128992&&t<=129008||t>=129280&&t<=129535||t>=129648&&t<=129782}function u4t(t,e,r=""){let n=t.trimStart();if(n.length<e)return n;let o=/\b/g,s=0;for(;o.test(n)&&!(n.length-o.lastIndex<e);)s=o.lastIndex,o.lastIndex+=1;return s===0?n:r+n.substring(s).trimStart()}var d4t=/(?:\x1b\[|\x9b)[=?>!]?[\d;:]*["$#'* ]?[a-zA-Z@^`{}|~]/,f4t=/(?:\x1b\]|\x9d).*?(?:\x1b\\|\x07|\x9c)/,p4t=/\x1b(?:[ #%\(\)\*\+\-\.\/]?[a-zA-Z0-9\|}~@])/,UOe=new RegExp("(?:"+[d4t.source,f4t.source,p4t.source].join("|")+")","g");function*h4t(t){let e=0;for(let r of t.matchAll(UOe))e!==r.index&&(yield{isCode:!1,str:t.substring(e,r.index)}),yield{isCode:!0,str:r[0]},e=r.index+r[0].length;e!==t.length&&(yield{isCode:!1,str:t.substring(e)})}function qOe(t){return t&&(t=t.replace(UOe,"")),t}var m4t=/\\\[.*?\\\]/g;function g4t(t){return qOe(t).replace(m4t,"")}Ne.UTF8_BOM_CHARACTER="\uFEFF";function FOe(t){return!!(t&&t.length>0&&t.charCodeAt(0)===65279)}function _4t(t){return FOe(t)?t.substr(1):t}function v4t(t,e){if(!t||!e||t.length<e.length)return!1;let r=e.length,n=t.toLowerCase(),o=0,s=-1;for(;o<r;){let a=n.indexOf(e[o],s+1);if(a<0)return!1;s=a,o++}return!0}function y4t(t,e=!1){return t?(e&&(t=t.replace(/\\./g,"")),t.toLowerCase()!==t):!1}function E4t(t){return t.charAt(0).toUpperCase()+t.slice(1)}function T4t(t,e=1){if(e===0)return"";let r=-1;do r=t.indexOf(`
`,r+1),e--;while(e>0&&r>=0);return r===-1?t:(t[r-1]==="\r"&&r--,t.substr(0,r))}function S4t(t){return t=t%52,t<26?String.fromCharCode(97+t):String.fromCharCode(65+t-26)}function b4t(t){return X2.getInstance().getGraphemeBreakType(t)}function wOe(t,e){return t===0?e!==5&&e!==7:t===2&&e===3?!1:t===4||t===2||t===3||e===4||e===2||e===3?!0:!(t===8&&(e===8||e===9||e===11||e===12)||(t===11||t===9)&&(e===9||e===10)||(t===12||t===10)&&e===10||e===5||e===13||e===7||t===1||t===13&&e===14||t===6&&e===6)}var X2=class t{static{this._INSTANCE=null}static getInstance(){return t._INSTANCE||(t._INSTANCE=new t),t._INSTANCE}constructor(){this._data=C4t()}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;let r=this._data,n=r.length/3,o=1;for(;o<=n;)if(e<r[3*o])o=2*o;else if(e>r[3*o+1])o=2*o+1;else return r[3*o+2];return 0}};function C4t(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}function A4t(t,e){if(t===0)return 0;let r=x4t(t,e);if(r!==void 0)return r;let n=new xA(e,t);return n.prevCodePoint(),n.offset}function x4t(t,e){let r=new xA(e,t),n=r.prevCodePoint();for(;w4t(n)||n===65039||n===8419;){if(r.offset===0)return;n=r.prevCodePoint()}if(!DOe(n))return;let o=r.offset;return o>0&&r.prevCodePoint()===8205&&(o=r.offset),o}function w4t(t){return 127995<=t&&t<=127999}Ne.noBreakWhitespace="\xA0";var qX=class t{static{this.ambiguousCharacterData=new xOe.Lazy(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,1523,96,8242,96,1370,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,118002,50,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,118003,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,118004,52,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,118005,53,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,118006,54,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,118007,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,118008,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,118009,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,117974,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,117975,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71913,67,71922,67,65315,67,8557,67,8450,67,8493,67,117976,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,117977,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,117978,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,117979,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,117980,71,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,117981,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,117983,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,117984,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,118001,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,117982,108,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,117985,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,117986,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,117987,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,118000,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,117988,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,117989,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,117990,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,117991,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,117992,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,117993,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,117994,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,117995,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71910,87,71919,87,117996,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,117997,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,117998,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,71909,90,66293,90,65338,90,8484,90,8488,90,117999,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65283,35,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,8218,44,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"cs":[65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"es":[8211,45,65374,126,8218,44,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"fr":[65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"it":[160,32,8211,45,65374,126,8218,44,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"ja":[8211,45,8218,44,65281,33,8216,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65292,44,65297,49,65307,59],"ko":[8211,45,65374,126,8218,44,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"pt-BR":[65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"ru":[65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,8218,44,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"zh-hans":[160,32,65374,126,8218,44,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65297,49],"zh-hant":[8211,45,65374,126,8218,44,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89]}'))}static{this.cache=new CNt.LRUCachedFunction({getCacheKey:JSON.stringify},e=>{function r(d){let f=new Map;for(let p=0;p<d.length;p+=2)f.set(d[p],d[p+1]);return f}function n(d,f){let p=new Map(d);for(let[h,_]of f)p.set(h,_);return p}function o(d,f){if(!d)return f;let p=new Map;for(let[h,_]of d)f.has(h)&&p.set(h,_);return p}let s=this.ambiguousCharacterData.value,a=e.filter(d=>!d.startsWith("_")&&d in s);a.length===0&&(a=["_default"]);let c;for(let d of a){let f=r(s[d]);c=o(c,f)}let l=r(s._common),u=n(l,c);return new t(u)})}static getInstance(e){return t.cache.get(Array.from(e))}static{this._locales=new xOe.Lazy(()=>Object.keys(t.ambiguousCharacterData.value).filter(e=>!e.startsWith("_")))}static getLocales(){return t._locales.value}constructor(e){this.confusableDictionary=e}isAmbiguous(e){return this.confusableDictionary.has(e)}containsAmbiguousCharacter(e){for(let r=0;r<e.length;r++){let n=e.codePointAt(r);if(typeof n=="number"&&this.isAmbiguous(n))return!0}return!1}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}};Ne.AmbiguousCharacters=qX;var FX=class t{static getRawData(){return JSON.parse('{"_common":[11,12,13,127,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999],"cs":[173,8203,12288],"de":[173,8203,12288],"es":[8203,12288],"fr":[173,8203,12288],"it":[160,173,12288],"ja":[173],"ko":[173,12288],"pl":[173,8203,12288],"pt-BR":[173,8203,12288],"qps-ploc":[160,173,8203,12288],"ru":[173,12288],"tr":[160,173,8203,12288],"zh-hans":[160,173,8203,12288],"zh-hant":[173,12288]}')}static{this._data=void 0}static getData(){return this._data||(this._data=new Set([...Object.values(t.getRawData())].flat())),this._data}static isInvisibleCharacter(e){return t.getData().has(e)}static containsInvisibleCharacter(e){for(let r=0;r<e.length;r++){let n=e.codePointAt(r);if(typeof n=="number"&&(t.isInvisibleCharacter(n)||n===32))return!0}return!1}static get codePoints(){return t.getData()}};Ne.InvisibleCharacters=FX;Ne.Ellipsis="\u2026";function I4t(t){let e=new Uint16Array(t.length);for(let o=0;o<e.length;o++)e[o]=t.charCodeAt(o);let r="",n=new Uint8Array(e.buffer);for(let o=0;o<n.length;o++)r+=String.fromCharCode(n[o]);return r}function P4t(t){return btoa(I4t(t))}});var HX=m(jo=>{"use strict";Object.defineProperty(jo,"__esModule",{value:!0});jo.isPathSeparator=Dh;jo.toSlashes=jOe;jo.toPosixPath=O4t;jo.getRoot=M4t;jo.isUNC=N4t;jo.isValidBasename=U4t;jo.isEqual=q4t;jo.isEqualOrParent=F4t;jo.isWindowsDriveLetter=$X;jo.sanitizeFilePath=j4t;jo.removeTrailingPathSeparator=BOe;jo.isRootOrDriveLetter=B4t;jo.hasDriveLetter=VX;jo.getDriveLetter=$4t;jo.indexOfPath=V4t;jo.parseLineAndColumnAware=H4t;jo.randomPath=W4t;var Ec=Nl(),__=m_(),E8=Fo(),R4t=Ol();function Dh(t){return t===47||t===92}function jOe(t){return t.replace(/[\\/]/g,Ec.posix.sep)}function O4t(t){return t.indexOf("/")===-1&&(t=jOe(t)),/^[a-zA-Z]:(\/|$)/.test(t)&&(t="/"+t),t}function M4t(t,e=Ec.posix.sep){if(!t)return"";let r=t.length,n=t.charCodeAt(0);if(Dh(n)){if(Dh(t.charCodeAt(1))&&!Dh(t.charCodeAt(2))){let s=3,a=s;for(;s<r&&!Dh(t.charCodeAt(s));s++);if(a!==s&&!Dh(t.charCodeAt(s+1))){for(s+=1;s<r;s++)if(Dh(t.charCodeAt(s)))return t.slice(0,s+1).replace(/[\\/]/g,e)}}return e}else if($X(n)&&t.charCodeAt(1)===58)return Dh(t.charCodeAt(2))?t.slice(0,2)+e:t.slice(0,2);let o=t.indexOf("://");if(o!==-1){for(o+=3;o<r;o++)if(Dh(t.charCodeAt(o)))return t.slice(0,o+1)}return""}function N4t(t){if(!__.isWindows||!t||t.length<5)return!1;let e=t.charCodeAt(0);if(e!==92||(e=t.charCodeAt(1),e!==92))return!1;let r=2,n=r;for(;r<t.length&&(e=t.charCodeAt(r),e!==92);r++);return!(n===r||(e=t.charCodeAt(r+1),isNaN(e)||e===92))}var L4t=/[\\/:\*\?"<>\|]/g,k4t=/[/]/g,D4t=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function U4t(t,e=__.isWindows){let r=e?L4t:k4t;return!(!t||t.length===0||/^\s+$/.test(t)||(r.lastIndex=0,r.test(t))||e&&D4t.test(t)||t==="."||t===".."||e&&t[t.length-1]==="."||e&&t.length!==t.trim().length||t.length>255)}function q4t(t,e,r){let n=t===e;return!r||n?n:!t||!e?!1:(0,E8.equalsIgnoreCase)(t,e)}function F4t(t,e,r,n=Ec.sep){if(t===e)return!0;if(!t||!e||e.length>t.length)return!1;if(r){if(!(0,E8.startsWithIgnoreCase)(t,e))return!1;if(e.length===t.length)return!0;let s=e.length;return e.charAt(e.length-1)===n&&s--,t.charAt(s)===n}return e.charAt(e.length-1)!==n&&(e+=n),t.indexOf(e)===0}function $X(t){return t>=65&&t<=90||t>=97&&t<=122}function j4t(t,e){return __.isWindows&&t.endsWith(":")&&(t+=Ec.sep),(0,Ec.isAbsolute)(t)||(t=(0,Ec.join)(e,t)),t=(0,Ec.normalize)(t),BOe(t)}function BOe(t){return __.isWindows?(t=(0,E8.rtrim)(t,Ec.sep),t.endsWith(":")&&(t+=Ec.sep)):(t=(0,E8.rtrim)(t,Ec.sep),t||(t=Ec.sep)),t}function B4t(t){let e=(0,Ec.normalize)(t);return __.isWindows?t.length>3?!1:VX(e)&&(t.length===2||e.charCodeAt(2)===92):e===Ec.posix.sep}function VX(t,e=__.isWindows){return e?$X(t.charCodeAt(0))&&t.charCodeAt(1)===58:!1}function $4t(t,e=__.isWindows){return VX(t,e)?t[0]:void 0}function V4t(t,e,r){return e.length>t.length?-1:t===e?0:(r&&(t=t.toLowerCase(),e=e.toLowerCase()),t.indexOf(e))}function H4t(t){let e=t.split(":"),r,n,o;for(let s of e){let a=Number(s);(0,R4t.isNumber)(a)?n===void 0?n=a:o===void 0&&(o=a):r=r?[r,s].join(":"):s}if(!r)throw new Error("Format for `--goto` should be: `FILE:LINE(:COLUMN)`");return{path:r,line:n!==void 0?n:void 0,column:o!==void 0?o:n!==void 0?1:void 0}}var G4t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",z4t="BDEFGHIJKMOQRSTUVWXYZbdefghijkmoqrstuvwxyz0123456789";function W4t(t,e,r=8){let n="";for(let s=0;s<r;s++){let a;s===0&&__.isWindows&&!e&&(r===3||r===4)?a=z4t:a=G4t,n+=a.charAt(Math.floor(Math.random()*a.length))}let o;return e?o=`${e}-${n}`:o=n,t?(0,Ec.join)(t,o):o}});var Bi=m(Cu=>{"use strict";var K4t=Cu&&Cu.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),Y4t=Cu&&Cu.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),Q4t=Cu&&Cu.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),o=0;o<n.length;o++)n[o]!=="default"&&K4t(r,e,n[o]);return Y4t(r,e),r}})();Object.defineProperty(Cu,"__esModule",{value:!0});Cu.URI=void 0;Cu.isUriComponents=i3t;Cu.uriToFsPath=C8;var $Oe=Q4t(Nl()),S8=m_(),Z4t=/^\w[\w\d+.-]*$/,J4t=/^\//,X4t=/^\/\//;function e3t(t,e){if(!t.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${t.authority}", path: "${t.path}", query: "${t.query}", fragment: "${t.fragment}"}`);if(t.scheme&&!Z4t.test(t.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(t.path){if(t.authority){if(!J4t.test(t.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(X4t.test(t.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function t3t(t,e){return!t&&!e?"file":t}function r3t(t,e){switch(t){case"https":case"http":case"file":e?e[0]!==Fd&&(e=Fd+e):e=Fd;break}return e}var Un="",Fd="/",n3t=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,b8=class t{static isUri(e){return e instanceof t?!0:!e||typeof e!="object"?!1:typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function"}constructor(e,r,n,o,s,a=!1){typeof e=="object"?(this.scheme=e.scheme||Un,this.authority=e.authority||Un,this.path=e.path||Un,this.query=e.query||Un,this.fragment=e.fragment||Un):(this.scheme=t3t(e,a),this.authority=r||Un,this.path=r3t(this.scheme,n||Un),this.query=o||Un,this.fragment=s||Un,e3t(this,a))}get fsPath(){return C8(this,!1)}with(e){if(!e)return this;let{scheme:r,authority:n,path:o,query:s,fragment:a}=e;return r===void 0?r=this.scheme:r===null&&(r=Un),n===void 0?n=this.authority:n===null&&(n=Un),o===void 0?o=this.path:o===null&&(o=Un),s===void 0?s=this.query:s===null&&(s=Un),a===void 0?a=this.fragment:a===null&&(a=Un),r===this.scheme&&n===this.authority&&o===this.path&&s===this.query&&a===this.fragment?this:new v_(r,n,o,s,a)}static parse(e,r=!1){let n=n3t.exec(e);return n?new v_(n[2]||Un,T8(n[4]||Un),T8(n[5]||Un),T8(n[7]||Un),T8(n[9]||Un),r):new v_(Un,Un,Un,Un,Un)}static file(e){let r=Un;if(S8.isWindows&&(e=e.replace(/\\/g,Fd)),e[0]===Fd&&e[1]===Fd){let n=e.indexOf(Fd,2);n===-1?(r=e.substring(2),e=Fd):(r=e.substring(2,n),e=e.substring(n)||Fd)}return new v_("file",r,e,Un,Un)}static from(e,r){return new v_(e.scheme,e.authority,e.path,e.query,e.fragment,r)}static joinPath(e,...r){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let n;return S8.isWindows&&e.scheme==="file"?n=t.file($Oe.win32.join(C8(e,!0),...r)).path:n=$Oe.posix.join(e.path,...r),e.with({path:n})}toString(e=!1){return GX(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof t)return e;{let r=new v_(e);return r._formatted=e.external??null,r._fsPath=e._sep===GOe?e.fsPath??null:null,r}}else return e}[Symbol.for("debug.description")](){return`URI(${this.toString()})`}};Cu.URI=b8;function i3t(t){return!t||typeof t!="object"?!1:typeof t.scheme=="string"&&(typeof t.authority=="string"||typeof t.authority>"u")&&(typeof t.path=="string"||typeof t.path>"u")&&(typeof t.query=="string"||typeof t.query>"u")&&(typeof t.fragment=="string"||typeof t.fragment>"u")}var GOe=S8.isWindows?1:void 0,v_=class extends b8{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=C8(this,!1)),this._fsPath}toString(e=!1){return e?GX(this,!0):(this._formatted||(this._formatted=GX(this,!1)),this._formatted)}toJSON(){let e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=GOe),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}},zOe={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function VOe(t,e,r){let n,o=-1;for(let s=0;s<t.length;s++){let a=t.charCodeAt(s);if(a>=97&&a<=122||a>=65&&a<=90||a>=48&&a<=57||a===45||a===46||a===95||a===126||e&&a===47||r&&a===91||r&&a===93||r&&a===58)o!==-1&&(n+=encodeURIComponent(t.substring(o,s)),o=-1),n!==void 0&&(n+=t.charAt(s));else{n===void 0&&(n=t.substr(0,s));let c=zOe[a];c!==void 0?(o!==-1&&(n+=encodeURIComponent(t.substring(o,s)),o=-1),n+=c):o===-1&&(o=s)}}return o!==-1&&(n+=encodeURIComponent(t.substring(o))),n!==void 0?n:t}function o3t(t){let e;for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);n===35||n===63?(e===void 0&&(e=t.substr(0,r)),e+=zOe[n]):e!==void 0&&(e+=t[r])}return e!==void 0?e:t}function C8(t,e){let r;return t.authority&&t.path.length>1&&t.scheme==="file"?r=`//${t.authority}${t.path}`:t.path.charCodeAt(0)===47&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&t.path.charCodeAt(2)===58?e?r=t.path.substr(1):r=t.path[1].toLowerCase()+t.path.substr(2):r=t.path,S8.isWindows&&(r=r.replace(/\//g,"\\")),r}function GX(t,e){let r=e?o3t:VOe,n="",{scheme:o,authority:s,path:a,query:c,fragment:l}=t;if(o&&(n+=o,n+=":"),(s||o==="file")&&(n+=Fd,n+=Fd),s){let u=s.indexOf("@");if(u!==-1){let d=s.substr(0,u);s=s.substr(u+1),u=d.lastIndexOf(":"),u===-1?n+=r(d,!1,!1):(n+=r(d.substr(0,u),!1,!1),n+=":",n+=r(d.substr(u+1),!1,!0)),n+="@"}s=s.toLowerCase(),u=s.lastIndexOf(":"),u===-1?n+=r(s,!1,!0):(n+=r(s.substr(0,u),!1,!0),n+=s.substr(u))}if(a){if(a.length>=3&&a.charCodeAt(0)===47&&a.charCodeAt(2)===58){let u=a.charCodeAt(1);u>=65&&u<=90&&(a=`/${String.fromCharCode(u+32)}:${a.substr(3)}`)}else if(a.length>=2&&a.charCodeAt(1)===58){let u=a.charCodeAt(0);u>=65&&u<=90&&(a=`${String.fromCharCode(u+32)}:${a.substr(2)}`)}n+=r(a,!0,!1)}return c&&(n+="?",n+=r(c,!1,!1)),l&&(n+="#",n+=e?l:VOe(l,!1,!1)),n}function WOe(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substr(0,3)+WOe(t.substr(3)):t}}var HOe=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function T8(t){return t.match(HOe)?t.replace(HOe,e=>WOe(e)):t}});var oE=m(vr=>{"use strict";var s3t=vr&&vr.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),a3t=vr&&vr.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),QX=vr&&vr.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),o=0;o<n.length;o++)n[o]!=="default"&&s3t(r,e,n[o]);return a3t(r,e),r}})();Object.defineProperty(vr,"__esModule",{value:!0});vr.COI=vr.DocumentPolicyheaders=vr.CacheControlheaders=vr.FileAccess=vr.VSCODE_AUTHORITY=vr.nodeModulesAsarUnpackedPath=vr.nodeModulesAsarPath=vr.nodeModulesPath=vr.builtinExtensionsPath=vr.RemoteAuthorities=vr.connectionTokenQueryName=vr.connectionTokenCookieName=vr.Schemas=void 0;vr.matchesScheme=QOe;vr.matchesSomeScheme=l3t;vr.getServerProductSegment=ZOe;var c3t=QX(Gr()),zX=QX(m_()),KOe=Fo(),iE=Bi(),WX=QX(Nl()),w0;(function(t){t.inMemory="inmemory",t.vscode="vscode",t.internal="private",t.walkThrough="walkThrough",t.walkThroughSnippet="walkThroughSnippet",t.http="http",t.https="https",t.file="file",t.mailto="mailto",t.untitled="untitled",t.data="data",t.command="command",t.vscodeRemote="vscode-remote",t.vscodeRemoteResource="vscode-remote-resource",t.vscodeManagedRemoteResource="vscode-managed-remote-resource",t.vscodeUserData="vscode-userdata",t.vscodeCustomEditor="vscode-custom-editor",t.vscodeNotebookCell="vscode-notebook-cell",t.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",t.vscodeNotebookCellMetadataDiff="vscode-notebook-cell-metadata-diff",t.vscodeNotebookCellOutput="vscode-notebook-cell-output",t.vscodeNotebookCellOutputDiff="vscode-notebook-cell-output-diff",t.vscodeNotebookMetadata="vscode-notebook-metadata",t.vscodeInteractiveInput="vscode-interactive-input",t.vscodeSettings="vscode-settings",t.vscodeWorkspaceTrust="vscode-workspace-trust",t.vscodeTerminal="vscode-terminal",t.vscodeChatCodeBlock="vscode-chat-code-block",t.vscodeChatCodeCompareBlock="vscode-chat-code-compare-block",t.vscodeChatEditor="vscode-chat-editor",t.vscodeChatInput="chatSessionInput",t.vscodeChatSession="vscode-chat-session",t.webviewPanel="webview-panel",t.vscodeWebview="vscode-webview",t.extension="extension",t.vscodeFileResource="vscode-file",t.tmp="tmp",t.vsls="vsls",t.vscodeSourceControl="vscode-scm",t.commentsInput="comment",t.codeSetting="code-setting",t.outputChannel="output",t.accessibleView="accessible-view",t.chatEditingSnapshotScheme="chat-editing-snapshot-text-model",t.chatEditingModel="chat-editing-text-model"})(w0||(vr.Schemas=w0={}));function QOe(t,e){return iE.URI.isUri(t)?(0,KOe.equalsIgnoreCase)(t.scheme,e):(0,KOe.startsWithIgnoreCase)(t,e+":")}function l3t(t,...e){return e.some(r=>QOe(t,r))}vr.connectionTokenCookieName="vscode-tkn";vr.connectionTokenQueryName="tkn";var KX=class{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null,this._serverRootPath="/"}setPreferredWebSchema(e){this._preferredWebSchema=e}setDelegate(e){this._delegate=e}setServerRootPath(e,r){this._serverRootPath=WX.posix.join(r??"/",ZOe(e))}getServerRootPath(){return this._serverRootPath}get _remoteResourcesPath(){return WX.posix.join(this._serverRootPath,w0.vscodeRemoteResource)}set(e,r,n){this._hosts[e]=r,this._ports[e]=n}setConnectionToken(e,r){this._connectionTokens[e]=r}getPreferredWebSchema(){return this._preferredWebSchema}rewrite(e){if(this._delegate)try{return this._delegate(e)}catch(c){return c3t.onUnexpectedError(c),e}let r=e.authority,n=this._hosts[r];n&&n.indexOf(":")!==-1&&n.indexOf("[")===-1&&(n=`[${n}]`);let o=this._ports[r],s=this._connectionTokens[r],a=`path=${encodeURIComponent(e.path)}`;return typeof s=="string"&&(a+=`&${vr.connectionTokenQueryName}=${encodeURIComponent(s)}`),iE.URI.from({scheme:zX.isWeb?this._preferredWebSchema:w0.vscodeRemoteResource,authority:`${n}:${o}`,path:this._remoteResourcesPath,query:a})}};vr.RemoteAuthorities=new KX;function ZOe(t){return`${t.quality??"oss"}-${t.commit??"dev"}`}vr.builtinExtensionsPath="vs/../../extensions";vr.nodeModulesPath="vs/../../node_modules";vr.nodeModulesAsarPath="vs/../../node_modules.asar";vr.nodeModulesAsarUnpackedPath="vs/../../node_modules.asar.unpacked";vr.VSCODE_AUTHORITY="vscode-app";var YX=class t{static{this.FALLBACK_AUTHORITY=vr.VSCODE_AUTHORITY}asBrowserUri(e){let r=this.toUri(e);return this.uriToBrowserUri(r)}uriToBrowserUri(e){return e.scheme===w0.vscodeRemote?vr.RemoteAuthorities.rewrite(e):e.scheme===w0.file&&(zX.isNative||zX.webWorkerOrigin===`${w0.vscodeFileResource}://${t.FALLBACK_AUTHORITY}`)?e.with({scheme:w0.vscodeFileResource,authority:e.authority||t.FALLBACK_AUTHORITY,query:null,fragment:null}):e}asFileUri(e){let r=this.toUri(e);return this.uriToFileUri(r)}uriToFileUri(e){return e.scheme===w0.vscodeFileResource?e.with({scheme:w0.file,authority:e.authority!==t.FALLBACK_AUTHORITY?e.authority:null,query:null,fragment:null}):e}toUri(e){if(iE.URI.isUri(e))return e;if(globalThis._VSCODE_FILE_ROOT){let r=globalThis._VSCODE_FILE_ROOT;if(/^\w[\w\d+.-]*:\/\//.test(r))return iE.URI.joinPath(iE.URI.parse(r,!0),e);let n=WX.join(r,e);return iE.URI.file(n)}throw new Error("Cannot determine URI for module id!")}};vr.FileAccess=new YX;vr.CacheControlheaders=Object.freeze({"Cache-Control":"no-cache, no-store"});vr.DocumentPolicyheaders=Object.freeze({"Document-Policy":"include-js-call-stacks-in-crash-reports"});var YOe;(function(t){let e=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);t.CoopAndCoep=Object.freeze(e.get("3"));let r="vscode-coi";function n(s){let a;typeof s=="string"?a=new URL(s).searchParams:s instanceof URL?a=s.searchParams:iE.URI.isUri(s)&&(a=new URL(s.toString(!0)).searchParams);let c=a?.get(r);if(c)return e.get(c)}t.getHeadersFromQuery=n;function o(s,a,c){if(!globalThis.crossOriginIsolated)return;let l=a&&c?"3":c?"2":"1";s instanceof URLSearchParams?s.set(r,l):s[r]=l}t.addSearchParam=o})(YOe||(vr.COI=YOe={}))});var E_=m(xe=>{"use strict";var u3t=xe&&xe.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),d3t=xe&&xe.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),e2e=xe&&xe.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),o=0;o<n.length;o++)n[o]!=="default"&&u3t(r,e,n[o]);return d3t(r,e),r}})();Object.defineProperty(xe,"__esModule",{value:!0});xe.DataUri=xe.addTrailingPathSeparator=xe.removeTrailingPathSeparator=xe.hasTrailingPathSeparator=xe.isEqualAuthority=xe.isAbsolutePath=xe.resolvePath=xe.relativePath=xe.normalizePath=xe.joinPath=xe.dirname=xe.extname=xe.basename=xe.basenameOrAuthority=xe.getComparisonKey=xe.isEqualOrParent=xe.isEqual=xe.extUriIgnorePathCase=xe.extUriBiasedIgnorePathCase=xe.extUri=xe.ExtUri=void 0;xe.originalFSPath=I0;xe.distinctParents=f3t;xe.toLocalResource=p3t;var IA=e2e(HX()),y_=oE(),Da=e2e(Nl()),t2e=m_(),JOe=Fo(),e5=Bi();function I0(t){return(0,e5.uriToFsPath)(t,!0)}var PA=class{constructor(e){this._ignorePathCasing=e}compare(e,r,n=!1){return e===r?0:(0,JOe.compare)(this.getComparisonKey(e,n),this.getComparisonKey(r,n))}isEqual(e,r,n=!1){return e===r?!0:!e||!r?!1:this.getComparisonKey(e,n)===this.getComparisonKey(r,n)}getComparisonKey(e,r=!1){return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:r?null:void 0}).toString()}ignorePathCasing(e){return this._ignorePathCasing(e)}isEqualOrParent(e,r,n=!1){if(e.scheme===r.scheme){if(e.scheme===y_.Schemas.file)return IA.isEqualOrParent(I0(e),I0(r),this._ignorePathCasing(e))&&e.query===r.query&&(n||e.fragment===r.fragment);if((0,xe.isEqualAuthority)(e.authority,r.authority))return IA.isEqualOrParent(e.path,r.path,this._ignorePathCasing(e),"/")&&e.query===r.query&&(n||e.fragment===r.fragment)}return!1}joinPath(e,...r){return e5.URI.joinPath(e,...r)}basenameOrAuthority(e){return(0,xe.basename)(e)||e.authority}basename(e){return Da.posix.basename(e.path)}extname(e){return Da.posix.extname(e.path)}dirname(e){if(e.path.length===0)return e;let r;return e.scheme===y_.Schemas.file?r=e5.URI.file(Da.dirname(I0(e))).path:(r=Da.posix.dirname(e.path),e.authority&&r.length&&r.charCodeAt(0)!==47&&(console.error(`dirname("${e.toString})) resulted in a relative path`),r="/")),e.with({path:r})}normalizePath(e){if(!e.path.length)return e;let r;return e.scheme===y_.Schemas.file?r=e5.URI.file(Da.normalize(I0(e))).path:r=Da.posix.normalize(e.path),e.with({path:r})}relativePath(e,r){if(e.scheme!==r.scheme||!(0,xe.isEqualAuthority)(e.authority,r.authority))return;if(e.scheme===y_.Schemas.file){let s=Da.relative(I0(e),I0(r));return t2e.isWindows?IA.toSlashes(s):s}let n=e.path||"/",o=r.path||"/";if(this._ignorePathCasing(e)){let s=0;for(let a=Math.min(n.length,o.length);s<a&&!(n.charCodeAt(s)!==o.charCodeAt(s)&&n.charAt(s).toLowerCase()!==o.charAt(s).toLowerCase());s++);n=o.substr(0,s)+n.substr(s)}return Da.posix.relative(n,o)}resolvePath(e,r){if(e.scheme===y_.Schemas.file){let n=e5.URI.file(Da.resolve(I0(e),r));return e.with({authority:n.authority,path:n.path})}return r=IA.toPosixPath(r),e.with({path:Da.posix.resolve(e.path,r)})}isAbsolutePath(e){return!!e.path&&e.path[0]==="/"}isEqualAuthority(e,r){return e===r||e!==void 0&&r!==void 0&&(0,JOe.equalsIgnoreCase)(e,r)}hasTrailingPathSeparator(e,r=Da.sep){if(e.scheme===y_.Schemas.file){let n=I0(e);return n.length>IA.getRoot(n).length&&n[n.length-1]===r}else{let n=e.path;return n.length>1&&n.charCodeAt(n.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,r=Da.sep){return(0,xe.hasTrailingPathSeparator)(e,r)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,r=Da.sep){let n=!1;if(e.scheme===y_.Schemas.file){let o=I0(e);n=o!==void 0&&o.length===IA.getRoot(o).length&&o[o.length-1]===r}else{r="/";let o=e.path;n=o.length===1&&o.charCodeAt(o.length-1)===47}return!n&&!(0,xe.hasTrailingPathSeparator)(e,r)?e.with({path:e.path+"/"}):e}};xe.ExtUri=PA;xe.extUri=new PA(()=>!1);xe.extUriBiasedIgnorePathCase=new PA(t=>t.scheme===y_.Schemas.file?!t2e.isLinux:!0);xe.extUriIgnorePathCase=new PA(t=>!0);xe.isEqual=xe.extUri.isEqual.bind(xe.extUri);xe.isEqualOrParent=xe.extUri.isEqualOrParent.bind(xe.extUri);xe.getComparisonKey=xe.extUri.getComparisonKey.bind(xe.extUri);xe.basenameOrAuthority=xe.extUri.basenameOrAuthority.bind(xe.extUri);xe.basename=xe.extUri.basename.bind(xe.extUri);xe.extname=xe.extUri.extname.bind(xe.extUri);xe.dirname=xe.extUri.dirname.bind(xe.extUri);xe.joinPath=xe.extUri.joinPath.bind(xe.extUri);xe.normalizePath=xe.extUri.normalizePath.bind(xe.extUri);xe.relativePath=xe.extUri.relativePath.bind(xe.extUri);xe.resolvePath=xe.extUri.resolvePath.bind(xe.extUri);xe.isAbsolutePath=xe.extUri.isAbsolutePath.bind(xe.extUri);xe.isEqualAuthority=xe.extUri.isEqualAuthority.bind(xe.extUri);xe.hasTrailingPathSeparator=xe.extUri.hasTrailingPathSeparator.bind(xe.extUri);xe.removeTrailingPathSeparator=xe.extUri.removeTrailingPathSeparator.bind(xe.extUri);xe.addTrailingPathSeparator=xe.extUri.addTrailingPathSeparator.bind(xe.extUri);function f3t(t,e){let r=[];for(let n=0;n<t.length;n++){let o=e(t[n]);t.some((s,a)=>a===n?!1:(0,xe.isEqualOrParent)(o,e(s)))||r.push(t[n])}return r}var XOe;(function(t){t.META_DATA_LABEL="label",t.META_DATA_DESCRIPTION="description",t.META_DATA_SIZE="size",t.META_DATA_MIME="mime";function e(r){let n=new Map;r.path.substring(r.path.indexOf(";")+1,r.path.lastIndexOf(";")).split(";").forEach(a=>{let[c,l]=a.split(":");c&&l&&n.set(c,l)});let s=r.path.substring(0,r.path.indexOf(";"));return s&&n.set(t.META_DATA_MIME,s),n}t.parseMetaData=e})(XOe||(xe.DataUri=XOe={}));function p3t(t,e,r){if(e){let n=t.path;return n&&n[0]!==Da.posix.sep&&(n=Da.posix.sep+n),t.with({scheme:r,authority:e,path:n})}return t.with({scheme:r})}});var r2e=m(A8=>{"use strict";Object.defineProperty(A8,"__esModule",{value:!0});A8.MicrotaskDelay=void 0;A8.MicrotaskDelay=Symbol("MicrotaskDelay")});var Ua=m(Ae=>{"use strict";Object.defineProperty(Ae,"__esModule",{value:!0});Ae.AsyncReader=Ae.AsyncReaderEndOfStream=Ae.CancelableAsyncIterableProducer=Ae.AsyncIterableProducer=Ae.AsyncIterableSource=Ae.AsyncIterableObject=Ae.LazyStatefulPromise=Ae.StatefulPromise=Ae.Promises=Ae.DeferredPromise=Ae.IntervalCounter=Ae.TaskSequentializer=Ae.GlobalIdleValue=Ae.AbstractIdleValue=Ae._runWhenIdle=Ae.runWhenGlobalIdle=Ae.ThrottledWorker=Ae.RunOnceWorker=Ae.ProcessTimeRunOnceScheduler=Ae.RunOnceScheduler=Ae.IntervalTimer=Ae.TimeoutTimer=Ae.TaskQueue=Ae.ResourceQueue=Ae.LimitedQueue=Ae.Queue=Ae.Limiter=Ae.AutoOpenBarrier=Ae.Barrier=Ae.ThrottledDelayer=Ae.Delayer=Ae.SequencerByKey=Ae.Sequencer=Ae.Throttler=void 0;Ae.isThenable=o2e;Ae.createCancelablePromise=s2e;Ae.raceCancellation=a2e;Ae.raceCancellationError=_3t;Ae.notCancellablePromise=v3t;Ae.raceCancellablePromises=y3t;Ae.raceTimeout=c2e;Ae.asPromise=E3t;Ae.promiseWithResolvers=l2e;Ae.timeout=gee;Ae.disposableTimeout=b3t;Ae.sequence=C3t;Ae.first=A3t;Ae.firstParallel=x3t;Ae.retry=w3t;Ae.createCancelableAsyncIterableProducer=I3t;Ae.cancellableIterable=P3t;var mee=Oh(),Tc=Gr(),t5=Fi(),RA=Ar(),n2e=E_(),h3t=m_(),m3t=r2e(),g3t=nE();function o2e(t){return!!t&&typeof t.then=="function"}function s2e(t){let e=new mee.CancellationTokenSource,r=t(e.token),n=!1,o=new Promise((s,a)=>{let c=e.token.onCancellationRequested(()=>{n=!0,c.dispose(),a(new Tc.CancellationError)});Promise.resolve(r).then(l=>{c.dispose(),e.dispose(),n?(0,RA.isDisposable)(l)&&l.dispose():s(l)},l=>{c.dispose(),e.dispose(),a(l)})});return new class{cancel(){e.cancel(),e.dispose()}then(s,a){return o.then(s,a)}catch(s){return this.then(void 0,s)}finally(s){return o.finally(s)}}}function a2e(t,e,r){return new Promise((n,o)=>{let s=e.onCancellationRequested(()=>{s.dispose(),n(r)});t.then(n,o).finally(()=>s.dispose())})}function _3t(t,e){return new Promise((r,n)=>{let o=e.onCancellationRequested(()=>{o.dispose(),n(new Tc.CancellationError)});t.then(r,n).finally(()=>o.dispose())})}function v3t(t){return new Promise((e,r)=>{t.then(e,r)})}function y3t(t){let e=-1,r=t.map((o,s)=>o.then(a=>(e=s,a))),n=Promise.race(r);return n.cancel=()=>{t.forEach((o,s)=>{s!==e&&o.cancel&&o.cancel()})},n.finally(()=>{n.cancel()}),n}function c2e(t,e,r){let n,o=setTimeout(()=>{n?.(void 0),r?.()},e);return Promise.race([t.finally(()=>clearTimeout(o)),new Promise(s=>n=s)])}function E3t(t){return new Promise((e,r)=>{let n=t();o2e(n)?n.then(e,r):e(n)})}function l2e(){let t,e;return{promise:new Promise((n,o)=>{t=n,e=o}),resolve:t,reject:e}}var x8=class{constructor(){this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null,this.cancellationTokenSource=new mee.CancellationTokenSource}queue(e){if(this.cancellationTokenSource.token.isCancellationRequested)return Promise.reject(new Error("Throttler is disposed"));if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){let r=()=>{if(this.queuedPromise=null,this.cancellationTokenSource.token.isCancellationRequested)return;let n=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,n};this.queuedPromise=new Promise(n=>{this.activePromise.then(r,r).then(n)})}return new Promise((r,n)=>{this.queuedPromise.then(r,n)})}return this.activePromise=e(this.cancellationTokenSource.token),new Promise((r,n)=>{this.activePromise.then(o=>{this.activePromise=null,r(o)},o=>{this.activePromise=null,n(o)})})}dispose(){this.cancellationTokenSource.cancel()}};Ae.Throttler=x8;var ZX=class{constructor(){this.current=Promise.resolve(null)}queue(e){return this.current=this.current.then(()=>e(),()=>e())}};Ae.Sequencer=ZX;var JX=class{constructor(){this.promiseMap=new Map}queue(e,r){let o=(this.promiseMap.get(e)??Promise.resolve()).catch(()=>{}).then(r).finally(()=>{this.promiseMap.get(e)===o&&this.promiseMap.delete(e)});return this.promiseMap.set(e,o),o}keys(){return this.promiseMap.keys()}};Ae.SequencerByKey=JX;var T3t=(t,e)=>{let r=!0,n=setTimeout(()=>{r=!1,e()},t);return{isTriggered:()=>r,dispose:()=>{clearTimeout(n),r=!1}}},S3t=t=>{let e=!0;return queueMicrotask(()=>{e&&(e=!1,t())}),{isTriggered:()=>e,dispose:()=>{e=!1}}},w8=class{constructor(e){this.defaultDelay=e,this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(e,r=this.defaultDelay){this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((o,s)=>{this.doResolve=o,this.doReject=s}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){let o=this.task;return this.task=null,o()}}));let n=()=>{this.deferred=null,this.doResolve?.(null)};return this.deferred=r===m3t.MicrotaskDelay?S3t(n):T3t(r,n),this.completionPromise}isTriggered(){return!!this.deferred?.isTriggered()}cancel(){this.cancelTimeout(),this.completionPromise&&(this.doReject?.(new Tc.CancellationError),this.completionPromise=null)}cancelTimeout(){this.deferred?.dispose(),this.deferred=null}dispose(){this.cancel()}};Ae.Delayer=w8;var XX=class{constructor(e){this.delayer=new w8(e),this.throttler=new x8}trigger(e,r){return this.delayer.trigger(()=>this.throttler.queue(e),r)}isTriggered(){return this.delayer.isTriggered()}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose(),this.throttler.dispose()}};Ae.ThrottledDelayer=XX;var I8=class{constructor(){this._isOpen=!1,this._promise=new Promise((e,r)=>{this._completePromise=e})}isOpen(){return this._isOpen}open(){this._isOpen=!0,this._completePromise(!0)}wait(){return this._promise}};Ae.Barrier=I8;var eee=class extends I8{constructor(e){super(),this._timeout=setTimeout(()=>this.open(),e)}open(){clearTimeout(this._timeout),super.open()}};Ae.AutoOpenBarrier=eee;function gee(t,e){return e?new Promise((r,n)=>{let o=setTimeout(()=>{s.dispose(),r()},t),s=e.onCancellationRequested(()=>{clearTimeout(o),s.dispose(),n(new Tc.CancellationError)})}):s2e(r=>gee(t,r))}function b3t(t,e=0,r){let n=setTimeout(()=>{t(),r&&o.dispose()},e),o=(0,RA.toDisposable)(()=>{clearTimeout(n),r?.delete(o)});return r?.add(o),o}function C3t(t){let e=[],r=0,n=t.length;function o(){return r<n?t[r++]():null}function s(a){a!=null&&e.push(a);let c=o();return c?c.then(s):Promise.resolve(e)}return Promise.resolve(null).then(s)}function A3t(t,e=n=>!!n,r=null){let n=0,o=t.length,s=()=>{if(n>=o)return Promise.resolve(r);let a=t[n++];return Promise.resolve(a()).then(l=>e(l)?Promise.resolve(l):s())};return s()}function x3t(t,e=n=>!!n,r=null){if(t.length===0)return Promise.resolve(r);let n=t.length,o=()=>{n=-1;for(let s of t)s.cancel?.()};return new Promise((s,a)=>{for(let c of t)c.then(l=>{--n>=0&&e(l)?(o(),s(l)):n===0&&s(r)}).catch(l=>{--n>=0&&(o(),a(l))})})}var P8=class{constructor(e){this._size=0,this._isDisposed=!1,this.maxDegreeOfParalellism=e,this.outstandingPromises=[],this.runningPromises=0,this._onDrained=new t5.Emitter}whenIdle(){return this.size>0?t5.Event.toPromise(this.onDrained):Promise.resolve()}get onDrained(){return this._onDrained.event}get size(){return this._size}queue(e){if(this._isDisposed)throw new Error("Object has been disposed");return this._size++,new Promise((r,n)=>{this.outstandingPromises.push({factory:e,c:r,e:n}),this.consume()})}consume(){for(;this.outstandingPromises.length&&this.runningPromises<this.maxDegreeOfParalellism;){let e=this.outstandingPromises.shift();this.runningPromises++;let r=e.factory();r.then(e.c,e.e),r.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this._isDisposed||(this.runningPromises--,--this._size===0&&this._onDrained.fire(),this.outstandingPromises.length>0&&this.consume())}clear(){if(this._isDisposed)throw new Error("Object has been disposed");this.outstandingPromises.length=0,this._size=this.runningPromises}dispose(){this._isDisposed=!0,this.outstandingPromises.length=0,this._size=0,this._onDrained.dispose()}};Ae.Limiter=P8;var R8=class extends P8{constructor(){super(1)}};Ae.Queue=R8;var tee=class{constructor(){this.sequentializer=new M8,this.tasks=0}queue(e){return this.sequentializer.isRunning()?this.sequentializer.queue(()=>this.sequentializer.run(this.tasks++,e())):this.sequentializer.run(this.tasks++,e())}};Ae.LimitedQueue=tee;var ree=class{constructor(){this.queues=new Map,this.drainers=new Set,this.drainListeners=void 0,this.drainListenerCount=0}async whenDrained(){if(this.isDrained())return;let e=new T_;return this.drainers.add(e),e.p}isDrained(){for(let[,e]of this.queues)if(e.size>0)return!1;return!0}queueSize(e,r=n2e.extUri){let n=r.getComparisonKey(e);return this.queues.get(n)?.size??0}queueFor(e,r,n=n2e.extUri){let o=n.getComparisonKey(e),s=this.queues.get(o);if(!s){s=new R8;let a=this.drainListenerCount++,c=t5.Event.once(s.onDrained)(()=>{s?.dispose(),this.queues.delete(o),this.onDidQueueDrain(),this.drainListeners?.deleteAndDispose(a),this.drainListeners?.size===0&&(this.drainListeners.dispose(),this.drainListeners=void 0)});this.drainListeners||(this.drainListeners=new RA.DisposableMap),this.drainListeners.set(a,c),this.queues.set(o,s)}return s.queue(r)}onDidQueueDrain(){this.isDrained()&&this.releaseDrainers()}releaseDrainers(){for(let e of this.drainers)e.complete();this.drainers.clear()}dispose(){for(let[,e]of this.queues)e.dispose();this.queues.clear(),this.releaseDrainers(),this.drainListeners?.dispose()}};Ae.ResourceQueue=ree;var nee=class{constructor(){this._runningTask=void 0,this._pendingTasks=[]}schedule(e){let r=new T_;return this._pendingTasks.push({task:e,deferred:r,setUndefinedWhenCleared:!1}),this._runIfNotRunning(),r.p}scheduleSkipIfCleared(e){let r=new T_;return this._pendingTasks.push({task:e,deferred:r,setUndefinedWhenCleared:!0}),this._runIfNotRunning(),r.p}_runIfNotRunning(){this._runningTask===void 0&&this._processQueue()}async _processQueue(){if(this._pendingTasks.length===0)return;let e=this._pendingTasks.shift();if(e){if(this._runningTask)throw new Tc.BugIndicatingError;this._runningTask=e.task;try{let r=await e.task();e.deferred.complete(r)}catch(r){e.deferred.error(r)}finally{this._runningTask=void 0,this._processQueue()}}}clearPending(){let e=this._pendingTasks;this._pendingTasks=[];for(let r of e)r.setUndefinedWhenCleared?r.deferred.complete(void 0):r.deferred.error(new Tc.CancellationError)}};Ae.TaskQueue=nee;var iee=class{constructor(e,r){this._isDisposed=!1,this._token=void 0,typeof e=="function"&&typeof r=="number"&&this.setIfNotSet(e,r)}dispose(){this.cancel(),this._isDisposed=!0}cancel(){this._token!==void 0&&(clearTimeout(this._token),this._token=void 0)}cancelAndSet(e,r){if(this._isDisposed)throw new Tc.BugIndicatingError("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout(()=>{this._token=void 0,e()},r)}setIfNotSet(e,r){if(this._isDisposed)throw new Tc.BugIndicatingError("Calling 'setIfNotSet' on a disposed TimeoutTimer");this._token===void 0&&(this._token=setTimeout(()=>{this._token=void 0,e()},r))}};Ae.TimeoutTimer=iee;var oee=class{constructor(){this.disposable=void 0,this.isDisposed=!1}cancel(){this.disposable?.dispose(),this.disposable=void 0}cancelAndSet(e,r,n=globalThis){if(this.isDisposed)throw new Tc.BugIndicatingError("Calling 'cancelAndSet' on a disposed IntervalTimer");this.cancel();let o=n.setInterval(()=>{e()},r);this.disposable=(0,RA.toDisposable)(()=>{n.clearInterval(o),this.disposable=void 0})}dispose(){this.cancel(),this.isDisposed=!0}};Ae.IntervalTimer=oee;var r5=class{constructor(e,r){this.timeoutToken=void 0,this.runner=e,this.timeout=r,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=void 0)}schedule(e=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}get delay(){return this.timeout}set delay(e){this.timeout=e}isScheduled(){return this.timeoutToken!==void 0}flush(){this.isScheduled()&&(this.cancel(),this.doRun())}onTimeout(){this.timeoutToken=void 0,this.runner&&this.doRun()}doRun(){this.runner?.()}};Ae.RunOnceScheduler=r5;var see=class{constructor(e,r){r%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${r}ms is not a multiple of 1000ms.`),this.runner=e,this.timeout=r,this.counter=0,this.intervalToken=void 0,this.intervalHandler=this.onInterval.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearInterval(this.intervalToken),this.intervalToken=void 0)}schedule(e=this.timeout){e%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${e}ms is not a multiple of 1000ms.`),this.cancel(),this.counter=Math.ceil(e/1e3),this.intervalToken=setInterval(this.intervalHandler,1e3)}isScheduled(){return this.intervalToken!==void 0}onInterval(){this.counter--,!(this.counter>0)&&(clearInterval(this.intervalToken),this.intervalToken=void 0,this.runner?.())}};Ae.ProcessTimeRunOnceScheduler=see;var aee=class extends r5{constructor(e,r){super(e,r),this.units=[]}work(e){this.units.push(e),this.isScheduled()||this.schedule()}doRun(){let e=this.units;this.units=[],this.runner?.(e)}dispose(){this.units=[],super.dispose()}};Ae.RunOnceWorker=aee;var cee=class extends RA.Disposable{constructor(e,r){super(),this.options=e,this.handler=r,this.pendingWork=[],this.throttler=this._register(new RA.MutableDisposable),this.disposed=!1,this.lastExecutionTime=0}get pending(){return this.pendingWork.length}work(e){if(this.disposed)return!1;if(typeof this.options.maxBufferedWork=="number"){if(this.throttler.value){if(this.pending+e.length>this.options.maxBufferedWork)return!1}else if(this.pending+e.length-this.options.maxWorkChunkSize>this.options.maxBufferedWork)return!1}for(let n of e)this.pendingWork.push(n);let r=Date.now()-this.lastExecutionTime;return!this.throttler.value&&(!this.options.waitThrottleDelayBetweenWorkUnits||r>=this.options.throttleDelay)?this.doWork():!this.throttler.value&&this.options.waitThrottleDelayBetweenWorkUnits&&this.scheduleThrottler(Math.max(this.options.throttleDelay-r,0)),!0}doWork(){this.lastExecutionTime=Date.now(),this.handler(this.pendingWork.splice(0,this.options.maxWorkChunkSize)),this.pendingWork.length>0&&this.scheduleThrottler()}scheduleThrottler(e=this.options.throttleDelay){this.throttler.value=new r5(()=>{this.throttler.clear(),this.doWork()},e),this.throttler.value.schedule()}dispose(){super.dispose(),this.pendingWork.length=0,this.disposed=!0}};Ae.ThrottledWorker=cee;(function(){let t=globalThis;typeof t.requestIdleCallback!="function"||typeof t.cancelIdleCallback!="function"?Ae._runWhenIdle=(e,r,n)=>{(0,h3t.setTimeout0)(()=>{if(o)return;let s=Date.now()+15;r(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,s-Date.now())}}))});let o=!1;return{dispose(){o||(o=!0)}}}:Ae._runWhenIdle=(e,r,n)=>{let o=e.requestIdleCallback(r,typeof n=="number"?{timeout:n}:void 0),s=!1;return{dispose(){s||(s=!0,e.cancelIdleCallback(o))}}},Ae.runWhenGlobalIdle=(e,r)=>(0,Ae._runWhenIdle)(globalThis,e,r)})();var O8=class{constructor(e,r){this._didRun=!1,this._executor=()=>{try{this._value=r()}catch(n){this._error=n}finally{this._didRun=!0}},this._handle=(0,Ae._runWhenIdle)(e,()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}};Ae.AbstractIdleValue=O8;var lee=class extends O8{constructor(e){super(globalThis,e)}};Ae.GlobalIdleValue=lee;async function w3t(t,e,r){let n;for(let o=0;o<r;o++)try{return await t()}catch(s){n=s,await gee(e)}throw n}var M8=class{isRunning(e){return typeof e=="number"?this._running?.taskId===e:!!this._running}get running(){return this._running?.promise}cancelRunning(){this._running?.cancel()}run(e,r,n){return this._running={taskId:e,cancel:()=>n?.(),promise:r},r.then(()=>this.doneRunning(e),()=>this.doneRunning(e)),r}doneRunning(e){this._running&&e===this._running.taskId&&(this._running=void 0,this.runQueued())}runQueued(){if(this._queued){let e=this._queued;this._queued=void 0,e.run().then(e.promiseResolve,e.promiseReject)}}queue(e){if(this._queued)this._queued.run=e;else{let{promise:r,resolve:n,reject:o}=l2e();this._queued={run:e,promise:r,promiseResolve:n,promiseReject:o}}return this._queued.promise}hasQueued(){return!!this._queued}async join(){return this._queued?.promise??this._running?.promise}};Ae.TaskSequentializer=M8;var uee=class{constructor(e,r=()=>Date.now()){this.interval=e,this.nowFn=r,this.lastIncrementTime=0,this.value=0}increment(){let e=this.nowFn();return e-this.lastIncrementTime>this.interval&&(this.lastIncrementTime=e,this.value=0),this.value++,this.value}};Ae.IntervalCounter=uee;var T_=class t{static fromPromise(e){let r=new t;return r.settleWith(e),r}get isRejected(){return this.outcome?.outcome===1}get isResolved(){return this.outcome?.outcome===0}get isSettled(){return!!this.outcome}get value(){return this.outcome?.outcome===0?this.outcome?.value:void 0}constructor(){this.p=new Promise((e,r)=>{this.completeCallback=e,this.errorCallback=r})}complete(e){return this.isSettled?Promise.resolve():new Promise(r=>{this.completeCallback(e),this.outcome={outcome:0,value:e},r()})}error(e){return this.isSettled?Promise.resolve():new Promise(r=>{this.errorCallback(e),this.outcome={outcome:1,value:e},r()})}settleWith(e){return e.then(r=>this.complete(r),r=>this.error(r))}cancel(){return this.error(new Tc.CancellationError)}};Ae.DeferredPromise=T_;var i2e;(function(t){async function e(n){let o,s=await Promise.all(n.map(a=>a.then(c=>c,c=>{o||(o=c)})));if(typeof o<"u")throw o;return s}t.settled=e;function r(n){return new Promise(async(o,s)=>{try{await n(o,s)}catch(a){s(a)}})}t.withAsyncBody=r})(i2e||(Ae.Promises=i2e={}));var N8=class{get value(){return this._value}get error(){return this._error}get isResolved(){return this._isResolved}constructor(e){this._value=void 0,this._error=void 0,this._isResolved=!1,this.promise=e.then(r=>(this._value=r,this._isResolved=!0,r),r=>{throw this._error=r,this._isResolved=!0,r})}requireValue(){if(!this._isResolved)throw new Tc.BugIndicatingError("Promise is not resolved yet");if(this._error)throw this._error;return this._value}};Ae.StatefulPromise=N8;var dee=class{constructor(e){this._compute=e,this._promise=new g3t.Lazy(()=>new N8(this._compute()))}requireValue(){return this._promise.value.requireValue()}getPromise(){return this._promise.value.promise}get currentValue(){return this._promise.rawValue?.value}};Ae.LazyStatefulPromise=dee;var L8=class t{static fromArray(e){return new t(r=>{r.emitMany(e)})}static fromPromise(e){return new t(async r=>{r.emitMany(await e)})}static fromPromisesResolveOrder(e){return new t(async r=>{await Promise.all(e.map(async n=>r.emitOne(await n)))})}static merge(e){return new t(async r=>{await Promise.all(e.map(async n=>{for await(let o of n)r.emitOne(o)}))})}static{this.EMPTY=t.fromArray([])}constructor(e,r){this._state=0,this._results=[],this._error=null,this._onReturn=r,this._onStateChanged=new t5.Emitter,queueMicrotask(async()=>{let n={emitOne:o=>this.emitOne(o),emitMany:o=>this.emitMany(o),reject:o=>this.reject(o)};try{await Promise.resolve(e(n)),this.resolve()}catch(o){this.reject(o)}finally{n.emitOne=void 0,n.emitMany=void 0,n.reject=void 0}})}[Symbol.asyncIterator](){let e=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};await t5.Event.toPromise(this._onStateChanged.event)}while(!0)},return:async()=>(this._onReturn?.(),{done:!0,value:void 0})}}static map(e,r){return new t(async n=>{for await(let o of e)n.emitOne(r(o))})}map(e){return t.map(this,e)}static filter(e,r){return new t(async n=>{for await(let o of e)r(o)&&n.emitOne(o)})}filter(e){return t.filter(this,e)}static coalesce(e){return t.filter(e,r=>!!r)}coalesce(){return t.coalesce(this)}static async toPromise(e){let r=[];for await(let n of e)r.push(n);return r}toPromise(){return t.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}};Ae.AsyncIterableObject=L8;function I3t(t){let e=new mee.CancellationTokenSource,r=t(e.token);return new D8(e,async n=>{let o=e.token.onCancellationRequested(()=>{o.dispose(),e.dispose(),n.reject(new Tc.CancellationError)});try{for await(let s of r){if(e.token.isCancellationRequested)return;n.emitOne(s)}o.dispose(),e.dispose()}catch(s){o.dispose(),e.dispose(),n.reject(s)}})}var fee=class{constructor(e){this._deferred=new T_,this._asyncIterable=new L8(o=>{if(r){o.reject(r);return}return n&&o.emitMany(n),this._errorFn=s=>o.reject(s),this._emitOneFn=s=>o.emitOne(s),this._emitManyFn=s=>o.emitMany(s),this._deferred.p},e);let r,n;this._errorFn=o=>{r||(r=o)},this._emitOneFn=o=>{n||(n=[]),n.push(o)},this._emitManyFn=o=>{n?o.forEach(s=>n.push(s)):n=o.slice()}}get asyncIterable(){return this._asyncIterable}resolve(){this._deferred.complete()}reject(e){this._errorFn(e),this._deferred.complete()}emitOne(e){this._emitOneFn(e)}emitMany(e){this._emitManyFn(e)}};Ae.AsyncIterableSource=fee;function P3t(t,e){let r=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t;return{async next(){return e.isCancellationRequested?{done:!0,value:void 0}:await a2e(r.next(),e)||{done:!0,value:void 0}},throw:r.throw?.bind(r),return:r.return?.bind(r),[Symbol.asyncIterator](){return this}}}var pee=class{constructor(){this._unsatisfiedConsumers=[],this._unconsumedValues=[]}get hasFinalValue(){return!!this._finalValue}produce(e){if(this._ensureNoFinalValue(),this._unsatisfiedConsumers.length>0){let r=this._unsatisfiedConsumers.shift();this._resolveOrRejectDeferred(r,e)}else this._unconsumedValues.push(e)}produceFinal(e){this._ensureNoFinalValue(),this._finalValue=e;for(let r of this._unsatisfiedConsumers)this._resolveOrRejectDeferred(r,e);this._unsatisfiedConsumers.length=0}_ensureNoFinalValue(){if(this._finalValue)throw new Tc.BugIndicatingError("ProducerConsumer: cannot produce after final value has been set")}_resolveOrRejectDeferred(e,r){r.ok?e.complete(r.value):e.error(r.error)}consume(){if(this._unconsumedValues.length>0||this._finalValue){let e=this._unconsumedValues.length>0?this._unconsumedValues.shift():this._finalValue;return e.ok?Promise.resolve(e.value):Promise.reject(e.error)}else{let e=new T_;return this._unsatisfiedConsumers.push(e),e.p}}},k8=class t{constructor(e,r){this._onReturn=r,this._producerConsumer=new pee,this._iterator={next:()=>this._producerConsumer.consume(),return:()=>(this._onReturn?.(),Promise.resolve({done:!0,value:void 0})),throw:async n=>(this._finishError(n),{done:!0,value:void 0})},queueMicrotask(async()=>{let n=e({emitOne:o=>this._producerConsumer.produce({ok:!0,value:{done:!1,value:o}}),emitMany:o=>{for(let s of o)this._producerConsumer.produce({ok:!0,value:{done:!1,value:s}})},reject:o=>this._finishError(o)});if(!this._producerConsumer.hasFinalValue)try{await n,this._finishOk()}catch(o){this._finishError(o)}})}static fromArray(e){return new t(r=>{r.emitMany(e)})}static fromPromise(e){return new t(async r=>{r.emitMany(await e)})}static fromPromisesResolveOrder(e){return new t(async r=>{await Promise.all(e.map(async n=>r.emitOne(await n)))})}static merge(e){return new t(async r=>{await Promise.all(e.map(async n=>{for await(let o of n)r.emitOne(o)}))})}static{this.EMPTY=t.fromArray([])}static map(e,r){return new t(async n=>{for await(let o of e)n.emitOne(r(o))})}map(e){return t.map(this,e)}static coalesce(e){return t.filter(e,r=>!!r)}coalesce(){return t.coalesce(this)}static filter(e,r){return new t(async n=>{for await(let o of e)r(o)&&n.emitOne(o)})}filter(e){return t.filter(this,e)}_finishOk(){this._producerConsumer.hasFinalValue||this._producerConsumer.produceFinal({ok:!0,value:{done:!0,value:void 0}})}_finishError(e){this._producerConsumer.hasFinalValue||this._producerConsumer.produceFinal({ok:!1,error:e})}[Symbol.asyncIterator](){return this._iterator}};Ae.AsyncIterableProducer=k8;var D8=class extends k8{constructor(e,r){super(r),this._source=e}cancel(){this._source.cancel()}};Ae.CancelableAsyncIterableProducer=D8;Ae.AsyncReaderEndOfStream=Symbol("AsyncReaderEndOfStream");var hee=class{get endOfStream(){return this._buffer.length===0&&this._atEnd}constructor(e){this._source=e,this._buffer=[],this._atEnd=!1}async read(){return this._buffer.length===0&&!this._atEnd&&await this._extendBuffer(),this._buffer.length===0?Ae.AsyncReaderEndOfStream:this._buffer.shift()}async readWhile(e,r){do{let n=await this.peek();if(n===Ae.AsyncReaderEndOfStream||!e(n))break;await this.read(),await r(n)}while(!0)}readBufferedOrThrow(){let e=this.peekBufferedOrThrow();return this._buffer.shift(),e}async consumeToEnd(){for(;!this.endOfStream;)await this.read()}async peek(){return this._buffer.length===0&&!this._atEnd&&await this._extendBuffer(),this._buffer.length===0?Ae.AsyncReaderEndOfStream:this._buffer[0]}peekBufferedOrThrow(){if(this._buffer.length===0){if(this._atEnd)return Ae.AsyncReaderEndOfStream;throw new Tc.BugIndicatingError("No buffered elements")}return this._buffer[0]}async peekTimeout(e){if(this._buffer.length===0&&!this._atEnd&&await c2e(this._extendBuffer(),e),this._atEnd)return Ae.AsyncReaderEndOfStream;if(this._buffer.length!==0)return this._buffer[0]}_extendBuffer(){return this._atEnd?Promise.resolve():(this._extendBufferPromise||(this._extendBufferPromise=(async()=>{let{value:e,done:r}=await this._source.next();this._extendBufferPromise=void 0,r?this._atEnd=!0:this._buffer.push(e)})()),this._extendBufferPromise)}};Ae.AsyncReader=hee});var q8=m(U8=>{"use strict";Object.defineProperty(U8,"__esModule",{value:!0});U8.SyncDescriptor=void 0;var _ee=class{constructor(e,r=[],n=!1){this.ctor=e,this.staticArguments=r,this.supportsDelayedInstantiation=n}};U8.SyncDescriptor=_ee});var u2e=m(OA=>{"use strict";Object.defineProperty(OA,"__esModule",{value:!0});OA.Graph=OA.Node=void 0;var F8=class{constructor(e,r){this.key=e,this.data=r,this.incoming=new Map,this.outgoing=new Map}};OA.Node=F8;var vee=class{constructor(e){this._hashFn=e,this._nodes=new Map}roots(){let e=[];for(let r of this._nodes.values())r.outgoing.size===0&&e.push(r);return e}insertEdge(e,r){let n=this.lookupOrInsertNode(e),o=this.lookupOrInsertNode(r);n.outgoing.set(o.key,o),o.incoming.set(n.key,n)}removeNode(e){let r=this._hashFn(e);this._nodes.delete(r);for(let n of this._nodes.values())n.outgoing.delete(r),n.incoming.delete(r)}lookupOrInsertNode(e){let r=this._hashFn(e),n=this._nodes.get(r);return n||(n=new F8(r,e),this._nodes.set(r,n)),n}lookup(e){return this._nodes.get(this._hashFn(e))}isEmpty(){return this._nodes.size===0}toString(){let e=[];for(let[r,n]of this._nodes)e.push(`${r}
	(-> incoming)[${[...n.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...n.outgoing.keys()].join(",")}]
`);return e.join(`
`)}findCycleSlow(){for(let[e,r]of this._nodes){let n=new Set([e]),o=this._findCycle(r,n);if(o)return o}}_findCycle(e,r){for(let[n,o]of e.outgoing){if(r.has(n))return[...r,n].join(" -> ");r.add(n);let s=this._findCycle(o,r);if(s)return s;r.delete(n)}}};OA.Graph=vee});var Eee=m(j8=>{"use strict";Object.defineProperty(j8,"__esModule",{value:!0});j8.ServiceCollection=void 0;var yee=class{constructor(...e){this._entries=new Map;for(let[r,n]of e)this.set(r,n)}set(e,r){let n=this._entries.get(e);return this._entries.set(e,r),n}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}};j8.ServiceCollection=yee});var p2e=m(LA=>{"use strict";Object.defineProperty(LA,"__esModule",{value:!0});LA.Trace=LA.InstantiationService=void 0;var R3t=Ua(),d2e=Gr(),Tee=Ar(),MA=q8(),f2e=u2e(),See=Nr(),O3t=Eee(),M3t=V2(),N3t=!1,B8=class extends Error{constructor(e){super("cyclic dependency between services"),this.message=e.findCycleSlow()??`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}},bee=class t{constructor(e=new O3t.ServiceCollection,r=!1,n,o=N3t){this._services=e,this._strict=r,this._parent=n,this._enableTracing=o,this._isDisposed=!1,this._servicesToMaybeDispose=new Set,this._children=new Set,this._activeInstantiations=new Set,this._services.set(See.IInstantiationService,this),this._globalGraph=o?n?._globalGraph??new f2e.Graph(s=>s):void 0}dispose(){if(!this._isDisposed){this._isDisposed=!0,(0,Tee.dispose)(this._children),this._children.clear();for(let e of this._servicesToMaybeDispose)(0,Tee.isDisposable)(e)&&e.dispose();this._servicesToMaybeDispose.clear()}}_throwIfDisposed(){if(this._isDisposed)throw new Error("InstantiationService has been disposed")}createChild(e,r){this._throwIfDisposed();let n=this,o=new class extends t{dispose(){n._children.delete(o),super.dispose()}}(e,this._strict,this,this._enableTracing);return this._children.add(o),r?.add(o),o}invokeFunction(e,...r){this._throwIfDisposed();let n=NA.traceInvocation(this._enableTracing,e),o=!1;try{return e({get:a=>{if(o)throw(0,d2e.illegalState)("service accessor is only valid during the invocation of its target method");let c=this._getOrCreateServiceInstance(a,n);if(!c)throw new Error(`[invokeFunction] unknown service '${a}'`);return c},getIfExists:a=>{if(o)throw(0,d2e.illegalState)("service accessor is only valid during the invocation of its target method");return this._getOrCreateServiceInstance(a,n)}},...r)}finally{o=!0,n.stop()}}createInstance(e,...r){this._throwIfDisposed();let n,o;return e instanceof MA.SyncDescriptor?(n=NA.traceCreation(this._enableTracing,e.ctor),o=this._createInstance(e.ctor,e.staticArguments.concat(r),n)):(n=NA.traceCreation(this._enableTracing,e),o=this._createInstance(e,r,n)),n.stop(),o}_createInstance(e,r=[],n){let o=See._util.getServiceDependencies(e).sort((c,l)=>c.index-l.index),s=[];for(let c of o){let l=this._getOrCreateServiceInstance(c.id,n);l||this._throwIfStrict(`[createInstance] ${e.name} depends on UNKNOWN service ${c.id}.`,!1),s.push(l)}let a=o.length>0?o[0].index:r.length;if(r.length!==a){console.trace(`[createInstance] First service dependency of ${e.name} at position ${a+1} conflicts with ${r.length} static arguments`);let c=a-r.length;c>0?r=r.concat(new Array(c)):r=r.slice(0,a)}return Reflect.construct(e,r.concat(s))}_setCreatedServiceInstance(e,r){if(this._services.get(e)instanceof MA.SyncDescriptor)this._services.set(e,r);else if(this._parent)this._parent._setCreatedServiceInstance(e,r);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){let r=this._services.get(e);return!r&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):r}_getOrCreateServiceInstance(e,r){this._globalGraph&&this._globalGraphImplicitDependency&&this._globalGraph.insertEdge(this._globalGraphImplicitDependency,String(e));let n=this._getServiceInstanceOrDescriptor(e);return n instanceof MA.SyncDescriptor?this._safeCreateAndCacheServiceInstance(e,n,r.branch(e,!0)):(r.branch(e,!1),n)}_safeCreateAndCacheServiceInstance(e,r,n){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,r,n)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,r,n){let o=new f2e.Graph(l=>l.id.toString()),s=0,a=[{id:e,desc:r,_trace:n}],c=new Set;for(;a.length;){let l=a.pop();if(!c.has(String(l.id))){if(c.add(String(l.id)),o.lookupOrInsertNode(l),s++>1e3)throw new B8(o);for(let u of See._util.getServiceDependencies(l.desc.ctor)){let d=this._getServiceInstanceOrDescriptor(u.id);if(d||this._throwIfStrict(`[createInstance] ${e} depends on ${u.id} which is NOT registered.`,!0),this._globalGraph?.insertEdge(String(l.id),String(u.id)),d instanceof MA.SyncDescriptor){let f={id:u.id,desc:d,_trace:l._trace.branch(u.id,!0)};o.insertEdge(l,f),a.push(f)}}}}for(;;){let l=o.roots();if(l.length===0){if(!o.isEmpty())throw new B8(o);break}for(let{data:u}of l){if(this._getServiceInstanceOrDescriptor(u.id)instanceof MA.SyncDescriptor){let f=this._createServiceInstanceWithOwner(u.id,u.desc.ctor,u.desc.staticArguments,u.desc.supportsDelayedInstantiation,u._trace);this._setCreatedServiceInstance(u.id,f)}o.removeNode(u)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,r,n=[],o,s){if(this._services.get(e)instanceof MA.SyncDescriptor)return this._createServiceInstance(e,r,n,o,s,this._servicesToMaybeDispose);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,r,n,o,s);throw new Error(`illegalState - creating UNKNOWN service instance ${r.name}`)}_createServiceInstance(e,r,n=[],o,s,a){if(o){let c=new t(void 0,this._strict,this,this._enableTracing);c._globalGraphImplicitDependency=String(e);let l=new Map,u=new R3t.GlobalIdleValue(()=>{let d=c._createInstance(r,n,s);for(let[f,p]of l){let h=d[f];if(typeof h=="function")for(let _ of p)_.disposable=h.apply(d,_.listener)}return l.clear(),a.add(d),d});return new Proxy(Object.create(null),{get(d,f){if(!u.isInitialized&&typeof f=="string"&&(f.startsWith("onDid")||f.startsWith("onWill"))){let _=l.get(f);return _||(_=new M3t.LinkedList,l.set(f,_)),(v,E,y)=>{if(u.isInitialized)return u.value[f](v,E,y);{let S={listener:[v,E,y],disposable:void 0},b=_.push(S);return(0,Tee.toDisposable)(()=>{b(),S.disposable?.dispose()})}}}if(f in d)return d[f];let p=u.value,h=p[f];return typeof h!="function"||(h=h.bind(p),d[f]=h),h},set(d,f,p){return u.value[f]=p,!0},getPrototypeOf(d){return r.prototype}})}else{let c=this._createInstance(r,n,s);return a.add(c),c}}_throwIfStrict(e,r){if(r&&console.warn(e),this._strict)throw new Error(e)}};LA.InstantiationService=bee;var NA=class t{static{this.all=new Set}static{this._None=new class extends t{constructor(){super(0,null)}stop(){}branch(){return this}}}static traceInvocation(e,r){return e?new t(2,r.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):t._None}static traceCreation(e,r){return e?new t(1,r.name):t._None}static{this._totals=0}constructor(e,r){this.type=e,this.name=r,this._start=Date.now(),this._dep=[]}branch(e,r){let n=new t(3,e.toString());return this._dep.push([e,r,n]),n}stop(){let e=Date.now()-this._start;t._totals+=e;let r=!1;function n(s,a){let c=[],l=new Array(s+1).join("	");for(let[u,d,f]of a._dep)if(d&&f){r=!0,c.push(`${l}CREATES -> ${u}`);let p=n(s+1,f);p&&c.push(p)}else c.push(`${l}uses -> ${u}`);return c.join(`
`)}let o=[`${this.type===1?"CREATE":"CALL"} ${this.name}`,`${n(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${t._totals.toFixed(2)}ms)`];(e>2||r)&&t.all.add(o.join(`
`))}};LA.Trace=NA});var Qe=m(kA=>{"use strict";Object.defineProperty(kA,"__esModule",{value:!0});kA.InstantiationServiceBuilder=kA.createServiceIdentifier=void 0;var L3t=Nr();Object.defineProperty(kA,"createServiceIdentifier",{enumerable:!0,get:function(){return L3t.createDecorator}});var k3t=p2e(),h2e=Eee(),Cee=class{constructor(e){this._isSealed=!1,this._collection=Array.isArray(e)?new h2e.ServiceCollection(...e):e??new h2e.ServiceCollection}define(e,r){if(this._isSealed)throw new Error("This accessor is sealed and cannot be modified anymore.");this._collection.set(e,r)}seal(){if(this._isSealed)throw new Error("This accessor is sealed and cannot be seal again anymore.");return this._isSealed=!0,new k3t.InstantiationService(this._collection,!0)}};kA.InstantiationServiceBuilder=Cee});var S_=m(DA=>{"use strict";Object.defineProperty(DA,"__esModule",{value:!0});DA.CopilotTokenStore=DA.ICopilotTokenStore=void 0;var D3t=Qe(),U3t=Fi(),q3t=Ar();DA.ICopilotTokenStore=(0,D3t.createServiceIdentifier)("ICopilotTokenStore");var Aee=class extends q3t.Disposable{constructor(){super(...arguments),this._onDidStoreUpdate=this._register(new U3t.Emitter),this.onDidStoreUpdate=this._onDidStoreUpdate.event}get copilotToken(){return this._copilotToken}set copilotToken(e){let r=this._copilotToken?.token;this._copilotToken=e,r!==e?.token&&this._onDidStoreUpdate.fire()}};DA.CopilotTokenStore=Aee});var qa=m(ta=>{"use strict";var F3t=ta&&ta.__decorate||function(t,e,r,n){var o=arguments.length,s=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(o<3?a(s):o>3?a(e,r,s):a(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},j3t=ta&&ta.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(ta,"__esModule",{value:!0});ta.TelemetryTrustedValue=ta.ITelemetryService=ta.TelemetryUserConfigImpl=ta.ITelemetryUserConfig=void 0;ta.multiplexProperties=V3t;var m2e=Qe(),B3t=S_();ta.ITelemetryUserConfig=(0,m2e.createServiceIdentifier)("ITelemetryUserConfig");var xee=class{constructor(e,r,n){this._tokenStore=n,this.trackingId=e,this.optedIn=r??!1,this.setupUpdateOnToken()}setupUpdateOnToken(){this._tokenStore.onDidStoreUpdate(()=>{let e=this._tokenStore.copilotToken;if(!e)return;let r=e.getTokenValue("rt")==="1",n=e.getTokenValue("tid");n!==void 0&&(this.trackingId=n,this.organizationsList=e.organizationList.toString(),this.optedIn=r)})}};ta.TelemetryUserConfigImpl=xee;ta.TelemetryUserConfigImpl=xee=F3t([j3t(2,B3t.ICopilotTokenStore)],xee);ta.ITelemetryService=(0,m2e.createServiceIdentifier)("ITelemetryService");var wee=class{constructor(e){this.value=e,this.isTrustedTelemetryValue=!0}};ta.TelemetryTrustedValue=wee;var n5=8192,$3t=50;function V3t(t){let e={...t};for(let r in t){let n=t[r],o=n?.length??0;if(o>n5){let s=0,a=0;for(;o>0&&a<$3t;){a+=1;let c=r;a>1&&(c=r+"_"+(a<10?"0":"")+a);let l=s+n5;o<n5&&(l=s+o),e[c]=n.slice(s,l),o-=n5,s+=n5}}}return e}});var Oee=m(ir=>{"use strict";var H3t=ir&&ir.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),G3t=ir&&ir.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),z3t=ir&&ir.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&H3t(e,t,r);return G3t(e,t),e},Iee=ir&&ir.__awaiter||function(t,e,r,n){function o(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function c(d){try{u(n.next(d))}catch(f){a(f)}}function l(d){try{u(n.throw(d))}catch(f){a(f)}}function u(d){d.done?s(d.value):o(d.value).then(c,l)}u((n=n.apply(t,e||[])).next())})},Pee=ir&&ir.__generator||function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,o,s,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(u){return function(d){return l([u,d])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(r=0)),r;)try{if(n=1,o&&(s=u[0]&2?o.return:u[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,u[1])).done)return s;switch(o=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,o=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],o=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(ir,"__esModule",{value:!0});ir.getShallowFileSize=ir.getShallowDirectorySizeSync=ir.getShallowDirectorySize=ir.confirmDirExists=ir.unlinkAsync=ir.readdirAsync=ir.readFileAsync=ir.writeFileAsync=ir.appendFileAsync=ir.accessAsync=ir.mkdirAsync=ir.lstatAsync=ir.statAsync=void 0;var jd=z3t(require("fs")),g2e=require("path"),Uh=require("util"),Ree=qn();ir.statAsync=(0,Uh.promisify)(jd.stat);ir.lstatAsync=(0,Uh.promisify)(jd.lstat);ir.mkdirAsync=(0,Uh.promisify)(jd.mkdir);ir.accessAsync=(0,Uh.promisify)(jd.access);ir.appendFileAsync=(0,Uh.promisify)(jd.appendFile);ir.writeFileAsync=(0,Uh.promisify)(jd.writeFile);ir.readFileAsync=(0,Uh.promisify)(jd.readFile);ir.readdirAsync=(0,Uh.promisify)(jd.readdir);ir.unlinkAsync=(0,Uh.promisify)(jd.unlink);var W3t=function(t){return Iee(void 0,void 0,void 0,function(){var e,r,n;return Pee(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,7]),[4,(0,ir.lstatAsync)(t)];case 1:if(e=o.sent(),!e.isDirectory())throw new Error("Path existed but was not a directory");return[3,7];case 2:if(r=o.sent(),!(r&&r.code==="ENOENT"))return[3,6];o.label=3;case 3:return o.trys.push([3,5,,6]),[4,(0,ir.mkdirAsync)(t)];case 4:return o.sent(),[3,6];case 5:if(n=o.sent(),n&&n.code!=="EEXIST")throw n;return[3,6];case 6:return[3,7];case 7:return[2]}})})};ir.confirmDirExists=W3t;var K3t=function(t){return Iee(void 0,void 0,void 0,function(){var e,r,n,o,s,a,c;return Pee(this,function(l){switch(l.label){case 0:e=0,l.label=1;case 1:return l.trys.push([1,7,,8]),[4,(0,ir.readdirAsync)(t)];case 2:r=l.sent(),n=0,o=r,l.label=3;case 3:return n<o.length?(s=o[n],[4,(0,ir.statAsync)(g2e.join(t,s))]):[3,6];case 4:a=l.sent(),a.isFile()&&(e+=a.size),l.label=5;case 5:return n++,[3,3];case 6:return[3,8];case 7:return c=l.sent(),Ree.warn("Failed to get directory size for ".concat(t)),[3,8];case 8:return[2,e]}})})};ir.getShallowDirectorySize=K3t;var Y3t=function(t){var e=0;try{for(var r=jd.readdirSync(t),n=0;n<r.length;n++)e+=jd.statSync(g2e.join(t,r[n])).size}catch{Ree.warn("Failed to get directory size synchronously for ".concat(t))}return e};ir.getShallowDirectorySizeSync=Y3t;var Q3t=function(t){return Iee(void 0,void 0,void 0,function(){var e,r;return Pee(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,(0,ir.statAsync)(t)];case 1:return e=n.sent(),e.isFile()?[2,e.size]:[3,3];case 2:return r=n.sent(),Ree.warn("Failed to get file size for ".concat(t)),[2,-1];case 3:return[2]}})})};ir.getShallowFileSize=Q3t});var y2e=m((aE,v2e)=>{"use strict";var Mee=aE&&aE.__awaiter||function(t,e,r,n){function o(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function c(d){try{u(n.next(d))}catch(f){a(f)}}function l(d){try{u(n.throw(d))}catch(f){a(f)}}function u(d){d.done?s(d.value):o(d.value).then(c,l)}u((n=n.apply(t,e||[])).next())})},Nee=aE&&aE.__generator||function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,o,s,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(u){return function(d){return l([u,d])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(r=0)),r;)try{if(n=1,o&&(s=u[0]&2?o.return:u[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,u[1])).done)return s;switch(o=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,o=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],o=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},_2e=aE&&aE.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,o=e.length,s;n<o;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))},Z3t=require("fs"),J3t=require("os"),sE=require("path"),P0=Oee(),X3t=(function(){function t(){var e=this;this.TAG="Logger",this._cleanupTimeOut=1800*1e3,this._tempDir="",this._logFileName="",this._fileFullPath="",this._backUpNameFormat="",this._logToFile=!1,this._logToConsole=!0;var r=process.env.APPLICATIONINSIGHTS_LOG_DESTINATION;r=="file+console"&&(this._logToFile=!0),r=="file"&&(this._logToFile=!0,this._logToConsole=!1),this.maxSizeBytes=5e4,this.maxHistory=1,this._logFileName="applicationinsights.log";var n=process.env.APPLICATIONINSIGHTS_LOGDIR;n?sE.isAbsolute(n)?this._tempDir=n:this._tempDir=sE.join(process.cwd(),n):this._tempDir=sE.join(J3t.tmpdir(),"appInsights-node"),this._fileFullPath=sE.join(this._tempDir,this._logFileName),this._backUpNameFormat="."+this._logFileName,this._logToFile&&(t._fileCleanupTimer||(t._fileCleanupTimer=setInterval(function(){e._fileCleanupTask()},this._cleanupTimeOut),t._fileCleanupTimer.unref()))}return t.prototype.info=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var o=e?_2e([e],r,!0):r;this._logToFile&&this._storeToDisk(o),this._logToConsole&&console.info.apply(console,o)},t.prototype.warning=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var o=e?_2e([e],r,!0):r;this._logToFile&&this._storeToDisk(o),this._logToConsole&&console.warn.apply(console,o)},t.getInstance=function(){return t._instance||(t._instance=new t),t._instance},t.prototype._storeToDisk=function(e){return Mee(this,void 0,void 0,function(){var r,n,o,s,a,c;return Nee(this,function(l){switch(l.label){case 0:r=e+`\r
`,l.label=1;case 1:return l.trys.push([1,3,,4]),[4,P0.confirmDirExists(this._tempDir)];case 2:return l.sent(),[3,4];case 3:return n=l.sent(),console.log(this.TAG,"Failed to create directory for log file: "+(n&&n.message)),[2];case 4:return l.trys.push([4,6,,11]),[4,P0.accessAsync(this._fileFullPath,Z3t.constants.F_OK)];case 5:return l.sent(),[3,11];case 6:o=l.sent(),l.label=7;case 7:return l.trys.push([7,9,,10]),[4,P0.appendFileAsync(this._fileFullPath,r)];case 8:return l.sent(),[2];case 9:return s=l.sent(),console.log(this.TAG,"Failed to put log into file: "+(o&&o.message)),[2];case 10:return[3,11];case 11:return l.trys.push([11,17,,18]),[4,P0.getShallowFileSize(this._fileFullPath)];case 12:return a=l.sent(),a>this.maxSizeBytes?[4,this._createBackupFile(r)]:[3,14];case 13:return l.sent(),[3,16];case 14:return[4,P0.appendFileAsync(this._fileFullPath,r)];case 15:l.sent(),l.label=16;case 16:return[3,18];case 17:return c=l.sent(),console.log(this.TAG,"Failed to create backup file: "+(c&&c.message)),[3,18];case 18:return[2]}})})},t.prototype._createBackupFile=function(e){return Mee(this,void 0,void 0,function(){var r,n,o;return Nee(this,function(s){switch(s.label){case 0:return s.trys.push([0,3,4,5]),[4,P0.readFileAsync(this._fileFullPath)];case 1:return r=s.sent(),n=sE.join(this._tempDir,new Date().getTime()+"."+this._logFileName),[4,P0.writeFileAsync(n,r)];case 2:return s.sent(),[3,5];case 3:return o=s.sent(),console.log("Failed to generate backup log file",o),[3,5];case 4:return P0.writeFileAsync(this._fileFullPath,e),[7];case 5:return[2]}})})},t.prototype._fileCleanupTask=function(){return Mee(this,void 0,void 0,function(){var e,r,n,o,s,a=this;return Nee(this,function(c){switch(c.label){case 0:return c.trys.push([0,6,,7]),[4,P0.readdirAsync(this._tempDir)];case 1:e=c.sent(),e=e.filter(function(l){return sE.basename(l).indexOf(a._backUpNameFormat)>-1}),e.sort(function(l,u){var d=new Date(parseInt(l.split(a._backUpNameFormat)[0])),f=new Date(parseInt(u.split(a._backUpNameFormat)[0]));if(d<f)return-1;if(d>=f)return 1}),r=e.length,n=0,c.label=2;case 2:return n<r-this.maxHistory?(o=sE.join(this._tempDir,e[n]),[4,P0.unlinkAsync(o)]):[3,5];case 3:c.sent(),c.label=4;case 4:return n++,[3,2];case 5:return[3,7];case 6:return s=c.sent(),console.log(this.TAG,"Failed to cleanup log files: "+(s&&s.message)),[3,7];case 7:return[2]}})})},t._fileCleanupTimer=null,t})();v2e.exports=X3t});var qn=m((VSn,T2e)=>{"use strict";var E2e=y2e(),eLt="APPLICATION_INSIGHTS_ENABLE_DEBUG_LOGS",tLt="APPLICATION_INSIGHTS_DISABLE_WARNING_LOGS",rLt=(function(){function t(){}return t.info=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.enableDebug&&E2e.getInstance().info(this.TAG+e,r)},t.warn=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.disableWarnings||E2e.getInstance().warning(this.TAG+e,r)},t.enableDebug=!!process.env[eLt],t.disableWarnings=!!process.env[tLt],t.TAG="ApplicationInsights:",t})();T2e.exports=rLt});var S2e=m((HSn,nLt)=>{nLt.exports={}});var V8=m(UA=>{"use strict";var iLt=UA&&UA.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(UA,"__esModule",{value:!0});UA.JsonConfig=void 0;var oLt=require("fs"),$8=require("path"),Lee=qn(),sLt=iLt(S2e()),aLt="APPLICATIONINSIGHTS_CONFIGURATION_FILE",cLt="APPLICATIONINSIGHTS_CONNECTION_STRING",b2e="APPSETTING_",C2e="APPINSIGHTS_INSTRUMENTATIONKEY",A2e="APPINSIGHTS_INSTRUMENTATION_KEY",lLt="APPLICATION_INSIGHTS_DISABLE_EXTENDED_METRIC",uLt="APPLICATION_INSIGHTS_DISABLE_ALL_EXTENDED_METRICS",dLt="http_proxy",fLt="https_proxy",pLt="APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL",hLt="APPLICATION_INSIGHTS_NO_STATSBEAT",mLt="APPLICATION_INSIGHTS_NO_HTTP_AGENT_KEEP_ALIVE",gLt="APPLICATION_INSIGHTS_NO_PATCH_MODULES",_Lt="APPLICATIONINSIGHTS_WEB_INSTRUMENTATION_ENABLED",vLt="APPLICATIONINSIGHTS_WEB_INSTRUMENTATION_CONNECTION_STRING",yLt="APPLICATIONINSIGHTS_WEB_INSTRUMENTATION_SOURCE",ELt="APPLICATIONINSIGHTS_WEB_SNIPPET_ENABLED",TLt="APPLICATIONINSIGHTS_WEB_SNIPPET_CONNECTION_STRING",SLt=(function(){function t(){this.connectionString=process.env[cLt],this.instrumentationKey=process.env[C2e]||process.env[b2e+C2e]||process.env[A2e]||process.env[b2e+A2e],!this.connectionString&&this.instrumentationKey&&Lee.warn("APPINSIGHTS_INSTRUMENTATIONKEY is in path of deprecation, please use APPLICATIONINSIGHTS_CONNECTION_STRING env variable to setup the SDK."),this.disableAllExtendedMetrics=!!process.env[uLt],this.extendedMetricDisablers=process.env[lLt],this.proxyHttpUrl=process.env[dLt],this.proxyHttpsUrl=process.env[fLt],this.noDiagnosticChannel=!!process.env[pLt],this.disableStatsbeat=!!process.env[hLt],this.noHttpAgentKeepAlive=!!process.env[mLt],this.noPatchModules=process.env[gLt]||"",this.enableWebInstrumentation=!!process.env[_Lt]||!!process.env[ELt],this.webInstrumentationSrc=process.env[yLt]||"",this.webInstrumentationConnectionString=process.env[vLt]||process.env[TLt]||"",this.enableAutoWebSnippetInjection=this.enableWebInstrumentation,this.webSnippetConnectionString=this.webInstrumentationConnectionString,this._loadJsonFile()}return t.getInstance=function(){return t._instance||(t._instance=new t),t._instance},t.prototype._loadJsonFile=function(){var e="",r=process.env.APPLICATIONINSIGHTS_CONFIGURATION_CONTENT;if(r)e=r;else{var n="applicationinsights.json",o=$8.join(__dirname,"../../");this._tempDir=$8.join(o,n);var s=process.env[aLt];if(s){$8.isAbsolute(s)?this._tempDir=s:this._tempDir=$8.join(o,s);try{e=oLt.readFileSync(this._tempDir,"utf8")}catch(c){Lee.warn("Failed to read JSON config file: ",c)}}else e=JSON.stringify(sLt.default)}try{var a=JSON.parse(e);a.disableStatsbeat!=null&&(this.disableStatsbeat=a.disableStatsbeat),a.disableAllExtendedMetrics!=null&&(this.disableAllExtendedMetrics=a.disableStatsbeat),a.noDiagnosticChannel!=null&&(this.noDiagnosticChannel=a.noDiagnosticChannel),a.noHttpAgentKeepAlive!=null&&(this.noHttpAgentKeepAlive=a.noHttpAgentKeepAlive),a.connectionString!=null&&(this.connectionString=a.connectionString),a.extendedMetricDisablers!=null&&(this.extendedMetricDisablers=a.extendedMetricDisablers),a.noDiagnosticChannel!=null&&(this.noDiagnosticChannel=a.noDiagnosticChannel),a.proxyHttpUrl!=null&&(this.proxyHttpUrl=a.proxyHttpUrl),a.proxyHttpsUrl!=null&&(this.proxyHttpsUrl=a.proxyHttpsUrl),a.proxyHttpsUrl!=null&&(this.proxyHttpsUrl=a.proxyHttpsUrl),a.noPatchModules!=null&&(this.noPatchModules=a.noPatchModules),a.enableAutoWebSnippetInjection!=null&&(this.enableWebInstrumentation=a.enableAutoWebSnippetInjection,this.enableAutoWebSnippetInjection=this.enableWebInstrumentation),a.enableWebInstrumentation!=null&&(this.enableWebInstrumentation=a.enableWebInstrumentation,this.enableAutoWebSnippetInjection=this.enableWebInstrumentation),a.webSnippetConnectionString!=null&&(this.webInstrumentationConnectionString=a.webSnippetConnectionString,this.webSnippetConnectionString=this.webInstrumentationConnectionString),a.webInstrumentationConnectionString!=null&&(this.webInstrumentationConnectionString=a.webInstrumentationConnectionString,this.webSnippetConnectionString=this.webInstrumentationConnectionString),a.webInstrumentationConfig!=null&&(this.webInstrumentationConfig=a.webInstrumentationConfig),a.webInstrumentationSrc!=null&&(this.webInstrumentationSrc=a.webInstrumentationSrc),a.enableLoggerErrorToTrace!=null&&(this.enableLoggerErrorToTrace=a.enableLoggerErrorToTrace),this.endpointUrl=a.endpointUrl,this.maxBatchSize=a.maxBatchSize,this.maxBatchIntervalMs=a.maxBatchIntervalMs,this.disableAppInsights=a.disableAppInsights,this.samplingPercentage=a.samplingPercentage,this.correlationIdRetryIntervalMs=a.correlationIdRetryIntervalMs,this.correlationHeaderExcludedDomains=a.correlationHeaderExcludedDomains,this.ignoreLegacyHeaders=a.ignoreLegacyHeaders,this.distributedTracingMode=a.distributedTracingMode,this.enableAutoCollectExternalLoggers=a.enableAutoCollectExternalLoggers,this.enableAutoCollectConsole=a.enableAutoCollectConsole,this.enableLoggerErrorToTrace=a.enableLoggerErrorToTrace,this.enableAutoCollectExceptions=a.enableAutoCollectExceptions,this.enableAutoCollectPerformance=a.enableAutoCollectPerformance,this.enableAutoCollectExtendedMetrics=a.enableAutoCollectExtendedMetrics,this.enableAutoCollectPreAggregatedMetrics=a.enableAutoCollectPreAggregatedMetrics,this.enableAutoCollectHeartbeat=a.enableAutoCollectHeartbeat,this.enableAutoCollectRequests=a.enableAutoCollectRequests,this.enableAutoCollectDependencies=a.enableAutoCollectDependencies,this.enableAutoDependencyCorrelation=a.enableAutoDependencyCorrelation,this.enableAutoCollectIncomingRequestAzureFunctions=a.enableAutoCollectIncomingRequestAzureFunctions,this.enableUseAsyncHooks=a.enableUseAsyncHooks,this.enableUseDiskRetryCaching=a.enableUseDiskRetryCaching,this.enableResendInterval=a.enableResendInterval,this.enableMaxBytesOnDisk=a.enableMaxBytesOnDisk,this.enableInternalDebugLogging=a.enableInternalDebugLogging,this.enableInternalWarningLogging=a.enableInternalWarningLogging,this.enableSendLiveMetrics=a.enableSendLiveMetrics,this.quickPulseHost=a.quickPulseHost}catch(c){Lee.warn("Invalid JSON config file: ",c)}},t})();UA.JsonConfig=SLt});var i5=m((zSn,x2e)=>{"use strict";var bLt="2.0.0",CLt=Number.MAX_SAFE_INTEGER||9007199254740991,ALt=16,xLt=250,wLt=["major","premajor","minor","preminor","patch","prepatch","prerelease"];x2e.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:ALt,MAX_SAFE_BUILD_LENGTH:xLt,MAX_SAFE_INTEGER:CLt,RELEASE_TYPES:wLt,SEMVER_SPEC_VERSION:bLt,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var o5=m((WSn,w2e)=>{"use strict";var ILt=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};w2e.exports=ILt});var qA=m((R0,I2e)=>{"use strict";var{MAX_SAFE_COMPONENT_LENGTH:kee,MAX_SAFE_BUILD_LENGTH:PLt,MAX_LENGTH:RLt}=i5(),OLt=o5();R0=I2e.exports={};var MLt=R0.re=[],NLt=R0.safeRe=[],rt=R0.src=[],LLt=R0.safeSrc=[],nt=R0.t={},kLt=0,Dee="[a-zA-Z0-9-]",DLt=[["\\s",1],["\\d",RLt],[Dee,PLt]],ULt=t=>{for(let[e,r]of DLt)t=t.split(`${e}*`).join(`${e}{0,${r}}`).split(`${e}+`).join(`${e}{1,${r}}`);return t},or=(t,e,r)=>{let n=ULt(e),o=kLt++;OLt(t,o,e),nt[t]=o,rt[o]=e,LLt[o]=n,MLt[o]=new RegExp(e,r?"g":void 0),NLt[o]=new RegExp(n,r?"g":void 0)};or("NUMERICIDENTIFIER","0|[1-9]\\d*");or("NUMERICIDENTIFIERLOOSE","\\d+");or("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${Dee}*`);or("MAINVERSION",`(${rt[nt.NUMERICIDENTIFIER]})\\.(${rt[nt.NUMERICIDENTIFIER]})\\.(${rt[nt.NUMERICIDENTIFIER]})`);or("MAINVERSIONLOOSE",`(${rt[nt.NUMERICIDENTIFIERLOOSE]})\\.(${rt[nt.NUMERICIDENTIFIERLOOSE]})\\.(${rt[nt.NUMERICIDENTIFIERLOOSE]})`);or("PRERELEASEIDENTIFIER",`(?:${rt[nt.NONNUMERICIDENTIFIER]}|${rt[nt.NUMERICIDENTIFIER]})`);or("PRERELEASEIDENTIFIERLOOSE",`(?:${rt[nt.NONNUMERICIDENTIFIER]}|${rt[nt.NUMERICIDENTIFIERLOOSE]})`);or("PRERELEASE",`(?:-(${rt[nt.PRERELEASEIDENTIFIER]}(?:\\.${rt[nt.PRERELEASEIDENTIFIER]})*))`);or("PRERELEASELOOSE",`(?:-?(${rt[nt.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${rt[nt.PRERELEASEIDENTIFIERLOOSE]})*))`);or("BUILDIDENTIFIER",`${Dee}+`);or("BUILD",`(?:\\+(${rt[nt.BUILDIDENTIFIER]}(?:\\.${rt[nt.BUILDIDENTIFIER]})*))`);or("FULLPLAIN",`v?${rt[nt.MAINVERSION]}${rt[nt.PRERELEASE]}?${rt[nt.BUILD]}?`);or("FULL",`^${rt[nt.FULLPLAIN]}$`);or("LOOSEPLAIN",`[v=\\s]*${rt[nt.MAINVERSIONLOOSE]}${rt[nt.PRERELEASELOOSE]}?${rt[nt.BUILD]}?`);or("LOOSE",`^${rt[nt.LOOSEPLAIN]}$`);or("GTLT","((?:<|>)?=?)");or("XRANGEIDENTIFIERLOOSE",`${rt[nt.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);or("XRANGEIDENTIFIER",`${rt[nt.NUMERICIDENTIFIER]}|x|X|\\*`);or("XRANGEPLAIN",`[v=\\s]*(${rt[nt.XRANGEIDENTIFIER]})(?:\\.(${rt[nt.XRANGEIDENTIFIER]})(?:\\.(${rt[nt.XRANGEIDENTIFIER]})(?:${rt[nt.PRERELEASE]})?${rt[nt.BUILD]}?)?)?`);or("XRANGEPLAINLOOSE",`[v=\\s]*(${rt[nt.XRANGEIDENTIFIERLOOSE]})(?:\\.(${rt[nt.XRANGEIDENTIFIERLOOSE]})(?:\\.(${rt[nt.XRANGEIDENTIFIERLOOSE]})(?:${rt[nt.PRERELEASELOOSE]})?${rt[nt.BUILD]}?)?)?`);or("XRANGE",`^${rt[nt.GTLT]}\\s*${rt[nt.XRANGEPLAIN]}$`);or("XRANGELOOSE",`^${rt[nt.GTLT]}\\s*${rt[nt.XRANGEPLAINLOOSE]}$`);or("COERCEPLAIN",`(^|[^\\d])(\\d{1,${kee}})(?:\\.(\\d{1,${kee}}))?(?:\\.(\\d{1,${kee}}))?`);or("COERCE",`${rt[nt.COERCEPLAIN]}(?:$|[^\\d])`);or("COERCEFULL",rt[nt.COERCEPLAIN]+`(?:${rt[nt.PRERELEASE]})?(?:${rt[nt.BUILD]})?(?:$|[^\\d])`);or("COERCERTL",rt[nt.COERCE],!0);or("COERCERTLFULL",rt[nt.COERCEFULL],!0);or("LONETILDE","(?:~>?)");or("TILDETRIM",`(\\s*)${rt[nt.LONETILDE]}\\s+`,!0);R0.tildeTrimReplace="$1~";or("TILDE",`^${rt[nt.LONETILDE]}${rt[nt.XRANGEPLAIN]}$`);or("TILDELOOSE",`^${rt[nt.LONETILDE]}${rt[nt.XRANGEPLAINLOOSE]}$`);or("LONECARET","(?:\\^)");or("CARETTRIM",`(\\s*)${rt[nt.LONECARET]}\\s+`,!0);R0.caretTrimReplace="$1^";or("CARET",`^${rt[nt.LONECARET]}${rt[nt.XRANGEPLAIN]}$`);or("CARETLOOSE",`^${rt[nt.LONECARET]}${rt[nt.XRANGEPLAINLOOSE]}$`);or("COMPARATORLOOSE",`^${rt[nt.GTLT]}\\s*(${rt[nt.LOOSEPLAIN]})$|^$`);or("COMPARATOR",`^${rt[nt.GTLT]}\\s*(${rt[nt.FULLPLAIN]})$|^$`);or("COMPARATORTRIM",`(\\s*)${rt[nt.GTLT]}\\s*(${rt[nt.LOOSEPLAIN]}|${rt[nt.XRANGEPLAIN]})`,!0);R0.comparatorTrimReplace="$1$2$3";or("HYPHENRANGE",`^\\s*(${rt[nt.XRANGEPLAIN]})\\s+-\\s+(${rt[nt.XRANGEPLAIN]})\\s*$`);or("HYPHENRANGELOOSE",`^\\s*(${rt[nt.XRANGEPLAINLOOSE]})\\s+-\\s+(${rt[nt.XRANGEPLAINLOOSE]})\\s*$`);or("STAR","(<|>)?=?\\s*\\*");or("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");or("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var H8=m((KSn,P2e)=>{"use strict";var qLt=Object.freeze({loose:!0}),FLt=Object.freeze({}),jLt=t=>t?typeof t!="object"?qLt:t:FLt;P2e.exports=jLt});var Uee=m((YSn,M2e)=>{"use strict";var R2e=/^[0-9]+$/,O2e=(t,e)=>{let r=R2e.test(t),n=R2e.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1},BLt=(t,e)=>O2e(e,t);M2e.exports={compareIdentifiers:O2e,rcompareIdentifiers:BLt}});var ra=m((QSn,L2e)=>{"use strict";var G8=o5(),{MAX_LENGTH:N2e,MAX_SAFE_INTEGER:z8}=i5(),{safeRe:W8,t:K8}=qA(),$Lt=H8(),{compareIdentifiers:FA}=Uee(),qee=class t{constructor(e,r){if(r=$Lt(r),e instanceof t){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>N2e)throw new TypeError(`version is longer than ${N2e} characters`);G8("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=e.trim().match(r.loose?W8[K8.LOOSE]:W8[K8.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>z8||this.major<0)throw new TypeError("Invalid major version");if(this.minor>z8||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>z8||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(o=>{if(/^[0-9]+$/.test(o)){let s=+o;if(s>=0&&s<z8)return s}return o}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(G8("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if(typeof e=="string"&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof t||(e=new t(e,this.options)),FA(this.major,e.major)||FA(this.minor,e.minor)||FA(this.patch,e.patch)}comparePre(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],o=e.prerelease[r];if(G8("prerelease compare",r,n,o),n===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(n===void 0)return-1;if(n===o)continue;return FA(n,o)}while(++r)}compareBuild(e){e instanceof t||(e=new t(e,this.options));let r=0;do{let n=this.build[r],o=e.build[r];if(G8("build compare",r,n,o),n===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(n===void 0)return-1;if(n===o)continue;return FA(n,o)}while(++r)}inc(e,r,n){if(e.startsWith("pre")){if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(r){let o=`-${r}`.match(this.options.loose?W8[K8.PRERELEASELOOSE]:W8[K8.PRERELEASE]);if(!o||o[1]!==r)throw new Error(`invalid identifier: ${r}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let o=Number(n)?1:0;if(this.prerelease.length===0)this.prerelease=[o];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(o)}}if(r){let s=[r,o];n===!1&&(s=[r]),FA(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};L2e.exports=qee});var cE=m((ZSn,D2e)=>{"use strict";var k2e=ra(),VLt=(t,e,r=!1)=>{if(t instanceof k2e)return t;try{return new k2e(t,e)}catch(n){if(!r)return null;throw n}};D2e.exports=VLt});var q2e=m((JSn,U2e)=>{"use strict";var HLt=cE(),GLt=(t,e)=>{let r=HLt(t,e);return r?r.version:null};U2e.exports=GLt});var j2e=m((XSn,F2e)=>{"use strict";var zLt=cE(),WLt=(t,e)=>{let r=zLt(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null};F2e.exports=WLt});var V2e=m((ebn,$2e)=>{"use strict";var B2e=ra(),KLt=(t,e,r,n,o)=>{typeof r=="string"&&(o=n,n=r,r=void 0);try{return new B2e(t instanceof B2e?t.version:t,r).inc(e,n,o).version}catch{return null}};$2e.exports=KLt});var z2e=m((tbn,G2e)=>{"use strict";var H2e=cE(),YLt=(t,e)=>{let r=H2e(t,null,!0),n=H2e(e,null,!0),o=r.compare(n);if(o===0)return null;let s=o>0,a=s?r:n,c=s?n:r,l=!!a.prerelease.length;if(!!c.prerelease.length&&!l){if(!c.patch&&!c.minor)return"major";if(c.compareMain(a)===0)return c.minor&&!c.patch?"minor":"patch"}let d=l?"pre":"";return r.major!==n.major?d+"major":r.minor!==n.minor?d+"minor":r.patch!==n.patch?d+"patch":"prerelease"};G2e.exports=YLt});var K2e=m((rbn,W2e)=>{"use strict";var QLt=ra(),ZLt=(t,e)=>new QLt(t,e).major;W2e.exports=ZLt});var Q2e=m((nbn,Y2e)=>{"use strict";var JLt=ra(),XLt=(t,e)=>new JLt(t,e).minor;Y2e.exports=XLt});var J2e=m((ibn,Z2e)=>{"use strict";var ekt=ra(),tkt=(t,e)=>new ekt(t,e).patch;Z2e.exports=tkt});var e5e=m((obn,X2e)=>{"use strict";var rkt=cE(),nkt=(t,e)=>{let r=rkt(t,e);return r&&r.prerelease.length?r.prerelease:null};X2e.exports=nkt});var Au=m((sbn,r5e)=>{"use strict";var t5e=ra(),ikt=(t,e,r)=>new t5e(t,r).compare(new t5e(e,r));r5e.exports=ikt});var i5e=m((abn,n5e)=>{"use strict";var okt=Au(),skt=(t,e,r)=>okt(e,t,r);n5e.exports=skt});var s5e=m((cbn,o5e)=>{"use strict";var akt=Au(),ckt=(t,e)=>akt(t,e,!0);o5e.exports=ckt});var Y8=m((lbn,c5e)=>{"use strict";var a5e=ra(),lkt=(t,e,r)=>{let n=new a5e(t,r),o=new a5e(e,r);return n.compare(o)||n.compareBuild(o)};c5e.exports=lkt});var u5e=m((ubn,l5e)=>{"use strict";var ukt=Y8(),dkt=(t,e)=>t.sort((r,n)=>ukt(r,n,e));l5e.exports=dkt});var f5e=m((dbn,d5e)=>{"use strict";var fkt=Y8(),pkt=(t,e)=>t.sort((r,n)=>fkt(n,r,e));d5e.exports=pkt});var s5=m((fbn,p5e)=>{"use strict";var hkt=Au(),mkt=(t,e,r)=>hkt(t,e,r)>0;p5e.exports=mkt});var Q8=m((pbn,h5e)=>{"use strict";var gkt=Au(),_kt=(t,e,r)=>gkt(t,e,r)<0;h5e.exports=_kt});var Fee=m((hbn,m5e)=>{"use strict";var vkt=Au(),ykt=(t,e,r)=>vkt(t,e,r)===0;m5e.exports=ykt});var jee=m((mbn,g5e)=>{"use strict";var Ekt=Au(),Tkt=(t,e,r)=>Ekt(t,e,r)!==0;g5e.exports=Tkt});var Z8=m((gbn,_5e)=>{"use strict";var Skt=Au(),bkt=(t,e,r)=>Skt(t,e,r)>=0;_5e.exports=bkt});var J8=m((_bn,v5e)=>{"use strict";var Ckt=Au(),Akt=(t,e,r)=>Ckt(t,e,r)<=0;v5e.exports=Akt});var Bee=m((vbn,y5e)=>{"use strict";var xkt=Fee(),wkt=jee(),Ikt=s5(),Pkt=Z8(),Rkt=Q8(),Okt=J8(),Mkt=(t,e,r,n)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return xkt(t,r,n);case"!=":return wkt(t,r,n);case">":return Ikt(t,r,n);case">=":return Pkt(t,r,n);case"<":return Rkt(t,r,n);case"<=":return Okt(t,r,n);default:throw new TypeError(`Invalid operator: ${e}`)}};y5e.exports=Mkt});var T5e=m((ybn,E5e)=>{"use strict";var Nkt=ra(),Lkt=cE(),{safeRe:X8,t:e9}=qA(),kkt=(t,e)=>{if(t instanceof Nkt)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match(e.includePrerelease?X8[e9.COERCEFULL]:X8[e9.COERCE]);else{let l=e.includePrerelease?X8[e9.COERCERTLFULL]:X8[e9.COERCERTL],u;for(;(u=l.exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||u.index+u[0].length!==r.index+r[0].length)&&(r=u),l.lastIndex=u.index+u[1].length+u[2].length;l.lastIndex=-1}if(r===null)return null;let n=r[2],o=r[3]||"0",s=r[4]||"0",a=e.includePrerelease&&r[5]?`-${r[5]}`:"",c=e.includePrerelease&&r[6]?`+${r[6]}`:"";return Lkt(`${n}.${o}.${s}${a}${c}`,e)};E5e.exports=kkt});var b5e=m((Ebn,S5e)=>{"use strict";var $ee=class{constructor(){this.max=1e3,this.map=new Map}get(e){let r=this.map.get(e);if(r!==void 0)return this.map.delete(e),this.map.set(e,r),r}delete(e){return this.map.delete(e)}set(e,r){if(!this.delete(e)&&r!==void 0){if(this.map.size>=this.max){let o=this.map.keys().next().value;this.delete(o)}this.map.set(e,r)}return this}};S5e.exports=$ee});var xu=m((Tbn,w5e)=>{"use strict";var Dkt=/\s+/g,Vee=class t{constructor(e,r){if(r=qkt(r),e instanceof t)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new t(e.raw,r);if(e instanceof Hee)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e.trim().replace(Dkt," "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(o=>!A5e(o[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let o of this.set)if(o.length===1&&Gkt(o[0])){this.set=[o];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let r=this.set[e];for(let n=0;n<r.length;n++)n>0&&(this.formatted+=" "),this.formatted+=r[n].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let n=((this.options.includePrerelease&&Vkt)|(this.options.loose&&Hkt))+":"+e,o=C5e.get(n);if(o)return o;let s=this.options.loose,a=s?Sc[Fa.HYPHENRANGELOOSE]:Sc[Fa.HYPHENRANGE];e=e.replace(a,tDt(this.options.includePrerelease)),ri("hyphen replace",e),e=e.replace(Sc[Fa.COMPARATORTRIM],jkt),ri("comparator trim",e),e=e.replace(Sc[Fa.TILDETRIM],Bkt),ri("tilde trim",e),e=e.replace(Sc[Fa.CARETTRIM],$kt),ri("caret trim",e);let c=e.split(" ").map(f=>zkt(f,this.options)).join(" ").split(/\s+/).map(f=>eDt(f,this.options));s&&(c=c.filter(f=>(ri("loose invalid filter",f,this.options),!!f.match(Sc[Fa.COMPARATORLOOSE])))),ri("range list",c);let l=new Map,u=c.map(f=>new Hee(f,this.options));for(let f of u){if(A5e(f))return[f];l.set(f.value,f)}l.size>1&&l.has("")&&l.delete("");let d=[...l.values()];return C5e.set(n,d),d}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some(n=>x5e(n,r)&&e.set.some(o=>x5e(o,r)&&n.every(s=>o.every(a=>s.intersects(a,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new Fkt(e,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(rDt(this.set[r],e,this.options))return!0;return!1}};w5e.exports=Vee;var Ukt=b5e(),C5e=new Ukt,qkt=H8(),Hee=a5(),ri=o5(),Fkt=ra(),{safeRe:Sc,t:Fa,comparatorTrimReplace:jkt,tildeTrimReplace:Bkt,caretTrimReplace:$kt}=qA(),{FLAG_INCLUDE_PRERELEASE:Vkt,FLAG_LOOSE:Hkt}=i5(),A5e=t=>t.value==="<0.0.0-0",Gkt=t=>t.value==="",x5e=(t,e)=>{let r=!0,n=t.slice(),o=n.pop();for(;r&&n.length;)r=n.every(s=>o.intersects(s,e)),o=n.pop();return r},zkt=(t,e)=>(ri("comp",t,e),t=Ykt(t,e),ri("caret",t),t=Wkt(t,e),ri("tildes",t),t=Zkt(t,e),ri("xrange",t),t=Xkt(t,e),ri("stars",t),t),ja=t=>!t||t.toLowerCase()==="x"||t==="*",Wkt=(t,e)=>t.trim().split(/\s+/).map(r=>Kkt(r,e)).join(" "),Kkt=(t,e)=>{let r=e.loose?Sc[Fa.TILDELOOSE]:Sc[Fa.TILDE];return t.replace(r,(n,o,s,a,c)=>{ri("tilde",t,n,o,s,a,c);let l;return ja(o)?l="":ja(s)?l=`>=${o}.0.0 <${+o+1}.0.0-0`:ja(a)?l=`>=${o}.${s}.0 <${o}.${+s+1}.0-0`:c?(ri("replaceTilde pr",c),l=`>=${o}.${s}.${a}-${c} <${o}.${+s+1}.0-0`):l=`>=${o}.${s}.${a} <${o}.${+s+1}.0-0`,ri("tilde return",l),l})},Ykt=(t,e)=>t.trim().split(/\s+/).map(r=>Qkt(r,e)).join(" "),Qkt=(t,e)=>{ri("caret",t,e);let r=e.loose?Sc[Fa.CARETLOOSE]:Sc[Fa.CARET],n=e.includePrerelease?"-0":"";return t.replace(r,(o,s,a,c,l)=>{ri("caret",t,o,s,a,c,l);let u;return ja(s)?u="":ja(a)?u=`>=${s}.0.0${n} <${+s+1}.0.0-0`:ja(c)?s==="0"?u=`>=${s}.${a}.0${n} <${s}.${+a+1}.0-0`:u=`>=${s}.${a}.0${n} <${+s+1}.0.0-0`:l?(ri("replaceCaret pr",l),s==="0"?a==="0"?u=`>=${s}.${a}.${c}-${l} <${s}.${a}.${+c+1}-0`:u=`>=${s}.${a}.${c}-${l} <${s}.${+a+1}.0-0`:u=`>=${s}.${a}.${c}-${l} <${+s+1}.0.0-0`):(ri("no pr"),s==="0"?a==="0"?u=`>=${s}.${a}.${c}${n} <${s}.${a}.${+c+1}-0`:u=`>=${s}.${a}.${c}${n} <${s}.${+a+1}.0-0`:u=`>=${s}.${a}.${c} <${+s+1}.0.0-0`),ri("caret return",u),u})},Zkt=(t,e)=>(ri("replaceXRanges",t,e),t.split(/\s+/).map(r=>Jkt(r,e)).join(" ")),Jkt=(t,e)=>{t=t.trim();let r=e.loose?Sc[Fa.XRANGELOOSE]:Sc[Fa.XRANGE];return t.replace(r,(n,o,s,a,c,l)=>{ri("xRange",t,n,o,s,a,c,l);let u=ja(s),d=u||ja(a),f=d||ja(c),p=f;return o==="="&&p&&(o=""),l=e.includePrerelease?"-0":"",u?o===">"||o==="<"?n="<0.0.0-0":n="*":o&&p?(d&&(a=0),c=0,o===">"?(o=">=",d?(s=+s+1,a=0,c=0):(a=+a+1,c=0)):o==="<="&&(o="<",d?s=+s+1:a=+a+1),o==="<"&&(l="-0"),n=`${o+s}.${a}.${c}${l}`):d?n=`>=${s}.0.0${l} <${+s+1}.0.0-0`:f&&(n=`>=${s}.${a}.0${l} <${s}.${+a+1}.0-0`),ri("xRange return",n),n})},Xkt=(t,e)=>(ri("replaceStars",t,e),t.trim().replace(Sc[Fa.STAR],"")),eDt=(t,e)=>(ri("replaceGTE0",t,e),t.trim().replace(Sc[e.includePrerelease?Fa.GTE0PRE:Fa.GTE0],"")),tDt=t=>(e,r,n,o,s,a,c,l,u,d,f,p)=>(ja(n)?r="":ja(o)?r=`>=${n}.0.0${t?"-0":""}`:ja(s)?r=`>=${n}.${o}.0${t?"-0":""}`:a?r=`>=${r}`:r=`>=${r}${t?"-0":""}`,ja(u)?l="":ja(d)?l=`<${+u+1}.0.0-0`:ja(f)?l=`<${u}.${+d+1}.0-0`:p?l=`<=${u}.${d}.${f}-${p}`:t?l=`<${u}.${d}.${+f+1}-0`:l=`<=${l}`,`${r} ${l}`.trim()),rDt=(t,e,r)=>{for(let n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let n=0;n<t.length;n++)if(ri(t[n].semver),t[n].semver!==Hee.ANY&&t[n].semver.prerelease.length>0){let o=t[n].semver;if(o.major===e.major&&o.minor===e.minor&&o.patch===e.patch)return!0}return!1}return!0}});var a5=m((Sbn,N5e)=>{"use strict";var c5=Symbol("SemVer ANY"),Wee=class t{static get ANY(){return c5}constructor(e,r){if(r=I5e(r),e instanceof t){if(e.loose===!!r.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),zee("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===c5?this.value="":this.value=this.operator+this.semver.version,zee("comp",this)}parse(e){let r=this.options.loose?P5e[R5e.COMPARATORLOOSE]:P5e[R5e.COMPARATOR],n=e.match(r);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new O5e(n[2],this.options.loose):this.semver=c5}toString(){return this.value}test(e){if(zee("Comparator.test",e,this.options.loose),this.semver===c5||e===c5)return!0;if(typeof e=="string")try{e=new O5e(e,this.options)}catch{return!1}return Gee(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new M5e(e.value,r).test(this.value):e.operator===""?e.value===""?!0:new M5e(this.value,r).test(e.semver):(r=I5e(r),r.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||Gee(this.semver,"<",e.semver,r)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||Gee(this.semver,">",e.semver,r)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};N5e.exports=Wee;var I5e=H8(),{safeRe:P5e,t:R5e}=qA(),Gee=Bee(),zee=o5(),O5e=ra(),M5e=xu()});var l5=m((bbn,L5e)=>{"use strict";var nDt=xu(),iDt=(t,e,r)=>{try{e=new nDt(e,r)}catch{return!1}return e.test(t)};L5e.exports=iDt});var D5e=m((Cbn,k5e)=>{"use strict";var oDt=xu(),sDt=(t,e)=>new oDt(t,e).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));k5e.exports=sDt});var q5e=m((Abn,U5e)=>{"use strict";var aDt=ra(),cDt=xu(),lDt=(t,e,r)=>{let n=null,o=null,s=null;try{s=new cDt(e,r)}catch{return null}return t.forEach(a=>{s.test(a)&&(!n||o.compare(a)===-1)&&(n=a,o=new aDt(n,r))}),n};U5e.exports=lDt});var j5e=m((xbn,F5e)=>{"use strict";var uDt=ra(),dDt=xu(),fDt=(t,e,r)=>{let n=null,o=null,s=null;try{s=new dDt(e,r)}catch{return null}return t.forEach(a=>{s.test(a)&&(!n||o.compare(a)===1)&&(n=a,o=new uDt(n,r))}),n};F5e.exports=fDt});var V5e=m((wbn,$5e)=>{"use strict";var Kee=ra(),pDt=xu(),B5e=s5(),hDt=(t,e)=>{t=new pDt(t,e);let r=new Kee("0.0.0");if(t.test(r)||(r=new Kee("0.0.0-0"),t.test(r)))return r;r=null;for(let n=0;n<t.set.length;++n){let o=t.set[n],s=null;o.forEach(a=>{let c=new Kee(a.semver.version);switch(a.operator){case">":c.prerelease.length===0?c.patch++:c.prerelease.push(0),c.raw=c.format();case"":case">=":(!s||B5e(c,s))&&(s=c);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${a.operator}`)}}),s&&(!r||B5e(r,s))&&(r=s)}return r&&t.test(r)?r:null};$5e.exports=hDt});var G5e=m((Ibn,H5e)=>{"use strict";var mDt=xu(),gDt=(t,e)=>{try{return new mDt(t,e).range||"*"}catch{return null}};H5e.exports=gDt});var t9=m((Pbn,Y5e)=>{"use strict";var _Dt=ra(),K5e=a5(),{ANY:vDt}=K5e,yDt=xu(),EDt=l5(),z5e=s5(),W5e=Q8(),TDt=J8(),SDt=Z8(),bDt=(t,e,r,n)=>{t=new _Dt(t,n),e=new yDt(e,n);let o,s,a,c,l;switch(r){case">":o=z5e,s=TDt,a=W5e,c=">",l=">=";break;case"<":o=W5e,s=SDt,a=z5e,c="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(EDt(t,e,n))return!1;for(let u=0;u<e.set.length;++u){let d=e.set[u],f=null,p=null;if(d.forEach(h=>{h.semver===vDt&&(h=new K5e(">=0.0.0")),f=f||h,p=p||h,o(h.semver,f.semver,n)?f=h:a(h.semver,p.semver,n)&&(p=h)}),f.operator===c||f.operator===l||(!p.operator||p.operator===c)&&s(t,p.semver))return!1;if(p.operator===l&&a(t,p.semver))return!1}return!0};Y5e.exports=bDt});var Z5e=m((Rbn,Q5e)=>{"use strict";var CDt=t9(),ADt=(t,e,r)=>CDt(t,e,">",r);Q5e.exports=ADt});var X5e=m((Obn,J5e)=>{"use strict";var xDt=t9(),wDt=(t,e,r)=>xDt(t,e,"<",r);J5e.exports=wDt});var rMe=m((Mbn,tMe)=>{"use strict";var eMe=xu(),IDt=(t,e,r)=>(t=new eMe(t,r),e=new eMe(e,r),t.intersects(e,r));tMe.exports=IDt});var iMe=m((Nbn,nMe)=>{"use strict";var PDt=l5(),RDt=Au();nMe.exports=(t,e,r)=>{let n=[],o=null,s=null,a=t.sort((d,f)=>RDt(d,f,r));for(let d of a)PDt(d,e,r)?(s=d,o||(o=d)):(s&&n.push([o,s]),s=null,o=null);o&&n.push([o,null]);let c=[];for(let[d,f]of n)d===f?c.push(d):!f&&d===a[0]?c.push("*"):f?d===a[0]?c.push(`<=${f}`):c.push(`${d} - ${f}`):c.push(`>=${d}`);let l=c.join(" || "),u=typeof e.raw=="string"?e.raw:String(e);return l.length<u.length?l:e}});var uMe=m((Lbn,lMe)=>{"use strict";var oMe=xu(),Qee=a5(),{ANY:Yee}=Qee,u5=l5(),Zee=Au(),ODt=(t,e,r={})=>{if(t===e)return!0;t=new oMe(t,r),e=new oMe(e,r);let n=!1;e:for(let o of t.set){for(let s of e.set){let a=NDt(o,s,r);if(n=n||a!==null,a)continue e}if(n)return!1}return!0},MDt=[new Qee(">=0.0.0-0")],sMe=[new Qee(">=0.0.0")],NDt=(t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===Yee){if(e.length===1&&e[0].semver===Yee)return!0;r.includePrerelease?t=MDt:t=sMe}if(e.length===1&&e[0].semver===Yee){if(r.includePrerelease)return!0;e=sMe}let n=new Set,o,s;for(let h of t)h.operator===">"||h.operator===">="?o=aMe(o,h,r):h.operator==="<"||h.operator==="<="?s=cMe(s,h,r):n.add(h.semver);if(n.size>1)return null;let a;if(o&&s){if(a=Zee(o.semver,s.semver,r),a>0)return null;if(a===0&&(o.operator!==">="||s.operator!=="<="))return null}for(let h of n){if(o&&!u5(h,String(o),r)||s&&!u5(h,String(s),r))return null;for(let _ of e)if(!u5(h,String(_),r))return!1;return!0}let c,l,u,d,f=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1,p=o&&!r.includePrerelease&&o.semver.prerelease.length?o.semver:!1;f&&f.prerelease.length===1&&s.operator==="<"&&f.prerelease[0]===0&&(f=!1);for(let h of e){if(d=d||h.operator===">"||h.operator===">=",u=u||h.operator==="<"||h.operator==="<=",o){if(p&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===p.major&&h.semver.minor===p.minor&&h.semver.patch===p.patch&&(p=!1),h.operator===">"||h.operator===">="){if(c=aMe(o,h,r),c===h&&c!==o)return!1}else if(o.operator===">="&&!u5(o.semver,String(h),r))return!1}if(s){if(f&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===f.major&&h.semver.minor===f.minor&&h.semver.patch===f.patch&&(f=!1),h.operator==="<"||h.operator==="<="){if(l=cMe(s,h,r),l===h&&l!==s)return!1}else if(s.operator==="<="&&!u5(s.semver,String(h),r))return!1}if(!h.operator&&(s||o)&&a!==0)return!1}return!(o&&u&&!s&&a!==0||s&&d&&!o&&a!==0||p||f)},aMe=(t,e,r)=>{if(!t)return e;let n=Zee(t.semver,e.semver,r);return n>0?t:n<0||e.operator===">"&&t.operator===">="?e:t},cMe=(t,e,r)=>{if(!t)return e;let n=Zee(t.semver,e.semver,r);return n<0?t:n>0||e.operator==="<"&&t.operator==="<="?e:t};lMe.exports=ODt});var hMe=m((kbn,pMe)=>{"use strict";var Jee=qA(),dMe=i5(),LDt=ra(),fMe=Uee(),kDt=cE(),DDt=q2e(),UDt=j2e(),qDt=V2e(),FDt=z2e(),jDt=K2e(),BDt=Q2e(),$Dt=J2e(),VDt=e5e(),HDt=Au(),GDt=i5e(),zDt=s5e(),WDt=Y8(),KDt=u5e(),YDt=f5e(),QDt=s5(),ZDt=Q8(),JDt=Fee(),XDt=jee(),e6t=Z8(),t6t=J8(),r6t=Bee(),n6t=T5e(),i6t=a5(),o6t=xu(),s6t=l5(),a6t=D5e(),c6t=q5e(),l6t=j5e(),u6t=V5e(),d6t=G5e(),f6t=t9(),p6t=Z5e(),h6t=X5e(),m6t=rMe(),g6t=iMe(),_6t=uMe();pMe.exports={parse:kDt,valid:DDt,clean:UDt,inc:qDt,diff:FDt,major:jDt,minor:BDt,patch:$Dt,prerelease:VDt,compare:HDt,rcompare:GDt,compareLoose:zDt,compareBuild:WDt,sort:KDt,rsort:YDt,gt:QDt,lt:ZDt,eq:JDt,neq:XDt,gte:e6t,lte:t6t,cmp:r6t,coerce:n6t,Comparator:i6t,Range:o6t,satisfies:s6t,toComparators:a6t,maxSatisfying:c6t,minSatisfying:l6t,minVersion:u6t,validRange:d6t,outside:f6t,gtr:p6t,ltr:h6t,intersects:m6t,simplifyRange:g6t,subset:_6t,SemVer:LDt,re:Jee.re,src:Jee.src,tokens:Jee.t,SEMVER_SPEC_VERSION:dMe.SEMVER_SPEC_VERSION,RELEASE_TYPES:dMe.RELEASE_TYPES,compareIdentifiers:fMe.compareIdentifiers,rcompareIdentifiers:fMe.rcompareIdentifiers}});var Xee=m(r9=>{"use strict";Object.defineProperty(r9,"__esModule",{value:!0});r9.makePatchingRequire=void 0;var v6t=require("path"),y6t=hMe(),mMe=$i(),_Me=require("module"),E6t=Object.keys(process.binding("natives")),gMe=_Me.prototype.require;function T6t(t){var e={};return function(n){var o=gMe.apply(this,arguments);if(t[n]){var s=_Me._resolveFilename(n,this);if(e.hasOwnProperty(s))return e[s];var a=void 0;if(E6t.indexOf(n)<0)try{a=gMe.call(this,v6t.join(n,"package.json")).version}catch{return o}else a=process.version.substring(1);var c=a.indexOf("-");c>=0&&(a=a.substring(0,c));for(var l=o,u=0,d=t[n];u<d.length;u++){var f=d[u];if(y6t.satisfies(a,f.versionSpecifier)&&(l=f.patch(l,s),mMe.channel)){var p=f.publisherName||n;mMe.channel.addPatchedModule(p,a)}}return e[s]=l}return o}}r9.makePatchingRequire=T6t});var vMe=m((Ubn,S6t)=>{S6t.exports={name:"diagnostic-channel",version:"1.1.1",main:"./dist/src/channel.js",types:"./dist/src/channel.d.ts",scripts:{build:"tsc",lint:"eslint ./ --fix",clean:"rimraf ./dist",test:"mocha ./dist/tests/**/*.js",debug:"mocha --inspect-brk ./dist/tests/**/*.js"},homepage:"https://github.com/Microsoft/node-diagnostic-channel",bugs:{url:"https://github.com/Microsoft/node-diagnostic-channel/issues"},repository:{type:"git",url:"https://github.com/Microsoft/node-diagnostic-channel.git"},description:"Provides a context-saving pub/sub channel to connect diagnostic event publishers and subscribers",dependencies:{semver:"^7.5.3"},devDependencies:{"@types/mocha":"^2.2.40","@types/node":"~8.0.0",mocha:"^3.2.0",rimraf:"^2.6.1",sinon:"1.17.6",typescript:"4.1.2"},files:["dist/src/**/*.d.ts","dist/src/**/*.js","LICENSE","README.md","package.json"],license:"MIT"}});var $i=m(wu=>{"use strict";Object.defineProperty(wu,"__esModule",{value:!0});wu.channel=wu.ContextPreservingEventEmitter=wu.trueFilter=wu.makePatchingRequire=void 0;var b6t=Xee(),C6t=Xee();Object.defineProperty(wu,"makePatchingRequire",{enumerable:!0,get:function(){return C6t.makePatchingRequire}});var A6t=function(t){return!0};wu.trueFilter=A6t;var EMe=(function(){function t(){this.version=vMe().version,this.subscribers={},this.contextPreservationFunction=function(e){return e},this.knownPatches={},this.modulesPatched=[],this.currentlyPublishing=!1}return t.prototype.shouldPublish=function(e){var r=this.subscribers[e];return r?r.some(function(n){var o=n.filter;return!o||o(!1)}):!1},t.prototype.publish=function(e,r){if(!this.currentlyPublishing){var n=this.subscribers[e];if(n){var o={timestamp:Date.now(),data:r};this.currentlyPublishing=!0,n.forEach(function(s){var a=s.listener,c=s.filter;try{c&&c(!0)&&a(o)}catch{}}),this.currentlyPublishing=!1}}},t.prototype.subscribe=function(e,r,n,o){n===void 0&&(n=wu.trueFilter),this.subscribers[e]||(this.subscribers[e]=[]),this.subscribers[e].push({listener:r,filter:n,patchCallback:o});var s=this.checkIfModuleIsAlreadyPatched(e);s&&o&&o(s.name,s.version)},t.prototype.unsubscribe=function(e,r,n){n===void 0&&(n=wu.trueFilter);var o=this.subscribers[e];if(o){for(var s=0;s<o.length;++s)if(o[s].listener===r&&o[s].filter===n)return o.splice(s,1),!0}return!1},t.prototype.reset=function(){var e=this;this.subscribers={},this.contextPreservationFunction=function(r){return r},Object.getOwnPropertyNames(this.knownPatches).forEach(function(r){return delete e.knownPatches[r]})},t.prototype.bindToContext=function(e){return this.contextPreservationFunction(e)},t.prototype.addContextPreservation=function(e){var r=this.contextPreservationFunction;this.contextPreservationFunction=(function(n){return e(r(n))})},t.prototype.registerMonkeyPatch=function(e,r){this.knownPatches[e]||(this.knownPatches[e]=[]),this.knownPatches[e].push(r)},t.prototype.getPatchesObject=function(){return this.knownPatches},t.prototype.addPatchedModule=function(e,r){for(var n=0,o=this.modulesPatched;n<o.length;n++){var s=o[n];if(s.name===e)return}this.modulesPatched.push({name:e,version:r});var a=this.subscribers[e];a&&a.forEach(function(c){c.patchCallback&&c.patchCallback(e,r)})},t.prototype.checkIfModuleIsAlreadyPatched=function(e){for(var r=0,n=this.modulesPatched;r<n.length;r++){var o=n[r];if(o.name===e)return o}return null},t})();wu.ContextPreservingEventEmitter=EMe;global.diagnosticsSource||(global.diagnosticsSource=new EMe,yMe=require("module"),yMe.prototype.require=b6t.makePatchingRequire(global.diagnosticsSource.getPatchesObject()));var yMe;wu.channel=global.diagnosticsSource});var TMe,SMe=q(()=>{TMe=typeof globalThis=="object"?globalThis:global});var bMe=q(()=>{SMe()});var CMe=q(()=>{bMe()});var qh,ete=q(()=>{qh="1.9.0"});function x6t(t){var e=new Set([t]),r=new Set,n=t.match(AMe);if(!n)return function(){return!1};var o={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(o.prerelease!=null)return function(l){return l===t};function s(c){return r.add(c),!1}function a(c){return e.add(c),!0}return function(l){if(e.has(l))return!0;if(r.has(l))return!1;var u=l.match(AMe);if(!u)return s(l);var d={major:+u[1],minor:+u[2],patch:+u[3],prerelease:u[4]};return d.prerelease!=null||o.major!==d.major?s(l):o.major===0?o.minor===d.minor&&o.patch<=d.patch?a(l):s(l):o.minor<=d.minor?a(l):s(l)}}var AMe,xMe,wMe=q(()=>{ete();AMe=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;xMe=x6t(qh)});function O0(t,e,r,n){var o;n===void 0&&(n=!1);var s=f5[d5]=(o=f5[d5])!==null&&o!==void 0?o:{version:qh};if(!n&&s[t]){var a=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+t);return r.error(a.stack||a.message),!1}if(s.version!==qh){var a=new Error("@opentelemetry/api: Registration of version v"+s.version+" for "+t+" does not match previously registered API v"+qh);return r.error(a.stack||a.message),!1}return s[t]=e,r.debug("@opentelemetry/api: Registered a global for "+t+" v"+qh+"."),!0}function Ll(t){var e,r,n=(e=f5[d5])===null||e===void 0?void 0:e.version;if(!(!n||!xMe(n)))return(r=f5[d5])===null||r===void 0?void 0:r[t]}function M0(t,e){e.debug("@opentelemetry/api: Unregistering a global for "+t+" v"+qh+".");var r=f5[d5];r&&delete r[t]}var w6t,d5,f5,lE=q(()=>{CMe();ete();wMe();w6t=qh.split(".")[0],d5=Symbol.for("opentelemetry.js.api."+w6t),f5=TMe});function p5(t,e,r){var n=Ll("diag");if(n)return r.unshift(e),n[t].apply(n,P6t([],I6t(r),!1))}var I6t,P6t,IMe,PMe=q(()=>{lE();I6t=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,s=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)s.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return s},P6t=function(t,e,r){if(r||arguments.length===2)for(var n=0,o=e.length,s;n<o;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))},IMe=(function(){function t(e){this._namespace=e.namespace||"DiagComponentLogger"}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return p5("debug",this._namespace,e)},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return p5("error",this._namespace,e)},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return p5("info",this._namespace,e)},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return p5("warn",this._namespace,e)},t.prototype.verbose=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return p5("verbose",this._namespace,e)},t})()});var zr,n9=q(()=>{(function(t){t[t.NONE=0]="NONE",t[t.ERROR=30]="ERROR",t[t.WARN=50]="WARN",t[t.INFO=60]="INFO",t[t.DEBUG=70]="DEBUG",t[t.VERBOSE=80]="VERBOSE",t[t.ALL=9999]="ALL"})(zr||(zr={}))});function RMe(t,e){t<zr.NONE?t=zr.NONE:t>zr.ALL&&(t=zr.ALL),e=e||{};function r(n,o){var s=e[n];return typeof s=="function"&&t>=o?s.bind(e):function(){}}return{error:r("error",zr.ERROR),warn:r("warn",zr.WARN),info:r("info",zr.INFO),debug:r("debug",zr.DEBUG),verbose:r("verbose",zr.VERBOSE)}}var OMe=q(()=>{n9()});var R6t,O6t,M6t,na,uE=q(()=>{PMe();OMe();n9();lE();R6t=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,s=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)s.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return s},O6t=function(t,e,r){if(r||arguments.length===2)for(var n=0,o=e.length,s;n<o;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))},M6t="diag",na=(function(){function t(){function e(o){return function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];var c=Ll("diag");if(c)return c[o].apply(c,O6t([],R6t(s),!1))}}var r=this,n=function(o,s){var a,c,l;if(s===void 0&&(s={logLevel:zr.INFO}),o===r){var u=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return r.error((a=u.stack)!==null&&a!==void 0?a:u.message),!1}typeof s=="number"&&(s={logLevel:s});var d=Ll("diag"),f=RMe((c=s.logLevel)!==null&&c!==void 0?c:zr.INFO,o);if(d&&!s.suppressOverrideMessage){var p=(l=new Error().stack)!==null&&l!==void 0?l:"<failed to generate stacktrace>";d.warn("Current logger will be overwritten from "+p),f.warn("Current logger will overwrite one already registered from "+p)}return O0("diag",f,r,!0)};r.setLogger=n,r.disable=function(){M0(M6t,r)},r.createComponentLogger=function(o){return new IMe(o)},r.verbose=e("verbose"),r.debug=e("debug"),r.info=e("info"),r.warn=e("warn"),r.error=e("error")}return t.instance=function(){return this._instance||(this._instance=new t),this._instance},t})()});var N6t,L6t,MMe,NMe=q(()=>{N6t=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,s=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)s.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return s},L6t=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},MMe=(function(){function t(e){this._entries=e?new Map(e):new Map}return t.prototype.getEntry=function(e){var r=this._entries.get(e);if(r)return Object.assign({},r)},t.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(e){var r=N6t(e,2),n=r[0],o=r[1];return[n,o]})},t.prototype.setEntry=function(e,r){var n=new t(this._entries);return n._entries.set(e,r),n},t.prototype.removeEntry=function(e){var r=new t(this._entries);return r._entries.delete(e),r},t.prototype.removeEntries=function(){for(var e,r,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var s=new t(this._entries);try{for(var a=L6t(n),c=a.next();!c.done;c=a.next()){var l=c.value;s._entries.delete(l)}}catch(u){e={error:u}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return s},t.prototype.clear=function(){return new t},t})()});var LMe,kMe=q(()=>{LMe=Symbol("BaggageEntryMetadata")});function DMe(t){return t===void 0&&(t={}),new MMe(new Map(Object.entries(t)))}function jA(t){return typeof t!="string"&&(k6t.error("Cannot create baggage metadata from unknown type: "+typeof t),t=""),{__TYPE__:LMe,toString:function(){return t}}}var k6t,tte=q(()=>{uE();NMe();kMe();k6t=na.instance()});function bc(t){return Symbol.for(t)}var D6t,i9,h5=q(()=>{D6t=(function(){function t(e){var r=this;r._currentContext=e?new Map(e):new Map,r.getValue=function(n){return r._currentContext.get(n)},r.setValue=function(n,o){var s=new t(r._currentContext);return s._currentContext.set(n,o),s},r.deleteValue=function(n){var o=new t(r._currentContext);return o._currentContext.delete(n),o}}return t})(),i9=new D6t});var rte,UMe,qMe=q(()=>{rte=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],UMe=(function(){function t(){function e(n){return function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];if(console){var a=console[n];if(typeof a!="function"&&(a=console.log),typeof a=="function")return a.apply(console,o)}}}for(var r=0;r<rte.length;r++)this[rte[r].n]=e(rte[r].c)}return t})()});function FMe(){return ite}var dE,U6t,o9,q6t,F6t,j6t,B6t,nte,$6t,V6t,H6t,ite,G6t,z6t,W6t,K6t,Y6t,Q6t,Z6t,ote=q(()=>{dE=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(n[s]=o[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),U6t=(function(){function t(){}return t.prototype.createGauge=function(e,r){return z6t},t.prototype.createHistogram=function(e,r){return W6t},t.prototype.createCounter=function(e,r){return G6t},t.prototype.createUpDownCounter=function(e,r){return K6t},t.prototype.createObservableGauge=function(e,r){return Q6t},t.prototype.createObservableCounter=function(e,r){return Y6t},t.prototype.createObservableUpDownCounter=function(e,r){return Z6t},t.prototype.addBatchObservableCallback=function(e,r){},t.prototype.removeBatchObservableCallback=function(e){},t})(),o9=(function(){function t(){}return t})(),q6t=(function(t){dE(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.add=function(r,n){},e})(o9),F6t=(function(t){dE(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.add=function(r,n){},e})(o9),j6t=(function(t){dE(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.record=function(r,n){},e})(o9),B6t=(function(t){dE(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.record=function(r,n){},e})(o9),nte=(function(){function t(){}return t.prototype.addCallback=function(e){},t.prototype.removeCallback=function(e){},t})(),$6t=(function(t){dE(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(nte),V6t=(function(t){dE(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(nte),H6t=(function(t){dE(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(nte),ite=new U6t,G6t=new q6t,z6t=new j6t,W6t=new B6t,K6t=new F6t,Y6t=new $6t,Q6t=new V6t,Z6t=new H6t});var s9,jMe=q(()=>{(function(t){t[t.INT=0]="INT",t[t.DOUBLE=1]="DOUBLE"})(s9||(s9={}))});var a9,c9,ste=q(()=>{a9={get:function(t,e){if(t!=null)return t[e]},keys:function(t){return t==null?[]:Object.keys(t)}},c9={set:function(t,e,r){t!=null&&(t[e]=r)}}});var J6t,X6t,BMe,$Me=q(()=>{h5();J6t=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,s=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)s.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return s},X6t=function(t,e,r){if(r||arguments.length===2)for(var n=0,o=e.length,s;n<o;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))},BMe=(function(){function t(){}return t.prototype.active=function(){return i9},t.prototype.with=function(e,r,n){for(var o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return r.call.apply(r,X6t([n],J6t(o),!1))},t.prototype.bind=function(e,r){return r},t.prototype.enable=function(){return this},t.prototype.disable=function(){return this},t})()});var e8t,t8t,ate,r8t,b_,m5=q(()=>{$Me();lE();uE();e8t=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,s=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)s.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return s},t8t=function(t,e,r){if(r||arguments.length===2)for(var n=0,o=e.length,s;n<o;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))},ate="context",r8t=new BMe,b_=(function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalContextManager=function(e){return O0(ate,e,na.instance())},t.prototype.active=function(){return this._getContextManager().active()},t.prototype.with=function(e,r,n){for(var o,s=[],a=3;a<arguments.length;a++)s[a-3]=arguments[a];return(o=this._getContextManager()).with.apply(o,t8t([e,r,n],e8t(s),!1))},t.prototype.bind=function(e,r){return this._getContextManager().bind(e,r)},t.prototype._getContextManager=function(){return Ll(ate)||r8t},t.prototype.disable=function(){this._getContextManager().disable(),M0(ate,na.instance())},t})()});var wi,cte=q(()=>{(function(t){t[t.NONE=0]="NONE",t[t.SAMPLED=1]="SAMPLED"})(wi||(wi={}))});var g5,_5,BA,l9=q(()=>{cte();g5="0000000000000000",_5="00000000000000000000000000000000",BA={traceId:_5,spanId:g5,traceFlags:wi.NONE}});var C_,u9=q(()=>{l9();C_=(function(){function t(e){e===void 0&&(e=BA),this._spanContext=e}return t.prototype.spanContext=function(){return this._spanContext},t.prototype.setAttribute=function(e,r){return this},t.prototype.setAttributes=function(e){return this},t.prototype.addEvent=function(e,r){return this},t.prototype.addLink=function(e){return this},t.prototype.addLinks=function(e){return this},t.prototype.setStatus=function(e){return this},t.prototype.updateName=function(e){return this},t.prototype.end=function(e){},t.prototype.isRecording=function(){return!1},t.prototype.recordException=function(e,r){},t})()});function d9(t){return t.getValue(lte)||void 0}function VMe(){return d9(b_.getInstance().active())}function v5(t,e){return t.setValue(lte,e)}function HMe(t){return t.deleteValue(lte)}function GMe(t,e){return v5(t,new C_(e))}function f9(t){var e;return(e=d9(t))===null||e===void 0?void 0:e.spanContext()}var lte,ute=q(()=>{h5();u9();m5();lte=bc("OpenTelemetry Context Key SPAN")});function fE(t){return n8t.test(t)&&t!==_5}function dte(t){return i8t.test(t)&&t!==g5}function Cc(t){return fE(t.traceId)&&dte(t.spanId)}function zMe(t){return new C_(t)}var n8t,i8t,p9=q(()=>{l9();u9();n8t=/^([0-9a-f]{32})$/i,i8t=/^[0-9a-f]{16}$/i});function o8t(t){return typeof t=="object"&&typeof t.spanId=="string"&&typeof t.traceId=="string"&&typeof t.traceFlags=="number"}var fte,h9,pte=q(()=>{m5();ute();u9();p9();fte=b_.getInstance(),h9=(function(){function t(){}return t.prototype.startSpan=function(e,r,n){n===void 0&&(n=fte.active());var o=!!r?.root;if(o)return new C_;var s=n&&f9(n);return o8t(s)&&Cc(s)?new C_(s):new C_},t.prototype.startActiveSpan=function(e,r,n,o){var s,a,c;if(!(arguments.length<2)){arguments.length===2?c=r:arguments.length===3?(s=r,c=n):(s=r,a=n,c=o);var l=a??fte.active(),u=this.startSpan(e,s,l),d=v5(l,u);return fte.with(d,c,void 0,u)}},t})()});var s8t,m9,hte=q(()=>{pte();s8t=new h9,m9=(function(){function t(e,r,n,o){this._provider=e,this.name=r,this.version=n,this.options=o}return t.prototype.startSpan=function(e,r,n){return this._getTracer().startSpan(e,r,n)},t.prototype.startActiveSpan=function(e,r,n,o){var s=this._getTracer();return Reflect.apply(s.startActiveSpan,s,arguments)},t.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):s8t},t})()});var WMe,KMe=q(()=>{pte();WMe=(function(){function t(){}return t.prototype.getTracer=function(e,r,n){return new h9},t})()});var a8t,y5,mte=q(()=>{hte();KMe();a8t=new WMe,y5=(function(){function t(){}return t.prototype.getTracer=function(e,r,n){var o;return(o=this.getDelegateTracer(e,r,n))!==null&&o!==void 0?o:new m9(this,e,r,n)},t.prototype.getDelegate=function(){var e;return(e=this._delegate)!==null&&e!==void 0?e:a8t},t.prototype.setDelegate=function(e){this._delegate=e},t.prototype.getDelegateTracer=function(e,r,n){var o;return(o=this._delegate)===null||o===void 0?void 0:o.getTracer(e,r,n)},t})()});var Ac,YMe=q(()=>{(function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(Ac||(Ac={}))});var $A,QMe=q(()=>{(function(t){t[t.INTERNAL=0]="INTERNAL",t[t.SERVER=1]="SERVER",t[t.CLIENT=2]="CLIENT",t[t.PRODUCER=3]="PRODUCER",t[t.CONSUMER=4]="CONSUMER"})($A||($A={}))});var VA,ZMe=q(()=>{(function(t){t[t.UNSET=0]="UNSET",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR"})(VA||(VA={}))});function JMe(t){return u8t.test(t)}function XMe(t){return d8t.test(t)&&!f8t.test(t)}var gte,c8t,l8t,u8t,d8t,f8t,eNe=q(()=>{gte="[_0-9a-z-*/]",c8t="[a-z]"+gte+"{0,255}",l8t="[a-z0-9]"+gte+"{0,240}@[a-z]"+gte+"{0,13}",u8t=new RegExp("^(?:"+c8t+"|"+l8t+")$"),d8t=/^[ -~]{0,255}[!-~]$/,f8t=/,|=/});var tNe,p8t,rNe,nNe,iNe,oNe=q(()=>{eNe();tNe=32,p8t=512,rNe=",",nNe="=",iNe=(function(){function t(e){this._internalState=new Map,e&&this._parse(e)}return t.prototype.set=function(e,r){var n=this._clone();return n._internalState.has(e)&&n._internalState.delete(e),n._internalState.set(e,r),n},t.prototype.unset=function(e){var r=this._clone();return r._internalState.delete(e),r},t.prototype.get=function(e){return this._internalState.get(e)},t.prototype.serialize=function(){var e=this;return this._keys().reduce(function(r,n){return r.push(n+nNe+e.get(n)),r},[]).join(rNe)},t.prototype._parse=function(e){e.length>p8t||(this._internalState=e.split(rNe).reverse().reduce(function(r,n){var o=n.trim(),s=o.indexOf(nNe);if(s!==-1){var a=o.slice(0,s),c=o.slice(s+1,n.length);JMe(a)&&XMe(c)&&r.set(a,c)}return r},new Map),this._internalState.size>tNe&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,tNe))))},t.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},t.prototype._clone=function(){var e=new t;return e._internalState=new Map(this._internalState),e},t})()});function sNe(t){return new iNe(t)}var aNe=q(()=>{oNe()});var ts,cNe=q(()=>{m5();ts=b_.getInstance()});var it,lNe=q(()=>{uE();it=na.instance()});var h8t,uNe,dNe=q(()=>{ote();h8t=(function(){function t(){}return t.prototype.getMeter=function(e,r,n){return ite},t})(),uNe=new h8t});var _te,fNe,pNe=q(()=>{dNe();lE();uE();_te="metrics",fNe=(function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalMeterProvider=function(e){return O0(_te,e,na.instance())},t.prototype.getMeterProvider=function(){return Ll(_te)||uNe},t.prototype.getMeter=function(e,r,n){return this.getMeterProvider().getMeter(e,r,n)},t.prototype.disable=function(){M0(_te,na.instance())},t})()});var pE,hNe=q(()=>{pNe();pE=fNe.getInstance()});var mNe,gNe=q(()=>{mNe=(function(){function t(){}return t.prototype.inject=function(e,r){},t.prototype.extract=function(e,r){return e},t.prototype.fields=function(){return[]},t})()});function yte(t){return t.getValue(vte)||void 0}function _Ne(){return yte(b_.getInstance().active())}function vNe(t,e){return t.setValue(vte,e)}function yNe(t){return t.deleteValue(vte)}var vte,ENe=q(()=>{m5();h5();vte=bc("OpenTelemetry Baggage Key")});var Ete,m8t,TNe,SNe=q(()=>{lE();gNe();ste();ENe();tte();uE();Ete="propagation",m8t=new mNe,TNe=(function(){function t(){this.createBaggage=DMe,this.getBaggage=yte,this.getActiveBaggage=_Ne,this.setBaggage=vNe,this.deleteBaggage=yNe}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalPropagator=function(e){return O0(Ete,e,na.instance())},t.prototype.inject=function(e,r,n){return n===void 0&&(n=c9),this._getGlobalPropagator().inject(e,r,n)},t.prototype.extract=function(e,r,n){return n===void 0&&(n=a9),this._getGlobalPropagator().extract(e,r,n)},t.prototype.fields=function(){return this._getGlobalPropagator().fields()},t.prototype.disable=function(){M0(Ete,na.instance())},t.prototype._getGlobalPropagator=function(){return Ll(Ete)||m8t},t})()});var kl,bNe=q(()=>{SNe();kl=TNe.getInstance()});var Tte,CNe,ANe=q(()=>{lE();mte();p9();ute();uE();Tte="trace",CNe=(function(){function t(){this._proxyTracerProvider=new y5,this.wrapSpanContext=zMe,this.isSpanContextValid=Cc,this.deleteSpan=HMe,this.getSpan=d9,this.getActiveSpan=VMe,this.getSpanContext=f9,this.setSpan=v5,this.setSpanContext=GMe}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalTracerProvider=function(e){var r=O0(Tte,this._proxyTracerProvider,na.instance());return r&&this._proxyTracerProvider.setDelegate(e),r},t.prototype.getTracerProvider=function(){return Ll(Tte)||this._proxyTracerProvider},t.prototype.getTracer=function(e,r){return this.getTracerProvider().getTracer(e,r)},t.prototype.disable=function(){M0(Tte,na.instance()),this._proxyTracerProvider=new y5},t})()});var Gn,xNe=q(()=>{ANe();Gn=CNe.getInstance()});var Fh={};Xs(Fh,{DiagConsoleLogger:()=>UMe,DiagLogLevel:()=>zr,INVALID_SPANID:()=>g5,INVALID_SPAN_CONTEXT:()=>BA,INVALID_TRACEID:()=>_5,ProxyTracer:()=>m9,ProxyTracerProvider:()=>y5,ROOT_CONTEXT:()=>i9,SamplingDecision:()=>Ac,SpanKind:()=>$A,SpanStatusCode:()=>VA,TraceFlags:()=>wi,ValueType:()=>s9,baggageEntryMetadataFromString:()=>jA,context:()=>ts,createContextKey:()=>bc,createNoopMeter:()=>FMe,createTraceState:()=>sNe,default:()=>g8t,defaultTextMapGetter:()=>a9,defaultTextMapSetter:()=>c9,diag:()=>it,isSpanContextValid:()=>Cc,isValidSpanId:()=>dte,isValidTraceId:()=>fE,metrics:()=>pE,propagation:()=>kl,trace:()=>Gn});var g8t,Ht=q(()=>{tte();h5();qMe();n9();ote();jMe();ste();hte();mte();YMe();QMe();ZMe();cte();aNe();p9();l9();cNe();lNe();hNe();bNe();xNe();g8t={context:ts,diag:it,metrics:pE,propagation:kl,trace:Gn}});function HA(t){return t.setValue(Ste,!0)}function wNe(t){return t.deleteValue(Ste)}function A_(t){return t.getValue(Ste)===!0}var Ste,E5=q(()=>{Ht();Ste=bc("OpenTelemetry SDK Context Key SUPPRESS_TRACING")});var INe,g9,GA,_9,PNe,RNe,ONe,bte=q(()=>{INe="=",g9=";",GA=",",_9="baggage",PNe=180,RNe=4096,ONe=8192});function v9(t){return t.reduce(function(e,r){var n=""+e+(e!==""?GA:"")+r;return n.length>ONe?e:n},"")}function y9(t){return t.getAllEntries().map(function(e){var r=_8t(e,2),n=r[0],o=r[1],s=encodeURIComponent(n)+"="+encodeURIComponent(o.value);return o.metadata!==void 0&&(s+=g9+o.metadata.toString()),s})}function T5(t){var e=t.split(g9);if(!(e.length<=0)){var r=e.shift();if(r){var n=r.indexOf(INe);if(!(n<=0)){var o=decodeURIComponent(r.substring(0,n).trim()),s=decodeURIComponent(r.substring(n+1).trim()),a;return e.length>0&&(a=jA(e.join(g9))),{key:o,value:s,metadata:a}}}}}function MNe(t){return typeof t!="string"||t.length===0?{}:t.split(GA).map(function(e){return T5(e)}).filter(function(e){return e!==void 0&&e.value.length>0}).reduce(function(e,r){return e[r.key]=r.value,e},{})}var _8t,Cte=q(()=>{Ht();bte();_8t=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,s=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)s.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return s}});var E9,NNe=q(()=>{Ht();E5();bte();Cte();E9=(function(){function t(){}return t.prototype.inject=function(e,r,n){var o=kl.getBaggage(e);if(!(!o||A_(e))){var s=y9(o).filter(function(c){return c.length<=RNe}).slice(0,PNe),a=v9(s);a.length>0&&n.set(r,_9,a)}},t.prototype.extract=function(e,r,n){var o=n.get(r,_9),s=Array.isArray(o)?o.join(GA):o;if(!s)return e;var a={};if(s.length===0)return e;var c=s.split(GA);return c.forEach(function(l){var u=T5(l);if(u){var d={value:u.value};u.metadata&&(d.metadata=u.metadata),a[u.key]=d}}),Object.entries(a).length===0?e:kl.setBaggage(e,kl.createBaggage(a))},t.prototype.fields=function(){return[_9]},t})()});var LNe,kNe=q(()=>{LNe=(function(){function t(e,r){this._monotonicClock=r,this._epochMillis=e.now(),this._performanceMillis=r.now()}return t.prototype.now=function(){var e=this._monotonicClock.now()-this._performanceMillis;return this._epochMillis+e},t})()});function x_(t){var e,r,n={};if(typeof t!="object"||t==null)return n;try{for(var o=DNe(Object.entries(t)),s=o.next();!s.done;s=o.next()){var a=v8t(s.value,2),c=a[0],l=a[1];if(!Ate(c)){it.warn("Invalid attribute key: "+c);continue}if(!S5(l)){it.warn("Invalid attribute value set for key: "+c);continue}Array.isArray(l)?n[c]=l.slice():n[c]=l}}catch(u){e={error:u}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return n}function Ate(t){return typeof t=="string"&&t.length>0}function S5(t){return t==null?!0:Array.isArray(t)?y8t(t):UNe(t)}function y8t(t){var e,r,n;try{for(var o=DNe(t),s=o.next();!s.done;s=o.next()){var a=s.value;if(a!=null){if(!n){if(UNe(a)){n=typeof a;continue}return!1}if(typeof a!==n)return!1}}}catch(c){e={error:c}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return!0}function UNe(t){switch(typeof t){case"number":case"boolean":case"string":return!0}return!1}var DNe,v8t,qNe=q(()=>{Ht();DNe=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},v8t=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,s=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)s.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return s}});function T9(){return function(t){it.error(E8t(t))}}function E8t(t){return typeof t=="string"?t:JSON.stringify(T8t(t))}function T8t(t){for(var e={},r=t;r!==null;)Object.getOwnPropertyNames(r).forEach(function(n){if(!e[n]){var o=r[n];o&&(e[n]=String(o))}}),r=Object.getPrototypeOf(r);return e}var xte=q(()=>{Ht()});function jNe(t){FNe=t}function Ba(t){try{FNe(t)}catch{}}var FNe,wte=q(()=>{xte();FNe=T9()});var xc,Ite=q(()=>{(function(t){t.AlwaysOff="always_off",t.AlwaysOn="always_on",t.ParentBasedAlwaysOff="parentbased_always_off",t.ParentBasedAlwaysOn="parentbased_always_on",t.ParentBasedTraceIdRatio="parentbased_traceidratio",t.TraceIdRatio="traceidratio"})(xc||(xc={}))});function C8t(t){return b8t.indexOf(t)>-1}function x8t(t){return A8t.indexOf(t)>-1}function I8t(t){return w8t.indexOf(t)>-1}function P8t(t,e,r){if(!(typeof r[t]>"u")){var n=String(r[t]);e[t]=n.toLowerCase()==="true"}}function R8t(t,e,r,n,o){if(n===void 0&&(n=-1/0),o===void 0&&(o=1/0),typeof r[t]<"u"){var s=Number(r[t]);isNaN(s)||(s<n?e[t]=n:s>o?e[t]=o:e[t]=s)}}function O8t(t,e,r,n){n===void 0&&(n=S8t);var o=r[t];typeof o=="string"&&(e[t]=o.split(n).map(function(s){return s.trim()}))}function N8t(t,e,r){var n=r[t];if(typeof n=="string"){var o=M8t[n.toUpperCase()];o!=null&&(e[t]=o)}}function C5(t){var e={};for(var r in b5){var n=r;switch(n){case"OTEL_LOG_LEVEL":N8t(n,e,t);break;default:if(C8t(n))P8t(n,e,t);else if(x8t(n))R8t(n,e,t);else if(I8t(n))O8t(n,e,t);else{var o=t[n];typeof o<"u"&&o!==null&&(e[n]=String(o))}}}return e}var S8t,b8t,A8t,w8t,hE,mE,Pte,Rte,b5,M8t,Ote=q(()=>{Ht();Ite();S8t=",",b8t=["OTEL_SDK_DISABLED"];A8t=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_BLRP_EXPORT_TIMEOUT","OTEL_BLRP_MAX_EXPORT_BATCH_SIZE","OTEL_BLRP_MAX_QUEUE_SIZE","OTEL_BLRP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_OTLP_LOGS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];w8t=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS","OTEL_SEMCONV_STABILITY_OPT_IN"];hE=1/0,mE=128,Pte=128,Rte=128,b5={OTEL_SDK_DISABLED:!1,CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_BLRP_EXPORT_TIMEOUT:3e4,OTEL_BLRP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BLRP_MAX_QUEUE_SIZE:2048,OTEL_BLRP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_LOGS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_LOGS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_LOGS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:zr.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:hE,OTEL_ATTRIBUTE_COUNT_LIMIT:mE,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:hE,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:mE,OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT:hE,OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT:mE,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:Pte,OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:Rte,OTEL_TRACES_EXPORTER:"",OTEL_TRACES_SAMPLER:xc.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_LOGS_EXPORTER:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_LOGS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_LOGS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_TRACES_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_LOGS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"cumulative",OTEL_SEMCONV_STABILITY_OPT_IN:[]};M8t={ALL:zr.ALL,VERBOSE:zr.VERBOSE,DEBUG:zr.DEBUG,INFO:zr.INFO,WARN:zr.WARN,ERROR:zr.ERROR,NONE:zr.NONE}});function Iu(){var t=C5(process.env);return Object.assign({},b5,t)}function zA(){return C5(process.env)}var BNe=q(()=>{Ote()});var S9,$Ne=q(()=>{S9=typeof globalThis=="object"?globalThis:global});function VNe(t){return t>=48&&t<=57?t-48:t>=97&&t<=102?t-87:t-55}function b9(t){for(var e=new Uint8Array(t.length/2),r=0,n=0;n<t.length;n+=2){var o=VNe(t.charCodeAt(n)),s=VNe(t.charCodeAt(n+1));e[r++]=o<<4|s}return e}var Mte=q(()=>{});function C9(t){return Buffer.from(b9(t)).toString("base64")}var HNe=q(()=>{Mte()});function GNe(t){return function(){for(var r=0;r<t/4;r++)A9.writeUInt32BE(Math.random()*Math.pow(2,32)>>>0,r*4);for(var r=0;r<t&&!(A9[r]>0);r++)r===t-1&&(A9[t-1]=1);return A9.toString("hex",0,t)}}var L8t,zNe,x9,A9,WNe=q(()=>{L8t=8,zNe=16,x9=(function(){function t(){this.generateTraceId=GNe(zNe),this.generateSpanId=GNe(L8t)}return t})(),A9=Buffer.allocUnsafe(zNe)});var KNe,Pu,YNe=q(()=>{KNe=require("perf_hooks"),Pu=KNe.performance});var w9,Nte=q(()=>{w9="1.30.1"});var QNe=q(()=>{});var ZNe=q(()=>{QNe()});var k8t,D8t,U8t,q8t,JNe,XNe,e4e,t4e,F8t,r4e,n4e=q(()=>{k8t="process.runtime.name",D8t="telemetry.sdk.name",U8t="telemetry.sdk.language",q8t="telemetry.sdk.version",JNe=k8t,XNe=D8t,e4e=U8t,t4e=q8t,F8t="nodejs",r4e=F8t});var i4e=q(()=>{n4e()});var o4e=q(()=>{});var s4e=q(()=>{});var a4e=q(()=>{ZNe();i4e();o4e();s4e()});var WA,w_,c4e=q(()=>{Nte();a4e();w_=(WA={},WA[XNe]="opentelemetry",WA[JNe]="node",WA[e4e]=r4e,WA[t4e]=w9,WA)});function KA(t){t.unref()}var l4e=q(()=>{});var u4e=q(()=>{BNe();$Ne();HNe();WNe();YNe();c4e();l4e()});var Lte=q(()=>{u4e()});function Bd(t){var e=t/1e3,r=Math.trunc(e),n=Math.round(t%1e3*B8t);return[r,n]}function YA(){var t=Pu.timeOrigin;if(typeof t!="number"){var e=Pu;t=e.timing&&e.timing.fetchStart}return t}function A5(t){var e=Bd(YA()),r=Bd(typeof t=="number"?t:Pu.now());return I5(e,r)}function f4e(t){if(QA(t))return t;if(typeof t=="number")return t<YA()?A5(t):Bd(t);if(t instanceof Date)return Bd(t.getTime());throw TypeError("Invalid input type")}function P9(t,e){var r=e[0]-t[0],n=e[1]-t[1];return n<0&&(r-=1,n+=I9),[r,n]}function p4e(t){var e=d4e,r=""+"0".repeat(e)+t[1]+"Z",n=r.substring(r.length-e-1),o=new Date(t[0]*1e3).toISOString();return o.replace("000Z",n)}function h4e(t){return t[0]*I9+t[1]}function m4e(t){return t[0]*1e3+t[1]/1e6}function x5(t){return t[0]*1e6+t[1]/1e3}function QA(t){return Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number"}function w5(t){return QA(t)||typeof t=="number"||t instanceof Date}function I5(t,e){var r=[t[0]+e[0],t[1]+e[1]];return r[1]>=I9&&(r[1]-=I9,r[0]+=1),r}var d4e,j8t,B8t,I9,g4e=q(()=>{Lte();d4e=9,j8t=6,B8t=Math.pow(10,j8t),I9=Math.pow(10,d4e)});var Dl,_4e=q(()=>{(function(t){t[t.SUCCESS=0]="SUCCESS",t[t.FAILED=1]="FAILED"})(Dl||(Dl={}))});var $8t,R9,v4e=q(()=>{Ht();$8t=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},R9=(function(){function t(e){e===void 0&&(e={});var r;this._propagators=(r=e.propagators)!==null&&r!==void 0?r:[],this._fields=Array.from(new Set(this._propagators.map(function(n){return typeof n.fields=="function"?n.fields():[]}).reduce(function(n,o){return n.concat(o)},[])))}return t.prototype.inject=function(e,r,n){var o,s;try{for(var a=$8t(this._propagators),c=a.next();!c.done;c=a.next()){var l=c.value;try{l.inject(e,r,n)}catch(u){it.warn("Failed to inject with "+l.constructor.name+". Err: "+u.message)}}}catch(u){o={error:u}}finally{try{c&&!c.done&&(s=a.return)&&s.call(a)}finally{if(o)throw o.error}}},t.prototype.extract=function(e,r,n){return this._propagators.reduce(function(o,s){try{return s.extract(o,r,n)}catch(a){it.warn("Failed to extract with "+s.constructor.name+". Err: "+a.message)}return o},e)},t.prototype.fields=function(){return this._fields.slice()},t})()});function y4e(t){return G8t.test(t)}function E4e(t){return z8t.test(t)&&!W8t.test(t)}var kte,V8t,H8t,G8t,z8t,W8t,T4e=q(()=>{kte="[_0-9a-z-*/]",V8t="[a-z]"+kte+"{0,255}",H8t="[a-z0-9]"+kte+"{0,240}@[a-z]"+kte+"{0,13}",G8t=new RegExp("^(?:"+V8t+"|"+H8t+")$"),z8t=/^[ -~]{0,255}[!-~]$/,W8t=/,|=/});var S4e,K8t,b4e,C4e,O9,Dte=q(()=>{T4e();S4e=32,K8t=512,b4e=",",C4e="=",O9=(function(){function t(e){this._internalState=new Map,e&&this._parse(e)}return t.prototype.set=function(e,r){var n=this._clone();return n._internalState.has(e)&&n._internalState.delete(e),n._internalState.set(e,r),n},t.prototype.unset=function(e){var r=this._clone();return r._internalState.delete(e),r},t.prototype.get=function(e){return this._internalState.get(e)},t.prototype.serialize=function(){var e=this;return this._keys().reduce(function(r,n){return r.push(n+C4e+e.get(n)),r},[]).join(b4e)},t.prototype._parse=function(e){e.length>K8t||(this._internalState=e.split(b4e).reverse().reduce(function(r,n){var o=n.trim(),s=o.indexOf(C4e);if(s!==-1){var a=o.slice(0,s),c=o.slice(s+1,n.length);y4e(a)&&E4e(c)&&r.set(a,c)}return r},new Map),this._internalState.size>S4e&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,S4e))))},t.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},t.prototype._clone=function(){var e=new t;return e._internalState=new Map(this._internalState),e},t})()});function Ute(t){var e=e9t.exec(t);return!e||e[1]==="00"&&e[5]?null:{traceId:e[2],spanId:e[3],traceFlags:parseInt(e[4],16)}}var P5,R5,Y8t,Q8t,Z8t,J8t,X8t,e9t,M9,A4e=q(()=>{Ht();E5();Dte();P5="traceparent",R5="tracestate",Y8t="00",Q8t="(?!ff)[\\da-f]{2}",Z8t="(?![0]{32})[\\da-f]{32}",J8t="(?![0]{16})[\\da-f]{16}",X8t="[\\da-f]{2}",e9t=new RegExp("^\\s?("+Q8t+")-("+Z8t+")-("+J8t+")-("+X8t+")(-.*)?\\s?$");M9=(function(){function t(){}return t.prototype.inject=function(e,r,n){var o=Gn.getSpanContext(e);if(!(!o||A_(e)||!Cc(o))){var s=Y8t+"-"+o.traceId+"-"+o.spanId+"-0"+Number(o.traceFlags||wi.NONE).toString(16);n.set(r,P5,s),o.traceState&&n.set(r,R5,o.traceState.serialize())}},t.prototype.extract=function(e,r,n){var o=n.get(r,P5);if(!o)return e;var s=Array.isArray(o)?o[0]:o;if(typeof s!="string")return e;var a=Ute(s);if(!a)return e;a.isRemote=!0;var c=n.get(r,R5);if(c){var l=Array.isArray(c)?c.join(","):c;a.traceState=new O9(typeof l=="string"?l:void 0)}return Gn.setSpanContext(e,a)},t.prototype.fields=function(){return[P5,R5]},t})()});function x4e(t,e){return t.setValue(qte,e)}function w4e(t){return t.deleteValue(qte)}function I4e(t){return t.getValue(qte)}var qte,N9,P4e=q(()=>{Ht();qte=bc("OpenTelemetry SDK Context Key RPC_METADATA");(function(t){t.HTTP="http"})(N9||(N9={}))});var O5,Fte=q(()=>{Ht();O5=(function(){function t(){}return t.prototype.shouldSample=function(){return{decision:Ac.NOT_RECORD}},t.prototype.toString=function(){return"AlwaysOffSampler"},t})()});var ZA,jte=q(()=>{Ht();ZA=(function(){function t(){}return t.prototype.shouldSample=function(){return{decision:Ac.RECORD_AND_SAMPLED}},t.prototype.toString=function(){return"AlwaysOnSampler"},t})()});var R4e,O4e=q(()=>{Ht();wte();Fte();jte();R4e=(function(){function t(e){var r,n,o,s;this._root=e.root,this._root||(Ba(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new ZA),this._remoteParentSampled=(r=e.remoteParentSampled)!==null&&r!==void 0?r:new ZA,this._remoteParentNotSampled=(n=e.remoteParentNotSampled)!==null&&n!==void 0?n:new O5,this._localParentSampled=(o=e.localParentSampled)!==null&&o!==void 0?o:new ZA,this._localParentNotSampled=(s=e.localParentNotSampled)!==null&&s!==void 0?s:new O5}return t.prototype.shouldSample=function(e,r,n,o,s,a){var c=Gn.getSpanContext(e);return!c||!Cc(c)?this._root.shouldSample(e,r,n,o,s,a):c.isRemote?c.traceFlags&wi.SAMPLED?this._remoteParentSampled.shouldSample(e,r,n,o,s,a):this._remoteParentNotSampled.shouldSample(e,r,n,o,s,a):c.traceFlags&wi.SAMPLED?this._localParentSampled.shouldSample(e,r,n,o,s,a):this._localParentNotSampled.shouldSample(e,r,n,o,s,a)},t.prototype.toString=function(){return"ParentBased{root="+this._root.toString()+", remoteParentSampled="+this._remoteParentSampled.toString()+", remoteParentNotSampled="+this._remoteParentNotSampled.toString()+", localParentSampled="+this._localParentSampled.toString()+", localParentNotSampled="+this._localParentNotSampled.toString()+"}"},t})()});var M4e,N4e=q(()=>{Ht();M4e=(function(){function t(e){e===void 0&&(e=0),this._ratio=e,this._ratio=this._normalize(e),this._upperBound=Math.floor(this._ratio*4294967295)}return t.prototype.shouldSample=function(e,r){return{decision:fE(r)&&this._accumulate(r)<this._upperBound?Ac.RECORD_AND_SAMPLED:Ac.NOT_RECORD}},t.prototype.toString=function(){return"TraceIdRatioBased{"+this._ratio+"}"},t.prototype._normalize=function(e){return typeof e!="number"||isNaN(e)?0:e>=1?1:e<=0?0:e},t.prototype._accumulate=function(e){for(var r=0,n=0;n<e.length/8;n++){var o=n*8,s=parseInt(e.slice(o,o+8),16);r=(r^s)>>>0}return r},t})()});function a9t(t,e){return function(r){return t(e(r))}}function Bte(t){if(!c9t(t)||l9t(t)!==t9t)return!1;var e=s9t(t);if(e===null)return!0;var r=D4e.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&L4e.call(r)===o9t}function c9t(t){return t!=null&&typeof t=="object"}function l9t(t){return t==null?t===void 0?n9t:r9t:gE&&gE in Object(t)?u9t(t):d9t(t)}function u9t(t){var e=D4e.call(t,gE),r=t[gE],n=!1;try{t[gE]=void 0,n=!0}catch{}var o=U4e.call(t);return n&&(e?t[gE]=r:delete t[gE]),o}function d9t(t){return U4e.call(t)}var t9t,r9t,n9t,i9t,L4e,o9t,s9t,k4e,D4e,gE,U4e,q4e=q(()=>{t9t="[object Object]",r9t="[object Null]",n9t="[object Undefined]",i9t=Function.prototype,L4e=i9t.toString,o9t=L4e.call(Object),s9t=a9t(Object.getPrototypeOf,Object),k4e=Object.prototype,D4e=k4e.hasOwnProperty,gE=Symbol?Symbol.toStringTag:void 0,U4e=k4e.toString});function D9(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=t.shift(),n=new WeakMap;t.length>0;)r=j4e(r,t.shift(),0,n);return r}function $te(t){return k9(t)?t.slice():t}function j4e(t,e,r,n){r===void 0&&(r=0);var o;if(!(r>f9t)){if(r++,L9(t)||L9(e)||B4e(e))o=$te(e);else if(k9(t)){if(o=t.slice(),k9(e))for(var s=0,a=e.length;s<a;s++)o.push($te(e[s]));else if(M5(e))for(var c=Object.keys(e),s=0,a=c.length;s<a;s++){var l=c[s];o[l]=$te(e[l])}}else if(M5(t))if(M5(e)){if(!p9t(t,e))return e;o=Object.assign({},t);for(var c=Object.keys(e),s=0,a=c.length;s<a;s++){var l=c[s],u=e[l];if(L9(u))typeof u>"u"?delete o[l]:o[l]=u;else{var d=o[l],f=u;if(F4e(t,l,n)||F4e(e,l,n))delete o[l];else{if(M5(d)&&M5(f)){var p=n.get(d)||[],h=n.get(f)||[];p.push({obj:t,key:l}),h.push({obj:e,key:l}),n.set(d,p),n.set(f,h)}o[l]=j4e(o[l],u,r,n)}}}}else o=e;return o}}function F4e(t,e,r){for(var n=r.get(t[e])||[],o=0,s=n.length;o<s;o++){var a=n[o];if(a.key===e&&a.obj===t)return!0}return!1}function k9(t){return Array.isArray(t)}function B4e(t){return typeof t=="function"}function M5(t){return!L9(t)&&!k9(t)&&!B4e(t)&&typeof t=="object"}function L9(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t>"u"||t instanceof Date||t instanceof RegExp||t===null}function p9t(t,e){return!(!Bte(t)||!Bte(e))}var f9t,$4e=q(()=>{q4e();f9t=20});function V4e(t,e){var r,n=new Promise(function(s,a){r=setTimeout(function(){a(new Vte("Operation timed out."))},e)});return Promise.race([t,n]).then(function(o){return clearTimeout(r),o},function(o){throw clearTimeout(r),o})}var h9t,Vte,H4e=q(()=>{h9t=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(n[s]=o[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Vte=(function(t){h9t(e,t);function e(r){var n=t.call(this,r)||this;return Object.setPrototypeOf(n,e.prototype),n}return e})(Error)});function Hte(t,e){return typeof e=="string"?t===e:!!t.match(e)}function G4e(t,e){var r,n;if(!e)return!1;try{for(var o=m9t(e),s=o.next();!s.done;s=o.next()){var a=s.value;if(Hte(t,a))return!0}}catch(c){r={error:c}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return!1}var m9t,z4e=q(()=>{m9t=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}});function W4e(t){return typeof t=="function"&&typeof t.__original=="function"&&typeof t.__unwrap=="function"&&t.__wrapped===!0}var K4e=q(()=>{});var Y4e,Q4e=q(()=>{Y4e=(function(){function t(){var e=this;this._promise=new Promise(function(r,n){e._resolve=r,e._reject=n})}return Object.defineProperty(t.prototype,"promise",{get:function(){return this._promise},enumerable:!1,configurable:!0}),t.prototype.resolve=function(e){this._resolve(e)},t.prototype.reject=function(e){this._reject(e)},t})()});var g9t,_9t,JA,Z4e=q(()=>{Q4e();g9t=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,s=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)s.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return s},_9t=function(t,e,r){if(r||arguments.length===2)for(var n=0,o=e.length,s;n<o;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))},JA=(function(){function t(e,r){this._callback=e,this._that=r,this._isCalled=!1,this._deferred=new Y4e}return Object.defineProperty(t.prototype,"isCalled",{get:function(){return this._isCalled},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"promise",{get:function(){return this._deferred.promise},enumerable:!1,configurable:!0}),t.prototype.call=function(){for(var e,r=this,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];if(!this._isCalled){this._isCalled=!0;try{Promise.resolve((e=this._callback).call.apply(e,_9t([this._that],g9t(n),!1))).then(function(s){return r._deferred.resolve(s)},function(s){return r._deferred.reject(s)})}catch(s){this._deferred.reject(s)}}return this._deferred.promise},t})()});function J4e(t,e){return new Promise(function(r){ts.with(HA(ts.active()),function(){t.export(e,function(n){r(n)})})})}var X4e=q(()=>{Ht();E5()});var e3e={};Xs(e3e,{AlwaysOffSampler:()=>O5,AlwaysOnSampler:()=>ZA,AnchoredClock:()=>LNe,BindOnceFuture:()=>JA,CompositePropagator:()=>R9,DEFAULT_ATTRIBUTE_COUNT_LIMIT:()=>mE,DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT:()=>hE,DEFAULT_ENVIRONMENT:()=>b5,DEFAULT_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:()=>Pte,DEFAULT_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:()=>Rte,ExportResultCode:()=>Dl,ParentBasedSampler:()=>R4e,RPCType:()=>N9,RandomIdGenerator:()=>x9,SDK_INFO:()=>w_,TRACE_PARENT_HEADER:()=>P5,TRACE_STATE_HEADER:()=>R5,TimeoutError:()=>Vte,TraceIdRatioBasedSampler:()=>M4e,TraceState:()=>O9,TracesSamplerValues:()=>xc,VERSION:()=>w9,W3CBaggagePropagator:()=>E9,W3CTraceContextPropagator:()=>M9,_globalThis:()=>S9,addHrTimes:()=>I5,baggageUtils:()=>v9t,callWithTimeout:()=>V4e,deleteRPCMetadata:()=>w4e,getEnv:()=>Iu,getEnvWithoutDefaults:()=>zA,getRPCMetadata:()=>I4e,getTimeOrigin:()=>YA,globalErrorHandler:()=>Ba,hexToBase64:()=>C9,hexToBinary:()=>b9,hrTime:()=>A5,hrTimeDuration:()=>P9,hrTimeToMicroseconds:()=>x5,hrTimeToMilliseconds:()=>m4e,hrTimeToNanoseconds:()=>h4e,hrTimeToTimeStamp:()=>p4e,internal:()=>Gte,isAttributeKey:()=>Ate,isAttributeValue:()=>S5,isTimeInput:()=>w5,isTimeInputHrTime:()=>QA,isTracingSuppressed:()=>A_,isUrlIgnored:()=>G4e,isWrapped:()=>W4e,loggingErrorHandler:()=>T9,merge:()=>D9,millisToHrTime:()=>Bd,otperformance:()=>Pu,parseEnvironment:()=>C5,parseTraceParent:()=>Ute,sanitizeAttributes:()=>x_,setGlobalErrorHandler:()=>jNe,setRPCMetadata:()=>x4e,suppressTracing:()=>HA,timeInputToHrTime:()=>f4e,unrefTimer:()=>KA,unsuppressTracing:()=>wNe,urlMatches:()=>Hte});var v9t,Gte,wc=q(()=>{NNe();kNe();qNe();wte();xte();g4e();Mte();_4e();Cte();Lte();v4e();A4e();P4e();Fte();jte();O4e();N4e();E5();Dte();Ote();$4e();Ite();H4e();z4e();K4e();Z4e();Nte();X4e();v9t={getKeyPairs:y9,serializeKeyPairs:v9,parseKeyPairsIntoRecord:MNe,parsePairKeyValue:T5},Gte={_export:J4e}});var y9t,E9t,T9t,U9,q9,t3e,r3e=q(()=>{y9t="exception.type",E9t="exception.message",T9t="exception.stacktrace",U9=y9t,q9=E9t,t3e=T9t});var n3e=q(()=>{r3e()});var i3e=q(()=>{});var o3e=q(()=>{i3e()});var s3e=q(()=>{});var a3e=q(()=>{});var c3e=q(()=>{n3e();o3e();s3e();a3e()});var l3e,u3e=q(()=>{l3e="exception"});var zte,S9t,d3e,b9t,F9,Wte=q(()=>{Ht();wc();c3e();u3e();zte=function(){return zte=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},zte.apply(this,arguments)},S9t=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},d3e=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,s=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)s.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return s},b9t=function(t,e,r){if(r||arguments.length===2)for(var n=0,o=e.length,s;n<o;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))},F9=(function(){function t(e,r,n,o,s,a,c,l,u,d){c===void 0&&(c=[]),this.attributes={},this.links=[],this.events=[],this._droppedAttributesCount=0,this._droppedEventsCount=0,this._droppedLinksCount=0,this.status={code:VA.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=n,this._spanContext=o,this.parentSpanId=a,this.kind=s,this.links=c;var f=Date.now();this._performanceStartTime=Pu.now(),this._performanceOffset=f-(this._performanceStartTime+YA()),this._startTimeProvided=l!=null,this.startTime=this._getTime(l??f),this.resource=e.resource,this.instrumentationLibrary=e.instrumentationLibrary,this._spanLimits=e.getSpanLimits(),this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0,d!=null&&this.setAttributes(d),this._spanProcessor=e.getActiveSpanProcessor(),this._spanProcessor.onStart(this,r)}return t.prototype.spanContext=function(){return this._spanContext},t.prototype.setAttribute=function(e,r){return r==null||this._isSpanEnded()?this:e.length===0?(it.warn("Invalid attribute key: "+e),this):S5(r)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,e)?(this._droppedAttributesCount++,this):(this.attributes[e]=this._truncateToSize(r),this):(it.warn("Invalid attribute value set for key: "+e),this)},t.prototype.setAttributes=function(e){var r,n;try{for(var o=S9t(Object.entries(e)),s=o.next();!s.done;s=o.next()){var a=d3e(s.value,2),c=a[0],l=a[1];this.setAttribute(c,l)}}catch(u){r={error:u}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return this},t.prototype.addEvent=function(e,r,n){if(this._isSpanEnded())return this;if(this._spanLimits.eventCountLimit===0)return it.warn("No events allowed."),this._droppedEventsCount++,this;this.events.length>=this._spanLimits.eventCountLimit&&(this._droppedEventsCount===0&&it.debug("Dropping extra events."),this.events.shift(),this._droppedEventsCount++),w5(r)&&(w5(n)||(n=r),r=void 0);var o=x_(r);return this.events.push({name:e,attributes:o,time:this._getTime(n),droppedAttributesCount:0}),this},t.prototype.addLink=function(e){return this.links.push(e),this},t.prototype.addLinks=function(e){var r;return(r=this.links).push.apply(r,b9t([],d3e(e),!1)),this},t.prototype.setStatus=function(e){return this._isSpanEnded()?this:(this.status=zte({},e),this.status.message!=null&&typeof e.message!="string"&&(it.warn("Dropping invalid status.message of type '"+typeof e.message+"', expected 'string'"),delete this.status.message),this)},t.prototype.updateName=function(e){return this._isSpanEnded()?this:(this.name=e,this)},t.prototype.end=function(e){if(this._isSpanEnded()){it.error(this.name+" "+this._spanContext.traceId+"-"+this._spanContext.spanId+" - You can only call end() on a span once.");return}this._ended=!0,this.endTime=this._getTime(e),this._duration=P9(this.startTime,this.endTime),this._duration[0]<0&&(it.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime),this.endTime=this.startTime.slice(),this._duration=[0,0]),this._droppedEventsCount>0&&it.warn("Dropped "+this._droppedEventsCount+" events because eventCountLimit reached"),this._spanProcessor.onEnd(this)},t.prototype._getTime=function(e){if(typeof e=="number"&&e<=Pu.now())return A5(e+this._performanceOffset);if(typeof e=="number")return Bd(e);if(e instanceof Date)return Bd(e.getTime());if(QA(e))return e;if(this._startTimeProvided)return Bd(Date.now());var r=Pu.now()-this._performanceStartTime;return I5(this.startTime,Bd(r))},t.prototype.isRecording=function(){return this._ended===!1},t.prototype.recordException=function(e,r){var n={};typeof e=="string"?n[q9]=e:e&&(e.code?n[U9]=e.code.toString():e.name&&(n[U9]=e.name),e.message&&(n[q9]=e.message),e.stack&&(n[t3e]=e.stack)),n[U9]||n[q9]?this.addEvent(l3e,n,r):it.warn("Failed to record an exception "+e)},Object.defineProperty(t.prototype,"duration",{get:function(){return this._duration},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ended",{get:function(){return this._ended},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"droppedAttributesCount",{get:function(){return this._droppedAttributesCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"droppedEventsCount",{get:function(){return this._droppedEventsCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"droppedLinksCount",{get:function(){return this._droppedLinksCount},enumerable:!1,configurable:!0}),t.prototype._isSpanEnded=function(){return this._ended&&it.warn("Can not execute the operation on ended Span {traceId: "+this._spanContext.traceId+", spanId: "+this._spanContext.spanId+"}"),this._ended},t.prototype._truncateToLimitUtil=function(e,r){return e.length<=r?e:e.substring(0,r)},t.prototype._truncateToSize=function(e){var r=this,n=this._attributeValueLengthLimit;return n<=0?(it.warn("Attribute value limit must be positive, got "+n),e):typeof e=="string"?this._truncateToLimitUtil(e,n):Array.isArray(e)?e.map(function(o){return typeof o=="string"?r._truncateToLimitUtil(o,n):o}):e},t})()});var $d,N5=q(()=>{(function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})($d||($d={}))});var I_,j9=q(()=>{N5();I_=(function(){function t(){}return t.prototype.shouldSample=function(){return{decision:$d.NOT_RECORD}},t.prototype.toString=function(){return"AlwaysOffSampler"},t})()});var N0,B9=q(()=>{N5();N0=(function(){function t(){}return t.prototype.shouldSample=function(){return{decision:$d.RECORD_AND_SAMPLED}},t.prototype.toString=function(){return"AlwaysOnSampler"},t})()});var XA,Kte=q(()=>{Ht();wc();j9();B9();XA=(function(){function t(e){var r,n,o,s;this._root=e.root,this._root||(Ba(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new N0),this._remoteParentSampled=(r=e.remoteParentSampled)!==null&&r!==void 0?r:new N0,this._remoteParentNotSampled=(n=e.remoteParentNotSampled)!==null&&n!==void 0?n:new I_,this._localParentSampled=(o=e.localParentSampled)!==null&&o!==void 0?o:new N0,this._localParentNotSampled=(s=e.localParentNotSampled)!==null&&s!==void 0?s:new I_}return t.prototype.shouldSample=function(e,r,n,o,s,a){var c=Gn.getSpanContext(e);return!c||!Cc(c)?this._root.shouldSample(e,r,n,o,s,a):c.isRemote?c.traceFlags&wi.SAMPLED?this._remoteParentSampled.shouldSample(e,r,n,o,s,a):this._remoteParentNotSampled.shouldSample(e,r,n,o,s,a):c.traceFlags&wi.SAMPLED?this._localParentSampled.shouldSample(e,r,n,o,s,a):this._localParentNotSampled.shouldSample(e,r,n,o,s,a)},t.prototype.toString=function(){return"ParentBased{root="+this._root.toString()+", remoteParentSampled="+this._remoteParentSampled.toString()+", remoteParentNotSampled="+this._remoteParentNotSampled.toString()+", localParentSampled="+this._localParentSampled.toString()+", localParentNotSampled="+this._localParentNotSampled.toString()+"}"},t})()});var L5,Yte=q(()=>{Ht();N5();L5=(function(){function t(e){e===void 0&&(e=0),this._ratio=e,this._ratio=this._normalize(e),this._upperBound=Math.floor(this._ratio*4294967295)}return t.prototype.shouldSample=function(e,r){return{decision:fE(r)&&this._accumulate(r)<this._upperBound?$d.RECORD_AND_SAMPLED:$d.NOT_RECORD}},t.prototype.toString=function(){return"TraceIdRatioBased{"+this._ratio+"}"},t.prototype._normalize=function(e){return typeof e!="number"||isNaN(e)?0:e>=1?1:e<=0?0:e},t.prototype._accumulate=function(e){for(var r=0,n=0;n<e.length/8;n++){var o=n*8,s=parseInt(e.slice(o,o+8),16);r=(r^s)>>>0}return r},t})()});function $9(){var t=Iu();return{sampler:Qte(t),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:t.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:t.OTEL_ATTRIBUTE_COUNT_LIMIT},spanLimits:{attributeValueLengthLimit:t.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:t.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:t.OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:t.OTEL_SPAN_EVENT_COUNT_LIMIT,attributePerEventCountLimit:t.OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT,attributePerLinkCountLimit:t.OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT},mergeResourceWithDefaults:!0}}function Qte(t){switch(t===void 0&&(t=Iu()),t.OTEL_TRACES_SAMPLER){case xc.AlwaysOn:return new N0;case xc.AlwaysOff:return new I_;case xc.ParentBasedAlwaysOn:return new XA({root:new N0});case xc.ParentBasedAlwaysOff:return new XA({root:new I_});case xc.TraceIdRatio:return new L5(f3e(t));case xc.ParentBasedTraceIdRatio:return new XA({root:new L5(f3e(t))});default:return it.error('OTEL_TRACES_SAMPLER value "'+t.OTEL_TRACES_SAMPLER+" invalid, defaulting to "+C9t+'".'),new N0}}function f3e(t){if(t.OTEL_TRACES_SAMPLER_ARG===void 0||t.OTEL_TRACES_SAMPLER_ARG==="")return it.error("OTEL_TRACES_SAMPLER_ARG is blank, defaulting to "+ex+"."),ex;var e=Number(t.OTEL_TRACES_SAMPLER_ARG);return isNaN(e)?(it.error("OTEL_TRACES_SAMPLER_ARG="+t.OTEL_TRACES_SAMPLER_ARG+" was given, but it is invalid, defaulting to "+ex+"."),ex):e<0||e>1?(it.error("OTEL_TRACES_SAMPLER_ARG="+t.OTEL_TRACES_SAMPLER_ARG+" was given, but it is out of range ([0..1]), defaulting to "+ex+"."),ex):e}var C9t,ex,Zte=q(()=>{Ht();wc();j9();B9();Kte();Yte();C9t=xc.AlwaysOn,ex=1});function p3e(t){var e={sampler:Qte()},r=$9(),n=Object.assign({},r,e,t);return n.generalLimits=Object.assign({},r.generalLimits,t.generalLimits||{}),n.spanLimits=Object.assign({},r.spanLimits,t.spanLimits||{}),n}function h3e(t){var e,r,n,o,s,a,c,l,u,d,f,p,h=Object.assign({},t.spanLimits),_=zA();return h.attributeCountLimit=(a=(s=(o=(r=(e=t.spanLimits)===null||e===void 0?void 0:e.attributeCountLimit)!==null&&r!==void 0?r:(n=t.generalLimits)===null||n===void 0?void 0:n.attributeCountLimit)!==null&&o!==void 0?o:_.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT)!==null&&s!==void 0?s:_.OTEL_ATTRIBUTE_COUNT_LIMIT)!==null&&a!==void 0?a:mE,h.attributeValueLengthLimit=(p=(f=(d=(l=(c=t.spanLimits)===null||c===void 0?void 0:c.attributeValueLengthLimit)!==null&&l!==void 0?l:(u=t.generalLimits)===null||u===void 0?void 0:u.attributeValueLengthLimit)!==null&&d!==void 0?d:_.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&f!==void 0?f:_.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&p!==void 0?p:hE,Object.assign({},t,{spanLimits:h})}var Jte=q(()=>{Zte();wc()});var m3e,g3e=q(()=>{Ht();wc();m3e=(function(){function t(e,r){this._exporter=e,this._isExporting=!1,this._finishedSpans=[],this._droppedSpansCount=0;var n=Iu();this._maxExportBatchSize=typeof r?.maxExportBatchSize=="number"?r.maxExportBatchSize:n.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=typeof r?.maxQueueSize=="number"?r.maxQueueSize:n.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis=typeof r?.scheduledDelayMillis=="number"?r.scheduledDelayMillis:n.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis=typeof r?.exportTimeoutMillis=="number"?r.exportTimeoutMillis:n.OTEL_BSP_EXPORT_TIMEOUT,this._shutdownOnce=new JA(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(it.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}return t.prototype.forceFlush=function(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()},t.prototype.onStart=function(e,r){},t.prototype.onEnd=function(e){this._shutdownOnce.isCalled||(e.spanContext().traceFlags&wi.SAMPLED)!==0&&this._addToBuffer(e)},t.prototype.shutdown=function(){return this._shutdownOnce.call()},t.prototype._shutdown=function(){var e=this;return Promise.resolve().then(function(){return e.onShutdown()}).then(function(){return e._flushAll()}).then(function(){return e._exporter.shutdown()})},t.prototype._addToBuffer=function(e){if(this._finishedSpans.length>=this._maxQueueSize){this._droppedSpansCount===0&&it.debug("maxQueueSize reached, dropping spans"),this._droppedSpansCount++;return}this._droppedSpansCount>0&&(it.warn("Dropped "+this._droppedSpansCount+" spans because maxQueueSize reached"),this._droppedSpansCount=0),this._finishedSpans.push(e),this._maybeStartTimer()},t.prototype._flushAll=function(){var e=this;return new Promise(function(r,n){for(var o=[],s=Math.ceil(e._finishedSpans.length/e._maxExportBatchSize),a=0,c=s;a<c;a++)o.push(e._flushOneBatch());Promise.all(o).then(function(){r()}).catch(n)})},t.prototype._flushOneBatch=function(){var e=this;return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise(function(r,n){var o=setTimeout(function(){n(new Error("Timeout"))},e._exportTimeoutMillis);ts.with(HA(ts.active()),function(){var s;e._finishedSpans.length<=e._maxExportBatchSize?(s=e._finishedSpans,e._finishedSpans=[]):s=e._finishedSpans.splice(0,e._maxExportBatchSize);for(var a=function(){return e._exporter.export(s,function(f){var p;clearTimeout(o),f.code===Dl.SUCCESS?r():n((p=f.error)!==null&&p!==void 0?p:new Error("BatchSpanProcessor: span export failed"))})},c=null,l=0,u=s.length;l<u;l++){var d=s[l];d.resource.asyncAttributesPending&&d.resource.waitForAsyncAttributes&&(c??(c=[]),c.push(d.resource.waitForAsyncAttributes()))}c===null?a():Promise.all(c).then(a,function(f){Ba(f),n(f)})})})},t.prototype._maybeStartTimer=function(){var e=this;if(!this._isExporting){var r=function(){e._isExporting=!0,e._flushOneBatch().finally(function(){e._isExporting=!1,e._finishedSpans.length>0&&(e._clearTimer(),e._maybeStartTimer())}).catch(function(n){e._isExporting=!1,Ba(n)})};if(this._finishedSpans.length>=this._maxExportBatchSize)return r();this._timer===void 0&&(this._timer=setTimeout(function(){return r()},this._scheduledDelayMillis),KA(this._timer))}},t.prototype._clearTimer=function(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)},t})()});var A9t,tx,_3e=q(()=>{g3e();A9t=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(n[s]=o[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),tx=(function(t){A9t(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.onShutdown=function(){},e})(m3e)});function v3e(t){return function(){for(var r=0;r<t/4;r++)V9.writeUInt32BE(Math.random()*Math.pow(2,32)>>>0,r*4);for(var r=0;r<t&&!(V9[r]>0);r++)r===t-1&&(V9[t-1]=1);return V9.toString("hex",0,t)}}var x9t,y3e,rx,V9,E3e=q(()=>{x9t=8,y3e=16,rx=(function(){function t(){this.generateTraceId=v3e(y3e),this.generateSpanId=v3e(x9t)}return t})(),V9=Buffer.allocUnsafe(y3e)});var T3e=q(()=>{_3e();E3e()});var H9=q(()=>{T3e()});var G9,Xte=q(()=>{Ht();wc();Wte();Jte();H9();G9=(function(){function t(e,r,n){this._tracerProvider=n;var o=p3e(r);this._sampler=o.sampler,this._generalLimits=o.generalLimits,this._spanLimits=o.spanLimits,this._idGenerator=r.idGenerator||new rx,this.resource=n.resource,this.instrumentationLibrary=e}return t.prototype.startSpan=function(e,r,n){var o,s,a;r===void 0&&(r={}),n===void 0&&(n=ts.active()),r.root&&(n=Gn.deleteSpan(n));var c=Gn.getSpan(n);if(A_(n)){it.debug("Instrumentation suppressed, returning Noop Span");var l=Gn.wrapSpanContext(BA);return l}var u=c?.spanContext(),d=this._idGenerator.generateSpanId(),f,p,h;!u||!Gn.isSpanContextValid(u)?f=this._idGenerator.generateTraceId():(f=u.traceId,p=u.traceState,h=u.spanId);var _=(o=r.kind)!==null&&o!==void 0?o:$A.INTERNAL,g=((s=r.links)!==null&&s!==void 0?s:[]).map(function(P){return{context:P.context,attributes:x_(P.attributes)}}),v=x_(r.attributes),E=this._sampler.shouldSample(n,f,e,_,v,g);p=(a=E.traceState)!==null&&a!==void 0?a:p;var y=E.decision===Ac.RECORD_AND_SAMPLED?wi.SAMPLED:wi.NONE,S={traceId:f,spanId:d,traceFlags:y,traceState:p};if(E.decision===Ac.NOT_RECORD){it.debug("Recording is off, propagating context in a non-recording span");var l=Gn.wrapSpanContext(S);return l}var b=x_(Object.assign(v,E.attributes)),w=new F9(this,n,e,S,_,h,g,r.startTime,void 0,b);return w},t.prototype.startActiveSpan=function(e,r,n,o){var s,a,c;if(!(arguments.length<2)){arguments.length===2?c=r:arguments.length===3?(s=r,c=n):(s=r,a=n,c=o);var l=a??ts.active(),u=this.startSpan(e,s,l),d=Gn.setSpan(l,u);return ts.with(d,c,void 0,u)}},t.prototype.getGeneralLimits=function(){return this._generalLimits},t.prototype.getSpanLimits=function(){return this._spanLimits},t.prototype.getActiveSpanProcessor=function(){return this._tracerProvider.getActiveSpanProcessor()},t})()});var S3e=q(()=>{});var b3e=q(()=>{S3e()});var w9t,I9t,P9t,R9t,C3e,ere,tre,rre,A3e=q(()=>{w9t="service.name",I9t="telemetry.sdk.name",P9t="telemetry.sdk.language",R9t="telemetry.sdk.version",C3e=w9t,ere=I9t,tre=P9t,rre=R9t});var x3e=q(()=>{A3e()});var w3e=q(()=>{});var I3e=q(()=>{});var P3e=q(()=>{b3e();x3e();w3e();I3e()});function z9(){return"unknown_service:"+process.argv0}var R3e=q(()=>{});var O3e=q(()=>{R3e()});var M3e=q(()=>{O3e()});var P_,O9t,M9t,N9t,W9,N3e=q(()=>{Ht();P3e();wc();M3e();P_=function(){return P_=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},P_.apply(this,arguments)},O9t=function(t,e,r,n){function o(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function c(d){try{u(n.next(d))}catch(f){a(f)}}function l(d){try{u(n.throw(d))}catch(f){a(f)}}function u(d){d.done?s(d.value):o(d.value).then(c,l)}u((n=n.apply(t,e||[])).next())})},M9t=function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,o,s,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(u){return function(d){return l([u,d])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(s=u[0]&2?o.return:u[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,u[1])).done)return s;switch(o=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,o=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],o=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},N9t=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,s=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)s.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return s},W9=(function(){function t(e,r){var n=this,o;this._attributes=e,this.asyncAttributesPending=r!=null,this._syncAttributes=(o=this._attributes)!==null&&o!==void 0?o:{},this._asyncAttributesPromise=r?.then(function(s){return n._attributes=Object.assign({},n._attributes,s),n.asyncAttributesPending=!1,s},function(s){return it.debug("a resource's async attributes promise rejected: %s",s),n.asyncAttributesPending=!1,{}})}return t.empty=function(){return t.EMPTY},t.default=function(){var e;return new t((e={},e[C3e]=z9(),e[tre]=w_[tre],e[ere]=w_[ere],e[rre]=w_[rre],e))},Object.defineProperty(t.prototype,"attributes",{get:function(){var e;return this.asyncAttributesPending&&it.error("Accessing resource attributes before async attributes settled"),(e=this._attributes)!==null&&e!==void 0?e:{}},enumerable:!1,configurable:!0}),t.prototype.waitForAsyncAttributes=function(){return O9t(this,void 0,void 0,function(){return M9t(this,function(e){switch(e.label){case 0:return this.asyncAttributesPending?[4,this._asyncAttributesPromise]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},t.prototype.merge=function(e){var r=this,n;if(!e)return this;var o=P_(P_({},this._syncAttributes),(n=e._syncAttributes)!==null&&n!==void 0?n:e.attributes);if(!this._asyncAttributesPromise&&!e._asyncAttributesPromise)return new t(o);var s=Promise.all([this._asyncAttributesPromise,e._asyncAttributesPromise]).then(function(a){var c,l=N9t(a,2),u=l[0],d=l[1];return P_(P_(P_(P_({},r._syncAttributes),u),(c=e._syncAttributes)!==null&&c!==void 0?c:e.attributes),d)});return new t(o,s)},t.EMPTY=new t({}),t})()});var L3e=q(()=>{N3e()});var K9,nre,k3e=q(()=>{wc();K9=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nre=(function(){function t(e){this._spanProcessors=e}return t.prototype.forceFlush=function(){var e,r,n=[];try{for(var o=K9(this._spanProcessors),s=o.next();!s.done;s=o.next()){var a=s.value;n.push(a.forceFlush())}}catch(c){e={error:c}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return new Promise(function(c){Promise.all(n).then(function(){c()}).catch(function(l){Ba(l||new Error("MultiSpanProcessor: forceFlush failed")),c()})})},t.prototype.onStart=function(e,r){var n,o;try{for(var s=K9(this._spanProcessors),a=s.next();!a.done;a=s.next()){var c=a.value;c.onStart(e,r)}}catch(l){n={error:l}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}},t.prototype.onEnd=function(e){var r,n;try{for(var o=K9(this._spanProcessors),s=o.next();!s.done;s=o.next()){var a=s.value;a.onEnd(e)}}catch(c){r={error:c}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}},t.prototype.shutdown=function(){var e,r,n=[];try{for(var o=K9(this._spanProcessors),s=o.next();!s.done;s=o.next()){var a=s.value;n.push(a.shutdown())}}catch(c){e={error:c}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return new Promise(function(c,l){Promise.all(n).then(function(){c()},l)})},t})()});var Y9,ire=q(()=>{Y9=(function(){function t(){}return t.prototype.onStart=function(e,r){},t.prototype.onEnd=function(e){},t.prototype.shutdown=function(){return Promise.resolve()},t.prototype.forceFlush=function(){return Promise.resolve()},t})()});var L9t,k9t,jh,D3e,U3e=q(()=>{Ht();wc();L3e();Xte();Zte();k3e();ire();H9();Jte();L9t=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,s=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)s.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return s},k9t=function(t,e,r){if(r||arguments.length===2)for(var n=0,o=e.length,s;n<o;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))};(function(t){t[t.resolved=0]="resolved",t[t.timeout=1]="timeout",t[t.error=2]="error",t[t.unresolved=3]="unresolved"})(jh||(jh={}));D3e=(function(){function t(e){e===void 0&&(e={});var r,n;this._registeredSpanProcessors=[],this._tracers=new Map;var o=D9({},$9(),h3e(e));if(this.resource=(r=o.resource)!==null&&r!==void 0?r:W9.empty(),o.mergeResourceWithDefaults&&(this.resource=W9.default().merge(this.resource)),this._config=Object.assign({},o,{resource:this.resource}),!((n=e.spanProcessors)===null||n===void 0)&&n.length)this._registeredSpanProcessors=k9t([],L9t(e.spanProcessors),!1),this.activeSpanProcessor=new nre(this._registeredSpanProcessors);else{var s=this._buildExporterFromEnv();if(s!==void 0){var a=new tx(s);this.activeSpanProcessor=a}else this.activeSpanProcessor=new Y9}}return t.prototype.getTracer=function(e,r,n){var o=e+"@"+(r||"")+":"+(n?.schemaUrl||"");return this._tracers.has(o)||this._tracers.set(o,new G9({name:e,version:r,schemaUrl:n?.schemaUrl},this._config,this)),this._tracers.get(o)},t.prototype.addSpanProcessor=function(e){this._registeredSpanProcessors.length===0&&this.activeSpanProcessor.shutdown().catch(function(r){return it.error("Error while trying to shutdown current span processor",r)}),this._registeredSpanProcessors.push(e),this.activeSpanProcessor=new nre(this._registeredSpanProcessors)},t.prototype.getActiveSpanProcessor=function(){return this.activeSpanProcessor},t.prototype.register=function(e){e===void 0&&(e={}),Gn.setGlobalTracerProvider(this),e.propagator===void 0&&(e.propagator=this._buildPropagatorFromEnv()),e.contextManager&&ts.setGlobalContextManager(e.contextManager),e.propagator&&kl.setGlobalPropagator(e.propagator)},t.prototype.forceFlush=function(){var e=this._config.forceFlushTimeoutMillis,r=this._registeredSpanProcessors.map(function(n){return new Promise(function(o){var s,a=setTimeout(function(){o(new Error("Span processor did not completed within timeout period of "+e+" ms")),s=jh.timeout},e);n.forceFlush().then(function(){clearTimeout(a),s!==jh.timeout&&(s=jh.resolved,o(s))}).catch(function(c){clearTimeout(a),s=jh.error,o(c)})})});return new Promise(function(n,o){Promise.all(r).then(function(s){var a=s.filter(function(c){return c!==jh.resolved});a.length>0?o(a):n()}).catch(function(s){return o([s])})})},t.prototype.shutdown=function(){return this.activeSpanProcessor.shutdown()},t.prototype._getPropagator=function(e){var r;return(r=this.constructor._registeredPropagators.get(e))===null||r===void 0?void 0:r()},t.prototype._getSpanExporter=function(e){var r;return(r=this.constructor._registeredExporters.get(e))===null||r===void 0?void 0:r()},t.prototype._buildPropagatorFromEnv=function(){var e=this,r=Array.from(new Set(Iu().OTEL_PROPAGATORS)),n=r.map(function(s){var a=e._getPropagator(s);return a||it.warn('Propagator "'+s+'" requested through environment variable is unavailable.'),a}),o=n.reduce(function(s,a){return a&&s.push(a),s},[]);if(o.length!==0)return r.length===1?o[0]:new R9({propagators:o})},t.prototype._buildExporterFromEnv=function(){var e=Iu().OTEL_TRACES_EXPORTER;if(!(e==="none"||e==="")){var r=this._getSpanExporter(e);return r||it.error('Exporter "'+e+'" requested through environment variable is unavailable.'),r}},t._registeredPropagators=new Map([["tracecontext",function(){return new M9}],["baggage",function(){return new E9}]]),t._registeredExporters=new Map,t})()});var D9t,q3e,F3e=q(()=>{wc();D9t=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},q3e=(function(){function t(){}return t.prototype.export=function(e,r){return this._sendSpans(e,r)},t.prototype.shutdown=function(){return this._sendSpans([]),this.forceFlush()},t.prototype.forceFlush=function(){return Promise.resolve()},t.prototype._exportInfo=function(e){var r;return{resource:{attributes:e.resource.attributes},instrumentationScope:e.instrumentationLibrary,traceId:e.spanContext().traceId,parentId:e.parentSpanId,traceState:(r=e.spanContext().traceState)===null||r===void 0?void 0:r.serialize(),name:e.name,id:e.spanContext().spanId,kind:e.kind,timestamp:x5(e.startTime),duration:x5(e.duration),attributes:e.attributes,status:e.status,events:e.events,links:e.links}},t.prototype._sendSpans=function(e,r){var n,o;try{for(var s=D9t(e),a=s.next();!a.done;a=s.next()){var c=a.value;console.dir(this._exportInfo(c),{depth:3})}}catch(l){n={error:l}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}if(r)return r({code:Dl.SUCCESS})},t})()});var U9t,q9t,j3e,B3e=q(()=>{wc();U9t=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,s=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)s.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return s},q9t=function(t,e,r){if(r||arguments.length===2)for(var n=0,o=e.length,s;n<o;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))},j3e=(function(){function t(){this._finishedSpans=[],this._stopped=!1}return t.prototype.export=function(e,r){var n;if(this._stopped)return r({code:Dl.FAILED,error:new Error("Exporter has been stopped")});(n=this._finishedSpans).push.apply(n,q9t([],U9t(e),!1)),setTimeout(function(){return r({code:Dl.SUCCESS})},0)},t.prototype.shutdown=function(){return this._stopped=!0,this._finishedSpans=[],this.forceFlush()},t.prototype.forceFlush=function(){return Promise.resolve()},t.prototype.reset=function(){this._finishedSpans=[]},t.prototype.getFinishedSpans=function(){return this._finishedSpans},t})()});var F9t,j9t,$3e,V3e=q(()=>{Ht();wc();F9t=function(t,e,r,n){function o(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function c(d){try{u(n.next(d))}catch(f){a(f)}}function l(d){try{u(n.throw(d))}catch(f){a(f)}}function u(d){d.done?s(d.value):o(d.value).then(c,l)}u((n=n.apply(t,e||[])).next())})},j9t=function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,o,s,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(u){return function(d){return l([u,d])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(s=u[0]&2?o.return:u[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,u[1])).done)return s;switch(o=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,o=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],o=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},$3e=(function(){function t(e){this._exporter=e,this._shutdownOnce=new JA(this._shutdown,this),this._unresolvedExports=new Set}return t.prototype.forceFlush=function(){return F9t(this,void 0,void 0,function(){return j9t(this,function(e){switch(e.label){case 0:return[4,Promise.all(Array.from(this._unresolvedExports))];case 1:return e.sent(),this._exporter.forceFlush?[4,this._exporter.forceFlush()]:[3,3];case 2:e.sent(),e.label=3;case 3:return[2]}})})},t.prototype.onStart=function(e,r){},t.prototype.onEnd=function(e){var r=this,n,o;if(!this._shutdownOnce.isCalled&&(e.spanContext().traceFlags&wi.SAMPLED)!==0){var s=function(){return Gte._export(r._exporter,[e]).then(function(c){var l;c.code!==Dl.SUCCESS&&Ba((l=c.error)!==null&&l!==void 0?l:new Error("SimpleSpanProcessor: span export failed (status "+c+")"))}).catch(function(c){Ba(c)})};if(e.resource.asyncAttributesPending){var a=(o=(n=e.resource).waitForAsyncAttributes)===null||o===void 0?void 0:o.call(n).then(function(){return a!=null&&r._unresolvedExports.delete(a),s()},function(c){return Ba(c)});a!=null&&this._unresolvedExports.add(a)}else s()}},t.prototype.shutdown=function(){return this._shutdownOnce.call()},t.prototype._shutdown=function(){return this._exporter.shutdown()},t})()});var H3e={};Xs(H3e,{AlwaysOffSampler:()=>I_,AlwaysOnSampler:()=>N0,BasicTracerProvider:()=>D3e,BatchSpanProcessor:()=>tx,ConsoleSpanExporter:()=>q3e,ForceFlushState:()=>jh,InMemorySpanExporter:()=>j3e,NoopSpanProcessor:()=>Y9,ParentBasedSampler:()=>XA,RandomIdGenerator:()=>rx,SamplingDecision:()=>$d,SimpleSpanProcessor:()=>$3e,Span:()=>F9,TraceIdRatioBasedSampler:()=>L5,Tracer:()=>G9});var G3e=q(()=>{Xte();U3e();H9();F3e();B3e();V3e();ire();j9();B9();Kte();Yte();N5();Wte()});var k5,z3e,ore=q(()=>{k5=class{emit(e){}},z3e=new k5});var sre,Q9,are=q(()=>{ore();sre=class{getLogger(e,r,n){return new k5}},Q9=new sre});var Z9,W3e=q(()=>{ore();Z9=class{constructor(e,r,n,o){this._provider=e,this.name=r,this.version=n,this.options=o}emit(e){this._getLogger().emit(e)}_getLogger(){if(this._delegate)return this._delegate;let e=this._provider.getDelegateLogger(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):z3e}}});var D5,K3e=q(()=>{are();W3e();D5=class{getLogger(e,r,n){var o;return(o=this.getDelegateLogger(e,r,n))!==null&&o!==void 0?o:new Z9(this,e,r,n)}getDelegate(){var e;return(e=this._delegate)!==null&&e!==void 0?e:Q9}setDelegate(e){this._delegate=e}getDelegateLogger(e,r,n){var o;return(o=this._delegate)===null||o===void 0?void 0:o.getLogger(e,r,n)}}});var J9,Y3e=q(()=>{J9=typeof globalThis=="object"?globalThis:global});var Q3e=q(()=>{Y3e()});var Z3e=q(()=>{Q3e()});function J3e(t,e,r){return n=>n===t?e:r}var U5,nx,cre,X3e=q(()=>{Z3e();U5=Symbol.for("io.opentelemetry.js.api.logs"),nx=J9;cre=1});var X9,eLe=q(()=>{X3e();are();K3e();X9=class t{constructor(){this._proxyLoggerProvider=new D5}static getInstance(){return this._instance||(this._instance=new t),this._instance}setGlobalLoggerProvider(e){return nx[U5]?this.getLoggerProvider():(nx[U5]=J3e(cre,e,Q9),this._proxyLoggerProvider.setDelegate(e),e)}getLoggerProvider(){var e,r;return(r=(e=nx[U5])===null||e===void 0?void 0:e.call(nx,cre))!==null&&r!==void 0?r:this._proxyLoggerProvider}getLogger(e,r,n){return this.getLoggerProvider().getLogger(e,r,n)}disable(){delete nx[U5],this._proxyLoggerProvider=new D5}}});var e7,lre=q(()=>{eLe();e7=X9.getInstance()});function tLe(t,e,r,n){for(let o=0,s=t.length;o<s;o++){let a=t[o];e&&a.setTracerProvider(e),r&&a.setMeterProvider(r),n&&a.setLoggerProvider&&a.setLoggerProvider(n),a.getConfig().enabled||a.enable()}}function rLe(t){t.forEach(e=>e.disable())}var nLe=q(()=>{});function iLe(t){let e=t.tracerProvider||Gn.getTracerProvider(),r=t.meterProvider||pE.getMeterProvider(),n=t.loggerProvider||e7.getLoggerProvider(),o=t.instrumentations?.flat()??[];return tLe(o,e,r,n),()=>{rLe(o)}}var oLe=q(()=>{Ht();lre();nLe()});function dLe(t,e,r){if(!V9t(t))return it.error(`Invalid version: ${t}`),!1;if(!e)return!0;e=e.replace(/([<>=~^]+)\s+/g,"$1");let n=W9t(t);if(!n)return!1;let o=[],s=fLe(n,e,o,r);return s&&!r?.includePrerelease?G9t(n,o):s}function V9t(t){return typeof t=="string"&&uLe.test(t)}function fLe(t,e,r,n){if(e.includes("||")){let o=e.trim().split("||");for(let s of o)if(ure(t,s,r,n))return!0;return!1}else if(e.includes(" - "))e=h7t(e,n);else if(e.includes(" ")){let o=e.trim().replace(/\s{2,}/g," ").split(" ");for(let s of o)if(!ure(t,s,r,n))return!1;return!0}return ure(t,e,r,n)}function ure(t,e,r,n){if(e=z9t(e,n),e.includes(" "))return fLe(t,e,r,n);{let o=K9t(e);return r.push(o),H9t(t,o)}}function H9t(t,e){if(e.invalid)return!1;if(!e.version||fre(e.version))return!0;let r=aLe(t.versionSegments||[],e.versionSegments||[]);if(r===0){let n=t.prereleaseSegments||[],o=e.prereleaseSegments||[];!n.length&&!o.length?r=0:!n.length&&o.length?r=1:n.length&&!o.length?r=-1:r=aLe(n,o)}return $9t[e.op]?.includes(r)}function G9t(t,e){return t.prerelease?e.some(r=>r.prerelease&&r.version===t.version):!0}function z9t(t,e){return t=t.trim(),t=f7t(t,e),t=d7t(t),t=p7t(t,e),t=t.trim(),t}function $a(t){return!t||t.toLowerCase()==="x"||t==="*"}function W9t(t){let e=t.match(uLe);if(!e){it.error(`Invalid version: ${t}`);return}let r=e.groups.version,n=e.groups.prerelease,o=e.groups.build,s=r.split("."),a=n?.split(".");return{op:void 0,version:r,versionSegments:s,versionSegmentCount:s.length,prerelease:n,prereleaseSegments:a,prereleaseSegmentCount:a?a.length:0,build:o}}function K9t(t){if(!t)return{};let e=t.match(B9t);if(!e)return it.error(`Invalid range: ${t}`),{invalid:!0};let r=e.groups.op,n=e.groups.version,o=e.groups.prerelease,s=e.groups.build,a=n.split("."),c=o?.split(".");return r==="=="&&(r="="),{op:r||"=",version:n,versionSegments:a,versionSegmentCount:a.length,prerelease:o,prereleaseSegments:c,prereleaseSegmentCount:c?c.length:0,build:s}}function fre(t){return t==="*"||t==="x"||t==="X"}function sLe(t){let e=parseInt(t,10);return isNaN(e)?t:e}function Y9t(t,e){if(typeof t==typeof e){if(typeof t=="number")return[t,e];if(typeof t=="string")return[t,e];throw new Error("Version segments can only be strings or numbers")}else return[String(t),String(e)]}function Q9t(t,e){if(fre(t)||fre(e))return 0;let[r,n]=Y9t(sLe(t),sLe(e));return r>n?1:r<n?-1:0}function aLe(t,e){for(let r=0;r<Math.max(t.length,e.length);r++){let n=Q9t(t[r]||"0",e[r]||"0");if(n!==0)return n}return 0}function d7t(t){let e=a7t;return t.replace(e,(r,n,o,s,a)=>{let c;return $a(n)?c="":$a(o)?c=`>=${n}.0.0 <${+n+1}.0.0-0`:$a(s)?c=`>=${n}.${o}.0 <${n}.${+o+1}.0-0`:a?c=`>=${n}.${o}.${s}-${a} <${n}.${+o+1}.0-0`:c=`>=${n}.${o}.${s} <${n}.${+o+1}.0-0`,c})}function f7t(t,e){let r=u7t,n=e?.includePrerelease?"-0":"";return t.replace(r,(o,s,a,c,l)=>{let u;return $a(s)?u="":$a(a)?u=`>=${s}.0.0${n} <${+s+1}.0.0-0`:$a(c)?s==="0"?u=`>=${s}.${a}.0${n} <${s}.${+a+1}.0-0`:u=`>=${s}.${a}.0${n} <${+s+1}.0.0-0`:l?s==="0"?a==="0"?u=`>=${s}.${a}.${c}-${l} <${s}.${a}.${+c+1}-0`:u=`>=${s}.${a}.${c}-${l} <${s}.${+a+1}.0-0`:u=`>=${s}.${a}.${c}-${l} <${+s+1}.0.0-0`:s==="0"?a==="0"?u=`>=${s}.${a}.${c}${n} <${s}.${a}.${+c+1}-0`:u=`>=${s}.${a}.${c}${n} <${s}.${+a+1}.0-0`:u=`>=${s}.${a}.${c} <${+s+1}.0.0-0`,u})}function p7t(t,e){let r=r7t;return t.replace(r,(n,o,s,a,c,l)=>{let u=$a(s),d=u||$a(a),f=d||$a(c),p=f;return o==="="&&p&&(o=""),l=e?.includePrerelease?"-0":"",u?o===">"||o==="<"?n="<0.0.0-0":n="*":o&&p?(d&&(a=0),c=0,o===">"?(o=">=",d?(s=+s+1,a=0,c=0):(a=+a+1,c=0)):o==="<="&&(o="<",d?s=+s+1:a=+a+1),o==="<"&&(l="-0"),n=`${o+s}.${a}.${c}${l}`):d?n=`>=${s}.0.0${l} <${+s+1}.0.0-0`:f&&(n=`>=${s}.${a}.0${l} <${s}.${+a+1}.0-0`),n})}function h7t(t,e){let r=i7t;return t.replace(r,(n,o,s,a,c,l,u,d,f,p,h,_)=>($a(s)?o="":$a(a)?o=`>=${s}.0.0${e?.includePrerelease?"-0":""}`:$a(c)?o=`>=${s}.${a}.0${e?.includePrerelease?"-0":""}`:l?o=`>=${o}`:o=`>=${o}${e?.includePrerelease?"-0":""}`,$a(f)?d="":$a(p)?d=`<${+f+1}.0.0-0`:$a(h)?d=`<${f}.${+p+1}.0-0`:_?d=`<=${f}.${p}.${h}-${_}`:e?.includePrerelease?d=`<${f}.${p}.${+h+1}-0`:d=`<=${d}`,`${o} ${d}`.trim()))}var uLe,B9t,$9t,pLe,hLe,Z9t,J9t,cLe,X9t,lLe,e7t,dre,q5,t7t,r7t,n7t,i7t,o7t,s7t,a7t,c7t,l7t,u7t,mLe=q(()=>{Ht();uLe=/^(?:v)?(?<version>(?<major>0|[1-9]\d*)\.(?<minor>0|[1-9]\d*)\.(?<patch>0|[1-9]\d*))(?:-(?<prerelease>(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+(?<build>[0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/,B9t=/^(?<op><|>|=|==|<=|>=|~|\^|~>)?\s*(?:v)?(?<version>(?<major>x|X|\*|0|[1-9]\d*)(?:\.(?<minor>x|X|\*|0|[1-9]\d*))?(?:\.(?<patch>x|X|\*|0|[1-9]\d*))?)(?:-(?<prerelease>(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+(?<build>[0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/,$9t={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1],"!=":[-1,1]};pLe="[a-zA-Z0-9-]",hLe="0|[1-9]\\d*",Z9t=`\\d*[a-zA-Z-]${pLe}*`,J9t="((?:<|>)?=?)",cLe=`(?:${hLe}|${Z9t})`,X9t=`(?:-(${cLe}(?:\\.${cLe})*))`,lLe=`${pLe}+`,e7t=`(?:\\+(${lLe}(?:\\.${lLe})*))`,dre=`${hLe}|x|X|\\*`,q5=`[v=\\s]*(${dre})(?:\\.(${dre})(?:\\.(${dre})(?:${X9t})?${e7t}?)?)?`,t7t=`^${J9t}\\s*${q5}$`,r7t=new RegExp(t7t),n7t=`^\\s*(${q5})\\s+-\\s+(${q5})\\s*$`,i7t=new RegExp(n7t),o7t="(?:~>?)",s7t=`^${o7t}${q5}$`,a7t=new RegExp(s7t),c7t="(?:\\^)",l7t=`^${c7t}${q5}$`,u7t=new RegExp(l7t)});var ix=m((XRn,vLe)=>{"use strict";function pre(t){return typeof t=="function"}var Va=console.error.bind(console);function F5(t,e,r){var n=!!t[e]&&t.propertyIsEnumerable(e);Object.defineProperty(t,e,{configurable:!0,enumerable:n,writable:!0,value:r})}function j5(t){t&&t.logger&&(pre(t.logger)?Va=t.logger:Va("new logger isn't a function, not replacing"))}function gLe(t,e,r){if(!t||!t[e]){Va("no original function "+e+" to wrap");return}if(!r){Va("no wrapper function"),Va(new Error().stack);return}if(!pre(t[e])||!pre(r)){Va("original object and wrapper must be functions");return}var n=t[e],o=r(n,e);return F5(o,"__original",n),F5(o,"__unwrap",function(){t[e]===o&&F5(t,e,n)}),F5(o,"__wrapped",!0),F5(t,e,o),o}function m7t(t,e,r){if(t)Array.isArray(t)||(t=[t]);else{Va("must provide one or more modules to patch"),Va(new Error().stack);return}if(!(e&&Array.isArray(e))){Va("must provide one or more functions to wrap on modules");return}t.forEach(function(n){e.forEach(function(o){gLe(n,o,r)})})}function _Le(t,e){if(!t||!t[e]){Va("no function to unwrap."),Va(new Error().stack);return}if(!t[e].__unwrap)Va("no original to unwrap to -- has "+e+" already been unwrapped?");else return t[e].__unwrap()}function g7t(t,e){if(t)Array.isArray(t)||(t=[t]);else{Va("must provide one or more modules to patch"),Va(new Error().stack);return}if(!(e&&Array.isArray(e))){Va("must provide one or more functions to unwrap on modules");return}t.forEach(function(r){e.forEach(function(n){_Le(r,n)})})}j5.wrap=gLe;j5.massWrap=m7t;j5.unwrap=_Le;j5.massUnwrap=g7t;vLe.exports=j5});var R_,t7,yLe=q(()=>{Ht();lre();R_=yt(ix()),t7=class{instrumentationName;instrumentationVersion;_config={};_tracer;_meter;_logger;_diag;constructor(e,r,n){this.instrumentationName=e,this.instrumentationVersion=r,this.setConfig(n),this._diag=it.createComponentLogger({namespace:e}),this._tracer=Gn.getTracer(e,r),this._meter=pE.getMeter(e,r),this._logger=e7.getLogger(e,r),this._updateMetricInstruments()}_wrap=R_.wrap;_unwrap=R_.unwrap;_massWrap=R_.massWrap;_massUnwrap=R_.massUnwrap;get meter(){return this._meter}setMeterProvider(e){this._meter=e.getMeter(this.instrumentationName,this.instrumentationVersion),this._updateMetricInstruments()}get logger(){return this._logger}setLoggerProvider(e){this._logger=e.getLogger(this.instrumentationName,this.instrumentationVersion)}getModuleDefinitions(){let e=this.init()??[];return Array.isArray(e)?e:[e]}_updateMetricInstruments(){}getConfig(){return this._config}setConfig(e){this._config={enabled:!0,...e}}setTracerProvider(e){this._tracer=e.getTracer(this.instrumentationName,this.instrumentationVersion)}get tracer(){return this._tracer}_runSpanCustomizationHook(e,r,n,o){if(e)try{e(n,o)}catch(s){this._diag.error("Error running span customization hook due to exception in handler",{triggerName:r},s)}}}});var TLe=m((nOn,ELe)=>{var ox=1e3,sx=ox*60,ax=sx*60,_E=ax*24,_7t=_E*7,v7t=_E*365.25;ELe.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return y7t(t);if(r==="number"&&isFinite(t))return e.long?T7t(t):E7t(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function y7t(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*v7t;case"weeks":case"week":case"w":return r*_7t;case"days":case"day":case"d":return r*_E;case"hours":case"hour":case"hrs":case"hr":case"h":return r*ax;case"minutes":case"minute":case"mins":case"min":case"m":return r*sx;case"seconds":case"second":case"secs":case"sec":case"s":return r*ox;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function E7t(t){var e=Math.abs(t);return e>=_E?Math.round(t/_E)+"d":e>=ax?Math.round(t/ax)+"h":e>=sx?Math.round(t/sx)+"m":e>=ox?Math.round(t/ox)+"s":t+"ms"}function T7t(t){var e=Math.abs(t);return e>=_E?r7(t,e,_E,"day"):e>=ax?r7(t,e,ax,"hour"):e>=sx?r7(t,e,sx,"minute"):e>=ox?r7(t,e,ox,"second"):t+" ms"}function r7(t,e,r,n){var o=e>=r*1.5;return Math.round(t/r)+" "+n+(o?"s":"")}});var hre=m((iOn,SLe)=>{function S7t(t){r.debug=r,r.default=r,r.coerce=l,r.disable=a,r.enable=o,r.enabled=c,r.humanize=TLe(),r.destroy=u,Object.keys(t).forEach(d=>{r[d]=t[d]}),r.names=[],r.skips=[],r.formatters={};function e(d){let f=0;for(let p=0;p<d.length;p++)f=(f<<5)-f+d.charCodeAt(p),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=e;function r(d){let f,p=null,h,_;function g(...v){if(!g.enabled)return;let E=g,y=Number(new Date),S=y-(f||y);E.diff=S,E.prev=f,E.curr=y,f=y,v[0]=r.coerce(v[0]),typeof v[0]!="string"&&v.unshift("%O");let b=0;v[0]=v[0].replace(/%([a-zA-Z%])/g,(P,A)=>{if(P==="%%")return"%";b++;let O=r.formatters[A];if(typeof O=="function"){let L=v[b];P=O.call(E,L),v.splice(b,1),b--}return P}),r.formatArgs.call(E,v),(E.log||r.log).apply(E,v)}return g.namespace=d,g.useColors=r.useColors(),g.color=r.selectColor(d),g.extend=n,g.destroy=r.destroy,Object.defineProperty(g,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(h!==r.namespaces&&(h=r.namespaces,_=r.enabled(d)),_),set:v=>{p=v}}),typeof r.init=="function"&&r.init(g),g}function n(d,f){let p=r(this.namespace+(typeof f>"u"?":":f)+d);return p.log=this.log,p}function o(d){r.save(d),r.namespaces=d,r.names=[],r.skips=[];let f=(typeof d=="string"?d:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let p of f)p[0]==="-"?r.skips.push(p.slice(1)):r.names.push(p)}function s(d,f){let p=0,h=0,_=-1,g=0;for(;p<d.length;)if(h<f.length&&(f[h]===d[p]||f[h]==="*"))f[h]==="*"?(_=h,g=p,h++):(p++,h++);else if(_!==-1)h=_+1,g++,p=g;else return!1;for(;h<f.length&&f[h]==="*";)h++;return h===f.length}function a(){let d=[...r.names,...r.skips.map(f=>"-"+f)].join(",");return r.enable(""),d}function c(d){for(let f of r.skips)if(s(d,f))return!1;for(let f of r.names)if(s(d,f))return!0;return!1}function l(d){return d instanceof Error?d.stack||d.message:d}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}SLe.exports=S7t});var bLe=m((Ic,n7)=>{Ic.formatArgs=C7t;Ic.save=A7t;Ic.load=x7t;Ic.useColors=b7t;Ic.storage=w7t();Ic.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Ic.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function b7t(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function C7t(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+n7.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,o=>{o!=="%%"&&(r++,o==="%c"&&(n=r))}),t.splice(n,0,e)}Ic.log=console.debug||console.log||(()=>{});function A7t(t){try{t?Ic.storage.setItem("debug",t):Ic.storage.removeItem("debug")}catch{}}function x7t(){let t;try{t=Ic.storage.getItem("debug")||Ic.storage.getItem("DEBUG")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function w7t(){try{return localStorage}catch{}}n7.exports=hre()(Ic);var{formatters:I7t}=n7.exports;I7t.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var ALe=m((oOn,CLe)=>{"use strict";CLe.exports=(t,e=process.argv)=>{let r=t.startsWith("-")?"":t.length===1?"-":"--",n=e.indexOf(r+t),o=e.indexOf("--");return n!==-1&&(o===-1||n<o)}});var ILe=m((sOn,wLe)=>{"use strict";var P7t=require("os"),xLe=require("tty"),Ru=ALe(),{env:rs}=process,O_;Ru("no-color")||Ru("no-colors")||Ru("color=false")||Ru("color=never")?O_=0:(Ru("color")||Ru("colors")||Ru("color=true")||Ru("color=always"))&&(O_=1);"FORCE_COLOR"in rs&&(rs.FORCE_COLOR==="true"?O_=1:rs.FORCE_COLOR==="false"?O_=0:O_=rs.FORCE_COLOR.length===0?1:Math.min(parseInt(rs.FORCE_COLOR,10),3));function mre(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function gre(t,e){if(O_===0)return 0;if(Ru("color=16m")||Ru("color=full")||Ru("color=truecolor"))return 3;if(Ru("color=256"))return 2;if(t&&!e&&O_===void 0)return 0;let r=O_||0;if(rs.TERM==="dumb")return r;if(process.platform==="win32"){let n=P7t.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in rs)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in rs)||rs.CI_NAME==="codeship"?1:r;if("TEAMCITY_VERSION"in rs)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(rs.TEAMCITY_VERSION)?1:0;if(rs.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in rs){let n=parseInt((rs.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(rs.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(rs.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(rs.TERM)||"COLORTERM"in rs?1:r}function R7t(t){let e=gre(t,t&&t.isTTY);return mre(e)}wLe.exports={supportsColor:R7t,stdout:mre(gre(!0,xLe.isatty(1))),stderr:mre(gre(!0,xLe.isatty(2)))}});var RLe=m((ns,o7)=>{var O7t=require("tty"),i7=require("util");ns.init=q7t;ns.log=k7t;ns.formatArgs=N7t;ns.save=D7t;ns.load=U7t;ns.useColors=M7t;ns.destroy=i7.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");ns.colors=[6,2,3,4,5,1];try{let t=ILe();t&&(t.stderr||t).level>=2&&(ns.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}ns.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(o,s)=>s.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function M7t(){return"colors"in ns.inspectOpts?!!ns.inspectOpts.colors:O7t.isatty(process.stderr.fd)}function N7t(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,o="\x1B[3"+(n<8?n:"8;5;"+n),s=`  ${o};1m${e} \x1B[0m`;t[0]=s+t[0].split(`
`).join(`
`+s),t.push(o+"m+"+o7.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=L7t()+e+" "+t[0]}function L7t(){return ns.inspectOpts.hideDate?"":new Date().toISOString()+" "}function k7t(...t){return process.stderr.write(i7.formatWithOptions(ns.inspectOpts,...t)+`
`)}function D7t(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function U7t(){return process.env.DEBUG}function q7t(t){t.inspectOpts={};let e=Object.keys(ns.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=ns.inspectOpts[e[r]]}o7.exports=hre()(ns);var{formatters:PLe}=o7.exports;PLe.o=function(t){return this.inspectOpts.colors=this.useColors,i7.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};PLe.O=function(t){return this.inspectOpts.colors=this.useColors,i7.inspect(t,this.inspectOpts)}});var B5=m((aOn,_re)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?_re.exports=bLe():_re.exports=RLe()});var yre=m((cOn,OLe)=>{"use strict";var vre=require("path").sep;OLe.exports=function(t){var e=t.split(vre),r=e.lastIndexOf("node_modules");if(r!==-1&&e[r+1]){for(var n=e[r+1][0]==="@",o=n?e[r+1]+"/"+e[r+2]:e[r+1],s=n?3:2,a="",c=r+s-1,l=0;l<=c;l++)l===c?a+=e[l]:a+=e[l]+vre;for(var u="",d=e.length-1,f=r+s;f<=d;f++)f===d?u+=e[f]:u+=e[f]+vre;return{name:o,basedir:a,path:u}}}});var Ere=m((lOn,MLe)=>{"use strict";var F7t=require("os");MLe.exports=F7t.homedir||function(){var e=process.env.HOME,r=process.env.LOGNAME||process.env.USER||process.env.LNAME||process.env.USERNAME;return process.platform==="win32"?process.env.USERPROFILE||process.env.HOMEDRIVE+process.env.HOMEPATH||e||null:process.platform==="darwin"?e||(r?"/Users/"+r:null):process.platform==="linux"?e||(process.getuid()===0?"/root":r?"/home/"+r:null):e||null}});var Tre=m((uOn,NLe)=>{NLe.exports=function(){var t=Error.prepareStackTrace;Error.prepareStackTrace=function(r,n){return n};var e=new Error().stack;return Error.prepareStackTrace=t,e[2].getFileName()}});var LLe=m((dOn,$5)=>{"use strict";var j7t=process.platform==="win32",B7t=/^(((?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?[\\\/]?)(?:[^\\\/]*[\\\/])*)((\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))[\\\/]*$/,Sre={};function $7t(t){return B7t.exec(t).slice(1)}Sre.parse=function(t){if(typeof t!="string")throw new TypeError("Parameter 'pathString' must be a string, not "+typeof t);var e=$7t(t);if(!e||e.length!==5)throw new TypeError("Invalid path '"+t+"'");return{root:e[1],dir:e[0]===e[1]?e[0]:e[0].slice(0,-1),base:e[2],ext:e[4],name:e[3]}};var V7t=/^((\/?)(?:[^\/]*\/)*)((\.{1,2}|[^\/]+?|)(\.[^.\/]*|))[\/]*$/,bre={};function H7t(t){return V7t.exec(t).slice(1)}bre.parse=function(t){if(typeof t!="string")throw new TypeError("Parameter 'pathString' must be a string, not "+typeof t);var e=H7t(t);if(!e||e.length!==5)throw new TypeError("Invalid path '"+t+"'");return{root:e[1],dir:e[0].slice(0,-1),base:e[2],ext:e[4],name:e[3]}};j7t?$5.exports=Sre.parse:$5.exports=bre.parse;$5.exports.posix=bre.parse;$5.exports.win32=Sre.parse});var Cre=m((fOn,qLe)=>{var ULe=require("path"),kLe=ULe.parse||LLe(),G7t=/^([A-Za-z]:)/,z7t=/^\\\\/,DLe=function(e,r){var n="/";G7t.test(e)?n="":z7t.test(e)&&(n="\\\\");for(var o=[e],s=kLe(e);s.dir!==o[o.length-1];)o.push(s.dir),s=kLe(s.dir);return o.reduce(function(a,c){return a.concat(r.map(function(l){return ULe.resolve(n,c,l)}))},[])};qLe.exports=function(e,r,n){var o=r&&r.moduleDirectory?[].concat(r.moduleDirectory):["node_modules"];if(r&&typeof r.paths=="function")return r.paths(n,e,function(){return DLe(e,o)},r);var s=DLe(e,o);return r&&r.paths?s.concat(r.paths):s}});var Are=m((pOn,FLe)=>{FLe.exports=function(t,e){return e||{}}});var $Le=m((hOn,BLe)=>{"use strict";var W7t="Function.prototype.bind called on incompatible ",K7t=Object.prototype.toString,Y7t=Math.max,Q7t="[object Function]",jLe=function(e,r){for(var n=[],o=0;o<e.length;o+=1)n[o]=e[o];for(var s=0;s<r.length;s+=1)n[s+e.length]=r[s];return n},Z7t=function(e,r){for(var n=[],o=r||0,s=0;o<e.length;o+=1,s+=1)n[s]=e[o];return n},J7t=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r};BLe.exports=function(e){var r=this;if(typeof r!="function"||K7t.apply(r)!==Q7t)throw new TypeError(W7t+r);for(var n=Z7t(arguments,1),o,s=function(){if(this instanceof o){var d=r.apply(this,jLe(n,arguments));return Object(d)===d?d:this}return r.apply(e,jLe(n,arguments))},a=Y7t(0,r.length-n.length),c=[],l=0;l<a;l++)c[l]="$"+l;if(o=Function("binder","return function ("+J7t(c,",")+"){ return binder.apply(this,arguments); }")(s),r.prototype){var u=function(){};u.prototype=r.prototype,o.prototype=new u,u.prototype=null}return o}});var HLe=m((mOn,VLe)=>{"use strict";var X7t=$Le();VLe.exports=Function.prototype.bind||X7t});var zLe=m((gOn,GLe)=>{"use strict";var eUt=Function.prototype.call,tUt=Object.prototype.hasOwnProperty,rUt=HLe();GLe.exports=rUt.call(eUt,tUt)});var WLe=m((_On,nUt)=>{nUt.exports={assert:!0,"node:assert":[">= 14.18 && < 15",">= 16"],"assert/strict":">= 15","node:assert/strict":">= 16",async_hooks:">= 8","node:async_hooks":[">= 14.18 && < 15",">= 16"],buffer_ieee754:">= 0.5 && < 0.9.7",buffer:!0,"node:buffer":[">= 14.18 && < 15",">= 16"],child_process:!0,"node:child_process":[">= 14.18 && < 15",">= 16"],cluster:">= 0.5","node:cluster":[">= 14.18 && < 15",">= 16"],console:!0,"node:console":[">= 14.18 && < 15",">= 16"],constants:!0,"node:constants":[">= 14.18 && < 15",">= 16"],crypto:!0,"node:crypto":[">= 14.18 && < 15",">= 16"],_debug_agent:">= 1 && < 8",_debugger:"< 8",dgram:!0,"node:dgram":[">= 14.18 && < 15",">= 16"],diagnostics_channel:[">= 14.17 && < 15",">= 15.1"],"node:diagnostics_channel":[">= 14.18 && < 15",">= 16"],dns:!0,"node:dns":[">= 14.18 && < 15",">= 16"],"dns/promises":">= 15","node:dns/promises":">= 16",domain:">= 0.7.12","node:domain":[">= 14.18 && < 15",">= 16"],events:!0,"node:events":[">= 14.18 && < 15",">= 16"],freelist:"< 6",fs:!0,"node:fs":[">= 14.18 && < 15",">= 16"],"fs/promises":[">= 10 && < 10.1",">= 14"],"node:fs/promises":[">= 14.18 && < 15",">= 16"],_http_agent:">= 0.11.1","node:_http_agent":[">= 14.18 && < 15",">= 16"],_http_client:">= 0.11.1","node:_http_client":[">= 14.18 && < 15",">= 16"],_http_common:">= 0.11.1","node:_http_common":[">= 14.18 && < 15",">= 16"],_http_incoming:">= 0.11.1","node:_http_incoming":[">= 14.18 && < 15",">= 16"],_http_outgoing:">= 0.11.1","node:_http_outgoing":[">= 14.18 && < 15",">= 16"],_http_server:">= 0.11.1","node:_http_server":[">= 14.18 && < 15",">= 16"],http:!0,"node:http":[">= 14.18 && < 15",">= 16"],http2:">= 8.8","node:http2":[">= 14.18 && < 15",">= 16"],https:!0,"node:https":[">= 14.18 && < 15",">= 16"],inspector:">= 8","node:inspector":[">= 14.18 && < 15",">= 16"],"inspector/promises":[">= 19"],"node:inspector/promises":[">= 19"],_linklist:"< 8",module:!0,"node:module":[">= 14.18 && < 15",">= 16"],net:!0,"node:net":[">= 14.18 && < 15",">= 16"],"node-inspect/lib/_inspect":">= 7.6 && < 12","node-inspect/lib/internal/inspect_client":">= 7.6 && < 12","node-inspect/lib/internal/inspect_repl":">= 7.6 && < 12",os:!0,"node:os":[">= 14.18 && < 15",">= 16"],path:!0,"node:path":[">= 14.18 && < 15",">= 16"],"path/posix":">= 15.3","node:path/posix":">= 16","path/win32":">= 15.3","node:path/win32":">= 16",perf_hooks:">= 8.5","node:perf_hooks":[">= 14.18 && < 15",">= 16"],process:">= 1","node:process":[">= 14.18 && < 15",">= 16"],punycode:">= 0.5","node:punycode":[">= 14.18 && < 15",">= 16"],querystring:!0,"node:querystring":[">= 14.18 && < 15",">= 16"],readline:!0,"node:readline":[">= 14.18 && < 15",">= 16"],"readline/promises":">= 17","node:readline/promises":">= 17",repl:!0,"node:repl":[">= 14.18 && < 15",">= 16"],"node:sea":[">= 20.12 && < 21",">= 21.7"],smalloc:">= 0.11.5 && < 3","node:sqlite":[">= 22.13 && < 23",">= 23.4"],_stream_duplex:">= 0.9.4","node:_stream_duplex":[">= 14.18 && < 15",">= 16"],_stream_transform:">= 0.9.4","node:_stream_transform":[">= 14.18 && < 15",">= 16"],_stream_wrap:">= 1.4.1","node:_stream_wrap":[">= 14.18 && < 15",">= 16"],_stream_passthrough:">= 0.9.4","node:_stream_passthrough":[">= 14.18 && < 15",">= 16"],_stream_readable:">= 0.9.4","node:_stream_readable":[">= 14.18 && < 15",">= 16"],_stream_writable:">= 0.9.4","node:_stream_writable":[">= 14.18 && < 15",">= 16"],stream:!0,"node:stream":[">= 14.18 && < 15",">= 16"],"stream/consumers":">= 16.7","node:stream/consumers":">= 16.7","stream/promises":">= 15","node:stream/promises":">= 16","stream/web":">= 16.5","node:stream/web":">= 16.5",string_decoder:!0,"node:string_decoder":[">= 14.18 && < 15",">= 16"],sys:[">= 0.4 && < 0.7",">= 0.8"],"node:sys":[">= 14.18 && < 15",">= 16"],"test/reporters":">= 19.9 && < 20.2","node:test/reporters":[">= 18.17 && < 19",">= 19.9",">= 20"],"test/mock_loader":">= 22.3 && < 22.7","node:test/mock_loader":">= 22.3 && < 22.7","node:test":[">= 16.17 && < 17",">= 18"],timers:!0,"node:timers":[">= 14.18 && < 15",">= 16"],"timers/promises":">= 15","node:timers/promises":">= 16",_tls_common:">= 0.11.13","node:_tls_common":[">= 14.18 && < 15",">= 16"],_tls_legacy:">= 0.11.3 && < 10",_tls_wrap:">= 0.11.3","node:_tls_wrap":[">= 14.18 && < 15",">= 16"],tls:!0,"node:tls":[">= 14.18 && < 15",">= 16"],trace_events:">= 10","node:trace_events":[">= 14.18 && < 15",">= 16"],tty:!0,"node:tty":[">= 14.18 && < 15",">= 16"],url:!0,"node:url":[">= 14.18 && < 15",">= 16"],util:!0,"node:util":[">= 14.18 && < 15",">= 16"],"util/types":">= 15.3","node:util/types":">= 16","v8/tools/arguments":">= 10 && < 12","v8/tools/codemap":[">= 4.4 && < 5",">= 5.2 && < 12"],"v8/tools/consarray":[">= 4.4 && < 5",">= 5.2 && < 12"],"v8/tools/csvparser":[">= 4.4 && < 5",">= 5.2 && < 12"],"v8/tools/logreader":[">= 4.4 && < 5",">= 5.2 && < 12"],"v8/tools/profile_view":[">= 4.4 && < 5",">= 5.2 && < 12"],"v8/tools/splaytree":[">= 4.4 && < 5",">= 5.2 && < 12"],v8:">= 1","node:v8":[">= 14.18 && < 15",">= 16"],vm:!0,"node:vm":[">= 14.18 && < 15",">= 16"],wasi:[">= 13.4 && < 13.5",">= 18.17 && < 19",">= 20"],"node:wasi":[">= 18.17 && < 19",">= 20"],worker_threads:">= 11.7","node:worker_threads":[">= 14.18 && < 15",">= 16"],zlib:">= 0.5","node:zlib":[">= 14.18 && < 15",">= 16"]}});var V5=m((vOn,QLe)=>{"use strict";var iUt=zLe();function oUt(t,e){for(var r=t.split("."),n=e.split(" "),o=n.length>1?n[0]:"=",s=(n.length>1?n[1]:n[0]).split("."),a=0;a<3;++a){var c=parseInt(r[a]||0,10),l=parseInt(s[a]||0,10);if(c!==l)return o==="<"?c<l:o===">="?c>=l:!1}return o===">="}function KLe(t,e){var r=e.split(/ ?&& ?/);if(r.length===0)return!1;for(var n=0;n<r.length;++n)if(!oUt(t,r[n]))return!1;return!0}function sUt(t,e){if(typeof e=="boolean")return e;var r=typeof t>"u"?process.versions&&process.versions.node:t;if(typeof r!="string")throw new TypeError(typeof t>"u"?"Unable to determine current node version":"If provided, a valid node version is required");if(e&&typeof e=="object"){for(var n=0;n<e.length;++n)if(KLe(r,e[n]))return!0;return!1}return KLe(r,e)}var YLe=WLe();QLe.exports=function(e,r){return iUt(YLe,e)&&sUt(r,YLe[e])}});var XLe=m((yOn,JLe)=>{var vE=require("fs"),aUt=Ere(),vo=require("path"),cUt=Tre(),lUt=Cre(),uUt=Are(),dUt=V5(),fUt=process.platform!=="win32"&&vE.realpath&&typeof vE.realpath.native=="function"?vE.realpath.native:vE.realpath,pUt=/^(?:\.\.?(?:\/|$)|\/|([A-Za-z]:)?[/\\])/,hUt=/^\w:[/\\]*$/,mUt=/[/\\]node_modules[/\\]*$/,ZLe=aUt(),gUt=function(){return[vo.join(ZLe,".node_modules"),vo.join(ZLe,".node_libraries")]},_Ut=function(e,r){vE.stat(e,function(n,o){return n?n.code==="ENOENT"||n.code==="ENOTDIR"?r(null,!1):r(n):r(null,o.isFile()||o.isFIFO())})},vUt=function(e,r){vE.stat(e,function(n,o){return n?n.code==="ENOENT"||n.code==="ENOTDIR"?r(null,!1):r(n):r(null,o.isDirectory())})},yUt=function(e,r){fUt(e,function(n,o){n&&n.code!=="ENOENT"?r(n):r(null,n?e:o)})},H5=function(e,r,n,o){n&&n.preserveSymlinks===!1?e(r,o):o(null,r)},EUt=function(e,r,n){e(r,function(o,s){if(o)n(o);else try{var a=JSON.parse(s);n(null,a)}catch{n(null)}})},TUt=function(e,r,n){for(var o=lUt(r,n,e),s=0;s<o.length;s++)o[s]=vo.join(o[s],e);return o};JLe.exports=function(e,r,n){var o=n,s=r;if(typeof r=="function"&&(o=s,s={}),typeof e!="string"){var a=new TypeError("Path must be a string.");return process.nextTick(function(){o(a)})}s=uUt(e,s);var c=s.isFile||_Ut,l=s.isDirectory||vUt,u=s.readFile||vE.readFile,d=s.realpath||yUt,f=s.readPackage||EUt;if(s.readFile&&s.readPackage){var p=new TypeError("`readFile` and `readPackage` are mutually exclusive.");return process.nextTick(function(){o(p)})}var h=s.packageIterator,_=s.extensions||[".js"],g=s.includeCoreModules!==!1,v=s.basedir||vo.dirname(cUt()),E=s.filename||v;s.paths=s.paths||gUt();var y=vo.resolve(v);H5(d,y,s,function($,Q){$?o($):b(Q)});var S;function b($){if(pUt.test(e))S=vo.resolve($,e),(e==="."||e===".."||e.slice(-1)==="/")&&(S+="/"),e.slice(-1)==="/"&&S===$?O(S,s.package,w):P(S,s.package,w);else{if(g&&dUt(e))return o(null,e);j(e,$,function(Q,K,N){if(Q)o(Q);else{if(K)return H5(d,K,s,function(Y,J){Y?o(Y):o(null,J,N)});var G=new Error("Cannot find module '"+e+"' from '"+E+"'");G.code="MODULE_NOT_FOUND",o(G)}})}}function w($,Q,K){$?o($):Q?o(null,Q,K):O(S,function(N,G,Y){if(N)o(N);else if(G)H5(d,G,s,function(ie,oe){ie?o(ie):o(null,oe,Y)});else{var J=new Error("Cannot find module '"+e+"' from '"+E+"'");J.code="MODULE_NOT_FOUND",o(J)}})}function P($,Q,K){var N=Q,G=K;typeof N=="function"&&(G=N,N=void 0);var Y=[""].concat(_);J(Y,$,N);function J(ie,oe,ne){if(ie.length===0)return G(null,void 0,ne);var de=oe+ie[0],Ee=ne;Ee?Me(null,Ee):A(vo.dirname(de),Me);function Me(Je,lt,St){if(Ee=lt,Je)return G(Je);if(St&&Ee&&s.pathFilter){var Dt=vo.relative(St,de),qt=Dt.slice(0,Dt.length-ie[0].length),Nt=s.pathFilter(Ee,oe,qt);if(Nt)return J([""].concat(_.slice()),vo.resolve(St,Nt),Ee)}c(de,He)}function He(Je,lt){if(Je)return G(Je);if(lt)return G(null,de,Ee);J(ie.slice(1),oe,Ee)}}}function A($,Q){if($===""||$==="/"||process.platform==="win32"&&hUt.test($)||mUt.test($))return Q(null);H5(d,$,s,function(K,N){if(K)return A(vo.dirname($),Q);var G=vo.join(N,"package.json");c(G,function(Y,J){if(!J)return A(vo.dirname($),Q);f(u,G,function(ie,oe){ie&&Q(ie);var ne=oe;ne&&s.packageFilter&&(ne=s.packageFilter(ne,G)),Q(null,ne,$)})})})}function O($,Q,K){var N=K,G=Q;typeof G=="function"&&(N=G,G=s.package),H5(d,$,s,function(Y,J){if(Y)return N(Y);var ie=vo.join(J,"package.json");c(ie,function(oe,ne){if(oe)return N(oe);if(!ne)return P(vo.join($,"index"),G,N);f(u,ie,function(de,Ee){if(de)return N(de);var Me=Ee;if(Me&&s.packageFilter&&(Me=s.packageFilter(Me,ie)),Me&&Me.main){if(typeof Me.main!="string"){var He=new TypeError("package \u201C"+Me.name+"\u201D `main` must be a string");return He.code="INVALID_PACKAGE_MAIN",N(He)}(Me.main==="."||Me.main==="./")&&(Me.main="index"),P(vo.resolve($,Me.main),Me,function(Je,lt,St){if(Je)return N(Je);if(lt)return N(null,lt,St);if(!St)return P(vo.join($,"index"),St,N);var Dt=vo.resolve($,St.main);O(Dt,St,function(qt,Nt,D){if(qt)return N(qt);if(Nt)return N(null,Nt,D);P(vo.join($,"index"),D,N)})});return}P(vo.join($,"/index"),Me,N)})})})}function L($,Q){if(Q.length===0)return $(null,void 0);var K=Q[0];l(vo.dirname(K),N);function N(J,ie){if(J)return $(J);if(!ie)return L($,Q.slice(1));P(K,s.package,G)}function G(J,ie,oe){if(J)return $(J);if(ie)return $(null,ie,oe);O(K,s.package,Y)}function Y(J,ie,oe){if(J)return $(J);if(ie)return $(null,ie,oe);L($,Q.slice(1))}}function j($,Q,K){var N=function(){return TUt($,Q,s)};L(K,h?h($,Q,N,s):N())}}});var eke=m((EOn,SUt)=>{SUt.exports={assert:!0,"node:assert":[">= 14.18 && < 15",">= 16"],"assert/strict":">= 15","node:assert/strict":">= 16",async_hooks:">= 8","node:async_hooks":[">= 14.18 && < 15",">= 16"],buffer_ieee754:">= 0.5 && < 0.9.7",buffer:!0,"node:buffer":[">= 14.18 && < 15",">= 16"],child_process:!0,"node:child_process":[">= 14.18 && < 15",">= 16"],cluster:">= 0.5","node:cluster":[">= 14.18 && < 15",">= 16"],console:!0,"node:console":[">= 14.18 && < 15",">= 16"],constants:!0,"node:constants":[">= 14.18 && < 15",">= 16"],crypto:!0,"node:crypto":[">= 14.18 && < 15",">= 16"],_debug_agent:">= 1 && < 8",_debugger:"< 8",dgram:!0,"node:dgram":[">= 14.18 && < 15",">= 16"],diagnostics_channel:[">= 14.17 && < 15",">= 15.1"],"node:diagnostics_channel":[">= 14.18 && < 15",">= 16"],dns:!0,"node:dns":[">= 14.18 && < 15",">= 16"],"dns/promises":">= 15","node:dns/promises":">= 16",domain:">= 0.7.12","node:domain":[">= 14.18 && < 15",">= 16"],events:!0,"node:events":[">= 14.18 && < 15",">= 16"],freelist:"< 6",fs:!0,"node:fs":[">= 14.18 && < 15",">= 16"],"fs/promises":[">= 10 && < 10.1",">= 14"],"node:fs/promises":[">= 14.18 && < 15",">= 16"],_http_agent:">= 0.11.1","node:_http_agent":[">= 14.18 && < 15",">= 16"],_http_client:">= 0.11.1","node:_http_client":[">= 14.18 && < 15",">= 16"],_http_common:">= 0.11.1","node:_http_common":[">= 14.18 && < 15",">= 16"],_http_incoming:">= 0.11.1","node:_http_incoming":[">= 14.18 && < 15",">= 16"],_http_outgoing:">= 0.11.1","node:_http_outgoing":[">= 14.18 && < 15",">= 16"],_http_server:">= 0.11.1","node:_http_server":[">= 14.18 && < 15",">= 16"],http:!0,"node:http":[">= 14.18 && < 15",">= 16"],http2:">= 8.8","node:http2":[">= 14.18 && < 15",">= 16"],https:!0,"node:https":[">= 14.18 && < 15",">= 16"],inspector:">= 8","node:inspector":[">= 14.18 && < 15",">= 16"],"inspector/promises":[">= 19"],"node:inspector/promises":[">= 19"],_linklist:"< 8",module:!0,"node:module":[">= 14.18 && < 15",">= 16"],net:!0,"node:net":[">= 14.18 && < 15",">= 16"],"node-inspect/lib/_inspect":">= 7.6 && < 12","node-inspect/lib/internal/inspect_client":">= 7.6 && < 12","node-inspect/lib/internal/inspect_repl":">= 7.6 && < 12",os:!0,"node:os":[">= 14.18 && < 15",">= 16"],path:!0,"node:path":[">= 14.18 && < 15",">= 16"],"path/posix":">= 15.3","node:path/posix":">= 16","path/win32":">= 15.3","node:path/win32":">= 16",perf_hooks:">= 8.5","node:perf_hooks":[">= 14.18 && < 15",">= 16"],process:">= 1","node:process":[">= 14.18 && < 15",">= 16"],punycode:">= 0.5","node:punycode":[">= 14.18 && < 15",">= 16"],querystring:!0,"node:querystring":[">= 14.18 && < 15",">= 16"],readline:!0,"node:readline":[">= 14.18 && < 15",">= 16"],"readline/promises":">= 17","node:readline/promises":">= 17",repl:!0,"node:repl":[">= 14.18 && < 15",">= 16"],"node:sea":[">= 20.12 && < 21",">= 21.7"],smalloc:">= 0.11.5 && < 3","node:sqlite":[">= 22.13 && < 23",">= 23.4"],_stream_duplex:">= 0.9.4","node:_stream_duplex":[">= 14.18 && < 15",">= 16"],_stream_transform:">= 0.9.4","node:_stream_transform":[">= 14.18 && < 15",">= 16"],_stream_wrap:">= 1.4.1","node:_stream_wrap":[">= 14.18 && < 15",">= 16"],_stream_passthrough:">= 0.9.4","node:_stream_passthrough":[">= 14.18 && < 15",">= 16"],_stream_readable:">= 0.9.4","node:_stream_readable":[">= 14.18 && < 15",">= 16"],_stream_writable:">= 0.9.4","node:_stream_writable":[">= 14.18 && < 15",">= 16"],stream:!0,"node:stream":[">= 14.18 && < 15",">= 16"],"stream/consumers":">= 16.7","node:stream/consumers":">= 16.7","stream/promises":">= 15","node:stream/promises":">= 16","stream/web":">= 16.5","node:stream/web":">= 16.5",string_decoder:!0,"node:string_decoder":[">= 14.18 && < 15",">= 16"],sys:[">= 0.4 && < 0.7",">= 0.8"],"node:sys":[">= 14.18 && < 15",">= 16"],"test/reporters":">= 19.9 && < 20.2","node:test/reporters":[">= 18.17 && < 19",">= 19.9",">= 20"],"test/mock_loader":">= 22.3 && < 22.7","node:test/mock_loader":">= 22.3 && < 22.7","node:test":[">= 16.17 && < 17",">= 18"],timers:!0,"node:timers":[">= 14.18 && < 15",">= 16"],"timers/promises":">= 15","node:timers/promises":">= 16",_tls_common:">= 0.11.13","node:_tls_common":[">= 14.18 && < 15",">= 16"],_tls_legacy:">= 0.11.3 && < 10",_tls_wrap:">= 0.11.3","node:_tls_wrap":[">= 14.18 && < 15",">= 16"],tls:!0,"node:tls":[">= 14.18 && < 15",">= 16"],trace_events:">= 10","node:trace_events":[">= 14.18 && < 15",">= 16"],tty:!0,"node:tty":[">= 14.18 && < 15",">= 16"],url:!0,"node:url":[">= 14.18 && < 15",">= 16"],util:!0,"node:util":[">= 14.18 && < 15",">= 16"],"util/types":">= 15.3","node:util/types":">= 16","v8/tools/arguments":">= 10 && < 12","v8/tools/codemap":[">= 4.4 && < 5",">= 5.2 && < 12"],"v8/tools/consarray":[">= 4.4 && < 5",">= 5.2 && < 12"],"v8/tools/csvparser":[">= 4.4 && < 5",">= 5.2 && < 12"],"v8/tools/logreader":[">= 4.4 && < 5",">= 5.2 && < 12"],"v8/tools/profile_view":[">= 4.4 && < 5",">= 5.2 && < 12"],"v8/tools/splaytree":[">= 4.4 && < 5",">= 5.2 && < 12"],v8:">= 1","node:v8":[">= 14.18 && < 15",">= 16"],vm:!0,"node:vm":[">= 14.18 && < 15",">= 16"],wasi:[">= 13.4 && < 13.5",">= 18.17 && < 19",">= 20"],"node:wasi":[">= 18.17 && < 19",">= 20"],worker_threads:">= 11.7","node:worker_threads":[">= 14.18 && < 15",">= 16"],zlib:">= 0.5","node:zlib":[">= 14.18 && < 15",">= 16"]}});var ike=m((TOn,nke)=>{"use strict";var bUt=V5(),tke=eke(),rke={};for(s7 in tke)Object.prototype.hasOwnProperty.call(tke,s7)&&(rke[s7]=bUt(s7));var s7;nke.exports=rke});var ske=m((SOn,oke)=>{var CUt=V5();oke.exports=function(e){return CUt(e)}});var lke=m((bOn,cke)=>{var AUt=V5(),yE=require("fs"),ia=require("path"),xUt=Ere(),wUt=Tre(),IUt=Cre(),PUt=Are(),RUt=process.platform!=="win32"&&yE.realpathSync&&typeof yE.realpathSync.native=="function"?yE.realpathSync.native:yE.realpathSync,OUt=/^(?:\.\.?(?:\/|$)|\/|([A-Za-z]:)?[/\\])/,MUt=/^\w:[/\\]*$/,NUt=/[/\\]node_modules[/\\]*$/,ake=xUt(),LUt=function(){return[ia.join(ake,".node_modules"),ia.join(ake,".node_libraries")]},kUt=function(e){try{var r=yE.statSync(e,{throwIfNoEntry:!1})}catch(n){if(n&&(n.code==="ENOENT"||n.code==="ENOTDIR"))return!1;throw n}return!!r&&(r.isFile()||r.isFIFO())},DUt=function(e){try{var r=yE.statSync(e,{throwIfNoEntry:!1})}catch(n){if(n&&(n.code==="ENOENT"||n.code==="ENOTDIR"))return!1;throw n}return!!r&&r.isDirectory()},UUt=function(e){try{return RUt(e)}catch(r){if(r.code!=="ENOENT")throw r}return e},G5=function(e,r,n){return n&&n.preserveSymlinks===!1?e(r):r},qUt=function(e,r){var n=e(r);try{var o=JSON.parse(n);return o}catch{}},FUt=function(e,r,n){for(var o=IUt(r,n,e),s=0;s<o.length;s++)o[s]=ia.join(o[s],e);return o};cke.exports=function(e,r){if(typeof e!="string")throw new TypeError("Path must be a string.");var n=PUt(e,r),o=n.isFile||kUt,s=n.readFileSync||yE.readFileSync,a=n.isDirectory||DUt,c=n.realpathSync||UUt,l=n.readPackageSync||qUt;if(n.readFileSync&&n.readPackageSync)throw new TypeError("`readFileSync` and `readPackageSync` are mutually exclusive.");var u=n.packageIterator,d=n.extensions||[".js"],f=n.includeCoreModules!==!1,p=n.basedir||ia.dirname(wUt()),h=n.filename||p;n.paths=n.paths||LUt();var _=G5(c,ia.resolve(p),n);if(OUt.test(e)){var g=ia.resolve(_,e);(e==="."||e===".."||e.slice(-1)==="/")&&(g+="/");var v=S(g)||w(g);if(v)return G5(c,v,n)}else{if(f&&AUt(e))return e;var E=P(e,_);if(E)return G5(c,E,n)}var y=new Error("Cannot find module '"+e+"' from '"+h+"'");throw y.code="MODULE_NOT_FOUND",y;function S(A){var O=b(ia.dirname(A));if(O&&O.dir&&O.pkg&&n.pathFilter){var L=ia.relative(O.dir,A),j=n.pathFilter(O.pkg,A,L);j&&(A=ia.resolve(O.dir,j))}if(o(A))return A;for(var $=0;$<d.length;$++){var Q=A+d[$];if(o(Q))return Q}}function b(A){if(!(A===""||A==="/")&&!(process.platform==="win32"&&MUt.test(A))&&!NUt.test(A)){var O=ia.join(G5(c,A,n),"package.json");if(!o(O))return b(ia.dirname(A));var L=l(s,O);return L&&n.packageFilter&&(L=n.packageFilter(L,A)),{pkg:L,dir:A}}}function w(A){var O=ia.join(G5(c,A,n),"/package.json");if(o(O)){try{var L=l(s,O)}catch{}if(L&&n.packageFilter&&(L=n.packageFilter(L,A)),L&&L.main){if(typeof L.main!="string"){var j=new TypeError("package \u201C"+L.name+"\u201D `main` must be a string");throw j.code="INVALID_PACKAGE_MAIN",j}(L.main==="."||L.main==="./")&&(L.main="index");try{var $=S(ia.resolve(A,L.main));if($)return $;var Q=w(ia.resolve(A,L.main));if(Q)return Q}catch{}}}return S(ia.join(A,"/index"))}function P(A,O){for(var L=function(){return FUt(A,O,n)},j=u?u(A,O,L,n):L(),$=0;$<j.length;$++){var Q=j[$];if(a(ia.dirname(Q))){var K=S(Q);if(K)return K;var N=w(Q);if(N)return N}}}}});var xre=m((COn,uke)=>{var a7=XLe();a7.core=ike();a7.isCore=ske();a7.sync=lke();uke.exports=a7});var dke=m((AOn,jUt)=>{jUt.exports={name:"require-in-the-middle",version:"7.5.2",description:"Module to hook into the Node.js require function",main:"index.js",types:"types/index.d.ts",dependencies:{debug:"^4.3.5","module-details-from-path":"^1.0.3",resolve:"^1.22.8"},devDependencies:{"@babel/core":"^7.9.0","@babel/preset-env":"^7.9.5","@babel/preset-typescript":"^7.9.0","@babel/register":"^7.9.0","ipp-printer":"^1.0.0",patterns:"^1.0.3",roundround:"^0.2.0",semver:"^6.3.0",standard:"^14.3.1",tape:"^4.11.0"},scripts:{test:"npm run test:lint && npm run test:tape && npm run test:babel","test:lint":"standard","test:tape":"tape test/*.js","test:babel":"node test/babel/babel-register.js"},repository:{type:"git",url:"git+https://github.com/nodejs/require-in-the-middle.git"},keywords:["require","hook","shim","shimmer","shimming","patch","monkey","monkeypatch","module","load"],files:["types"],author:"Thomas Watson Steen <w@tson.dk> (https://twitter.com/wa7son)",license:"MIT",bugs:{url:"https://github.com/nodejs/require-in-the-middle/issues"},homepage:"https://github.com/nodejs/require-in-the-middle#readme",engines:{node:">=8.6.0"}}});var Rre=m((xOn,Pre)=>{"use strict";var lx=require("path"),Vd=require("module"),eo=B5()("require-in-the-middle"),BUt=yre();Pre.exports=z5;Pre.exports.Hook=z5;var wre,cx;if(Vd.isBuiltin)cx=Vd.isBuiltin;else if(Vd.builtinModules)cx=t=>t.startsWith("node:")?!0:(wre===void 0&&(wre=new Set(Vd.builtinModules)),wre.has(t));else{let t=xre(),[e,r]=process.versions.node.split(".").map(Number);e===8&&r<8?cx=n=>n==="http2"?!0:!!t.core[n]:cx=n=>!!t.core[n]}var c7;function $Ut(t,e){if(!c7)if(require.resolve&&require.resolve.paths)c7=function(r,n){return require.resolve(r,{paths:[n]})};else{let r=xre();c7=function(n,o){return r.sync(n,{basedir:o})}}return c7(t,e)}var VUt=/([/\\]index)?(\.js)?$/,Ire=class{constructor(){this._localCache=new Map,this._kRitmExports=Symbol("RitmExports")}has(e,r){if(this._localCache.has(e))return!0;if(r)return!1;{let n=require.cache[e];return!!(n&&this._kRitmExports in n)}}get(e,r){let n=this._localCache.get(e);if(n!==void 0)return n;if(!r){let o=require.cache[e];return o&&o[this._kRitmExports]}}set(e,r,n){n?this._localCache.set(e,r):e in require.cache?require.cache[e][this._kRitmExports]=r:(eo('non-core module is unexpectedly not in require.cache: "%s"',e),this._localCache.set(e,r))}};function z5(t,e,r){if(!(this instanceof z5))return new z5(t,e,r);if(typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),typeof Vd._resolveFilename!="function"){console.error("Error: Expected Module._resolveFilename to be a function (was: %s) - aborting!",typeof Vd._resolveFilename),console.error("Please report this error as an issue related to Node.js %s at %s",process.version,dke().bugs.url);return}this._cache=new Ire,this._unhooked=!1,this._origRequire=Vd.prototype.require;let n=this,o=new Set,s=e?e.internals===!0:!1,a=Array.isArray(t);eo("registering require hook"),this._require=Vd.prototype.require=function(l){return n._unhooked===!0?(eo("ignoring require call - module is soft-unhooked"),n._origRequire.apply(this,arguments)):c.call(this,arguments,!1)},typeof process.getBuiltinModule=="function"&&(this._origGetBuiltinModule=process.getBuiltinModule,this._getBuiltinModule=process.getBuiltinModule=function(l){return n._unhooked===!0?(eo("ignoring process.getBuiltinModule call - module is soft-unhooked"),n._origGetBuiltinModule.apply(this,arguments)):c.call(this,arguments,!0)});function c(l,u){let d=l[0],f=cx(d),p;if(f){if(p=d,d.startsWith("node:")){let y=d.slice(5);cx(y)&&(p=y)}}else{if(u)return eo("call to process.getBuiltinModule with unknown built-in id"),n._origGetBuiltinModule.apply(this,l);try{p=Vd._resolveFilename(d,this)}catch(y){return eo('Module._resolveFilename("%s") threw %j, calling original Module.require',d,y.message),n._origRequire.apply(this,l)}}let h,_;if(eo("processing %s module require('%s'): %s",f===!0?"core":"non-core",d,p),n._cache.has(p,f)===!0)return eo("returning already patched cached module: %s",p),n._cache.get(p,f);let g=o.has(p);g===!1&&o.add(p);let v=u?n._origGetBuiltinModule.apply(this,l):n._origRequire.apply(this,l);if(g===!0)return eo("module is in the process of being patched already - ignoring: %s",p),v;if(o.delete(p),f===!0){if(a===!0&&t.includes(p)===!1)return eo("ignoring core module not on whitelist: %s",p),v;h=p}else if(a===!0&&t.includes(p)){let y=lx.parse(p);h=y.name,_=y.dir}else{let y=BUt(p);if(y===void 0)return eo("could not parse filename: %s",p),v;h=y.name,_=y.basedir;let S=HUt(y);eo("resolved filename to module: %s (id: %s, resolved: %s, basedir: %s)",h,d,S,_);let b=!1;if(a){if(!d.startsWith(".")&&t.includes(d)&&(h=d,b=!0),!t.includes(h)&&!t.includes(S))return v;t.includes(S)&&S!==h&&(h=S,b=!0)}if(!b){let w;try{w=$Ut(h,_)}catch{return eo("could not resolve module: %s",h),n._cache.set(p,v,f),v}if(w!==p)if(s===!0)h=h+lx.sep+lx.relative(_,p),eo("preparing to process require of internal file: %s",h);else return eo("ignoring require of non-main module file: %s",w),n._cache.set(p,v,f),v}}n._cache.set(p,v,f),eo("calling require hook: %s",h);let E=r(v,h,_);return n._cache.set(p,E,f),eo("returning module: %s",h),E}}z5.prototype.unhook=function(){this._unhooked=!0,this._require===Vd.prototype.require?(Vd.prototype.require=this._origRequire,eo("require unhook successful")):eo("require unhook unsuccessful"),process.getBuiltinModule!==void 0&&(this._getBuiltinModule===process.getBuiltinModule?(process.getBuiltinModule=this._origGetBuiltinModule,eo("process.getBuiltinModule unhook successful")):eo("process.getBuiltinModule unhook unsuccessful"))};function HUt(t){let e=lx.sep!=="/"?t.path.split(lx.sep).join("/"):t.path;return lx.posix.join(t.name,e).replace(VUt,"")}});var l7,u7,fke=q(()=>{l7=class{hooks=[];children=new Map},u7=class{_trie=new l7;_counter=0;insert(e){let r=this._trie;for(let n of e.moduleName.split("/")){let o=r.children.get(n);o||(o=new l7,r.children.set(n,o)),r=o}r.hooks.push({hook:e,insertedId:this._counter++})}search(e,{maintainInsertionOrder:r,fullOnly:n}={}){let o=this._trie,s=[],a=!0;for(let c of e.split("/")){let l=o.children.get(c);if(!l){a=!1;break}n||s.push(...l.hooks),o=l}return n&&a&&s.push(...o.hooks),s.length===0?[]:s.length===1?[s[0].hook]:(r&&s.sort((c,l)=>c.insertedId-l.insertedId),s.map(({hook:c})=>c))}}});function zUt(t){return Ore.sep!=="/"?t.split(Ore.sep).join("/"):t}var hke,Ore,GUt,d7,mke=q(()=>{hke=yt(Rre()),Ore=yt(require("path"));fke();GUt=["afterEach","after","beforeEach","before","describe","it"].every(t=>typeof global[t]=="function"),d7=class t{_moduleNameTrie=new u7;static _instance;constructor(){this._initialize()}_initialize(){new hke.Hook(null,{internals:!0},(e,r,n)=>{let o=zUt(r),s=this._moduleNameTrie.search(o,{maintainInsertionOrder:!0,fullOnly:n===void 0});for(let{onRequire:a}of s)e=a(e,r,n);return e})}register(e,r){let n={moduleName:e,onRequire:r};return this._moduleNameTrie.insert(n),n}static getInstance(){return GUt?new t:this._instance=this._instance??new t}}});var Tke=m(EE=>{var gke=[],Mre=new WeakMap,_ke=new WeakMap,vke=new Map,yke=[],WUt={set(t,e,r){return Mre.get(t)[e](r)},get(t,e){if(e===Symbol.toStringTag)return"Module";let r=_ke.get(t)[e];if(typeof r=="function")return r()},defineProperty(t,e,r){if(!("value"in r))throw new Error("Getters/setters are not supported for exports property descriptors.");return Mre.get(t)[e](r.value)}};function KUt(t,e,r,n,o){vke.set(t,o),Mre.set(e,r),_ke.set(e,n);let s=new Proxy(e,WUt);gke.forEach(a=>a(t,s)),yke.push([t,s])}var Eke=!1;function YUt(){return Eke}function QUt(t){Eke=t}EE.register=KUt;EE.importHooks=gke;EE.specifiers=vke;EE.toHook=yke;EE.getExperimentalPatchInternals=YUt;EE.setExperimentalPatchInternals=QUt});var wke=m((OOn,ux)=>{var Ske=require("path"),ZUt=yre(),{fileURLToPath:bke}=require("url"),{MessageChannel:JUt}=require("worker_threads"),{importHooks:Nre,specifiers:XUt,toHook:eqt,getExperimentalPatchInternals:tqt}=Tke();function Ake(t){Nre.push(t),eqt.forEach(([e,r])=>t(e,r))}function xke(t){let e=Nre.indexOf(t);e>-1&&Nre.splice(e,1)}function Cke(t,e,r,n){let o=t(e,r,n);o&&o!==e&&(e.default=o)}var Lre;function rqt(){let{port1:t,port2:e}=new JUt,r=0,n;Lre=c=>{r++,t.postMessage(c)},t.on("message",()=>{r--,n&&r<=0&&n()}).unref();function o(){let c=setInterval(()=>{},1e3),l=new Promise(u=>{n=u}).then(()=>{clearInterval(c)});return r===0&&n(),l}let s=e;return{registerOptions:{data:{addHookMessagePort:s,include:[]},transferList:[s]},addHookMessagePort:s,waitForAllMessagesAcknowledged:o}}function W5(t,e,r){if(!(this instanceof W5))return new W5(t,e,r);typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null);let n=e?e.internals===!0:!1;Lre&&Array.isArray(t)&&Lre(t),this._iitmHook=(o,s)=>{let a=o,c=o.startsWith("node:"),l;if(c)o=o.replace(/^node:/,"");else{if(o.startsWith("file://"))try{o=bke(o)}catch{}let u=ZUt(o);u&&(o=u.name,l=u.basedir)}if(t){for(let u of t)if(u===o){if(l){if(n)o=o+Ske.sep+Ske.relative(l,bke(a));else if(!tqt()&&!l.endsWith(XUt.get(a)))continue}Cke(r,s,o,l)}}else Cke(r,s,o,l)},Ake(this._iitmHook)}W5.prototype.unhook=function(){xke(this._iitmHook)};ux.exports=W5;ux.exports.Hook=W5;ux.exports.addHook=Ake;ux.exports.removeHook=xke;ux.exports.createAddHookMessageChannel=rqt});function Ike(t,e,r){let n,o;try{o=t()}catch(s){n=s}finally{if(e(n,o),n&&!r)throw n;return o}}async function Pke(t,e,r){let n,o;try{o=await t()}catch(s){n=s}finally{if(e(n,o),n&&!r)throw n;return o}}function f7(t){return typeof t=="function"&&typeof t.__original=="function"&&typeof t.__unwrap=="function"&&t.__wrapped===!0}var kre=q(()=>{});function Rke(t,e,r){return typeof e>"u"?t.includes("*"):t.some(n=>dLe(e,n,{includePrerelease:r}))}var Bh,Dre,K5,Oke,Mke,Nke,dx,Lke=q(()=>{Bh=yt(require("path")),Dre=require("util");mLe();K5=yt(ix());yLe();mke();Oke=yt(wke());Ht();Mke=yt(Rre()),Nke=require("fs");kre();dx=class extends t7{_modules;_hooks=[];_requireInTheMiddleSingleton=d7.getInstance();_enabled=!1;constructor(e,r,n){super(e,r,n);let o=this.init();o&&!Array.isArray(o)&&(o=[o]),this._modules=o||[],this._config.enabled&&this.enable()}_wrap=(e,r,n)=>{if(f7(e[r])&&this._unwrap(e,r),Dre.types.isProxy(e)){let o=(0,K5.wrap)(Object.assign({},e),r,n);return Object.defineProperty(e,r,{value:o}),o}else return(0,K5.wrap)(e,r,n)};_unwrap=(e,r)=>Dre.types.isProxy(e)?Object.defineProperty(e,r,{value:e[r]}):(0,K5.unwrap)(e,r);_massWrap=(e,r,n)=>{if(e)Array.isArray(e)||(e=[e]);else{it.error("must provide one or more modules to patch");return}if(!(r&&Array.isArray(r))){it.error("must provide one or more functions to wrap on modules");return}e.forEach(o=>{r.forEach(s=>{this._wrap(o,s,n)})})};_massUnwrap=(e,r)=>{if(e)Array.isArray(e)||(e=[e]);else{it.error("must provide one or more modules to patch");return}if(!(r&&Array.isArray(r))){it.error("must provide one or more functions to wrap on modules");return}e.forEach(n=>{r.forEach(o=>{this._unwrap(n,o)})})};_warnOnPreloadedModules(){this._modules.forEach(e=>{let{name:r}=e;try{let n=require.resolve(r);require.cache[n]&&this._diag.warn(`Module ${r} has been loaded before ${this.instrumentationName} so it might not work, please initialize it before requiring ${r}`)}catch{}})}_extractPackageVersion(e){try{let r=(0,Nke.readFileSync)(Bh.join(e,"package.json"),{encoding:"utf8"}),n=JSON.parse(r).version;return typeof n=="string"?n:void 0}catch{it.warn("Failed extracting version",e)}}_onRequire(e,r,n,o){if(!o)return typeof e.patch=="function"&&(e.moduleExports=r,this._enabled)?(this._diag.debug("Applying instrumentation patch for nodejs core module on require hook",{module:e.name}),e.patch(r)):r;let s=this._extractPackageVersion(o);if(e.moduleVersion=s,e.name===n)return Rke(e.supportedVersions,s,e.includePrerelease)&&typeof e.patch=="function"&&(e.moduleExports=r,this._enabled)?(this._diag.debug("Applying instrumentation patch for module on require hook",{module:e.name,version:e.moduleVersion,baseDir:o}),e.patch(r,e.moduleVersion)):r;let a=e.files??[],c=Bh.normalize(n);return a.filter(u=>u.name===c).filter(u=>Rke(u.supportedVersions,s,e.includePrerelease)).reduce((u,d)=>(d.moduleExports=u,this._enabled?(this._diag.debug("Applying instrumentation patch for nodejs module file on require hook",{module:e.name,version:e.moduleVersion,fileName:d.name,baseDir:o}),d.patch(u,e.moduleVersion)):u),r)}enable(){if(!this._enabled){if(this._enabled=!0,this._hooks.length>0){for(let e of this._modules){typeof e.patch=="function"&&e.moduleExports&&(this._diag.debug("Applying instrumentation patch for nodejs module on instrumentation enabled",{module:e.name,version:e.moduleVersion}),e.patch(e.moduleExports,e.moduleVersion));for(let r of e.files)r.moduleExports&&(this._diag.debug("Applying instrumentation patch for nodejs module file on instrumentation enabled",{module:e.name,version:e.moduleVersion,fileName:r.name}),r.patch(r.moduleExports,e.moduleVersion))}return}this._warnOnPreloadedModules();for(let e of this._modules){let r=(a,c,l)=>{if(!l&&Bh.isAbsolute(c)){let u=Bh.parse(c);c=u.name,l=u.dir}return this._onRequire(e,a,c,l)},n=(a,c,l)=>this._onRequire(e,a,c,l),o=Bh.isAbsolute(e.name)?new Mke.Hook([e.name],{internals:!0},n):this._requireInTheMiddleSingleton.register(e.name,n);this._hooks.push(o);let s=new Oke.Hook([e.name],{internals:!1},r);this._hooks.push(s)}}}disable(){if(this._enabled){this._enabled=!1;for(let e of this._modules){typeof e.unpatch=="function"&&e.moduleExports&&(this._diag.debug("Removing instrumentation patch for nodejs module on instrumentation disabled",{module:e.name,version:e.moduleVersion}),e.unpatch(e.moduleExports,e.moduleVersion));for(let r of e.files)r.moduleExports&&(this._diag.debug("Removing instrumentation patch for nodejs module file on instrumentation disabled",{module:e.name,version:e.moduleVersion,fileName:r.name}),r.unpatch(r.moduleExports,e.moduleVersion))}}}isEnabled(){return this._enabled}}});var Y5,kke=q(()=>{Y5=require("path")});var Dke=q(()=>{Lke();kke()});var Ure=q(()=>{Dke()});var p7,Uke=q(()=>{p7=class{name;supportedVersions;patch;unpatch;files;constructor(e,r,n,o,s){this.name=e,this.supportedVersions=r,this.patch=n,this.unpatch=o,this.files=s||[]}}});var h7,qke=q(()=>{Ure();h7=class{supportedVersions;patch;unpatch;name;constructor(e,r,n,o){this.supportedVersions=r,this.patch=n,this.unpatch=o,this.name=(0,Y5.normalize)(e)}}});var qre={};Xs(qre,{InstrumentationBase:()=>dx,InstrumentationNodeModuleDefinition:()=>p7,InstrumentationNodeModuleFile:()=>h7,isWrapped:()=>f7,registerInstrumentations:()=>iLe,safeExecuteInTheMiddle:()=>Ike,safeExecuteInTheMiddleAsync:()=>Pke});var Fre=q(()=>{oLe();Ure();Uke();qke();kre()});var M_={};Xs(M_,{__addDisposableResource:()=>lDe,__assign:()=>m7,__asyncDelegator:()=>tDe,__asyncGenerator:()=>eDe,__asyncValues:()=>rDe,__await:()=>fx,__awaiter:()=>Kke,__classPrivateFieldGet:()=>sDe,__classPrivateFieldIn:()=>cDe,__classPrivateFieldSet:()=>aDe,__createBinding:()=>_7,__decorate:()=>Bke,__disposeResources:()=>uDe,__esDecorate:()=>Vke,__exportStar:()=>Qke,__extends:()=>Fke,__generator:()=>Yke,__importDefault:()=>oDe,__importStar:()=>iDe,__makeTemplateObject:()=>nDe,__metadata:()=>Wke,__param:()=>$ke,__propKey:()=>Gke,__read:()=>$re,__rest:()=>jke,__rewriteRelativeImportExtension:()=>dDe,__runInitializers:()=>Hke,__setFunctionName:()=>zke,__spread:()=>Zke,__spreadArray:()=>Xke,__spreadArrays:()=>Jke,__values:()=>g7,default:()=>oqt});function Fke(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");jre(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function jke(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]]);return r}function Bke(t,e,r,n){var o=arguments.length,s=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(o<3?a(s):o>3?a(e,r,s):a(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s}function $ke(t,e){return function(r,n){e(r,n,t)}}function Vke(t,e,r,n,o,s){function a(E){if(E!==void 0&&typeof E!="function")throw new TypeError("Function expected");return E}for(var c=n.kind,l=c==="getter"?"get":c==="setter"?"set":"value",u=!e&&t?n.static?t:t.prototype:null,d=e||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),f,p=!1,h=r.length-1;h>=0;h--){var _={};for(var g in n)_[g]=g==="access"?{}:n[g];for(var g in n.access)_.access[g]=n.access[g];_.addInitializer=function(E){if(p)throw new TypeError("Cannot add initializers after decoration has completed");s.push(a(E||null))};var v=(0,r[h])(c==="accessor"?{get:d.get,set:d.set}:d[l],_);if(c==="accessor"){if(v===void 0)continue;if(v===null||typeof v!="object")throw new TypeError("Object expected");(f=a(v.get))&&(d.get=f),(f=a(v.set))&&(d.set=f),(f=a(v.init))&&o.unshift(f)}else(f=a(v))&&(c==="field"?o.unshift(f):d[l]=f)}u&&Object.defineProperty(u,n.name,d),p=!0}function Hke(t,e,r){for(var n=arguments.length>2,o=0;o<e.length;o++)r=n?e[o].call(t,r):e[o].call(t);return n?r:void 0}function Gke(t){return typeof t=="symbol"?t:"".concat(t)}function zke(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function Wke(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Kke(t,e,r,n){function o(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function c(d){try{u(n.next(d))}catch(f){a(f)}}function l(d){try{u(n.throw(d))}catch(f){a(f)}}function u(d){d.done?s(d.value):o(d.value).then(c,l)}u((n=n.apply(t,e||[])).next())})}function Yke(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,o,s,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=c(0),a.throw=c(1),a.return=c(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(u){return function(d){return l([u,d])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(r=0)),r;)try{if(n=1,o&&(s=u[0]&2?o.return:u[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,u[1])).done)return s;switch(o=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,o=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],o=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Qke(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&_7(e,t,r)}function g7(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function $re(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,s=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)s.push(o.value)}catch(c){a={error:c}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return s}function Zke(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat($re(arguments[e]));return t}function Jke(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),o=0,e=0;e<r;e++)for(var s=arguments[e],a=0,c=s.length;a<c;a++,o++)n[o]=s[a];return n}function Xke(t,e,r){if(r||arguments.length===2)for(var n=0,o=e.length,s;n<o;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))}function fx(t){return this instanceof fx?(this.v=t,this):new fx(t)}function eDe(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),o,s=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",a),o[Symbol.asyncIterator]=function(){return this},o;function a(h){return function(_){return Promise.resolve(_).then(h,f)}}function c(h,_){n[h]&&(o[h]=function(g){return new Promise(function(v,E){s.push([h,g,v,E])>1||l(h,g)})},_&&(o[h]=_(o[h])))}function l(h,_){try{u(n[h](_))}catch(g){p(s[0][3],g)}}function u(h){h.value instanceof fx?Promise.resolve(h.value.v).then(d,f):p(s[0][2],h)}function d(h){l("next",h)}function f(h){l("throw",h)}function p(h,_){h(_),s.shift(),s.length&&l(s[0][0],s[0][1])}}function tDe(t){var e,r;return e={},n("next"),n("throw",function(o){throw o}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(o,s){e[o]=t[o]?function(a){return(r=!r)?{value:fx(t[o](a)),done:!1}:s?s(a):a}:s}}function rDe(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof g7=="function"?g7(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(a){return new Promise(function(c,l){a=t[s](a),o(c,l,a.done,a.value)})}}function o(s,a,c,l){Promise.resolve(l).then(function(u){s({value:u,done:c})},a)}}function nDe(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function iDe(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=Bre(t),n=0;n<r.length;n++)r[n]!=="default"&&_7(e,t,r[n]);return nqt(e,t),e}function oDe(t){return t&&t.__esModule?t:{default:t}}function sDe(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function aDe(t,e,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(t,r):o?o.value=r:e.set(t,r),r}function cDe(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function lDe(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,o;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(o=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");o&&(n=function(){try{o.call(this)}catch(s){return Promise.reject(s)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}function uDe(t){function e(s){t.error=t.hasError?new iqt(s,t.error,"An error was suppressed during disposal."):s,t.hasError=!0}var r,n=0;function o(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(o);if(r.dispose){var s=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(s).then(o,function(a){return e(a),o()})}else n|=1}catch(a){e(a)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return o()}function dDe(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,o,s,a){return n?e?".jsx":".js":o&&(!s||!a)?r:o+s+"."+a.toLowerCase()+"js"}):t}var jre,m7,_7,nqt,Bre,iqt,oqt,N_=q(()=>{jre=function(t,e){return jre=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},jre(t,e)};m7=function(){return m7=Object.assign||function(e){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},m7.apply(this,arguments)};_7=Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]});nqt=Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e},Bre=function(t){return Bre=Object.getOwnPropertyNames||function(e){var r=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[r.length]=n);return r},Bre(t)};iqt=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};oqt={__extends:Fke,__assign:m7,__rest:jke,__decorate:Bke,__param:$ke,__esDecorate:Vke,__runInitializers:Hke,__propKey:Gke,__setFunctionName:zke,__metadata:Wke,__awaiter:Kke,__generator:Yke,__createBinding:_7,__exportStar:Qke,__values:g7,__read:$re,__spread:Zke,__spreadArrays:Jke,__spreadArray:Xke,__await:fx,__asyncGenerator:eDe,__asyncDelegator:tDe,__asyncValues:rDe,__makeTemplateObject:nDe,__importStar:iDe,__importDefault:oDe,__classPrivateFieldGet:sDe,__classPrivateFieldSet:aDe,__classPrivateFieldIn:cDe,__addDisposableResource:lDe,__disposeResources:uDe,__rewriteRelativeImportExtension:dDe}});var pDe=m(Vre=>{"use strict";Object.defineProperty(Vre,"__esModule",{value:!0});Vre.log=lqt;var fDe=(N_(),cn(M_)),sqt=require("node:os"),aqt=fDe.__importDefault(require("node:util")),cqt=fDe.__importDefault(require("node:process"));function lqt(t,...e){cqt.default.stderr.write(`${aqt.default.format(t,...e)}${sqt.EOL}`)}});var yDe=m(Kre=>{"use strict";Object.defineProperty(Kre,"__esModule",{value:!0});var uqt=pDe(),hDe=typeof process<"u"&&process.env&&process.env.DEBUG||void 0,gDe,Hre=[],Gre=[],v7=[];hDe&&zre(hDe);var _De=Object.assign(t=>vDe(t),{enable:zre,enabled:Wre,disable:dqt,log:uqt.log});function zre(t){gDe=t,Hre=[],Gre=[];let e=t.split(",").map(r=>r.trim());for(let r of e)r.startsWith("-")?Gre.push(r.substring(1)):Hre.push(r);for(let r of v7)r.enabled=Wre(r.namespace)}function Wre(t){if(t.endsWith("*"))return!0;for(let e of Gre)if(mDe(t,e))return!1;for(let e of Hre)if(mDe(t,e))return!0;return!1}function mDe(t,e){if(e.indexOf("*")===-1)return t===e;let r=e;if(e.indexOf("**")!==-1){let p=[],h="";for(let _ of e)_==="*"&&h==="*"||(h=_,p.push(_));r=p.join("")}let n=0,o=0,s=r.length,a=t.length,c=-1,l=-1;for(;n<a&&o<s;)if(r[o]==="*"){if(c=o,o++,o===s)return!0;for(;t[n]!==r[o];)if(n++,n===a)return!1;l=n,n++,o++;continue}else if(r[o]===t[n])o++,n++;else if(c>=0){if(o=c+1,n=l+1,n===a)return!1;for(;t[n]!==r[o];)if(n++,n===a)return!1;l=n,n++,o++;continue}else return!1;let u=n===t.length,d=o===r.length,f=o===r.length-1&&r[o]==="*";return u&&(d||f)}function dqt(){let t=gDe||"";return zre(""),t}function vDe(t){let e=Object.assign(r,{enabled:Wre(t),destroy:fqt,log:_De.log,namespace:t,extend:pqt});function r(...n){e.enabled&&(n.length>0&&(n[0]=`${t} ${n[0]}`),e.log(...n))}return v7.push(e),e}function fqt(){let t=v7.indexOf(this);return t>=0?(v7.splice(t,1),!0):!1}function pqt(t){let e=vDe(`${this.namespace}:${t}`);return e.log=this.log,e}Kre.default=_De});var CDe=m(L_=>{"use strict";Object.defineProperty(L_,"__esModule",{value:!0});L_.TypeSpecRuntimeLogger=void 0;L_.createLoggerContext=bDe;L_.setLogLevel=mqt;L_.getLogLevel=gqt;L_.createClientLogger=_qt;var hqt=(N_(),cn(M_)),Q5=hqt.__importDefault(yDe()),Yre=["verbose","info","warning","error"],EDe={verbose:400,info:300,warning:200,error:100};function TDe(t,e){e.log=(...r)=>{t.log(...r)}}function SDe(t){return Yre.includes(t)}function bDe(t){let e=new Set,r=typeof process<"u"&&process.env&&process.env[t.logLevelEnvVarName]||void 0,n,o=(0,Q5.default)(t.namespace);o.log=(...d)=>{Q5.default.log(...d)};function s(d){if(d&&!SDe(d))throw new Error(`Unknown log level '${d}'. Acceptable values: ${Yre.join(",")}`);n=d;let f=[];for(let p of e)a(p)&&f.push(p.namespace);Q5.default.enable(f.join(","))}r&&(SDe(r)?s(r):console.error(`${t.logLevelEnvVarName} set to unknown log level '${r}'; logging is not enabled. Acceptable values: ${Yre.join(", ")}.`));function a(d){return!!(n&&EDe[d.level]<=EDe[n])}function c(d,f){let p=Object.assign(d.extend(f),{level:f});if(TDe(d,p),a(p)){let h=Q5.default.disable();Q5.default.enable(h+","+p.namespace)}return e.add(p),p}function l(){return n}function u(d){let f=o.extend(d);return TDe(o,f),{error:c(f,"error"),warning:c(f,"warning"),info:c(f,"info"),verbose:c(f,"verbose")}}return{setLogLevel:s,getLogLevel:l,createClientLogger:u,logger:o}}var y7=bDe({logLevelEnvVarName:"TYPESPEC_RUNTIME_LOG_LEVEL",namespace:"typeSpecRuntime"});L_.TypeSpecRuntimeLogger=y7.logger;function mqt(t){y7.setLogLevel(t)}function gqt(){return y7.getLogLevel()}function _qt(t){return y7.createClientLogger(t)}});var ADe=m(E7=>{"use strict";Object.defineProperty(E7,"__esModule",{value:!0});E7.createLoggerContext=void 0;var vqt=CDe();Object.defineProperty(E7,"createLoggerContext",{enumerable:!0,get:function(){return vqt.createLoggerContext}})});var S7=m(TE=>{"use strict";Object.defineProperty(TE,"__esModule",{value:!0});TE.AzureLogger=void 0;TE.setLogLevel=Eqt;TE.getLogLevel=Tqt;TE.createClientLogger=Sqt;var yqt=ADe(),T7=(0,yqt.createLoggerContext)({logLevelEnvVarName:"AZURE_LOG_LEVEL",namespace:"azure"});TE.AzureLogger=T7.logger;function Eqt(t){T7.setLogLevel(t)}function Tqt(){return T7.getLogLevel()}function Sqt(t){return T7.createClientLogger(t)}});var Qre=m(b7=>{"use strict";Object.defineProperty(b7,"__esModule",{value:!0});b7.logger=void 0;var bqt=S7();b7.logger=(0,bqt.createClientLogger)("opentelemetry-instrumentation-azure-sdk")});function C7(t){return t.setValue(Zre,!0)}function xDe(t){return t.deleteValue(Zre)}function px(t){return t.getValue(Zre)===!0}var Zre,Z5=q(()=>{Ht();Zre=bc("OpenTelemetry SDK Context Key SUPPRESS_TRACING")});var A7,wDe=q(()=>{A7="baggage"});function PDe(t){return t.reduce((e,r)=>{let n=`${e}${e!==""?",":""}${r}`;return n.length>8192?e:n},"")}function RDe(t){return t.getAllEntries().map(([e,r])=>{let n=`${encodeURIComponent(e)}=${encodeURIComponent(r.value)}`;return r.metadata!==void 0&&(n+=";"+r.metadata.toString()),n})}function Jre(t){let e=t.split(";");if(e.length<=0)return;let r=e.shift();if(!r)return;let n=r.indexOf("=");if(n<=0)return;let o=decodeURIComponent(r.substring(0,n).trim()),s=decodeURIComponent(r.substring(n+1).trim()),a;return e.length>0&&(a=jA(e.join(";"))),{key:o,value:s,metadata:a}}function ODe(t){let e={};return typeof t=="string"&&t.length>0&&t.split(",").forEach(r=>{let n=Jre(r);n!==void 0&&n.value.length>0&&(e[n.key]=n.value)}),e}var Xre=q(()=>{Ht()});var w7,MDe=q(()=>{Ht();Z5();wDe();Xre();w7=class{inject(e,r,n){let o=kl.getBaggage(e);if(!o||px(e))return;let s=RDe(o).filter(c=>c.length<=4096).slice(0,180),a=PDe(s);a.length>0&&n.set(r,A7,a)}extract(e,r,n){let o=n.get(r,A7),s=Array.isArray(o)?o.join(","):o;if(!s)return e;let a={};return s.length===0||(s.split(",").forEach(l=>{let u=Jre(l);if(u){let d={value:u.value};u.metadata&&(d.metadata=u.metadata),a[u.key]=d}}),Object.entries(a).length===0)?e:kl.setBaggage(e,kl.createBaggage(a))}fields(){return[A7]}}});var I7,NDe=q(()=>{I7=class{_monotonicClock;_epochMillis;_performanceMillis;constructor(e,r){this._monotonicClock=r,this._epochMillis=e.now(),this._performanceMillis=r.now()}now(){let e=this._monotonicClock.now()-this._performanceMillis;return this._epochMillis+e}}});function LDe(t){let e={};if(typeof t!="object"||t==null)return e;for(let r in t){if(!Object.prototype.hasOwnProperty.call(t,r))continue;if(!xqt(r)){it.warn(`Invalid attribute key: ${r}`);continue}let n=t[r];if(!ene(n)){it.warn(`Invalid attribute value set for key: ${r}`);continue}Array.isArray(n)?e[r]=n.slice():e[r]=n}return e}function xqt(t){return typeof t=="string"&&t!==""}function ene(t){return t==null?!0:Array.isArray(t)?wqt(t):kDe(typeof t)}function wqt(t){let e;for(let r of t){if(r==null)continue;let n=typeof r;if(n!==e){if(!e){if(kDe(n)){e=n;continue}return!1}return!1}}return!0}function kDe(t){switch(t){case"number":case"boolean":case"string":return!0}return!1}var DDe=q(()=>{Ht()});function P7(){return t=>{it.error(Iqt(t))}}function Iqt(t){return typeof t=="string"?t:JSON.stringify(Pqt(t))}function Pqt(t){let e={},r=t;for(;r!==null;)Object.getOwnPropertyNames(r).forEach(n=>{if(e[n])return;let o=r[n];o&&(e[n]=String(o))}),r=Object.getPrototypeOf(r);return e}var tne=q(()=>{Ht()});function qDe(t){UDe=t}function FDe(t){try{UDe(t)}catch{}}var UDe,jDe=q(()=>{tne();UDe=P7()});function R7(t){let e=process.env[t];if(e==null||e.trim()==="")return;let r=Number(e);if(isNaN(r)){it.warn(`Unknown value ${(0,rne.inspect)(e)} for ${t}, expected a number, using defaults`);return}return r}function J5(t){let e=process.env[t];if(!(e==null||e.trim()===""))return e}function O7(t){let e=process.env[t]?.trim().toLowerCase();return e==null||e===""?!1:e==="true"?!0:(e==="false"||it.warn(`Unknown value ${(0,rne.inspect)(e)} for ${t}, expected 'true' or 'false', falling back to 'false' (default)`),!1)}function M7(t){return J5(t)?.split(",").map(e=>e.trim()).filter(e=>e!=="")}var rne,BDe=q(()=>{Ht();rne=require("util")});var N7,$De=q(()=>{N7=typeof globalThis=="object"?globalThis:global});var VDe,k_,HDe=q(()=>{VDe=require("perf_hooks"),k_=VDe.performance});var GDe,zDe=q(()=>{GDe="2.2.0"});function to(t){let e={},r=t.length;for(let n=0;n<r;n++){let o=t[n];o&&(e[String(o).toUpperCase().replace(/[-.]/g,"_")]=o)}return e}var nne=q(()=>{});var WDe,KDe,YDe,QDe,ZDe,JDe,XDe,e6e,t6e,r6e,n6e,i6e,o6e,s6e,a6e,c6e,l6e,u6e,d6e,f6e,p6e,h6e,m6e,g6e,_6e,v6e,y6e,E6e,T6e,S6e,b6e,C6e,A6e,x6e,w6e,I6e,P6e,R6e,O6e,M6e,N6e,L6e,k6e,D6e,U6e,q6e,F6e,j6e,B6e,$6e,V6e,H6e,G6e,z6e,W6e,K6e,Y6e,Q6e,Z6e,J6e,X6e,e8e,t8e,r8e,n8e,i8e,o8e,s8e,a8e,c8e,l8e,u8e,d8e,f8e,p8e,h8e,m8e,g8e,_8e,v8e,y8e,E8e,T8e,S8e,b8e,C8e,A8e,x8e,w8e,I8e,P8e,R8e,O8e,M8e,N8e,L8e,k8e,D8e,U8e,q8e,F8e,j8e,B8e,$8e,V8e,H8e,G8e,z8e,W8e,K8e,Y8e,Q8e,Z8e,J8e,X8e,e9e,t9e,r9e,n9e,i9e,o9e,s9e,a9e,c9e,l9e,u9e,d9e,f9e,Rqt,Oqt,Mqt,Nqt,Lqt,kqt,Dqt,Uqt,qqt,Fqt,jqt,Bqt,$qt,Vqt,Hqt,Gqt,zqt,Wqt,Kqt,Yqt,Qqt,Zqt,Jqt,Xqt,eFt,tFt,rFt,nFt,iFt,oFt,sFt,aFt,cFt,lFt,uFt,dFt,fFt,pFt,hFt,mFt,gFt,_Ft,vFt,yFt,EFt,TFt,SFt,bFt,CFt,AFt,xFt,wFt,IFt,PFt,RFt,OFt,MFt,NFt,LFt,kFt,DFt,UFt,qFt,FFt,jFt,BFt,$Ft,VFt,HFt,GFt,zFt,WFt,KFt,YFt,QFt,ZFt,JFt,XFt,ejt,tjt,rjt,njt,ijt,ojt,sjt,ajt,cjt,ljt,ujt,djt,fjt,pjt,hjt,mjt,gjt,_jt,vjt,yjt,Ejt,Tjt,Sjt,bjt,Cjt,Ajt,xjt,wjt,Ijt,Pjt,Rjt,Ojt,Mjt,Njt,Ljt,kjt,Djt,Ujt,qjt,Fjt,jjt,Bjt,$jt,Vjt,Hjt,Gjt,zjt,Wjt,Kjt,Yjt,Qjt,p9e,h9e,m9e,g9e,_9e,v9e,y9e,E9e,T9e,S9e,b9e,C9e,A9e,x9e,w9e,I9e,P9e,R9e,O9e,M9e,N9e,L9e,k9e,D9e,U9e,q9e,F9e,j9e,B9e,$9e,V9e,H9e,G9e,z9e,W9e,K9e,Y9e,Q9e,Z9e,J9e,X9e,e7e,t7e,r7e,n7e,i7e,o7e,Zjt,Jjt,Xjt,eBt,tBt,rBt,nBt,iBt,oBt,sBt,aBt,cBt,lBt,uBt,dBt,fBt,pBt,hBt,mBt,gBt,_Bt,vBt,yBt,EBt,TBt,SBt,bBt,CBt,ABt,xBt,wBt,IBt,PBt,RBt,OBt,MBt,NBt,LBt,kBt,DBt,UBt,qBt,FBt,jBt,BBt,$Bt,VBt,HBt,s7e,a7e,c7e,l7e,u7e,d7e,f7e,p7e,h7e,m7e,g7e,GBt,zBt,WBt,KBt,YBt,QBt,ZBt,JBt,XBt,e$t,t$t,r$t,_7e,v7e,y7e,E7e,T7e,n$t,i$t,o$t,s$t,a$t,c$t,S7e,b7e,C7e,l$t,u$t,d$t,f$t,A7e,x7e,w7e,I7e,p$t,h$t,m$t,g$t,_$t,P7e,R7e,O7e,M7e,N7e,L7e,k7e,v$t,y$t,E$t,T$t,S$t,b$t,C$t,A$t,D7e,U7e,q7e,F7e,j7e,x$t,w$t,I$t,P$t,R$t,O$t,B7e,$7e,V7e,H7e,G7e,z7e,W7e,K7e,Y7e,Q7e,Z7e,J7e,X7e,eUe,tUe,rUe,nUe,iUe,oUe,sUe,aUe,M$t,N$t,L$t,k$t,D$t,U$t,q$t,F$t,j$t,B$t,$$t,V$t,H$t,G$t,z$t,W$t,K$t,Y$t,Q$t,Z$t,J$t,X$t,cUe,lUe,uUe,dUe,fUe,eVt,tVt,rVt,nVt,iVt,oVt,pUe,hUe,sVt,aVt,cVt,mUe,gUe,lVt,uVt,dVt,_Ue,vUe,yUe,EUe,TUe,SUe,bUe,CUe,AUe,xUe,wUe,IUe,PUe,RUe,OUe,MUe,NUe,fVt,pVt,hVt,mVt,gVt,_Vt,vVt,yVt,EVt,TVt,SVt,bVt,CVt,AVt,xVt,wVt,IVt,PVt,LUe,kUe,RVt,OVt,MVt,DUe=q(()=>{nne();WDe="aws.lambda.invoked_arn",KDe="db.system",YDe="db.connection_string",QDe="db.user",ZDe="db.jdbc.driver_classname",JDe="db.name",XDe="db.statement",e6e="db.operation",t6e="db.mssql.instance_name",r6e="db.cassandra.keyspace",n6e="db.cassandra.page_size",i6e="db.cassandra.consistency_level",o6e="db.cassandra.table",s6e="db.cassandra.idempotence",a6e="db.cassandra.speculative_execution_count",c6e="db.cassandra.coordinator.id",l6e="db.cassandra.coordinator.dc",u6e="db.hbase.namespace",d6e="db.redis.database_index",f6e="db.mongodb.collection",p6e="db.sql.table",h6e="exception.type",m6e="exception.message",g6e="exception.stacktrace",_6e="exception.escaped",v6e="faas.trigger",y6e="faas.execution",E6e="faas.document.collection",T6e="faas.document.operation",S6e="faas.document.time",b6e="faas.document.name",C6e="faas.time",A6e="faas.cron",x6e="faas.coldstart",w6e="faas.invoked_name",I6e="faas.invoked_provider",P6e="faas.invoked_region",R6e="net.transport",O6e="net.peer.ip",M6e="net.peer.port",N6e="net.peer.name",L6e="net.host.ip",k6e="net.host.port",D6e="net.host.name",U6e="net.host.connection.type",q6e="net.host.connection.subtype",F6e="net.host.carrier.name",j6e="net.host.carrier.mcc",B6e="net.host.carrier.mnc",$6e="net.host.carrier.icc",V6e="peer.service",H6e="enduser.id",G6e="enduser.role",z6e="enduser.scope",W6e="thread.id",K6e="thread.name",Y6e="code.function",Q6e="code.namespace",Z6e="code.filepath",J6e="code.lineno",X6e="http.method",e8e="http.url",t8e="http.target",r8e="http.host",n8e="http.scheme",i8e="http.status_code",o8e="http.flavor",s8e="http.user_agent",a8e="http.request_content_length",c8e="http.request_content_length_uncompressed",l8e="http.response_content_length",u8e="http.response_content_length_uncompressed",d8e="http.server_name",f8e="http.route",p8e="http.client_ip",h8e="aws.dynamodb.table_names",m8e="aws.dynamodb.consumed_capacity",g8e="aws.dynamodb.item_collection_metrics",_8e="aws.dynamodb.provisioned_read_capacity",v8e="aws.dynamodb.provisioned_write_capacity",y8e="aws.dynamodb.consistent_read",E8e="aws.dynamodb.projection",T8e="aws.dynamodb.limit",S8e="aws.dynamodb.attributes_to_get",b8e="aws.dynamodb.index_name",C8e="aws.dynamodb.select",A8e="aws.dynamodb.global_secondary_indexes",x8e="aws.dynamodb.local_secondary_indexes",w8e="aws.dynamodb.exclusive_start_table",I8e="aws.dynamodb.table_count",P8e="aws.dynamodb.scan_forward",R8e="aws.dynamodb.segment",O8e="aws.dynamodb.total_segments",M8e="aws.dynamodb.count",N8e="aws.dynamodb.scanned_count",L8e="aws.dynamodb.attribute_definitions",k8e="aws.dynamodb.global_secondary_index_updates",D8e="messaging.system",U8e="messaging.destination",q8e="messaging.destination_kind",F8e="messaging.temp_destination",j8e="messaging.protocol",B8e="messaging.protocol_version",$8e="messaging.url",V8e="messaging.message_id",H8e="messaging.conversation_id",G8e="messaging.message_payload_size_bytes",z8e="messaging.message_payload_compressed_size_bytes",W8e="messaging.operation",K8e="messaging.consumer_id",Y8e="messaging.rabbitmq.routing_key",Q8e="messaging.kafka.message_key",Z8e="messaging.kafka.consumer_group",J8e="messaging.kafka.client_id",X8e="messaging.kafka.partition",e9e="messaging.kafka.tombstone",t9e="rpc.system",r9e="rpc.service",n9e="rpc.method",i9e="rpc.grpc.status_code",o9e="rpc.jsonrpc.version",s9e="rpc.jsonrpc.request_id",a9e="rpc.jsonrpc.error_code",c9e="rpc.jsonrpc.error_message",l9e="message.type",u9e="message.id",d9e="message.compressed_size",f9e="message.uncompressed_size",Rqt=WDe,Oqt=KDe,Mqt=YDe,Nqt=QDe,Lqt=ZDe,kqt=JDe,Dqt=XDe,Uqt=e6e,qqt=t6e,Fqt=r6e,jqt=n6e,Bqt=i6e,$qt=o6e,Vqt=s6e,Hqt=a6e,Gqt=c6e,zqt=l6e,Wqt=u6e,Kqt=d6e,Yqt=f6e,Qqt=p6e,Zqt=h6e,Jqt=m6e,Xqt=g6e,eFt=_6e,tFt=v6e,rFt=y6e,nFt=E6e,iFt=T6e,oFt=S6e,sFt=b6e,aFt=C6e,cFt=A6e,lFt=x6e,uFt=w6e,dFt=I6e,fFt=P6e,pFt=R6e,hFt=O6e,mFt=M6e,gFt=N6e,_Ft=L6e,vFt=k6e,yFt=D6e,EFt=U6e,TFt=q6e,SFt=F6e,bFt=j6e,CFt=B6e,AFt=$6e,xFt=V6e,wFt=H6e,IFt=G6e,PFt=z6e,RFt=W6e,OFt=K6e,MFt=Y6e,NFt=Q6e,LFt=Z6e,kFt=J6e,DFt=X6e,UFt=e8e,qFt=t8e,FFt=r8e,jFt=n8e,BFt=i8e,$Ft=o8e,VFt=s8e,HFt=a8e,GFt=c8e,zFt=l8e,WFt=u8e,KFt=d8e,YFt=f8e,QFt=p8e,ZFt=h8e,JFt=m8e,XFt=g8e,ejt=_8e,tjt=v8e,rjt=y8e,njt=E8e,ijt=T8e,ojt=S8e,sjt=b8e,ajt=C8e,cjt=A8e,ljt=x8e,ujt=w8e,djt=I8e,fjt=P8e,pjt=R8e,hjt=O8e,mjt=M8e,gjt=N8e,_jt=L8e,vjt=k8e,yjt=D8e,Ejt=U8e,Tjt=q8e,Sjt=F8e,bjt=j8e,Cjt=B8e,Ajt=$8e,xjt=V8e,wjt=H8e,Ijt=G8e,Pjt=z8e,Rjt=W8e,Ojt=K8e,Mjt=Y8e,Njt=Q8e,Ljt=Z8e,kjt=J8e,Djt=X8e,Ujt=e9e,qjt=t9e,Fjt=r9e,jjt=n9e,Bjt=i9e,$jt=o9e,Vjt=s9e,Hjt=a9e,Gjt=c9e,zjt=l9e,Wjt=u9e,Kjt=d9e,Yjt=f9e,Qjt=to([WDe,KDe,YDe,QDe,ZDe,JDe,XDe,e6e,t6e,r6e,n6e,i6e,o6e,s6e,a6e,c6e,l6e,u6e,d6e,f6e,p6e,h6e,m6e,g6e,_6e,v6e,y6e,E6e,T6e,S6e,b6e,C6e,A6e,x6e,w6e,I6e,P6e,R6e,O6e,M6e,N6e,L6e,k6e,D6e,U6e,q6e,F6e,j6e,B6e,$6e,V6e,H6e,G6e,z6e,W6e,K6e,Y6e,Q6e,Z6e,J6e,X6e,e8e,t8e,r8e,n8e,i8e,o8e,s8e,a8e,c8e,l8e,u8e,d8e,f8e,p8e,h8e,m8e,g8e,_8e,v8e,y8e,E8e,T8e,S8e,b8e,C8e,A8e,x8e,w8e,I8e,P8e,R8e,O8e,M8e,N8e,L8e,k8e,D8e,U8e,q8e,F8e,j8e,B8e,$8e,V8e,H8e,G8e,z8e,W8e,K8e,Y8e,Q8e,Z8e,J8e,X8e,e9e,t9e,r9e,n9e,i9e,o9e,s9e,a9e,c9e,l9e,u9e,d9e,f9e]),p9e="other_sql",h9e="mssql",m9e="mysql",g9e="oracle",_9e="db2",v9e="postgresql",y9e="redshift",E9e="hive",T9e="cloudscape",S9e="hsqldb",b9e="progress",C9e="maxdb",A9e="hanadb",x9e="ingres",w9e="firstsql",I9e="edb",P9e="cache",R9e="adabas",O9e="firebird",M9e="derby",N9e="filemaker",L9e="informix",k9e="instantdb",D9e="interbase",U9e="mariadb",q9e="netezza",F9e="pervasive",j9e="pointbase",B9e="sqlite",$9e="sybase",V9e="teradata",H9e="vertica",G9e="h2",z9e="coldfusion",W9e="cassandra",K9e="hbase",Y9e="mongodb",Q9e="redis",Z9e="couchbase",J9e="couchdb",X9e="cosmosdb",e7e="dynamodb",t7e="neo4j",r7e="geode",n7e="elasticsearch",i7e="memcached",o7e="cockroachdb",Zjt=p9e,Jjt=h9e,Xjt=m9e,eBt=g9e,tBt=_9e,rBt=v9e,nBt=y9e,iBt=E9e,oBt=T9e,sBt=S9e,aBt=b9e,cBt=C9e,lBt=A9e,uBt=x9e,dBt=w9e,fBt=I9e,pBt=P9e,hBt=R9e,mBt=O9e,gBt=M9e,_Bt=N9e,vBt=L9e,yBt=k9e,EBt=D9e,TBt=U9e,SBt=q9e,bBt=F9e,CBt=j9e,ABt=B9e,xBt=$9e,wBt=V9e,IBt=H9e,PBt=G9e,RBt=z9e,OBt=W9e,MBt=K9e,NBt=Y9e,LBt=Q9e,kBt=Z9e,DBt=J9e,UBt=X9e,qBt=e7e,FBt=t7e,jBt=r7e,BBt=n7e,$Bt=i7e,VBt=o7e,HBt=to([p9e,h9e,m9e,g9e,_9e,v9e,y9e,E9e,T9e,S9e,b9e,C9e,A9e,x9e,w9e,I9e,P9e,R9e,O9e,M9e,N9e,L9e,k9e,D9e,U9e,q9e,F9e,j9e,B9e,$9e,V9e,H9e,G9e,z9e,W9e,K9e,Y9e,Q9e,Z9e,J9e,X9e,e7e,t7e,r7e,n7e,i7e,o7e]),s7e="all",a7e="each_quorum",c7e="quorum",l7e="local_quorum",u7e="one",d7e="two",f7e="three",p7e="local_one",h7e="any",m7e="serial",g7e="local_serial",GBt=s7e,zBt=a7e,WBt=c7e,KBt=l7e,YBt=u7e,QBt=d7e,ZBt=f7e,JBt=p7e,XBt=h7e,e$t=m7e,t$t=g7e,r$t=to([s7e,a7e,c7e,l7e,u7e,d7e,f7e,p7e,h7e,m7e,g7e]),_7e="datasource",v7e="http",y7e="pubsub",E7e="timer",T7e="other",n$t=_7e,i$t=v7e,o$t=y7e,s$t=E7e,a$t=T7e,c$t=to([_7e,v7e,y7e,E7e,T7e]),S7e="insert",b7e="edit",C7e="delete",l$t=S7e,u$t=b7e,d$t=C7e,f$t=to([S7e,b7e,C7e]),A7e="alibaba_cloud",x7e="aws",w7e="azure",I7e="gcp",p$t=A7e,h$t=x7e,m$t=w7e,g$t=I7e,_$t=to([A7e,x7e,w7e,I7e]),P7e="ip_tcp",R7e="ip_udp",O7e="ip",M7e="unix",N7e="pipe",L7e="inproc",k7e="other",v$t=P7e,y$t=R7e,E$t=O7e,T$t=M7e,S$t=N7e,b$t=L7e,C$t=k7e,A$t=to([P7e,R7e,O7e,M7e,N7e,L7e,k7e]),D7e="wifi",U7e="wired",q7e="cell",F7e="unavailable",j7e="unknown",x$t=D7e,w$t=U7e,I$t=q7e,P$t=F7e,R$t=j7e,O$t=to([D7e,U7e,q7e,F7e,j7e]),B7e="gprs",$7e="edge",V7e="umts",H7e="cdma",G7e="evdo_0",z7e="evdo_a",W7e="cdma2000_1xrtt",K7e="hsdpa",Y7e="hsupa",Q7e="hspa",Z7e="iden",J7e="evdo_b",X7e="lte",eUe="ehrpd",tUe="hspap",rUe="gsm",nUe="td_scdma",iUe="iwlan",oUe="nr",sUe="nrnsa",aUe="lte_ca",M$t=B7e,N$t=$7e,L$t=V7e,k$t=H7e,D$t=G7e,U$t=z7e,q$t=W7e,F$t=K7e,j$t=Y7e,B$t=Q7e,$$t=Z7e,V$t=J7e,H$t=X7e,G$t=eUe,z$t=tUe,W$t=rUe,K$t=nUe,Y$t=iUe,Q$t=oUe,Z$t=sUe,J$t=aUe,X$t=to([B7e,$7e,V7e,H7e,G7e,z7e,W7e,K7e,Y7e,Q7e,Z7e,J7e,X7e,eUe,tUe,rUe,nUe,iUe,oUe,sUe,aUe]),cUe="1.0",lUe="1.1",uUe="2.0",dUe="SPDY",fUe="QUIC",eVt=cUe,tVt=lUe,rVt=uUe,nVt=dUe,iVt=fUe,oVt={HTTP_1_0:cUe,HTTP_1_1:lUe,HTTP_2_0:uUe,SPDY:dUe,QUIC:fUe},pUe="queue",hUe="topic",sVt=pUe,aVt=hUe,cVt=to([pUe,hUe]),mUe="receive",gUe="process",lVt=mUe,uVt=gUe,dVt=to([mUe,gUe]),_Ue=0,vUe=1,yUe=2,EUe=3,TUe=4,SUe=5,bUe=6,CUe=7,AUe=8,xUe=9,wUe=10,IUe=11,PUe=12,RUe=13,OUe=14,MUe=15,NUe=16,fVt=_Ue,pVt=vUe,hVt=yUe,mVt=EUe,gVt=TUe,_Vt=SUe,vVt=bUe,yVt=CUe,EVt=AUe,TVt=xUe,SVt=wUe,bVt=IUe,CVt=PUe,AVt=RUe,xVt=OUe,wVt=MUe,IVt=NUe,PVt={OK:_Ue,CANCELLED:vUe,UNKNOWN:yUe,INVALID_ARGUMENT:EUe,DEADLINE_EXCEEDED:TUe,NOT_FOUND:SUe,ALREADY_EXISTS:bUe,PERMISSION_DENIED:CUe,RESOURCE_EXHAUSTED:AUe,FAILED_PRECONDITION:xUe,ABORTED:wUe,OUT_OF_RANGE:IUe,UNIMPLEMENTED:PUe,INTERNAL:RUe,UNAVAILABLE:OUe,DATA_LOSS:MUe,UNAUTHENTICATED:NUe},LUe="SENT",kUe="RECEIVED",RVt=LUe,OVt=kUe,MVt=to([LUe,kUe])});var UUe=q(()=>{DUe()});var qUe,FUe,jUe,BUe,$Ue,VUe,HUe,GUe,zUe,WUe,KUe,YUe,QUe,ZUe,JUe,XUe,eqe,tqe,rqe,nqe,iqe,oqe,sqe,aqe,cqe,lqe,uqe,dqe,fqe,pqe,hqe,mqe,gqe,_qe,vqe,yqe,Eqe,Tqe,Sqe,bqe,Cqe,Aqe,xqe,wqe,Iqe,Pqe,Rqe,Oqe,Mqe,Nqe,Lqe,kqe,Dqe,Uqe,qqe,Fqe,jqe,Bqe,$qe,Vqe,Hqe,Gqe,zqe,Wqe,Kqe,Yqe,Qqe,Zqe,Jqe,Xqe,eFe,tFe,rFe,nFe,iFe,oFe,sFe,aFe,cFe,lFe,uFe,NVt,LVt,kVt,DVt,UVt,qVt,FVt,jVt,BVt,$Vt,VVt,HVt,GVt,zVt,WVt,KVt,YVt,QVt,ZVt,JVt,XVt,eHt,tHt,rHt,nHt,iHt,oHt,sHt,aHt,cHt,lHt,uHt,dHt,fHt,pHt,hHt,mHt,gHt,_Ht,vHt,yHt,EHt,THt,SHt,bHt,CHt,AHt,xHt,wHt,IHt,PHt,RHt,OHt,MHt,NHt,LHt,kHt,DHt,UHt,qHt,FHt,jHt,BHt,$Ht,VHt,HHt,GHt,zHt,WHt,KHt,YHt,QHt,ZHt,JHt,XHt,eGt,tGt,rGt,nGt,iGt,oGt,sGt,dFe,fFe,pFe,hFe,aGt,cGt,lGt,uGt,dGt,mFe,gFe,_Fe,vFe,yFe,EFe,TFe,SFe,bFe,CFe,AFe,xFe,wFe,IFe,PFe,RFe,OFe,fGt,pGt,hGt,mGt,gGt,_Gt,vGt,yGt,EGt,TGt,SGt,bGt,CGt,AGt,xGt,wGt,IGt,PGt,MFe,NFe,RGt,OGt,MGt,LFe,kFe,DFe,UFe,qFe,FFe,jFe,NGt,LGt,kGt,DGt,UGt,qGt,FGt,jGt,BFe,$Fe,VFe,HFe,GFe,zFe,WFe,KFe,YFe,QFe,ZFe,BGt,$Gt,VGt,HGt,GGt,zGt,WGt,KGt,YGt,QGt,ZGt,JGt,JFe,XFe,eje,tje,rje,nje,ije,oje,sje,aje,XGt,ezt,tzt,rzt,nzt,izt,ozt,szt,azt,czt,lzt,cje=q(()=>{nne();qUe="cloud.provider",FUe="cloud.account.id",jUe="cloud.region",BUe="cloud.availability_zone",$Ue="cloud.platform",VUe="aws.ecs.container.arn",HUe="aws.ecs.cluster.arn",GUe="aws.ecs.launchtype",zUe="aws.ecs.task.arn",WUe="aws.ecs.task.family",KUe="aws.ecs.task.revision",YUe="aws.eks.cluster.arn",QUe="aws.log.group.names",ZUe="aws.log.group.arns",JUe="aws.log.stream.names",XUe="aws.log.stream.arns",eqe="container.name",tqe="container.id",rqe="container.runtime",nqe="container.image.name",iqe="container.image.tag",oqe="deployment.environment",sqe="device.id",aqe="device.model.identifier",cqe="device.model.name",lqe="faas.name",uqe="faas.id",dqe="faas.version",fqe="faas.instance",pqe="faas.max_memory",hqe="host.id",mqe="host.name",gqe="host.type",_qe="host.arch",vqe="host.image.name",yqe="host.image.id",Eqe="host.image.version",Tqe="k8s.cluster.name",Sqe="k8s.node.name",bqe="k8s.node.uid",Cqe="k8s.namespace.name",Aqe="k8s.pod.uid",xqe="k8s.pod.name",wqe="k8s.container.name",Iqe="k8s.replicaset.uid",Pqe="k8s.replicaset.name",Rqe="k8s.deployment.uid",Oqe="k8s.deployment.name",Mqe="k8s.statefulset.uid",Nqe="k8s.statefulset.name",Lqe="k8s.daemonset.uid",kqe="k8s.daemonset.name",Dqe="k8s.job.uid",Uqe="k8s.job.name",qqe="k8s.cronjob.uid",Fqe="k8s.cronjob.name",jqe="os.type",Bqe="os.description",$qe="os.name",Vqe="os.version",Hqe="process.pid",Gqe="process.executable.name",zqe="process.executable.path",Wqe="process.command",Kqe="process.command_line",Yqe="process.command_args",Qqe="process.owner",Zqe="process.runtime.name",Jqe="process.runtime.version",Xqe="process.runtime.description",eFe="service.name",tFe="service.namespace",rFe="service.instance.id",nFe="service.version",iFe="telemetry.sdk.name",oFe="telemetry.sdk.language",sFe="telemetry.sdk.version",aFe="telemetry.auto.version",cFe="webengine.name",lFe="webengine.version",uFe="webengine.description",NVt=qUe,LVt=FUe,kVt=jUe,DVt=BUe,UVt=$Ue,qVt=VUe,FVt=HUe,jVt=GUe,BVt=zUe,$Vt=WUe,VVt=KUe,HVt=YUe,GVt=QUe,zVt=ZUe,WVt=JUe,KVt=XUe,YVt=eqe,QVt=tqe,ZVt=rqe,JVt=nqe,XVt=iqe,eHt=oqe,tHt=sqe,rHt=aqe,nHt=cqe,iHt=lqe,oHt=uqe,sHt=dqe,aHt=fqe,cHt=pqe,lHt=hqe,uHt=mqe,dHt=gqe,fHt=_qe,pHt=vqe,hHt=yqe,mHt=Eqe,gHt=Tqe,_Ht=Sqe,vHt=bqe,yHt=Cqe,EHt=Aqe,THt=xqe,SHt=wqe,bHt=Iqe,CHt=Pqe,AHt=Rqe,xHt=Oqe,wHt=Mqe,IHt=Nqe,PHt=Lqe,RHt=kqe,OHt=Dqe,MHt=Uqe,NHt=qqe,LHt=Fqe,kHt=jqe,DHt=Bqe,UHt=$qe,qHt=Vqe,FHt=Hqe,jHt=Gqe,BHt=zqe,$Ht=Wqe,VHt=Kqe,HHt=Yqe,GHt=Qqe,zHt=Zqe,WHt=Jqe,KHt=Xqe,YHt=eFe,QHt=tFe,ZHt=rFe,JHt=nFe,XHt=iFe,eGt=oFe,tGt=sFe,rGt=aFe,nGt=cFe,iGt=lFe,oGt=uFe,sGt=to([qUe,FUe,jUe,BUe,$Ue,VUe,HUe,GUe,zUe,WUe,KUe,YUe,QUe,ZUe,JUe,XUe,eqe,tqe,rqe,nqe,iqe,oqe,sqe,aqe,cqe,lqe,uqe,dqe,fqe,pqe,hqe,mqe,gqe,_qe,vqe,yqe,Eqe,Tqe,Sqe,bqe,Cqe,Aqe,xqe,wqe,Iqe,Pqe,Rqe,Oqe,Mqe,Nqe,Lqe,kqe,Dqe,Uqe,qqe,Fqe,jqe,Bqe,$qe,Vqe,Hqe,Gqe,zqe,Wqe,Kqe,Yqe,Qqe,Zqe,Jqe,Xqe,eFe,tFe,rFe,nFe,iFe,oFe,sFe,aFe,cFe,lFe,uFe]),dFe="alibaba_cloud",fFe="aws",pFe="azure",hFe="gcp",aGt=dFe,cGt=fFe,lGt=pFe,uGt=hFe,dGt=to([dFe,fFe,pFe,hFe]),mFe="alibaba_cloud_ecs",gFe="alibaba_cloud_fc",_Fe="aws_ec2",vFe="aws_ecs",yFe="aws_eks",EFe="aws_lambda",TFe="aws_elastic_beanstalk",SFe="azure_vm",bFe="azure_container_instances",CFe="azure_aks",AFe="azure_functions",xFe="azure_app_service",wFe="gcp_compute_engine",IFe="gcp_cloud_run",PFe="gcp_kubernetes_engine",RFe="gcp_cloud_functions",OFe="gcp_app_engine",fGt=mFe,pGt=gFe,hGt=_Fe,mGt=vFe,gGt=yFe,_Gt=EFe,vGt=TFe,yGt=SFe,EGt=bFe,TGt=CFe,SGt=AFe,bGt=xFe,CGt=wFe,AGt=IFe,xGt=PFe,wGt=RFe,IGt=OFe,PGt=to([mFe,gFe,_Fe,vFe,yFe,EFe,TFe,SFe,bFe,CFe,AFe,xFe,wFe,IFe,PFe,RFe,OFe]),MFe="ec2",NFe="fargate",RGt=MFe,OGt=NFe,MGt=to([MFe,NFe]),LFe="amd64",kFe="arm32",DFe="arm64",UFe="ia64",qFe="ppc32",FFe="ppc64",jFe="x86",NGt=LFe,LGt=kFe,kGt=DFe,DGt=UFe,UGt=qFe,qGt=FFe,FGt=jFe,jGt=to([LFe,kFe,DFe,UFe,qFe,FFe,jFe]),BFe="windows",$Fe="linux",VFe="darwin",HFe="freebsd",GFe="netbsd",zFe="openbsd",WFe="dragonflybsd",KFe="hpux",YFe="aix",QFe="solaris",ZFe="z_os",BGt=BFe,$Gt=$Fe,VGt=VFe,HGt=HFe,GGt=GFe,zGt=zFe,WGt=WFe,KGt=KFe,YGt=YFe,QGt=QFe,ZGt=ZFe,JGt=to([BFe,$Fe,VFe,HFe,GFe,zFe,WFe,KFe,YFe,QFe,ZFe]),JFe="cpp",XFe="dotnet",eje="erlang",tje="go",rje="java",nje="nodejs",ije="php",oje="python",sje="ruby",aje="webjs",XGt=JFe,ezt=XFe,tzt=eje,rzt=tje,nzt=rje,izt=nje,ozt=ije,szt=oje,azt=sje,czt=aje,lzt=to([JFe,XFe,eje,tje,rje,nje,ije,oje,sje,aje])});var lje=q(()=>{cje()});var uzt,dzt,fzt,pzt,hzt,mzt,gzt,_zt,vzt,yzt,Ezt,Tzt,Szt,bzt,Czt,Azt,xzt,wzt,Izt,Pzt,Rzt,Ozt,Mzt,Nzt,Lzt,kzt,Dzt,Uzt,qzt,Fzt,jzt,Bzt,$zt,Vzt,Hzt,Gzt,zzt,Wzt,Kzt,Yzt,Qzt,Zzt,q2n,F2n,Jzt,Xzt,eWt,tWt,rWt,nWt,iWt,oWt,sWt,aWt,cWt,j2n,lWt,uWt,dWt,fWt,B2n,pWt,hWt,mWt,gWt,_Wt,vWt,yWt,EWt,TWt,SWt,bWt,CWt,AWt,xWt,wWt,$2n,IWt,PWt,RWt,OWt,MWt,NWt,LWt,kWt,DWt,UWt,qWt,FWt,jWt,V2n,H2n,BWt,$Wt,VWt,HWt,GWt,zWt,WWt,KWt,G2n,YWt,QWt,ZWt,JWt,XWt,eKt,tKt,rKt,nKt,iKt,oKt,sKt,aKt,ine,z2n,cKt,lKt,W2n,uKt,one,K2n,dKt,fKt,pKt,hKt,mKt,sne,ane,gKt,_Kt,vKt,yKt,EKt,TKt,uje=q(()=>{uzt="aspnetcore.diagnostics.exception.result",dzt="aborted",fzt="handled",pzt="skipped",hzt="unhandled",mzt="aspnetcore.diagnostics.handler.type",gzt="aspnetcore.rate_limiting.policy",_zt="aspnetcore.rate_limiting.result",vzt="acquired",yzt="endpoint_limiter",Ezt="global_limiter",Tzt="request_canceled",Szt="aspnetcore.request.is_unhandled",bzt="aspnetcore.routing.is_fallback",Czt="aspnetcore.routing.match_status",Azt="failure",xzt="success",wzt="aspnetcore.user.is_authenticated",Izt="client.address",Pzt="client.port",Rzt="code.column.number",Ozt="code.file.path",Mzt="code.function.name",Nzt="code.line.number",Lzt="code.stacktrace",kzt="db.collection.name",Dzt="db.namespace",Uzt="db.operation.batch.size",qzt="db.operation.name",Fzt="db.query.summary",jzt="db.query.text",Bzt="db.response.status_code",$zt="db.stored_procedure.name",Vzt="db.system.name",Hzt="mariadb",Gzt="microsoft.sql_server",zzt="mysql",Wzt="postgresql",Kzt="dotnet.gc.heap.generation",Yzt="gen0",Qzt="gen1",Zzt="gen2",q2n="loh",F2n="poh",Jzt="error.type",Xzt="_OTHER",eWt="exception.escaped",tWt="exception.message",rWt="exception.stacktrace",nWt="exception.type",iWt=t=>`http.request.header.${t}`,oWt="http.request.method",sWt="_OTHER",aWt="CONNECT",cWt="DELETE",j2n="GET",lWt="HEAD",uWt="OPTIONS",dWt="PATCH",fWt="POST",B2n="PUT",pWt="TRACE",hWt="http.request.method_original",mWt="http.request.resend_count",gWt=t=>`http.response.header.${t}`,_Wt="http.response.status_code",vWt="http.route",yWt="jvm.gc.action",EWt="jvm.gc.name",TWt="jvm.memory.pool.name",SWt="jvm.memory.type",bWt="heap",CWt="non_heap",AWt="jvm.thread.daemon",xWt="jvm.thread.state",wWt="blocked",$2n="new",IWt="runnable",PWt="terminated",RWt="timed_waiting",OWt="waiting",MWt="network.local.address",NWt="network.local.port",LWt="network.peer.address",kWt="network.peer.port",DWt="network.protocol.name",UWt="network.protocol.version",qWt="network.transport",FWt="pipe",jWt="quic",V2n="tcp",H2n="udp",BWt="unix",$Wt="network.type",VWt="ipv4",HWt="ipv6",GWt="otel.scope.name",zWt="otel.scope.version",WWt="otel.status_code",KWt="ERROR",G2n="OK",YWt="otel.status_description",QWt="server.address",ZWt="server.port",JWt="service.name",XWt="service.version",eKt="signalr.connection.status",tKt="app_shutdown",rKt="normal_closure",nKt="timeout",iKt="signalr.transport",oKt="long_polling",sKt="server_sent_events",aKt="web_sockets",ine="telemetry.sdk.language",z2n="cpp",cKt="dotnet",lKt="erlang",W2n="go",uKt="java",one="nodejs",K2n="php",dKt="python",fKt="ruby",pKt="rust",hKt="swift",mKt="webjs",sne="telemetry.sdk.name",ane="telemetry.sdk.version",gKt="url.fragment",_Kt="url.full",vKt="url.path",yKt="url.query",EKt="url.scheme",TKt="user_agent.original"});var SKt,bKt,CKt,AKt,xKt,wKt,IKt,PKt,RKt,OKt,MKt,NKt,LKt,kKt,DKt,UKt,qKt,FKt,jKt,BKt,$Kt,VKt,HKt,GKt,zKt,WKt,KKt,YKt,QKt,ZKt,JKt,XKt,eYt,tYt,rYt,nYt,iYt,oYt,sYt,aYt,cYt,lYt,uYt,dYt,fYt,pYt,hYt,mYt,gYt,_Yt,vYt,dje=q(()=>{SKt="aspnetcore.diagnostics.exceptions",bKt="aspnetcore.rate_limiting.active_request_leases",CKt="aspnetcore.rate_limiting.queued_requests",AKt="aspnetcore.rate_limiting.request.time_in_queue",xKt="aspnetcore.rate_limiting.request_lease.duration",wKt="aspnetcore.rate_limiting.requests",IKt="aspnetcore.routing.match_attempts",PKt="db.client.operation.duration",RKt="dotnet.assembly.count",OKt="dotnet.exceptions",MKt="dotnet.gc.collections",NKt="dotnet.gc.heap.total_allocated",LKt="dotnet.gc.last_collection.heap.fragmentation.size",kKt="dotnet.gc.last_collection.heap.size",DKt="dotnet.gc.last_collection.memory.committed_size",UKt="dotnet.gc.pause.time",qKt="dotnet.jit.compilation.time",FKt="dotnet.jit.compiled_il.size",jKt="dotnet.jit.compiled_methods",BKt="dotnet.monitor.lock_contentions",$Kt="dotnet.process.cpu.count",VKt="dotnet.process.cpu.time",HKt="dotnet.process.memory.working_set",GKt="dotnet.thread_pool.queue.length",zKt="dotnet.thread_pool.thread.count",WKt="dotnet.thread_pool.work_item.count",KKt="dotnet.timer.count",YKt="http.client.request.duration",QKt="http.server.request.duration",ZKt="jvm.class.count",JKt="jvm.class.loaded",XKt="jvm.class.unloaded",eYt="jvm.cpu.count",tYt="jvm.cpu.recent_utilization",rYt="jvm.cpu.time",nYt="jvm.gc.duration",iYt="jvm.memory.committed",oYt="jvm.memory.limit",sYt="jvm.memory.used",aYt="jvm.memory.used_after_last_gc",cYt="jvm.thread.count",lYt="kestrel.active_connections",uYt="kestrel.active_tls_handshakes",dYt="kestrel.connection.duration",fYt="kestrel.queued_connections",pYt="kestrel.queued_requests",hYt="kestrel.rejected_connections",mYt="kestrel.tls_handshake.duration",gYt="kestrel.upgraded_connections",_Yt="signalr.server.active_connections",vYt="signalr.server.connection.duration"});var yYt,fje=q(()=>{yYt="exception"});var cne={};Xs(cne,{ASPNETCORE_DIAGNOSTICS_EXCEPTION_RESULT_VALUE_ABORTED:()=>dzt,ASPNETCORE_DIAGNOSTICS_EXCEPTION_RESULT_VALUE_HANDLED:()=>fzt,ASPNETCORE_DIAGNOSTICS_EXCEPTION_RESULT_VALUE_SKIPPED:()=>pzt,ASPNETCORE_DIAGNOSTICS_EXCEPTION_RESULT_VALUE_UNHANDLED:()=>hzt,ASPNETCORE_RATE_LIMITING_RESULT_VALUE_ACQUIRED:()=>vzt,ASPNETCORE_RATE_LIMITING_RESULT_VALUE_ENDPOINT_LIMITER:()=>yzt,ASPNETCORE_RATE_LIMITING_RESULT_VALUE_GLOBAL_LIMITER:()=>Ezt,ASPNETCORE_RATE_LIMITING_RESULT_VALUE_REQUEST_CANCELED:()=>Tzt,ASPNETCORE_ROUTING_MATCH_STATUS_VALUE_FAILURE:()=>Azt,ASPNETCORE_ROUTING_MATCH_STATUS_VALUE_SUCCESS:()=>xzt,ATTR_ASPNETCORE_DIAGNOSTICS_EXCEPTION_RESULT:()=>uzt,ATTR_ASPNETCORE_DIAGNOSTICS_HANDLER_TYPE:()=>mzt,ATTR_ASPNETCORE_RATE_LIMITING_POLICY:()=>gzt,ATTR_ASPNETCORE_RATE_LIMITING_RESULT:()=>_zt,ATTR_ASPNETCORE_REQUEST_IS_UNHANDLED:()=>Szt,ATTR_ASPNETCORE_ROUTING_IS_FALLBACK:()=>bzt,ATTR_ASPNETCORE_ROUTING_MATCH_STATUS:()=>Czt,ATTR_ASPNETCORE_USER_IS_AUTHENTICATED:()=>wzt,ATTR_CLIENT_ADDRESS:()=>Izt,ATTR_CLIENT_PORT:()=>Pzt,ATTR_CODE_COLUMN_NUMBER:()=>Rzt,ATTR_CODE_FILE_PATH:()=>Ozt,ATTR_CODE_FUNCTION_NAME:()=>Mzt,ATTR_CODE_LINE_NUMBER:()=>Nzt,ATTR_CODE_STACKTRACE:()=>Lzt,ATTR_DB_COLLECTION_NAME:()=>kzt,ATTR_DB_NAMESPACE:()=>Dzt,ATTR_DB_OPERATION_BATCH_SIZE:()=>Uzt,ATTR_DB_OPERATION_NAME:()=>qzt,ATTR_DB_QUERY_SUMMARY:()=>Fzt,ATTR_DB_QUERY_TEXT:()=>jzt,ATTR_DB_RESPONSE_STATUS_CODE:()=>Bzt,ATTR_DB_STORED_PROCEDURE_NAME:()=>$zt,ATTR_DB_SYSTEM_NAME:()=>Vzt,ATTR_DOTNET_GC_HEAP_GENERATION:()=>Kzt,ATTR_ERROR_TYPE:()=>Jzt,ATTR_EXCEPTION_ESCAPED:()=>eWt,ATTR_EXCEPTION_MESSAGE:()=>tWt,ATTR_EXCEPTION_STACKTRACE:()=>rWt,ATTR_EXCEPTION_TYPE:()=>nWt,ATTR_HTTP_REQUEST_HEADER:()=>iWt,ATTR_HTTP_REQUEST_METHOD:()=>oWt,ATTR_HTTP_REQUEST_METHOD_ORIGINAL:()=>hWt,ATTR_HTTP_REQUEST_RESEND_COUNT:()=>mWt,ATTR_HTTP_RESPONSE_HEADER:()=>gWt,ATTR_HTTP_RESPONSE_STATUS_CODE:()=>_Wt,ATTR_HTTP_ROUTE:()=>vWt,ATTR_JVM_GC_ACTION:()=>yWt,ATTR_JVM_GC_NAME:()=>EWt,ATTR_JVM_MEMORY_POOL_NAME:()=>TWt,ATTR_JVM_MEMORY_TYPE:()=>SWt,ATTR_JVM_THREAD_DAEMON:()=>AWt,ATTR_JVM_THREAD_STATE:()=>xWt,ATTR_NETWORK_LOCAL_ADDRESS:()=>MWt,ATTR_NETWORK_LOCAL_PORT:()=>NWt,ATTR_NETWORK_PEER_ADDRESS:()=>LWt,ATTR_NETWORK_PEER_PORT:()=>kWt,ATTR_NETWORK_PROTOCOL_NAME:()=>DWt,ATTR_NETWORK_PROTOCOL_VERSION:()=>UWt,ATTR_NETWORK_TRANSPORT:()=>qWt,ATTR_NETWORK_TYPE:()=>$Wt,ATTR_OTEL_SCOPE_NAME:()=>GWt,ATTR_OTEL_SCOPE_VERSION:()=>zWt,ATTR_OTEL_STATUS_CODE:()=>WWt,ATTR_OTEL_STATUS_DESCRIPTION:()=>YWt,ATTR_SERVER_ADDRESS:()=>QWt,ATTR_SERVER_PORT:()=>ZWt,ATTR_SERVICE_NAME:()=>JWt,ATTR_SERVICE_VERSION:()=>XWt,ATTR_SIGNALR_CONNECTION_STATUS:()=>eKt,ATTR_SIGNALR_TRANSPORT:()=>iKt,ATTR_TELEMETRY_SDK_LANGUAGE:()=>ine,ATTR_TELEMETRY_SDK_NAME:()=>sne,ATTR_TELEMETRY_SDK_VERSION:()=>ane,ATTR_URL_FRAGMENT:()=>gKt,ATTR_URL_FULL:()=>_Kt,ATTR_URL_PATH:()=>vKt,ATTR_URL_QUERY:()=>yKt,ATTR_URL_SCHEME:()=>EKt,ATTR_USER_AGENT_ORIGINAL:()=>TKt,AWSECSLAUNCHTYPEVALUES_EC2:()=>RGt,AWSECSLAUNCHTYPEVALUES_FARGATE:()=>OGt,AwsEcsLaunchtypeValues:()=>MGt,CLOUDPLATFORMVALUES_ALIBABA_CLOUD_ECS:()=>fGt,CLOUDPLATFORMVALUES_ALIBABA_CLOUD_FC:()=>pGt,CLOUDPLATFORMVALUES_AWS_EC2:()=>hGt,CLOUDPLATFORMVALUES_AWS_ECS:()=>mGt,CLOUDPLATFORMVALUES_AWS_EKS:()=>gGt,CLOUDPLATFORMVALUES_AWS_ELASTIC_BEANSTALK:()=>vGt,CLOUDPLATFORMVALUES_AWS_LAMBDA:()=>_Gt,CLOUDPLATFORMVALUES_AZURE_AKS:()=>TGt,CLOUDPLATFORMVALUES_AZURE_APP_SERVICE:()=>bGt,CLOUDPLATFORMVALUES_AZURE_CONTAINER_INSTANCES:()=>EGt,CLOUDPLATFORMVALUES_AZURE_FUNCTIONS:()=>SGt,CLOUDPLATFORMVALUES_AZURE_VM:()=>yGt,CLOUDPLATFORMVALUES_GCP_APP_ENGINE:()=>IGt,CLOUDPLATFORMVALUES_GCP_CLOUD_FUNCTIONS:()=>wGt,CLOUDPLATFORMVALUES_GCP_CLOUD_RUN:()=>AGt,CLOUDPLATFORMVALUES_GCP_COMPUTE_ENGINE:()=>CGt,CLOUDPLATFORMVALUES_GCP_KUBERNETES_ENGINE:()=>xGt,CLOUDPROVIDERVALUES_ALIBABA_CLOUD:()=>aGt,CLOUDPROVIDERVALUES_AWS:()=>cGt,CLOUDPROVIDERVALUES_AZURE:()=>lGt,CLOUDPROVIDERVALUES_GCP:()=>uGt,CloudPlatformValues:()=>PGt,CloudProviderValues:()=>dGt,DBCASSANDRACONSISTENCYLEVELVALUES_ALL:()=>GBt,DBCASSANDRACONSISTENCYLEVELVALUES_ANY:()=>XBt,DBCASSANDRACONSISTENCYLEVELVALUES_EACH_QUORUM:()=>zBt,DBCASSANDRACONSISTENCYLEVELVALUES_LOCAL_ONE:()=>JBt,DBCASSANDRACONSISTENCYLEVELVALUES_LOCAL_QUORUM:()=>KBt,DBCASSANDRACONSISTENCYLEVELVALUES_LOCAL_SERIAL:()=>t$t,DBCASSANDRACONSISTENCYLEVELVALUES_ONE:()=>YBt,DBCASSANDRACONSISTENCYLEVELVALUES_QUORUM:()=>WBt,DBCASSANDRACONSISTENCYLEVELVALUES_SERIAL:()=>e$t,DBCASSANDRACONSISTENCYLEVELVALUES_THREE:()=>ZBt,DBCASSANDRACONSISTENCYLEVELVALUES_TWO:()=>QBt,DBSYSTEMVALUES_ADABAS:()=>hBt,DBSYSTEMVALUES_CACHE:()=>pBt,DBSYSTEMVALUES_CASSANDRA:()=>OBt,DBSYSTEMVALUES_CLOUDSCAPE:()=>oBt,DBSYSTEMVALUES_COCKROACHDB:()=>VBt,DBSYSTEMVALUES_COLDFUSION:()=>RBt,DBSYSTEMVALUES_COSMOSDB:()=>UBt,DBSYSTEMVALUES_COUCHBASE:()=>kBt,DBSYSTEMVALUES_COUCHDB:()=>DBt,DBSYSTEMVALUES_DB2:()=>tBt,DBSYSTEMVALUES_DERBY:()=>gBt,DBSYSTEMVALUES_DYNAMODB:()=>qBt,DBSYSTEMVALUES_EDB:()=>fBt,DBSYSTEMVALUES_ELASTICSEARCH:()=>BBt,DBSYSTEMVALUES_FILEMAKER:()=>_Bt,DBSYSTEMVALUES_FIREBIRD:()=>mBt,DBSYSTEMVALUES_FIRSTSQL:()=>dBt,DBSYSTEMVALUES_GEODE:()=>jBt,DBSYSTEMVALUES_H2:()=>PBt,DBSYSTEMVALUES_HANADB:()=>lBt,DBSYSTEMVALUES_HBASE:()=>MBt,DBSYSTEMVALUES_HIVE:()=>iBt,DBSYSTEMVALUES_HSQLDB:()=>sBt,DBSYSTEMVALUES_INFORMIX:()=>vBt,DBSYSTEMVALUES_INGRES:()=>uBt,DBSYSTEMVALUES_INSTANTDB:()=>yBt,DBSYSTEMVALUES_INTERBASE:()=>EBt,DBSYSTEMVALUES_MARIADB:()=>TBt,DBSYSTEMVALUES_MAXDB:()=>cBt,DBSYSTEMVALUES_MEMCACHED:()=>$Bt,DBSYSTEMVALUES_MONGODB:()=>NBt,DBSYSTEMVALUES_MSSQL:()=>Jjt,DBSYSTEMVALUES_MYSQL:()=>Xjt,DBSYSTEMVALUES_NEO4J:()=>FBt,DBSYSTEMVALUES_NETEZZA:()=>SBt,DBSYSTEMVALUES_ORACLE:()=>eBt,DBSYSTEMVALUES_OTHER_SQL:()=>Zjt,DBSYSTEMVALUES_PERVASIVE:()=>bBt,DBSYSTEMVALUES_POINTBASE:()=>CBt,DBSYSTEMVALUES_POSTGRESQL:()=>rBt,DBSYSTEMVALUES_PROGRESS:()=>aBt,DBSYSTEMVALUES_REDIS:()=>LBt,DBSYSTEMVALUES_REDSHIFT:()=>nBt,DBSYSTEMVALUES_SQLITE:()=>ABt,DBSYSTEMVALUES_SYBASE:()=>xBt,DBSYSTEMVALUES_TERADATA:()=>wBt,DBSYSTEMVALUES_VERTICA:()=>IBt,DB_SYSTEM_NAME_VALUE_MARIADB:()=>Hzt,DB_SYSTEM_NAME_VALUE_MICROSOFT_SQL_SERVER:()=>Gzt,DB_SYSTEM_NAME_VALUE_MYSQL:()=>zzt,DB_SYSTEM_NAME_VALUE_POSTGRESQL:()=>Wzt,DOTNET_GC_HEAP_GENERATION_VALUE_GEN0:()=>Yzt,DOTNET_GC_HEAP_GENERATION_VALUE_GEN1:()=>Qzt,DOTNET_GC_HEAP_GENERATION_VALUE_GEN2:()=>Zzt,DOTNET_GC_HEAP_GENERATION_VALUE_LOH:()=>q2n,DOTNET_GC_HEAP_GENERATION_VALUE_POH:()=>F2n,DbCassandraConsistencyLevelValues:()=>r$t,DbSystemValues:()=>HBt,ERROR_TYPE_VALUE_OTHER:()=>Xzt,EVENT_EXCEPTION:()=>yYt,FAASDOCUMENTOPERATIONVALUES_DELETE:()=>d$t,FAASDOCUMENTOPERATIONVALUES_EDIT:()=>u$t,FAASDOCUMENTOPERATIONVALUES_INSERT:()=>l$t,FAASINVOKEDPROVIDERVALUES_ALIBABA_CLOUD:()=>p$t,FAASINVOKEDPROVIDERVALUES_AWS:()=>h$t,FAASINVOKEDPROVIDERVALUES_AZURE:()=>m$t,FAASINVOKEDPROVIDERVALUES_GCP:()=>g$t,FAASTRIGGERVALUES_DATASOURCE:()=>n$t,FAASTRIGGERVALUES_HTTP:()=>i$t,FAASTRIGGERVALUES_OTHER:()=>a$t,FAASTRIGGERVALUES_PUBSUB:()=>o$t,FAASTRIGGERVALUES_TIMER:()=>s$t,FaasDocumentOperationValues:()=>f$t,FaasInvokedProviderValues:()=>_$t,FaasTriggerValues:()=>c$t,HOSTARCHVALUES_AMD64:()=>NGt,HOSTARCHVALUES_ARM32:()=>LGt,HOSTARCHVALUES_ARM64:()=>kGt,HOSTARCHVALUES_IA64:()=>DGt,HOSTARCHVALUES_PPC32:()=>UGt,HOSTARCHVALUES_PPC64:()=>qGt,HOSTARCHVALUES_X86:()=>FGt,HTTPFLAVORVALUES_HTTP_1_0:()=>eVt,HTTPFLAVORVALUES_HTTP_1_1:()=>tVt,HTTPFLAVORVALUES_HTTP_2_0:()=>rVt,HTTPFLAVORVALUES_QUIC:()=>iVt,HTTPFLAVORVALUES_SPDY:()=>nVt,HTTP_REQUEST_METHOD_VALUE_CONNECT:()=>aWt,HTTP_REQUEST_METHOD_VALUE_DELETE:()=>cWt,HTTP_REQUEST_METHOD_VALUE_GET:()=>j2n,HTTP_REQUEST_METHOD_VALUE_HEAD:()=>lWt,HTTP_REQUEST_METHOD_VALUE_OPTIONS:()=>uWt,HTTP_REQUEST_METHOD_VALUE_OTHER:()=>sWt,HTTP_REQUEST_METHOD_VALUE_PATCH:()=>dWt,HTTP_REQUEST_METHOD_VALUE_POST:()=>fWt,HTTP_REQUEST_METHOD_VALUE_PUT:()=>B2n,HTTP_REQUEST_METHOD_VALUE_TRACE:()=>pWt,HostArchValues:()=>jGt,HttpFlavorValues:()=>oVt,JVM_MEMORY_TYPE_VALUE_HEAP:()=>bWt,JVM_MEMORY_TYPE_VALUE_NON_HEAP:()=>CWt,JVM_THREAD_STATE_VALUE_BLOCKED:()=>wWt,JVM_THREAD_STATE_VALUE_NEW:()=>$2n,JVM_THREAD_STATE_VALUE_RUNNABLE:()=>IWt,JVM_THREAD_STATE_VALUE_TERMINATED:()=>PWt,JVM_THREAD_STATE_VALUE_TIMED_WAITING:()=>RWt,JVM_THREAD_STATE_VALUE_WAITING:()=>OWt,MESSAGETYPEVALUES_RECEIVED:()=>OVt,MESSAGETYPEVALUES_SENT:()=>RVt,MESSAGINGDESTINATIONKINDVALUES_QUEUE:()=>sVt,MESSAGINGDESTINATIONKINDVALUES_TOPIC:()=>aVt,MESSAGINGOPERATIONVALUES_PROCESS:()=>uVt,MESSAGINGOPERATIONVALUES_RECEIVE:()=>lVt,METRIC_ASPNETCORE_DIAGNOSTICS_EXCEPTIONS:()=>SKt,METRIC_ASPNETCORE_RATE_LIMITING_ACTIVE_REQUEST_LEASES:()=>bKt,METRIC_ASPNETCORE_RATE_LIMITING_QUEUED_REQUESTS:()=>CKt,METRIC_ASPNETCORE_RATE_LIMITING_REQUESTS:()=>wKt,METRIC_ASPNETCORE_RATE_LIMITING_REQUEST_LEASE_DURATION:()=>xKt,METRIC_ASPNETCORE_RATE_LIMITING_REQUEST_TIME_IN_QUEUE:()=>AKt,METRIC_ASPNETCORE_ROUTING_MATCH_ATTEMPTS:()=>IKt,METRIC_DB_CLIENT_OPERATION_DURATION:()=>PKt,METRIC_DOTNET_ASSEMBLY_COUNT:()=>RKt,METRIC_DOTNET_EXCEPTIONS:()=>OKt,METRIC_DOTNET_GC_COLLECTIONS:()=>MKt,METRIC_DOTNET_GC_HEAP_TOTAL_ALLOCATED:()=>NKt,METRIC_DOTNET_GC_LAST_COLLECTION_HEAP_FRAGMENTATION_SIZE:()=>LKt,METRIC_DOTNET_GC_LAST_COLLECTION_HEAP_SIZE:()=>kKt,METRIC_DOTNET_GC_LAST_COLLECTION_MEMORY_COMMITTED_SIZE:()=>DKt,METRIC_DOTNET_GC_PAUSE_TIME:()=>UKt,METRIC_DOTNET_JIT_COMPILATION_TIME:()=>qKt,METRIC_DOTNET_JIT_COMPILED_IL_SIZE:()=>FKt,METRIC_DOTNET_JIT_COMPILED_METHODS:()=>jKt,METRIC_DOTNET_MONITOR_LOCK_CONTENTIONS:()=>BKt,METRIC_DOTNET_PROCESS_CPU_COUNT:()=>$Kt,METRIC_DOTNET_PROCESS_CPU_TIME:()=>VKt,METRIC_DOTNET_PROCESS_MEMORY_WORKING_SET:()=>HKt,METRIC_DOTNET_THREAD_POOL_QUEUE_LENGTH:()=>GKt,METRIC_DOTNET_THREAD_POOL_THREAD_COUNT:()=>zKt,METRIC_DOTNET_THREAD_POOL_WORK_ITEM_COUNT:()=>WKt,METRIC_DOTNET_TIMER_COUNT:()=>KKt,METRIC_HTTP_CLIENT_REQUEST_DURATION:()=>YKt,METRIC_HTTP_SERVER_REQUEST_DURATION:()=>QKt,METRIC_JVM_CLASS_COUNT:()=>ZKt,METRIC_JVM_CLASS_LOADED:()=>JKt,METRIC_JVM_CLASS_UNLOADED:()=>XKt,METRIC_JVM_CPU_COUNT:()=>eYt,METRIC_JVM_CPU_RECENT_UTILIZATION:()=>tYt,METRIC_JVM_CPU_TIME:()=>rYt,METRIC_JVM_GC_DURATION:()=>nYt,METRIC_JVM_MEMORY_COMMITTED:()=>iYt,METRIC_JVM_MEMORY_LIMIT:()=>oYt,METRIC_JVM_MEMORY_USED:()=>sYt,METRIC_JVM_MEMORY_USED_AFTER_LAST_GC:()=>aYt,METRIC_JVM_THREAD_COUNT:()=>cYt,METRIC_KESTREL_ACTIVE_CONNECTIONS:()=>lYt,METRIC_KESTREL_ACTIVE_TLS_HANDSHAKES:()=>uYt,METRIC_KESTREL_CONNECTION_DURATION:()=>dYt,METRIC_KESTREL_QUEUED_CONNECTIONS:()=>fYt,METRIC_KESTREL_QUEUED_REQUESTS:()=>pYt,METRIC_KESTREL_REJECTED_CONNECTIONS:()=>hYt,METRIC_KESTREL_TLS_HANDSHAKE_DURATION:()=>mYt,METRIC_KESTREL_UPGRADED_CONNECTIONS:()=>gYt,METRIC_SIGNALR_SERVER_ACTIVE_CONNECTIONS:()=>_Yt,METRIC_SIGNALR_SERVER_CONNECTION_DURATION:()=>vYt,MessageTypeValues:()=>MVt,MessagingDestinationKindValues:()=>cVt,MessagingOperationValues:()=>dVt,NETHOSTCONNECTIONSUBTYPEVALUES_CDMA:()=>k$t,NETHOSTCONNECTIONSUBTYPEVALUES_CDMA2000_1XRTT:()=>q$t,NETHOSTCONNECTIONSUBTYPEVALUES_EDGE:()=>N$t,NETHOSTCONNECTIONSUBTYPEVALUES_EHRPD:()=>G$t,NETHOSTCONNECTIONSUBTYPEVALUES_EVDO_0:()=>D$t,NETHOSTCONNECTIONSUBTYPEVALUES_EVDO_A:()=>U$t,NETHOSTCONNECTIONSUBTYPEVALUES_EVDO_B:()=>V$t,NETHOSTCONNECTIONSUBTYPEVALUES_GPRS:()=>M$t,NETHOSTCONNECTIONSUBTYPEVALUES_GSM:()=>W$t,NETHOSTCONNECTIONSUBTYPEVALUES_HSDPA:()=>F$t,NETHOSTCONNECTIONSUBTYPEVALUES_HSPA:()=>B$t,NETHOSTCONNECTIONSUBTYPEVALUES_HSPAP:()=>z$t,NETHOSTCONNECTIONSUBTYPEVALUES_HSUPA:()=>j$t,NETHOSTCONNECTIONSUBTYPEVALUES_IDEN:()=>$$t,NETHOSTCONNECTIONSUBTYPEVALUES_IWLAN:()=>Y$t,NETHOSTCONNECTIONSUBTYPEVALUES_LTE:()=>H$t,NETHOSTCONNECTIONSUBTYPEVALUES_LTE_CA:()=>J$t,NETHOSTCONNECTIONSUBTYPEVALUES_NR:()=>Q$t,NETHOSTCONNECTIONSUBTYPEVALUES_NRNSA:()=>Z$t,NETHOSTCONNECTIONSUBTYPEVALUES_TD_SCDMA:()=>K$t,NETHOSTCONNECTIONSUBTYPEVALUES_UMTS:()=>L$t,NETHOSTCONNECTIONTYPEVALUES_CELL:()=>I$t,NETHOSTCONNECTIONTYPEVALUES_UNAVAILABLE:()=>P$t,NETHOSTCONNECTIONTYPEVALUES_UNKNOWN:()=>R$t,NETHOSTCONNECTIONTYPEVALUES_WIFI:()=>x$t,NETHOSTCONNECTIONTYPEVALUES_WIRED:()=>w$t,NETTRANSPORTVALUES_INPROC:()=>b$t,NETTRANSPORTVALUES_IP:()=>E$t,NETTRANSPORTVALUES_IP_TCP:()=>v$t,NETTRANSPORTVALUES_IP_UDP:()=>y$t,NETTRANSPORTVALUES_OTHER:()=>C$t,NETTRANSPORTVALUES_PIPE:()=>S$t,NETTRANSPORTVALUES_UNIX:()=>T$t,NETWORK_TRANSPORT_VALUE_PIPE:()=>FWt,NETWORK_TRANSPORT_VALUE_QUIC:()=>jWt,NETWORK_TRANSPORT_VALUE_TCP:()=>V2n,NETWORK_TRANSPORT_VALUE_UDP:()=>H2n,NETWORK_TRANSPORT_VALUE_UNIX:()=>BWt,NETWORK_TYPE_VALUE_IPV4:()=>VWt,NETWORK_TYPE_VALUE_IPV6:()=>HWt,NetHostConnectionSubtypeValues:()=>X$t,NetHostConnectionTypeValues:()=>O$t,NetTransportValues:()=>A$t,OSTYPEVALUES_AIX:()=>YGt,OSTYPEVALUES_DARWIN:()=>VGt,OSTYPEVALUES_DRAGONFLYBSD:()=>WGt,OSTYPEVALUES_FREEBSD:()=>HGt,OSTYPEVALUES_HPUX:()=>KGt,OSTYPEVALUES_LINUX:()=>$Gt,OSTYPEVALUES_NETBSD:()=>GGt,OSTYPEVALUES_OPENBSD:()=>zGt,OSTYPEVALUES_SOLARIS:()=>QGt,OSTYPEVALUES_WINDOWS:()=>BGt,OSTYPEVALUES_Z_OS:()=>ZGt,OTEL_STATUS_CODE_VALUE_ERROR:()=>KWt,OTEL_STATUS_CODE_VALUE_OK:()=>G2n,OsTypeValues:()=>JGt,RPCGRPCSTATUSCODEVALUES_ABORTED:()=>SVt,RPCGRPCSTATUSCODEVALUES_ALREADY_EXISTS:()=>vVt,RPCGRPCSTATUSCODEVALUES_CANCELLED:()=>pVt,RPCGRPCSTATUSCODEVALUES_DATA_LOSS:()=>wVt,RPCGRPCSTATUSCODEVALUES_DEADLINE_EXCEEDED:()=>gVt,RPCGRPCSTATUSCODEVALUES_FAILED_PRECONDITION:()=>TVt,RPCGRPCSTATUSCODEVALUES_INTERNAL:()=>AVt,RPCGRPCSTATUSCODEVALUES_INVALID_ARGUMENT:()=>mVt,RPCGRPCSTATUSCODEVALUES_NOT_FOUND:()=>_Vt,RPCGRPCSTATUSCODEVALUES_OK:()=>fVt,RPCGRPCSTATUSCODEVALUES_OUT_OF_RANGE:()=>bVt,RPCGRPCSTATUSCODEVALUES_PERMISSION_DENIED:()=>yVt,RPCGRPCSTATUSCODEVALUES_RESOURCE_EXHAUSTED:()=>EVt,RPCGRPCSTATUSCODEVALUES_UNAUTHENTICATED:()=>IVt,RPCGRPCSTATUSCODEVALUES_UNAVAILABLE:()=>xVt,RPCGRPCSTATUSCODEVALUES_UNIMPLEMENTED:()=>CVt,RPCGRPCSTATUSCODEVALUES_UNKNOWN:()=>hVt,RpcGrpcStatusCodeValues:()=>PVt,SEMATTRS_AWS_DYNAMODB_ATTRIBUTES_TO_GET:()=>ojt,SEMATTRS_AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:()=>_jt,SEMATTRS_AWS_DYNAMODB_CONSISTENT_READ:()=>rjt,SEMATTRS_AWS_DYNAMODB_CONSUMED_CAPACITY:()=>JFt,SEMATTRS_AWS_DYNAMODB_COUNT:()=>mjt,SEMATTRS_AWS_DYNAMODB_EXCLUSIVE_START_TABLE:()=>ujt,SEMATTRS_AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:()=>cjt,SEMATTRS_AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:()=>vjt,SEMATTRS_AWS_DYNAMODB_INDEX_NAME:()=>sjt,SEMATTRS_AWS_DYNAMODB_ITEM_COLLECTION_METRICS:()=>XFt,SEMATTRS_AWS_DYNAMODB_LIMIT:()=>ijt,SEMATTRS_AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:()=>ljt,SEMATTRS_AWS_DYNAMODB_PROJECTION:()=>njt,SEMATTRS_AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:()=>ejt,SEMATTRS_AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:()=>tjt,SEMATTRS_AWS_DYNAMODB_SCANNED_COUNT:()=>gjt,SEMATTRS_AWS_DYNAMODB_SCAN_FORWARD:()=>fjt,SEMATTRS_AWS_DYNAMODB_SEGMENT:()=>pjt,SEMATTRS_AWS_DYNAMODB_SELECT:()=>ajt,SEMATTRS_AWS_DYNAMODB_TABLE_COUNT:()=>djt,SEMATTRS_AWS_DYNAMODB_TABLE_NAMES:()=>ZFt,SEMATTRS_AWS_DYNAMODB_TOTAL_SEGMENTS:()=>hjt,SEMATTRS_AWS_LAMBDA_INVOKED_ARN:()=>Rqt,SEMATTRS_CODE_FILEPATH:()=>LFt,SEMATTRS_CODE_FUNCTION:()=>MFt,SEMATTRS_CODE_LINENO:()=>kFt,SEMATTRS_CODE_NAMESPACE:()=>NFt,SEMATTRS_DB_CASSANDRA_CONSISTENCY_LEVEL:()=>Bqt,SEMATTRS_DB_CASSANDRA_COORDINATOR_DC:()=>zqt,SEMATTRS_DB_CASSANDRA_COORDINATOR_ID:()=>Gqt,SEMATTRS_DB_CASSANDRA_IDEMPOTENCE:()=>Vqt,SEMATTRS_DB_CASSANDRA_KEYSPACE:()=>Fqt,SEMATTRS_DB_CASSANDRA_PAGE_SIZE:()=>jqt,SEMATTRS_DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:()=>Hqt,SEMATTRS_DB_CASSANDRA_TABLE:()=>$qt,SEMATTRS_DB_CONNECTION_STRING:()=>Mqt,SEMATTRS_DB_HBASE_NAMESPACE:()=>Wqt,SEMATTRS_DB_JDBC_DRIVER_CLASSNAME:()=>Lqt,SEMATTRS_DB_MONGODB_COLLECTION:()=>Yqt,SEMATTRS_DB_MSSQL_INSTANCE_NAME:()=>qqt,SEMATTRS_DB_NAME:()=>kqt,SEMATTRS_DB_OPERATION:()=>Uqt,SEMATTRS_DB_REDIS_DATABASE_INDEX:()=>Kqt,SEMATTRS_DB_SQL_TABLE:()=>Qqt,SEMATTRS_DB_STATEMENT:()=>Dqt,SEMATTRS_DB_SYSTEM:()=>Oqt,SEMATTRS_DB_USER:()=>Nqt,SEMATTRS_ENDUSER_ID:()=>wFt,SEMATTRS_ENDUSER_ROLE:()=>IFt,SEMATTRS_ENDUSER_SCOPE:()=>PFt,SEMATTRS_EXCEPTION_ESCAPED:()=>eFt,SEMATTRS_EXCEPTION_MESSAGE:()=>Jqt,SEMATTRS_EXCEPTION_STACKTRACE:()=>Xqt,SEMATTRS_EXCEPTION_TYPE:()=>Zqt,SEMATTRS_FAAS_COLDSTART:()=>lFt,SEMATTRS_FAAS_CRON:()=>cFt,SEMATTRS_FAAS_DOCUMENT_COLLECTION:()=>nFt,SEMATTRS_FAAS_DOCUMENT_NAME:()=>sFt,SEMATTRS_FAAS_DOCUMENT_OPERATION:()=>iFt,SEMATTRS_FAAS_DOCUMENT_TIME:()=>oFt,SEMATTRS_FAAS_EXECUTION:()=>rFt,SEMATTRS_FAAS_INVOKED_NAME:()=>uFt,SEMATTRS_FAAS_INVOKED_PROVIDER:()=>dFt,SEMATTRS_FAAS_INVOKED_REGION:()=>fFt,SEMATTRS_FAAS_TIME:()=>aFt,SEMATTRS_FAAS_TRIGGER:()=>tFt,SEMATTRS_HTTP_CLIENT_IP:()=>QFt,SEMATTRS_HTTP_FLAVOR:()=>$Ft,SEMATTRS_HTTP_HOST:()=>FFt,SEMATTRS_HTTP_METHOD:()=>DFt,SEMATTRS_HTTP_REQUEST_CONTENT_LENGTH:()=>HFt,SEMATTRS_HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:()=>GFt,SEMATTRS_HTTP_RESPONSE_CONTENT_LENGTH:()=>zFt,SEMATTRS_HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:()=>WFt,SEMATTRS_HTTP_ROUTE:()=>YFt,SEMATTRS_HTTP_SCHEME:()=>jFt,SEMATTRS_HTTP_SERVER_NAME:()=>KFt,SEMATTRS_HTTP_STATUS_CODE:()=>BFt,SEMATTRS_HTTP_TARGET:()=>qFt,SEMATTRS_HTTP_URL:()=>UFt,SEMATTRS_HTTP_USER_AGENT:()=>VFt,SEMATTRS_MESSAGE_COMPRESSED_SIZE:()=>Kjt,SEMATTRS_MESSAGE_ID:()=>Wjt,SEMATTRS_MESSAGE_TYPE:()=>zjt,SEMATTRS_MESSAGE_UNCOMPRESSED_SIZE:()=>Yjt,SEMATTRS_MESSAGING_CONSUMER_ID:()=>Ojt,SEMATTRS_MESSAGING_CONVERSATION_ID:()=>wjt,SEMATTRS_MESSAGING_DESTINATION:()=>Ejt,SEMATTRS_MESSAGING_DESTINATION_KIND:()=>Tjt,SEMATTRS_MESSAGING_KAFKA_CLIENT_ID:()=>kjt,SEMATTRS_MESSAGING_KAFKA_CONSUMER_GROUP:()=>Ljt,SEMATTRS_MESSAGING_KAFKA_MESSAGE_KEY:()=>Njt,SEMATTRS_MESSAGING_KAFKA_PARTITION:()=>Djt,SEMATTRS_MESSAGING_KAFKA_TOMBSTONE:()=>Ujt,SEMATTRS_MESSAGING_MESSAGE_ID:()=>xjt,SEMATTRS_MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:()=>Pjt,SEMATTRS_MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:()=>Ijt,SEMATTRS_MESSAGING_OPERATION:()=>Rjt,SEMATTRS_MESSAGING_PROTOCOL:()=>bjt,SEMATTRS_MESSAGING_PROTOCOL_VERSION:()=>Cjt,SEMATTRS_MESSAGING_RABBITMQ_ROUTING_KEY:()=>Mjt,SEMATTRS_MESSAGING_SYSTEM:()=>yjt,SEMATTRS_MESSAGING_TEMP_DESTINATION:()=>Sjt,SEMATTRS_MESSAGING_URL:()=>Ajt,SEMATTRS_NET_HOST_CARRIER_ICC:()=>AFt,SEMATTRS_NET_HOST_CARRIER_MCC:()=>bFt,SEMATTRS_NET_HOST_CARRIER_MNC:()=>CFt,SEMATTRS_NET_HOST_CARRIER_NAME:()=>SFt,SEMATTRS_NET_HOST_CONNECTION_SUBTYPE:()=>TFt,SEMATTRS_NET_HOST_CONNECTION_TYPE:()=>EFt,SEMATTRS_NET_HOST_IP:()=>_Ft,SEMATTRS_NET_HOST_NAME:()=>yFt,SEMATTRS_NET_HOST_PORT:()=>vFt,SEMATTRS_NET_PEER_IP:()=>hFt,SEMATTRS_NET_PEER_NAME:()=>gFt,SEMATTRS_NET_PEER_PORT:()=>mFt,SEMATTRS_NET_TRANSPORT:()=>pFt,SEMATTRS_PEER_SERVICE:()=>xFt,SEMATTRS_RPC_GRPC_STATUS_CODE:()=>Bjt,SEMATTRS_RPC_JSONRPC_ERROR_CODE:()=>Hjt,SEMATTRS_RPC_JSONRPC_ERROR_MESSAGE:()=>Gjt,SEMATTRS_RPC_JSONRPC_REQUEST_ID:()=>Vjt,SEMATTRS_RPC_JSONRPC_VERSION:()=>$jt,SEMATTRS_RPC_METHOD:()=>jjt,SEMATTRS_RPC_SERVICE:()=>Fjt,SEMATTRS_RPC_SYSTEM:()=>qjt,SEMATTRS_THREAD_ID:()=>RFt,SEMATTRS_THREAD_NAME:()=>OFt,SEMRESATTRS_AWS_ECS_CLUSTER_ARN:()=>FVt,SEMRESATTRS_AWS_ECS_CONTAINER_ARN:()=>qVt,SEMRESATTRS_AWS_ECS_LAUNCHTYPE:()=>jVt,SEMRESATTRS_AWS_ECS_TASK_ARN:()=>BVt,SEMRESATTRS_AWS_ECS_TASK_FAMILY:()=>$Vt,SEMRESATTRS_AWS_ECS_TASK_REVISION:()=>VVt,SEMRESATTRS_AWS_EKS_CLUSTER_ARN:()=>HVt,SEMRESATTRS_AWS_LOG_GROUP_ARNS:()=>zVt,SEMRESATTRS_AWS_LOG_GROUP_NAMES:()=>GVt,SEMRESATTRS_AWS_LOG_STREAM_ARNS:()=>KVt,SEMRESATTRS_AWS_LOG_STREAM_NAMES:()=>WVt,SEMRESATTRS_CLOUD_ACCOUNT_ID:()=>LVt,SEMRESATTRS_CLOUD_AVAILABILITY_ZONE:()=>DVt,SEMRESATTRS_CLOUD_PLATFORM:()=>UVt,SEMRESATTRS_CLOUD_PROVIDER:()=>NVt,SEMRESATTRS_CLOUD_REGION:()=>kVt,SEMRESATTRS_CONTAINER_ID:()=>QVt,SEMRESATTRS_CONTAINER_IMAGE_NAME:()=>JVt,SEMRESATTRS_CONTAINER_IMAGE_TAG:()=>XVt,SEMRESATTRS_CONTAINER_NAME:()=>YVt,SEMRESATTRS_CONTAINER_RUNTIME:()=>ZVt,SEMRESATTRS_DEPLOYMENT_ENVIRONMENT:()=>eHt,SEMRESATTRS_DEVICE_ID:()=>tHt,SEMRESATTRS_DEVICE_MODEL_IDENTIFIER:()=>rHt,SEMRESATTRS_DEVICE_MODEL_NAME:()=>nHt,SEMRESATTRS_FAAS_ID:()=>oHt,SEMRESATTRS_FAAS_INSTANCE:()=>aHt,SEMRESATTRS_FAAS_MAX_MEMORY:()=>cHt,SEMRESATTRS_FAAS_NAME:()=>iHt,SEMRESATTRS_FAAS_VERSION:()=>sHt,SEMRESATTRS_HOST_ARCH:()=>fHt,SEMRESATTRS_HOST_ID:()=>lHt,SEMRESATTRS_HOST_IMAGE_ID:()=>hHt,SEMRESATTRS_HOST_IMAGE_NAME:()=>pHt,SEMRESATTRS_HOST_IMAGE_VERSION:()=>mHt,SEMRESATTRS_HOST_NAME:()=>uHt,SEMRESATTRS_HOST_TYPE:()=>dHt,SEMRESATTRS_K8S_CLUSTER_NAME:()=>gHt,SEMRESATTRS_K8S_CONTAINER_NAME:()=>SHt,SEMRESATTRS_K8S_CRONJOB_NAME:()=>LHt,SEMRESATTRS_K8S_CRONJOB_UID:()=>NHt,SEMRESATTRS_K8S_DAEMONSET_NAME:()=>RHt,SEMRESATTRS_K8S_DAEMONSET_UID:()=>PHt,SEMRESATTRS_K8S_DEPLOYMENT_NAME:()=>xHt,SEMRESATTRS_K8S_DEPLOYMENT_UID:()=>AHt,SEMRESATTRS_K8S_JOB_NAME:()=>MHt,SEMRESATTRS_K8S_JOB_UID:()=>OHt,SEMRESATTRS_K8S_NAMESPACE_NAME:()=>yHt,SEMRESATTRS_K8S_NODE_NAME:()=>_Ht,SEMRESATTRS_K8S_NODE_UID:()=>vHt,SEMRESATTRS_K8S_POD_NAME:()=>THt,SEMRESATTRS_K8S_POD_UID:()=>EHt,SEMRESATTRS_K8S_REPLICASET_NAME:()=>CHt,SEMRESATTRS_K8S_REPLICASET_UID:()=>bHt,SEMRESATTRS_K8S_STATEFULSET_NAME:()=>IHt,SEMRESATTRS_K8S_STATEFULSET_UID:()=>wHt,SEMRESATTRS_OS_DESCRIPTION:()=>DHt,SEMRESATTRS_OS_NAME:()=>UHt,SEMRESATTRS_OS_TYPE:()=>kHt,SEMRESATTRS_OS_VERSION:()=>qHt,SEMRESATTRS_PROCESS_COMMAND:()=>$Ht,SEMRESATTRS_PROCESS_COMMAND_ARGS:()=>HHt,SEMRESATTRS_PROCESS_COMMAND_LINE:()=>VHt,SEMRESATTRS_PROCESS_EXECUTABLE_NAME:()=>jHt,SEMRESATTRS_PROCESS_EXECUTABLE_PATH:()=>BHt,SEMRESATTRS_PROCESS_OWNER:()=>GHt,SEMRESATTRS_PROCESS_PID:()=>FHt,SEMRESATTRS_PROCESS_RUNTIME_DESCRIPTION:()=>KHt,SEMRESATTRS_PROCESS_RUNTIME_NAME:()=>zHt,SEMRESATTRS_PROCESS_RUNTIME_VERSION:()=>WHt,SEMRESATTRS_SERVICE_INSTANCE_ID:()=>ZHt,SEMRESATTRS_SERVICE_NAME:()=>YHt,SEMRESATTRS_SERVICE_NAMESPACE:()=>QHt,SEMRESATTRS_SERVICE_VERSION:()=>JHt,SEMRESATTRS_TELEMETRY_AUTO_VERSION:()=>rGt,SEMRESATTRS_TELEMETRY_SDK_LANGUAGE:()=>eGt,SEMRESATTRS_TELEMETRY_SDK_NAME:()=>XHt,SEMRESATTRS_TELEMETRY_SDK_VERSION:()=>tGt,SEMRESATTRS_WEBENGINE_DESCRIPTION:()=>oGt,SEMRESATTRS_WEBENGINE_NAME:()=>nGt,SEMRESATTRS_WEBENGINE_VERSION:()=>iGt,SIGNALR_CONNECTION_STATUS_VALUE_APP_SHUTDOWN:()=>tKt,SIGNALR_CONNECTION_STATUS_VALUE_NORMAL_CLOSURE:()=>rKt,SIGNALR_CONNECTION_STATUS_VALUE_TIMEOUT:()=>nKt,SIGNALR_TRANSPORT_VALUE_LONG_POLLING:()=>oKt,SIGNALR_TRANSPORT_VALUE_SERVER_SENT_EVENTS:()=>sKt,SIGNALR_TRANSPORT_VALUE_WEB_SOCKETS:()=>aKt,SemanticAttributes:()=>Qjt,SemanticResourceAttributes:()=>sGt,TELEMETRYSDKLANGUAGEVALUES_CPP:()=>XGt,TELEMETRYSDKLANGUAGEVALUES_DOTNET:()=>ezt,TELEMETRYSDKLANGUAGEVALUES_ERLANG:()=>tzt,TELEMETRYSDKLANGUAGEVALUES_GO:()=>rzt,TELEMETRYSDKLANGUAGEVALUES_JAVA:()=>nzt,TELEMETRYSDKLANGUAGEVALUES_NODEJS:()=>izt,TELEMETRYSDKLANGUAGEVALUES_PHP:()=>ozt,TELEMETRYSDKLANGUAGEVALUES_PYTHON:()=>szt,TELEMETRYSDKLANGUAGEVALUES_RUBY:()=>azt,TELEMETRYSDKLANGUAGEVALUES_WEBJS:()=>czt,TELEMETRY_SDK_LANGUAGE_VALUE_CPP:()=>z2n,TELEMETRY_SDK_LANGUAGE_VALUE_DOTNET:()=>cKt,TELEMETRY_SDK_LANGUAGE_VALUE_ERLANG:()=>lKt,TELEMETRY_SDK_LANGUAGE_VALUE_GO:()=>W2n,TELEMETRY_SDK_LANGUAGE_VALUE_JAVA:()=>uKt,TELEMETRY_SDK_LANGUAGE_VALUE_NODEJS:()=>one,TELEMETRY_SDK_LANGUAGE_VALUE_PHP:()=>K2n,TELEMETRY_SDK_LANGUAGE_VALUE_PYTHON:()=>dKt,TELEMETRY_SDK_LANGUAGE_VALUE_RUBY:()=>fKt,TELEMETRY_SDK_LANGUAGE_VALUE_RUST:()=>pKt,TELEMETRY_SDK_LANGUAGE_VALUE_SWIFT:()=>hKt,TELEMETRY_SDK_LANGUAGE_VALUE_WEBJS:()=>mKt,TelemetrySdkLanguageValues:()=>lzt});var L7=q(()=>{UUe();lje();uje();dje();fje()});var pje,hje=q(()=>{pje="process.runtime.name"});var k7,mje=q(()=>{zDe();L7();hje();k7={[sne]:"opentelemetry",[pje]:"node",[ine]:one,[ane]:GDe}});var gje=q(()=>{BDe();$De();HDe();mje()});var lne=q(()=>{gje()});function hx(t){let e=t/1e3,r=Math.trunc(e),n=Math.round(t%1e3*TYt);return[r,n]}function U7(){let t=k_.timeOrigin;if(typeof t!="number"){let e=k_;t=e.timing&&e.timing.fetchStart}return t}function une(t){let e=hx(U7()),r=hx(typeof t=="number"?t:k_.now());return dne(e,r)}function vje(t){if(q7(t))return t;if(typeof t=="number")return t<U7()?une(t):hx(t);if(t instanceof Date)return hx(t.getTime());throw TypeError("Invalid input type")}function yje(t,e){let r=e[0]-t[0],n=e[1]-t[1];return n<0&&(r-=1,n+=D7),[r,n]}function Eje(t){let e=_je,r=`${"0".repeat(e)}${t[1]}Z`,n=r.substring(r.length-e-1);return new Date(t[0]*1e3).toISOString().replace("000Z",n)}function Tje(t){return t[0]*D7+t[1]}function Sje(t){return t[0]*1e3+t[1]/1e6}function bje(t){return t[0]*1e6+t[1]/1e3}function q7(t){return Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number"}function Cje(t){return q7(t)||typeof t=="number"||t instanceof Date}function dne(t,e){let r=[t[0]+e[0],t[1]+e[1]];return r[1]>=D7&&(r[1]-=D7,r[0]+=1),r}var _je,EYt,TYt,D7,Aje=q(()=>{lne();_je=9,EYt=6,TYt=Math.pow(10,EYt),D7=Math.pow(10,_je)});function xje(t){typeof t!="number"&&t.unref()}var wje=q(()=>{});var F7,Ije=q(()=>{(function(t){t[t.SUCCESS=0]="SUCCESS",t[t.FAILED=1]="FAILED"})(F7||(F7={}))});var j7,Pje=q(()=>{Ht();j7=class{_propagators;_fields;constructor(e={}){this._propagators=e.propagators??[],this._fields=Array.from(new Set(this._propagators.map(r=>typeof r.fields=="function"?r.fields():[]).reduce((r,n)=>r.concat(n),[])))}inject(e,r,n){for(let o of this._propagators)try{o.inject(e,r,n)}catch(s){it.warn(`Failed to inject with ${o.constructor.name}. Err: ${s.message}`)}}extract(e,r,n){return this._propagators.reduce((o,s)=>{try{return s.extract(o,r,n)}catch(a){it.warn(`Failed to extract with ${s.constructor.name}. Err: ${a.message}`)}return o},e)}fields(){return this._fields.slice()}}});function Rje(t){return CYt.test(t)}function Oje(t){return AYt.test(t)&&!xYt.test(t)}var fne,SYt,bYt,CYt,AYt,xYt,Mje=q(()=>{fne="[_0-9a-z-*/]",SYt=`[a-z]${fne}{0,255}`,bYt=`[a-z0-9]${fne}{0,240}@[a-z]${fne}{0,13}`,CYt=new RegExp(`^(?:${SYt}|${bYt})$`),AYt=/^[ -~]{0,255}[!-~]$/,xYt=/,|=/});var Nje,wYt,Lje,kje,mx,pne=q(()=>{Mje();Nje=32,wYt=512,Lje=",",kje="=",mx=class t{_internalState=new Map;constructor(e){e&&this._parse(e)}set(e,r){let n=this._clone();return n._internalState.has(e)&&n._internalState.delete(e),n._internalState.set(e,r),n}unset(e){let r=this._clone();return r._internalState.delete(e),r}get(e){return this._internalState.get(e)}serialize(){return this._keys().reduce((e,r)=>(e.push(r+kje+this.get(r)),e),[]).join(Lje)}_parse(e){e.length>wYt||(this._internalState=e.split(Lje).reverse().reduce((r,n)=>{let o=n.trim(),s=o.indexOf(kje);if(s!==-1){let a=o.slice(0,s),c=o.slice(s+1,n.length);Rje(a)&&Oje(c)&&r.set(a,c)}return r},new Map),this._internalState.size>Nje&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,Nje))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let e=new t;return e._internalState=new Map(this._internalState),e}}});function hne(t){let e=NYt.exec(t);return!e||e[1]==="00"&&e[5]?null:{traceId:e[2],spanId:e[3],traceFlags:parseInt(e[4],16)}}var X5,eM,IYt,PYt,RYt,OYt,MYt,NYt,B7,Dje=q(()=>{Ht();Z5();pne();X5="traceparent",eM="tracestate",IYt="00",PYt="(?!ff)[\\da-f]{2}",RYt="(?![0]{32})[\\da-f]{32}",OYt="(?![0]{16})[\\da-f]{16}",MYt="[\\da-f]{2}",NYt=new RegExp(`^\\s?(${PYt})-(${RYt})-(${OYt})-(${MYt})(-.*)?\\s?$`);B7=class{inject(e,r,n){let o=Gn.getSpanContext(e);if(!o||px(e)||!Cc(o))return;let s=`${IYt}-${o.traceId}-${o.spanId}-0${Number(o.traceFlags||wi.NONE).toString(16)}`;n.set(r,X5,s),o.traceState&&n.set(r,eM,o.traceState.serialize())}extract(e,r,n){let o=n.get(r,X5);if(!o)return e;let s=Array.isArray(o)?o[0]:o;if(typeof s!="string")return e;let a=hne(s);if(!a)return e;a.isRemote=!0;let c=n.get(r,eM);if(c){let l=Array.isArray(c)?c.join(","):c;a.traceState=new mx(typeof l=="string"?l:void 0)}return Gn.setSpanContext(e,a)}fields(){return[X5,eM]}}});function Uje(t,e){return t.setValue(mne,e)}function qje(t){return t.deleteValue(mne)}function Fje(t){return t.getValue(mne)}var mne,$7,jje=q(()=>{Ht();mne=bc("OpenTelemetry SDK Context Key RPC_METADATA");(function(t){t.HTTP="http"})($7||($7={}))});function gne(t){if(!jYt(t)||BYt(t)!==LYt)return!1;let e=FYt(t);if(e===null)return!0;let r=Vje.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&Bje.call(r)===qYt}function jYt(t){return t!=null&&typeof t=="object"}function BYt(t){return t==null?t===void 0?DYt:kYt:SE&&SE in Object(t)?$Yt(t):VYt(t)}function $Yt(t){let e=Vje.call(t,SE),r=t[SE],n=!1;try{t[SE]=void 0,n=!0}catch{}let o=Hje.call(t);return n&&(e?t[SE]=r:delete t[SE]),o}function VYt(t){return Hje.call(t)}var LYt,kYt,DYt,UYt,Bje,qYt,FYt,$je,Vje,SE,Hje,Gje=q(()=>{LYt="[object Object]",kYt="[object Null]",DYt="[object Undefined]",UYt=Function.prototype,Bje=UYt.toString,qYt=Bje.call(Object),FYt=Object.getPrototypeOf,$je=Object.prototype,Vje=$je.hasOwnProperty,SE=Symbol?Symbol.toStringTag:void 0,Hje=$je.toString});function Wje(...t){let e=t.shift(),r=new WeakMap;for(;t.length>0;)e=Kje(e,t.shift(),0,r);return e}function _ne(t){return H7(t)?t.slice():t}function Kje(t,e,r=0,n){let o;if(!(r>HYt)){if(r++,V7(t)||V7(e)||Yje(e))o=_ne(e);else if(H7(t)){if(o=t.slice(),H7(e))for(let s=0,a=e.length;s<a;s++)o.push(_ne(e[s]));else if(tM(e)){let s=Object.keys(e);for(let a=0,c=s.length;a<c;a++){let l=s[a];o[l]=_ne(e[l])}}}else if(tM(t))if(tM(e)){if(!GYt(t,e))return e;o=Object.assign({},t);let s=Object.keys(e);for(let a=0,c=s.length;a<c;a++){let l=s[a],u=e[l];if(V7(u))typeof u>"u"?delete o[l]:o[l]=u;else{let d=o[l],f=u;if(zje(t,l,n)||zje(e,l,n))delete o[l];else{if(tM(d)&&tM(f)){let p=n.get(d)||[],h=n.get(f)||[];p.push({obj:t,key:l}),h.push({obj:e,key:l}),n.set(d,p),n.set(f,h)}o[l]=Kje(o[l],u,r,n)}}}}else o=e;return o}}function zje(t,e,r){let n=r.get(t[e])||[];for(let o=0,s=n.length;o<s;o++){let a=n[o];if(a.key===e&&a.obj===t)return!0}return!1}function H7(t){return Array.isArray(t)}function Yje(t){return typeof t=="function"}function tM(t){return!V7(t)&&!H7(t)&&!Yje(t)&&typeof t=="object"}function V7(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t>"u"||t instanceof Date||t instanceof RegExp||t===null}function GYt(t,e){return!(!gne(t)||!gne(e))}var HYt,Qje=q(()=>{Gje();HYt=20});function Zje(t,e){let r,n=new Promise(function(s,a){r=setTimeout(function(){a(new rM("Operation timed out."))},e)});return Promise.race([t,n]).then(o=>(clearTimeout(r),o),o=>{throw clearTimeout(r),o})}var rM,Jje=q(()=>{rM=class t extends Error{constructor(e){super(e),Object.setPrototypeOf(this,t.prototype)}}});function vne(t,e){return typeof e=="string"?t===e:!!t.match(e)}function Xje(t,e){if(!e)return!1;for(let r of e)if(vne(t,r))return!0;return!1}var eBe=q(()=>{});var G7,tBe=q(()=>{G7=class{_promise;_resolve;_reject;constructor(){this._promise=new Promise((e,r)=>{this._resolve=e,this._reject=r})}get promise(){return this._promise}resolve(e){this._resolve(e)}reject(e){this._reject(e)}}});var z7,rBe=q(()=>{tBe();z7=class{_callback;_that;_isCalled=!1;_deferred=new G7;constructor(e,r){this._callback=e,this._that=r}get isCalled(){return this._isCalled}get promise(){return this._deferred.promise}call(...e){if(!this._isCalled){this._isCalled=!0;try{Promise.resolve(this._callback.call(this._that,...e)).then(r=>this._deferred.resolve(r),r=>this._deferred.reject(r))}catch(r){this._deferred.reject(r)}}return this._deferred.promise}}});function iBe(t){if(t==null)return;let e=nBe[t.toUpperCase()];return e??(it.warn(`Unknown log level "${t}", expected one of ${Object.keys(nBe)}, using default`),zr.INFO)}var nBe,oBe=q(()=>{Ht();nBe={ALL:zr.ALL,VERBOSE:zr.VERBOSE,DEBUG:zr.DEBUG,INFO:zr.INFO,WARN:zr.WARN,ERROR:zr.ERROR,NONE:zr.NONE}});function sBe(t,e){return new Promise(r=>{ts.with(C7(ts.active()),()=>{t.export(e,n=>{r(n)})})})}var aBe=q(()=>{Ht();Z5()});var W7={};Xs(W7,{AnchoredClock:()=>I7,BindOnceFuture:()=>z7,CompositePropagator:()=>j7,ExportResultCode:()=>F7,RPCType:()=>$7,SDK_INFO:()=>k7,TRACE_PARENT_HEADER:()=>X5,TRACE_STATE_HEADER:()=>eM,TimeoutError:()=>rM,TraceState:()=>mx,W3CBaggagePropagator:()=>w7,W3CTraceContextPropagator:()=>B7,_globalThis:()=>N7,addHrTimes:()=>dne,callWithTimeout:()=>Zje,deleteRPCMetadata:()=>qje,diagLogLevelFromString:()=>iBe,getBooleanFromEnv:()=>O7,getNumberFromEnv:()=>R7,getRPCMetadata:()=>Fje,getStringFromEnv:()=>J5,getStringListFromEnv:()=>M7,getTimeOrigin:()=>U7,globalErrorHandler:()=>FDe,hrTime:()=>une,hrTimeDuration:()=>yje,hrTimeToMicroseconds:()=>bje,hrTimeToMilliseconds:()=>Sje,hrTimeToNanoseconds:()=>Tje,hrTimeToTimeStamp:()=>Eje,internal:()=>zYt,isAttributeValue:()=>ene,isTimeInput:()=>Cje,isTimeInputHrTime:()=>q7,isTracingSuppressed:()=>px,isUrlIgnored:()=>Xje,loggingErrorHandler:()=>P7,merge:()=>Wje,millisToHrTime:()=>hx,otperformance:()=>k_,parseKeyPairsIntoRecord:()=>ODe,parseTraceParent:()=>hne,sanitizeAttributes:()=>LDe,setGlobalErrorHandler:()=>qDe,setRPCMetadata:()=>Uje,suppressTracing:()=>C7,timeInputToHrTime:()=>vje,unrefTimer:()=>xje,unsuppressTracing:()=>xDe,urlMatches:()=>vne});var zYt,K7=q(()=>{MDe();NDe();DDe();jDe();tne();Aje();wje();Ije();Xre();lne();Pje();Dje();jje();Z5();pne();Qje();Jje();eBe();rBe();oBe();aBe();zYt={_export:sBe}});var uBe=m(Y7=>{"use strict";Object.defineProperty(Y7,"__esModule",{value:!0});Y7.OpenTelemetrySpanWrapper=void 0;var cBe=(Ht(),cn(Fh)),lBe=(K7(),cn(W7)),WYt=Qre(),yne=class{constructor(e){this._span=e}setStatus(e){e.status==="error"&&KYt(e.error)?e.error?(this._span.setStatus({code:cBe.SpanStatusCode.ERROR,message:e.error.toString()}),this.recordException(e.error)):this._span.setStatus({code:cBe.SpanStatusCode.ERROR}):e.status==="success"&&WYt.logger.verbose("Leaving span with status UNSET per OpenTelemetry spec.")}setAttribute(e,r){r!=null&&(0,lBe.isAttributeValue)(r)&&this._span.setAttribute(e,r)}end(){this._span.end()}recordException(e){this._span.recordException(e)}isRecording(){return this._span.isRecording()}addEvent(e,r={}){this._span.addEvent(e,(0,lBe.sanitizeAttributes)(r.attributes),r.startTime)}unwrap(){return this._span}};Y7.OpenTelemetrySpanWrapper=yne;function KYt(t){return t!==null&&typeof t=="object"&&"statusCode"in t?t.statusCode!==304:!0}});var Ene=m(L0=>{"use strict";Object.defineProperty(L0,"__esModule",{value:!0});L0.environmentCache=L0.SDK_VERSION=void 0;L0.envVarToBoolean=YYt;L0.SDK_VERSION="1.0.0-beta.9";L0.environmentCache=new Map;function YYt(t){var e;L0.environmentCache.has(t)||QYt(t);let r=((e=L0.environmentCache.get(t))!==null&&e!==void 0?e:"").toLowerCase();return r!=="false"&&r!=="0"&&!!r}function QYt(t){var e;if(typeof process<"u"&&process.env){let r=(e=process.env[t])!==null&&e!==void 0?e:process.env[t.toLowerCase()];L0.environmentCache.set(t,r)}}});var hBe=m(Q7=>{"use strict";Object.defineProperty(Q7,"__esModule",{value:!0});Q7.toOpenTelemetrySpanKind=pBe;Q7.toSpanOptions=JYt;var dBe=(Ht(),cn(Fh)),fBe=(K7(),cn(W7));function pBe(t){let e=(t||"internal").toUpperCase();return dBe.SpanKind[e]}function ZYt(t=[]){return t.reduce((e,r)=>{let n=dBe.trace.getSpanContext(r.tracingContext);return n&&e.push({context:n,attributes:(0,fBe.sanitizeAttributes)(r.attributes)}),e},[])}function JYt(t){let{spanAttributes:e,spanLinks:r,spanKind:n}=t||{},o=(0,fBe.sanitizeAttributes)(e),s=pBe(n),a=ZYt(r);return{attributes:o,kind:s,links:a}}});var _Be=m(D_=>{"use strict";Object.defineProperty(D_,"__esModule",{value:!0});D_.OpenTelemetryInstrumenter=D_.propagator=void 0;var k0=(Ht(),cn(Fh)),gBe=(K7(),cn(W7)),XYt=uBe(),mBe=Ene(),eQt=hBe();D_.propagator=new gBe.W3CTraceContextPropagator;var Tne=class{startSpan(e,r){let n=r?.tracingContext||k0.context.active(),o;return(0,mBe.envVarToBoolean)("AZURE_TRACING_DISABLED")?o=k0.trace.wrapSpanContext(k0.INVALID_SPAN_CONTEXT):(o=k0.trace.getTracer(r.packageName,r.packageVersion).startSpan(e,(0,eQt.toSpanOptions)(r),n),(0,mBe.envVarToBoolean)("AZURE_HTTP_TRACING_CHILDREN_DISABLED")&&e.toUpperCase().startsWith("HTTP")&&(n=(0,gBe.suppressTracing)(n))),{span:new XYt.OpenTelemetrySpanWrapper(o),tracingContext:k0.trace.setSpan(n,o)}}withContext(e,r,...n){return k0.context.with(e,r,void 0,...n)}parseTraceparentHeader(e){return D_.propagator.extract(k0.context.active(),{traceparent:e},k0.defaultTextMapGetter)}createRequestHeaders(e){let r={};return D_.propagator.inject(e||k0.context.active(),r,k0.defaultTextMapSetter),r}};D_.OpenTelemetryInstrumenter=Tne});var yBe=m(nM=>{"use strict";Object.defineProperty(nM,"__esModule",{value:!0});nM.AzureSdkInstrumentation=void 0;nM.createAzureSdkInstrumentation=nQt;var vBe=(Fre(),cn(qre)),tQt=_Be(),rQt=Ene(),Z7=class extends vBe.InstrumentationBase{constructor(e={}){super("@azure/opentelemetry-instrumentation-azure-sdk",rQt.SDK_VERSION,Object.assign({},e))}init(){let e=new vBe.InstrumentationNodeModuleDefinition("@azure/core-tracing",["^1.0.0-preview.14","^1.0.0"],r=>(typeof r.useInstrumenter=="function"&&r.useInstrumenter(new tQt.OpenTelemetryInstrumenter),r));return e.includePrerelease=!0,e}};nM.AzureSdkInstrumentation=Z7;function nQt(t={}){return new Z7(t)}});var TBe=m(J7=>{"use strict";Object.defineProperty(J7,"__esModule",{value:!0});var EBe=(N_(),cn(M_));EBe.__exportStar(Qre(),J7);EBe.__exportStar(yBe(),J7)});var bBe=m(Ou=>{"use strict";Object.defineProperty(Ou,"__esModule",{value:!0});Ou.enable=Ou.azureCoreTracing=Ou.AzureMonitorSymbol=void 0;var Sne=$i();Ou.AzureMonitorSymbol="Azure_Monitor_Tracer";var bne="azure-coretracing",SBe=!1,iQt=function(t){if(SBe)return t;try{var e=(G3e(),cn(H3e)),r=(Ht(),cn(Fh)),n=new e.BasicTracerProvider,o=n.getTracer("applicationinsights tracer");if(t.setTracer){var s=t.setTracer;t.setTracer=function(u){var d=u.startSpan;u.startSpan=function(f,p,h){var _=d.call(this,f,p,h),g=_.end;return _.end=function(){var v=g.apply(this,arguments);return Sne.channel.publish(bne,_),v},_},u[Ou.AzureMonitorSymbol]=!0,s.call(this,u)},r.trace.getSpan(r.context.active()),t.setTracer(o)}else{var a=r.trace.setGlobalTracerProvider;r.trace.setGlobalTracerProvider=function(u){var d=u.getTracer;return u.getTracer=function(f,p){var h=d.call(this,f,p);if(!h[Ou.AzureMonitorSymbol]){var _=h.startSpan;h.startSpan=function(g,v,E){var y=_.call(this,g,v,E),S=y.end;return y.end=function(){var b=S.apply(this,arguments);return Sne.channel.publish(bne,y),b},y},h[Ou.AzureMonitorSymbol]=!0}return h},a.call(this,u)},n.register(),r.trace.getSpan(r.context.active());var c=(Fre(),cn(qre)),l=TBe();c.registerInstrumentations({instrumentations:[l.createAzureSdkInstrumentation()]})}SBe=!0}catch{}return t};Ou.azureCoreTracing={versionSpecifier:">= 1.0.0 < 2.0.0",patch:iQt,publisherName:bne};function oQt(){Sne.channel.registerMonkeyPatch("@azure/core-tracing",Ou.azureCoreTracing)}Ou.enable=oQt});var ABe=m(bE=>{"use strict";Object.defineProperty(bE,"__esModule",{value:!0});bE.enable=bE.bunyan=void 0;var CBe=$i(),sQt=function(t){var e=t.prototype._emit;return t.prototype._emit=function(r,n){var o=e.apply(this,arguments);if(!n){var s=o;s||(s=e.call(this,r,!0)),CBe.channel.publish("bunyan",{level:r.level,result:s})}return o},t};bE.bunyan={versionSpecifier:">= 1.0.0 < 2.0.0",patch:sQt};function aQt(){CBe.channel.registerMonkeyPatch("bunyan",bE.bunyan)}bE.enable=aQt});var wBe=m(CE=>{"use strict";Object.defineProperty(CE,"__esModule",{value:!0});CE.enable=CE.console=void 0;var Cne=$i(),xBe=require("stream"),cQt=function(t){var e=new xBe.Writable,r=new xBe.Writable;e.write=function(u){if(!u)return!0;var d=u.toString();return Cne.channel.publish("console",{message:d}),!0},r.write=function(u){if(!u)return!0;var d=u.toString();return Cne.channel.publish("console",{message:d,stderr:!0}),!0};for(var n=new t.Console(e,r),o=["log","info","warn","error","dir","time","timeEnd","trace","assert"],s=function(u){var d=t[u];d&&(t[u]=function(){if(n[u])try{n[u].apply(n,arguments)}catch{}return d.apply(t,arguments)})},a=0,c=o;a<c.length;a++){var l=c[a];s(l)}return t};CE.console={versionSpecifier:">= 4.0.0",patch:cQt};function lQt(){Cne.channel.registerMonkeyPatch("console",CE.console),require("console")}CE.enable=lQt});var IBe=m(AE=>{"use strict";Object.defineProperty(AE,"__esModule",{value:!0});AE.enable=AE.mongoCore=void 0;var Ane=$i(),uQt=function(t){var e=t.Server.prototype.connect;return t.Server.prototype.connect=function(){var n=e.apply(this,arguments),o=this.s.pool.write;this.s.pool.write=function(){var c=typeof arguments[1]=="function"?1:2;return typeof arguments[c]=="function"&&(arguments[c]=Ane.channel.bindToContext(arguments[c])),o.apply(this,arguments)};var s=this.s.pool.logout;return this.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=Ane.channel.bindToContext(arguments[1])),s.apply(this,arguments)},n},t};AE.mongoCore={versionSpecifier:">= 2.0.0 < 4.0.0",patch:uQt};function dQt(){Ane.channel.registerMonkeyPatch("mongodb-core",AE.mongoCore)}AE.enable=dQt});var PBe=m(Ha=>{"use strict";var gx=Ha&&Ha.__assign||function(){return gx=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},gx.apply(this,arguments)};Object.defineProperty(Ha,"__esModule",{value:!0});Ha.enable=Ha.mongo330=Ha.mongo3=Ha.mongo2=void 0;var oa=$i(),fQt=function(t){var e=t.instrument({operationIdGenerator:{next:function(){return oa.channel.bindToContext(function(n){return n()})}}}),r={};return e.on("started",function(n){r[n.requestId]||(r[n.requestId]=gx(gx({},n),{time:new Date}))}),e.on("succeeded",function(n){var o=r[n.requestId];o&&delete r[n.requestId],typeof n.operationId=="function"?n.operationId(function(){return oa.channel.publish("mongodb",{startedData:o,event:n,succeeded:!0})}):oa.channel.publish("mongodb",{startedData:o,event:n,succeeded:!0})}),e.on("failed",function(n){var o=r[n.requestId];o&&delete r[n.requestId],typeof n.operationId=="function"?n.operationId(function(){return oa.channel.publish("mongodb",{startedData:o,event:n,succeeded:!1})}):oa.channel.publish("mongodb",{startedData:o,event:n,succeeded:!1})}),t},pQt=function(t){var e=t.instrument(),r={},n={};return e.on("started",function(o){r[o.requestId]||(n[o.requestId]=oa.channel.bindToContext(function(s){return s()}),r[o.requestId]=gx(gx({},o),{time:new Date}))}),e.on("succeeded",function(o){var s=r[o.requestId];s&&delete r[o.requestId],typeof o=="object"&&typeof n[o.requestId]=="function"&&(n[o.requestId](function(){return oa.channel.publish("mongodb",{startedData:s,event:o,succeeded:!0})}),delete n[o.requestId])}),e.on("failed",function(o){var s=r[o.requestId];s&&delete r[o.requestId],typeof o=="object"&&typeof n[o.requestId]=="function"&&(n[o.requestId](function(){return oa.channel.publish("mongodb",{startedData:s,event:o,succeeded:!1})}),delete n[o.requestId])}),t},hQt=function(t){var e=t.Server.prototype.connect;return t.Server.prototype.connect=function(){var n=e.apply(this,arguments),o=this.s.coreTopology.s.pool.write;this.s.coreTopology.s.pool.write=function(){var c=typeof arguments[1]=="function"?1:2;return typeof arguments[c]=="function"&&(arguments[c]=oa.channel.bindToContext(arguments[c])),o.apply(this,arguments)};var s=this.s.coreTopology.s.pool.logout;return this.s.coreTopology.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=oa.channel.bindToContext(arguments[1])),s.apply(this,arguments)},n},t},mQt=function(t){hQt(t);var e=t.instrument(),r={},n={};return e.on("started",function(o){r[o.requestId]||(n[o.requestId]=oa.channel.bindToContext(function(s){return s()}),r[o.requestId]=o)}),e.on("succeeded",function(o){var s=r[o.requestId];s&&delete r[o.requestId],typeof o=="object"&&typeof n[o.requestId]=="function"&&(n[o.requestId](function(){return oa.channel.publish("mongodb",{startedData:s,event:o,succeeded:!0})}),delete n[o.requestId])}),e.on("failed",function(o){var s=r[o.requestId];s&&delete r[o.requestId],typeof o=="object"&&typeof n[o.requestId]=="function"&&(n[o.requestId](function(){return oa.channel.publish("mongodb",{startedData:s,event:o,succeeded:!1})}),delete n[o.requestId])}),t};Ha.mongo2={versionSpecifier:">= 2.0.0 <= 3.0.5",patch:fQt};Ha.mongo3={versionSpecifier:"> 3.0.5 < 3.3.0",patch:pQt};Ha.mongo330={versionSpecifier:">= 3.3.0 < 4.0.0",patch:mQt};function gQt(){oa.channel.registerMonkeyPatch("mongodb",Ha.mongo2),oa.channel.registerMonkeyPatch("mongodb",Ha.mongo3),oa.channel.registerMonkeyPatch("mongodb",Ha.mongo330)}Ha.enable=gQt});var OBe=m(xE=>{"use strict";Object.defineProperty(xE,"__esModule",{value:!0});xE.enable=xE.mysql=void 0;var X7=$i(),RBe=require("path"),_Qt=function(t,e){var r=function(l,u){return function(d,f){var p=l[d];p&&(l[d]=function(){for(var _=arguments.length-1,g=arguments.length-1;g>=0;--g)if(typeof arguments[g]=="function"){_=g;break}else if(typeof arguments[g]<"u")break;var v=arguments[_],E={result:null,startTime:null,startDate:null};typeof v=="function"&&(f?(E.startTime=process.hrtime(),E.startDate=new Date,arguments[_]=X7.channel.bindToContext(f(E,v))):arguments[_]=X7.channel.bindToContext(v));var y=p.apply(this,arguments);return E.result=y,y})}},n=function(l,u){return r(l.prototype,u+".prototype")},o=["connect","changeUser","ping","statistics","end"],s=require(RBe.dirname(e)+"/lib/Connection");o.forEach(function(l){return n(s,"Connection")(l)}),r(s,"Connection")("createQuery",function(l,u){return function(d){var f=process.hrtime(l.startTime),p=f[0]*1e3+f[1]/1e6|0;X7.channel.publish("mysql",{query:l.result,callbackArgs:arguments,err:d,duration:p,time:l.startDate}),u.apply(this,arguments)}});var a=["_enqueueCallback"],c=require(RBe.dirname(e)+"/lib/Pool");return a.forEach(function(l){return n(c,"Pool")(l)}),t};xE.mysql={versionSpecifier:">= 2.0.0 < 3.0.0",patch:_Qt};function vQt(){X7.channel.registerMonkeyPatch("mysql",xE.mysql)}xE.enable=vQt});var NBe=m(wE=>{"use strict";Object.defineProperty(wE,"__esModule",{value:!0});wE.enable=wE.postgresPool1=void 0;var MBe=$i();function yQt(t){var e=t.prototype.connect;return t.prototype.connect=function(n){return n&&(arguments[0]=MBe.channel.bindToContext(n)),e.apply(this,arguments)},t}wE.postgresPool1={versionSpecifier:">= 1.0.0 < 3.0.0",patch:yQt};function EQt(){MBe.channel.registerMonkeyPatch("pg-pool",wE.postgresPool1)}wE.enable=EQt});var kBe=m(D0=>{"use strict";Object.defineProperty(D0,"__esModule",{value:!0});D0.enable=D0.postgres=D0.postgres6=void 0;var _x=$i(),LBe=require("events"),xne="postgres";function TQt(t,e){var r=t.Client.prototype.query,n="__diagnosticOriginalFunc";return t.Client.prototype.query=function(s,a,c){var l={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},u=process.hrtime(),d;function f(p){p&&p[n]&&(p=p[n]);var h=_x.channel.bindToContext(function(_,g){var v=process.hrtime(u);if(l.result=g&&{rowCount:g.rowCount,command:g.command},l.error=_,l.duration=Math.ceil(v[0]*1e3+v[1]/1e6),_x.channel.publish(xne,l),_){if(p)return p.apply(this,arguments);d&&d instanceof LBe.EventEmitter&&d.emit("error",_)}else p&&p.apply(this,arguments)});try{return Object.defineProperty(h,n,{value:p}),h}catch{return p}}try{typeof s=="string"?a instanceof Array?(l.query.preparable={text:s,args:a},c=f(c)):(l.query.text=s,c?c=f(c):a=f(a)):(typeof s.name=="string"?l.query.plan=s.name:s.values instanceof Array?l.query.preparable={text:s.text,args:s.values}:l.query.text=s.text,c?c=f(c):a?a=f(a):s.callback=f(s.callback))}catch{return r.apply(this,arguments)}return arguments[0]=s,arguments[1]=a,arguments[2]=c,arguments.length=arguments.length>3?arguments.length:3,d=r.apply(this,arguments),d},t}function SQt(t,e){var r=t.Client.prototype.query,n="__diagnosticOriginalFunc";return t.Client.prototype.query=function(s,a,c){var l=this,u,d,f=!!c,p={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},h,_=process.hrtime();function g(y){y&&y[n]&&(y=y[n]);var S=_x.channel.bindToContext(function(b,w){var P=process.hrtime(_);if(p.result=w&&{rowCount:w.rowCount,command:w.command},p.error=b,p.duration=Math.ceil(P[0]*1e3+P[1]/1e6),_x.channel.publish(xne,p),b){if(y)return y.apply(this,arguments);h&&h instanceof LBe.EventEmitter&&h.emit("error",b)}else y&&y.apply(this,arguments)});try{return Object.defineProperty(S,n,{value:y}),S}catch{return y}}try{typeof s=="string"?a instanceof Array?(p.query.preparable={text:s,args:a},f=typeof c=="function",c=f?g(c):c):(p.query.text=s,c?(f=typeof c=="function",c=f?g(c):c):(f=typeof a=="function",a=f?g(a):a)):(typeof s.name=="string"?p.query.plan=s.name:s.values instanceof Array?p.query.preparable={text:s.text,args:s.values}:s.cursor?p.query.text=(u=s.cursor)===null||u===void 0?void 0:u.text:p.query.text=s.text,c?(f=typeof c=="function",c=g(c)):a?(f=typeof a=="function",a=f?g(a):a):(f=typeof s.callback=="function",s.callback=f?g(s.callback):s.callback))}catch{return r.apply(this,arguments)}arguments[0]=s,arguments[1]=a,arguments[2]=c,arguments.length=arguments.length>3?arguments.length:3;try{h=r.apply(this,arguments)}catch(y){throw g()(y,void 0),y}if(!f){if(h instanceof Promise)return h.then(function(y){return g()(void 0,y),new l._Promise(function(S,b){S(y)})}).catch(function(y){return g()(y,void 0),new l._Promise(function(S,b){b(y)})});var v=h.text?h.text:"";if(h.cursor&&(v=(d=h.cursor)===null||d===void 0?void 0:d.text),v){var E={command:v,rowCount:0};g()(void 0,E)}}return h},t}D0.postgres6={versionSpecifier:"6.*",patch:TQt};D0.postgres={versionSpecifier:">=7.* <=8.*",patch:SQt,publisherName:xne};function bQt(){_x.channel.registerMonkeyPatch("pg",D0.postgres6),_x.channel.registerMonkeyPatch("pg",D0.postgres)}D0.enable=bQt});var DBe=m(IE=>{"use strict";Object.defineProperty(IE,"__esModule",{value:!0});IE.enable=IE.redis=void 0;var wne=$i(),CQt=function(t){var e=t.RedisClient.prototype.internal_send_command;return t.RedisClient.prototype.internal_send_command=function(r){if(r){var n=r.callback;if(!n||!n.pubsubBound){var o=this.address,s=process.hrtime(),a=new Date;r.callback=wne.channel.bindToContext(function(c,l){var u=process.hrtime(s),d=u[0]*1e3+u[1]/1e6|0;wne.channel.publish("redis",{duration:d,address:o,commandObj:r,err:c,result:l,time:a}),typeof n=="function"&&n.apply(this,arguments)}),r.callback.pubsubBound=!0}}return e.call(this,r)},t};IE.redis={versionSpecifier:">= 2.0.0 < 4.0.0",patch:CQt};function AQt(){wne.channel.registerMonkeyPatch("redis",IE.redis)}IE.enable=AQt});var UBe=m($h=>{"use strict";var eU=$h&&$h.__assign||function(){return eU=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},eU.apply(this,arguments)};Object.defineProperty($h,"__esModule",{value:!0});$h.enable=$h.tedious=void 0;var Ine=$i(),xQt=function(t){var e=t.Connection.prototype.makeRequest;return t.Connection.prototype.makeRequest=function(){function n(s){var a=process.hrtime(),c={query:{},database:{host:null,port:null},result:null,error:null,duration:0};return Ine.channel.bindToContext(function(l,u,d){var f=process.hrtime(a);c=eU(eU({},c),{database:{host:this.connection.config.server,port:this.connection.config.options.port},result:!l&&{rowCount:u,rows:d},query:{text:this.parametersByName.statement.value},error:l,duration:Math.ceil(f[0]*1e3+f[1]/1e6)}),Ine.channel.publish("tedious",c),s.call(this,l,u,d)})}var o=arguments[0];arguments[0].callback=n(o.callback),e.apply(this,arguments)},t};$h.tedious={versionSpecifier:">= 6.0.0 < 9.0.0",patch:xQt};function wQt(){Ine.channel.registerMonkeyPatch("tedious",$h.tedious)}$h.enable=wQt});var qBe=m(Pc=>{"use strict";var IQt=Pc&&Pc.__extends||(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(n[s]=o[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),PQt=Pc&&Pc.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]]);return r};Object.defineProperty(Pc,"__esModule",{value:!0});Pc.enable=Pc.winston2=Pc.winston3=void 0;var tU=$i(),RQt=function(t){var e=t.Logger.prototype.log,r,n=function(o,s,a){var c;return r===t.config.npm.levels?c="npm":r===t.config.syslog.levels?c="syslog":c="unknown",tU.channel.publish("winston",{level:o,message:s,meta:a,levelKind:c}),s};return t.Logger.prototype.log=function(){return r=this.levels,!this.filters||this.filters.length===0?this.filters=[n]:this.filters[this.filters.length-1]!==n&&(this.filters=this.filters.filter(function(s){return s!==n}),this.filters.push(n)),e.apply(this,arguments)},t},OQt=function(t){var e=function(c,l){var u;return c.config.npm.levels[l]!=null?u="npm":c.config.syslog.levels[l]!=null?u="syslog":u="unknown",u},r=(function(c){IQt(l,c);function l(u,d){var f=c.call(this,d)||this;return f.winston=u,f}return l.prototype.log=function(u,d){var f=u.message,p=u.level,h=u.meta,_=PQt(u,["message","level","meta"]);p=typeof Symbol.for=="function"?u[Symbol.for("level")]:p,f=u instanceof Error?u:f;var g=e(this.winston,p);h=h||{};for(var v in _)_.hasOwnProperty(v)&&(h[v]=_[v]);tU.channel.publish("winston",{message:f,level:p,levelKind:g,meta:h}),d()},l})(t.Transport);function n(c){var l;if(c?.level)return c.level;var u=(l=c?.levels)!==null&&l!==void 0?l:t.config.npm.levels,d;for(var f in u)u.hasOwnProperty(f)&&(d=d===void 0||u[f]>u[d]?f:d);return d}function o(c){this.add(new r(t,{level:n(c)}))}var s=t.createLogger;t.createLogger=function(l){var u=s.call(this,l);u.add(new r(t,{level:n(l)}));var d=u.configure;return u.configure=function(){d.apply(this,arguments),o.apply(this,arguments)},u};var a=t.configure;return t.configure=function(){a.apply(this,arguments),o.apply(this,arguments)},t.add(new r(t)),t};Pc.winston3={versionSpecifier:"3.x",patch:OQt};Pc.winston2={versionSpecifier:"2.x",patch:RQt};function MQt(){tU.channel.registerMonkeyPatch("winston",Pc.winston2),tU.channel.registerMonkeyPatch("winston",Pc.winston3)}Pc.enable=MQt});var QBe=m(zn=>{"use strict";Object.defineProperty(zn,"__esModule",{value:!0});zn.enable=zn.tedious=zn.pgPool=zn.pg=zn.winston=zn.redis=zn.mysql=zn.mongodb=zn.mongodbCore=zn.console=zn.bunyan=zn.azuresdk=void 0;var FBe=bBe();zn.azuresdk=FBe;var jBe=ABe();zn.bunyan=jBe;var BBe=wBe();zn.console=BBe;var $Be=IBe();zn.mongodbCore=$Be;var VBe=PBe();zn.mongodb=VBe;var HBe=OBe();zn.mysql=HBe;var GBe=NBe();zn.pgPool=GBe;var zBe=kBe();zn.pg=zBe;var WBe=DBe();zn.redis=WBe;var KBe=UBe();zn.tedious=KBe;var YBe=qBe();zn.winston=YBe;function NQt(){jBe.enable(),BBe.enable(),$Be.enable(),VBe.enable(),HBe.enable(),zBe.enable(),GBe.enable(),WBe.enable(),YBe.enable(),FBe.enable(),KBe.enable()}zn.enable=NQt});var iU=m(PE=>{"use strict";Object.defineProperty(PE,"__esModule",{value:!0});PE.IsInitialized=void 0;PE.registerContextPreservation=LQt;var Pne=qn(),JBe=V8();PE.IsInitialized=!JBe.JsonConfig.getInstance().noDiagnosticChannel;var Rne="DiagnosticChannel";if(PE.IsInitialized){Hd=QBe(),ZBe=JBe.JsonConfig.getInstance().noPatchModules,rU=ZBe.split(","),One={bunyan:Hd.bunyan,console:Hd.console,mongodb:Hd.mongodb,mongodbCore:Hd.mongodbCore,mysql:Hd.mysql,redis:Hd.redis,pg:Hd.pg,pgPool:Hd.pgPool,winston:Hd.winston,azuresdk:Hd.azuresdk};for(nU in One)rU.indexOf(nU)===-1&&(One[nU].enable(),Pne.info(Rne,"Subscribed to ".concat(nU," events")));rU.length>0&&Pne.info(Rne,"Some modules will not be patched",rU)}else Pne.info(Rne,"Not subscribing to dependency autocollection because APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL was set");var Hd,ZBe,rU,One,nU;function LQt(t){if(PE.IsInitialized){var e=$i();e.channel.addContextPreservation(t)}}});var vx=m((PMn,XBe)=>{"use strict";XBe.exports={requestContextHeader:"request-context",requestContextSourceKey:"appId",requestContextTargetKey:"appId",requestIdHeader:"request-id",parentIdHeader:"x-ms-request-id",rootIdHeader:"x-ms-request-root-id",correlationContextHeader:"correlation-context",traceparentHeader:"traceparent",traceStateHeader:"tracestate"}});var Ss=m((Lne,e$e)=>{"use strict";var q_=Lne&&Lne.__assign||function(){return q_=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},q_.apply(this,arguments)},kQt=require("http"),Mne=require("https"),Nne=require("url"),U_=require("constants"),RE=qn(),yx=vx(),DQt=V8(),UQt=(function(){function t(){t._addCloseHandler()}return t.getCookie=function(e,r){var n="";if(e&&e.length&&typeof r=="string")for(var o=e+"=",s=r.split(";"),a=0;a<s.length;a++){var r=s[a];if(r=t.trim(r),r&&r.indexOf(o)===0){n=r.substring(o.length,s[a].length);break}}return n},t.trim=function(e){return typeof e=="string"?e.replace(/^\s+|\s+$/g,""):""},t.int32ArrayToBase64=function(e){var r=function(c,l){return String.fromCharCode(c>>l&255)},n=function(c){return r(c,24)+r(c,16)+r(c,8)+r(c,0)},o=e.map(n).join(""),s=Buffer.from?Buffer.from(o,"binary"):new Buffer(o,"binary"),a=s.toString("base64");return a.substr(0,a.indexOf("="))},t.random32=function(){return 4294967296*Math.random()|0},t.randomu32=function(){return t.random32()+2147483648},t.w3cTraceId=function(){for(var e=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],r="",n,o=0;o<4;o++)n=t.random32(),r+=e[n&15]+e[n>>4&15]+e[n>>8&15]+e[n>>12&15]+e[n>>16&15]+e[n>>20&15]+e[n>>24&15]+e[n>>28&15];var s=e[8+Math.random()*4|0];return r.substr(0,8)+r.substr(9,4)+"4"+r.substr(13,3)+s+r.substr(16,3)+r.substr(19,12)},t.w3cSpanId=function(){return t.w3cTraceId().substring(16)},t.isValidW3CId=function(e){return e.length===32&&e!=="00000000000000000000000000000000"},t.isArray=function(e){return Object.prototype.toString.call(e)==="[object Array]"},t.isError=function(e){return Object.prototype.toString.call(e)==="[object Error]"},t.isPrimitive=function(e){var r=typeof e;return r==="string"||r==="number"||r==="boolean"},t.isDate=function(e){return Object.prototype.toString.call(e)==="[object Date]"},t.msToTimeSpan=function(e){(isNaN(e)||e<0)&&(e=0);var r=(e/1e3%60).toFixed(7).replace(/0{0,4}$/,""),n=""+Math.floor(e/(1e3*60))%60,o=""+Math.floor(e/(1e3*60*60))%24,s=Math.floor(e/(1e3*60*60*24));r=r.indexOf(".")<2?"0"+r:r,n=n.length<2?"0"+n:n,o=o.length<2?"0"+o:o;var a=s>0?s+".":"";return a+o+":"+n+":"+r},t.extractError=function(e){var r=e;return{message:e.message,code:r.code||r.id||""}},t.extractObject=function(e){return e instanceof Error?t.extractError(e):typeof e.toJSON=="function"?e.toJSON():e},t.validateStringMap=function(e){if(typeof e!="object"){RE.info("Invalid properties dropped from payload");return}var r={};for(var n in e){var o="",s=e[n],a=typeof s;if(t.isPrimitive(s))o=s.toString();else if(s===null||a==="undefined")o="";else if(a==="function"){RE.info("key: "+n+" was function; will not serialize");continue}else{var c=t.isArray(s)?s:t.extractObject(s);try{t.isPrimitive(c)?o=c:o=JSON.stringify(c)}catch(l){o=s.constructor.name.toString()+" (Error: "+l.message+")",RE.info("key: "+n+", could not be serialized")}}r[n]=o.substring(0,t.MAX_PROPERTY_LENGTH)}return r},t.canIncludeCorrelationHeader=function(e,r){var n=e&&e.config&&e.config.correlationHeaderExcludedDomains;if(!n||n.length==0||!r)return!0;for(var o=0;o<n.length;o++){var s=new RegExp(n[o].replace(/\./g,".").replace(/\*/g,".*"));try{if(s.test(new Nne.URL(r).hostname))return!1}catch{}}return!0},t.getCorrelationContextTarget=function(e,r){var n=e.headers&&e.headers[yx.requestContextHeader];if(n)for(var o=n.split(","),s=0;s<o.length;++s){var a=o[s].split("=");if(a.length==2&&a[0]==r)return a[1]}},t.makeRequest=function(e,r,n,o,s,a){s===void 0&&(s=!0),a===void 0&&(a=!0),r&&r.indexOf("//")===0&&(r="https:"+r);var c=new Nne.URL(r),l=q_(q_({},n),{host:c.hostname,port:c.port,path:c.pathname}),u=void 0;if(s&&(c.protocol==="https:"&&(u=e.proxyHttpsUrl||void 0),c.protocol==="http:"&&(u=e.proxyHttpUrl||void 0),u)){u.indexOf("//")===0&&(u="http:"+u);try{var d=new Nne.URL(u);d.protocol==="https:"?(RE.info("Proxies that use HTTPS are not supported"),u=void 0):l=q_(q_({},l),{host:d.hostname,port:d.port||"80",path:r,headers:q_(q_({},l.headers),{Host:c.hostname})})}catch{RE.warn("Wrong proxy URL provided")}}var f=c.protocol==="https:"&&!u;return a&&(f&&e.httpsAgent!==void 0?l.agent=e.httpsAgent:!f&&e.httpAgent!==void 0?l.agent=e.httpAgent:f&&(l.agent=t._useKeepAlive?t.keepAliveAgent:t.tlsRestrictedAgent)),f?Mne.request(l,o):kQt.request(l,o)},t.safeIncludeCorrelationHeader=function(e,r,n){var o;if(typeof n=="string")o=n;else if(n instanceof Array)o=n.join(",");else if(n&&typeof n.toString=="function")try{o=n.toString()}catch(s){RE.warn("Outgoing request-context header could not be read. Correlation of requests may be lost.",s,n)}o?t.addCorrelationIdHeaderFromString(e,r,o):r.setHeader(yx.requestContextHeader,"".concat(yx.requestContextSourceKey,"=").concat(e.config.correlationId))},t.dumpObj=function(e){if(e)try{var r=Object.prototype.toString.call(e),n="";return r==="[object Error]"?n="{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e.name+"'":n=this.stringify(e),r+n}catch{return e.toString()}},t.stringify=function(e){try{return JSON.stringify(e)}catch(r){RE.warn("Failed to serialize payload",r,e)}},t.addCorrelationIdHeaderFromString=function(e,r,n){var o=n.split(","),s="".concat(yx.requestContextSourceKey,"="),a=o.some(function(c){return c.substring(0,s.length)===s});a||r.setHeader(yx.requestContextHeader,"".concat(n,",").concat(yx.requestContextSourceKey,"=").concat(e.config.correlationId))},t._addCloseHandler=function(){t._listenerAttached||(process.on("exit",function(){t.isNodeExit=!0,t._useKeepAlive=!1}),t._listenerAttached=!0)},t._useKeepAlive=!DQt.JsonConfig.getInstance().noHttpAgentKeepAlive,t._listenerAttached=!1,t.MAX_PROPERTY_LENGTH=8192,t.keepAliveAgent=new Mne.Agent({keepAlive:!0,maxSockets:25,secureOptions:U_.SSL_OP_NO_SSLv2|U_.SSL_OP_NO_SSLv3|U_.SSL_OP_NO_TLSv1|U_.SSL_OP_NO_TLSv1_1}),t.tlsRestrictedAgent=new Mne.Agent({secureOptions:U_.SSL_OP_NO_SSLv2|U_.SSL_OP_NO_SSLv3|U_.SSL_OP_NO_TLSv1|U_.SSL_OP_NO_TLSv1_1}),t.isNodeExit=!1,t})();e$e.exports=UQt});var OE=m((RMn,t$e)=>{"use strict";var kne=Ss(),qQt=(function(){function t(){}return t.queryCorrelationId=function(e,r){},t.cancelCorrelationIdQuery=function(e,r){},t.generateRequestId=function(e){if(e){e=e[0]=="|"?e:"|"+e,e[e.length-1]!=="."&&(e+=".");var r=(t.currentRootId++).toString(16);return t.appendSuffix(e,r,"_")}else return t.generateRootId()},t.getRootId=function(e){var r=e.indexOf(".");r<0&&(r=e.length);var n=e[0]==="|"?1:0;return e.substring(n,r)},t.generateRootId=function(){return"|"+kne.w3cTraceId()+"."},t.appendSuffix=function(e,r,n){if(e.length+r.length<t.requestIdMaxLength)return e+r+n;var o=t.requestIdMaxLength-9;if(e.length>o)for(;o>1;--o){var s=e[o-1];if(s==="."||s==="_")break}if(o<=1)return t.generateRootId();for(r=kne.randomu32().toString(16);r.length<8;)r="0"+r;return e.substring(0,o)+r+"#"},t.correlationIdPrefix="cid-v1:",t.w3cEnabled=!0,t.HTTP_TIMEOUT=2500,t.requestIdMaxLength=1024,t.currentRootId=kne.randomu32(),t})();t$e.exports=qQt});var oU=m((OMn,r$e)=>{"use strict";var bs=Ss(),FQt=OE(),jQt=(function(){function t(e,r){if(this.traceFlag=t.DEFAULT_TRACE_FLAG,this.version=t.DEFAULT_VERSION,e&&typeof e=="string")if(e.split(",").length>1)this.traceId=bs.w3cTraceId(),this.spanId=bs.w3cTraceId().substr(0,16);else{var n=e.trim().split("-"),o=n.length;o>=4?(this.version=n[0],this.traceId=n[1],this.spanId=n[2],this.traceFlag=n[3]):(this.traceId=bs.w3cTraceId(),this.spanId=bs.w3cTraceId().substr(0,16)),this.version.match(/^[0-9a-f]{2}$/g)||(this.version=t.DEFAULT_VERSION,this.traceId=bs.w3cTraceId()),this.version==="00"&&o!==4&&(this.traceId=bs.w3cTraceId(),this.spanId=bs.w3cTraceId().substr(0,16)),this.version==="ff"&&(this.version=t.DEFAULT_VERSION,this.traceId=bs.w3cTraceId(),this.spanId=bs.w3cTraceId().substr(0,16)),this.version.match(/^0[0-9a-f]$/g)||(this.version=t.DEFAULT_VERSION),this.traceFlag.match(/^[0-9a-f]{2}$/g)||(this.traceFlag=t.DEFAULT_TRACE_FLAG,this.traceId=bs.w3cTraceId()),t.isValidTraceId(this.traceId)||(this.traceId=bs.w3cTraceId()),t.isValidSpanId(this.spanId)||(this.spanId=bs.w3cTraceId().substr(0,16),this.traceId=bs.w3cTraceId()),this.parentId=this.getBackCompatRequestId()}else if(r){this.parentId=r.slice();var s=FQt.getRootId(r);t.isValidTraceId(s)||(this.legacyRootId=s,s=bs.w3cTraceId()),r.indexOf("|")!==-1&&(r=r.substring(1+r.substring(0,r.length-1).lastIndexOf("."),r.length-1)),this.traceId=s,this.spanId=r}else this.traceId=bs.w3cTraceId(),this.spanId=bs.w3cTraceId().substr(0,16)}return t.isValidTraceId=function(e){return e.match(/^[0-9a-f]{32}$/)&&e!=="00000000000000000000000000000000"},t.isValidSpanId=function(e){return e.match(/^[0-9a-f]{16}$/)&&e!=="0000000000000000"},t.formatOpenTelemetryTraceFlags=function(e){var r="0"+e.toString(16);return r.substring(r.length-2)},t.prototype.getBackCompatRequestId=function(){return"|".concat(this.traceId,".").concat(this.spanId,".")},t.prototype.toString=function(){return"".concat(this.version,"-").concat(this.traceId,"-").concat(this.spanId,"-").concat(this.traceFlag)},t.prototype.updateSpanId=function(){this.spanId=bs.w3cTraceId().substr(0,16)},t.DEFAULT_TRACE_FLAG="01",t.DEFAULT_VERSION="00",t})();r$e.exports=jQt});var Dne=m((MMn,n$e)=>{"use strict";var BQt=(function(){function t(e){this.fieldmap=[],e&&(this.fieldmap=this.parseHeader(e))}return t.prototype.toString=function(){var e=this.fieldmap;return!e||e.length==0?null:e.join(", ")},t.validateKeyChars=function(e){var r=e.split("@");if(r.length==2){var n=r[0].trim(),o=r[1].trim(),s=!!n.match(/^[\ ]?[a-z0-9\*\-\_/]{1,241}$/),a=!!o.match(/^[\ ]?[a-z0-9\*\-\_/]{1,14}$/);return s&&a}else if(r.length==1)return!!e.match(/^[\ ]?[a-z0-9\*\-\_/]{1,256}$/);return!1},t.prototype.parseHeader=function(e){var r=[],n={},o=e.split(",");if(o.length>32)return null;for(var s=0,a=o;s<a.length;s++){var c=a[s],l=c.trim();if(l.length!==0){var u=l.split("=");if(u.length!==2||!t.validateKeyChars(u[0])||n[u[0]])return null;n[u[0]]=!0,r.push(l)}}return r},t.strict=!0,t})();n$e.exports=BQt});var Vh=m((NMn,i$e)=>{"use strict";var $Qt=(function(){function t(){}return t})();i$e.exports=$Qt});var s$e=m((Une,o$e)=>{"use strict";var VQt=Une&&Une.__extends||(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(n[s]=o[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),HQt=Vh(),GQt=(function(t){VQt(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return e})(HQt);o$e.exports=GQt});var qne=m((LMn,a$e)=>{"use strict";var zQt=(function(){function t(){}return t})();a$e.exports=zQt});var l$e=m((kMn,c$e)=>{"use strict";var WQt=(function(){function t(){this.applicationVersion="ai.application.ver",this.deviceId="ai.device.id",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceOEMName="ai.device.oemName",this.deviceOSVersion="ai.device.osVersion",this.deviceType="ai.device.type",this.locationIp="ai.location.ip",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.userAccountId="ai.user.accountId",this.userId="ai.user.id",this.userAuthUserId="ai.user.authUserId",this.cloudRole="ai.cloud.role",this.cloudRoleInstance="ai.cloud.roleInstance",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion",this.internalNodeName="ai.internal.nodeName"}return t})();c$e.exports=WQt});var d$e=m((Fne,u$e)=>{"use strict";var KQt=Fne&&Fne.__extends||(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(n[s]=o[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),YQt=qne(),QQt=(function(t){KQt(e,t);function e(){return t.call(this)||this}return e})(YQt);u$e.exports=QQt});var Bne=m((DMn,f$e)=>{"use strict";var jne;(function(t){t[t.Measurement=0]="Measurement",t[t.Aggregation=1]="Aggregation"})(jne||(jne={}));f$e.exports=jne});var h$e=m((UMn,p$e)=>{"use strict";var ZQt=Bne(),JQt=(function(){function t(){this.kind=ZQt.Measurement}return t})();p$e.exports=JQt});var g$e=m((qMn,m$e)=>{"use strict";var XQt=(function(){function t(){this.ver=1,this.sampleRate=100,this.tags={}}return t})();m$e.exports=XQt});var Vne=m(($ne,_$e)=>{"use strict";var eZt=$ne&&$ne.__extends||(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(n[s]=o[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),tZt=Vh(),rZt=(function(t){eZt(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return e})(tZt);_$e.exports=rZt});var y$e=m((Hne,v$e)=>{"use strict";var nZt=Hne&&Hne.__extends||(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(n[s]=o[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),iZt=Vh(),oZt=(function(t){nZt(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.exceptions=[],r.properties={},r.measurements={},r}return e})(iZt);v$e.exports=oZt});var T$e=m((FMn,E$e)=>{"use strict";var sZt=(function(){function t(){this.hasFullStack=!0,this.parsedStack=[]}return t})();E$e.exports=sZt});var b$e=m((Gne,S$e)=>{"use strict";var aZt=Gne&&Gne.__extends||(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(n[s]=o[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),cZt=Vh(),lZt=(function(t){aZt(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.properties={},r}return e})(cZt);S$e.exports=lZt});var A$e=m((zne,C$e)=>{"use strict";var uZt=zne&&zne.__extends||(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(n[s]=o[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),dZt=Vh(),fZt=(function(t){uZt(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.metrics=[],r.properties={},r}return e})(dZt);C$e.exports=fZt});var w$e=m((Wne,x$e)=>{"use strict";var pZt=Wne&&Wne.__extends||(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(n[s]=o[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),hZt=Vne(),mZt=(function(t){pZt(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return e})(hZt);x$e.exports=mZt});var P$e=m((Kne,I$e)=>{"use strict";var gZt=Kne&&Kne.__extends||(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(n[s]=o[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),_Zt=Vh(),vZt=(function(t){gZt(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.success=!0,r.properties={},r.measurements={},r}return e})(_Zt);I$e.exports=vZt});var O$e=m((Yne,R$e)=>{"use strict";var yZt=Yne&&Yne.__extends||(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(n[s]=o[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),EZt=Vh(),TZt=(function(t){yZt(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return e})(EZt);R$e.exports=TZt});var N$e=m((jMn,M$e)=>{"use strict";var Qne;(function(t){t[t.Verbose=0]="Verbose",t[t.Information=1]="Information",t[t.Warning=2]="Warning",t[t.Error=3]="Error",t[t.Critical=4]="Critical"})(Qne||(Qne={}));M$e.exports=Qne});var k$e=m((BMn,L$e)=>{"use strict";var SZt=(function(){function t(){}return t})();L$e.exports=SZt});var Zne=m(yo=>{"use strict";Object.defineProperty(yo,"__esModule",{value:!0});yo.AvailabilityData=s$e();yo.Base=qne();yo.ContextTagKeys=l$e();yo.Data=d$e();yo.DataPoint=h$e();yo.DataPointType=Bne();yo.Domain=Vh();yo.Envelope=g$e();yo.EventData=Vne();yo.ExceptionData=y$e();yo.ExceptionDetails=T$e();yo.MessageData=b$e();yo.MetricData=A$e();yo.PageViewData=w$e();yo.RemoteDependencyData=P$e();yo.RequestData=O$e();yo.SeverityLevel=N$e();yo.StackFrame=k$e()});var D$e=m(iM=>{"use strict";Object.defineProperty(iM,"__esModule",{value:!0});iM.RemoteDependencyDataConstants=void 0;iM.domainSupportsProperties=CZt;var ME=Zne(),bZt=(function(){function t(){}return t.TYPE_HTTP="Http",t.TYPE_AI="Http (tracked component)",t})();iM.RemoteDependencyDataConstants=bZt;function CZt(t){return"properties"in t||t instanceof ME.EventData||t instanceof ME.ExceptionData||t instanceof ME.MessageData||t instanceof ME.MetricData||t instanceof ME.PageViewData||t instanceof ME.RemoteDependencyData||t instanceof ME.RequestData}});var q$e=m(U$e=>{"use strict";Object.defineProperty(U$e,"__esModule",{value:!0})});var j$e=m(F$e=>{"use strict";Object.defineProperty(F$e,"__esModule",{value:!0})});var $$e=m(B$e=>{"use strict";Object.defineProperty(B$e,"__esModule",{value:!0})});var H$e=m(V$e=>{"use strict";Object.defineProperty(V$e,"__esModule",{value:!0})});var z$e=m(G$e=>{"use strict";Object.defineProperty(G$e,"__esModule",{value:!0})});var K$e=m(W$e=>{"use strict";Object.defineProperty(W$e,"__esModule",{value:!0})});var Q$e=m(Y$e=>{"use strict";Object.defineProperty(Y$e,"__esModule",{value:!0})});var J$e=m(Z$e=>{"use strict";Object.defineProperty(Z$e,"__esModule",{value:!0})});var eVe=m(X$e=>{"use strict";Object.defineProperty(X$e,"__esModule",{value:!0})});var rVe=m(tVe=>{"use strict";Object.defineProperty(tVe,"__esModule",{value:!0})});var iVe=m(nVe=>{"use strict";Object.defineProperty(nVe,"__esModule",{value:!0})});var sVe=m(oVe=>{"use strict";Object.defineProperty(oVe,"__esModule",{value:!0})});var aVe=m(F_=>{"use strict";Object.defineProperty(F_,"__esModule",{value:!0});F_.TelemetryType=F_.TelemetryTypeString=void 0;F_.telemetryTypeToBaseType=AZt;F_.baseTypeToTelemetryType=xZt;function AZt(t){switch(t){case is.Event:return"EventData";case is.Exception:return"ExceptionData";case is.Trace:return"MessageData";case is.Metric:return"MetricData";case is.Request:return"RequestData";case is.Dependency:return"RemoteDependencyData";case is.Availability:return"AvailabilityData";case is.PageView:return"PageViewData"}}function xZt(t){switch(t){case"EventData":return is.Event;case"ExceptionData":return is.Exception;case"MessageData":return is.Trace;case"MetricData":return is.Metric;case"RequestData":return is.Request;case"RemoteDependencyData":return is.Dependency;case"AvailabilityData":return is.Availability;case"PageViewData":return is.PageView}}F_.TelemetryTypeString={Event:"EventData",Exception:"ExceptionData",Trace:"MessageData",Metric:"MetricData",Request:"RequestData",Dependency:"RemoteDependencyData",Availability:"AvailabilityData",PageView:"PageViewData"};var is;(function(t){t[t.Event=0]="Event",t[t.Exception=1]="Exception",t[t.Trace=2]="Trace",t[t.Metric=3]="Metric",t[t.Request=4]="Request",t[t.Dependency=5]="Dependency",t[t.Availability=6]="Availability",t[t.PageView=7]="PageView"})(is||(F_.TelemetryType=is={}))});var cVe=m(Bo=>{"use strict";var wZt=Bo&&Bo.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),Ul=Bo&&Bo.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&wZt(e,t,r)};Object.defineProperty(Bo,"__esModule",{value:!0});Ul(q$e(),Bo);Ul(j$e(),Bo);Ul($$e(),Bo);Ul(H$e(),Bo);Ul(z$e(),Bo);Ul(K$e(),Bo);Ul(Q$e(),Bo);Ul(J$e(),Bo);Ul(eVe(),Bo);Ul(rVe(),Bo);Ul(iVe(),Bo);Ul(sVe(),Bo);Ul(aVe(),Bo)});var uVe=m(lVe=>{"use strict";Object.defineProperty(lVe,"__esModule",{value:!0})});var fVe=m(dVe=>{"use strict";Object.defineProperty(dVe,"__esModule",{value:!0})});var hVe=m(pVe=>{"use strict";Object.defineProperty(pVe,"__esModule",{value:!0})});var gVe=m(mVe=>{"use strict";Object.defineProperty(mVe,"__esModule",{value:!0})});var vVe=m(_Ve=>{"use strict";Object.defineProperty(_Ve,"__esModule",{value:!0})});var EVe=m(yVe=>{"use strict";Object.defineProperty(yVe,"__esModule",{value:!0})});var SVe=m(TVe=>{"use strict";Object.defineProperty(TVe,"__esModule",{value:!0})});var CVe=m(bVe=>{"use strict";Object.defineProperty(bVe,"__esModule",{value:!0})});var AVe=m(Rc=>{"use strict";var IZt=Rc&&Rc.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),j_=Rc&&Rc.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&IZt(e,t,r)};Object.defineProperty(Rc,"__esModule",{value:!0});j_(uVe(),Rc);j_(fVe(),Rc);j_(hVe(),Rc);j_(gVe(),Rc);j_(vVe(),Rc);j_(EVe(),Rc);j_(SVe(),Rc);j_(CVe(),Rc)});var sa=m(U0=>{"use strict";var PZt=U0&&U0.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),sU=U0&&U0.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&PZt(e,t,r)};Object.defineProperty(U0,"__esModule",{value:!0});sU(D$e(),U0);sU(Zne(),U0);sU(cVe(),U0);sU(AVe(),U0)});var Jne=m((hNn,xVe)=>{"use strict";var RZt=(function(){function t(){}return t.prototype.getUrl=function(){return this.url},t.prototype.RequestParser=function(){this.startTime=+new Date},t.prototype._setStatus=function(e,r){var n=+new Date;this.duration=n-this.startTime,this.statusCode=e;var o=this.properties||{};if(r){if(typeof r=="string")o.error=r;else if(r instanceof Error)o.error=r.message;else if(typeof r=="object")for(var s in r)o[s]=r[s]&&r[s].toString&&r[s].toString()}this.properties=o},t.prototype._isSuccess=function(){return 0<this.statusCode&&this.statusCode<400},t})();xVe.exports=RZt});var ni=m(ke=>{"use strict";var Gd;Object.defineProperty(ke,"__esModule",{value:!0});ke.WEB_INSTRUMENTATION_DEPRECATED_SOURCE=ke.WEB_INSTRUMENTATION_DEFAULT_SOURCE=ke.TIME_SINCE_ENQUEUED=ke.ENQUEUED_TIME=ke.MessageBusDestination=ke.MicrosoftEventHub=ke.AzNamespace=ke.AttachTypePrefix=ke.HttpRequestCookieNames=ke.StatsbeatNetworkCategory=ke.StatsbeatFeatureType=ke.StatsbeatInstrumentation=ke.StatsbeatFeature=ke.StatsbeatCounter=ke.StatsbeatAttach=ke.StatsbeatResourceProvider=ke.StatsbeatTelemetryName=ke.HeartBeatMetricName=ke.DependencyTypeName=ke.TelemetryTypeStringToQuickPulseDocumentType=ke.TelemetryTypeStringToQuickPulseType=ke.QuickPulseType=ke.QuickPulseDocumentType=ke.PerformanceToQuickPulseCounter=ke.MetricId=ke.PerformanceCounter=ke.QuickPulseCounter=ke.DEFAULT_LIVEMETRICS_HOST=ke.DEFAULT_LIVEMETRICS_ENDPOINT=ke.DEFAULT_BREEZE_ENDPOINT=ke.APPLICATION_INSIGHTS_SDK_VERSION=void 0;ke.APPLICATION_INSIGHTS_SDK_VERSION="2.9.8";ke.DEFAULT_BREEZE_ENDPOINT="https://dc.services.visualstudio.com";ke.DEFAULT_LIVEMETRICS_ENDPOINT="https://rt.services.visualstudio.com";ke.DEFAULT_LIVEMETRICS_HOST="rt.services.visualstudio.com";var Cs;(function(t){t.COMMITTED_BYTES="\\Memory\\Committed Bytes",t.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",t.REQUEST_RATE="\\ApplicationInsights\\Requests/Sec",t.REQUEST_FAILURE_RATE="\\ApplicationInsights\\Requests Failed/Sec",t.REQUEST_DURATION="\\ApplicationInsights\\Request Duration",t.DEPENDENCY_RATE="\\ApplicationInsights\\Dependency Calls/Sec",t.DEPENDENCY_FAILURE_RATE="\\ApplicationInsights\\Dependency Calls Failed/Sec",t.DEPENDENCY_DURATION="\\ApplicationInsights\\Dependency Call Duration",t.EXCEPTION_RATE="\\ApplicationInsights\\Exceptions/Sec"})(Cs||(ke.QuickPulseCounter=Cs={}));var oM;(function(t){t.PRIVATE_BYTES="\\Process(??APP_WIN32_PROC??)\\Private Bytes",t.AVAILABLE_BYTES="\\Memory\\Available Bytes",t.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",t.PROCESS_TIME="\\Process(??APP_WIN32_PROC??)\\% Processor Time",t.REQUEST_RATE="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Requests/Sec",t.REQUEST_DURATION="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Request Execution Time"})(oM||(ke.PerformanceCounter=oM={}));var wVe;(function(t){t.REQUESTS_DURATION="requests/duration",t.DEPENDENCIES_DURATION="dependencies/duration",t.EXCEPTIONS_COUNT="exceptions/count",t.TRACES_COUNT="traces/count"})(wVe||(ke.MetricId=wVe={}));ke.PerformanceToQuickPulseCounter=(Gd={},Gd[oM.PROCESSOR_TIME]=Cs.PROCESSOR_TIME,Gd[oM.REQUEST_RATE]=Cs.REQUEST_RATE,Gd[oM.REQUEST_DURATION]=Cs.REQUEST_DURATION,Gd[Cs.COMMITTED_BYTES]=Cs.COMMITTED_BYTES,Gd[Cs.REQUEST_FAILURE_RATE]=Cs.REQUEST_FAILURE_RATE,Gd[Cs.DEPENDENCY_RATE]=Cs.DEPENDENCY_RATE,Gd[Cs.DEPENDENCY_FAILURE_RATE]=Cs.DEPENDENCY_FAILURE_RATE,Gd[Cs.DEPENDENCY_DURATION]=Cs.DEPENDENCY_DURATION,Gd[Cs.EXCEPTION_RATE]=Cs.EXCEPTION_RATE,Gd);ke.QuickPulseDocumentType={Event:"Event",Exception:"Exception",Trace:"Trace",Metric:"Metric",Request:"Request",Dependency:"RemoteDependency",Availability:"Availability",PageView:"PageView"};ke.QuickPulseType={Event:"EventTelemetryDocument",Exception:"ExceptionTelemetryDocument",Trace:"TraceTelemetryDocument",Metric:"MetricTelemetryDocument",Request:"RequestTelemetryDocument",Dependency:"DependencyTelemetryDocument",Availability:"AvailabilityTelemetryDocument",PageView:"PageViewTelemetryDocument"};ke.TelemetryTypeStringToQuickPulseType={EventData:ke.QuickPulseType.Event,ExceptionData:ke.QuickPulseType.Exception,MessageData:ke.QuickPulseType.Trace,MetricData:ke.QuickPulseType.Metric,RequestData:ke.QuickPulseType.Request,RemoteDependencyData:ke.QuickPulseType.Dependency,AvailabilityData:ke.QuickPulseType.Availability,PageViewData:ke.QuickPulseType.PageView};ke.TelemetryTypeStringToQuickPulseDocumentType={EventData:ke.QuickPulseDocumentType.Event,ExceptionData:ke.QuickPulseDocumentType.Exception,MessageData:ke.QuickPulseDocumentType.Trace,MetricData:ke.QuickPulseDocumentType.Metric,RequestData:ke.QuickPulseDocumentType.Request,RemoteDependencyData:ke.QuickPulseDocumentType.Dependency,AvailabilityData:ke.QuickPulseDocumentType.Availability,PageViewData:ke.QuickPulseDocumentType.PageView};ke.DependencyTypeName={Grpc:"GRPC",Http:"HTTP",InProc:"InProc",Sql:"SQL",QueueMessage:"Queue Message"};ke.HeartBeatMetricName="HeartbeatState";ke.StatsbeatTelemetryName="Statsbeat";ke.StatsbeatResourceProvider={appsvc:"appsvc",aks:"aks",functions:"functions",vm:"vm",unknown:"unknown"};ke.StatsbeatAttach={codeless:"IntegratedAuto",sdk:"Manual"};ke.StatsbeatCounter={REQUEST_SUCCESS:"Request_Success_Count",REQUEST_FAILURE:"Request_Failure_Count",REQUEST_DURATION:"Request_Duration",RETRY_COUNT:"Retry_Count",THROTTLE_COUNT:"Throttle_Count",EXCEPTION_COUNT:"Exception_Count",ATTACH:"Attach",FEATURE:"Feature"};var IVe;(function(t){t[t.NONE=0]="NONE",t[t.DISK_RETRY=1]="DISK_RETRY",t[t.AAD_HANDLING=2]="AAD_HANDLING",t[t.BROWSER_SDK_LOADER=4]="BROWSER_SDK_LOADER",t[t.LIVE_METRICS=16]="LIVE_METRICS",t[t.NATIVE_METRICS=8192]="NATIVE_METRICS"})(IVe||(ke.StatsbeatFeature=IVe={}));var PVe;(function(t){t[t.NONE=0]="NONE",t[t.AZURE_CORE_TRACING=1]="AZURE_CORE_TRACING",t[t.MONGODB=2]="MONGODB",t[t.MYSQL=4]="MYSQL",t[t.REDIS=8]="REDIS",t[t.POSTGRES=16]="POSTGRES",t[t.BUNYAN=32]="BUNYAN",t[t.WINSTON=64]="WINSTON",t[t.CONSOLE=128]="CONSOLE"})(PVe||(ke.StatsbeatInstrumentation=PVe={}));var RVe;(function(t){t[t.Feature=0]="Feature",t[t.Instrumentation=1]="Instrumentation"})(RVe||(ke.StatsbeatFeatureType=RVe={}));var OVe;(function(t){t[t.Breeze=0]="Breeze",t[t.Quickpulse=1]="Quickpulse"})(OVe||(ke.StatsbeatNetworkCategory=OVe={}));var MVe;(function(t){t.SESSION="ai_session",t.USER="ai_user",t.AUTH_USER="ai_authUser"})(MVe||(ke.HttpRequestCookieNames=MVe={}));var NVe;(function(t){t.INTEGRATED_AUTO="i",t.MANUAL="m"})(NVe||(ke.AttachTypePrefix=NVe={}));ke.AzNamespace="az.namespace";ke.MicrosoftEventHub="Microsoft.EventHub";ke.MessageBusDestination="message_bus.destination";ke.ENQUEUED_TIME="enqueuedTime";ke.TIME_SINCE_ENQUEUED="timeSinceEnqueued";ke.WEB_INSTRUMENTATION_DEFAULT_SOURCE="https://js.monitor.azure.com/scripts/b/ai";ke.WEB_INSTRUMENTATION_DEPRECATED_SOURCE="https://az416426.vo.msecnd.net/scripts/b/ai"});var rie=m((tie,LVe)=>{"use strict";var OZt=tie&&tie.__extends||(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(n[s]=o[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),aU=require("url"),MZt=sa(),Xne=Ss(),ql=vx(),NZt=Jne(),B_=OE(),LZt=Dne(),eie=oU(),kZt=qn(),cU=ni(),DZt=(function(t){OZt(e,t);function e(r,n){var o=t.call(this)||this;return r&&(o.method=r.method,o.url=o._getAbsoluteUrl(r),o.startTime=+new Date,o.socketRemoteAddress=r.socket&&r.socket.remoteAddress,o.parseHeaders(r,n),r.connection&&(o.connectionRemoteAddress=r.connection.remoteAddress,o.legacySocketRemoteAddress=r.connection.socket&&r.connection.socket.remoteAddress)),o}return e.prototype.onError=function(r,n){this._setStatus(void 0,r),n&&(this.duration=n)},e.prototype.onResponse=function(r,n){this._setStatus(r.statusCode,void 0),n&&(this.duration=n)},e.prototype.getRequestTelemetry=function(r){var n=this.method;try{n+=" "+new aU.URL(this.url).pathname}catch{}var o={id:this.requestId,name:n,url:this.url,source:this.sourceCorrelationId,duration:this.duration,resultCode:this.statusCode?this.statusCode.toString():null,success:this._isSuccess(),properties:this.properties};if(r&&r.time?o.time=r.time:this.startTime&&(o.time=new Date(this.startTime)),r){for(var s in r)o[s]||(o[s]=r[s]);if(r.properties)for(var s in r.properties)o.properties[s]=r.properties[s]}return o},e.prototype.getRequestTags=function(r){var n={};for(var o in r)n[o]=r[o];return n[e.keys.locationIp]=r[e.keys.locationIp]||this._getIp(),n[e.keys.sessionId]=r[e.keys.sessionId]||this._getId(cU.HttpRequestCookieNames.SESSION),n[e.keys.userId]=r[e.keys.userId]||this._getId(cU.HttpRequestCookieNames.USER),n[e.keys.userAuthUserId]=r[e.keys.userAuthUserId]||this._getId(cU.HttpRequestCookieNames.AUTH_USER),n[e.keys.operationName]=this.getOperationName(r),n[e.keys.operationParentId]=this.getOperationParentId(r),n[e.keys.operationId]=this.getOperationId(r),n},e.prototype.getOperationId=function(r){return r[e.keys.operationId]||this.operationId},e.prototype.getOperationParentId=function(r){return r[e.keys.operationParentId]||this.parentId||this.getOperationId(r)},e.prototype.getOperationName=function(r){if(r[e.keys.operationName])return r[e.keys.operationName];var n="";try{n=new aU.URL(this.url).pathname}catch{}var o=this.method;return n&&(o+=" "+n),o},e.prototype.getRequestId=function(){return this.requestId},e.prototype.getCorrelationContextHeader=function(){return this.correlationContextHeader},e.prototype.getTraceparent=function(){return this.traceparent},e.prototype.getTracestate=function(){return this.tracestate},e.prototype.getLegacyRootId=function(){return this.legacyRootId},e.prototype._getAbsoluteUrl=function(r){if(!r.headers)return r.url;var n=r.connection?r.connection.encrypted:null,o=n||r.headers["x-forwarded-proto"]=="https"?"https":"http",s=o+"://"+r.headers.host+"/",a="",c="";try{var l=new aU.URL(r.url,s);a=l.pathname,c=l.search}catch{}var u=aU.format({protocol:o,host:r.headers.host,pathname:a,search:c});return u},e.prototype._getIp=function(){var r=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/,n=function(s){var a=r.exec(s);if(a)return a[0]},o=n(this.rawHeaders["x-forwarded-for"])||n(this.rawHeaders["x-client-ip"])||n(this.rawHeaders["x-real-ip"])||n(this.connectionRemoteAddress)||n(this.socketRemoteAddress)||n(this.legacySocketRemoteAddress);return!o&&this.connectionRemoteAddress&&this.connectionRemoteAddress.substr&&this.connectionRemoteAddress.substr(0,2)==="::"&&(o="127.0.0.1"),o},e.prototype._getId=function(r){var n=this.rawHeaders&&this.rawHeaders.cookie&&typeof this.rawHeaders.cookie=="string"&&this.rawHeaders.cookie||"";if(r===cU.HttpRequestCookieNames.AUTH_USER)try{n=decodeURI(n)}catch(s){n="",kZt.warn("Could not decode the auth cookie with error: ",Xne.dumpObj(s))}var o=e.parseId(Xne.getCookie(r,n));return o},e.prototype.setBackCompatFromThisTraceContext=function(){this.operationId=this.traceparent.traceId,this.traceparent.legacyRootId&&(this.legacyRootId=this.traceparent.legacyRootId),this.parentId=this.traceparent.parentId,this.traceparent.updateSpanId(),this.requestId=this.traceparent.getBackCompatRequestId()},e.prototype.parseHeaders=function(r,n){if(this.rawHeaders=r.headers||r.rawHeaders,this.userAgent=r.headers&&r.headers["user-agent"],this.sourceCorrelationId=Xne.getCorrelationContextTarget(r,ql.requestContextSourceKey),r.headers){var o=r.headers[ql.traceStateHeader]?r.headers[ql.traceStateHeader].toString():null,s=r.headers[ql.traceparentHeader]?r.headers[ql.traceparentHeader].toString():null,a=r.headers[ql.requestIdHeader]?r.headers[ql.requestIdHeader].toString():null,c=r.headers[ql.parentIdHeader]?r.headers[ql.parentIdHeader].toString():null,l=r.headers[ql.rootIdHeader]?r.headers[ql.rootIdHeader].toString():null;this.correlationContextHeader=r.headers[ql.correlationContextHeader]?r.headers[ql.correlationContextHeader].toString():null,B_.w3cEnabled&&(s||o)?(this.traceparent=new eie(s?s.toString():null),this.tracestate=s&&o&&new LZt(o?o.toString():null),this.setBackCompatFromThisTraceContext()):a?B_.w3cEnabled?(this.traceparent=new eie(null,a),this.setBackCompatFromThisTraceContext()):(this.parentId=a,this.requestId=B_.generateRequestId(this.parentId),this.operationId=B_.getRootId(this.requestId)):B_.w3cEnabled?(this.traceparent=new eie,this.traceparent.parentId=c,this.traceparent.legacyRootId=l||c,this.setBackCompatFromThisTraceContext()):(this.parentId=c,this.requestId=B_.generateRequestId(l||this.parentId),this.correlationContextHeader=null,this.operationId=B_.getRootId(this.requestId)),n&&(this.requestId=n,this.operationId=B_.getRootId(this.requestId))}},e.parseId=function(r){var n=r.split("|");return n.length>0?n[0]:""},e.keys=new MZt.ContextTagKeys,e})(NZt);LVe.exports=DZt});var ZVe=m((Kt,QVe)=>{Kt=QVe.exports=Wr;var En;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?En=function(){var t=Array.prototype.slice.call(arguments,0);t.unshift("SEMVER"),console.log.apply(console,t)}:En=function(){};Kt.SEMVER_SPEC_VERSION="2.0.0";var sM=256,lU=Number.MAX_SAFE_INTEGER||9007199254740991,nie=16,UZt=sM-6,aM=Kt.re=[],Wn=Kt.safeRe=[],Te=Kt.src=[],kr=0,cie="[a-zA-Z0-9-]",iie=[["\\s",1],["\\d",sM],[cie,UZt]];function mU(t){for(var e=0;e<iie.length;e++){var r=iie[e][0],n=iie[e][1];t=t.split(r+"*").join(r+"{0,"+n+"}").split(r+"+").join(r+"{1,"+n+"}")}return t}var Ex=kr++;Te[Ex]="0|[1-9]\\d*";var Tx=kr++;Te[Tx]="\\d+";var lie=kr++;Te[lie]="\\d*[a-zA-Z-]"+cie+"*";var DVe=kr++;Te[DVe]="("+Te[Ex]+")\\.("+Te[Ex]+")\\.("+Te[Ex]+")";var UVe=kr++;Te[UVe]="("+Te[Tx]+")\\.("+Te[Tx]+")\\.("+Te[Tx]+")";var oie=kr++;Te[oie]="(?:"+Te[Ex]+"|"+Te[lie]+")";var sie=kr++;Te[sie]="(?:"+Te[Tx]+"|"+Te[lie]+")";var uie=kr++;Te[uie]="(?:-("+Te[oie]+"(?:\\."+Te[oie]+")*))";var die=kr++;Te[die]="(?:-?("+Te[sie]+"(?:\\."+Te[sie]+")*))";var aie=kr++;Te[aie]=cie+"+";var lM=kr++;Te[lM]="(?:\\+("+Te[aie]+"(?:\\."+Te[aie]+")*))";var fie=kr++,qVe="v?"+Te[DVe]+Te[uie]+"?"+Te[lM]+"?";Te[fie]="^"+qVe+"$";var pie="[v=\\s]*"+Te[UVe]+Te[die]+"?"+Te[lM]+"?",hie=kr++;Te[hie]="^"+pie+"$";var xx=kr++;Te[xx]="((?:<|>)?=?)";var uU=kr++;Te[uU]=Te[Tx]+"|x|X|\\*";var dU=kr++;Te[dU]=Te[Ex]+"|x|X|\\*";var NE=kr++;Te[NE]="[v=\\s]*("+Te[dU]+")(?:\\.("+Te[dU]+")(?:\\.("+Te[dU]+")(?:"+Te[uie]+")?"+Te[lM]+"?)?)?";var bx=kr++;Te[bx]="[v=\\s]*("+Te[uU]+")(?:\\.("+Te[uU]+")(?:\\.("+Te[uU]+")(?:"+Te[die]+")?"+Te[lM]+"?)?)?";var FVe=kr++;Te[FVe]="^"+Te[xx]+"\\s*"+Te[NE]+"$";var jVe=kr++;Te[jVe]="^"+Te[xx]+"\\s*"+Te[bx]+"$";var BVe=kr++;Te[BVe]="(?:^|[^\\d])(\\d{1,"+nie+"})(?:\\.(\\d{1,"+nie+"}))?(?:\\.(\\d{1,"+nie+"}))?(?:$|[^\\d])";var gU=kr++;Te[gU]="(?:~>?)";var Cx=kr++;Te[Cx]="(\\s*)"+Te[gU]+"\\s+";aM[Cx]=new RegExp(Te[Cx],"g");Wn[Cx]=new RegExp(mU(Te[Cx]),"g");var qZt="$1~",$Ve=kr++;Te[$Ve]="^"+Te[gU]+Te[NE]+"$";var VVe=kr++;Te[VVe]="^"+Te[gU]+Te[bx]+"$";var _U=kr++;Te[_U]="(?:\\^)";var Ax=kr++;Te[Ax]="(\\s*)"+Te[_U]+"\\s+";aM[Ax]=new RegExp(Te[Ax],"g");Wn[Ax]=new RegExp(mU(Te[Ax]),"g");var FZt="$1^",HVe=kr++;Te[HVe]="^"+Te[_U]+Te[NE]+"$";var GVe=kr++;Te[GVe]="^"+Te[_U]+Te[bx]+"$";var mie=kr++;Te[mie]="^"+Te[xx]+"\\s*("+pie+")$|^$";var gie=kr++;Te[gie]="^"+Te[xx]+"\\s*("+qVe+")$|^$";var LE=kr++;Te[LE]="(\\s*)"+Te[xx]+"\\s*("+pie+"|"+Te[NE]+")";aM[LE]=new RegExp(Te[LE],"g");Wn[LE]=new RegExp(mU(Te[LE]),"g");var jZt="$1$2$3",zVe=kr++;Te[zVe]="^\\s*("+Te[NE]+")\\s+-\\s+("+Te[NE]+")\\s*$";var WVe=kr++;Te[WVe]="^\\s*("+Te[bx]+")\\s+-\\s+("+Te[bx]+")\\s*$";var KVe=kr++;Te[KVe]="(<|>)?=?\\s*\\*";for(q0=0;q0<kr;q0++)En(q0,Te[q0]),aM[q0]||(aM[q0]=new RegExp(Te[q0]),Wn[q0]=new RegExp(mU(Te[q0])));var q0;Kt.parse=kE;function kE(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof Wr)return t;if(typeof t!="string"||t.length>sM)return null;var r=e.loose?Wn[hie]:Wn[fie];if(!r.test(t))return null;try{return new Wr(t,e)}catch{return null}}Kt.valid=BZt;function BZt(t,e){var r=kE(t,e);return r?r.version:null}Kt.clean=$Zt;function $Zt(t,e){var r=kE(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null}Kt.SemVer=Wr;function Wr(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof Wr){if(t.loose===e.loose)return t;t=t.version}else if(typeof t!="string")throw new TypeError("Invalid Version: "+t);if(t.length>sM)throw new TypeError("version is longer than "+sM+" characters");if(!(this instanceof Wr))return new Wr(t,e);En("SemVer",t,e),this.options=e,this.loose=!!e.loose;var r=t.trim().match(e.loose?Wn[hie]:Wn[fie]);if(!r)throw new TypeError("Invalid Version: "+t);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>lU||this.major<0)throw new TypeError("Invalid major version");if(this.minor>lU||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>lU||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(function(n){if(/^[0-9]+$/.test(n)){var o=+n;if(o>=0&&o<lU)return o}return n}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}Wr.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version};Wr.prototype.toString=function(){return this.version};Wr.prototype.compare=function(t){return En("SemVer.compare",this.version,this.options,t),t instanceof Wr||(t=new Wr(t,this.options)),this.compareMain(t)||this.comparePre(t)};Wr.prototype.compareMain=function(t){return t instanceof Wr||(t=new Wr(t,this.options)),Sx(this.major,t.major)||Sx(this.minor,t.minor)||Sx(this.patch,t.patch)};Wr.prototype.comparePre=function(t){if(t instanceof Wr||(t=new Wr(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;var e=0;do{var r=this.prerelease[e],n=t.prerelease[e];if(En("prerelease compare",e,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return Sx(r,n)}while(++e)};Wr.prototype.inc=function(t,e){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e),this.inc("pre",e);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",e),this.inc("pre",e);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}e&&(this.prerelease[0]===e?isNaN(this.prerelease[1])&&(this.prerelease=[e,0]):this.prerelease=[e,0]);break;default:throw new Error("invalid increment argument: "+t)}return this.format(),this.raw=this.version,this};Kt.inc=VZt;function VZt(t,e,r,n){typeof r=="string"&&(n=r,r=void 0);try{return new Wr(t,r).inc(e,n).version}catch{return null}}Kt.diff=HZt;function HZt(t,e){if(_ie(t,e))return null;var r=kE(t),n=kE(e),o="";if(r.prerelease.length||n.prerelease.length){o="pre";var s="prerelease"}for(var a in r)if((a==="major"||a==="minor"||a==="patch")&&r[a]!==n[a])return o+a;return s}Kt.compareIdentifiers=Sx;var kVe=/^[0-9]+$/;function Sx(t,e){var r=kVe.test(t),n=kVe.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1}Kt.rcompareIdentifiers=GZt;function GZt(t,e){return Sx(e,t)}Kt.major=zZt;function zZt(t,e){return new Wr(t,e).major}Kt.minor=WZt;function WZt(t,e){return new Wr(t,e).minor}Kt.patch=KZt;function KZt(t,e){return new Wr(t,e).patch}Kt.compare=Hh;function Hh(t,e,r){return new Wr(t,r).compare(new Wr(e,r))}Kt.compareLoose=YZt;function YZt(t,e){return Hh(t,e,!0)}Kt.rcompare=QZt;function QZt(t,e,r){return Hh(e,t,r)}Kt.sort=ZZt;function ZZt(t,e){return t.sort(function(r,n){return Kt.compare(r,n,e)})}Kt.rsort=JZt;function JZt(t,e){return t.sort(function(r,n){return Kt.rcompare(r,n,e)})}Kt.gt=cM;function cM(t,e,r){return Hh(t,e,r)>0}Kt.lt=fU;function fU(t,e,r){return Hh(t,e,r)<0}Kt.eq=_ie;function _ie(t,e,r){return Hh(t,e,r)===0}Kt.neq=YVe;function YVe(t,e,r){return Hh(t,e,r)!==0}Kt.gte=vie;function vie(t,e,r){return Hh(t,e,r)>=0}Kt.lte=yie;function yie(t,e,r){return Hh(t,e,r)<=0}Kt.cmp=pU;function pU(t,e,r,n){switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return _ie(t,r,n);case"!=":return YVe(t,r,n);case">":return cM(t,r,n);case">=":return vie(t,r,n);case"<":return fU(t,r,n);case"<=":return yie(t,r,n);default:throw new TypeError("Invalid operator: "+e)}}Kt.Comparator=Mu;function Mu(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof Mu){if(t.loose===!!e.loose)return t;t=t.value}if(!(this instanceof Mu))return new Mu(t,e);t=t.trim().split(/\s+/).join(" "),En("comparator",t,e),this.options=e,this.loose=!!e.loose,this.parse(t),this.semver===uM?this.value="":this.value=this.operator+this.semver.version,En("comp",this)}var uM={};Mu.prototype.parse=function(t){var e=this.options.loose?Wn[mie]:Wn[gie],r=t.match(e);if(!r)throw new TypeError("Invalid comparator: "+t);this.operator=r[1],this.operator==="="&&(this.operator=""),r[2]?this.semver=new Wr(r[2],this.options.loose):this.semver=uM};Mu.prototype.toString=function(){return this.value};Mu.prototype.test=function(t){return En("Comparator.test",t,this.options.loose),this.semver===uM?!0:(typeof t=="string"&&(t=new Wr(t,this.options)),pU(t,this.operator,this.semver,this.options))};Mu.prototype.intersects=function(t,e){if(!(t instanceof Mu))throw new TypeError("a Comparator is required");(!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1});var r;if(this.operator==="")return r=new Ii(t.value,e),hU(this.value,r,e);if(t.operator==="")return r=new Ii(this.value,e),hU(t.semver,r,e);var n=(this.operator===">="||this.operator===">")&&(t.operator===">="||t.operator===">"),o=(this.operator==="<="||this.operator==="<")&&(t.operator==="<="||t.operator==="<"),s=this.semver.version===t.semver.version,a=(this.operator===">="||this.operator==="<=")&&(t.operator===">="||t.operator==="<="),c=pU(this.semver,"<",t.semver,e)&&(this.operator===">="||this.operator===">")&&(t.operator==="<="||t.operator==="<"),l=pU(this.semver,">",t.semver,e)&&(this.operator==="<="||this.operator==="<")&&(t.operator===">="||t.operator===">");return n||o||s&&a||c||l};Kt.Range=Ii;function Ii(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof Ii)return t.loose===!!e.loose&&t.includePrerelease===!!e.includePrerelease?t:new Ii(t.raw,e);if(t instanceof Mu)return new Ii(t.value,e);if(!(this instanceof Ii))return new Ii(t,e);if(this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease,this.raw=t.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(function(r){return this.parseRange(r.trim())},this).filter(function(r){return r.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+this.raw);this.format()}Ii.prototype.format=function(){return this.range=this.set.map(function(t){return t.join(" ").trim()}).join("||").trim(),this.range};Ii.prototype.toString=function(){return this.range};Ii.prototype.parseRange=function(t){var e=this.options.loose,r=e?Wn[WVe]:Wn[zVe];t=t.replace(r,cJt),En("hyphen replace",t),t=t.replace(Wn[LE],jZt),En("comparator trim",t,Wn[LE]),t=t.replace(Wn[Cx],qZt),t=t.replace(Wn[Ax],FZt);var n=e?Wn[mie]:Wn[gie],o=t.split(" ").map(function(s){return eJt(s,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(o=o.filter(function(s){return!!s.match(n)})),o=o.map(function(s){return new Mu(s,this.options)},this),o};Ii.prototype.intersects=function(t,e){if(!(t instanceof Ii))throw new TypeError("a Range is required");return this.set.some(function(r){return r.every(function(n){return t.set.some(function(o){return o.every(function(s){return n.intersects(s,e)})})})})};Kt.toComparators=XZt;function XZt(t,e){return new Ii(t,e).set.map(function(r){return r.map(function(n){return n.value}).join(" ").trim().split(" ")})}function eJt(t,e){return En("comp",t,e),t=nJt(t,e),En("caret",t),t=tJt(t,e),En("tildes",t),t=oJt(t,e),En("xrange",t),t=aJt(t,e),En("stars",t),t}function Ga(t){return!t||t.toLowerCase()==="x"||t==="*"}function tJt(t,e){return t.trim().split(/\s+/).map(function(r){return rJt(r,e)}).join(" ")}function rJt(t,e){var r=e.loose?Wn[VVe]:Wn[$Ve];return t.replace(r,function(n,o,s,a,c){En("tilde",t,n,o,s,a,c);var l;return Ga(o)?l="":Ga(s)?l=">="+o+".0.0 <"+(+o+1)+".0.0":Ga(a)?l=">="+o+"."+s+".0 <"+o+"."+(+s+1)+".0":c?(En("replaceTilde pr",c),l=">="+o+"."+s+"."+a+"-"+c+" <"+o+"."+(+s+1)+".0"):l=">="+o+"."+s+"."+a+" <"+o+"."+(+s+1)+".0",En("tilde return",l),l})}function nJt(t,e){return t.trim().split(/\s+/).map(function(r){return iJt(r,e)}).join(" ")}function iJt(t,e){En("caret",t,e);var r=e.loose?Wn[GVe]:Wn[HVe];return t.replace(r,function(n,o,s,a,c){En("caret",t,n,o,s,a,c);var l;return Ga(o)?l="":Ga(s)?l=">="+o+".0.0 <"+(+o+1)+".0.0":Ga(a)?o==="0"?l=">="+o+"."+s+".0 <"+o+"."+(+s+1)+".0":l=">="+o+"."+s+".0 <"+(+o+1)+".0.0":c?(En("replaceCaret pr",c),o==="0"?s==="0"?l=">="+o+"."+s+"."+a+"-"+c+" <"+o+"."+s+"."+(+a+1):l=">="+o+"."+s+"."+a+"-"+c+" <"+o+"."+(+s+1)+".0":l=">="+o+"."+s+"."+a+"-"+c+" <"+(+o+1)+".0.0"):(En("no pr"),o==="0"?s==="0"?l=">="+o+"."+s+"."+a+" <"+o+"."+s+"."+(+a+1):l=">="+o+"."+s+"."+a+" <"+o+"."+(+s+1)+".0":l=">="+o+"."+s+"."+a+" <"+(+o+1)+".0.0"),En("caret return",l),l})}function oJt(t,e){return En("replaceXRanges",t,e),t.split(/\s+/).map(function(r){return sJt(r,e)}).join(" ")}function sJt(t,e){t=t.trim();var r=e.loose?Wn[jVe]:Wn[FVe];return t.replace(r,function(n,o,s,a,c,l){En("xRange",t,n,o,s,a,c,l);var u=Ga(s),d=u||Ga(a),f=d||Ga(c),p=f;return o==="="&&p&&(o=""),u?o===">"||o==="<"?n="<0.0.0":n="*":o&&p?(d&&(a=0),c=0,o===">"?(o=">=",d?(s=+s+1,a=0,c=0):(a=+a+1,c=0)):o==="<="&&(o="<",d?s=+s+1:a=+a+1),n=o+s+"."+a+"."+c):d?n=">="+s+".0.0 <"+(+s+1)+".0.0":f&&(n=">="+s+"."+a+".0 <"+s+"."+(+a+1)+".0"),En("xRange return",n),n})}function aJt(t,e){return En("replaceStars",t,e),t.trim().replace(Wn[KVe],"")}function cJt(t,e,r,n,o,s,a,c,l,u,d,f,p){return Ga(r)?e="":Ga(n)?e=">="+r+".0.0":Ga(o)?e=">="+r+"."+n+".0":e=">="+e,Ga(l)?c="":Ga(u)?c="<"+(+l+1)+".0.0":Ga(d)?c="<"+l+"."+(+u+1)+".0":f?c="<="+l+"."+u+"."+d+"-"+f:c="<="+c,(e+" "+c).trim()}Ii.prototype.test=function(t){if(!t)return!1;typeof t=="string"&&(t=new Wr(t,this.options));for(var e=0;e<this.set.length;e++)if(lJt(this.set[e],t,this.options))return!0;return!1};function lJt(t,e,r){for(var n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(n=0;n<t.length;n++)if(En(t[n].semver),t[n].semver!==uM&&t[n].semver.prerelease.length>0){var o=t[n].semver;if(o.major===e.major&&o.minor===e.minor&&o.patch===e.patch)return!0}return!1}return!0}Kt.satisfies=hU;function hU(t,e,r){try{e=new Ii(e,r)}catch{return!1}return e.test(t)}Kt.maxSatisfying=uJt;function uJt(t,e,r){var n=null,o=null;try{var s=new Ii(e,r)}catch{return null}return t.forEach(function(a){s.test(a)&&(!n||o.compare(a)===-1)&&(n=a,o=new Wr(n,r))}),n}Kt.minSatisfying=dJt;function dJt(t,e,r){var n=null,o=null;try{var s=new Ii(e,r)}catch{return null}return t.forEach(function(a){s.test(a)&&(!n||o.compare(a)===1)&&(n=a,o=new Wr(n,r))}),n}Kt.minVersion=fJt;function fJt(t,e){t=new Ii(t,e);var r=new Wr("0.0.0");if(t.test(r)||(r=new Wr("0.0.0-0"),t.test(r)))return r;r=null;for(var n=0;n<t.set.length;++n){var o=t.set[n];o.forEach(function(s){var a=new Wr(s.semver.version);switch(s.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!r||cM(r,a))&&(r=a);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+s.operator)}})}return r&&t.test(r)?r:null}Kt.validRange=pJt;function pJt(t,e){try{return new Ii(t,e).range||"*"}catch{return null}}Kt.ltr=hJt;function hJt(t,e,r){return Eie(t,e,"<",r)}Kt.gtr=mJt;function mJt(t,e,r){return Eie(t,e,">",r)}Kt.outside=Eie;function Eie(t,e,r,n){t=new Wr(t,n),e=new Ii(e,n);var o,s,a,c,l;switch(r){case">":o=cM,s=yie,a=fU,c=">",l=">=";break;case"<":o=fU,s=vie,a=cM,c="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(hU(t,e,n))return!1;for(var u=0;u<e.set.length;++u){var d=e.set[u],f=null,p=null;if(d.forEach(function(h){h.semver===uM&&(h=new Mu(">=0.0.0")),f=f||h,p=p||h,o(h.semver,f.semver,n)?f=h:a(h.semver,p.semver,n)&&(p=h)}),f.operator===c||f.operator===l||(!p.operator||p.operator===c)&&s(t,p.semver))return!1;if(p.operator===l&&a(t,p.semver))return!1}return!0}Kt.prerelease=gJt;function gJt(t,e){var r=kE(t,e);return r&&r.prerelease.length?r.prerelease:null}Kt.intersects=_Jt;function _Jt(t,e,r){return t=new Ii(t,r),e=new Ii(e,r),t.intersects(e)}Kt.coerce=vJt;function vJt(t){if(t instanceof Wr)return t;if(typeof t!="string")return null;var e=t.match(Wn[BVe]);return e==null?null:kE(e[1]+"."+(e[2]||"0")+"."+(e[3]||"0"))}});var EU=m((gNn,tHe)=>{"use strict";var XVe=ix(),wx=XVe.wrap,vU=XVe.unwrap,Gh="wrap@before";function yU(t,e,r){var n=!!t[e]&&t.propertyIsEnumerable(e);Object.defineProperty(t,e,{configurable:!0,enumerable:n,writable:!0,value:r})}function yJt(t,e){for(var r=e.length,n=0;n<r;n++){var o=e[n],s=t[Gh];if(typeof s=="function")s(o);else if(Array.isArray(s))for(var a=s.length,c=0;c<a;c++)s[c](o)}}function eHe(t,e){var r;return r=t._events&&t._events[e],Array.isArray(r)||(r?r=[r]:r=[]),r}function EJt(t,e,r){var n=eHe(t,e),o=n.filter(function(s){return r.indexOf(s)===-1});o.length>0&&yJt(t,o)}function JVe(t,e){if(t){var r=t;if(typeof t=="function")r=e(t);else if(Array.isArray(t)){r=[];for(var n=0;n<t.length;n++)r[n]=e(t[n])}return r}}tHe.exports=function(e,r,n){if(!e||!e.on||!e.addListener||!e.removeListener||!e.emit)throw new Error("can only wrap real EEs");if(!r)throw new Error("must have function to run on listener addition");if(!n)throw new Error("must have function to wrap listeners when emitting");function o(a){return function(l,u){var d=eHe(this,l).slice();try{var f=a.call(this,l,u);return EJt(this,l,d),f}finally{this.on.__wrapped||wx(this,"on",o),this.addListener.__wrapped||wx(this,"addListener",o)}}}function s(a){return function(l){if(!this._events||!this._events[l])return a.apply(this,arguments);var u=this._events[l];function d(f){return function(){this._events[l]=u;try{return f.apply(this,arguments)}finally{u=this._events[l],this._events[l]=JVe(u,n)}}}wx(this,"removeListener",d);try{return this._events[l]=JVe(u,n),a.apply(this,arguments)}finally{vU(this,"removeListener"),this._events[l]=u}}}e[Gh]?typeof e[Gh]=="function"?yU(e,Gh,[e[Gh],r]):Array.isArray(e[Gh])&&e[Gh].push(r):yU(e,Gh,r),e.__wrapped||(wx(e,"addListener",o),wx(e,"on",o),wx(e,"emit",s),yU(e,"__unwrap",function(){vU(e,"addListener"),vU(e,"on"),vU(e,"emit"),delete e[Gh],delete e.__wrapped}),yU(e,"__wrapped",!0))}});var oHe=m((_Nn,iHe)=>{"use strict";var hn=require("util"),zh=require("assert"),TJt=EU(),ii=require("async_hooks"),dM="cls@contexts",fM="error@context",Pi=process.env.DEBUG_CLS_HOOKED,pn=-1;iHe.exports={getNamespace:rHe,createNamespace:SJt,destroyNamespace:nHe,reset:bJt,ERROR_SYMBOL:fM};function Nu(t){this.name=t,this.active=null,this._set=[],this.id=null,this._contexts=new Map,this._indent=0}Nu.prototype.set=function(e,r){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");if(this.active[e]=r,Pi){let n=" ".repeat(this._indent<0?0:this._indent);gi(n+"CONTEXT-SET KEY:"+e+"="+r+" in ns:"+this.name+" currentUid:"+pn+" active:"+hn.inspect(this.active,{showHidden:!0,depth:2,colors:!0}))}return r};Nu.prototype.get=function(e){if(!this.active){if(Pi){let r=ii.currentId(),n=ii.triggerAsyncId(),o=" ".repeat(this._indent<0?0:this._indent);gi(`${o}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${e}=undefined currentUid:${pn} asyncHooksCurrentId:${r} triggerId:${n} len:${this._set.length}`)}return}if(Pi){let r=ii.executionAsyncId(),n=ii.triggerAsyncId(),o=" ".repeat(this._indent<0?0:this._indent);gi(o+"CONTEXT-GETTING KEY:"+e+"="+this.active[e]+" ("+this.name+") currentUid:"+pn+" active:"+hn.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),gi(`${o}CONTEXT-GETTING KEY: (${this.name}) ${e}=${this.active[e]} currentUid:${pn} asyncHooksCurrentId:${r} triggerId:${n} len:${this._set.length} active:${hn.inspect(this.active)}`)}return this.active[e]};Nu.prototype.createContext=function(){let e=Object.create(this.active?this.active:Object.prototype);if(e._ns_name=this.name,e.id=pn,Pi){let r=ii.executionAsyncId(),n=ii.triggerAsyncId(),o=" ".repeat(this._indent<0?0:this._indent);gi(`${o}CONTEXT-CREATED Context: (${this.name}) currentUid:${pn} asyncHooksCurrentId:${r} triggerId:${n} len:${this._set.length} context:${hn.inspect(e,{showHidden:!0,depth:2,colors:!0})}`)}return e};Nu.prototype.run=function(e){let r=this.createContext();this.enter(r);try{if(Pi){let n=ii.triggerAsyncId(),o=ii.executionAsyncId(),s=" ".repeat(this._indent<0?0:this._indent);gi(`${s}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${pn} triggerId:${n} asyncHooksCurrentId:${o} len:${this._set.length} context:${hn.inspect(r)}`)}return e(r),r}catch(n){throw n&&(n[fM]=r),n}finally{if(Pi){let n=ii.triggerAsyncId(),o=ii.executionAsyncId(),s=" ".repeat(this._indent<0?0:this._indent);gi(`${s}CONTEXT-RUN END: (${this.name}) currentUid:${pn} triggerId:${n} asyncHooksCurrentId:${o} len:${this._set.length} ${hn.inspect(r)}`)}this.exit(r)}};Nu.prototype.runAndReturn=function(e){let r;return this.run(function(n){r=e(n)}),r};Nu.prototype.runPromise=function(e){let r=this.createContext();this.enter(r);let n=e(r);if(!n||!n.then||!n.catch)throw new Error("fn must return a promise.");return Pi&&gi("CONTEXT-runPromise BEFORE: ("+this.name+") currentUid:"+pn+" len:"+this._set.length+" "+hn.inspect(r)),n.then(o=>(Pi&&gi("CONTEXT-runPromise AFTER then: ("+this.name+") currentUid:"+pn+" len:"+this._set.length+" "+hn.inspect(r)),this.exit(r),o)).catch(o=>{throw o[fM]=r,Pi&&gi("CONTEXT-runPromise AFTER catch: ("+this.name+") currentUid:"+pn+" len:"+this._set.length+" "+hn.inspect(r)),this.exit(r),o})};Nu.prototype.bind=function(e,r){r||(this.active?r=this.active:r=this.createContext());let n=this;return function(){n.enter(r);try{return e.apply(this,arguments)}catch(s){throw s&&(s[fM]=r),s}finally{n.exit(r)}}};Nu.prototype.enter=function(e){if(zh.ok(e,"context must be provided for entering"),Pi){let r=ii.executionAsyncId(),n=ii.triggerAsyncId(),o=" ".repeat(this._indent<0?0:this._indent);gi(`${o}CONTEXT-ENTER: (${this.name}) currentUid:${pn} triggerId:${n} asyncHooksCurrentId:${r} len:${this._set.length} ${hn.inspect(e)}`)}this._set.push(this.active),this.active=e};Nu.prototype.exit=function(e){if(zh.ok(e,"context must be provided for exiting"),Pi){let n=ii.executionAsyncId(),o=ii.triggerAsyncId(),s=" ".repeat(this._indent<0?0:this._indent);gi(`${s}CONTEXT-EXIT: (${this.name}) currentUid:${pn} triggerId:${o} asyncHooksCurrentId:${n} len:${this._set.length} ${hn.inspect(e)}`)}if(this.active===e){zh.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let r=this._set.lastIndexOf(e);r<0?(Pi&&gi("??ERROR?? context exiting but not entered - ignoring: "+hn.inspect(e)),zh.ok(r>=0,`context not currently entered; can't exit. 
`+hn.inspect(this)+`
`+hn.inspect(e))):(zh.ok(r,"can't remove top context"),this._set.splice(r,1))};Nu.prototype.bindEmitter=function(e){zh.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");let r=this,n="context@"+this.name;function o(a){a&&(a[dM]||(a[dM]=Object.create(null)),a[dM][n]={namespace:r,context:r.active})}function s(a){if(!(a&&a[dM]))return a;let c=a,l=a[dM];return Object.keys(l).forEach(function(u){let d=l[u];c=d.namespace.bind(c,d.context)}),c}TJt(e,o,s)};Nu.prototype.fromException=function(e){return e[fM]};function rHe(t){return process.namespaces[t]}function SJt(t){zh.ok(t,"namespace must be given a name."),Pi&&gi(`NS-CREATING NAMESPACE (${t})`);let e=new Nu(t);return e.id=pn,ii.createHook({init(n,o,s,a){if(pn=ii.executionAsyncId(),e.active){if(e._contexts.set(n,e.active),Pi){let c=" ".repeat(e._indent<0?0:e._indent);gi(`${c}INIT [${o}] (${t}) asyncId:${n} currentUid:${pn} triggerId:${s} active:${hn.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} resource:${a}`)}}else if(pn===0){let c=ii.triggerAsyncId(),l=e._contexts.get(c);if(l){if(e._contexts.set(n,l),Pi){let u=" ".repeat(e._indent<0?0:e._indent);gi(`${u}INIT USING CONTEXT FROM TRIGGERID [${o}] (${t}) asyncId:${n} currentUid:${pn} triggerId:${c} active:${hn.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} resource:${a}`)}}else if(Pi){let u=" ".repeat(e._indent<0?0:e._indent);gi(`${u}INIT MISSING CONTEXT [${o}] (${t}) asyncId:${n} currentUid:${pn} triggerId:${c} active:${hn.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} resource:${a}`)}}if(Pi&&o==="PROMISE"){gi(hn.inspect(a,{showHidden:!0}));let c=a.parentId,l=" ".repeat(e._indent<0?0:e._indent);gi(`${l}INIT RESOURCE-PROMISE [${o}] (${t}) parentId:${c} asyncId:${n} currentUid:${pn} triggerId:${s} active:${hn.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} resource:${a}`)}},before(n){pn=ii.executionAsyncId();let o;if(o=e._contexts.get(n)||e._contexts.get(pn),o){if(Pi){let s=ii.triggerAsyncId(),a=" ".repeat(e._indent<0?0:e._indent);gi(`${a}BEFORE (${t}) asyncId:${n} currentUid:${pn} triggerId:${s} active:${hn.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} context:${hn.inspect(o)}`),e._indent+=2}e.enter(o)}else if(Pi){let s=ii.triggerAsyncId(),a=" ".repeat(e._indent<0?0:e._indent);gi(`${a}BEFORE MISSING CONTEXT (${t}) asyncId:${n} currentUid:${pn} triggerId:${s} active:${hn.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} namespace._contexts:${hn.inspect(e._contexts,{showHidden:!0,depth:2,colors:!0})}`),e._indent+=2}},after(n){pn=ii.executionAsyncId();let o;if(o=e._contexts.get(n)||e._contexts.get(pn),o){if(Pi){let s=ii.triggerAsyncId();e._indent-=2;let a=" ".repeat(e._indent<0?0:e._indent);gi(`${a}AFTER (${t}) asyncId:${n} currentUid:${pn} triggerId:${s} active:${hn.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} context:${hn.inspect(o)}`)}e.exit(o)}else if(Pi){let s=ii.triggerAsyncId();e._indent-=2;let a=" ".repeat(e._indent<0?0:e._indent);gi(`${a}AFTER MISSING CONTEXT (${t}) asyncId:${n} currentUid:${pn} triggerId:${s} active:${hn.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} context:${hn.inspect(o)}`)}},destroy(n){if(pn=ii.executionAsyncId(),Pi){let o=ii.triggerAsyncId(),s=" ".repeat(e._indent<0?0:e._indent);gi(`${s}DESTROY (${t}) currentUid:${pn} asyncId:${n} triggerId:${o} active:${hn.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} context:${hn.inspect(e._contexts.get(pn))}`)}e._contexts.delete(n)}}).enable(),process.namespaces[t]=e,e}function nHe(t){let e=rHe(t);zh.ok(e,`can't delete nonexistent namespace! "`+t+'"'),zh.ok(e.id,"don't assign to process.namespaces directly! "+hn.inspect(e)),process.namespaces[t]=null}function bJt(){process.namespaces&&Object.keys(process.namespaces).forEach(function(t){nHe(t)}),process.namespaces=Object.create(null)}process.namespaces={};function gi(...t){Pi&&process._rawDebug(`${hn.format(...t)}`)}});var aHe=m((vNn,sHe)=>{"use strict";function CJt(){}sHe.exports=function(){let e=this._hooks,r=this._state,n=process.nextTick;process.nextTick=function(){if(!r.enabled)return n.apply(process,arguments);let o=new Array(arguments.length);for(let l=0;l<arguments.length;l++)o[l]=arguments[l];let s=o[0];if(typeof s!="function")throw new TypeError("callback is not a function");let a=new CJt,c=--r.counter;return e.init.call(a,c,0,null,null),o[0]=function(){e.pre.call(a,c);let l=!0;try{s.apply(this,arguments),l=!1}finally{l&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){e.post.call(a,c,!0),e.destroy.call(null,c)})}e.post.call(a,c,!1),e.destroy.call(null,c)},n.apply(process,o)}}});var lHe=m((yNn,cHe)=>{"use strict";function AJt(){}cHe.exports=function(){let e=this._hooks,r=this._state,n=global.Promise,o=n.prototype.then;n.prototype.then=l;function s(u,d,f,p){return typeof u!="function"?p?a(f):c(f):function(){e.pre.call(d,f);try{return u.apply(this,arguments)}finally{e.post.call(d,f,!1),e.destroy.call(null,f)}}}function a(u){return function(f){return e.destroy.call(null,u),f}}function c(u){return function(f){throw e.destroy.call(null,u),f}}function l(u,d){if(!r.enabled)return o.call(this,u,d);let f=new AJt,p=--r.counter;return e.init.call(f,p,0,null,null),o.call(this,s(u,f,p,!0),s(d,f,p,!1))}}});var dHe=m((ENn,uHe)=>{"use strict";var Fl=require("timers");function xJt(){}function wJt(){}function IJt(){}var PJt=new Map,RJt=new Map,OJt=new Map,Tie=null,Sie=!1;uHe.exports=function(){bie(this._hooks,this._state,"setTimeout","clearTimeout",xJt,PJt,!0),bie(this._hooks,this._state,"setInterval","clearInterval",wJt,RJt,!1),bie(this._hooks,this._state,"setImmediate","clearImmediate",IJt,OJt,!0),global.setTimeout=Fl.setTimeout,global.setInterval=Fl.setInterval,global.setImmediate=Fl.setImmediate,global.clearTimeout=Fl.clearTimeout,global.clearInterval=Fl.clearInterval,global.clearImmediate=Fl.clearImmediate};function bie(t,e,r,n,o,s,a){let c=Fl[r],l=Fl[n];Fl[r]=function(){if(!e.enabled)return c.apply(Fl,arguments);let u=new Array(arguments.length);for(let _=0;_<arguments.length;_++)u[_]=arguments[_];let d=u[0];if(typeof d!="function")throw new TypeError('"callback" argument must be a function');let f=new o,p=--e.counter,h;return t.init.call(f,p,0,null,null),u[0]=function(){Tie=h,t.pre.call(f,p);let _=!0;try{d.apply(this,arguments),_=!1}finally{_&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){t.post.call(f,p,!0),s.delete(h),t.destroy.call(null,p)})}t.post.call(f,p,!1),Tie=null,(a||Sie)&&(Sie=!1,s.delete(h),t.destroy.call(null,p))},h=c.apply(Fl,u),s.set(h,p),h},Fl[n]=function(u){if(Tie===u&&u!==null)Sie=!0;else if(s.has(u)){let d=s.get(u);s.delete(u),t.destroy.call(null,d)}l.apply(Fl,arguments)}}});var Cie=m((TNn,MJt)=>{MJt.exports={name:"async-hook-jl",description:"Inspect the life of handle objects in node",version:"1.7.6",author:"Andreas Madsen <amwebdk@gmail.com>",main:"./index.js",scripts:{test:"node ./test/runner.js && eslint ."},repository:{type:"git",url:"git://github.com/jeff-lewis/async-hook-jl.git"},keywords:["async","async hooks","inspect","async wrap"],license:"MIT",dependencies:{"stack-chain":"^1.3.7"},devDependencies:{async:"1.5.x","cli-color":"1.1.x",eslint:"^3.4.0",endpoint:"0.4.x"},engines:{node:"^4.7 || >=6.9 || >=7.3"}}});var hHe=m((SNn,pHe)=>{"use strict";var hM=process.binding("async_wrap"),NJt=hM.Providers.TIMERWRAP,fHe={nextTick:aHe(),promise:lHe(),timers:dHe()},pM=new Set;function LJt(){this.enabled=!1,this.counter=0}function Aie(){let t=this.initFns=[],e=this.preFns=[],r=this.postFns=[],n=this.destroyFns=[];this.init=function(o,s,a,c){if(s===NJt){pM.add(o);return}for(let l of t)l(o,this,s,a,c)},this.pre=function(o){if(!pM.has(o))for(let s of e)s(o,this)},this.post=function(o,s){if(!pM.has(o))for(let a of r)a(o,this,s)},this.destroy=function(o){if(pM.has(o)){pM.delete(o);return}for(let s of n)s(o)}}Aie.prototype.add=function(t){t.init&&this.initFns.push(t.init),t.pre&&this.preFns.push(t.pre),t.post&&this.postFns.push(t.post),t.destroy&&this.destroyFns.push(t.destroy)};function TU(t,e){let r=t.indexOf(e);r!==-1&&t.splice(r,1)}Aie.prototype.remove=function(t){t.init&&TU(this.initFns,t.init),t.pre&&TU(this.preFns,t.pre),t.post&&TU(this.postFns,t.post),t.destroy&&TU(this.destroyFns,t.destroy)};function mM(){this._state=new LJt,this._hooks=new Aie,this.version=Cie().version,this.providers=hM.Providers;for(let t of Object.keys(fHe))fHe[t].call(this);process.env.hasOwnProperty("NODE_ASYNC_HOOK_WARNING")&&console.warn("warning: you are using async-hook-jl which is unstable."),hM.setupHooks({init:this._hooks.init,pre:this._hooks.pre,post:this._hooks.post,destroy:this._hooks.destroy})}pHe.exports=mM;mM.prototype.addHooks=function(t){this._hooks.add(t)};mM.prototype.removeHooks=function(t){this._hooks.remove(t)};mM.prototype.enable=function(){this._state.enabled=!0,hM.enable()};mM.prototype.disable=function(){this._state.enabled=!1,hM.disable()}});var xie=m((bNn,kJt)=>{kJt.exports={name:"stack-chain",description:"API for combining call site modifiers",version:"1.3.7",author:"Andreas Madsen <amwebdk@gmail.com>",scripts:{test:"tap ./test/simple"},repository:{type:"git",url:"git://github.com/AndreasMadsen/stack-chain.git"},keywords:["stack","chain","trace","call site","concat","format"],devDependencies:{tap:"2.x.x","uglify-js":"2.5.x"},license:"MIT"}});var gHe=m((CNn,mHe)=>{function DJt(t){try{return Error.prototype.toString.call(t)}catch(e){try{return"<error: "+e+">"}catch{return"<error>"}}}mHe.exports=function(e,r){var n=[];n.push(DJt(e));for(var o=0;o<r.length;o++){var s=r[o],a;try{a=s.toString()}catch(c){try{a="<error: "+c+">"}catch{a="<error>"}}n.push("    at "+a)}return n.join(`
`)}});var EHe=m((ANn,yHe)=>{var SU=gHe();function vHe(){this.extend=new gM,this.filter=new gM,this.format=new _M,this.version=xie().version}var Iie=!1;vHe.prototype.callSite=function t(e){e||(e={}),Iie=!0;var r={};Error.captureStackTrace(r,t);var n=r.stack;return Iie=!1,n=n.slice(e.slice||0),e.extend&&(n=this.extend._modify(r,n)),e.filter&&(n=this.filter._modify(r,n)),n};var $_=new vHe;function gM(){this._modifiers=[]}gM.prototype._modify=function(t,e){for(var r=0,n=this._modifiers.length;r<n;r++)e=this._modifiers[r](t,e);return e};gM.prototype.attach=function(t){this._modifiers.push(t)};gM.prototype.deattach=function(t){var e=this._modifiers.indexOf(t);return e===-1?!1:(this._modifiers.splice(e,1),!0)};function _M(){this._formater=SU,this._previous=void 0}_M.prototype.replace=function(t){t?this._formater=t:this.restore()};_M.prototype.restore=function(){this._formater=SU,this._previous=void 0};_M.prototype._backup=function(){this._previous=this._formater};_M.prototype._roolback=function(){this._previous===SU?this.replace(void 0):this.replace(this._previous),this._previous=void 0};Error.prepareStackTrace&&$_.format.replace(Error.prepareStackTrace);var wie=!1;function _He(t,e){if(Iie)return e;if(wie)return SU(t,e);var r=e.concat();r=$_.extend._modify(t,r),r=$_.filter._modify(t,r),r=r.slice(0,Error.stackTraceLimit),Object.isExtensible(t)&&Object.getOwnPropertyDescriptor(t,"callSite")===void 0&&(t.callSite={original:e,mutated:r}),wie=!0;var n=$_.format._formater(t,r);return wie=!1,n}Object.defineProperty(Error,"prepareStackTrace",{get:function(){return _He},set:function(t){t===_He?$_.format._roolback():($_.format._backup(),$_.format.replace(t))}});function UJt(){return this.stack,this.callSite}Object.defineProperty(Error.prototype,"callSite",{get:UJt,set:function(t){Object.defineProperty(this,"callSite",{value:t,writable:!0,configurable:!0})},configurable:!0});yHe.exports=$_});var Rie=m((xNn,Pie)=>{if(global._stackChain)if(global._stackChain.version===xie().version)Pie.exports=global._stackChain;else throw new Error("Conflicting version of stack-chain found");else Pie.exports=global._stackChain=EHe()});var THe=m((wNn,Oie)=>{"use strict";var qJt=hHe();if(global._asyncHook)if(global._asyncHook.version===Cie().version)Oie.exports=global._asyncHook;else throw new Error("Conflicting version of async-hook-jl found");else Rie().filter.attach(function(e,r){return r.filter(function(n){let o=n.getFileName();return!(o&&o.slice(0,__dirname.length)===__dirname)})}),Oie.exports=global._asyncHook=new qJt});var wHe=m((INn,xHe)=>{"use strict";var no=require("util"),Wh=require("assert"),FJt=EU(),Ix=THe(),vM="cls@contexts",yM="error@context",bHe=[];for(let t in Ix.providers)bHe[Ix.providers[t]]=t;var Vi=process.env.DEBUG_CLS_HOOKED,Eo=-1;xHe.exports={getNamespace:CHe,createNamespace:jJt,destroyNamespace:AHe,reset:BJt,ERROR_SYMBOL:yM};function Lu(t){this.name=t,this.active=null,this._set=[],this.id=null,this._contexts=new Map}Lu.prototype.set=function(e,r){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return Vi&&ro("    SETTING KEY:"+e+"="+r+" in ns:"+this.name+" uid:"+Eo+" active:"+no.inspect(this.active,!0)),this.active[e]=r,r};Lu.prototype.get=function(e){if(!this.active){Vi&&ro("    GETTING KEY:"+e+"=undefined "+this.name+" uid:"+Eo+" active:"+no.inspect(this.active,!0));return}return Vi&&ro("    GETTING KEY:"+e+"="+this.active[e]+" "+this.name+" uid:"+Eo+" active:"+no.inspect(this.active,!0)),this.active[e]};Lu.prototype.createContext=function(){Vi&&ro("   CREATING Context: "+this.name+" uid:"+Eo+" len:"+this._set.length+"  active:"+no.inspect(this.active,!0,2,!0));let e=Object.create(this.active?this.active:Object.prototype);return e._ns_name=this.name,e.id=Eo,Vi&&ro("   CREATED Context: "+this.name+" uid:"+Eo+" len:"+this._set.length+"  context:"+no.inspect(e,!0,2,!0)),e};Lu.prototype.run=function(e){let r=this.createContext();this.enter(r);try{return Vi&&ro(" BEFORE RUN: "+this.name+" uid:"+Eo+" len:"+this._set.length+" "+no.inspect(r)),e(r),r}catch(n){throw n&&(n[yM]=r),n}finally{Vi&&ro(" AFTER RUN: "+this.name+" uid:"+Eo+" len:"+this._set.length+" "+no.inspect(r)),this.exit(r)}};Lu.prototype.runAndReturn=function(e){var r;return this.run(function(n){r=e(n)}),r};Lu.prototype.runPromise=function(e){let r=this.createContext();this.enter(r);let n=e(r);if(!n||!n.then||!n.catch)throw new Error("fn must return a promise.");return Vi&&ro(" BEFORE runPromise: "+this.name+" uid:"+Eo+" len:"+this._set.length+" "+no.inspect(r)),n.then(o=>(Vi&&ro(" AFTER runPromise: "+this.name+" uid:"+Eo+" len:"+this._set.length+" "+no.inspect(r)),this.exit(r),o)).catch(o=>{throw o[yM]=r,Vi&&ro(" AFTER runPromise: "+this.name+" uid:"+Eo+" len:"+this._set.length+" "+no.inspect(r)),this.exit(r),o})};Lu.prototype.bind=function(e,r){r||(this.active?r=this.active:r=this.createContext());let n=this;return function(){n.enter(r);try{return e.apply(this,arguments)}catch(s){throw s&&(s[yM]=r),s}finally{n.exit(r)}}};Lu.prototype.enter=function(e){Wh.ok(e,"context must be provided for entering"),Vi&&ro("  ENTER "+this.name+" uid:"+Eo+" len:"+this._set.length+" context: "+no.inspect(e)),this._set.push(this.active),this.active=e};Lu.prototype.exit=function(e){if(Wh.ok(e,"context must be provided for exiting"),Vi&&ro("  EXIT "+this.name+" uid:"+Eo+" len:"+this._set.length+" context: "+no.inspect(e)),this.active===e){Wh.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let r=this._set.lastIndexOf(e);r<0?(Vi&&ro("??ERROR?? context exiting but not entered - ignoring: "+no.inspect(e)),Wh.ok(r>=0,`context not currently entered; can't exit. 
`+no.inspect(this)+`
`+no.inspect(e))):(Wh.ok(r,"can't remove top context"),this._set.splice(r,1))};Lu.prototype.bindEmitter=function(e){Wh.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");let r=this,n="context@"+this.name;function o(a){a&&(a[vM]||(a[vM]=Object.create(null)),a[vM][n]={namespace:r,context:r.active})}function s(a){if(!(a&&a[vM]))return a;let c=a,l=a[vM];return Object.keys(l).forEach(function(u){let d=l[u];c=d.namespace.bind(c,d.context)}),c}FJt(e,o,s)};Lu.prototype.fromException=function(e){return e[yM]};function CHe(t){return process.namespaces[t]}function jJt(t){Wh.ok(t,"namespace must be given a name."),Vi&&ro("CREATING NAMESPACE "+t);let e=new Lu(t);return e.id=Eo,Ix.addHooks({init(r,n,o,s,a){Eo=r,s?(e._contexts.set(r,e._contexts.get(s)),Vi&&ro("PARENTID: "+t+" uid:"+r+" parent:"+s+" provider:"+o)):e._contexts.set(Eo,e.active),Vi&&ro("INIT "+t+" uid:"+r+" parent:"+s+" provider:"+bHe[o]+" active:"+no.inspect(e.active,!0))},pre(r,n){Eo=r;let o=e._contexts.get(r);o?(Vi&&ro(" PRE "+t+" uid:"+r+" handle:"+bU(n)+" context:"+no.inspect(o)),e.enter(o)):Vi&&ro(" PRE MISSING CONTEXT "+t+" uid:"+r+" handle:"+bU(n))},post(r,n){Eo=r;let o=e._contexts.get(r);o?(Vi&&ro(" POST "+t+" uid:"+r+" handle:"+bU(n)+" context:"+no.inspect(o)),e.exit(o)):Vi&&ro(" POST MISSING CONTEXT "+t+" uid:"+r+" handle:"+bU(n))},destroy(r){Eo=r,Vi&&ro("DESTROY "+t+" uid:"+r+" context:"+no.inspect(e._contexts.get(Eo))+" active:"+no.inspect(e.active,!0)),e._contexts.delete(r)}}),process.namespaces[t]=e,e}function AHe(t){let e=CHe(t);Wh.ok(e,`can't delete nonexistent namespace! "`+t+'"'),Wh.ok(e.id,"don't assign to process.namespaces directly! "+no.inspect(e)),process.namespaces[t]=null}function BJt(){process.namespaces&&Object.keys(process.namespaces).forEach(function(t){AHe(t)}),process.namespaces=Object.create(null)}process.namespaces={};Ix._state&&!Ix._state.enabled&&Ix.enable();function ro(t){process.env.DEBUG&&process._rawDebug(t)}function bU(t){if(!t)return t;if(typeof t=="function")return t.name?t.name:(t.toString().trim().match(/^function\s*([^\s(]+)/)||[])[1];if(t.constructor&&t.constructor.name)return t.constructor.name}if(Vi){Mie=Rie();for(SHe in Mie.filter._modifiers)Mie.filter.deattach(SHe)}var Mie,SHe});var IHe=m((PNn,Nie)=>{"use strict";var $Jt=ZVe();process&&$Jt.gte(process.versions.node,"8.0.0")?Nie.exports=oHe():Nie.exports=wHe()});var GHe=m((Yt,HHe)=>{Yt=HHe.exports=Kr;var Tn;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?Tn=function(){var t=Array.prototype.slice.call(arguments,0);t.unshift("SEMVER"),console.log.apply(console,t)}:Tn=function(){};Yt.SEMVER_SPEC_VERSION="2.0.0";var EM=256,CU=Number.MAX_SAFE_INTEGER||9007199254740991,Lie=16,VJt=EM-6,TM=Yt.re=[],Kn=Yt.safeRe=[],Se=Yt.src=[],Dr=0,Fie="[a-zA-Z0-9-]",kie=[["\\s",1],["\\d",EM],[Fie,VJt]];function RU(t){for(var e=0;e<kie.length;e++){var r=kie[e][0],n=kie[e][1];t=t.split(r+"*").join(r+"{0,"+n+"}").split(r+"+").join(r+"{1,"+n+"}")}return t}var Px=Dr++;Se[Px]="0|[1-9]\\d*";var Rx=Dr++;Se[Rx]="\\d+";var jie=Dr++;Se[jie]="\\d*[a-zA-Z-]"+Fie+"*";var RHe=Dr++;Se[RHe]="("+Se[Px]+")\\.("+Se[Px]+")\\.("+Se[Px]+")";var OHe=Dr++;Se[OHe]="("+Se[Rx]+")\\.("+Se[Rx]+")\\.("+Se[Rx]+")";var Die=Dr++;Se[Die]="(?:"+Se[Px]+"|"+Se[jie]+")";var Uie=Dr++;Se[Uie]="(?:"+Se[Rx]+"|"+Se[jie]+")";var Bie=Dr++;Se[Bie]="(?:-("+Se[Die]+"(?:\\."+Se[Die]+")*))";var $ie=Dr++;Se[$ie]="(?:-?("+Se[Uie]+"(?:\\."+Se[Uie]+")*))";var qie=Dr++;Se[qie]=Fie+"+";var bM=Dr++;Se[bM]="(?:\\+("+Se[qie]+"(?:\\."+Se[qie]+")*))";var Vie=Dr++,MHe="v?"+Se[RHe]+Se[Bie]+"?"+Se[bM]+"?";Se[Vie]="^"+MHe+"$";var Hie="[v=\\s]*"+Se[OHe]+Se[$ie]+"?"+Se[bM]+"?",Gie=Dr++;Se[Gie]="^"+Hie+"$";var kx=Dr++;Se[kx]="((?:<|>)?=?)";var AU=Dr++;Se[AU]=Se[Rx]+"|x|X|\\*";var xU=Dr++;Se[xU]=Se[Px]+"|x|X|\\*";var DE=Dr++;Se[DE]="[v=\\s]*("+Se[xU]+")(?:\\.("+Se[xU]+")(?:\\.("+Se[xU]+")(?:"+Se[Bie]+")?"+Se[bM]+"?)?)?";var Mx=Dr++;Se[Mx]="[v=\\s]*("+Se[AU]+")(?:\\.("+Se[AU]+")(?:\\.("+Se[AU]+")(?:"+Se[$ie]+")?"+Se[bM]+"?)?)?";var NHe=Dr++;Se[NHe]="^"+Se[kx]+"\\s*"+Se[DE]+"$";var LHe=Dr++;Se[LHe]="^"+Se[kx]+"\\s*"+Se[Mx]+"$";var kHe=Dr++;Se[kHe]="(?:^|[^\\d])(\\d{1,"+Lie+"})(?:\\.(\\d{1,"+Lie+"}))?(?:\\.(\\d{1,"+Lie+"}))?(?:$|[^\\d])";var OU=Dr++;Se[OU]="(?:~>?)";var Nx=Dr++;Se[Nx]="(\\s*)"+Se[OU]+"\\s+";TM[Nx]=new RegExp(Se[Nx],"g");Kn[Nx]=new RegExp(RU(Se[Nx]),"g");var HJt="$1~",DHe=Dr++;Se[DHe]="^"+Se[OU]+Se[DE]+"$";var UHe=Dr++;Se[UHe]="^"+Se[OU]+Se[Mx]+"$";var MU=Dr++;Se[MU]="(?:\\^)";var Lx=Dr++;Se[Lx]="(\\s*)"+Se[MU]+"\\s+";TM[Lx]=new RegExp(Se[Lx],"g");Kn[Lx]=new RegExp(RU(Se[Lx]),"g");var GJt="$1^",qHe=Dr++;Se[qHe]="^"+Se[MU]+Se[DE]+"$";var FHe=Dr++;Se[FHe]="^"+Se[MU]+Se[Mx]+"$";var zie=Dr++;Se[zie]="^"+Se[kx]+"\\s*("+Hie+")$|^$";var Wie=Dr++;Se[Wie]="^"+Se[kx]+"\\s*("+MHe+")$|^$";var UE=Dr++;Se[UE]="(\\s*)"+Se[kx]+"\\s*("+Hie+"|"+Se[DE]+")";TM[UE]=new RegExp(Se[UE],"g");Kn[UE]=new RegExp(RU(Se[UE]),"g");var zJt="$1$2$3",jHe=Dr++;Se[jHe]="^\\s*("+Se[DE]+")\\s+-\\s+("+Se[DE]+")\\s*$";var BHe=Dr++;Se[BHe]="^\\s*("+Se[Mx]+")\\s+-\\s+("+Se[Mx]+")\\s*$";var $He=Dr++;Se[$He]="(<|>)?=?\\s*\\*";for(F0=0;F0<Dr;F0++)Tn(F0,Se[F0]),TM[F0]||(TM[F0]=new RegExp(Se[F0]),Kn[F0]=new RegExp(RU(Se[F0])));var F0;Yt.parse=qE;function qE(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof Kr)return t;if(typeof t!="string"||t.length>EM)return null;var r=e.loose?Kn[Gie]:Kn[Vie];if(!r.test(t))return null;try{return new Kr(t,e)}catch{return null}}Yt.valid=WJt;function WJt(t,e){var r=qE(t,e);return r?r.version:null}Yt.clean=KJt;function KJt(t,e){var r=qE(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null}Yt.SemVer=Kr;function Kr(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof Kr){if(t.loose===e.loose)return t;t=t.version}else if(typeof t!="string")throw new TypeError("Invalid Version: "+t);if(t.length>EM)throw new TypeError("version is longer than "+EM+" characters");if(!(this instanceof Kr))return new Kr(t,e);Tn("SemVer",t,e),this.options=e,this.loose=!!e.loose;var r=t.trim().match(e.loose?Kn[Gie]:Kn[Vie]);if(!r)throw new TypeError("Invalid Version: "+t);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>CU||this.major<0)throw new TypeError("Invalid major version");if(this.minor>CU||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>CU||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(function(n){if(/^[0-9]+$/.test(n)){var o=+n;if(o>=0&&o<CU)return o}return n}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}Kr.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version};Kr.prototype.toString=function(){return this.version};Kr.prototype.compare=function(t){return Tn("SemVer.compare",this.version,this.options,t),t instanceof Kr||(t=new Kr(t,this.options)),this.compareMain(t)||this.comparePre(t)};Kr.prototype.compareMain=function(t){return t instanceof Kr||(t=new Kr(t,this.options)),Ox(this.major,t.major)||Ox(this.minor,t.minor)||Ox(this.patch,t.patch)};Kr.prototype.comparePre=function(t){if(t instanceof Kr||(t=new Kr(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;var e=0;do{var r=this.prerelease[e],n=t.prerelease[e];if(Tn("prerelease compare",e,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return Ox(r,n)}while(++e)};Kr.prototype.inc=function(t,e){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e),this.inc("pre",e);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",e),this.inc("pre",e);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}e&&(this.prerelease[0]===e?isNaN(this.prerelease[1])&&(this.prerelease=[e,0]):this.prerelease=[e,0]);break;default:throw new Error("invalid increment argument: "+t)}return this.format(),this.raw=this.version,this};Yt.inc=YJt;function YJt(t,e,r,n){typeof r=="string"&&(n=r,r=void 0);try{return new Kr(t,r).inc(e,n).version}catch{return null}}Yt.diff=QJt;function QJt(t,e){if(Kie(t,e))return null;var r=qE(t),n=qE(e),o="";if(r.prerelease.length||n.prerelease.length){o="pre";var s="prerelease"}for(var a in r)if((a==="major"||a==="minor"||a==="patch")&&r[a]!==n[a])return o+a;return s}Yt.compareIdentifiers=Ox;var PHe=/^[0-9]+$/;function Ox(t,e){var r=PHe.test(t),n=PHe.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1}Yt.rcompareIdentifiers=ZJt;function ZJt(t,e){return Ox(e,t)}Yt.major=JJt;function JJt(t,e){return new Kr(t,e).major}Yt.minor=XJt;function XJt(t,e){return new Kr(t,e).minor}Yt.patch=eXt;function eXt(t,e){return new Kr(t,e).patch}Yt.compare=Kh;function Kh(t,e,r){return new Kr(t,r).compare(new Kr(e,r))}Yt.compareLoose=tXt;function tXt(t,e){return Kh(t,e,!0)}Yt.rcompare=rXt;function rXt(t,e,r){return Kh(e,t,r)}Yt.sort=nXt;function nXt(t,e){return t.sort(function(r,n){return Yt.compare(r,n,e)})}Yt.rsort=iXt;function iXt(t,e){return t.sort(function(r,n){return Yt.rcompare(r,n,e)})}Yt.gt=SM;function SM(t,e,r){return Kh(t,e,r)>0}Yt.lt=wU;function wU(t,e,r){return Kh(t,e,r)<0}Yt.eq=Kie;function Kie(t,e,r){return Kh(t,e,r)===0}Yt.neq=VHe;function VHe(t,e,r){return Kh(t,e,r)!==0}Yt.gte=Yie;function Yie(t,e,r){return Kh(t,e,r)>=0}Yt.lte=Qie;function Qie(t,e,r){return Kh(t,e,r)<=0}Yt.cmp=IU;function IU(t,e,r,n){switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return Kie(t,r,n);case"!=":return VHe(t,r,n);case">":return SM(t,r,n);case">=":return Yie(t,r,n);case"<":return wU(t,r,n);case"<=":return Qie(t,r,n);default:throw new TypeError("Invalid operator: "+e)}}Yt.Comparator=ku;function ku(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof ku){if(t.loose===!!e.loose)return t;t=t.value}if(!(this instanceof ku))return new ku(t,e);t=t.trim().split(/\s+/).join(" "),Tn("comparator",t,e),this.options=e,this.loose=!!e.loose,this.parse(t),this.semver===CM?this.value="":this.value=this.operator+this.semver.version,Tn("comp",this)}var CM={};ku.prototype.parse=function(t){var e=this.options.loose?Kn[zie]:Kn[Wie],r=t.match(e);if(!r)throw new TypeError("Invalid comparator: "+t);this.operator=r[1],this.operator==="="&&(this.operator=""),r[2]?this.semver=new Kr(r[2],this.options.loose):this.semver=CM};ku.prototype.toString=function(){return this.value};ku.prototype.test=function(t){return Tn("Comparator.test",t,this.options.loose),this.semver===CM?!0:(typeof t=="string"&&(t=new Kr(t,this.options)),IU(t,this.operator,this.semver,this.options))};ku.prototype.intersects=function(t,e){if(!(t instanceof ku))throw new TypeError("a Comparator is required");(!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1});var r;if(this.operator==="")return r=new Ri(t.value,e),PU(this.value,r,e);if(t.operator==="")return r=new Ri(this.value,e),PU(t.semver,r,e);var n=(this.operator===">="||this.operator===">")&&(t.operator===">="||t.operator===">"),o=(this.operator==="<="||this.operator==="<")&&(t.operator==="<="||t.operator==="<"),s=this.semver.version===t.semver.version,a=(this.operator===">="||this.operator==="<=")&&(t.operator===">="||t.operator==="<="),c=IU(this.semver,"<",t.semver,e)&&(this.operator===">="||this.operator===">")&&(t.operator==="<="||t.operator==="<"),l=IU(this.semver,">",t.semver,e)&&(this.operator==="<="||this.operator==="<")&&(t.operator===">="||t.operator===">");return n||o||s&&a||c||l};Yt.Range=Ri;function Ri(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof Ri)return t.loose===!!e.loose&&t.includePrerelease===!!e.includePrerelease?t:new Ri(t.raw,e);if(t instanceof ku)return new Ri(t.value,e);if(!(this instanceof Ri))return new Ri(t,e);if(this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease,this.raw=t.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(function(r){return this.parseRange(r.trim())},this).filter(function(r){return r.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+this.raw);this.format()}Ri.prototype.format=function(){return this.range=this.set.map(function(t){return t.join(" ").trim()}).join("||").trim(),this.range};Ri.prototype.toString=function(){return this.range};Ri.prototype.parseRange=function(t){var e=this.options.loose,r=e?Kn[BHe]:Kn[jHe];t=t.replace(r,hXt),Tn("hyphen replace",t),t=t.replace(Kn[UE],zJt),Tn("comparator trim",t,Kn[UE]),t=t.replace(Kn[Nx],HJt),t=t.replace(Kn[Lx],GJt);var n=e?Kn[zie]:Kn[Wie],o=t.split(" ").map(function(s){return sXt(s,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(o=o.filter(function(s){return!!s.match(n)})),o=o.map(function(s){return new ku(s,this.options)},this),o};Ri.prototype.intersects=function(t,e){if(!(t instanceof Ri))throw new TypeError("a Range is required");return this.set.some(function(r){return r.every(function(n){return t.set.some(function(o){return o.every(function(s){return n.intersects(s,e)})})})})};Yt.toComparators=oXt;function oXt(t,e){return new Ri(t,e).set.map(function(r){return r.map(function(n){return n.value}).join(" ").trim().split(" ")})}function sXt(t,e){return Tn("comp",t,e),t=lXt(t,e),Tn("caret",t),t=aXt(t,e),Tn("tildes",t),t=dXt(t,e),Tn("xrange",t),t=pXt(t,e),Tn("stars",t),t}function za(t){return!t||t.toLowerCase()==="x"||t==="*"}function aXt(t,e){return t.trim().split(/\s+/).map(function(r){return cXt(r,e)}).join(" ")}function cXt(t,e){var r=e.loose?Kn[UHe]:Kn[DHe];return t.replace(r,function(n,o,s,a,c){Tn("tilde",t,n,o,s,a,c);var l;return za(o)?l="":za(s)?l=">="+o+".0.0 <"+(+o+1)+".0.0":za(a)?l=">="+o+"."+s+".0 <"+o+"."+(+s+1)+".0":c?(Tn("replaceTilde pr",c),l=">="+o+"."+s+"."+a+"-"+c+" <"+o+"."+(+s+1)+".0"):l=">="+o+"."+s+"."+a+" <"+o+"."+(+s+1)+".0",Tn("tilde return",l),l})}function lXt(t,e){return t.trim().split(/\s+/).map(function(r){return uXt(r,e)}).join(" ")}function uXt(t,e){Tn("caret",t,e);var r=e.loose?Kn[FHe]:Kn[qHe];return t.replace(r,function(n,o,s,a,c){Tn("caret",t,n,o,s,a,c);var l;return za(o)?l="":za(s)?l=">="+o+".0.0 <"+(+o+1)+".0.0":za(a)?o==="0"?l=">="+o+"."+s+".0 <"+o+"."+(+s+1)+".0":l=">="+o+"."+s+".0 <"+(+o+1)+".0.0":c?(Tn("replaceCaret pr",c),o==="0"?s==="0"?l=">="+o+"."+s+"."+a+"-"+c+" <"+o+"."+s+"."+(+a+1):l=">="+o+"."+s+"."+a+"-"+c+" <"+o+"."+(+s+1)+".0":l=">="+o+"."+s+"."+a+"-"+c+" <"+(+o+1)+".0.0"):(Tn("no pr"),o==="0"?s==="0"?l=">="+o+"."+s+"."+a+" <"+o+"."+s+"."+(+a+1):l=">="+o+"."+s+"."+a+" <"+o+"."+(+s+1)+".0":l=">="+o+"."+s+"."+a+" <"+(+o+1)+".0.0"),Tn("caret return",l),l})}function dXt(t,e){return Tn("replaceXRanges",t,e),t.split(/\s+/).map(function(r){return fXt(r,e)}).join(" ")}function fXt(t,e){t=t.trim();var r=e.loose?Kn[LHe]:Kn[NHe];return t.replace(r,function(n,o,s,a,c,l){Tn("xRange",t,n,o,s,a,c,l);var u=za(s),d=u||za(a),f=d||za(c),p=f;return o==="="&&p&&(o=""),u?o===">"||o==="<"?n="<0.0.0":n="*":o&&p?(d&&(a=0),c=0,o===">"?(o=">=",d?(s=+s+1,a=0,c=0):(a=+a+1,c=0)):o==="<="&&(o="<",d?s=+s+1:a=+a+1),n=o+s+"."+a+"."+c):d?n=">="+s+".0.0 <"+(+s+1)+".0.0":f&&(n=">="+s+"."+a+".0 <"+s+"."+(+a+1)+".0"),Tn("xRange return",n),n})}function pXt(t,e){return Tn("replaceStars",t,e),t.trim().replace(Kn[$He],"")}function hXt(t,e,r,n,o,s,a,c,l,u,d,f,p){return za(r)?e="":za(n)?e=">="+r+".0.0":za(o)?e=">="+r+"."+n+".0":e=">="+e,za(l)?c="":za(u)?c="<"+(+l+1)+".0.0":za(d)?c="<"+l+"."+(+u+1)+".0":f?c="<="+l+"."+u+"."+d+"-"+f:c="<="+c,(e+" "+c).trim()}Ri.prototype.test=function(t){if(!t)return!1;typeof t=="string"&&(t=new Kr(t,this.options));for(var e=0;e<this.set.length;e++)if(mXt(this.set[e],t,this.options))return!0;return!1};function mXt(t,e,r){for(var n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(n=0;n<t.length;n++)if(Tn(t[n].semver),t[n].semver!==CM&&t[n].semver.prerelease.length>0){var o=t[n].semver;if(o.major===e.major&&o.minor===e.minor&&o.patch===e.patch)return!0}return!1}return!0}Yt.satisfies=PU;function PU(t,e,r){try{e=new Ri(e,r)}catch{return!1}return e.test(t)}Yt.maxSatisfying=gXt;function gXt(t,e,r){var n=null,o=null;try{var s=new Ri(e,r)}catch{return null}return t.forEach(function(a){s.test(a)&&(!n||o.compare(a)===-1)&&(n=a,o=new Kr(n,r))}),n}Yt.minSatisfying=_Xt;function _Xt(t,e,r){var n=null,o=null;try{var s=new Ri(e,r)}catch{return null}return t.forEach(function(a){s.test(a)&&(!n||o.compare(a)===1)&&(n=a,o=new Kr(n,r))}),n}Yt.minVersion=vXt;function vXt(t,e){t=new Ri(t,e);var r=new Kr("0.0.0");if(t.test(r)||(r=new Kr("0.0.0-0"),t.test(r)))return r;r=null;for(var n=0;n<t.set.length;++n){var o=t.set[n];o.forEach(function(s){var a=new Kr(s.semver.version);switch(s.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!r||SM(r,a))&&(r=a);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+s.operator)}})}return r&&t.test(r)?r:null}Yt.validRange=yXt;function yXt(t,e){try{return new Ri(t,e).range||"*"}catch{return null}}Yt.ltr=EXt;function EXt(t,e,r){return Zie(t,e,"<",r)}Yt.gtr=TXt;function TXt(t,e,r){return Zie(t,e,">",r)}Yt.outside=Zie;function Zie(t,e,r,n){t=new Kr(t,n),e=new Ri(e,n);var o,s,a,c,l;switch(r){case">":o=SM,s=Qie,a=wU,c=">",l=">=";break;case"<":o=wU,s=Yie,a=SM,c="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(PU(t,e,n))return!1;for(var u=0;u<e.set.length;++u){var d=e.set[u],f=null,p=null;if(d.forEach(function(h){h.semver===CM&&(h=new ku(">=0.0.0")),f=f||h,p=p||h,o(h.semver,f.semver,n)?f=h:a(h.semver,p.semver,n)&&(p=h)}),f.operator===c||f.operator===l||(!p.operator||p.operator===c)&&s(t,p.semver))return!1;if(p.operator===l&&a(t,p.semver))return!1}return!0}Yt.prerelease=SXt;function SXt(t,e){var r=qE(t,e);return r&&r.prerelease.length?r.prerelease:null}Yt.intersects=bXt;function bXt(t,e,r){return t=new Ri(t,r),e=new Ri(e,r),t.intersects(e)}Yt.coerce=CXt;function CXt(t){if(t instanceof Kr)return t;if(typeof t!="string")return null;var e=t.match(Kn[kHe]);return e==null?null:qE(e[1]+"."+(e[2]||"0")+"."+(e[3]||"0"))}});var KHe=m((RNn,WHe)=>{var AXt=ix().wrap,Xie=1,eoe=2,toe=4,LU=8,Fn=[],xXt=0,aa=!1,V_=[],Dx,roe;function noe(t,e){var r=t.length,n=e.length,o=[];if(r===0&&n===0)return o;for(var s=0;s<r;s++)o[s]=t[s];if(n===0)return o;for(var a=0;a<n;a++){var c=!0;for(s=0;s<r;s++)if(t[s].uid===e[a].uid){c=!1;break}c&&o.push(e[a])}return o}process._fatalException?(NU=!1,Dx=function(e){var r=Fn.length;if(NU||r===0)return!1;var n=!1;NU=!0;for(var o=0;o<r;++o){var s=Fn[o];if((s.flags&LU)!==0){var a=Ux&&Ux[s.uid];n=s.error(a,e)||n}}return NU=!1,V_.length>0&&(Fn=V_.pop()),Ux=void 0,n&&!aa},roe=function(e,r,n){var o=[];aa=!0;for(var s=0;s<n;++s){var a=r[s];if(o[a.uid]=a.data,(a.flags&Xie)!==0){var c=a.create(a.data);c!==void 0&&(o[a.uid]=c)}}return aa=!1,function(){Ux=o,V_.push(Fn),Fn=noe(r,Fn),aa=!0;for(var l=0;l<n;++l)(r[l].flags&eoe)>0&&r[l].before(this,o[r[l].uid]);aa=!1;var u=e.apply(this,arguments);for(aa=!0,l=0;l<n;++l)(r[l].flags&toe)>0&&r[l].after(this,o[r[l].uid]);return aa=!1,Fn=V_.pop(),Ux=void 0,u}},AXt(process,"_fatalException",function(t){return function(r){return Dx(r)||t(r)}})):(Jie=!1,Dx=function(e){if(Jie)throw e;for(var r=!1,n=Fn.length,o=0;o<n;++o){var s=Fn[o];(s.flags&LU)!==0&&(r=s.error(null,e)||r)}if(!r&&aa)throw e},roe=function(e,r,n){var o=[];aa=!0;for(var s=0;s<n;++s){var a=r[s];if(o[a.uid]=a.data,(a.flags&Xie)!==0){var c=a.create(a.data);c!==void 0&&(o[a.uid]=c)}}return aa=!1,function(){var l=!1,u=!1;V_.push(Fn),Fn=noe(r,Fn),aa=!0;for(var d=0;d<n;++d)(r[d].flags&eoe)>0&&r[d].before(this,o[r[d].uid]);aa=!1;var f;try{f=e.apply(this,arguments)}catch(p){l=!0;for(var d=0;d<n;++d)if((Fn[d].flags&LU)!=0)try{u=Fn[d].error(o[r[d].uid],p)||u}catch(_){throw Jie=!0,_}if(!u)throw process.removeListener("uncaughtException",Dx),process._originalNextTick(function(){process.addListener("uncaughtException",Dx)}),p}finally{if(!l||u){for(aa=!0,d=0;d<n;++d)(r[d].flags&toe)>0&&r[d].after(this,o[r[d].uid]);aa=!1}Fn=V_.pop()}return f}},process.addListener("uncaughtException",Dx));var NU,Ux,Jie;function wXt(t,e,r){aa=!0;for(var n=0;n<r;++n){var o=e[n];o.create&&o.create(o.data)}return aa=!1,function(){V_.push(Fn),Fn=noe(e,Fn);var s=t.apply(this,arguments);return Fn=V_.pop(),s}}function IXt(t){var e=Fn.length;if(e===0)return t;for(var r=Fn.slice(),n=0;n<e;++n)if(r[n].flags>0)return roe(t,r,e);return wXt(t,r,e)}function j0(t,e){typeof t.create=="function"&&(this.create=t.create,this.flags|=Xie),typeof t.before=="function"&&(this.before=t.before,this.flags|=eoe),typeof t.after=="function"&&(this.after=t.after,this.flags|=toe),typeof t.error=="function"&&(this.error=t.error,this.flags|=LU),this.uid=++xXt,this.data=e===void 0?null:e}j0.prototype.create=void 0;j0.prototype.before=void 0;j0.prototype.after=void 0;j0.prototype.error=void 0;j0.prototype.data=void 0;j0.prototype.uid=0;j0.prototype.flags=0;function zHe(t,e){if(typeof t!="object"||!t)throw new TypeError("callbacks argument must be an object");return t instanceof j0?t:new j0(t,e)}function PXt(t,e){var r;t instanceof j0?r=t:r=zHe(t,e);for(var n=!1,o=0;o<Fn.length;o++)if(r===Fn[o]){n=!0;break}return n||Fn.push(r),r}function RXt(t){for(var e=0;e<Fn.length;e++)if(t===Fn[e]){Fn.splice(e,1);break}}process.createAsyncListener=zHe;process.addAsyncListener=PXt;process.removeAsyncListener=RXt;WHe.exports=IXt});var QHe=m((MNn,YHe)=>{"use strict";YHe.exports=(t,e)=>class extends t{constructor(n){var o,s;super(c);var a=this;try{n.apply(o,s)}catch(l){s[1](l)}return a;function c(l,u){o=this,s=[d,f];function d(p){return e(a,!1),l(p)}function f(p){return e(a,!1),u(p)}}}}});var nGe=m(()=>{"use strict";if(process.addAsyncListener)throw new Error("Don't require polyfill unless needed");var eGe=ix(),DU=GHe(),Oc=eGe.wrap,H_=eGe.massWrap,Oi=KHe(),OXt=require("util"),MXt=DU.gte(process.version,"6.0.0"),soe=DU.gte(process.version,"7.0.0"),NXt=DU.gte(process.version,"8.0.0"),LXt=DU.gte(process.version,"11.0.0"),B0=require("net");soe&&!B0._normalizeArgs?B0._normalizeArgs=function(t){if(t.length===0)return[{},null];var e=t[0],r={};typeof e=="object"&&e!==null?r=e:FXt(e)?r.path=e:(r.port=e,t.length>1&&typeof t[1]=="string"&&(r.host=t[1]));var n=t[t.length-1];return typeof n!="function"?[r,null]:[r,n]}:!soe&&!B0._normalizeConnectArgs&&(B0._normalizeConnectArgs=function(t){var e={};function r(o){return(o=Number(o))>=0?o:!1}typeof t[0]=="object"&&t[0]!==null?e=t[0]:typeof t[0]=="string"&&r(t[0])===!1?e.path=t[0]:(e.port=t[0],typeof t[1]=="string"&&(e.host=t[1]));var n=t[t.length-1];return typeof n=="function"?[e,n]:[e]});"_setUpListenHandle"in B0.Server.prototype?Oc(B0.Server.prototype,"_setUpListenHandle",ZHe):Oc(B0.Server.prototype,"_listen2",ZHe);function ZHe(t){return function(){this.on("connection",function(e){e._handle&&(e._handle.onread=Oi(e._handle.onread))});try{return t.apply(this,arguments)}finally{this._handle&&this._handle.onconnection&&(this._handle.onconnection=Oi(this._handle.onconnection))}}}function tGe(t){if(t&&t._handle){var e=t._handle;e._originalOnread||(e._originalOnread=e.onread),e.onread=Oi(e._originalOnread)}}Oc(B0.Socket.prototype,"connect",function(t){return function(){var e;NXt&&Array.isArray(arguments[0])&&Object.getOwnPropertySymbols(arguments[0]).length>0?e=arguments[0]:e=soe?B0._normalizeArgs(arguments):B0._normalizeConnectArgs(arguments),e[1]&&(e[1]=Oi(e[1]));var r=t.apply(this,e);return tGe(this),r}});var kXt=require("http");Oc(kXt.Agent.prototype,"addRequest",function(t){return function(e){var r=e.onSocket;return e.onSocket=Oi(function(n){return tGe(n),r.apply(this,arguments)}),t.apply(this,arguments)}});var ioe=require("child_process");function JHe(t){Array.isArray(t.stdio)&&t.stdio.forEach(function(e){e&&e._handle&&(e._handle.onread=Oi(e._handle.onread),Oc(e._handle,"close",UU))}),t._handle&&(t._handle.onexit=Oi(t._handle.onexit))}ioe.ChildProcess?Oc(ioe.ChildProcess.prototype,"spawn",function(t){return function(){var e=t.apply(this,arguments);return JHe(this),e}}):H_(ioe,["execFile","fork","spawn"],function(t){return function(){var e=t.apply(this,arguments);return JHe(e),e}});process._fatalException||(process._originalNextTick=process.nextTick);var loe=[];process._nextDomainTick&&loe.push("_nextDomainTick");process._tickDomainCallback&&loe.push("_tickDomainCallback");H_(process,loe,$0);Oc(process,"nextTick",UU);var uoe=["setTimeout","setInterval"];global.setImmediate&&uoe.push("setImmediate");var rGe=require("timers"),DXt=global.setTimeout===rGe.setTimeout;H_(rGe,uoe,UU);DXt&&H_(global,uoe,UU);var aoe=require("dns");H_(aoe,["lookup","resolve","resolve4","resolve6","resolveCname","resolveMx","resolveNs","resolveTxt","resolveSrv","reverse"],$0);aoe.resolveNaptr&&Oc(aoe,"resolveNaptr",$0);var jE=require("fs");H_(jE,["watch","rename","truncate","chown","fchown","chmod","fchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","watchFile","unwatchFile","exists"],$0);jE.lchown&&Oc(jE,"lchown",$0);jE.lchmod&&Oc(jE,"lchmod",$0);jE.ftruncate&&Oc(jE,"ftruncate",$0);var AM;try{AM=require("zlib")}catch{}AM&&AM.Deflate&&AM.Deflate.prototype&&(FE=Object.getPrototypeOf(AM.Deflate.prototype),FE._transform?Oc(FE,"_transform",$0):FE.write&&FE.flush&&FE.end&&H_(FE,["write","flush","end"],$0));var FE,coe;try{coe=require("crypto")}catch{}coe&&(ooe=["pbkdf2","randomBytes"],LXt||ooe.push("pseudoRandomBytes"),H_(coe,ooe,$0));var ooe,kU=!!global.Promise&&Promise.toString()==="function Promise() { [native code] }"&&Promise.toString.toString()==="function toString() { [native code] }";kU&&(XHe=process.addAsyncListener({create:function(){kU=!1}}),global.Promise.resolve(!0).then(function(){kU=!1}),process.removeAsyncListener(XHe));var XHe;kU&&UXt();function UXt(){var t=global.Promise;function e(a){if(!(this instanceof e))return t(a);if(typeof a!="function")return new t(a);var c,l,u=new t(d);u.__proto__=e.prototype;try{a.apply(c,l)}catch(f){l[1](f)}return u;function d(f,p){c=this,l=[h,_];function h(g){return n(u,!1),f(g)}function _(g){return n(u,!1),p(g)}}}if(OXt.inherits(e,t),Oc(t.prototype,"then",s),t.prototype.chain&&Oc(t.prototype,"chain",s),MXt)global.Promise=QHe()(t,n);else{var r=["all","race","reject","resolve","accept","defer"];r.forEach(function(a){typeof t[a]=="function"&&(e[a]=t[a])}),global.Promise=e}function n(a,c){(!a.__asl_wrapper||c)&&(a.__asl_wrapper=Oi(o))}function o(a,c,l,u){var d;try{return d=c.call(a,l),{returnVal:d,error:!1}}catch(f){return{errorVal:f,error:!0}}finally{d instanceof t?u.__asl_wrapper=function(){var p=d.__asl_wrapper||o;return p.apply(this,arguments)}:n(u,!0)}}function s(a){return function(){var l=this,u=a.apply(l,Array.prototype.map.call(arguments,d));return u.__asl_wrapper=function(p,h,_,g){return l.__asl_wrapper?(l.__asl_wrapper(p,function(){},null,u),u.__asl_wrapper(p,h,_,g)):o(p,h,_,g)},u;function d(f){return typeof f!="function"?f:Oi(function(p){var h=(l.__asl_wrapper||o)(this,f,p,u);if(h.error)throw h.errorVal;return h.returnVal})}}}}function $0(t){var e=function(){var r,n=arguments.length-1;if(typeof arguments[n]=="function"){r=Array(arguments.length);for(var o=0;o<arguments.length-1;o++)r[o]=arguments[o];r[n]=Oi(arguments[n])}return t.apply(this,r||arguments)};switch(t.length){case 1:return function(r){return arguments.length!==1?e.apply(this,arguments):(typeof r=="function"&&(r=Oi(r)),t.call(this,r))};case 2:return function(r,n){return arguments.length!==2?e.apply(this,arguments):(typeof n=="function"&&(n=Oi(n)),t.call(this,r,n))};case 3:return function(r,n,o){return arguments.length!==3?e.apply(this,arguments):(typeof o=="function"&&(o=Oi(o)),t.call(this,r,n,o))};case 4:return function(r,n,o,s){return arguments.length!==4?e.apply(this,arguments):(typeof s=="function"&&(s=Oi(s)),t.call(this,r,n,o,s))};case 5:return function(r,n,o,s,a){return arguments.length!==5?e.apply(this,arguments):(typeof a=="function"&&(a=Oi(a)),t.call(this,r,n,o,s,a))};case 6:return function(r,n,o,s,a,c){return arguments.length!==6?e.apply(this,arguments):(typeof c=="function"&&(c=Oi(c)),t.call(this,r,n,o,s,a,c))};default:return e}}function UU(t){var e=function(){var r;if(typeof arguments[0]=="function"){r=Array(arguments.length),r[0]=Oi(arguments[0]);for(var n=1;n<arguments.length;n++)r[n]=arguments[n]}return t.apply(this,r||arguments)};switch(t.length){case 1:return function(r){return arguments.length!==1?e.apply(this,arguments):(typeof r=="function"&&(r=Oi(r)),t.call(this,r))};case 2:return function(r,n){return arguments.length!==2?e.apply(this,arguments):(typeof r=="function"&&(r=Oi(r)),t.call(this,r,n))};case 3:return function(r,n,o){return arguments.length!==3?e.apply(this,arguments):(typeof r=="function"&&(r=Oi(r)),t.call(this,r,n,o))};case 4:return function(r,n,o,s){return arguments.length!==4?e.apply(this,arguments):(typeof r=="function"&&(r=Oi(r)),t.call(this,r,n,o,s))};case 5:return function(r,n,o,s,a){return arguments.length!==5?e.apply(this,arguments):(typeof r=="function"&&(r=Oi(r)),t.call(this,r,n,o,s,a))};case 6:return function(r,n,o,s,a,c){return arguments.length!==6?e.apply(this,arguments):(typeof r=="function"&&(r=Oi(r)),t.call(this,r,n,o,s,a,c))};default:return e}}function qXt(t){return(t=Number(t))>=0?t:!1}function FXt(t){return typeof t=="string"&&qXt(t)===!1}});var cGe=m((kNn,aGe)=>{"use strict";var Yh=require("assert"),jXt=EU(),xM="cls@contexts",doe="error@context";process.addAsyncListener||nGe();function zd(t){this.name=t,this.active=null,this._set=[],this.id=null}zd.prototype.set=function(t,e){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return this.active[t]=e,e};zd.prototype.get=function(t){if(this.active)return this.active[t]};zd.prototype.createContext=function(){return Object.create(this.active)};zd.prototype.run=function(t){var e=this.createContext();this.enter(e);try{return t(e),e}catch(r){throw r&&(r[doe]=e),r}finally{this.exit(e)}};zd.prototype.runAndReturn=function(t){var e;return this.run(function(r){e=t(r)}),e};zd.prototype.bind=function(t,e){e||(this.active?e=this.active:e=this.createContext());var r=this;return function(){r.enter(e);try{return t.apply(this,arguments)}catch(n){throw n&&(n[doe]=e),n}finally{r.exit(e)}}};zd.prototype.enter=function(t){Yh.ok(t,"context must be provided for entering"),this._set.push(this.active),this.active=t};zd.prototype.exit=function(t){if(Yh.ok(t,"context must be provided for exiting"),this.active===t){Yh.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}var e=this._set.lastIndexOf(t);Yh.ok(e>=0,"context not currently entered; can't exit"),Yh.ok(e,"can't remove top context"),this._set.splice(e,1)};zd.prototype.bindEmitter=function(t){Yh.ok(t.on&&t.addListener&&t.emit,"can only bind real EEs");var e=this,r="context@"+this.name;function n(s){s&&(s[xM]||(s[xM]=Object.create(null)),s[xM][r]={namespace:e,context:e.active})}function o(s){if(!(s&&s[xM]))return s;var a=s,c=s[xM];return Object.keys(c).forEach(function(l){var u=c[l];a=u.namespace.bind(a,u.context)}),a}jXt(t,n,o)};zd.prototype.fromException=function(t){return t[doe]};function iGe(t){return process.namespaces[t]}function BXt(t){Yh.ok(t,"namespace must be given a name!");var e=new zd(t);return e.id=process.addAsyncListener({create:function(){return e.active},before:function(r,n){n&&e.enter(n)},after:function(r,n){n&&e.exit(n)},error:function(r){r&&e.exit(r)}}),process.namespaces[t]=e,e}function oGe(t){var e=iGe(t);Yh.ok(e,"can't delete nonexistent namespace!"),Yh.ok(e.id,"don't assign to process.namespaces directly!"),process.removeAsyncListener(e.id),process.namespaces[t]=null}function sGe(){process.namespaces&&Object.keys(process.namespaces).forEach(function(t){oGe(t)}),process.namespaces=Object.create(null)}process.namespaces||sGe();aGe.exports={getNamespace:iGe,createNamespace:BXt,destroyNamespace:oGe,reset:sGe}});var z_=m(V0=>{"use strict";var $Xt=V0&&V0.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),VXt=V0&&V0.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),HXt=V0&&V0.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&$Xt(e,t,r);return VXt(e,t),e};Object.defineProperty(V0,"__esModule",{value:!0});V0.CorrelationContextManager=void 0;var G_=qn(),GXt=HXt(iU()),BE=oU(),foe=Dne(),lGe=rie(),qx=Ss(),zXt=(function(){function t(){}return t.getCurrentContext=function(){if(!t.enabled)return null;var e=t.session.get(t.CONTEXT_NAME);return e===void 0?null:e},t.generateContextObject=function(e,r,n,o,s,a){return r=r||e,this.enabled?{operation:{name:n,id:e,parentId:r,traceparent:s,tracestate:a},customProperties:new WXt(o)}:null},t.spanToContextObject=function(e,r,n){var o=new BE;return o.traceId=e.traceId,o.spanId=e.spanId,o.traceFlag=BE.formatOpenTelemetryTraceFlags(e.traceFlags)||BE.DEFAULT_TRACE_FLAG,o.parentId=r,t.generateContextObject(o.traceId,o.parentId,n,null,o)},t.runWithContext=function(e,r){var n;if(t.enabled)try{return t.session.bind(r,(n={},n[t.CONTEXT_NAME]=e,n))()}catch(o){G_.warn("Error binding to session context",qx.dumpObj(o))}return r()},t.wrapEmitter=function(e){if(t.enabled)try{t.session.bindEmitter(e)}catch(r){G_.warn("Error binding to session context",qx.dumpObj(r))}},t.wrapCallback=function(e,r){var n;if(t.enabled)try{return t.session.bind(e,r?(n={},n[t.CONTEXT_NAME]=r,n):void 0)}catch(o){G_.warn("Error binding to session context",qx.dumpObj(o))}return e},t.enable=function(e){if(!this.enabled){if(!this.isNodeVersionCompatible()){this.enabled=!1;return}if(!t.hasEverEnabled){this.forceClsHooked=e,this.hasEverEnabled=!0,typeof this.cls>"u"&&(t.forceClsHooked===!0||t.forceClsHooked===void 0&&t.shouldUseClsHooked()?this.cls=IHe():this.cls=cGe());try{t.session=this.cls.createNamespace("AI-CLS-Session")}catch(r){G_.warn("Failed to create AI-CLS-Session namespace. Correlation of requests may be lost",qx.dumpObj(r)),this.enabled=!1;return}GXt.registerContextPreservation(function(r){try{return t.session.bind(r)}catch(n){G_.warn("Error binding to session context",qx.dumpObj(n))}})}this.enabled=!0}},t.startOperation=function(e,r){var n=e&&e.traceContext||null,o=e&&e.spanContext?e:null,s=e&&e.traceId?e:null,a=e&&e.headers;if(o)return this.spanToContextObject(o.spanContext(),o.parentSpanId,o.name);if(s)return this.spanToContextObject(s,"|".concat(s.traceId,".").concat(s.spanId,"."),typeof r=="string"?r:"");var c=typeof r=="string"?r:"";if(n){var l=null,u=null;if(c=n.attributes.OperationName||c,r){var d=r;d.headers&&(d.headers.traceparent?l=new BE(d.headers.traceparent):d.headers["request-id"]&&(l=new BE(null,d.headers["request-id"])),d.headers.tracestate&&(u=new foe(d.headers.tracestate)))}l||(l=new BE(n.traceParent||n.traceparent)),u||(u=new foe(n.traceState||n.tracestate));var f=void 0;if(typeof r=="object"){var p=new lGe(r);f=p.getCorrelationContextHeader(),c=p.getOperationName({})}var h=t.generateContextObject(l.traceId,l.parentId,c,f,l,u);return h}if(a){var l=new BE(a.traceparent?a.traceparent.toString():null),u=new foe(a.tracestate?a.tracestate.toString():null),p=new lGe(e),h=t.generateContextObject(l.traceId,l.parentId,p.getOperationName({}),p.getCorrelationContextHeader(),l,u);return h}return G_.warn("startOperation was called with invalid arguments",arguments),null},t.disable=function(){this.enabled=!1},t.reset=function(){if(t.hasEverEnabled){t.session=null;try{t.session=this.cls.createNamespace("AI-CLS-Session")}catch(e){G_.warn("Failed to create AI-CLS-Session namespace. Correlation of requests may be lost",qx.dumpObj(e)),this.enabled=!1;return}}},t.isNodeVersionCompatible=function(){var e=process.versions.node.split(".");return parseInt(e[0])>3||parseInt(e[0])>2&&parseInt(e[1])>2},t.shouldUseClsHooked=function(){var e=process.versions.node.split(".");return parseInt(e[0])>8||parseInt(e[0])>=8&&parseInt(e[1])>=2},t.canUseClsHooked=function(){var e=process.versions.node.split("."),r=parseInt(e[0])>8||parseInt(e[0])>=8&&parseInt(e[1])>=0,n=parseInt(e[0])<8||parseInt(e[0])<=8&&parseInt(e[1])<2,o=parseInt(e[0])>4||parseInt(e[0])>=4&&parseInt(e[1])>=7;return!(r&&n)&&o},t.enabled=!1,t.hasEverEnabled=!1,t.forceClsHooked=void 0,t.CONTEXT_NAME="ApplicationInsights-Context",t})();V0.CorrelationContextManager=zXt;var WXt=(function(){function t(e){this.props=[],this.addHeaderData(e)}return t.prototype.addHeaderData=function(e){var r=e?e.split(", "):[];this.props=r.map(function(n){var o=n.split("=");return{key:o[0],value:o[1]}}).concat(this.props)},t.prototype.serializeToHeader=function(){return this.props.map(function(e){return"".concat(e.key,"=").concat(e.value)}).join(", ")},t.prototype.getProperty=function(e){for(var r=0;r<this.props.length;++r){var n=this.props[r];if(n.key===e)return n.value}},t.prototype.setProperty=function(e,r){if(t.bannedCharacters.test(e)||t.bannedCharacters.test(r)){G_.warn("Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: "+e+" and value: "+r);return}for(var n=0;n<this.props.length;++n){var o=this.props[n];if(o.key===e){o.value=r;return}}this.props.push({key:e,value:r})},t.bannedCharacters=/[,=]/,t})()});var uGe=m(jU=>{"use strict";Object.defineProperty(jU,"__esModule",{value:!0});jU.enable=YXt;jU.dispose=QXt;var qU=sa(),KXt=ni(),FU=$i(),W_=[],poe=function(t){var e=t.data.message;W_.forEach(function(r){e instanceof Error&&!r.config.enableLoggerErrorToTrace?r.trackException({exception:e}):e instanceof Error?r.trackTrace({message:e.toString(),severity:t.data.stderr?qU.SeverityLevel.Error:qU.SeverityLevel.Information}):(e.lastIndexOf(`
`)==e.length-1&&(e=e.substring(0,e.length-1)),r.trackTrace({message:e,severity:t.data.stderr?qU.SeverityLevel.Warning:qU.SeverityLevel.Information}))})};function YXt(t,e){if(t){var r=W_.find(function(n){return n==e});if(r)return;W_.length===0&&FU.channel.subscribe("console",poe,FU.trueFilter,function(n,o){var s=e.getStatsbeat();s&&s.addInstrumentation(KXt.StatsbeatInstrumentation.CONSOLE)}),W_.push(e)}else W_=W_.filter(function(n){return n!=e}),W_.length===0&&FU.channel.unsubscribe("console",poe)}function QXt(){FU.channel.unsubscribe("console",poe),W_=[]}});var dGe=m($U=>{"use strict";Object.defineProperty($U,"__esModule",{value:!0});$U.enable=XXt;$U.dispose=eer;var Fx=sa(),ZXt=ni(),BU=$i(),K_=[],JXt={10:Fx.SeverityLevel.Verbose,20:Fx.SeverityLevel.Verbose,30:Fx.SeverityLevel.Information,40:Fx.SeverityLevel.Warning,50:Fx.SeverityLevel.Error,60:Fx.SeverityLevel.Critical},hoe=function(t){var e=t.data.result,r=JXt[t.data.level];K_.forEach(function(n){try{var o=JSON.parse(e);if(o.err){var s=new Error(o.err.message);if(s.name=o.err.name,s.stack=o.err.stack,n.config.enableLoggerErrorToTrace){n.trackTrace({message:e,severity:r});return}n.trackException({exception:s});return}}catch{}n.trackTrace({message:e,severity:r})})};function XXt(t,e){if(t){var r=K_.find(function(n){return n==e});if(r)return;K_.length===0&&BU.channel.subscribe("bunyan",hoe,BU.trueFilter,function(n,o){var s=e.getStatsbeat();s&&s.addInstrumentation(ZXt.StatsbeatInstrumentation.BUNYAN)}),K_.push(e)}else K_=K_.filter(function(n){return n!=e}),K_.length===0&&BU.channel.unsubscribe("bunyan",hoe)}function eer(){BU.channel.unsubscribe("bunyan",hoe),K_=[]}});var fGe=m(HU=>{"use strict";Object.defineProperty(HU,"__esModule",{value:!0});HU.enable=ner;HU.dispose=ier;var ter=ni(),As=sa(),VU=$i(),Y_=[],rer={syslog:function(t){var e={emerg:As.SeverityLevel.Critical,alert:As.SeverityLevel.Critical,crit:As.SeverityLevel.Critical,error:As.SeverityLevel.Error,warning:As.SeverityLevel.Warning,notice:As.SeverityLevel.Information,info:As.SeverityLevel.Information,debug:As.SeverityLevel.Verbose};return e[t]===void 0?As.SeverityLevel.Information:e[t]},npm:function(t){var e={error:As.SeverityLevel.Error,warn:As.SeverityLevel.Warning,info:As.SeverityLevel.Information,verbose:As.SeverityLevel.Verbose,debug:As.SeverityLevel.Verbose,silly:As.SeverityLevel.Verbose};return e[t]===void 0?As.SeverityLevel.Information:e[t]},unknown:function(t){return As.SeverityLevel.Information}},moe=function(t){var e=t.data.message,r=rer[t.data.levelKind](t.data.level);Y_.forEach(function(n){e instanceof Error&&!n.config.enableLoggerErrorToTrace?n.trackException({exception:e,properties:t.data.meta}):e instanceof Error?n.trackTrace({message:e.toString(),severity:r,properties:t.data.meta}):n.trackTrace({message:e,severity:r,properties:t.data.meta})})};function ner(t,e){if(t){var r=Y_.find(function(n){return n==e});if(r)return;Y_.length===0&&VU.channel.subscribe("winston",moe,VU.trueFilter,function(n,o){var s=e.getStatsbeat();s&&s.addInstrumentation(ter.StatsbeatInstrumentation.WINSTON)}),Y_.push(e)}else Y_=Y_.filter(function(n){return n!=e}),Y_.length===0&&VU.channel.unsubscribe("winston",moe)}function ier(){VU.channel.unsubscribe("winston",moe),Y_=[]}});var hGe=m(($E,pGe)=>{"use strict";var oer=$E&&$E.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),ser=$E&&$E.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),aer=$E&&$E.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&oer(e,t,r);return ser(e,t),e},cer=aer(iU()),ler=(function(){function t(e){if(t.INSTANCE)throw new Error("Console logging adapter tracking should be configured from the applicationInsights object");this._client=e,t.INSTANCE=this}return t.prototype.enable=function(e,r){cer.IsInitialized&&(uGe().enable(e&&r,this._client),dGe().enable(e,this._client),fGe().enable(e,this._client))},t.prototype.isInitialized=function(){return this._isInitialized},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1,!1)},t._methodNames=["debug","info","log","warn","error"],t})();pGe.exports=ler});var gGe=m((jNn,mGe)=>{"use strict";var uer=(function(){function t(e){if(t.INSTANCE)throw new Error("Exception tracking should be configured from the applicationInsights object");t.INSTANCE=this,this._client=e;var r=process.versions.node.split(".");t._canUseUncaughtExceptionMonitor=parseInt(r[0])>13||parseInt(r[0])===13&&parseInt(r[1])>=7}return t.prototype.isInitialized=function(){return this._isInitialized},t.prototype.enable=function(e){var r=this;if(e){if(this._isInitialized=!0,!this._exceptionListenerHandle){var n=function(o,s,a){a===void 0&&(a=new Error(t._FALLBACK_ERROR_MESSAGE));var c={exception:a};c.contextObjects={},c.contextObjects.Error=a,r._client.trackException(c),r._client.flush({isAppCrashing:!0}),o&&s&&process.listeners(s).length===1&&(console.error(a),process.exit(1))};t._canUseUncaughtExceptionMonitor?(this._exceptionListenerHandle=n.bind(this,!1,void 0),process.on(t.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle)):(this._exceptionListenerHandle=n.bind(this,!0,t.UNCAUGHT_EXCEPTION_HANDLER_NAME),this._rejectionListenerHandle=n.bind(this,!1,void 0),process.on(t.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.on(t.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle))}}else this._exceptionListenerHandle&&(t._canUseUncaughtExceptionMonitor?process.removeListener(t.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle):(process.removeListener(t.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.removeListener(t.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle)),this._exceptionListenerHandle=void 0,this._rejectionListenerHandle=void 0,delete this._exceptionListenerHandle,delete this._rejectionListenerHandle)},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1},t.INSTANCE=null,t.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME="uncaughtExceptionMonitor",t.UNCAUGHT_EXCEPTION_HANDLER_NAME="uncaughtException",t.UNHANDLED_REJECTION_HANDLER_NAME="unhandledRejection",t._RETHROW_EXIT_MESSAGE="Application Insights Rethrow Exception Handler",t._FALLBACK_ERROR_MESSAGE="A promise was rejected without providing an error. Application Insights generated this error stack for you.",t._canUseUncaughtExceptionMonitor=!1,t})();mGe.exports=uer});var zU=m((BNn,_Ge)=>{"use strict";var GU=require("os"),Du=ni(),der=(function(){function t(e,r,n){r===void 0&&(r=6e4),n===void 0&&(n=!1),this._lastIntervalRequestExecutionTime=0,this._lastIntervalDependencyExecutionTime=0,t.INSTANCE||(t.INSTANCE=this),this._lastRequests={totalRequestCount:0,totalFailedRequestCount:0,time:0},this._lastDependencies={totalDependencyCount:0,totalFailedDependencyCount:0,time:0},this._lastExceptions={totalExceptionCount:0,time:0},this._isInitialized=!1,this._client=e,this._collectionInterval=r,this._enableLiveMetricsCounters=n}return t.prototype.enable=function(e,r){var n=this;this._isEnabled=e,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),e?this._handle||(this._lastCpus=GU.cpus(),this._lastRequests={totalRequestCount:t._totalRequestCount,totalFailedRequestCount:t._totalFailedRequestCount,time:+new Date},this._lastDependencies={totalDependencyCount:t._totalDependencyCount,totalFailedDependencyCount:t._totalFailedDependencyCount,time:+new Date},this._lastExceptions={totalExceptionCount:t._totalExceptionCount,time:+new Date},typeof process.cpuUsage=="function"&&(this._lastAppCpuUsage=process.cpuUsage()),this._lastHrtime=process.hrtime(),this._collectionInterval=r||this._collectionInterval,this._handle=setInterval(function(){return n.trackPerformance()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},t.countRequest=function(e,r){var n;if(t.isEnabled()){if(typeof e=="string")n=+new Date("1970-01-01T"+e+"Z");else if(typeof e=="number")n=e;else return;t._intervalRequestExecutionTime+=n,r===!1&&t._totalFailedRequestCount++,t._totalRequestCount++}},t.countException=function(){t._totalExceptionCount++},t.countDependency=function(e,r){var n;if(t.isEnabled()){if(typeof e=="string")n=+new Date("1970-01-01T"+e+"Z");else if(typeof e=="number")n=e;else return;t._intervalDependencyExecutionTime+=n,r===!1&&t._totalFailedDependencyCount++,t._totalDependencyCount++}},t.prototype.isInitialized=function(){return this._isInitialized},t.isEnabled=function(){return t.INSTANCE&&t.INSTANCE._isEnabled},t.prototype.trackPerformance=function(){this._trackCpu(),this._trackMemory(),this._trackNetwork(),this._trackDependencyRate(),this._trackExceptionRate()},t.prototype._trackCpu=function(){var e=GU.cpus();if(e&&e.length&&this._lastCpus&&e.length===this._lastCpus.length){for(var r=0,n=0,o=0,s=0,a=0,c=0;e&&c<e.length;c++){var l=e[c],u=this._lastCpus[c],d="% cpu("+c+") ",f=l.model,p=l.speed,h=l.times,_=u.times,g=h.user-_.user||0;r+=g;var v=h.sys-_.sys||0;n+=v;var E=h.nice-_.nice||0;o+=E;var y=h.idle-_.idle||0;s+=y;var S=h.irq-_.irq||0;a+=S}var b=void 0;if(typeof process.cpuUsage=="function"){var w=process.cpuUsage(),P=process.hrtime(),A=w.user-this._lastAppCpuUsage.user+(w.system-this._lastAppCpuUsage.system)||0;if(typeof this._lastHrtime<"u"&&this._lastHrtime.length===2){var O=(P[0]-this._lastHrtime[0])*1e6+(P[1]-this._lastHrtime[1])/1e3||0;b=100*A/(O*e.length)}this._lastAppCpuUsage=w,this._lastHrtime=P}var L=r+n+o+s+a||1;this._client.trackMetric({name:Du.PerformanceCounter.PROCESSOR_TIME,value:(L-s)/L*100}),this._client.trackMetric({name:Du.PerformanceCounter.PROCESS_TIME,value:b||r/L*100})}this._lastCpus=e},t.prototype._trackMemory=function(){var e=GU.freemem(),r=process.memoryUsage().rss,n=GU.totalmem()-e;this._client.trackMetric({name:Du.PerformanceCounter.PRIVATE_BYTES,value:r}),this._client.trackMetric({name:Du.PerformanceCounter.AVAILABLE_BYTES,value:e}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:Du.QuickPulseCounter.COMMITTED_BYTES,value:n})},t.prototype._trackNetwork=function(){var e=this._lastRequests,r={totalRequestCount:t._totalRequestCount,totalFailedRequestCount:t._totalFailedRequestCount,time:+new Date},n=r.totalRequestCount-e.totalRequestCount||0,o=r.totalFailedRequestCount-e.totalFailedRequestCount||0,s=r.time-e.time,a=s/1e3,c=(t._intervalRequestExecutionTime-this._lastIntervalRequestExecutionTime)/n||0;if(this._lastIntervalRequestExecutionTime=t._intervalRequestExecutionTime,s>0){var l=n/a,u=o/a;this._client.trackMetric({name:Du.PerformanceCounter.REQUEST_RATE,value:l}),(!this._enableLiveMetricsCounters||n>0)&&this._client.trackMetric({name:Du.PerformanceCounter.REQUEST_DURATION,value:c}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:Du.QuickPulseCounter.REQUEST_FAILURE_RATE,value:u})}this._lastRequests=r},t.prototype._trackDependencyRate=function(){if(this._enableLiveMetricsCounters){var e=this._lastDependencies,r={totalDependencyCount:t._totalDependencyCount,totalFailedDependencyCount:t._totalFailedDependencyCount,time:+new Date},n=r.totalDependencyCount-e.totalDependencyCount||0,o=r.totalFailedDependencyCount-e.totalFailedDependencyCount||0,s=r.time-e.time,a=s/1e3,c=(t._intervalDependencyExecutionTime-this._lastIntervalDependencyExecutionTime)/n||0;if(this._lastIntervalDependencyExecutionTime=t._intervalDependencyExecutionTime,s>0){var l=n/a,u=o/a;this._client.trackMetric({name:Du.QuickPulseCounter.DEPENDENCY_RATE,value:l}),this._client.trackMetric({name:Du.QuickPulseCounter.DEPENDENCY_FAILURE_RATE,value:u}),(!this._enableLiveMetricsCounters||n>0)&&this._client.trackMetric({name:Du.QuickPulseCounter.DEPENDENCY_DURATION,value:c})}this._lastDependencies=r}},t.prototype._trackExceptionRate=function(){if(this._enableLiveMetricsCounters){var e=this._lastExceptions,r={totalExceptionCount:t._totalExceptionCount,time:+new Date},n=r.totalExceptionCount-e.totalExceptionCount||0,o=r.time-e.time,s=o/1e3;if(o>0){var a=n/s;this._client.trackMetric({name:Du.QuickPulseCounter.EXCEPTION_RATE,value:a})}this._lastExceptions=r}},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1},t._totalRequestCount=0,t._totalFailedRequestCount=0,t._totalDependencyCount=0,t._totalFailedDependencyCount=0,t._totalExceptionCount=0,t._intervalDependencyExecutionTime=0,t._intervalRequestExecutionTime=0,t})();_Ge.exports=der});var vGe=m(WU=>{"use strict";Object.defineProperty(WU,"__esModule",{value:!0});WU.AggregatedMetricCounter=void 0;var fer=(function(){function t(e){this.dimensions=e,this.totalCount=0,this.lastTotalCount=0,this.intervalExecutionTime=0,this.lastTime=+new Date,this.lastIntervalExecutionTime=0}return t})();WU.AggregatedMetricCounter=fer});var yGe=m(KU=>{"use strict";Object.defineProperty(KU,"__esModule",{value:!0});KU.PreaggregatedMetricPropertyNames=void 0;KU.PreaggregatedMetricPropertyNames={cloudRoleInstance:"cloud/roleInstance",cloudRoleName:"cloud/roleName",operationSynthetic:"operation/synthetic",requestSuccess:"Request.Success",requestResultCode:"request/resultCode",dependencyType:"Dependency.Type",dependencyTarget:"dependency/target",dependencySuccess:"Dependency.Success",dependencyResultCode:"dependency/resultCode",traceSeverityLevel:"trace/severityLevel"}});var _oe=m((goe,EGe)=>{"use strict";var QU=goe&&goe.__assign||function(){return QU=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},QU.apply(this,arguments)},per=require("url"),YU=ni(),her=vGe(),mer=yGe(),ger=(function(){function t(e,r){r===void 0&&(r=6e4),t.INSTANCE||(t.INSTANCE=this),this._isInitialized=!1,t._dependencyCountersCollection=[],t._requestCountersCollection=[],t._exceptionCountersCollection=[],t._traceCountersCollection=[],this._client=e,this._collectionInterval=r}return t.prototype.enable=function(e,r){var n=this;this._isEnabled=e,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),e?this._handle||(this._collectionInterval=r||this._collectionInterval,this._handle=setInterval(function(){return n.trackPreAggregatedMetrics()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},t.countException=function(e){if(t.isEnabled()){var r=t._getAggregatedCounter(e,this._exceptionCountersCollection);r.totalCount++}},t.countTrace=function(e){if(t.isEnabled()){var r=t._getAggregatedCounter(e,this._traceCountersCollection);r.totalCount++}},t.countRequest=function(e,r){if(t.isEnabled()){var n,o=t._getAggregatedCounter(r,this._requestCountersCollection);if(typeof e=="string")n=+new Date("1970-01-01T"+e+"Z");else if(typeof e=="number")n=e;else return;o.intervalExecutionTime+=n,o.totalCount++}},t.countDependency=function(e,r){if(t.isEnabled()){r.dependencyTarget=t._getNetricDependencyTarget(r.dependencyTarget);var n=t._getAggregatedCounter(r,this._dependencyCountersCollection),o;if(typeof e=="string")o=+new Date("1970-01-01T"+e+"Z");else if(typeof e=="number")o=e;else return;n.intervalExecutionTime+=o,n.totalCount++}},t._getNetricDependencyTarget=function(e){var r=e;try{var n=new per.URL(e);r=n.host}catch{}return r},t.prototype.isInitialized=function(){return this._isInitialized},t.isEnabled=function(){return t.INSTANCE&&t.INSTANCE._isEnabled},t.prototype.trackPreAggregatedMetrics=function(){this._trackRequestMetrics(),this._trackDependencyMetrics(),this._trackExceptionMetrics(),this._trackTraceMetrics()},t._getAggregatedCounter=function(e,r){for(var n=!1,o=0;o<r.length;o++){if(e===r[o].dimensions)return r[o];if(Object.keys(e).length===Object.keys(r[o].dimensions).length){for(var s in e)if(e[s]!=r[o].dimensions[s]){n=!0;break}if(!n)return r[o];n=!1}}var a=new her.AggregatedMetricCounter(e);return r.push(a),a},t.prototype._trackRequestMetrics=function(){for(var e=0;e<t._requestCountersCollection.length;e++){var r=t._requestCountersCollection[e];r.time=+new Date;var n=r.totalCount-r.lastTotalCount||0,o=r.time-r.lastTime,s=(r.intervalExecutionTime-r.lastIntervalExecutionTime)/n||0;r.lastIntervalExecutionTime=r.intervalExecutionTime,o>0&&n>0&&this._trackPreAggregatedMetric({name:"Server response time",dimensions:r.dimensions,value:s,count:n,aggregationInterval:o,metricType:YU.MetricId.REQUESTS_DURATION}),r.lastTotalCount=r.totalCount,r.lastTime=r.time}},t.prototype._trackDependencyMetrics=function(){for(var e=0;e<t._dependencyCountersCollection.length;e++){var r=t._dependencyCountersCollection[e];r.time=+new Date;var n=r.totalCount-r.lastTotalCount||0,o=r.time-r.lastTime,s=(r.intervalExecutionTime-r.lastIntervalExecutionTime)/n||0;r.lastIntervalExecutionTime=r.intervalExecutionTime,o>0&&n>0&&this._trackPreAggregatedMetric({name:"Dependency duration",dimensions:r.dimensions,value:s,count:n,aggregationInterval:o,metricType:YU.MetricId.DEPENDENCIES_DURATION}),r.lastTotalCount=r.totalCount,r.lastTime=r.time}},t.prototype._trackExceptionMetrics=function(){for(var e=0;e<t._exceptionCountersCollection.length;e++){var r=t._exceptionCountersCollection[e];r.time=+new Date;var n=r.totalCount-r.lastTotalCount||0,o=r.time-r.lastTime;o>0&&n>0&&this._trackPreAggregatedMetric({name:"Exceptions",dimensions:r.dimensions,value:n,count:n,aggregationInterval:o,metricType:YU.MetricId.EXCEPTIONS_COUNT}),r.lastTotalCount=r.totalCount,r.lastTime=r.time}},t.prototype._trackTraceMetrics=function(){for(var e=0;e<t._traceCountersCollection.length;e++){var r=t._traceCountersCollection[e];r.time=+new Date;var n=r.totalCount-r.lastTotalCount||0,o=r.time-r.lastTime;o>0&&n>0&&this._trackPreAggregatedMetric({name:"Traces",dimensions:r.dimensions,value:n,count:n,aggregationInterval:o,metricType:YU.MetricId.TRACES_COUNT}),r.lastTotalCount=r.totalCount,r.lastTime=r.time}},t.prototype._trackPreAggregatedMetric=function(e){var r={};for(var n in e.dimensions)r[mer.PreaggregatedMetricPropertyNames[n]]=e.dimensions[n];r=QU(QU({},r),{"_MS.MetricId":e.metricType,"_MS.AggregationIntervalMs":String(e.aggregationInterval),"_MS.IsAutocollected":"True"});var o={name:e.name,value:e.value,count:e.count,properties:r,kind:"Aggregation"};this._client.trackMetric(o)},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1},t})();EGe.exports=ger});var voe=m(os=>{"use strict";Object.defineProperty(os,"__esModule",{value:!0});os.getResourceProvider=os.getOsPrefix=os.isFunctionApp=os.isWebApp=os.isLinux=os.isWindows=void 0;var _er=function(){return process.platform==="win32"};os.isWindows=_er;var ver=function(){return process.platform==="linux"};os.isLinux=ver;var yer=function(){return!!(process.env.WEBSITE_SITE_NAME&&!process.env.FUNCTIONS_WORKER_RUNTIME)};os.isWebApp=yer;var Eer=function(){return!!process.env.FUNCTIONS_WORKER_RUNTIME};os.isFunctionApp=Eer;var Ter=function(){return(0,os.isWindows)()?"w":(0,os.isLinux)()?"l":"u"};os.getOsPrefix=Ter;var Ser=function(){return(0,os.isWebApp)()?"a":(0,os.isFunctionApp)()?"f":"u"};os.getResourceProvider=Ser});var jx=m((VE,bGe)=>{"use strict";var ber=VE&&VE.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),Cer=VE&&VE.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),SGe=VE&&VE.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&ber(e,t,r);return Cer(e,t),e},Qh=require("os"),Aer=require("fs"),xer=require("path"),wer=sa(),Ier=ni(),Per=qn(),TGe=SGe(voe()),Rer=SGe(ni()),Oer=(function(){function t(e){this.keys=new wer.ContextTagKeys,this.tags={},this._loadApplicationContext(e),this._loadDeviceContext(),this._loadInternalContext()}return t.prototype._loadApplicationContext=function(e){try{if(e=e||xer.resolve(__dirname,"../../../../package.json"),!t.appVersion[e]){t.appVersion[e]="unknown";var r=JSON.parse(Aer.readFileSync(e,"utf8"));r&&typeof r.version=="string"&&(t.appVersion[e]=r.version)}this.tags[this.keys.applicationVersion]=t.appVersion[e]}catch(n){Per.info("Failed to read app version: ",n)}},t.prototype._loadDeviceContext=function(){var e=Qh&&Qh.hostname(),r=t.DefaultRoleName;process.env.WEBSITE_SITE_NAME&&(r=process.env.WEBSITE_SITE_NAME),process.env.WEBSITE_INSTANCE_ID&&(e=process.env.WEBSITE_INSTANCE_ID),this.tags[this.keys.deviceId]="",this.tags[this.keys.cloudRoleInstance]=e,this.tags[this.keys.deviceOSVersion]=Qh&&Qh.type()+" "+Qh.release(),this.tags[this.keys.cloudRole]=r,this.tags["ai.device.osArchitecture"]=Qh&&Qh.arch(),this.tags["ai.device.osPlatform"]=Qh&&Qh.platform()},t.prototype._loadInternalContext=function(){t.sdkPrefix||(this.tags[this.keys.internalSdkVersion]="".concat(TGe.getResourceProvider()).concat(TGe.getOsPrefix()).concat(Rer.AttachTypePrefix.MANUAL,"_node:").concat(t.sdkVersion))},t.DefaultRoleName="Web",t.appVersion={},t.sdkVersion=Ier.APPLICATION_INSIGHTS_SDK_VERSION,t.sdkPrefix=null,t})();bGe.exports=Oer});var xGe=m((GNn,AGe)=>{"use strict";var Mer=require("crypto"),CGe=require("os"),Ner=ni(),Ler=jx(),ker=(function(){function t(e){this._collectionInterval=9e5,t.INSTANCE||(t.INSTANCE=this),this._isInitialized=!1,this._client=e}return t.prototype.enable=function(e){var r=this;this._isEnabled=e,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),e?this._handle||(this._handle=setInterval(function(){return r.trackHeartBeat(r._client.config,function(){})},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=null)},t.prototype.isInitialized=function(){return this._isInitialized},t.isEnabled=function(){return t.INSTANCE&&t.INSTANCE._isEnabled},t.prototype.trackHeartBeat=function(e,r){var n={},o=Ler.sdkVersion;n.sdkVersion=o,n.osType=CGe.type(),n.osVersion=CGe.release(),this._uniqueProcessId||(this._uniqueProcessId=Mer.randomBytes(16).toString("hex")),n.processSessionId=this._uniqueProcessId,process.env.WEBSITE_SITE_NAME&&(n.appSrv_SiteName=process.env.WEBSITE_SITE_NAME),process.env.WEBSITE_HOME_STAMPNAME&&(n.appSrv_wsStamp=process.env.WEBSITE_HOME_STAMPNAME),process.env.WEBSITE_HOSTNAME&&(n.appSrv_wsHost=process.env.WEBSITE_HOSTNAME),process.env.WEBSITE_OWNER_NAME&&(n.appSrv_wsOwner=process.env.WEBSITE_OWNER_NAME),process.env.WEBSITE_RESOURCE_GROUP&&(n.appSrv_ResourceGroup=process.env.WEBSITE_RESOURCE_GROUP),process.env.WEBSITE_SLOT_NAME&&(n.appSrv_SlotName=process.env.WEBSITE_SLOT_NAME),this._client.trackMetric({name:Ner.HeartBeatMetricName,value:0,properties:n}),r()},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1},t})();AGe.exports=ker});var wGe=m(rr=>{"use strict";Object.defineProperty(rr,"__esModule",{value:!0});rr.isContentTypeHeaderHtml=rr.insertSnippetByIndex=rr.getContentEncodingFromHeaders=rr.isSupportedContentEncoding=rr.findBufferEncodingType=rr.isBufferType=rr.getBrotliDecompressSync=rr.getBrotliDecompressAsync=rr.getBrotliCompressSync=rr.getBrotliCompressAsync=rr.inflateAsync=rr.deflateAsync=rr.gunzipAsync=rr.gzipAsync=rr.isBrotliSupperted=rr.bufferEncodingTypes=rr.contentEncodingMethod=void 0;var ZU=require("zlib"),Bx=require("util"),wM;(function(t){t.GZIP="gzip",t.DEFLATE="deflate",t.BR="br"})(wM||(rr.contentEncodingMethod=wM={}));rr.bufferEncodingTypes=["utf8","utf16le","latin1","base64","hex","ascii","binary","ucs2"];var Der=function(){var t=process.versions.node.split(".")[0];return parseInt(t)>=10};rr.isBrotliSupperted=Der;rr.gzipAsync=(0,Bx.promisify)(ZU.gzip);rr.gunzipAsync=(0,Bx.promisify)(ZU.gunzip);rr.deflateAsync=(0,Bx.promisify)(ZU.deflate);rr.inflateAsync=(0,Bx.promisify)(ZU.inflate);var Uer=function(t){var e=(0,rr.isBrotliSupperted)();return e&&typeof t.brotliCompress=="function"?(0,Bx.promisify)(t.brotliCompress):null};rr.getBrotliCompressAsync=Uer;var qer=function(t){var e=(0,rr.isBrotliSupperted)();return e&&typeof t.brotliCompressSync=="function"?t.brotliCompressSync:null};rr.getBrotliCompressSync=qer;var Fer=function(t){var e=(0,rr.isBrotliSupperted)();return e&&typeof t.brotliDecompress=="function"?(0,Bx.promisify)(t.brotliDecompress):null};rr.getBrotliDecompressAsync=Fer;var jer=function(t){var e=(0,rr.isBrotliSupperted)();return e&&typeof t.brotliDecompressSync=="function"?t.brotliDecompressSync:null};rr.getBrotliDecompressSync=jer;var Ber=function(t,e){var r=e||"utf8",n=!1;if(Buffer.isEncoding(r)){var o=Buffer.from(t.toString(r),r);n=o.toJSON().data.toString()===t.toJSON().data.toString()}return n};rr.isBufferType=Ber;var $er=function(t){var e=null;for(var r in rr.bufferEncodingTypes){var n=rr.bufferEncodingTypes[r];if(Buffer.isEncoding(n)&&(0,rr.isBufferType)(t,n)){e=n;break}}return e};rr.findBufferEncodingType=$er;var Ver=function(t){var e=null;switch(t){case"gzip":e=wM.GZIP;break;case"br":e=wM.BR;break;case"deflate":e=wM.DEFLATE;break;default:}return e};rr.isSupportedContentEncoding=Ver;var Her=function(t){var e=[],r=t.getHeader("Content-Encoding");if(!r)return null;if(typeof r=="string"){var n=(0,rr.isSupportedContentEncoding)(r);n&&e.push(n)}return e};rr.getContentEncodingFromHeaders=Her;var Ger=function(t,e,r){if(t<0)return null;var n=null,o=e.substring(0,t),s=e.substring(t);return n=o+'<script type="text/javascript">'+r+"</script>"+s,n};rr.insertSnippetByIndex=Ger;var zer=function(t){var e=!1,r=t.getHeader("Content-Type");return r&&(typeof r=="string"?e=r.indexOf("html")>=0:e=r.toString().indexOf("html")>=0),e};rr.isContentTypeHeaderHtml=zer});var yoe=m((WNn,PGe)=>{"use strict";var IGe=ni(),Wer=(function(){function t(){}return t.parse=function(e){if(!e)return{};var r=e.split(t._FIELDS_SEPARATOR),n=r.reduce(function(s,a){var c=a.split(t._FIELD_KEY_VALUE_SEPARATOR);if(c.length===2){var l=c[0].toLowerCase(),u=c[1];s[l]=u}return s},{});if(Object.keys(n).length>0){if(n.endpointsuffix){var o=n.location?n.location+".":"";n.ingestionendpoint=n.ingestionendpoint||"https://"+o+"dc."+n.endpointsuffix,n.liveendpoint=n.liveendpoint||"https://"+o+"live."+n.endpointsuffix}n.ingestionendpoint=n.ingestionendpoint||IGe.DEFAULT_BREEZE_ENDPOINT,n.liveendpoint=n.liveendpoint||IGe.DEFAULT_LIVEMETRICS_ENDPOINT}return n},t.isIkeyValid=function(e){if(!e||e=="")return!1;var r="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",n=new RegExp(r);return n.test(e)},t._FIELDS_SEPARATOR=";",t._FIELD_KEY_VALUE_SEPARATOR="=",t})();PGe.exports=Wer});var RGe={};Xs(RGe,{webSnippet:()=>Ker});var Ker,OGe=q(()=>{Ker=`!function(T,l,y){var S=T.location,k="script",D="instrumentationKey",C="ingestionendpoint",I="disableExceptionTracking",E="ai.device.",b="toLowerCase",w="crossOrigin",N="POST",e="appInsightsSDK",t=y.name||"appInsights";(y.name||T[e])&&(T[e]=t);var n=T[t]||function(d){var g=!1,f=!1,m={initialize:!0,queue:[],sv:"5",version:2,config:d};function v(e,t){var n={},a="Browser";return n[E+"id"]=a[b](),n[E+"type"]=a,n["ai.operation.name"]=S&&S.pathname||"_unknown_",n["ai.internal.sdkVersion"]="javascript:snippet_"+(m.sv||m.version),{time:function(){var e=new Date;function t(e){var t=""+e;return 1===t.length&&(t="0"+t),t}return e.getUTCFullYear()+"-"+t(1+e.getUTCMonth())+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+((e.getUTCMilliseconds()/1e3).toFixed(3)+"").slice(2,5)+"Z"}(),iKey:e,name:"Microsoft.ApplicationInsights."+e.replace(/-/g,"")+"."+t,sampleRate:100,tags:n,data:{baseData:{ver:2}}}}var h=d.url||y.src;if(h){function a(e){var t,n,a,i,r,o,s,c,u,p,l;g=!0,m.queue=[],f||(f=!0,t=h,s=function(){var e={},t=d.connectionString;if(t)for(var n=t.split(";"),a=0;a<n.length;a++){var i=n[a].split("=");2===i.length&&(e[i[0][b]()]=i[1])}if(!e[C]){var r=e.endpointsuffix,o=r?e.location:null;e[C]="https://"+(o?o+".":"")+"dc."+(r||"services.visualstudio.com")}return e}(),c=s[D]||d[D]||"",u=s[C],p=u?u+"/v2/track":d.endpointUrl,(l=[]).push((n="SDK LOAD Failure: Failed to load Application Insights SDK script (See stack for details)",a=t,i=p,(o=(r=v(c,"Exception")).data).baseType="ExceptionData",o.baseData.exceptions=[{typeName:"SDKLoadFailed",message:n.replace(/\\./g,"-"),hasFullStack:!1,stack:n+"\\nSnippet failed to load ["+a+"] -- Telemetry is disabled\\nHelp Link: https://go.microsoft.com/fwlink/?linkid=2128109\\nHost: "+(S&&S.pathname||"_unknown_")+"\\nEndpoint: "+i,parsedStack:[]}],r)),l.push(function(e,t,n,a){var i=v(c,"Message"),r=i.data;r.baseType="MessageData";var o=r.baseData;return o.message='AI (Internal): 99 message:"'+("SDK LOAD Failure: Failed to load Application Insights SDK script (See stack for details) ("+n+")").replace(/\\"/g,"")+'"',o.properties={endpoint:a},i}(0,0,t,p)),function(e,t){if(JSON){var n=T.fetch;if(n&&!y.useXhr)n(t,{method:N,body:JSON.stringify(e),mode:"cors"});else if(XMLHttpRequest){var a=new XMLHttpRequest;a.open(N,t),a.setRequestHeader("Content-type","application/json"),a.send(JSON.stringify(e))}}}(l,p))}function i(e,t){f||setTimeout(function(){!t&&m.core||a()},500)}var e=function(){var n=l.createElement(k);n.src=h;var e=y[w];return!e&&""!==e||"undefined"==n[w]||(n[w]=e),n.onload=i,n.onerror=a,n.onreadystatechange=function(e,t){"loaded"!==n.readyState&&"complete"!==n.readyState||i(0,t)},n}();y.ld<0?l.getElementsByTagName("head")[0].appendChild(e):setTimeout(function(){l.getElementsByTagName(k)[0].parentNode.appendChild(e)},y.ld||0)}try{m.cookie=l.cookie}catch(p){}function t(e){for(;e.length;)!function(t){m[t]=function(){var e=arguments;g||m.queue.push(function(){m[t].apply(m,e)})}}(e.pop())}var n="track",r="TrackPage",o="TrackEvent";t([n+"Event",n+"PageView",n+"Exception",n+"Trace",n+"DependencyData",n+"Metric",n+"PageViewPerformance","start"+r,"stop"+r,"start"+o,"stop"+o,"addTelemetryInitializer","setAuthenticatedUserContext","clearAuthenticatedUserContext","flush"]),m.SeverityLevel={Verbose:0,Information:1,Warning:2,Error:3,Critical:4};var s=(d.extensionConfig||{}).ApplicationInsightsAnalytics||{};if(!0!==d[I]&&!0!==s[I]){var c="onerror";t(["_"+c]);var u=T[c];T[c]=function(e,t,n,a,i){var r=u&&u(e,t,n,a,i);return!0!==r&&m["_"+c]({message:e,url:t,lineNumber:n,columnNumber:a,error:i}),r},d.autoExceptionInstrumented=!0}return m}(y.cfg);function a(){y.onInit&&y.onInit(n)}(T[t]=n).queue&&0===n.queue.length?(n.queue.push(a),n.trackPageView({})):a()}(window,document,{\r
src: "https://js.monitor.azure.com/scripts/b/ai.2.min.js", // The SDK URL Source\r
// name: "appInsights", // Global SDK Instance name defaults to "appInsights" when not supplied\r
// ld: 0, // Defines the load delay (in ms) before attempting to load the sdk. -1 = block page load and add to head. (default) = 0ms load after timeout,\r
// useXhr: 1, // Use XHR instead of fetch to report failures (if available),\r
// crossOrigin: "anonymous", // When supplied this will add the provided value as the cross origin attribute on the script tag\r
// onInit: null, // Once the application insights instance has loaded and initialized this callback function will be called with 1 argument -- the sdk instance (DO NOT ADD anything to the sdk.queue -- As they won't get called)\r
cfg: { // Application Insights Configuration\r
    instrumentationKey: "INSTRUMENTATION_KEY"\r
}});`});var UGe=m((KNn,DGe)=>{"use strict";var MGe=require("http"),NGe=require("https"),$x=require("zlib"),H0=qn(),Uu=wGe(),LGe=voe(),IM=ni(),kGe=yoe(),Yer=(OGe(),cn(RGe)),Qer=(function(){function t(e){var r;if(this._isIkeyValid=!0,t.INSTANCE)throw new Error("Web snippet injection should be configured from the applicationInsights object");t.INSTANCE=this,t._aiUrl=IM.WEB_INSTRUMENTATION_DEFAULT_SOURCE,t._aiDeprecatedUrl=IM.WEB_INSTRUMENTATION_DEPRECATED_SOURCE;var n=this._getWebSnippetIkey((r=e.config)===null||r===void 0?void 0:r.webInstrumentationConnectionString);this._webInstrumentationIkey=n||e.config.instrumentationKey,this._clientWebInstrumentationConfig=e.config.webInstrumentationConfig,this._clientWebInstrumentationSrc=e.config.webInstrumentationSrc,this._statsbeat=e?.getStatsbeat()}return t.prototype.enable=function(e,r){this._isEnabled=e,this._webInstrumentationIkey=this._getWebSnippetIkey(r)||this._webInstrumentationIkey,t._snippet=this._getWebInstrumentationReplacedStr(),this._isEnabled&&!this._isInitialized&&this._isIkeyValid?(this._statsbeat&&this._statsbeat.addFeature(IM.StatsbeatFeature.BROWSER_SDK_LOADER),this._initialize()):this._isEnabled||this._statsbeat&&this._statsbeat.removeFeature(IM.StatsbeatFeature.BROWSER_SDK_LOADER)},t.prototype.isInitialized=function(){return this._isInitialized},t.prototype._getWebSnippetIkey=function(e){var r=null;try{var n=kGe.parse(e),o=n.instrumentationkey||"";kGe.isIkeyValid(o)?(this._isIkeyValid=!0,r=o):(this._isIkeyValid=!1,H0.info("Invalid web Instrumentation connection string, web Instrumentation is not enabled."))}catch(s){H0.info("get web snippet ikey error: "+s)}return r},t.prototype._getWebInstrumentationReplacedStr=function(){var e=this._getClientWebInstrumentationConfigStr(this._clientWebInstrumentationConfig),r=LGe.getOsPrefix(),n=LGe.getResourceProvider(),o="".concat(this._webInstrumentationIkey,`",\r
`).concat(e,` disableIkeyDeprecationMessage: true,\r
 sdkExtension: "`).concat(n).concat(r,"d_n_"),s=Yer.webSnippet.replace("INSTRUMENTATION_KEY",o);return this._clientWebInstrumentationSrc?s.replace("".concat(IM.WEB_INSTRUMENTATION_DEFAULT_SOURCE,".2.min.js"),this._clientWebInstrumentationSrc):s},t.prototype._getClientWebInstrumentationConfigStr=function(e){var r="";try{e!=null&&e.length>0&&e.forEach(function(n){var o=n.name;if(o!==void 0){var s=n.value,a="";switch(typeof s){case"function":break;case"object":break;case"string":a=" ".concat(o,': "').concat(s,`",\r
`),r+=a;break;default:a=" ".concat(o,": ").concat(s,`,\r
`),r+=a;break}}})}catch{this._isEnabled=!1,H0.info("Parse client web instrumentation error. Web Instrumentation is disabled")}return r},t.prototype._initialize=function(){this._isInitialized=!0;var e=MGe.createServer,r=NGe.createServer,n=this._isEnabled;MGe.createServer=function(o){var s=o;return s&&(o=function(a,c){var l=c.write,u=a.method=="GET";c.write=function(p,h,_){try{if(n&&u){var g=Uu.getContentEncodingFromHeaders(c),v=void 0;if(typeof h=="string"&&(v=h),g==null)t.INSTANCE.ValidateInjection(c,p)&&(arguments[0]=t.INSTANCE.InjectWebSnippet(c,p,void 0,v));else if(g.length){var E=g[0];arguments[0]=t.INSTANCE.InjectWebSnippet(c,p,E)}}}catch(y){H0.warn("Inject snippet error: "+y)}return l.apply(c,arguments)};var d=c.end;return c.end=function(p,h,_){if(n&&u)try{if(n&&u){var g=Uu.getContentEncodingFromHeaders(c),v=void 0;if(typeof h=="string"&&(v=h),g==null)t.INSTANCE.ValidateInjection(c,p)&&(arguments[0]=t.INSTANCE.InjectWebSnippet(c,p,void 0,v));else if(g.length){var E=g[0];arguments[0]=t.INSTANCE.InjectWebSnippet(c,p,E)}}}catch(y){H0.warn("Inject snipet error: "+y)}return d.apply(c,arguments)},s(a,c)}),e(o)},NGe.createServer=function(o,s){var a=s;if(a)return s=function(c,l){var u=c.method=="GET",d=l.write,f=l.end;return l.write=function(h,_,g){try{if(n&&u){var v=Uu.getContentEncodingFromHeaders(l),E=void 0;if(typeof _=="string"&&(E=_),v==null)t.INSTANCE.ValidateInjection(l,h)&&(arguments[0]=this.InjectWebSnippet(l,h,void 0,E));else if(v.length){var y=v[0];arguments[0]=t.INSTANCE.InjectWebSnippet(l,h,y)}}}catch(S){H0.warn("Inject snippet error: "+S)}return d.apply(l,arguments)},l.end=function(h,_,g){try{if(n&&u){var v=Uu.getContentEncodingFromHeaders(l),E=void 0;if(typeof _=="string"&&(E=_),v==null)t.INSTANCE.ValidateInjection(l,h)&&(arguments[0]=t.INSTANCE.InjectWebSnippet(l,h,void 0,E));else if(v.length){var y=v[0];arguments[0]=t.INSTANCE.InjectWebSnippet(l,h,y)}}}catch(S){H0.warn("Inject snippet error: "+S)}return f.apply(l,arguments)},a(c,l)},r(o,s)}},t.prototype.ValidateInjection=function(e,r){try{if(!e||!r||e.statusCode!=200)return!1;var n=Uu.isContentTypeHeaderHtml(e);if(!n)return!1;var o=r.slice().toString();if(o.indexOf("<head>")>=0&&o.indexOf("</head>")>=0&&o.indexOf(t._aiUrl)<0&&o.indexOf(t._aiDeprecatedUrl)<0)return!0}catch(s){H0.info("validate injections error: "+s)}return!1},t.prototype.InjectWebSnippet=function(e,r,n,o){try{var s=!!n;if(s)e.removeHeader("Content-Length"),r=this._getInjectedCompressBuffer(e,r,n),e.setHeader("Content-Length",r.length);else{var a=r.toString(),c=a.indexOf("</head>");if(c<0)return r;var l=Uu.insertSnippetByIndex(c,a,t._snippet);if(typeof r=="string")e.removeHeader("Content-Length"),r=l,e.setHeader("Content-Length",Buffer.byteLength(r));else if(Buffer.isBuffer(r)){var u=o||"utf8",d=Uu.isBufferType(r,u);if(d){e.removeHeader("Content-Length");var f=Buffer.from(l).toString(u);r=Buffer.from(f,u),e.setHeader("Content-Length",r.length)}}}}catch(p){H0.warn("Failed to inject web snippet and change content-lenght headers. Exception:"+p)}return r},t.prototype._getInjectedCompressBuffer=function(e,r,n){try{switch(n){case Uu.contentEncodingMethod.GZIP:var o=$x.gunzipSync(r);if(this.ValidateInjection(e,o)){var s=this.InjectWebSnippet(e,o);r=$x.gzipSync(s)}break;case Uu.contentEncodingMethod.DEFLATE:var a=$x.inflateSync(r);if(this.ValidateInjection(e,a)){var c=this.InjectWebSnippet(e,a);r=$x.deflateSync(c)}break;case Uu.contentEncodingMethod.BR:var l=Uu.getBrotliDecompressSync($x),u=Uu.getBrotliCompressSync($x);if(l&&u){var d=l(r);if(this.ValidateInjection(e,d)){var f=this.InjectWebSnippet(e,d);r=u(f)}break}}}catch(p){H0.info("get web injection compress buffer error: "+p)}return r},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1},t})();DGe.exports=Qer});var FGe=m((Toe,qGe)=>{"use strict";var Zer=Toe&&Toe.__extends||(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(n[s]=o[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),qu=require("url"),Eoe=sa(),Jer=Ss(),Xer=vx(),etr=Jne(),ttr=OE(),rtr=(function(t){Zer(e,t);function e(r,n){var o=t.call(this)||this;return n&&n.method&&r&&(o.method=n.method,o.url=e._getUrlFromRequestOptions(r,n),o.startTime=+new Date),o}return e.prototype.onError=function(r){this._setStatus(void 0,r)},e.prototype.onResponse=function(r){this._setStatus(r.statusCode,void 0),this.correlationId=Jer.getCorrelationContextTarget(r,Xer.requestContextTargetKey)},e.prototype.getDependencyTelemetry=function(r,n){var o=this.method.toUpperCase(),s=Eoe.RemoteDependencyDataConstants.TYPE_HTTP,a="";try{var c=new qu.URL(this.url);c.search=void 0,c.hash=void 0,o+=" "+c.pathname,a=c.hostname,c.port&&(a+=":"+c.port)}catch{}this.correlationId?(s=Eoe.RemoteDependencyDataConstants.TYPE_AI,this.correlationId!==ttr.correlationIdPrefix&&(a+=" | "+this.correlationId)):s=Eoe.RemoteDependencyDataConstants.TYPE_HTTP;var l={id:n,name:o,data:this.url,duration:this.duration,success:this._isSuccess(),resultCode:this.statusCode?this.statusCode.toString():null,properties:this.properties||{},dependencyTypeName:s,target:a};if(r&&r.time?l.time=r.time:this.startTime&&(l.time=new Date(this.startTime)),r){for(var u in r)l[u]||(l[u]=r[u]);if(r.properties)for(var u in r.properties)l.properties[u]=r.properties[u]}return l},e._getUrlFromRequestOptions=function(r,n){if(typeof r=="string")if(r.indexOf("http://")===0||r.indexOf("https://")===0)try{r=new qu.URL(r)}catch{}else try{var o=new qu.URL("http://"+r);o.port==="443"?r=new qu.URL("https://"+r):r=new qu.URL("http://"+r)}catch{}else{if(r&&typeof qu.URL=="function"&&r instanceof qu.URL)return qu.format(r);var s=r;r={},s&&Object.keys(s).forEach(function(l){r[l]=s[l]})}if(r.path&&r.host)try{var a=new qu.URL(r.path,"http://"+r.host+r.path);r.pathname=a.pathname,r.search=a.search}catch{}if(r.path&&r.hostname&&!r.host)try{var a=new qu.URL(r.path,"http://"+r.hostname+r.path);r.pathname=a.pathname,r.search=a.search}catch{}if(r.host&&r.port)try{var c=new qu.URL("http://".concat(r.host));!c.port&&r.port&&(r.hostname=r.host,delete r.host)}catch{}return r.protocol=r.protocol||n.agent&&n.agent.protocol||n.protocol||void 0,r.hostname=r.hostname||"localhost",qu.format(r)},e})(etr);qGe.exports=rtr});var jGe=m(Vx=>{"use strict";var JU=Vx&&Vx.__assign||function(){return JU=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},JU.apply(this,arguments)};Object.defineProperty(Vx,"__esModule",{value:!0});Vx.parseEventHubSpan=void 0;var Soe=(Ht(),cn(Fh)),ntr=(wc(),cn(e3e)),itr=(L7(),cn(cne)),PM=ni(),otr=function(t){var e=0,r=0,n=(0,ntr.hrTimeToMilliseconds)(t.startTime);return t.links.forEach(function(o){var s=o.attributes,a=s?.[PM.ENQUEUED_TIME];a&&(e+=1,r+=n-(parseFloat(a.toString())||0))}),Math.max(r/(e||1),0)},str=function(t,e){var r,n=t.attributes[PM.AzNamespace],o=(t.attributes[itr.SemanticAttributes.NET_PEER_NAME]||t.attributes["peer.address"]||"unknown").replace(/\/$/g,""),s=t.attributes[PM.MessageBusDestination]||"unknown";switch(t.kind){case Soe.SpanKind.CLIENT:e.dependencyTypeName=n,e.target="".concat(o,"/").concat(s);break;case Soe.SpanKind.PRODUCER:e.dependencyTypeName="".concat(PM.DependencyTypeName.QueueMessage," | ").concat(n),e.target="".concat(o,"/").concat(s);break;case Soe.SpanKind.CONSUMER:e.source="".concat(o,"/").concat(s),e.measurements=JU(JU({},e.measurements),(r={},r[PM.TIME_SINCE_ENQUEUED]=otr(t),r));break;default:}};Vx.parseEventHubSpan=str});var VGe=m(Jh=>{"use strict";var atr=Jh&&Jh.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),ctr=Jh&&Jh.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),ltr=Jh&&Jh.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&atr(e,t,r);return ctr(e,t),e};Object.defineProperty(Jh,"__esModule",{value:!0});Jh.spanToTelemetryContract=gtr;var BGe=require("url"),Wd=(Ht(),cn(Fh)),yr=(L7(),cn(cne)),Zh=ltr(ni()),utr=jGe(),dtr=Ss();function ftr(t){for(var e={},r=0,n=Object.keys(t.attributes);r<n.length;r++){var o=n[r];o.startsWith("http.")||o.startsWith("rpc.")||o.startsWith("db.")||o.startsWith("peer.")||o.startsWith("net.")||(e[o]=t.attributes[o])}var s=t.links.map(function(a){return{operation_Id:a.context.traceId,id:a.context.spanId}});return s.length>0&&(e["_MS.links"]=dtr.stringify(s)),e}function ptr(t){return t===yr.DbSystemValues.DB2||t===yr.DbSystemValues.DERBY||t===yr.DbSystemValues.MARIADB||t===yr.DbSystemValues.MSSQL||t===yr.DbSystemValues.ORACLE||t===yr.DbSystemValues.SQLITE||t===yr.DbSystemValues.OTHER_SQL||t===yr.DbSystemValues.HSQLDB||t===yr.DbSystemValues.H2}function $Ge(t){var e=t.attributes[yr.SemanticAttributes.HTTP_METHOD];if(e){var r=t.attributes[yr.SemanticAttributes.HTTP_URL];if(r)return String(r);var n=t.attributes[yr.SemanticAttributes.HTTP_SCHEME],o=t.attributes[yr.SemanticAttributes.HTTP_TARGET];if(n&&o){var s=t.attributes[yr.SemanticAttributes.HTTP_HOST];if(s)return"".concat(n,"://").concat(s).concat(o);var a=t.attributes[yr.SemanticAttributes.NET_PEER_PORT];if(a){var c=t.attributes[yr.SemanticAttributes.NET_PEER_NAME];if(c)return"".concat(n,"://").concat(c,":").concat(a).concat(o);var l=t.attributes[yr.SemanticAttributes.NET_PEER_IP];if(l)return"".concat(n,"://").concat(l,":").concat(a).concat(o)}}}return""}function boe(t){var e=t.attributes[yr.SemanticAttributes.PEER_SERVICE],r=t.attributes[yr.SemanticAttributes.HTTP_HOST],n=t.attributes[yr.SemanticAttributes.HTTP_URL],o=t.attributes[yr.SemanticAttributes.NET_PEER_NAME],s=t.attributes[yr.SemanticAttributes.NET_PEER_IP];return e?String(e):r?String(r):n?String(n):o?String(o):s?String(s):""}function htr(t){var e={name:t.name,success:t.status.code!=Wd.SpanStatusCode.ERROR,resultCode:"0",duration:0,data:"",dependencyTypeName:""};t.kind===Wd.SpanKind.PRODUCER&&(e.dependencyTypeName=Zh.DependencyTypeName.QueueMessage),t.kind===Wd.SpanKind.INTERNAL&&t.parentSpanId&&(e.dependencyTypeName=Zh.DependencyTypeName.InProc);var r=t.attributes[yr.SemanticAttributes.HTTP_METHOD],n=t.attributes[yr.SemanticAttributes.DB_SYSTEM],o=t.attributes[yr.SemanticAttributes.RPC_SYSTEM];if(r){e.dependencyTypeName=Zh.DependencyTypeName.Http;var s=t.attributes[yr.SemanticAttributes.HTTP_URL];if(s){var a="";try{var c=new BGe.URL(String(s));a=c.pathname}catch{}e.name="".concat(r," ").concat(a)}e.data=$Ge(t);var l=t.attributes[yr.SemanticAttributes.HTTP_STATUS_CODE];l&&(e.resultCode=String(l));var u=boe(t);if(u){try{var d=new RegExp(/(https?)(:\/\/.*)(:\d+)(\S*)/),f=d.exec(u);if(f!=null){var p=f[1],h=f[3];(p=="https"&&h==":443"||p=="http"&&h==":80")&&(u=f[1]+f[2]+f[4])}}catch{}e.target="".concat(u)}}else if(n){String(n)===yr.DbSystemValues.MYSQL?e.dependencyTypeName="mysql":String(n)===yr.DbSystemValues.POSTGRESQL?e.dependencyTypeName="postgresql":String(n)===yr.DbSystemValues.MONGODB?e.dependencyTypeName="mongodb":String(n)===yr.DbSystemValues.REDIS?e.dependencyTypeName="redis":ptr(String(n))?e.dependencyTypeName="SQL":e.dependencyTypeName=String(n);var _=t.attributes[yr.SemanticAttributes.DB_STATEMENT],g=t.attributes[yr.SemanticAttributes.DB_OPERATION];_?e.data=String(_):g&&(e.data=String(g));var u=boe(t),v=t.attributes[yr.SemanticAttributes.DB_NAME];u?e.target=v?"".concat(u,"|").concat(v):"".concat(u):e.target=v?"".concat(v):"".concat(n)}else if(o){e.dependencyTypeName=Zh.DependencyTypeName.Grpc;var E=t.attributes[yr.SemanticAttributes.RPC_GRPC_STATUS_CODE];E&&(e.resultCode=String(E));var u=boe(t);u?e.target="".concat(u):o&&(e.target=String(o))}return e}function mtr(t){var e={name:t.name,success:t.status.code!=Wd.SpanStatusCode.ERROR,resultCode:"0",duration:0,url:"",source:void 0},r=t.attributes[yr.SemanticAttributes.HTTP_METHOD],n=t.attributes[yr.SemanticAttributes.RPC_GRPC_STATUS_CODE];if(r){if(t.kind==Wd.SpanKind.SERVER){var o=t.attributes[yr.SemanticAttributes.HTTP_ROUTE],s=t.attributes[yr.SemanticAttributes.HTTP_URL];if(o)e.name="".concat(r," ").concat(o);else if(s)try{var a=new BGe.URL(String(s));e.name="".concat(r," ").concat(a.pathname)}catch{}}e.url=$Ge(t);var c=t.attributes[yr.SemanticAttributes.HTTP_STATUS_CODE];c&&(e.resultCode=String(c))}else n&&(e.resultCode=String(n));return e}function gtr(t){var e;switch(t.kind){case Wd.SpanKind.CLIENT:case Wd.SpanKind.PRODUCER:case Wd.SpanKind.INTERNAL:e=htr(t);break;case Wd.SpanKind.SERVER:case Wd.SpanKind.CONSUMER:e=mtr(t);break}var r=t.spanContext?t.spanContext():t.context(),n="".concat(r.spanId),o=Math.round(t.duration[0]*1e3+t.duration[1]/1e6);return e.id=n,e.duration=o,e.properties=ftr(t),t.attributes[Zh.AzNamespace]&&(t.kind===Wd.SpanKind.INTERNAL&&(e.dependencyTypeName="".concat(Zh.DependencyTypeName.InProc," | ").concat(t.attributes[Zh.AzNamespace])),t.attributes[Zh.AzNamespace]===Zh.MicrosoftEventHub&&(0,utr.parseEventHubSpan)(t,e)),e}});var GGe=m(Z_=>{"use strict";var Hx=Z_&&Z_.__assign||function(){return Hx=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},Hx.apply(this,arguments)};Object.defineProperty(Z_,"__esModule",{value:!0});Z_.AsyncScopeManager=Z_.OpenTelemetryScopeManagerWrapper=void 0;var Q_=z_(),_tr=require("events"),HGe=(function(){function t(){}return t.prototype.active=function(){var e=this,r=Q_.CorrelationContextManager.getCurrentContext();return Hx(Hx({},r),{getValue:function(n){return e._activeSymbol?n===e._activeSymbol?r:!1:(e._activeSymbol=n,r)},setValue:function(){}})},t.prototype.with=function(e,r){var n=e.parentSpanId,o=e.name,s=t._spanToContext(e,n,o);return Q_.CorrelationContextManager.runWithContext(s,r)()},t.prototype.bind=function(e){return typeof e=="function"?Q_.CorrelationContextManager.wrapCallback(e):(e instanceof _tr.EventEmitter&&Q_.CorrelationContextManager.wrapEmitter(e),e)},t.prototype.enable=function(){return Q_.CorrelationContextManager.enable(),this},t.prototype.disable=function(){return Q_.CorrelationContextManager.disable(),this},t._spanToContext=function(e,r,n){var o=e.spanContext?e.spanContext():e.context(),s=Hx(Hx({},e.spanContext()),{traceFlags:e.spanContext().traceFlags}),a=r?"|".concat(o.traceId,".").concat(r,"."):o.traceId,c=Q_.CorrelationContextManager.getCurrentContext();c&&(s.traceId=c.operation.id,r||(a=c.operation.parentId));var l=Q_.CorrelationContextManager.spanToContextObject(s,a,n);return l},t})();Z_.OpenTelemetryScopeManagerWrapper=HGe;Z_.AsyncScopeManager=new HGe});var zGe=m(jl=>{"use strict";var vtr=jl&&jl.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),ytr=jl&&jl.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),Etr=jl&&jl.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&vtr(e,t,r);return ytr(e,t),e};Object.defineProperty(jl,"__esModule",{value:!0});jl.subscriber=void 0;jl.enable=Atr;var RM=(Ht(),cn(Fh)),Ttr=ni(),Coe=$i(),Str=Etr(VGe()),btr=GGe(),HE=[],Ctr=function(t){try{var e=t.data,r=Str.spanToTelemetryContract(e);btr.AsyncScopeManager.with(e,function(){HE.forEach(function(n){e.kind===RM.SpanKind.SERVER||e.kind===RM.SpanKind.CONSUMER?n.trackRequest(r):(e.kind===RM.SpanKind.CLIENT||e.kind===RM.SpanKind.INTERNAL||e.kind===RM.SpanKind.PRODUCER)&&n.trackDependency(r)})})}catch{}};jl.subscriber=Ctr;function Atr(t,e){if(t){var r=HE.find(function(n){return n==e});if(r)return;HE.length===0&&Coe.channel.subscribe("azure-coretracing",jl.subscriber,Coe.trueFilter,function(n,o){var s=e.getStatsbeat();s&&s.addInstrumentation(Ttr.StatsbeatInstrumentation.AZURE_CORE_TRACING)}),HE.push(e)}else HE=HE.filter(function(n){return n!=e}),HE.length===0&&Coe.channel.unsubscribe("azure-coretracing",jl.subscriber)}});var WGe=m(zE=>{"use strict";Object.defineProperty(zE,"__esModule",{value:!0});zE.subscriber=void 0;zE.enable=Itr;var xtr=ni(),Aoe=$i(),GE=[],wtr=function(t){t.data.event.commandName!=="ismaster"&&GE.forEach(function(e){var r=t.data.startedData&&t.data.startedData.databaseName||"Unknown database";e.trackDependency({target:r,data:t.data.event.commandName,name:t.data.event.commandName,duration:t.data.event.duration,success:t.data.succeeded,resultCode:t.data.succeeded?"0":"1",time:t.data.startedData.time,dependencyTypeName:"mongodb"})})};zE.subscriber=wtr;function Itr(t,e){if(t){var r=GE.find(function(n){return n==e});if(r)return;GE.length===0&&Aoe.channel.subscribe("mongodb",zE.subscriber,Aoe.trueFilter,function(n,o){var s=e.getStatsbeat();s&&s.addInstrumentation(xtr.StatsbeatInstrumentation.MONGODB)}),GE.push(e)}else GE=GE.filter(function(n){return n!=e}),GE.length===0&&Aoe.channel.unsubscribe("mongodb",zE.subscriber)}});var KGe=m(KE=>{"use strict";Object.defineProperty(KE,"__esModule",{value:!0});KE.subscriber=void 0;KE.enable=Otr;var Ptr=ni(),xoe=$i(),WE=[],Rtr=function(t){WE.forEach(function(e){var r=t.data.query||{},n=r.sql||"Unknown query",o=!t.data.err,s=r._connection||{},a=s.config||{},c=a.socketPath?a.socketPath:"".concat(a.host||"localhost",":").concat(a.port);e.trackDependency({target:c,data:n,name:n,duration:t.data.duration,success:o,resultCode:o?"0":"1",time:t.data.time,dependencyTypeName:"mysql"})})};KE.subscriber=Rtr;function Otr(t,e){if(t){var r=WE.find(function(n){return n==e});if(r)return;WE.length===0&&xoe.channel.subscribe("mysql",KE.subscriber,xoe.trueFilter,function(n,o){var s=e.getStatsbeat();s&&s.addInstrumentation(Ptr.StatsbeatInstrumentation.MYSQL)}),WE.push(e)}else WE=WE.filter(function(n){return n!=e}),WE.length===0&&xoe.channel.unsubscribe("mysql",KE.subscriber)}});var YGe=m(QE=>{"use strict";Object.defineProperty(QE,"__esModule",{value:!0});QE.subscriber=void 0;QE.enable=Ltr;var Mtr=ni(),woe=$i(),YE=[],Ntr=function(t){YE.forEach(function(e){t.data.commandObj.command!=="info"&&e.trackDependency({target:t.data.address,name:t.data.commandObj.command,data:t.data.commandObj.command,duration:t.data.duration,success:!t.data.err,resultCode:t.data.err?"1":"0",time:t.data.time,dependencyTypeName:"redis"})})};QE.subscriber=Ntr;function Ltr(t,e){if(t){var r=YE.find(function(n){return n==e});if(r)return;YE.length===0&&woe.channel.subscribe("redis",QE.subscriber,woe.trueFilter,function(n,o){var s=e.getStatsbeat();s&&s.addInstrumentation(Mtr.StatsbeatInstrumentation.REDIS)}),YE.push(e)}else YE=YE.filter(function(n){return n!=e}),YE.length===0&&woe.channel.unsubscribe("redis",QE.subscriber)}});var QGe=m(JE=>{"use strict";Object.defineProperty(JE,"__esModule",{value:!0});JE.subscriber=void 0;JE.enable=Utr;var ktr=ni(),Ioe=$i(),ZE=[],Dtr=function(t){ZE.forEach(function(e){var r=t.data.query,n=r.preparable&&r.preparable.text||r.plan||r.text||"unknown query",o=!t.data.error,s="".concat(t.data.database.host,":").concat(t.data.database.port);e.trackDependency({target:s,data:n,name:n,duration:t.data.duration,success:o,resultCode:o?"0":"1",time:t.data.time,dependencyTypeName:"postgres"})})};JE.subscriber=Dtr;function Utr(t,e){if(t){var r=ZE.find(function(n){return n==e});if(r)return;ZE.length===0&&Ioe.channel.subscribe("postgres",JE.subscriber,Ioe.trueFilter,function(n,o){var s=e.getStatsbeat();s&&s.addInstrumentation(ktr.StatsbeatInstrumentation.POSTGRES)}),ZE.push(e)}else ZE=ZE.filter(function(n){return n!=e}),ZE.length===0&&Ioe.channel.unsubscribe("postgres",JE.subscriber)}});var Wx=m((Xh,ZGe)=>{"use strict";var qtr=Xh&&Xh.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),Ftr=Xh&&Xh.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),jtr=Xh&&Xh.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&qtr(e,t,r);return Ftr(e,t),e},XU=Xh&&Xh.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,o=e.length,s;n<o;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))},Gx=require("http"),zx=require("https"),eq=qn(),Poe=Ss(),J_=vx(),Btr=FGe(),OM=z_(),tq=oU(),$tr=jtr(iU()),MM=OE(),Vtr=(function(){function t(e){if(t.INSTANCE)throw new Error("Client request tracking should be configured from the applicationInsights object");t.INSTANCE=this,this._client=e}return t.prototype.enable=function(e){this._isEnabled=e,this._isEnabled&&!this._isInitialized&&this._initialize(),$tr.IsInitialized&&(zGe().enable(e,this._client),WGe().enable(e,this._client),KGe().enable(e,this._client),YGe().enable(e,this._client),QGe().enable(e,this._client))},t.prototype.isInitialized=function(){return this._isInitialized},t.prototype._initialize=function(){var e=this;this._isInitialized=!0;var r=Gx.request,n=zx.request,o=function(s,a){try{var c=!a[t.disableCollectionRequestOption]&&!s[t.alreadyAutoCollectedFlag],l=null;if(a.headers&&(l=a.headers["User-Agent"]||a.headers["user-agent"],l&&l.toString().indexOf("azsdk-js")!==-1&&(c=!1)),s&&a&&c&&(OM.CorrelationContextManager.wrapEmitter(s),e._isEnabled))if(s[t.alreadyAutoCollectedFlag]=!0,OM.CorrelationContextManager.getCurrentContext())t.trackRequest(e._client,{options:a,request:s});else{var u=null;if(MM.w3cEnabled){var d=new tq;u=d.traceId}else{var f=MM.generateRequestId(null);u=MM.getRootId(f)}var p=OM.CorrelationContextManager.generateContextObject(u);OM.CorrelationContextManager.runWithContext(p,function(){t.trackRequest(e._client,{options:a,request:s})})}}catch(h){eq.warn("Failed to generate dependency telemetry.",Poe.dumpObj(h))}};Gx.request=function(s){for(var a=[],c=1;c<arguments.length;c++)a[c-1]=arguments[c];var l=r.call.apply(r,XU([Gx,s],a,!1));return o(l,s),l},zx.request=function(s){for(var a=[],c=1;c<arguments.length;c++)a[c-1]=arguments[c];var l=n.call.apply(n,XU([zx,s],a,!1));return o(l,s),l},Gx.get=function(s){for(var a,c=[],l=1;l<arguments.length;l++)c[l-1]=arguments[l];var u=(a=Gx.request).call.apply(a,XU([Gx,s],c,!1));return u.end(),u},zx.get=function(s){for(var a,c=[],l=1;l<arguments.length;l++)c[l-1]=arguments[l];var u=(a=zx.request).call.apply(a,XU([zx,s],c,!1));return u.end(),u}},t.trackRequest=function(e,r){if(!r.options||!r.request||!e){eq.info("AutoCollectHttpDependencies.trackRequest was called with invalid parameters: ",!r.options,!r.request,!e);return}var n=new Btr(r.options,r.request),o=OM.CorrelationContextManager.getCurrentContext(),s,a;if(o&&o.operation&&o.operation.traceparent&&tq.isValidTraceId(o.operation.traceparent.traceId))o.operation.traceparent.updateSpanId(),s=o.operation.traceparent.getBackCompatRequestId();else if(MM.w3cEnabled){var c=new tq;a=c.toString(),s=c.getBackCompatRequestId()}else s=o&&o.operation&&o.operation.parentId+t.requestNumber+++".";if(Poe.canIncludeCorrelationHeader(e,n.getUrl())&&r.request.getHeader&&r.request.setHeader&&e.config&&e.config.correlationId){var l=r.request.getHeader(J_.requestContextHeader);try{Poe.safeIncludeCorrelationHeader(e,r.request,l)}catch(f){eq.warn("Request-Context header could not be set. Correlation of requests may be lost",f)}if(o&&o.operation)try{if(r.request.setHeader(J_.requestIdHeader,s),e.config.ignoreLegacyHeaders||(r.request.setHeader(J_.parentIdHeader,o.operation.id),r.request.setHeader(J_.rootIdHeader,s)),a||o.operation.traceparent)r.request.setHeader(J_.traceparentHeader,a||o.operation.traceparent.toString());else if(MM.w3cEnabled){var c=new tq().toString();r.request.setHeader(J_.traceparentHeader,c)}if(o.operation.tracestate){var u=o.operation.tracestate.toString();u&&r.request.setHeader(J_.traceStateHeader,u)}var d=o.customProperties.serializeToHeader();d&&r.request.setHeader(J_.correlationContextHeader,d)}catch(f){eq.warn("Correlation headers could not be set. Correlation of requests may be lost.",f)}}r.request.on&&(r.request.on("response",function(f){if(!r.isProcessed){r.isProcessed=!0,n.onResponse(f);var p=n.getDependencyTelemetry(r,s);p.contextObjects=p.contextObjects||{},p.contextObjects["http.RequestOptions"]=r.options,p.contextObjects["http.ClientRequest"]=r.request,p.contextObjects["http.ClientResponse"]=f,e.trackDependency(p)}}),r.request.on("error",function(f){if(!r.isProcessed){r.isProcessed=!0,n.onError(f);var p=n.getDependencyTelemetry(r,s);p.contextObjects=p.contextObjects||{},p.contextObjects["http.RequestOptions"]=r.options,p.contextObjects["http.ClientRequest"]=r.request,p.contextObjects.Error=f,e.trackDependency(p)}}),r.request.on("abort",function(){if(!r.isProcessed){r.isProcessed=!0,n.onError(new Error("The request has been aborted and the network socket has closed."));var f=n.getDependencyTelemetry(r,s);f.contextObjects=f.contextObjects||{},f.contextObjects["http.RequestOptions"]=r.options,f.contextObjects["http.ClientRequest"]=r.request,e.trackDependency(f)}}))},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1},t.disableCollectionRequestOption="disableAppInsightsAutoCollection",t.requestNumber=1,t.alreadyAutoCollectedFlag="_appInsightsAutoCollected",t})();ZGe.exports=Vtr});var Ooe=m((n4n,rze)=>{"use strict";var JGe=require("http"),XGe=require("https"),eze=qn(),tze=Ss(),Htr=vx(),Roe=rie(),em=z_(),Gtr=zU(),ztr=(function(){function t(e){if(t.INSTANCE)throw new Error("Server request tracking should be configured from the applicationInsights object");t.INSTANCE=this,this._client=e}return t.prototype.enable=function(e){this._isEnabled=e,(this._isAutoCorrelating||this._isEnabled||Gtr.isEnabled())&&!this._isInitialized&&(this.useAutoCorrelation(this._isAutoCorrelating),this._initialize())},t.prototype.useAutoCorrelation=function(e,r){e&&!this._isAutoCorrelating?em.CorrelationContextManager.enable(r):!e&&this._isAutoCorrelating&&em.CorrelationContextManager.disable(),this._isAutoCorrelating=e},t.prototype.isInitialized=function(){return this._isInitialized},t.prototype.isAutoCorrelating=function(){return this._isAutoCorrelating},t.prototype._generateCorrelationContext=function(e){if(this._isAutoCorrelating)return em.CorrelationContextManager.generateContextObject(e.getOperationId(this._client.context.tags),e.getRequestId(),e.getOperationName(this._client.context.tags),e.getCorrelationContextHeader(),e.getTraceparent(),e.getTracestate())},t.prototype._registerRequest=function(e,r,n){var o=this,s=new Roe(e),a=this._generateCorrelationContext(s);em.CorrelationContextManager.runWithContext(a,function(){o._isEnabled&&(e[t.alreadyAutoCollectedFlag]=!0,t.trackRequest(o._client,{request:e,response:r},s)),typeof n=="function"&&n(e,r)})},t.prototype._initialize=function(){if(this._isInitialized=!0,!t.HANDLER_READY){t.HANDLER_READY=!0;var e=function(s){if(s){if(typeof s!="function")throw new Error("onRequest handler must be a function");return function(a,c){em.CorrelationContextManager.wrapEmitter(a),em.CorrelationContextManager.wrapEmitter(c);var l=a&&!a[t.alreadyAutoCollectedFlag];a&&l&&t.INSTANCE?t.INSTANCE._registerRequest(a,c,s):s(a,c)}}},r=function(s){var a=s.addListener.bind(s);s.addListener=function(c,l){switch(c){case"request":case"checkContinue":return a(c,e(l));default:return a(c,l)}},s.on=s.addListener},n=JGe.createServer;JGe.createServer=function(s,a){if(a&&typeof a=="function"){var c=n(s,e(a));return r(c),c}else{var c=n(e(s));return r(c),c}};var o=XGe.createServer;XGe.createServer=function(s,a){var c=o(s,e(a));return r(c),c}}},t.trackRequestSync=function(e,r){if(!r.request||!r.response||!e){eze.info("AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: ",!r.request,!r.response,!e);return}r.isProcessed=!1,t.addResponseCorrelationIdHeader(e,r.response);var n=em.CorrelationContextManager.getCurrentContext(),o=new Roe(r.request,n&&n.operation.parentId);n&&(n.operation.id=o.getOperationId(e.context.tags)||n.operation.id,n.operation.name=o.getOperationName(e.context.tags)||n.operation.name,n.operation.parentId=o.getRequestId()||n.operation.parentId,n.customProperties.addHeaderData(o.getCorrelationContextHeader())),t.endRequest(e,o,r,r.duration,r.error)},t.trackRequest=function(e,r,n){if(!r.request||!r.response||!e){eze.info("AutoCollectHttpRequests.trackRequest was called with invalid parameters: ",!r.request,!r.response,!e);return}r.isProcessed=!1;var o=em.CorrelationContextManager.getCurrentContext(),s=n||new Roe(r.request,o&&o.operation.parentId);tze.canIncludeCorrelationHeader(e,s.getUrl())&&t.addResponseCorrelationIdHeader(e,r.response),o&&!n&&(o.operation.id=s.getOperationId(e.context.tags)||o.operation.id,o.operation.name=s.getOperationName(e.context.tags)||o.operation.name,o.operation.parentId=s.getOperationParentId(e.context.tags)||o.operation.parentId,o.customProperties.addHeaderData(s.getCorrelationContextHeader())),r.response.once&&r.response.once("finish",function(){t.endRequest(e,s,r,null,null)}),r.request.on&&r.request.on("error",function(a){t.endRequest(e,s,r,null,a)}),r.request.on&&r.request.on("aborted",function(){var a="The request has been aborted and the network socket has closed.";t.endRequest(e,s,r,null,a)})},t.addResponseCorrelationIdHeader=function(e,r){if(e.config&&e.config.correlationId&&r.getHeader&&r.setHeader&&!r.headersSent){var n=r.getHeader(Htr.requestContextHeader);tze.safeIncludeCorrelationHeader(e,r,n)}},t.endRequest=function(e,r,n,o,s){if(!n.isProcessed){n.isProcessed=!0,s?r.onError(s,o):r.onResponse(n.response,o);var a=r.getRequestTelemetry(n);if(a.tagOverrides=r.getRequestTags(e.context.tags),n.tagOverrides)for(var c in n.tagOverrides)a.tagOverrides[c]=n.tagOverrides[c];var l=r.getLegacyRootId();l&&(a.properties.ai_legacyRootId=l),a.contextObjects=a.contextObjects||{},a.contextObjects["http.ServerRequest"]=n.request,a.contextObjects["http.ServerResponse"]=n.response,e.trackRequest(a)}},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1,em.CorrelationContextManager.disable(),this._isAutoCorrelating=!1},t.HANDLER_READY=!1,t.alreadyAutoCollectedFlag="_appInsightsAutoCollected",t})();rze.exports=ztr});var oze=m((Noe,ize)=>{"use strict";var Fu=Noe&&Noe.__assign||function(){return Fu=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},Fu.apply(this,arguments)},Moe=require("os"),XE=sa(),nze=ni(),Wtr=Ss(),Ktr=qn(),Ytr=Wtr.w3cTraceId(),Qtr=(function(){function t(){}return t.createQuickPulseEnvelope=function(e,r,n,o){var s=Moe&&typeof Moe.hostname=="function"&&Moe.hostname()||"Unknown",a=o.tags&&o.keys&&o.keys.cloudRoleInstance&&o.tags[o.keys.cloudRoleInstance]||s,c=o.tags&&o.keys&&o.keys.cloudRole&&o.tags[o.keys.cloudRole]||null,l={Documents:r.length>0?r:null,InstrumentationKey:n.instrumentationKey||"",Metrics:e.length>0?e:null,InvariantVersion:1,Timestamp:"/Date(".concat(Date.now(),")/"),Version:o.tags[o.keys.internalSdkVersion],StreamId:Ytr,MachineName:s,Instance:a,RoleName:c};return l},t.createQuickPulseMetric=function(e){var r;return r={Name:e.name,Value:e.value,Weight:e.count||1},r},t.telemetryEnvelopeToQuickPulseDocument=function(e){switch(e.data.baseType){case XE.TelemetryTypeString.Event:return t.createQuickPulseEventDocument(e);case XE.TelemetryTypeString.Exception:return t.createQuickPulseExceptionDocument(e);case XE.TelemetryTypeString.Trace:return t.createQuickPulseTraceDocument(e);case XE.TelemetryTypeString.Dependency:return t.createQuickPulseDependencyDocument(e);case XE.TelemetryTypeString.Request:return t.createQuickPulseRequestDocument(e)}return null},t.createQuickPulseEventDocument=function(e){var r=t.createQuickPulseDocument(e),n=e.data.baseData.name,o=Fu(Fu({},r),{Name:n});return o},t.createQuickPulseTraceDocument=function(e){var r=t.createQuickPulseDocument(e),n=e.data.baseData.severityLevel||0,o=Fu(Fu({},r),{Message:e.data.baseData.message,SeverityLevel:XE.SeverityLevel[n]});return o},t.createQuickPulseExceptionDocument=function(e){var r=t.createQuickPulseDocument(e),n=e.data.baseData.exceptions,o="",s="",a="";n&&n.length>0&&(n[0].parsedStack&&n[0].parsedStack.length>0?n[0].parsedStack.forEach(function(l){o+=l.assembly+`
`}):n[0].stack&&n[0].stack.length>0&&(o=n[0].stack),s=n[0].message,a=n[0].typeName);var c=Fu(Fu({},r),{Exception:o,ExceptionMessage:s,ExceptionType:a});return c},t.createQuickPulseRequestDocument=function(e){var r=t.createQuickPulseDocument(e),n=e.data.baseData,o=Fu(Fu({},r),{Name:n.name,Success:n.success,Duration:n.duration,ResponseCode:n.responseCode,OperationName:n.name});return o},t.createQuickPulseDependencyDocument=function(e){var r=t.createQuickPulseDocument(e),n=e.data.baseData,o=Fu(Fu({},r),{Name:n.name,Target:n.target,Success:n.success,Duration:n.duration,ResultCode:n.resultCode,CommandName:n.data,OperationName:r.OperationId,DependencyTypeName:n.type});return o},t.createQuickPulseDocument=function(e){var r,n,o,s;e.data.baseType?(n=nze.TelemetryTypeStringToQuickPulseType[e.data.baseType],r=nze.TelemetryTypeStringToQuickPulseDocumentType[e.data.baseType]):Ktr.warn("Document type invalid; not sending live metric document",e.data.baseType),o=e.tags[t.keys.operationId],s=t.aggregateProperties(e);var a={DocumentType:r,__type:n,OperationId:o,Version:"1.0",Properties:s};return a},t.aggregateProperties=function(e){var r=[],n=e.data.baseData.measurements||{};for(var o in n)if(n.hasOwnProperty(o)){var s=n[o],a={key:o,value:s};r.push(a)}var c=e.data.baseData.properties||{};for(var o in c)if(c.hasOwnProperty(o)){var s=c[o],a={key:o,value:s};r.push(a)}return r},t.keys=new XE.ContextTagKeys,t})();ize.exports=Qtr});var aze=m((i4n,sze)=>{"use strict";var Ztr=function(){return(Date.now()+621355968e5)*1e4};sze.exports={getTransmissionTime:Ztr}});var dze=m((NM,uze)=>{"use strict";var cze=NM&&NM.__awaiter||function(t,e,r,n){function o(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function c(d){try{u(n.next(d))}catch(f){a(f)}}function l(d){try{u(n.throw(d))}catch(f){a(f)}}function u(d){d.done?s(d.value):o(d.value).then(c,l)}u((n=n.apply(t,e||[])).next())})},lze=NM&&NM.__generator||function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,o,s,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(u){return function(d){return l([u,d])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(r=0)),r;)try{if(n=1,o&&(s=u[0]&2?o.return:u[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,u[1])).done)return s;switch(o=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,o=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],o=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Jtr=require("https"),Xtr=Wx(),Loe=qn(),trr=aze(),koe=Ss(),rrr=require("url"),ju={method:"POST",time:"x-ms-qps-transmission-time",pollingIntervalHint:"x-ms-qps-service-polling-interval-hint",endpointRedirect:"x-ms-qps-service-endpoint-redirect-v2",instanceName:"x-ms-qps-instance-name",streamId:"x-ms-qps-stream-id",machineName:"x-ms-qps-machine-name",roleName:"x-ms-qps-role-name",streamid:"x-ms-qps-stream-id",invariantVersion:"x-ms-qps-invariant-version",subscribed:"x-ms-qps-subscribed"},nrr=(function(){function t(e,r){this._config=e,this._consecutiveErrors=0,this._getAuthorizationHandler=r}return t.prototype.ping=function(e,r,n){var o=[{name:ju.streamId,value:e.StreamId},{name:ju.machineName,value:e.MachineName},{name:ju.roleName,value:e.RoleName},{name:ju.instanceName,value:e.Instance},{name:ju.invariantVersion,value:e.InvariantVersion.toString()}];this._submitData(e,r,n,"ping",o)},t.prototype.post=function(e,r,n){return cze(this,void 0,void 0,function(){return lze(this,function(o){switch(o.label){case 0:return[4,this._submitData([e],r,n,"post")];case 1:return o.sent(),[2]}})})},t.prototype._submitData=function(e,r,n,o,s){return cze(this,void 0,void 0,function(){var a,c,l,u,d,f,p,h,_=this;return lze(this,function(g){switch(g.label){case 0:if(a=koe.stringify(e),c=(p={},p[Xtr.disableCollectionRequestOption]=!0,p.host=r&&r.length>0?r:this._config.quickPulseHost,p.method=ju.method,p.path="/QuickPulseService.svc/".concat(o,"?ikey=").concat(this._config.instrumentationKey),p.headers=(h={Expect:"100-continue"},h[ju.time]=trr.getTransmissionTime(),h["Content-Type"]="application/json",h["Content-Length"]=Buffer.byteLength(a),h),p),s&&s.length>0&&s.forEach(function(v){return c.headers[v.name]=v.value}),o!=="post")return[3,4];if(l=this._getAuthorizationHandler?this._getAuthorizationHandler(this._config):null,!l)return[3,4];g.label=1;case 1:return g.trys.push([1,3,,4]),[4,l.addAuthorizationHeader(c)];case 2:return g.sent(),[3,4];case 3:return u=g.sent(),d="Failed to get AAD bearer token for the Application. Error:",Loe.info(t.TAG,d,u),[2];case 4:return this._config.httpsAgent?c.agent=this._config.httpsAgent:c.agent=koe.tlsRestrictedAgent,f=Jtr.request(c,function(v){if(v.statusCode==200){var E=v.headers[ju.subscribed]==="true",y=null;try{y=v.headers[ju.endpointRedirect]?new rrr.URL(v.headers[ju.endpointRedirect].toString()).host:null}catch(b){_._onError("Failed to parse redirect header from QuickPulse: "+koe.dumpObj(b))}var S=v.headers[ju.pollingIntervalHint]?parseInt(v.headers[ju.pollingIntervalHint].toString()):null;_._consecutiveErrors=0,n(E,v,y,S)}else _._onError("StatusCode:"+v.statusCode+" StatusMessage:"+v.statusMessage),n()}),f.on("error",function(v){_._onError(v),n()}),f.write(a),f.end(),[2]}})})},t.prototype._onError=function(e){this._consecutiveErrors++;var r="Transient error connecting to the Live Metrics endpoint. This packet will not appear in your Live Metrics Stream. Error:";this._consecutiveErrors%t.MAX_QPS_FAILURES_BEFORE_WARN===0?(r="Live Metrics endpoint could not be reached ".concat(this._consecutiveErrors," consecutive times. Most recent error:"),Loe.warn(t.TAG,r,e)):Loe.info(t.TAG,r,e)},t.TAG="QuickPulseSender",t.MAX_QPS_FAILURES_BEFORE_WARN=25,t})();uze.exports=nrr});var _ze=m((LM,gze)=>{"use strict";var fze=LM&&LM.__awaiter||function(t,e,r,n){function o(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function c(d){try{u(n.next(d))}catch(f){a(f)}}function l(d){try{u(n.throw(d))}catch(f){a(f)}}function u(d){d.done?s(d.value):o(d.value).then(c,l)}u((n=n.apply(t,e||[])).next())})},pze=LM&&LM.__generator||function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,o,s,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(u){return function(d){return l([u,d])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(r=0)),r;)try{if(n=1,o&&(s=u[0]&2?o.return:u[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,u[1])).done)return s;switch(o=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,o=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],o=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},hze=qn(),Doe=oze(),irr=dze(),mze=ni(),orr=jx(),srr=(function(){function t(e,r,n,o){this._isCollectingData=!1,this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0,this._metrics={},this._documents=[],this._collectors=[],this._redirectedHost=null,this._pollingIntervalHint=-1,this.config=e,this.context=r||new orr,this._sender=new irr(this.config,n),this._isEnabled=!1,this._statsbeat=o?.getStatsbeat()}return t.prototype.addCollector=function(e){this._collectors.push(e)},t.prototype.trackMetric=function(e){this._addMetric(e)},t.prototype.addDocument=function(e){if(this._isCollectingData){var r=Doe.telemetryEnvelopeToQuickPulseDocument(e);r&&this._documents.push(r)}},t.prototype.enable=function(e){e&&!this._isEnabled?(this._isEnabled=!0,this._goQuickPulse(),this._statsbeat&&this._statsbeat.addFeature(mze.StatsbeatFeature.LIVE_METRICS)):!e&&this._isEnabled&&(this._isEnabled=!1,clearTimeout(this._handle),this._handle=void 0)},t.prototype.enableCollectors=function(e){this._collectors.forEach(function(r){r.enable(e)})},t.prototype._addMetric=function(e){var r=e.value,n=e.count||1,o=mze.PerformanceToQuickPulseCounter[e.name];o&&(this._metrics[o]?(this._metrics[o].Value=(this._metrics[o].Value*this._metrics[o].Weight+r*n)/(this._metrics[o].Weight+n),this._metrics[o].Weight+=n):(this._metrics[o]=Doe.createQuickPulseMetric(e),this._metrics[o].Name=o,this._metrics[o].Weight=1))},t.prototype._resetQuickPulseBuffer=function(){delete this._metrics,this._metrics={},this._documents.length=0},t.prototype._goQuickPulse=function(){return fze(this,void 0,void 0,function(){var e,r,n,o,s=this;return pze(this,function(a){switch(a.label){case 0:return e=Object.keys(this._metrics).map(function(c){return s._metrics[c]}),r=Doe.createQuickPulseEnvelope(e,this._documents.slice(),this.config,this.context),this._resetQuickPulseBuffer(),this._isCollectingData?[4,this._post(r)]:[3,2];case 1:return a.sent(),[3,3];case 2:this._ping(r),a.label=3;case 3:return n=this._pollingIntervalHint>0?this._pollingIntervalHint:t.PING_INTERVAL,o=this._isCollectingData?t.POST_INTERVAL:n,this._isCollectingData&&Date.now()-this._lastSuccessTime>=t.MAX_POST_WAIT_TIME&&!this._lastSendSucceeded?(this._isCollectingData=!1,o=t.FALLBACK_INTERVAL):!this._isCollectingData&&Date.now()-this._lastSuccessTime>=t.MAX_PING_WAIT_TIME&&!this._lastSendSucceeded&&(o=t.FALLBACK_INTERVAL),this._lastSendSucceeded=null,this._handle=setTimeout(this._goQuickPulse.bind(this),o),this._handle.unref(),[2]}})})},t.prototype._ping=function(e){this._sender.ping(e,this._redirectedHost,this._quickPulseDone.bind(this))},t.prototype._post=function(e){return fze(this,void 0,void 0,function(){return pze(this,function(r){switch(r.label){case 0:return[4,this._sender.post(e,this._redirectedHost,this._quickPulseDone.bind(this))];case 1:return r.sent(),[2]}})})},t.prototype._quickPulseDone=function(e,r,n,o){e!=null?(this._isCollectingData!==e&&(hze.info("Live Metrics sending data",e),this.enableCollectors(e)),this._isCollectingData=e,n&&n.length>0&&(this._redirectedHost=n,hze.info("Redirecting endpoint to: ",n)),o&&o>0&&(this._pollingIntervalHint=o),r&&r.statusCode<300&&r.statusCode>=200?(this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0):this._lastSendSucceeded=!1):this._lastSendSucceeded=!1},t.MAX_POST_WAIT_TIME=2e4,t.MAX_PING_WAIT_TIME=6e4,t.FALLBACK_INTERVAL=6e4,t.PING_INTERVAL=5e3,t.POST_INTERVAL=1e3,t})();gze.exports=srr});var yze=m(Kx=>{"use strict";var rq=Kx&&Kx.__assign||function(){return rq=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},rq.apply(this,arguments)};Object.defineProperty(Kx,"__esModule",{value:!0});Kx.AutoCollectNativePerformance=void 0;var vze=ni(),kM=jx(),arr=qn(),crr=(function(){function t(e){var r;this._disabledMetrics={},t.INSTANCE&&t.INSTANCE.dispose(),t.INSTANCE=this,this._client=e,this._statsbeat=(r=this._client)===null||r===void 0?void 0:r.getStatsbeat()}return t.prototype.enable=function(e,r,n){var o=this;if(r===void 0&&(r={}),n===void 0&&(n=6e4),t._metricsAvailable==null&&e&&!this._isInitialized)try{var s=require("applicationinsights-native-metrics");t._emitter=new s,t._metricsAvailable=!0,arr.info("Native metrics module successfully loaded!")}catch{t._metricsAvailable=!1;return}this._isEnabled=e,this._disabledMetrics=r,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),this._isEnabled&&t._emitter?(this._statsbeat&&this._statsbeat.addFeature(vze.StatsbeatFeature.NATIVE_METRICS),t._emitter.enable(!0,n),this._handle||(this._handle=setInterval(function(){return o._trackNativeMetrics()},n),this._handle.unref())):t._emitter&&(this._statsbeat&&this._statsbeat.removeFeature(vze.StatsbeatFeature.NATIVE_METRICS),t._emitter.enable(!1),this._handle&&(clearInterval(this._handle),this._handle=void 0))},t.prototype.dispose=function(){this.enable(!1)},t.parseEnabled=function(e,r){var n=r.disableAllExtendedMetrics,o=r.extendedMetricDisablers;if(n)return{isEnabled:!1,disabledMetrics:{}};if(o){var s=o.split(","),a={};if(s.length>0)for(var c=0,l=s;c<l.length;c++){var u=l[c];a[u]=!0}return typeof e=="object"?{isEnabled:!0,disabledMetrics:rq(rq({},e),a)}:{isEnabled:e,disabledMetrics:a}}return typeof e=="boolean"?{isEnabled:e,disabledMetrics:{}}:{isEnabled:!0,disabledMetrics:e}},t.prototype._trackNativeMetrics=function(){var e=!0;typeof this._isEnabled!="object"&&(e=this._isEnabled),e&&(this._trackGarbageCollection(),this._trackEventLoop(),this._trackHeapUsage())},t.prototype._trackGarbageCollection=function(){var e;if(!this._disabledMetrics.gc){var r=t._emitter.getGCData();for(var n in r){var o=r[n].metrics,s="".concat(n," Garbage Collection Duration"),a=Math.sqrt(o.sumSquares/o.count-Math.pow(o.total/o.count,2))||0;this._client.trackMetric({name:s,value:o.total,count:o.count,max:o.max,min:o.min,stdDev:a,tagOverrides:(e={},e[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+kM.sdkVersion,e)})}}},t.prototype._trackEventLoop=function(){var e;if(!this._disabledMetrics.loop){var r=t._emitter.getLoopData(),n=r.loopUsage;if(n.count!=0){var o="Event Loop CPU Time",s=Math.sqrt(n.sumSquares/n.count-Math.pow(n.total/n.count,2))||0;this._client.trackMetric({name:o,value:n.total,count:n.count,min:n.min,max:n.max,stdDev:s,tagOverrides:(e={},e[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+kM.sdkVersion,e)})}}},t.prototype._trackHeapUsage=function(){var e,r,n;if(!this._disabledMetrics.heap){var o=process.memoryUsage(),s=o.heapUsed,a=o.heapTotal,c=o.rss;this._client.trackMetric({name:"Memory Usage (Heap)",value:s,count:1,tagOverrides:(e={},e[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+kM.sdkVersion,e)}),this._client.trackMetric({name:"Memory Total (Heap)",value:a,count:1,tagOverrides:(r={},r[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+kM.sdkVersion,r)}),this._client.trackMetric({name:"Memory Usage (Non-Heap)",value:c-a,count:1,tagOverrides:(n={},n[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+kM.sdkVersion,n)})}},t})();Kx.AutoCollectNativePerformance=crr});var Sze=m(X_=>{"use strict";var Eze=X_&&X_.__awaiter||function(t,e,r,n){function o(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function c(d){try{u(n.next(d))}catch(f){a(f)}}function l(d){try{u(n.throw(d))}catch(f){a(f)}}function u(d){d.done?s(d.value):o(d.value).then(c,l)}u((n=n.apply(t,e||[])).next())})},Tze=X_&&X_.__generator||function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,o,s,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(u){return function(d){return l([u,d])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(r=0)),r;)try{if(n=1,o&&(s=u[0]&2?o.return:u[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,u[1])).done)return s;switch(o=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,o=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],o=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(X_,"__esModule",{value:!0});X_.AzureFunctionsHook=void 0;var nq=qn(),Uoe=z_(),lrr=(function(){function t(e){this._client=e,this._autoGenerateIncomingRequests=!1;try{this._functionsCoreModule=require("@azure/functions-core"),this._addPreInvocationHook(),this._addPostInvocationHook()}catch{nq.info("AzureFunctionsHook failed to load, not running in Azure Functions")}}return t.prototype._getFuncModelHelper=function(){if(this._cachedModelHelper===void 0){var e=this._functionsCoreModule.getProgrammingModel();e.name==="@azure/functions"&&(e.version.startsWith("3.")?this._cachedModelHelper=new urr:e.version.startsWith("4.")&&(this._cachedModelHelper=new drr)),this._cachedModelHelper||(this._cachedModelHelper=null,nq.warn('AzureFunctionsHook does not support model "'.concat(e.name,'" version "').concat(e.version,'"')))}return this._cachedModelHelper},t.prototype.enable=function(e){this._autoGenerateIncomingRequests=e},t.prototype.dispose=function(){this.enable(!1),this._removeInvocationHooks(),this._functionsCoreModule=void 0},t.prototype._addPreInvocationHook=function(){var e=this;this._preInvocationHook||(this._preInvocationHook=this._functionsCoreModule.registerHook("preInvocation",function(r){return Eze(e,void 0,void 0,function(){var n,o,s,a;return Tze(this,function(c){try{n=this._getFuncModelHelper(),n&&(o=r.invocationContext,s=Uoe.CorrelationContextManager.startOperation(o),s&&(s.customProperties.setProperty("InvocationId",o.invocationId),a=o.traceContext,a.attributes&&(s.customProperties.setProperty("ProcessId",a.attributes.ProcessId),s.customProperties.setProperty("LogLevel",a.attributes.LogLevel),s.customProperties.setProperty("Category",a.attributes.Category),s.customProperties.setProperty("HostInstanceId",a.attributes.HostInstanceId),s.customProperties.setProperty("AzFuncLiveLogsSessionId",a.attributes["#AzFuncLiveLogsSessionId"])),r.functionCallback=Uoe.CorrelationContextManager.wrapCallback(r.functionCallback,s),n.isHttpTrigger(r)&&this._autoGenerateIncomingRequests&&(r.hookData.appInsightsExtractedContext=s,r.hookData.appInsightsStartTime=Date.now())))}catch(l){return nq.warn("Failed to propagate context in Azure Functions",l),[2]}return[2]})})}))},t.prototype._addPostInvocationHook=function(){var e=this;this._postInvocationHook||(this._postInvocationHook=this._functionsCoreModule.registerHook("postInvocation",function(r){return Eze(e,void 0,void 0,function(){var n,o,s,a,c=this;return Tze(this,function(l){try{n=this._getFuncModelHelper(),n&&this._autoGenerateIncomingRequests&&n.isHttpTrigger(r)&&(o=r.inputs[0],o&&(s=r.hookData.appInsightsStartTime||Date.now(),a=r.hookData.appInsightsExtractedContext,a?Uoe.CorrelationContextManager.runWithContext(a,function(){c._createIncomingRequestTelemetry(o,r,s,a.operation.parentId)}):this._createIncomingRequestTelemetry(o,r,s,null)))}catch(u){nq.warn("Error creating automatic incoming request in Azure Functions",u)}return[2]})})}))},t.prototype._createIncomingRequestTelemetry=function(e,r,n,o){var s=this._getFuncModelHelper().getStatusCodes(r),a=200;if(s)for(var c=0,l=s;c<l.length;c++){var u=l[c];if(typeof u=="number"&&Number.isInteger(u)){a=u;break}else if(typeof u=="string"){var d=parseInt(u);if(!isNaN(d)){a=d;break}}}else a=void 0;this._client.trackRequest({name:e.method+" "+e.url,resultCode:a,success:typeof a=="number"?0<a&&a<400:void 0,url:e.url,time:new Date(n),duration:Date.now()-n,id:o}),this._client.flush()},t.prototype._removeInvocationHooks=function(){this._preInvocationHook&&(this._preInvocationHook.dispose(),this._preInvocationHook=void 0),this._postInvocationHook&&(this._postInvocationHook.dispose(),this._postInvocationHook=void 0)},t})();X_.AzureFunctionsHook=lrr;var urr=(function(){function t(){}return t.prototype._getInvocationContext=function(e){return e.invocationContext},t.prototype.getStatusCodes=function(e){var r=this._getInvocationContext(e),n,o=r.bindingDefinitions.find(function(s){return s.direction==="out"&&s.type.toLowerCase()==="http"});return o?.name==="$return"?n=e.result:o&&r.bindings&&r.bindings[o.name]!==void 0?n=r.bindings[o.name]:n=r.res,n?[n.statusCode,n.status]:void 0},t.prototype.isHttpTrigger=function(e){var r=this._getInvocationContext(e);return!!r.bindingDefinitions.find(function(n){var o;return((o=n.type)===null||o===void 0?void 0:o.toLowerCase())==="httptrigger"})},t})(),drr=(function(){function t(){}return t.prototype._getInvocationContext=function(e){return e.invocationContext},t.prototype.getStatusCodes=function(e){var r=e.result;return r?[r.status]:void 0},t.prototype.isHttpTrigger=function(e){var r=this._getInvocationContext(e);return r.options.trigger.type.toLowerCase()==="httptrigger"},t})()});var qoe=m((a4n,Aze)=>{"use strict";var frr=OE(),bze=yoe(),prr=qn(),Cze=ni(),hrr=require("url"),mrr=V8(),grr=(function(){function t(e){this._endpointBase=Cze.DEFAULT_BREEZE_ENDPOINT,this._mergeConfig();var r=this._connectionString,n=bze.parse(e),o=bze.parse(r),s=!n.instrumentationkey&&Object.keys(n).length>0?null:e,a=this._instrumentationKey;this.instrumentationKey=n.instrumentationkey||s||o.instrumentationkey||a;var c="".concat(this.endpointUrl||n.ingestionendpoint||o.ingestionendpoint||this._endpointBase);c.endsWith("/")&&(c=c.slice(0,-1)),this.endpointUrl="".concat(c,"/v2.1/track"),this.maxBatchSize=this.maxBatchSize||250,this.maxBatchIntervalMs=this.maxBatchIntervalMs||15e3,this.disableAppInsights=this.disableAppInsights||!1,this.samplingPercentage=this.samplingPercentage||100,this.correlationIdRetryIntervalMs=this.correlationIdRetryIntervalMs||30*1e3,this.enableWebInstrumentation=this.enableWebInstrumentation||this.enableAutoWebSnippetInjection||!1,this.webInstrumentationConfig=this.webInstrumentationConfig||null,this.enableAutoWebSnippetInjection=this.enableWebInstrumentation,this.correlationHeaderExcludedDomains=this.correlationHeaderExcludedDomains||["*.core.windows.net","*.core.chinacloudapi.cn","*.core.cloudapi.de","*.core.usgovcloudapi.net","*.core.microsoft.scloud","*.core.eaglex.ic.gov"],this.ignoreLegacyHeaders=this.ignoreLegacyHeaders||!1,this.profileQueryEndpoint=n.ingestionendpoint||o.ingestionendpoint||process.env[t.ENV_profileQueryEndpoint]||this._endpointBase,this.quickPulseHost=this.quickPulseHost||n.liveendpoint||o.liveendpoint||process.env[t.ENV_quickPulseHost]||Cze.DEFAULT_LIVEMETRICS_HOST,this.webInstrumentationConnectionString=this.webInstrumentationConnectionString||this._webInstrumentationConnectionString||"",this.webSnippetConnectionString=this.webInstrumentationConnectionString,this.quickPulseHost.match(/^https?:\/\//)&&(this.quickPulseHost=new hrr.URL(this.quickPulseHost).host),this.aadAudience=n.aadaudience||o.aadaudience}return Object.defineProperty(t.prototype,"profileQueryEndpoint",{get:function(){return this._profileQueryEndpoint},set:function(e){this._profileQueryEndpoint=e,this.correlationId=frr.correlationIdPrefix},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"instrumentationKey",{get:function(){return this._instrumentationKey},set:function(e){t._validateInstrumentationKey(e)||prr.warn("An invalid instrumentation key was provided. There may be resulting telemetry loss",this.instrumentationKey),this._instrumentationKey=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"webSnippetConnectionString",{get:function(){return this._webInstrumentationConnectionString},set:function(e){this._webInstrumentationConnectionString=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"webInstrumentationConnectionString",{get:function(){return this._webInstrumentationConnectionString},set:function(e){this._webInstrumentationConnectionString=e},enumerable:!1,configurable:!0}),t.prototype._mergeConfig=function(){var e=mrr.JsonConfig.getInstance();this._connectionString=e.connectionString,this._instrumentationKey=e.instrumentationKey,this.correlationHeaderExcludedDomains=e.correlationHeaderExcludedDomains,this.correlationIdRetryIntervalMs=e.correlationIdRetryIntervalMs,this.disableAllExtendedMetrics=e.disableAllExtendedMetrics,this.disableAppInsights=e.disableAppInsights,this.disableStatsbeat=e.disableStatsbeat,this.distributedTracingMode=e.distributedTracingMode,this.enableAutoCollectConsole=e.enableAutoCollectConsole,this.enableLoggerErrorToTrace=e.enableLoggerErrorToTrace,this.enableAutoCollectDependencies=e.enableAutoCollectDependencies,this.enableAutoCollectIncomingRequestAzureFunctions=e.enableAutoCollectIncomingRequestAzureFunctions,this.enableAutoCollectExceptions=e.enableAutoCollectExceptions,this.enableAutoCollectExtendedMetrics=e.enableAutoCollectExtendedMetrics,this.enableAutoCollectExternalLoggers=e.enableAutoCollectExternalLoggers,this.enableAutoCollectHeartbeat=e.enableAutoCollectHeartbeat,this.enableAutoCollectPerformance=e.enableAutoCollectPerformance,this.enableAutoCollectPreAggregatedMetrics=e.enableAutoCollectPreAggregatedMetrics,this.enableAutoCollectRequests=e.enableAutoCollectRequests,this.enableAutoDependencyCorrelation=e.enableAutoDependencyCorrelation,this.enableInternalDebugLogging=e.enableInternalDebugLogging,this.enableInternalWarningLogging=e.enableInternalWarningLogging,this.enableResendInterval=e.enableResendInterval,this.enableMaxBytesOnDisk=e.enableMaxBytesOnDisk,this.enableSendLiveMetrics=e.enableSendLiveMetrics,this.enableUseAsyncHooks=e.enableUseAsyncHooks,this.enableUseDiskRetryCaching=e.enableUseDiskRetryCaching,this.endpointUrl=e.endpointUrl,this.extendedMetricDisablers=e.extendedMetricDisablers,this.ignoreLegacyHeaders=e.ignoreLegacyHeaders,this.maxBatchIntervalMs=e.maxBatchIntervalMs,this.maxBatchSize=e.maxBatchSize,this.proxyHttpUrl=e.proxyHttpUrl,this.proxyHttpsUrl=e.proxyHttpsUrl,this.quickPulseHost=e.quickPulseHost,this.samplingPercentage=e.samplingPercentage,this.enableWebInstrumentation=e.enableWebInstrumentation,this._webInstrumentationConnectionString=e.webInstrumentationConnectionString,this.webInstrumentationConfig=e.webInstrumentationConfig,this.webInstrumentationSrc=e.webInstrumentationSrc},t._validateInstrumentationKey=function(e){var r="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",n=new RegExp(r);return n.test(e)},t.ENV_azurePrefix="APPSETTING_",t.ENV_iKey="APPINSIGHTS_INSTRUMENTATIONKEY",t.legacy_ENV_iKey="APPINSIGHTS_INSTRUMENTATION_KEY",t.ENV_profileQueryEndpoint="APPINSIGHTS_PROFILE_QUERY_ENDPOINT",t.ENV_quickPulseHost="APPINSIGHTS_QUICKPULSE_HOST",t})();Aze.exports=grr});var Boe=m(joe=>{"use strict";Object.defineProperty(joe,"__esModule",{value:!0});joe.createEmptyPipeline=_rr;var xze=new Set(["Deserialize","Serialize","Retry","Sign"]),Foe=class t{constructor(e){var r;this._policies=[],this._policies=(r=e?.slice(0))!==null&&r!==void 0?r:[],this._orderedPolicies=void 0}addPolicy(e,r={}){if(r.phase&&r.afterPhase)throw new Error("Policies inside a phase cannot specify afterPhase.");if(r.phase&&!xze.has(r.phase))throw new Error(`Invalid phase name: ${r.phase}`);if(r.afterPhase&&!xze.has(r.afterPhase))throw new Error(`Invalid afterPhase name: ${r.afterPhase}`);this._policies.push({policy:e,options:r}),this._orderedPolicies=void 0}removePolicy(e){let r=[];return this._policies=this._policies.filter(n=>e.name&&n.policy.name===e.name||e.phase&&n.options.phase===e.phase?(r.push(n.policy),!1):!0),this._orderedPolicies=void 0,r}sendRequest(e,r){return this.getOrderedPolicies().reduceRight((s,a)=>c=>a.sendRequest(c,s),s=>e.sendRequest(s))(r)}getOrderedPolicies(){return this._orderedPolicies||(this._orderedPolicies=this.orderPolicies()),this._orderedPolicies}clone(){return new t(this._policies)}static create(){return new t}orderPolicies(){let e=[],r=new Map;function n(_){return{name:_,policies:new Set,hasRun:!1,hasAfterPolicies:!1}}let o=n("Serialize"),s=n("None"),a=n("Deserialize"),c=n("Retry"),l=n("Sign"),u=[o,s,a,c,l];function d(_){return _==="Retry"?c:_==="Serialize"?o:_==="Deserialize"?a:_==="Sign"?l:s}for(let _ of this._policies){let g=_.policy,v=_.options,E=g.name;if(r.has(E))throw new Error("Duplicate policy names not allowed in pipeline");let y={policy:g,dependsOn:new Set,dependants:new Set};v.afterPhase&&(y.afterPhase=d(v.afterPhase),y.afterPhase.hasAfterPolicies=!0),r.set(E,y),d(v.phase).policies.add(y)}for(let _ of this._policies){let{policy:g,options:v}=_,E=g.name,y=r.get(E);if(!y)throw new Error(`Missing node for policy ${E}`);if(v.afterPolicies)for(let S of v.afterPolicies){let b=r.get(S);b&&(y.dependsOn.add(b),b.dependants.add(y))}if(v.beforePolicies)for(let S of v.beforePolicies){let b=r.get(S);b&&(b.dependsOn.add(y),y.dependants.add(b))}}function f(_){_.hasRun=!0;for(let g of _.policies)if(!(g.afterPhase&&(!g.afterPhase.hasRun||g.afterPhase.policies.size))&&g.dependsOn.size===0){e.push(g.policy);for(let v of g.dependants)v.dependsOn.delete(g);r.delete(g.policy.name),_.policies.delete(g)}}function p(){for(let _ of u){if(f(_),_.policies.size>0&&_!==s){s.hasRun||f(s);return}_.hasAfterPolicies&&f(s)}}let h=0;for(;r.size>0;){h++;let _=e.length;if(p(),e.length<=_&&h>1)throw new Error("Cannot satisfy policy dependencies due to requirements cycle.")}return e}};function _rr(){return Foe.create()}});var eT=m(iq=>{"use strict";Object.defineProperty(iq,"__esModule",{value:!0});iq.logger=void 0;var vrr=S7();iq.logger=(0,vrr.createClientLogger)("core-rest-pipeline")});var Voe=m($oe=>{"use strict";Object.defineProperty($oe,"__esModule",{value:!0});$oe.getRandomIntegerInclusive=yrr;function yrr(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}});var wze=m(Hoe=>{"use strict";Object.defineProperty(Hoe,"__esModule",{value:!0});Hoe.calculateRetryDelay=Trr;var Err=Voe();function Trr(t,e){let r=e.retryDelayInMs*Math.pow(2,t),n=Math.min(e.maxRetryDelayInMs,r);return{retryAfterInMs:n/2+(0,Err.getRandomIntegerInclusive)(0,n/2)}}});var oq=m(Goe=>{"use strict";Object.defineProperty(Goe,"__esModule",{value:!0});Goe.isObject=Srr;function Srr(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)&&!(t instanceof RegExp)&&!(t instanceof Date)}});var Ize=m(zoe=>{"use strict";Object.defineProperty(zoe,"__esModule",{value:!0});zoe.isError=Crr;var brr=oq();function Crr(t){if((0,brr.isObject)(t)){let e=typeof t.name=="string",r=typeof t.message=="string";return e&&r}return!1}});var Rze=m(sq=>{"use strict";Object.defineProperty(sq,"__esModule",{value:!0});sq.computeSha256Hmac=Arr;sq.computeSha256Hash=xrr;var Pze=require("node:crypto");async function Arr(t,e,r){let n=Buffer.from(t,"base64");return(0,Pze.createHmac)("sha256",n).update(e).digest(r)}async function xrr(t,e){return(0,Pze.createHash)("sha256").update(t).digest(e)}});var Oze=m(Woe=>{"use strict";Object.defineProperty(Woe,"__esModule",{value:!0});Woe.randomUUID=Prr;var wrr=require("node:crypto"),Irr=typeof globalThis?.crypto?.randomUUID=="function"?globalThis.crypto.randomUUID.bind(globalThis.crypto):wrr.randomUUID;function Prr(){return Irr()}});var Mze=m($o=>{"use strict";Object.defineProperty($o,"__esModule",{value:!0});$o.isReactNative=$o.isNodeRuntime=$o.isNodeLike=$o.isBun=$o.isDeno=$o.isWebWorker=$o.isBrowser=void 0;$o.isBrowser=typeof window<"u"&&typeof window.document<"u";$o.isWebWorker=typeof self=="object"&&typeof self?.importScripts=="function"&&(self.constructor?.name==="DedicatedWorkerGlobalScope"||self.constructor?.name==="ServiceWorkerGlobalScope"||self.constructor?.name==="SharedWorkerGlobalScope");$o.isDeno=typeof Deno<"u"&&typeof Deno.version<"u"&&typeof Deno.version.deno<"u";$o.isBun=typeof Bun<"u"&&typeof Bun.version<"u";$o.isNodeLike=typeof globalThis.process<"u"&&!!globalThis.process.version&&!!globalThis.process.versions?.node;$o.isNodeRuntime=$o.isNodeLike&&!$o.isBun&&!$o.isDeno;$o.isReactNative=typeof navigator<"u"&&navigator?.product==="ReactNative"});var Nze=m(aq=>{"use strict";Object.defineProperty(aq,"__esModule",{value:!0});aq.uint8ArrayToString=Rrr;aq.stringToUint8Array=Orr;function Rrr(t,e){return Buffer.from(t).toString(e)}function Orr(t,e){return Buffer.from(t,e)}});var Lze=m(cq=>{"use strict";Object.defineProperty(cq,"__esModule",{value:!0});cq.Sanitizer=void 0;var Mrr=oq(),Koe="REDACTED",Nrr=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent","WWW-Authenticate"],Lrr=["api-version"],Yoe=class{allowedHeaderNames;allowedQueryParameters;constructor({additionalAllowedHeaderNames:e=[],additionalAllowedQueryParameters:r=[]}={}){e=Nrr.concat(e),r=Lrr.concat(r),this.allowedHeaderNames=new Set(e.map(n=>n.toLowerCase())),this.allowedQueryParameters=new Set(r.map(n=>n.toLowerCase()))}sanitize(e){let r=new Set;return JSON.stringify(e,(n,o)=>{if(o instanceof Error)return{...o,name:o.name,message:o.message};if(n==="headers")return this.sanitizeHeaders(o);if(n==="url")return this.sanitizeUrl(o);if(n==="query")return this.sanitizeQuery(o);if(n==="body")return;if(n==="response")return;if(n==="operationSpec")return;if(Array.isArray(o)||(0,Mrr.isObject)(o)){if(r.has(o))return"[Circular]";r.add(o)}return o},2)}sanitizeUrl(e){if(typeof e!="string"||e===null||e==="")return e;let r=new URL(e);if(!r.search)return e;for(let[n]of r.searchParams)this.allowedQueryParameters.has(n.toLowerCase())||r.searchParams.set(n,Koe);return r.toString()}sanitizeHeaders(e){let r={};for(let n of Object.keys(e))this.allowedHeaderNames.has(n.toLowerCase())?r[n]=e[n]:r[n]=Koe;return r}sanitizeQuery(e){if(typeof e!="object"||e===null)return e;let r={};for(let n of Object.keys(e))this.allowedQueryParameters.has(n.toLowerCase())?r[n]=e[n]:r[n]=Koe;return r}};cq.Sanitizer=Yoe});var lq=m(Ur=>{"use strict";Object.defineProperty(Ur,"__esModule",{value:!0});Ur.Sanitizer=Ur.uint8ArrayToString=Ur.stringToUint8Array=Ur.isWebWorker=Ur.isReactNative=Ur.isDeno=Ur.isNodeRuntime=Ur.isNodeLike=Ur.isBun=Ur.isBrowser=Ur.randomUUID=Ur.computeSha256Hmac=Ur.computeSha256Hash=Ur.isError=Ur.isObject=Ur.getRandomIntegerInclusive=Ur.calculateRetryDelay=void 0;var krr=wze();Object.defineProperty(Ur,"calculateRetryDelay",{enumerable:!0,get:function(){return krr.calculateRetryDelay}});var Drr=Voe();Object.defineProperty(Ur,"getRandomIntegerInclusive",{enumerable:!0,get:function(){return Drr.getRandomIntegerInclusive}});var Urr=oq();Object.defineProperty(Ur,"isObject",{enumerable:!0,get:function(){return Urr.isObject}});var qrr=Ize();Object.defineProperty(Ur,"isError",{enumerable:!0,get:function(){return qrr.isError}});var kze=Rze();Object.defineProperty(Ur,"computeSha256Hash",{enumerable:!0,get:function(){return kze.computeSha256Hash}});Object.defineProperty(Ur,"computeSha256Hmac",{enumerable:!0,get:function(){return kze.computeSha256Hmac}});var Frr=Oze();Object.defineProperty(Ur,"randomUUID",{enumerable:!0,get:function(){return Frr.randomUUID}});var tT=Mze();Object.defineProperty(Ur,"isBrowser",{enumerable:!0,get:function(){return tT.isBrowser}});Object.defineProperty(Ur,"isBun",{enumerable:!0,get:function(){return tT.isBun}});Object.defineProperty(Ur,"isNodeLike",{enumerable:!0,get:function(){return tT.isNodeLike}});Object.defineProperty(Ur,"isNodeRuntime",{enumerable:!0,get:function(){return tT.isNodeRuntime}});Object.defineProperty(Ur,"isDeno",{enumerable:!0,get:function(){return tT.isDeno}});Object.defineProperty(Ur,"isReactNative",{enumerable:!0,get:function(){return tT.isReactNative}});Object.defineProperty(Ur,"isWebWorker",{enumerable:!0,get:function(){return tT.isWebWorker}});var Dze=Nze();Object.defineProperty(Ur,"stringToUint8Array",{enumerable:!0,get:function(){return Dze.stringToUint8Array}});Object.defineProperty(Ur,"uint8ArrayToString",{enumerable:!0,get:function(){return Dze.uint8ArrayToString}});var jrr=Lze();Object.defineProperty(Ur,"Sanitizer",{enumerable:!0,get:function(){return jrr.Sanitizer}})});var Uze=m(Qoe=>{"use strict";Object.defineProperty(Qoe,"__esModule",{value:!0});Qoe.cancelablePromiseRace=Brr;async function Brr(t,e){let r=new AbortController;function n(){r.abort()}e?.abortSignal?.addEventListener("abort",n);try{return await Promise.race(t.map(o=>o({abortSignal:r.signal})))}finally{r.abort(),e?.abortSignal?.removeEventListener("abort",n)}}});var qze=m(uq=>{"use strict";Object.defineProperty(uq,"__esModule",{value:!0});uq.AbortError=void 0;var Zoe=class extends Error{constructor(e){super(e),this.name="AbortError"}};uq.AbortError=Zoe});var DM=m(dq=>{"use strict";Object.defineProperty(dq,"__esModule",{value:!0});dq.AbortError=void 0;var $rr=qze();Object.defineProperty(dq,"AbortError",{enumerable:!0,get:function(){return $rr.AbortError}})});var Xoe=m(Joe=>{"use strict";Object.defineProperty(Joe,"__esModule",{value:!0});Joe.createAbortablePromise=Hrr;var Vrr=DM();function Hrr(t,e){let{cleanupBeforeAbort:r,abortSignal:n,abortErrorMsg:o}=e??{};return new Promise((s,a)=>{function c(){a(new Vrr.AbortError(o??"The operation was aborted."))}function l(){n?.removeEventListener("abort",u)}function u(){r?.(),l(),c()}if(n?.aborted)return c();try{t(d=>{l(),s(d)},d=>{l(),a(d)})}catch(d){a(d)}n?.addEventListener("abort",u)})}});var Fze=m(fq=>{"use strict";Object.defineProperty(fq,"__esModule",{value:!0});fq.delay=Krr;fq.calculateRetryDelay=Yrr;var Grr=Xoe(),zrr=lq(),Wrr="The delay was aborted.";function Krr(t,e){let r,{abortSignal:n,abortErrorMsg:o}=e??{};return(0,Grr.createAbortablePromise)(s=>{r=setTimeout(s,t)},{cleanupBeforeAbort:()=>clearTimeout(r),abortSignal:n,abortErrorMsg:o??Wrr})}function Yrr(t,e){let r=e.retryDelayInMs*Math.pow(2,t),n=Math.min(e.maxRetryDelayInMs,r);return{retryAfterInMs:n/2+(0,zrr.getRandomIntegerInclusive)(0,n/2)}}});var jze=m(ese=>{"use strict";Object.defineProperty(ese,"__esModule",{value:!0});ese.getErrorMessage=Zrr;var Qrr=lq();function Zrr(t){if((0,Qrr.isError)(t))return t.message;{let e;try{typeof t=="object"&&t?e=JSON.stringify(t):e=String(t)}catch{e="[unable to stringify input]"}return`Unknown error ${e}`}}});var $ze=m(UM=>{"use strict";Object.defineProperty(UM,"__esModule",{value:!0});UM.isDefined=tse;UM.isObjectWithProperties=Jrr;UM.objectHasProperty=Bze;function tse(t){return typeof t<"u"&&t!==null}function Jrr(t,e){if(!tse(t)||typeof t!="object")return!1;for(let r of e)if(!Bze(t,r))return!1;return!0}function Bze(t,e){return tse(t)&&typeof t=="object"&&e in t}});var G0=m(dr=>{"use strict";Object.defineProperty(dr,"__esModule",{value:!0});dr.isWebWorker=dr.isReactNative=dr.isNodeRuntime=dr.isNodeLike=dr.isNode=dr.isDeno=dr.isBun=dr.isBrowser=dr.objectHasProperty=dr.isObjectWithProperties=dr.isDefined=dr.getErrorMessage=dr.delay=dr.createAbortablePromise=dr.cancelablePromiseRace=void 0;dr.calculateRetryDelay=inr;dr.computeSha256Hash=onr;dr.computeSha256Hmac=snr;dr.getRandomIntegerInclusive=anr;dr.isError=cnr;dr.isObject=lnr;dr.randomUUID=unr;dr.uint8ArrayToString=dnr;dr.stringToUint8Array=fnr;var Xrr=(N_(),cn(M_)),xs=Xrr.__importStar(lq()),enr=Uze();Object.defineProperty(dr,"cancelablePromiseRace",{enumerable:!0,get:function(){return enr.cancelablePromiseRace}});var tnr=Xoe();Object.defineProperty(dr,"createAbortablePromise",{enumerable:!0,get:function(){return tnr.createAbortablePromise}});var rnr=Fze();Object.defineProperty(dr,"delay",{enumerable:!0,get:function(){return rnr.delay}});var nnr=jze();Object.defineProperty(dr,"getErrorMessage",{enumerable:!0,get:function(){return nnr.getErrorMessage}});var rse=$ze();Object.defineProperty(dr,"isDefined",{enumerable:!0,get:function(){return rse.isDefined}});Object.defineProperty(dr,"isObjectWithProperties",{enumerable:!0,get:function(){return rse.isObjectWithProperties}});Object.defineProperty(dr,"objectHasProperty",{enumerable:!0,get:function(){return rse.objectHasProperty}});function inr(t,e){return xs.calculateRetryDelay(t,e)}function onr(t,e){return xs.computeSha256Hash(t,e)}function snr(t,e,r){return xs.computeSha256Hmac(t,e,r)}function anr(t,e){return xs.getRandomIntegerInclusive(t,e)}function cnr(t){return xs.isError(t)}function lnr(t){return xs.isObject(t)}function unr(){return xs.randomUUID()}dr.isBrowser=xs.isBrowser;dr.isBun=xs.isBun;dr.isDeno=xs.isDeno;dr.isNode=xs.isNodeLike;dr.isNodeLike=xs.isNodeLike;dr.isNodeRuntime=xs.isNodeRuntime;dr.isReactNative=xs.isReactNative;dr.isWebWorker=xs.isWebWorker;function dnr(t,e){return xs.uint8ArrayToString(t,e)}function fnr(t,e){return xs.stringToUint8Array(t,e)}});var hq=m(pq=>{"use strict";Object.defineProperty(pq,"__esModule",{value:!0});pq.Sanitizer=void 0;var pnr=G0(),nse="REDACTED",hnr=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent","WWW-Authenticate"],mnr=["api-version"],ise=class{constructor({additionalAllowedHeaderNames:e=[],additionalAllowedQueryParameters:r=[]}={}){e=hnr.concat(e),r=mnr.concat(r),this.allowedHeaderNames=new Set(e.map(n=>n.toLowerCase())),this.allowedQueryParameters=new Set(r.map(n=>n.toLowerCase()))}sanitize(e){let r=new Set;return JSON.stringify(e,(n,o)=>{if(o instanceof Error)return Object.assign(Object.assign({},o),{name:o.name,message:o.message});if(n==="headers")return this.sanitizeHeaders(o);if(n==="url")return this.sanitizeUrl(o);if(n==="query")return this.sanitizeQuery(o);if(n==="body")return;if(n==="response")return;if(n==="operationSpec")return;if(Array.isArray(o)||(0,pnr.isObject)(o)){if(r.has(o))return"[Circular]";r.add(o)}return o},2)}sanitizeUrl(e){if(typeof e!="string"||e===null||e==="")return e;let r=new URL(e);if(!r.search)return e;for(let[n]of r.searchParams)this.allowedQueryParameters.has(n.toLowerCase())||r.searchParams.set(n,nse);return r.toString()}sanitizeHeaders(e){let r={};for(let n of Object.keys(e))this.allowedHeaderNames.has(n.toLowerCase())?r[n]=e[n]:r[n]=nse;return r}sanitizeQuery(e){if(typeof e!="object"||e===null)return e;let r={};for(let n of Object.keys(e))this.allowedQueryParameters.has(n.toLowerCase())?r[n]=e[n]:r[n]=nse;return r}};pq.Sanitizer=ise});var ose=m(Yx=>{"use strict";Object.defineProperty(Yx,"__esModule",{value:!0});Yx.logPolicyName=void 0;Yx.logPolicy=vnr;var gnr=eT(),_nr=hq();Yx.logPolicyName="logPolicy";function vnr(t={}){var e;let r=(e=t.logger)!==null&&e!==void 0?e:gnr.logger.info,n=new _nr.Sanitizer({additionalAllowedHeaderNames:t.additionalAllowedHeaderNames,additionalAllowedQueryParameters:t.additionalAllowedQueryParameters});return{name:Yx.logPolicyName,async sendRequest(o,s){if(!r.enabled)return s(o);r(`Request: ${n.sanitize(o)}`);let a=await s(o);return r(`Response status code: ${a.status}`),r(`Headers: ${n.sanitize(a.headers)}`),a}}}});var sse=m(Qx=>{"use strict";Object.defineProperty(Qx,"__esModule",{value:!0});Qx.redirectPolicyName=void 0;Qx.redirectPolicy=ynr;Qx.redirectPolicyName="redirectPolicy";var Vze=["GET","HEAD"];function ynr(t={}){let{maxRetries:e=20}=t;return{name:Qx.redirectPolicyName,async sendRequest(r,n){let o=await n(r);return Hze(n,o,e)}}}async function Hze(t,e,r,n=0){let{request:o,status:s,headers:a}=e,c=a.get("location");if(c&&(s===300||s===301&&Vze.includes(o.method)||s===302&&Vze.includes(o.method)||s===303&&o.method==="POST"||s===307)&&n<r){let l=new URL(c,o.url);o.url=l.toString(),s===303&&(o.method="GET",o.headers.delete("Content-Length"),delete o.body),o.headers.delete("Authorization");let u=await t(o);return Hze(t,u,r,n+1)}return e}});var zze=m(mq=>{"use strict";Object.defineProperty(mq,"__esModule",{value:!0});mq.getHeaderName=Enr;mq.setPlatformSpecificData=Tnr;var Gze=(N_(),cn(M_)),ase=Gze.__importStar(require("node:os")),cse=Gze.__importStar(require("node:process"));function Enr(){return"User-Agent"}async function Tnr(t){if(cse&&cse.versions){let e=cse.versions;e.bun?t.set("Bun",e.bun):e.deno?t.set("Deno",e.deno):e.node&&t.set("Node",e.node)}t.set("OS",`(${ase.arch()}-${ase.type()}-${ase.release()})`)}});var e1=m(Zx=>{"use strict";Object.defineProperty(Zx,"__esModule",{value:!0});Zx.DEFAULT_RETRY_POLICY_COUNT=Zx.SDK_VERSION=void 0;Zx.SDK_VERSION="1.16.3";Zx.DEFAULT_RETRY_POLICY_COUNT=3});var lse=m(gq=>{"use strict";Object.defineProperty(gq,"__esModule",{value:!0});gq.getUserAgentHeaderName=Cnr;gq.getUserAgentValue=Anr;var Wze=zze(),Snr=e1();function bnr(t){let e=[];for(let[r,n]of t){let o=n?`${r}/${n}`:r;e.push(o)}return e.join(" ")}function Cnr(){return(0,Wze.getHeaderName)()}async function Anr(t){let e=new Map;e.set("core-rest-pipeline",Snr.SDK_VERSION),await(0,Wze.setPlatformSpecificData)(e);let r=bnr(e);return t?`${t} ${r}`:r}});var use=m(Jx=>{"use strict";Object.defineProperty(Jx,"__esModule",{value:!0});Jx.userAgentPolicyName=void 0;Jx.userAgentPolicy=xnr;var Yze=lse(),Kze=(0,Yze.getUserAgentHeaderName)();Jx.userAgentPolicyName="userAgentPolicy";function xnr(t={}){let e=(0,Yze.getUserAgentValue)(t.userAgentPrefix);return{name:Jx.userAgentPolicyName,async sendRequest(r,n){return r.headers.has(Kze)||r.headers.set(Kze,await e),n(r)}}}});var _q=m(Xx=>{"use strict";Object.defineProperty(Xx,"__esModule",{value:!0});Xx.isNodeReadableStream=Qze;Xx.isWebReadableStream=Zze;Xx.isReadableStream=wnr;Xx.isBlob=Inr;function Qze(t){return!!(t&&typeof t.pipe=="function")}function Zze(t){return!!(t&&typeof t.getReader=="function"&&typeof t.tee=="function")}function wnr(t){return Qze(t)||Zze(t)}function Inr(t){return typeof t.stream=="function"}});var dse=m(qM=>{"use strict";Object.defineProperty(qM,"__esModule",{value:!0});qM.getRawContent=Mnr;qM.createFileFromStream=Nnr;qM.createFile=Lnr;var Pnr=G0(),Rnr=_q(),Jze={arrayBuffer:()=>{throw new Error("Not implemented")},slice:()=>{throw new Error("Not implemented")},text:()=>{throw new Error("Not implemented")}},vq=Symbol("rawContent");function Onr(t){return typeof t[vq]=="function"}function Mnr(t){return Onr(t)?t[vq]():t.stream()}function Nnr(t,e,r={}){var n,o,s,a;return Object.assign(Object.assign({},Jze),{type:(n=r.type)!==null&&n!==void 0?n:"",lastModified:(o=r.lastModified)!==null&&o!==void 0?o:new Date().getTime(),webkitRelativePath:(s=r.webkitRelativePath)!==null&&s!==void 0?s:"",size:(a=r.size)!==null&&a!==void 0?a:-1,name:e,stream:()=>{let c=t();if((0,Rnr.isNodeReadableStream)(c))throw new Error("Not supported: a Node stream was provided as input to createFileFromStream.");return c},[vq]:t})}function Lnr(t,e,r={}){var n,o,s;return Pnr.isNodeLike?Object.assign(Object.assign({},Jze),{type:(n=r.type)!==null&&n!==void 0?n:"",lastModified:(o=r.lastModified)!==null&&o!==void 0?o:new Date().getTime(),webkitRelativePath:(s=r.webkitRelativePath)!==null&&s!==void 0?s:"",size:t.byteLength,name:e,arrayBuffer:async()=>t.buffer,stream:()=>new Blob([t]).stream(),[vq]:()=>t}):new File([t],e,r)}});var tWe=m(pse=>{"use strict";Object.defineProperty(pse,"__esModule",{value:!0});pse.concat=Fnr;var tm=(N_(),cn(M_)),fse=require("node:stream"),knr=_q(),Dnr=dse();function Xze(){return tm.__asyncGenerator(this,arguments,function*(){let e=this.getReader();try{for(;;){let{done:r,value:n}=yield tm.__await(e.read());if(r)return yield tm.__await(void 0);yield yield tm.__await(n)}}finally{e.releaseLock()}})}function Unr(t){t[Symbol.asyncIterator]||(t[Symbol.asyncIterator]=Xze.bind(t)),t.values||(t.values=Xze.bind(t))}function qnr(t){return t instanceof ReadableStream?(Unr(t),fse.Readable.fromWeb(t)):t}function eWe(t){return t instanceof Uint8Array?fse.Readable.from(Buffer.from(t)):(0,knr.isBlob)(t)?eWe((0,Dnr.getRawContent)(t)):qnr(t)}async function Fnr(t){return function(){let e=t.map(r=>typeof r=="function"?r():r).map(eWe);return fse.Readable.from((function(){return tm.__asyncGenerator(this,arguments,function*(){var r,n,o,s;for(let u of e)try{for(var a=!0,c=(n=void 0,tm.__asyncValues(u)),l;l=yield tm.__await(c.next()),r=l.done,!r;a=!0){s=l.value,a=!1;let d=s;yield yield tm.__await(d)}}catch(d){n={error:d}}finally{try{!a&&!r&&(o=c.return)&&(yield tm.__await(o.call(c)))}finally{if(n)throw n.error}}})})())}}});var hse=m(ew=>{"use strict";Object.defineProperty(ew,"__esModule",{value:!0});ew.multipartPolicyName=void 0;ew.multipartPolicy=Qnr;var rT=G0(),jnr=tWe(),Bnr=_q();function $nr(){return`----AzSDKFormBoundary${(0,rT.randomUUID)()}`}function Vnr(t){let e="";for(let[r,n]of t)e+=`${r}: ${n}\r
`;return e}function Hnr(t){return t instanceof Uint8Array?t.byteLength:(0,Bnr.isBlob)(t)?t.size===-1?void 0:t.size:void 0}function Gnr(t){let e=0;for(let r of t){let n=Hnr(r);if(n===void 0)return;e+=n}return e}async function znr(t,e,r){let n=[(0,rT.stringToUint8Array)(`--${r}`,"utf-8"),...e.flatMap(s=>[(0,rT.stringToUint8Array)(`\r
`,"utf-8"),(0,rT.stringToUint8Array)(Vnr(s.headers),"utf-8"),(0,rT.stringToUint8Array)(`\r
`,"utf-8"),s.body,(0,rT.stringToUint8Array)(`\r
--${r}`,"utf-8")]),(0,rT.stringToUint8Array)(`--\r
\r
`,"utf-8")],o=Gnr(n);o&&t.headers.set("Content-Length",o),t.body=await(0,jnr.concat)(n)}ew.multipartPolicyName="multipartPolicy";var Wnr=70,Knr=new Set("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789'()+,-./:=?");function Ynr(t){if(t.length>Wnr)throw new Error(`Multipart boundary "${t}" exceeds maximum length of 70 characters`);if(Array.from(t).some(e=>!Knr.has(e)))throw new Error(`Multipart boundary "${t}" contains invalid characters`)}function Qnr(){return{name:ew.multipartPolicyName,async sendRequest(t,e){var r;if(!t.multipartBody)return e(t);if(t.body)throw new Error("multipartBody and regular body cannot be set at the same time");let n=t.multipartBody.boundary,o=(r=t.headers.get("Content-Type"))!==null&&r!==void 0?r:"multipart/mixed",s=o.match(/^(multipart\/[^ ;]+)(?:; *boundary=(.+))?$/);if(!s)throw new Error(`Got multipart request body, but content-type header was not multipart: ${o}`);let[,a,c]=s;if(c&&n&&c!==n)throw new Error(`Multipart boundary was specified as ${c} in the header, but got ${n} in the request body`);return n??(n=c),n?Ynr(n):n=$nr(),t.headers.set("Content-Type",`${a}; boundary=${n}`),await znr(t,t.multipartBody.parts,n),t.multipartBody=void 0,e(t)}}}});var mse=m(tw=>{"use strict";Object.defineProperty(tw,"__esModule",{value:!0});tw.decompressResponsePolicyName=void 0;tw.decompressResponsePolicy=Znr;tw.decompressResponsePolicyName="decompressResponsePolicy";function Znr(){return{name:tw.decompressResponsePolicyName,async sendRequest(t,e){return t.method!=="HEAD"&&t.headers.set("Accept-Encoding","gzip,deflate"),e(t)}}}});var Eq=m(yq=>{"use strict";Object.defineProperty(yq,"__esModule",{value:!0});yq.delay=eir;yq.parseHeaderValueAsNumber=tir;var Jnr=DM(),Xnr="The operation was aborted.";function eir(t,e,r){return new Promise((n,o)=>{let s,a,c=()=>o(new Jnr.AbortError(r?.abortErrorMsg?r?.abortErrorMsg:Xnr)),l=()=>{r?.abortSignal&&a&&r.abortSignal.removeEventListener("abort",a)};if(a=()=>(s&&clearTimeout(s),l(),c()),r?.abortSignal&&r.abortSignal.aborted)return c();s=setTimeout(()=>{l(),n(e)},t),r?.abortSignal&&r.abortSignal.addEventListener("abort",a)})}function tir(t,e){let r=t.headers.get(e);if(!r)return;let n=Number(r);if(!Number.isNaN(n))return n}});var Sq=m(Tq=>{"use strict";Object.defineProperty(Tq,"__esModule",{value:!0});Tq.isThrottlingRetryResponse=iir;Tq.throttlingRetryStrategy=oir;var rir=Eq(),gse="Retry-After",nir=["retry-after-ms","x-ms-retry-after-ms",gse];function rWe(t){if(t&&[429,503].includes(t.status))try{for(let o of nir){let s=(0,rir.parseHeaderValueAsNumber)(t,o);if(s===0||s)return s*(o===gse?1e3:1)}let e=t.headers.get(gse);if(!e)return;let n=Date.parse(e)-Date.now();return Number.isFinite(n)?Math.max(0,n):void 0}catch{return}}function iir(t){return Number.isFinite(rWe(t))}function oir(){return{name:"throttlingRetryStrategy",retry({response:t}){let e=rWe(t);return Number.isFinite(e)?{retryAfterInMs:e}:{skipStrategy:!0}}}}});var bq=m(FM=>{"use strict";Object.defineProperty(FM,"__esModule",{value:!0});FM.exponentialRetryStrategy=uir;FM.isExponentialRetryResponse=nWe;FM.isSystemError=iWe;var sir=G0(),air=Sq(),cir=1e3,lir=1e3*64;function uir(t={}){var e,r;let n=(e=t.retryDelayInMs)!==null&&e!==void 0?e:cir,o=(r=t.maxRetryDelayInMs)!==null&&r!==void 0?r:lir,s=n;return{name:"exponentialRetryStrategy",retry({retryCount:a,response:c,responseError:l}){let u=iWe(l),d=u&&t.ignoreSystemErrors,f=nWe(c),p=f&&t.ignoreHttpStatusCodes;if(c&&((0,air.isThrottlingRetryResponse)(c)||!f)||p||d)return{skipStrategy:!0};if(l&&!u&&!f)return{errorToThrow:l};let _=s*Math.pow(2,a),g=Math.min(o,_);return s=g/2+(0,sir.getRandomIntegerInclusive)(0,g/2),{retryAfterInMs:s}}}}function nWe(t){return!!(t&&t.status!==void 0&&(t.status>=500||t.status===408)&&t.status!==501&&t.status!==505)}function iWe(t){return t?t.code==="ETIMEDOUT"||t.code==="ESOCKETTIMEDOUT"||t.code==="ECONNREFUSED"||t.code==="ECONNRESET"||t.code==="ENOENT"||t.code==="ENOTFOUND":!1}});var rw=m(_se=>{"use strict";Object.defineProperty(_se,"__esModule",{value:!0});_se.retryPolicy=mir;var dir=Eq(),fir=S7(),pir=DM(),oWe=e1(),sWe=(0,fir.createClientLogger)("core-rest-pipeline retryPolicy"),hir="retryPolicy";function mir(t,e={maxRetries:oWe.DEFAULT_RETRY_POLICY_COUNT}){let r=e.logger||sWe;return{name:hir,async sendRequest(n,o){var s,a;let c,l,u=-1;e:for(;;){u+=1,c=void 0,l=void 0;try{r.info(`Retry ${u}: Attempting to send request`,n.requestId),c=await o(n),r.info(`Retry ${u}: Received a response from request`,n.requestId)}catch(d){if(r.error(`Retry ${u}: Received an error from request`,n.requestId),l=d,!d||l.name!=="RestError")throw d;c=l.response}if(!((s=n.abortSignal)===null||s===void 0)&&s.aborted)throw r.error(`Retry ${u}: Request aborted.`),new pir.AbortError;if(u>=((a=e.maxRetries)!==null&&a!==void 0?a:oWe.DEFAULT_RETRY_POLICY_COUNT)){if(r.info(`Retry ${u}: Maximum retries reached. Returning the last received response, or throwing the last received error.`),l)throw l;if(c)return c;throw new Error("Maximum retries reached with no response or error to throw")}r.info(`Retry ${u}: Processing ${t.length} retry strategies.`);t:for(let d of t){let f=d.logger||sWe;f.info(`Retry ${u}: Processing retry strategy ${d.name}.`);let p=d.retry({retryCount:u,response:c,responseError:l});if(p.skipStrategy){f.info(`Retry ${u}: Skipped.`);continue t}let{errorToThrow:h,retryAfterInMs:_,redirectTo:g}=p;if(h)throw f.error(`Retry ${u}: Retry strategy ${d.name} throws error:`,h),h;if(_||_===0){f.info(`Retry ${u}: Retry strategy ${d.name} retries after ${_}`),await(0,dir.delay)(_,void 0,{abortSignal:n.abortSignal});continue e}if(g){f.info(`Retry ${u}: Retry strategy ${d.name} redirects to ${g}`),n.url=g;continue e}}if(l)throw r.info("None of the retry strategies could work with the received error. Throwing it."),l;if(c)return r.info("None of the retry strategies could work with the received response. Returning it."),c}}}}});var vse=m(nw=>{"use strict";Object.defineProperty(nw,"__esModule",{value:!0});nw.defaultRetryPolicyName=void 0;nw.defaultRetryPolicy=Eir;var gir=bq(),_ir=Sq(),vir=rw(),yir=e1();nw.defaultRetryPolicyName="defaultRetryPolicy";function Eir(t={}){var e;return{name:nw.defaultRetryPolicyName,sendRequest:(0,vir.retryPolicy)([(0,_ir.throttlingRetryStrategy)(),(0,gir.exponentialRetryStrategy)(t)],{maxRetries:(e=t.maxRetries)!==null&&e!==void 0?e:yir.DEFAULT_RETRY_POLICY_COUNT}).sendRequest}}});var jM=m(Ese=>{"use strict";Object.defineProperty(Ese,"__esModule",{value:!0});Ese.createHttpHeaders=Sir;function Cq(t){return t.toLowerCase()}function*Tir(t){for(let e of t.values())yield[e.name,e.value]}var yse=class{constructor(e){if(this._headersMap=new Map,e)for(let r of Object.keys(e))this.set(r,e[r])}set(e,r){this._headersMap.set(Cq(e),{name:e,value:String(r).trim()})}get(e){var r;return(r=this._headersMap.get(Cq(e)))===null||r===void 0?void 0:r.value}has(e){return this._headersMap.has(Cq(e))}delete(e){this._headersMap.delete(Cq(e))}toJSON(e={}){let r={};if(e.preserveCase)for(let n of this._headersMap.values())r[n.name]=n.value;else for(let[n,o]of this._headersMap)r[n]=o.value;return r}toString(){return JSON.stringify(this.toJSON({preserveCase:!0}))}[Symbol.iterator](){return Tir(this._headersMap)}};function Sir(t){return new yse(t)}});var Tse=m(iw=>{"use strict";Object.defineProperty(iw,"__esModule",{value:!0});iw.formDataPolicyName=void 0;iw.formDataPolicy=Cir;var cWe=G0(),aWe=jM();iw.formDataPolicyName="formDataPolicy";function bir(t){var e;let r={};for(let[n,o]of t.entries())(e=r[n])!==null&&e!==void 0||(r[n]=[]),r[n].push(o);return r}function Cir(){return{name:iw.formDataPolicyName,async sendRequest(t,e){if(cWe.isNodeLike&&typeof FormData<"u"&&t.body instanceof FormData&&(t.formData=bir(t.body),t.body=void 0),t.formData){let r=t.headers.get("Content-Type");r&&r.indexOf("application/x-www-form-urlencoded")!==-1?t.body=Air(t.formData):await xir(t.formData,t),t.formData=void 0}return e(t)}}}function Air(t){let e=new URLSearchParams;for(let[r,n]of Object.entries(t))if(Array.isArray(n))for(let o of n)e.append(r,o.toString());else e.append(r,n.toString());return e.toString()}async function xir(t,e){let r=e.headers.get("Content-Type");if(r&&!r.startsWith("multipart/form-data"))return;e.headers.set("Content-Type",r??"multipart/form-data");let n=[];for(let[o,s]of Object.entries(t))for(let a of Array.isArray(s)?s:[s])if(typeof a=="string")n.push({headers:(0,aWe.createHttpHeaders)({"Content-Disposition":`form-data; name="${o}"`}),body:(0,cWe.stringToUint8Array)(a,"utf-8")});else{if(a==null||typeof a!="object")throw new Error(`Unexpected value for key ${o}: ${a}. Value should be serialized to string first.`);{let c=a.name||"blob",l=(0,aWe.createHttpHeaders)();l.set("Content-Disposition",`form-data; name="${o}"; filename="${c}"`),l.set("Content-Type",a.type||"application/octet-stream"),n.push({headers:l,body:a})}}e.multipartBody={parts:n}}});var dWe=m(Mc=>{"use strict";var wir=Mc&&Mc.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),Iir=Mc&&Mc.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),lWe=Mc&&Mc.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&wir(e,t,r);return Iir(e,t),e};Object.defineProperty(Mc,"__esModule",{value:!0});Mc.req=Mc.json=Mc.toBuffer=void 0;var Pir=lWe(require("http")),Rir=lWe(require("https"));async function uWe(t){let e=0,r=[];for await(let n of t)e+=n.length,r.push(n);return Buffer.concat(r,e)}Mc.toBuffer=uWe;async function Oir(t){let r=(await uWe(t)).toString("utf8");try{return JSON.parse(r)}catch(n){let o=n;throw o.message+=` (input: ${r})`,o}}Mc.json=Oir;function Mir(t,e={}){let n=((typeof t=="string"?t:t.href).startsWith("https:")?Rir:Pir).request(t,e),o=new Promise((s,a)=>{n.once("response",s).once("error",a).end()});return n.then=o.then.bind(o),n}Mc.req=Mir});var bse=m(Bl=>{"use strict";var pWe=Bl&&Bl.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),Nir=Bl&&Bl.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),hWe=Bl&&Bl.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&pWe(e,t,r);return Nir(e,t),e},Lir=Bl&&Bl.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&pWe(e,t,r)};Object.defineProperty(Bl,"__esModule",{value:!0});Bl.Agent=void 0;var kir=hWe(require("net")),fWe=hWe(require("http")),Dir=require("https");Lir(dWe(),Bl);var z0=Symbol("AgentBaseInternalState"),Sse=class extends fWe.Agent{constructor(e){super(e),this[z0]={}}isSecureEndpoint(e){if(e){if(typeof e.secureEndpoint=="boolean")return e.secureEndpoint;if(typeof e.protocol=="string")return e.protocol==="https:"}let{stack:r}=new Error;return typeof r!="string"?!1:r.split(`
`).some(n=>n.indexOf("(https.js:")!==-1||n.indexOf("node:https:")!==-1)}incrementSockets(e){if(this.maxSockets===1/0&&this.maxTotalSockets===1/0)return null;this.sockets[e]||(this.sockets[e]=[]);let r=new kir.Socket({writable:!1});return this.sockets[e].push(r),this.totalSocketCount++,r}decrementSockets(e,r){if(!this.sockets[e]||r===null)return;let n=this.sockets[e],o=n.indexOf(r);o!==-1&&(n.splice(o,1),this.totalSocketCount--,n.length===0&&delete this.sockets[e])}getName(e){return this.isSecureEndpoint(e)?Dir.Agent.prototype.getName.call(this,e):super.getName(e)}createSocket(e,r,n){let o={...r,secureEndpoint:this.isSecureEndpoint(r)},s=this.getName(o),a=this.incrementSockets(s);Promise.resolve().then(()=>this.connect(e,o)).then(c=>{if(this.decrementSockets(s,a),c instanceof fWe.Agent)try{return c.addRequest(e,o)}catch(l){return n(l)}this[z0].currentSocket=c,super.createSocket(e,r,n)},c=>{this.decrementSockets(s,a),n(c)})}createConnection(){let e=this[z0].currentSocket;if(this[z0].currentSocket=void 0,!e)throw new Error("No socket was returned in the `connect()` function");return e}get defaultPort(){return this[z0].defaultPort??(this.protocol==="https:"?443:80)}set defaultPort(e){this[z0]&&(this[z0].defaultPort=e)}get protocol(){return this[z0].protocol??(this.isSecureEndpoint()?"https:":"http:")}set protocol(e){this[z0]&&(this[z0].protocol=e)}};Bl.Agent=Sse});var mWe=m(ow=>{"use strict";var Uir=ow&&ow.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ow,"__esModule",{value:!0});ow.parseProxyResponse=void 0;var qir=Uir(B5()),Aq=(0,qir.default)("https-proxy-agent:parse-proxy-response");function Fir(t){return new Promise((e,r)=>{let n=0,o=[];function s(){let d=t.read();d?u(d):t.once("readable",s)}function a(){t.removeListener("end",c),t.removeListener("error",l),t.removeListener("readable",s)}function c(){a(),Aq("onend"),r(new Error("Proxy connection ended before receiving CONNECT response"))}function l(d){a(),Aq("onerror %o",d),r(d)}function u(d){o.push(d),n+=d.length;let f=Buffer.concat(o,n),p=f.indexOf(`\r
\r
`);if(p===-1){Aq("have not received end of HTTP headers yet..."),s();return}let h=f.slice(0,p).toString("ascii").split(`\r
`),_=h.shift();if(!_)return t.destroy(),r(new Error("No header received from proxy CONNECT response"));let g=_.split(" "),v=+g[1],E=g.slice(2).join(" "),y={};for(let S of h){if(!S)continue;let b=S.indexOf(":");if(b===-1)return t.destroy(),r(new Error(`Invalid header from proxy CONNECT response: "${S}"`));let w=S.slice(0,b).toLowerCase(),P=S.slice(b+1).trimStart(),A=y[w];typeof A=="string"?y[w]=[A,P]:Array.isArray(A)?A.push(P):y[w]=P}Aq("got proxy server response: %o %o",_,y),a(),e({connect:{statusCode:v,statusText:E,headers:y},buffered:f})}t.on("error",l),t.on("end",c),s()})}ow.parseProxyResponse=Fir});var TWe=m(Bu=>{"use strict";var jir=Bu&&Bu.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),Bir=Bu&&Bu.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),yWe=Bu&&Bu.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&jir(e,t,r);return Bir(e,t),e},EWe=Bu&&Bu.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Bu,"__esModule",{value:!0});Bu.HttpsProxyAgent=void 0;var xq=yWe(require("net")),gWe=yWe(require("tls")),$ir=EWe(require("assert")),Vir=EWe(B5()),Hir=bse(),Gir=require("url"),zir=mWe(),BM=(0,Vir.default)("https-proxy-agent"),_We=t=>t.servername===void 0&&t.host&&!xq.isIP(t.host)?{...t,servername:t.host}:t,wq=class extends Hir.Agent{constructor(e,r){super(r),this.options={path:void 0},this.proxy=typeof e=="string"?new Gir.URL(e):e,this.proxyHeaders=r?.headers??{},BM("Creating new HttpsProxyAgent instance: %o",this.proxy.href);let n=(this.proxy.hostname||this.proxy.host).replace(/^\[|\]$/g,""),o=this.proxy.port?parseInt(this.proxy.port,10):this.proxy.protocol==="https:"?443:80;this.connectOpts={ALPNProtocols:["http/1.1"],...r?vWe(r,"headers"):null,host:n,port:o}}async connect(e,r){let{proxy:n}=this;if(!r.host)throw new TypeError('No "host" provided');let o;n.protocol==="https:"?(BM("Creating `tls.Socket`: %o",this.connectOpts),o=gWe.connect(_We(this.connectOpts))):(BM("Creating `net.Socket`: %o",this.connectOpts),o=xq.connect(this.connectOpts));let s=typeof this.proxyHeaders=="function"?this.proxyHeaders():{...this.proxyHeaders},a=xq.isIPv6(r.host)?`[${r.host}]`:r.host,c=`CONNECT ${a}:${r.port} HTTP/1.1\r
`;if(n.username||n.password){let p=`${decodeURIComponent(n.username)}:${decodeURIComponent(n.password)}`;s["Proxy-Authorization"]=`Basic ${Buffer.from(p).toString("base64")}`}s.Host=`${a}:${r.port}`,s["Proxy-Connection"]||(s["Proxy-Connection"]=this.keepAlive?"Keep-Alive":"close");for(let p of Object.keys(s))c+=`${p}: ${s[p]}\r
`;let l=(0,zir.parseProxyResponse)(o);o.write(`${c}\r
`);let{connect:u,buffered:d}=await l;if(e.emit("proxyConnect",u),this.emit("proxyConnect",u,e),u.statusCode===200)return e.once("socket",Wir),r.secureEndpoint?(BM("Upgrading socket connection to TLS"),gWe.connect({...vWe(_We(r),"host","path","port"),socket:o})):o;o.destroy();let f=new xq.Socket({writable:!1});return f.readable=!0,e.once("socket",p=>{BM("Replaying proxy buffer for failed request"),(0,$ir.default)(p.listenerCount("data")>0),p.push(d),p.push(null)}),f}};wq.protocols=["http","https"];Bu.HttpsProxyAgent=wq;function Wir(t){t.resume()}function vWe(t,...e){let r={},n;for(n in t)e.includes(n)||(r[n]=t[n]);return r}});var CWe=m($u=>{"use strict";var Kir=$u&&$u.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),Yir=$u&&$u.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),bWe=$u&&$u.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Kir(e,t,r);return Yir(e,t),e},Qir=$u&&$u.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty($u,"__esModule",{value:!0});$u.HttpProxyAgent=void 0;var Zir=bWe(require("net")),Jir=bWe(require("tls")),Xir=Qir(B5()),eor=require("events"),tor=bse(),SWe=require("url"),sw=(0,Xir.default)("http-proxy-agent"),Iq=class extends tor.Agent{constructor(e,r){super(r),this.proxy=typeof e=="string"?new SWe.URL(e):e,this.proxyHeaders=r?.headers??{},sw("Creating new HttpProxyAgent instance: %o",this.proxy.href);let n=(this.proxy.hostname||this.proxy.host).replace(/^\[|\]$/g,""),o=this.proxy.port?parseInt(this.proxy.port,10):this.proxy.protocol==="https:"?443:80;this.connectOpts={...r?ror(r,"headers"):null,host:n,port:o}}addRequest(e,r){e._header=null,this.setRequestProps(e,r),super.addRequest(e,r)}setRequestProps(e,r){let{proxy:n}=this,o=r.secureEndpoint?"https:":"http:",s=e.getHeader("host")||"localhost",a=`${o}//${s}`,c=new SWe.URL(e.path,a);r.port!==80&&(c.port=String(r.port)),e.path=String(c);let l=typeof this.proxyHeaders=="function"?this.proxyHeaders():{...this.proxyHeaders};if(n.username||n.password){let u=`${decodeURIComponent(n.username)}:${decodeURIComponent(n.password)}`;l["Proxy-Authorization"]=`Basic ${Buffer.from(u).toString("base64")}`}l["Proxy-Connection"]||(l["Proxy-Connection"]=this.keepAlive?"Keep-Alive":"close");for(let u of Object.keys(l)){let d=l[u];d&&e.setHeader(u,d)}}async connect(e,r){e._header=null,e.path.includes("://")||this.setRequestProps(e,r);let n,o;sw("Regenerating stored HTTP header string for request"),e._implicitHeader(),e.outputData&&e.outputData.length>0&&(sw("Patching connection write() output buffer with updated header"),n=e.outputData[0].data,o=n.indexOf(`\r
\r
`)+4,e.outputData[0].data=e._header+n.substring(o),sw("Output buffer: %o",e.outputData[0].data));let s;return this.proxy.protocol==="https:"?(sw("Creating `tls.Socket`: %o",this.connectOpts),s=Jir.connect(this.connectOpts)):(sw("Creating `net.Socket`: %o",this.connectOpts),s=Zir.connect(this.connectOpts)),await(0,eor.once)(s,"connect"),s}};Iq.protocols=["http","https"];$u.HttpProxyAgent=Iq;function ror(t,...e){let r={},n;for(n in t)e.includes(n)||(r[n]=t[n]);return r}});var Cse=m(Vu=>{"use strict";Object.defineProperty(Vu,"__esModule",{value:!0});Vu.globalNoProxyList=Vu.proxyPolicyName=void 0;Vu.loadNoProxy=PWe;Vu.getDefaultProxySettings=por;Vu.proxyPolicy=mor;var nor=TWe(),ior=CWe(),oor=eT(),sor="HTTPS_PROXY",aor="HTTP_PROXY",cor="ALL_PROXY",lor="NO_PROXY";Vu.proxyPolicyName="proxyPolicy";Vu.globalNoProxyList=[];var wWe=!1,uor=new Map;function Pq(t){if(process.env[t])return process.env[t];if(process.env[t.toLowerCase()])return process.env[t.toLowerCase()]}function IWe(){if(!process)return;let t=Pq(sor),e=Pq(cor),r=Pq(aor);return t||e||r}function dor(t,e,r){if(e.length===0)return!1;let n=new URL(t).hostname;if(r?.has(n))return r.get(n);let o=!1;for(let s of e)s[0]==="."?(n.endsWith(s)||n.length===s.length-1&&n===s.slice(1))&&(o=!0):n===s&&(o=!0);return r?.set(n,o),o}function PWe(){let t=Pq(lor);return wWe=!0,t?t.split(",").map(e=>e.trim()).filter(e=>e.length):[]}function por(t){if(!t&&(t=IWe(),!t))return;let e=new URL(t);return{host:(e.protocol?e.protocol+"//":"")+e.hostname,port:Number.parseInt(e.port||"80"),username:e.username,password:e.password}}function hor(){let t=IWe();return t?new URL(t):void 0}function AWe(t){let e;try{e=new URL(t.host)}catch{throw new Error(`Expecting a valid host string in proxy settings, but found "${t.host}".`)}return e.port=String(t.port),t.username&&(e.username=t.username),t.password&&(e.password=t.password),e}function xWe(t,e,r){if(t.agent)return;let o=new URL(t.url).protocol!=="https:";t.tlsSettings&&oor.logger.warning("TLS settings are not supported in combination with custom Proxy, certificates provided to the client will be ignored.");let s=t.headers.toJSON();o?(e.httpProxyAgent||(e.httpProxyAgent=new ior.HttpProxyAgent(r,{headers:s})),t.agent=e.httpProxyAgent):(e.httpsProxyAgent||(e.httpsProxyAgent=new nor.HttpsProxyAgent(r,{headers:s})),t.agent=e.httpsProxyAgent)}function mor(t,e){wWe||Vu.globalNoProxyList.push(...PWe());let r=t?AWe(t):hor(),n={};return{name:Vu.proxyPolicyName,async sendRequest(o,s){var a;return!o.proxySettings&&r&&!dor(o.url,(a=e?.customNoProxyList)!==null&&a!==void 0?a:Vu.globalNoProxyList,e?.customNoProxyList?void 0:uor)?xWe(o,n,r):o.proxySettings&&xWe(o,n,AWe(o.proxySettings)),s(o)}}}});var Ase=m(aw=>{"use strict";Object.defineProperty(aw,"__esModule",{value:!0});aw.setClientRequestIdPolicyName=void 0;aw.setClientRequestIdPolicy=gor;aw.setClientRequestIdPolicyName="setClientRequestIdPolicy";function gor(t="x-ms-client-request-id"){return{name:aw.setClientRequestIdPolicyName,async sendRequest(e,r){return e.headers.has(t)||e.headers.set(t,e.requestId),r(e)}}}});var xse=m(cw=>{"use strict";Object.defineProperty(cw,"__esModule",{value:!0});cw.tlsPolicyName=void 0;cw.tlsPolicy=_or;cw.tlsPolicyName="tlsPolicy";function _or(t){return{name:cw.tlsPolicyName,sendRequest:async(e,r)=>(e.tlsSettings||(e.tlsSettings=t),r(e))}}});var wse=m(rm=>{"use strict";Object.defineProperty(rm,"__esModule",{value:!0});rm.TracingContextImpl=rm.knownContextKeys=void 0;rm.createTracingContext=vor;rm.knownContextKeys={span:Symbol.for("@azure/core-tracing span"),namespace:Symbol.for("@azure/core-tracing namespace")};function vor(t={}){let e=new Rq(t.parentContext);return t.span&&(e=e.setValue(rm.knownContextKeys.span,t.span)),t.namespace&&(e=e.setValue(rm.knownContextKeys.namespace,t.namespace)),e}var Rq=class t{_contextMap;constructor(e){this._contextMap=e instanceof t?new Map(e._contextMap):new Map}setValue(e,r){let n=new t(this);return n._contextMap.set(e,r),n}getValue(e){return this._contextMap.get(e)}deleteValue(e){let r=new t(this);return r._contextMap.delete(e),r}};rm.TracingContextImpl=Rq});var RWe=m(Oq=>{"use strict";Object.defineProperty(Oq,"__esModule",{value:!0});Oq.state=void 0;Oq.state={instrumenterImplementation:void 0}});var Ise=m(lw=>{"use strict";Object.defineProperty(lw,"__esModule",{value:!0});lw.createDefaultTracingSpan=OWe;lw.createDefaultInstrumenter=MWe;lw.useInstrumenter=Eor;lw.getInstrumenter=Tor;var yor=wse(),Mq=RWe();function OWe(){return{end:()=>{},isRecording:()=>!1,recordException:()=>{},setAttribute:()=>{},setStatus:()=>{},addEvent:()=>{}}}function MWe(){return{createRequestHeaders:()=>({}),parseTraceparentHeader:()=>{},startSpan:(t,e)=>({span:OWe(),tracingContext:(0,yor.createTracingContext)({parentContext:e.tracingContext})}),withContext(t,e,...r){return e(...r)}}}function Eor(t){Mq.state.instrumenterImplementation=t}function Tor(){return Mq.state.instrumenterImplementation||(Mq.state.instrumenterImplementation=MWe()),Mq.state.instrumenterImplementation}});var NWe=m(Rse=>{"use strict";Object.defineProperty(Rse,"__esModule",{value:!0});Rse.createTracingClient=Sor;var Nq=Ise(),Pse=wse();function Sor(t){let{namespace:e,packageName:r,packageVersion:n}=t;function o(u,d,f){let p=(0,Nq.getInstrumenter)().startSpan(u,{...f,packageName:r,packageVersion:n,tracingContext:d?.tracingOptions?.tracingContext}),h=p.tracingContext,_=p.span;h.getValue(Pse.knownContextKeys.namespace)||(h=h.setValue(Pse.knownContextKeys.namespace,e)),_.setAttribute("az.namespace",h.getValue(Pse.knownContextKeys.namespace));let g=Object.assign({},d,{tracingOptions:{...d?.tracingOptions,tracingContext:h}});return{span:_,updatedOptions:g}}async function s(u,d,f,p){let{span:h,updatedOptions:_}=o(u,d,p);try{let g=await a(_.tracingOptions.tracingContext,()=>Promise.resolve(f(_,h)));return h.setStatus({status:"success"}),g}catch(g){throw h.setStatus({status:"error",error:g}),g}finally{h.end()}}function a(u,d,...f){return(0,Nq.getInstrumenter)().withContext(u,d,...f)}function c(u){return(0,Nq.getInstrumenter)().parseTraceparentHeader(u)}function l(u){return(0,Nq.getInstrumenter)().createRequestHeaders(u)}return{startSpan:o,withSpan:s,withContext:a,parseTraceparentHeader:c,createRequestHeaders:l}}});var LWe=m(uw=>{"use strict";Object.defineProperty(uw,"__esModule",{value:!0});uw.createTracingClient=uw.useInstrumenter=void 0;var bor=Ise();Object.defineProperty(uw,"useInstrumenter",{enumerable:!0,get:function(){return bor.useInstrumenter}});var Cor=NWe();Object.defineProperty(uw,"createTracingClient",{enumerable:!0,get:function(){return Cor.createTracingClient}})});var kWe=m(Lq=>{"use strict";Object.defineProperty(Lq,"__esModule",{value:!0});Lq.custom=void 0;var Aor=require("node:util");Lq.custom=Aor.inspect.custom});var kq=m($M=>{"use strict";Object.defineProperty($M,"__esModule",{value:!0});$M.RestError=void 0;$M.isRestError=Ror;var xor=G0(),wor=kWe(),Ior=hq(),Por=new Ior.Sanitizer,dw=class t extends Error{constructor(e,r={}){super(e),this.name="RestError",this.code=r.code,this.statusCode=r.statusCode,Object.defineProperty(this,"request",{value:r.request,enumerable:!1}),Object.defineProperty(this,"response",{value:r.response,enumerable:!1}),Object.setPrototypeOf(this,t.prototype)}[wor.custom](){return`RestError: ${this.message} 
 ${Por.sanitize(Object.assign(Object.assign({},this),{request:this.request,response:this.response}))}`}};$M.RestError=dw;dw.REQUEST_SEND_ERROR="REQUEST_SEND_ERROR";dw.PARSE_ERROR="PARSE_ERROR";function Ror(t){return t instanceof dw?!0:(0,xor.isError)(t)&&t.name==="RestError"}});var Ose=m(fw=>{"use strict";Object.defineProperty(fw,"__esModule",{value:!0});fw.tracingPolicyName=void 0;fw.tracingPolicy=Dor;var Oor=LWe(),Mor=e1(),Nor=lse(),Dq=eT(),VM=G0(),Lor=kq(),kor=hq();fw.tracingPolicyName="tracingPolicy";function Dor(t={}){let e=(0,Nor.getUserAgentValue)(t.userAgentPrefix),r=new kor.Sanitizer({additionalAllowedQueryParameters:t.additionalAllowedQueryParameters}),n=Uor();return{name:fw.tracingPolicyName,async sendRequest(o,s){var a,c;if(!n||!(!((a=o.tracingOptions)===null||a===void 0)&&a.tracingContext))return s(o);let l=await e,u={"http.url":r.sanitizeUrl(o.url),"http.method":o.method,"http.user_agent":l,requestId:o.requestId};l&&(u["http.user_agent"]=l);let{span:d,tracingContext:f}=(c=qor(n,o,u))!==null&&c!==void 0?c:{};if(!d||!f)return s(o);try{let p=await n.withContext(f,s,o);return jor(d,p),p}catch(p){throw For(d,p),p}}}}function Uor(){try{return(0,Oor.createTracingClient)({namespace:"",packageName:"@azure/core-rest-pipeline",packageVersion:Mor.SDK_VERSION})}catch(t){Dq.logger.warning(`Error when creating the TracingClient: ${(0,VM.getErrorMessage)(t)}`);return}}function qor(t,e,r){try{let{span:n,updatedOptions:o}=t.startSpan(`HTTP ${e.method}`,{tracingOptions:e.tracingOptions},{spanKind:"client",spanAttributes:r});if(!n.isRecording()){n.end();return}let s=t.createRequestHeaders(o.tracingOptions.tracingContext);for(let[a,c]of Object.entries(s))e.headers.set(a,c);return{span:n,tracingContext:o.tracingOptions.tracingContext}}catch(n){Dq.logger.warning(`Skipping creating a tracing span due to an error: ${(0,VM.getErrorMessage)(n)}`);return}}function For(t,e){try{t.setStatus({status:"error",error:(0,VM.isError)(e)?e:void 0}),(0,Lor.isRestError)(e)&&e.statusCode&&t.setAttribute("http.status_code",e.statusCode),t.end()}catch(r){Dq.logger.warning(`Skipping tracing span processing due to an error: ${(0,VM.getErrorMessage)(r)}`)}}function jor(t,e){try{t.setAttribute("http.status_code",e.status);let r=e.headers.get("x-ms-request-id");r&&t.setAttribute("serviceRequestId",r),t.setStatus({status:"success"}),t.end()}catch(r){Dq.logger.warning(`Skipping tracing span processing due to an error: ${(0,VM.getErrorMessage)(r)}`)}}});var qWe=m(Mse=>{"use strict";Object.defineProperty(Mse,"__esModule",{value:!0});Mse.createPipelineFromOptions=Jor;var Bor=ose(),$or=Boe(),Vor=sse(),Hor=use(),DWe=hse(),Gor=mse(),zor=vse(),Wor=Tse(),UWe=G0(),Kor=Cse(),Yor=Ase(),Qor=xse(),Zor=Ose();function Jor(t){var e;let r=(0,$or.createEmptyPipeline)();return UWe.isNodeLike&&(t.tlsOptions&&r.addPolicy((0,Qor.tlsPolicy)(t.tlsOptions)),r.addPolicy((0,Kor.proxyPolicy)(t.proxyOptions)),r.addPolicy((0,Gor.decompressResponsePolicy)())),r.addPolicy((0,Wor.formDataPolicy)(),{beforePolicies:[DWe.multipartPolicyName]}),r.addPolicy((0,Hor.userAgentPolicy)(t.userAgentOptions)),r.addPolicy((0,Yor.setClientRequestIdPolicy)((e=t.telemetryOptions)===null||e===void 0?void 0:e.clientRequestIdHeaderName)),r.addPolicy((0,DWe.multipartPolicy)(),{afterPhase:"Deserialize"}),r.addPolicy((0,zor.defaultRetryPolicy)(t.retryOptions),{phase:"Retry"}),r.addPolicy((0,Zor.tracingPolicy)(Object.assign(Object.assign({},t.userAgentOptions),t.loggingOptions)),{afterPhase:"Retry"}),UWe.isNodeLike&&r.addPolicy((0,Vor.redirectPolicy)(t.redirectOptions),{afterPhase:"Retry"}),r.addPolicy((0,Bor.logPolicy)(t.loggingOptions),{afterPhase:"Sign"}),r}});var HWe=m(qq=>{"use strict";Object.defineProperty(qq,"__esModule",{value:!0});qq.getBodyLength=VWe;qq.createNodeHttpClient=osr;var Dse=(N_(),cn(M_)),Nse=Dse.__importStar(require("node:http")),Lse=Dse.__importStar(require("node:https")),FWe=Dse.__importStar(require("node:zlib")),Xor=require("node:stream"),jWe=DM(),esr=jM(),zM=kq(),HM=eT(),tsr={};function GM(t){return t&&typeof t.pipe=="function"}function BWe(t){return new Promise(e=>{t.on("close",e),t.on("end",e),t.on("error",e)})}function $We(t){return t&&typeof t.byteLength=="number"}var Uq=class extends Xor.Transform{_transform(e,r,n){this.push(e),this.loadedBytes+=e.length;try{this.progressCallback({loadedBytes:this.loadedBytes}),n()}catch(o){n(o)}}constructor(e){super(),this.loadedBytes=0,this.progressCallback=e}},kse=class{constructor(){this.cachedHttpsAgents=new WeakMap}async sendRequest(e){var r,n,o;let s=new AbortController,a;if(e.abortSignal){if(e.abortSignal.aborted)throw new jWe.AbortError("The operation was aborted.");a=f=>{f.type==="abort"&&s.abort()},e.abortSignal.addEventListener("abort",a)}e.timeout>0&&setTimeout(()=>{s.abort()},e.timeout);let c=e.headers.get("Accept-Encoding"),l=c?.includes("gzip")||c?.includes("deflate"),u=typeof e.body=="function"?e.body():e.body;if(u&&!e.headers.has("Content-Length")){let f=VWe(u);f!==null&&e.headers.set("Content-Length",f)}let d;try{if(u&&e.onUploadProgress){let v=e.onUploadProgress,E=new Uq(v);E.on("error",y=>{HM.logger.error("Error in upload progress",y)}),GM(u)?u.pipe(E):E.end(u),u=E}let f=await this.makeRequest(e,s,u),p=rsr(f),_={status:(r=f.statusCode)!==null&&r!==void 0?r:0,headers:p,request:e};if(e.method==="HEAD")return f.resume(),_;d=l?nsr(f,p):f;let g=e.onDownloadProgress;if(g){let v=new Uq(g);v.on("error",E=>{HM.logger.error("Error in download progress",E)}),d.pipe(v),d=v}return!((n=e.streamResponseStatusCodes)===null||n===void 0)&&n.has(Number.POSITIVE_INFINITY)||!((o=e.streamResponseStatusCodes)===null||o===void 0)&&o.has(_.status)?_.readableStreamBody=d:_.bodyAsText=await isr(d),_}finally{if(e.abortSignal&&a){let f=Promise.resolve();GM(u)&&(f=BWe(u));let p=Promise.resolve();GM(d)&&(p=BWe(d)),Promise.all([f,p]).then(()=>{var h;a&&((h=e.abortSignal)===null||h===void 0||h.removeEventListener("abort",a))}).catch(h=>{HM.logger.warning("Error when cleaning up abortListener on httpRequest",h)})}}}makeRequest(e,r,n){var o;let s=new URL(e.url),a=s.protocol!=="https:";if(a&&!e.allowInsecureConnection)throw new Error(`Cannot connect to ${e.url} while allowInsecureConnection is false.`);let l={agent:(o=e.agent)!==null&&o!==void 0?o:this.getOrCreateAgent(e,a),hostname:s.hostname,path:`${s.pathname}${s.search}`,port:s.port,method:e.method,headers:e.headers.toJSON({preserveCase:!0})};return new Promise((u,d)=>{let f=a?Nse.request(l,u):Lse.request(l,u);f.once("error",p=>{var h;d(new zM.RestError(p.message,{code:(h=p.code)!==null&&h!==void 0?h:zM.RestError.REQUEST_SEND_ERROR,request:e}))}),r.signal.addEventListener("abort",()=>{let p=new jWe.AbortError("The operation was aborted.");f.destroy(p),d(p)}),n&&GM(n)?n.pipe(f):n?typeof n=="string"||Buffer.isBuffer(n)?f.end(n):$We(n)?f.end(ArrayBuffer.isView(n)?Buffer.from(n.buffer):Buffer.from(n)):(HM.logger.error("Unrecognized body type",n),d(new zM.RestError("Unrecognized body type"))):f.end()})}getOrCreateAgent(e,r){var n;let o=e.disableKeepAlive;if(r)return o?Nse.globalAgent:(this.cachedHttpAgent||(this.cachedHttpAgent=new Nse.Agent({keepAlive:!0})),this.cachedHttpAgent);{if(o&&!e.tlsSettings)return Lse.globalAgent;let s=(n=e.tlsSettings)!==null&&n!==void 0?n:tsr,a=this.cachedHttpsAgents.get(s);return a&&a.options.keepAlive===!o||(HM.logger.info("No cached TLS Agent exist, creating a new Agent"),a=new Lse.Agent(Object.assign({keepAlive:!o},s)),this.cachedHttpsAgents.set(s,a)),a}}};function rsr(t){let e=(0,esr.createHttpHeaders)();for(let r of Object.keys(t.headers)){let n=t.headers[r];Array.isArray(n)?n.length>0&&e.set(r,n[0]):n&&e.set(r,n)}return e}function nsr(t,e){let r=e.get("Content-Encoding");if(r==="gzip"){let n=FWe.createGunzip();return t.pipe(n),n}else if(r==="deflate"){let n=FWe.createInflate();return t.pipe(n),n}return t}function isr(t){return new Promise((e,r)=>{let n=[];t.on("data",o=>{Buffer.isBuffer(o)?n.push(o):n.push(Buffer.from(o))}),t.on("end",()=>{e(Buffer.concat(n).toString("utf8"))}),t.on("error",o=>{o&&o?.name==="AbortError"?r(o):r(new zM.RestError(`Error reading response as text: ${o.message}`,{code:zM.RestError.PARSE_ERROR}))})})}function VWe(t){return t?Buffer.isBuffer(t)?t.length:GM(t)?null:$We(t)?t.byteLength:typeof t=="string"?Buffer.from(t).length:null:0}function osr(){return new kse}});var GWe=m(Use=>{"use strict";Object.defineProperty(Use,"__esModule",{value:!0});Use.createDefaultHttpClient=asr;var ssr=HWe();function asr(){return(0,ssr.createNodeHttpClient)()}});var zWe=m(Fse=>{"use strict";Object.defineProperty(Fse,"__esModule",{value:!0});Fse.createPipelineRequest=usr;var csr=jM(),lsr=G0(),qse=class{constructor(e){var r,n,o,s,a,c,l;this.url=e.url,this.body=e.body,this.headers=(r=e.headers)!==null&&r!==void 0?r:(0,csr.createHttpHeaders)(),this.method=(n=e.method)!==null&&n!==void 0?n:"GET",this.timeout=(o=e.timeout)!==null&&o!==void 0?o:0,this.multipartBody=e.multipartBody,this.formData=e.formData,this.disableKeepAlive=(s=e.disableKeepAlive)!==null&&s!==void 0?s:!1,this.proxySettings=e.proxySettings,this.streamResponseStatusCodes=e.streamResponseStatusCodes,this.withCredentials=(a=e.withCredentials)!==null&&a!==void 0?a:!1,this.abortSignal=e.abortSignal,this.tracingOptions=e.tracingOptions,this.onUploadProgress=e.onUploadProgress,this.onDownloadProgress=e.onDownloadProgress,this.requestId=e.requestId||(0,lsr.randomUUID)(),this.allowInsecureConnection=(c=e.allowInsecureConnection)!==null&&c!==void 0?c:!1,this.enableBrowserStreams=(l=e.enableBrowserStreams)!==null&&l!==void 0?l:!1}};function usr(t){return new qse(t)}});var WWe=m(WM=>{"use strict";Object.defineProperty(WM,"__esModule",{value:!0});WM.exponentialRetryPolicyName=void 0;WM.exponentialRetryPolicy=hsr;var dsr=bq(),fsr=rw(),psr=e1();WM.exponentialRetryPolicyName="exponentialRetryPolicy";function hsr(t={}){var e;return(0,fsr.retryPolicy)([(0,dsr.exponentialRetryStrategy)(Object.assign(Object.assign({},t),{ignoreSystemErrors:!0}))],{maxRetries:(e=t.maxRetries)!==null&&e!==void 0?e:psr.DEFAULT_RETRY_POLICY_COUNT})}});var KWe=m(pw=>{"use strict";Object.defineProperty(pw,"__esModule",{value:!0});pw.systemErrorRetryPolicyName=void 0;pw.systemErrorRetryPolicy=vsr;var msr=bq(),gsr=rw(),_sr=e1();pw.systemErrorRetryPolicyName="systemErrorRetryPolicy";function vsr(t={}){var e;return{name:pw.systemErrorRetryPolicyName,sendRequest:(0,gsr.retryPolicy)([(0,msr.exponentialRetryStrategy)(Object.assign(Object.assign({},t),{ignoreHttpStatusCodes:!0}))],{maxRetries:(e=t.maxRetries)!==null&&e!==void 0?e:_sr.DEFAULT_RETRY_POLICY_COUNT}).sendRequest}}});var YWe=m(hw=>{"use strict";Object.defineProperty(hw,"__esModule",{value:!0});hw.throttlingRetryPolicyName=void 0;hw.throttlingRetryPolicy=Ssr;var ysr=Sq(),Esr=rw(),Tsr=e1();hw.throttlingRetryPolicyName="throttlingRetryPolicy";function Ssr(t={}){var e;return{name:hw.throttlingRetryPolicyName,sendRequest:(0,Esr.retryPolicy)([(0,ysr.throttlingRetryStrategy)()],{maxRetries:(e=t.maxRetries)!==null&&e!==void 0?e:Tsr.DEFAULT_RETRY_POLICY_COUNT}).sendRequest}}});var jse=m(mw=>{"use strict";Object.defineProperty(mw,"__esModule",{value:!0});mw.DEFAULT_CYCLER_OPTIONS=void 0;mw.createTokenCycler=Asr;var bsr=Eq();mw.DEFAULT_CYCLER_OPTIONS={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:1e3*60*2};async function Csr(t,e,r){async function n(){if(Date.now()<r)try{return await t()}catch{return null}else{let s=await t();if(s===null)throw new Error("Failed to refresh access token.");return s}}let o=await n();for(;o===null;)await(0,bsr.delay)(e),o=await n();return o}function Asr(t,e){let r=null,n=null,o,s=Object.assign(Object.assign({},mw.DEFAULT_CYCLER_OPTIONS),e),a={get isRefreshing(){return r!==null},get shouldRefresh(){var l;return!a.isRefreshing&&((l=n?.expiresOnTimestamp)!==null&&l!==void 0?l:0)-s.refreshWindowInMs<Date.now()},get mustRefresh(){return n===null||n.expiresOnTimestamp-s.forcedRefreshWindowInMs<Date.now()}};function c(l,u){var d;return a.isRefreshing||(r=Csr(()=>t.getToken(l,u),s.retryIntervalInMs,(d=n?.expiresOnTimestamp)!==null&&d!==void 0?d:Date.now()).then(p=>(r=null,n=p,o=u.tenantId,n)).catch(p=>{throw r=null,n=null,o=void 0,p})),r}return async(l,u)=>{let d=!!u.claims,f=o!==u.tenantId;return d&&(n=null),f||d||a.mustRefresh?c(l,u):(a.shouldRefresh&&c(l,u),n)}}});var QWe=m(gw=>{"use strict";Object.defineProperty(gw,"__esModule",{value:!0});gw.bearerTokenAuthenticationPolicyName=void 0;gw.bearerTokenAuthenticationPolicy=Rsr;var xsr=jse(),wsr=eT();gw.bearerTokenAuthenticationPolicyName="bearerTokenAuthenticationPolicy";async function Isr(t){let{scopes:e,getAccessToken:r,request:n}=t,o={abortSignal:n.abortSignal,tracingOptions:n.tracingOptions},s=await r(e,o);s&&t.request.headers.set("Authorization",`Bearer ${s.token}`)}function Psr(t){let e=t.headers.get("WWW-Authenticate");if(t.status===401&&e)return e}function Rsr(t){var e;let{credential:r,scopes:n,challengeCallbacks:o}=t,s=t.logger||wsr.logger,a=Object.assign({authorizeRequest:(e=o?.authorizeRequest)!==null&&e!==void 0?e:Isr,authorizeRequestOnChallenge:o?.authorizeRequestOnChallenge},o),c=r?(0,xsr.createTokenCycler)(r):()=>Promise.resolve(null);return{name:gw.bearerTokenAuthenticationPolicyName,async sendRequest(l,u){if(!l.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.");await a.authorizeRequest({scopes:Array.isArray(n)?n:[n],request:l,getAccessToken:c,logger:s});let d,f;try{d=await u(l)}catch(p){f=p,d=p.response}if(a.authorizeRequestOnChallenge&&d?.status===401&&Psr(d)&&await a.authorizeRequestOnChallenge({scopes:Array.isArray(n)?n:[n],request:l,response:d,getAccessToken:c,logger:s}))return u(l);if(f)throw f;return d}}}});var ZWe=m(_w=>{"use strict";Object.defineProperty(_w,"__esModule",{value:!0});_w.ndJsonPolicyName=void 0;_w.ndJsonPolicy=Osr;_w.ndJsonPolicyName="ndJsonPolicy";function Osr(){return{name:_w.ndJsonPolicyName,async sendRequest(t,e){if(typeof t.body=="string"&&t.body.startsWith("[")){let r=JSON.parse(t.body);Array.isArray(r)&&(t.body=r.map(n=>JSON.stringify(n)+`
`).join(""))}return e(t)}}}});var XWe=m(nT=>{"use strict";Object.defineProperty(nT,"__esModule",{value:!0});nT.auxiliaryAuthenticationHeaderPolicyName=void 0;nT.auxiliaryAuthenticationHeaderPolicy=ksr;var Msr=jse(),Nsr=eT();nT.auxiliaryAuthenticationHeaderPolicyName="auxiliaryAuthenticationHeaderPolicy";var JWe="x-ms-authorization-auxiliary";async function Lsr(t){var e,r;let{scopes:n,getAccessToken:o,request:s}=t,a={abortSignal:s.abortSignal,tracingOptions:s.tracingOptions};return(r=(e=await o(n,a))===null||e===void 0?void 0:e.token)!==null&&r!==void 0?r:""}function ksr(t){let{credentials:e,scopes:r}=t,n=t.logger||Nsr.logger,o=new WeakMap;return{name:nT.auxiliaryAuthenticationHeaderPolicyName,async sendRequest(s,a){if(!s.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication for auxiliary header is not permitted for non-TLS protected (non-https) URLs.");if(!e||e.length===0)return n.info(`${nT.auxiliaryAuthenticationHeaderPolicyName} header will not be set due to empty credentials.`),a(s);let c=[];for(let u of e){let d=o.get(u);d||(d=(0,Msr.createTokenCycler)(u),o.set(u,d)),c.push(Lsr({scopes:Array.isArray(r)?r:[r],request:s,getAccessToken:d,logger:n}))}let l=(await Promise.all(c)).filter(u=>!!u);return l.length===0?(n.warning(`None of the auxiliary tokens are valid. ${JWe} header will not be set.`),a(s)):(s.headers.set(JWe,l.map(u=>`Bearer ${u}`).join(", ")),a(s))}}}});var _Ke=m(we=>{"use strict";Object.defineProperty(we,"__esModule",{value:!0});we.createFileFromStream=we.createFile=we.auxiliaryAuthenticationHeaderPolicyName=we.auxiliaryAuthenticationHeaderPolicy=we.ndJsonPolicyName=we.ndJsonPolicy=we.bearerTokenAuthenticationPolicyName=we.bearerTokenAuthenticationPolicy=we.formDataPolicyName=we.formDataPolicy=we.tlsPolicyName=we.tlsPolicy=we.userAgentPolicyName=we.userAgentPolicy=we.defaultRetryPolicy=we.tracingPolicyName=we.tracingPolicy=we.retryPolicy=we.throttlingRetryPolicyName=we.throttlingRetryPolicy=we.systemErrorRetryPolicyName=we.systemErrorRetryPolicy=we.redirectPolicyName=we.redirectPolicy=we.getDefaultProxySettings=we.proxyPolicyName=we.proxyPolicy=we.multipartPolicyName=we.multipartPolicy=we.logPolicyName=we.logPolicy=we.setClientRequestIdPolicyName=we.setClientRequestIdPolicy=we.exponentialRetryPolicyName=we.exponentialRetryPolicy=we.decompressResponsePolicyName=we.decompressResponsePolicy=we.isRestError=we.RestError=we.createPipelineRequest=we.createHttpHeaders=we.createDefaultHttpClient=we.createPipelineFromOptions=we.createEmptyPipeline=void 0;var Dsr=Boe();Object.defineProperty(we,"createEmptyPipeline",{enumerable:!0,get:function(){return Dsr.createEmptyPipeline}});var Usr=qWe();Object.defineProperty(we,"createPipelineFromOptions",{enumerable:!0,get:function(){return Usr.createPipelineFromOptions}});var qsr=GWe();Object.defineProperty(we,"createDefaultHttpClient",{enumerable:!0,get:function(){return qsr.createDefaultHttpClient}});var Fsr=jM();Object.defineProperty(we,"createHttpHeaders",{enumerable:!0,get:function(){return Fsr.createHttpHeaders}});var jsr=zWe();Object.defineProperty(we,"createPipelineRequest",{enumerable:!0,get:function(){return jsr.createPipelineRequest}});var eKe=kq();Object.defineProperty(we,"RestError",{enumerable:!0,get:function(){return eKe.RestError}});Object.defineProperty(we,"isRestError",{enumerable:!0,get:function(){return eKe.isRestError}});var tKe=mse();Object.defineProperty(we,"decompressResponsePolicy",{enumerable:!0,get:function(){return tKe.decompressResponsePolicy}});Object.defineProperty(we,"decompressResponsePolicyName",{enumerable:!0,get:function(){return tKe.decompressResponsePolicyName}});var rKe=WWe();Object.defineProperty(we,"exponentialRetryPolicy",{enumerable:!0,get:function(){return rKe.exponentialRetryPolicy}});Object.defineProperty(we,"exponentialRetryPolicyName",{enumerable:!0,get:function(){return rKe.exponentialRetryPolicyName}});var nKe=Ase();Object.defineProperty(we,"setClientRequestIdPolicy",{enumerable:!0,get:function(){return nKe.setClientRequestIdPolicy}});Object.defineProperty(we,"setClientRequestIdPolicyName",{enumerable:!0,get:function(){return nKe.setClientRequestIdPolicyName}});var iKe=ose();Object.defineProperty(we,"logPolicy",{enumerable:!0,get:function(){return iKe.logPolicy}});Object.defineProperty(we,"logPolicyName",{enumerable:!0,get:function(){return iKe.logPolicyName}});var oKe=hse();Object.defineProperty(we,"multipartPolicy",{enumerable:!0,get:function(){return oKe.multipartPolicy}});Object.defineProperty(we,"multipartPolicyName",{enumerable:!0,get:function(){return oKe.multipartPolicyName}});var Bse=Cse();Object.defineProperty(we,"proxyPolicy",{enumerable:!0,get:function(){return Bse.proxyPolicy}});Object.defineProperty(we,"proxyPolicyName",{enumerable:!0,get:function(){return Bse.proxyPolicyName}});Object.defineProperty(we,"getDefaultProxySettings",{enumerable:!0,get:function(){return Bse.getDefaultProxySettings}});var sKe=sse();Object.defineProperty(we,"redirectPolicy",{enumerable:!0,get:function(){return sKe.redirectPolicy}});Object.defineProperty(we,"redirectPolicyName",{enumerable:!0,get:function(){return sKe.redirectPolicyName}});var aKe=KWe();Object.defineProperty(we,"systemErrorRetryPolicy",{enumerable:!0,get:function(){return aKe.systemErrorRetryPolicy}});Object.defineProperty(we,"systemErrorRetryPolicyName",{enumerable:!0,get:function(){return aKe.systemErrorRetryPolicyName}});var cKe=YWe();Object.defineProperty(we,"throttlingRetryPolicy",{enumerable:!0,get:function(){return cKe.throttlingRetryPolicy}});Object.defineProperty(we,"throttlingRetryPolicyName",{enumerable:!0,get:function(){return cKe.throttlingRetryPolicyName}});var Bsr=rw();Object.defineProperty(we,"retryPolicy",{enumerable:!0,get:function(){return Bsr.retryPolicy}});var lKe=Ose();Object.defineProperty(we,"tracingPolicy",{enumerable:!0,get:function(){return lKe.tracingPolicy}});Object.defineProperty(we,"tracingPolicyName",{enumerable:!0,get:function(){return lKe.tracingPolicyName}});var $sr=vse();Object.defineProperty(we,"defaultRetryPolicy",{enumerable:!0,get:function(){return $sr.defaultRetryPolicy}});var uKe=use();Object.defineProperty(we,"userAgentPolicy",{enumerable:!0,get:function(){return uKe.userAgentPolicy}});Object.defineProperty(we,"userAgentPolicyName",{enumerable:!0,get:function(){return uKe.userAgentPolicyName}});var dKe=xse();Object.defineProperty(we,"tlsPolicy",{enumerable:!0,get:function(){return dKe.tlsPolicy}});Object.defineProperty(we,"tlsPolicyName",{enumerable:!0,get:function(){return dKe.tlsPolicyName}});var fKe=Tse();Object.defineProperty(we,"formDataPolicy",{enumerable:!0,get:function(){return fKe.formDataPolicy}});Object.defineProperty(we,"formDataPolicyName",{enumerable:!0,get:function(){return fKe.formDataPolicyName}});var pKe=QWe();Object.defineProperty(we,"bearerTokenAuthenticationPolicy",{enumerable:!0,get:function(){return pKe.bearerTokenAuthenticationPolicy}});Object.defineProperty(we,"bearerTokenAuthenticationPolicyName",{enumerable:!0,get:function(){return pKe.bearerTokenAuthenticationPolicyName}});var hKe=ZWe();Object.defineProperty(we,"ndJsonPolicy",{enumerable:!0,get:function(){return hKe.ndJsonPolicy}});Object.defineProperty(we,"ndJsonPolicyName",{enumerable:!0,get:function(){return hKe.ndJsonPolicyName}});var mKe=XWe();Object.defineProperty(we,"auxiliaryAuthenticationHeaderPolicy",{enumerable:!0,get:function(){return mKe.auxiliaryAuthenticationHeaderPolicy}});Object.defineProperty(we,"auxiliaryAuthenticationHeaderPolicyName",{enumerable:!0,get:function(){return mKe.auxiliaryAuthenticationHeaderPolicyName}});var gKe=dse();Object.defineProperty(we,"createFile",{enumerable:!0,get:function(){return gKe.createFile}});Object.defineProperty(we,"createFileFromStream",{enumerable:!0,get:function(){return gKe.createFileFromStream}})});var yKe=m((YM,vKe)=>{"use strict";var Vsr=YM&&YM.__awaiter||function(t,e,r,n){function o(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function c(d){try{u(n.next(d))}catch(f){a(f)}}function l(d){try{u(n.throw(d))}catch(f){a(f)}}function u(d){d.done?s(d.value):o(d.value).then(c,l)}u((n=n.apply(t,e||[])).next())})},Hsr=YM&&YM.__generator||function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,o,s,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(u){return function(d){return l([u,d])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(r=0)),r;)try{if(n=1,o&&(s=u[0]&2?o.return:u[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,u[1])).done)return s;switch(o=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,o=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],o=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Gsr=qn(),zsr="https://monitor.azure.com//.default",KM;try{KM=_Ke()}catch{Gsr.warn("Cannot load @azure/core-auth package. This package is required for AAD token authentication. It's likely that your node.js version is not supported by the JS Azure SDK.")}function Wsr(t){return null}var Ksr=(function(){function t(e,r){if(KM){var n=r?[r]:[zsr];this._azureTokenPolicy=KM.bearerTokenAuthenticationPolicy({credential:e,scopes:n})}}return t.prototype.addAuthorizationHeader=function(e){return Vsr(this,void 0,void 0,function(){var r,n;return Hsr(this,function(o){switch(o.label){case 0:return KM?(r="authorization",n=KM.createPipelineRequest({url:"https://"}),[4,this._azureTokenPolicy.sendRequest(n,Wsr)]):[3,2];case 1:o.sent(),e.headers[r]=n.headers.get(r),o.label=2;case 2:return[2]}})})},t})();vKe.exports=Ksr});var TKe=m((T3n,EKe)=>{"use strict";var Ysr=qn(),Qsr=Ss(),Zsr=(function(){function t(e,r,n,o){this._buffer=[],this._lastSend=0,this._isDisabled=e,this._getBatchSize=r,this._getBatchIntervalMs=n,this._sender=o}return t.prototype.setUseDiskRetryCaching=function(e,r,n){this._sender.setDiskRetryMode(e,r,n)},t.prototype.send=function(e){var r=this;if(!this._isDisabled()){if(!e){Ysr.warn("Cannot send null/undefined telemetry");return}if(this._buffer.push(e),this._buffer.length>=this._getBatchSize()){this.triggerSend(!1);return}!this._timeoutHandle&&this._buffer.length>0&&(this._timeoutHandle=setTimeout(function(){r._timeoutHandle=null,r.triggerSend(!1)},this._getBatchIntervalMs()))}},t.prototype.triggerSend=function(e,r){var n=this._buffer.length<1;n||(e||Qsr.isNodeExit?(this._sender.saveOnCrash(this._buffer),typeof r=="function"&&r("data saved on crash")):this._sender.send(this._buffer,r)),this._lastSend=+new Date,this._buffer=[],clearTimeout(this._timeoutHandle),this._timeoutHandle=null,n&&typeof r=="function"&&r("no data to send")},t})();EKe.exports=Zsr});var SKe=m($se=>{"use strict";Object.defineProperty($se,"__esModule",{value:!0});$se.azureRoleEnvironmentTelemetryProcessor=Jsr;function Jsr(t,e){}});var AKe=m(Fq=>{"use strict";Object.defineProperty(Fq,"__esModule",{value:!0});Fq.samplingTelemetryProcessor=Xsr;Fq.getSamplingHashCode=CKe;var bKe=sa();function Xsr(t,e){var r=t.sampleRate,n=!1;return r==null||r>=100||t.data&&bKe.TelemetryType.Metric===bKe.baseTypeToTelemetryType(t.data.baseType)?!0:(e.correlationContext&&e.correlationContext.operation?n=CKe(e.correlationContext.operation.id)<r:n=Math.random()*100<r,n)}function CKe(t){var e=-2147483648,r=2147483647,n=5381;if(!t)return 0;for(;t.length<8;)t=t+t;for(var o=0;o<t.length;o++)n=((n<<5)+n|0)+t.charCodeAt(o)|0;return n=n<=e?r:Math.abs(n),n/r*100}});var xKe=m(nm=>{"use strict";var ear=nm&&nm.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),tar=nm&&nm.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),rar=nm&&nm.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&ear(e,t,r);return tar(e,t),e};Object.defineProperty(nm,"__esModule",{value:!0});nm.performanceMetricsTelemetryProcessor=nar;var Vse=zU(),Hse=rar(sa());function nar(t,e){switch(e&&e.addDocument(t),t.data.baseType){case Hse.TelemetryTypeString.Exception:Vse.countException();break;case Hse.TelemetryTypeString.Request:var r=t.data.baseData;Vse.countRequest(r.duration,r.success);break;case Hse.TelemetryTypeString.Dependency:var n=t.data.baseData;Vse.countDependency(n.duration,n.success);break}return!0}});var wKe=m(Kd=>{"use strict";var W0=Kd&&Kd.__assign||function(){return W0=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},W0.apply(this,arguments)},iar=Kd&&Kd.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),oar=Kd&&Kd.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),sar=Kd&&Kd.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&iar(e,t,r);return oar(e,t),e};Object.defineProperty(Kd,"__esModule",{value:!0});Kd.preAggregatedMetricsTelemetryProcessor=car;var aar=sa(),QM=_oe(),jq=sar(sa());function car(t,e){if(QM.isEnabled())switch(t.data.baseType){case jq.TelemetryTypeString.Exception:var r=t.data.baseData;r.properties=W0(W0({},r.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Exceptions', Ver:'1.1')"});var n={cloudRoleInstance:t.tags[e.keys.cloudRoleInstance],cloudRoleName:t.tags[e.keys.cloudRole]};QM.countException(n);break;case jq.TelemetryTypeString.Trace:var o=t.data.baseData;o.properties=W0(W0({},o.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Traces', Ver:'1.1')"});var s={cloudRoleInstance:t.tags[e.keys.cloudRoleInstance],cloudRoleName:t.tags[e.keys.cloudRole],traceSeverityLevel:aar.SeverityLevel[o.severity]};QM.countTrace(s);break;case jq.TelemetryTypeString.Request:var a=t.data.baseData;a.properties=W0(W0({},a.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Requests', Ver:'1.1')"});var c={cloudRoleInstance:t.tags[e.keys.cloudRoleInstance],cloudRoleName:t.tags[e.keys.cloudRole],operationSynthetic:t.tags[e.keys.operationSyntheticSource],requestSuccess:a.success,requestResultCode:a.responseCode};QM.countRequest(a.duration,c);break;case jq.TelemetryTypeString.Dependency:var l=t.data.baseData;l.properties=W0(W0({},l.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Dependencies', Ver:'1.1')"});var u={cloudRoleInstance:t.tags[e.keys.cloudRoleInstance],cloudRoleName:t.tags[e.keys.cloudRole],operationSynthetic:t.tags[e.keys.operationSyntheticSource],dependencySuccess:l.success,dependencyType:l.type,dependencyTarget:l.target,dependencyResultCode:l.resultCode};QM.countDependency(l.duration,u);break}return!0}});var IKe=m(K0=>{"use strict";var lar=K0&&K0.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),Bq=K0&&K0.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&lar(e,t,r)};Object.defineProperty(K0,"__esModule",{value:!0});Bq(SKe(),K0);Bq(AKe(),K0);Bq(xKe(),K0);Bq(wKe(),K0)});var Gse=m((w3n,OKe)=>{"use strict";var jt=sa(),Nc=Ss(),PKe=z_(),uar=qn(),dar=(function(){function t(){}return t.createEnvelope=function(e,r,n,o,s){var a=null;switch(r){case jt.TelemetryType.Trace:a=t.createTraceData(e);break;case jt.TelemetryType.Dependency:a=t.createDependencyData(e);break;case jt.TelemetryType.Event:a=t.createEventData(e);break;case jt.TelemetryType.Exception:a=t.createExceptionData(e);break;case jt.TelemetryType.Request:a=t.createRequestData(e);break;case jt.TelemetryType.Metric:a=t.createMetricData(e);break;case jt.TelemetryType.Availability:a=t.createAvailabilityData(e);break;case jt.TelemetryType.PageView:a=t.createPageViewData(e);break}if(a&&a.baseData&&jt.domainSupportsProperties(a.baseData)){if(n)if(!a.baseData.properties)a.baseData.properties=n;else for(var c in n)a.baseData.properties[c]||(a.baseData.properties[c]=n[c]);t.addAzureFunctionsCorrelationProperties(a.baseData.properties),a.baseData.properties&&(a.baseData.properties=Nc.validateStringMap(a.baseData.properties))}var l=s&&s.instrumentationKey||"",u=new jt.Envelope;return u.data=a,u.iKey=l,u.name="Microsoft.ApplicationInsights."+l.replace(/-/g,"")+"."+a.baseType.substr(0,a.baseType.length-4),u.tags=this.getTags(o,e.tagOverrides),u.time=new Date().toISOString(),u.ver=1,u.sampleRate=s?s.samplingPercentage:100,r===jt.TelemetryType.Metric&&(u.sampleRate=100),u},t.addAzureFunctionsCorrelationProperties=function(e){var r=PKe.CorrelationContextManager.getCurrentContext();if(r&&r.customProperties&&r.customProperties.getProperty instanceof Function){e=e||{};var n=r.customProperties.getProperty("InvocationId");n&&(e.InvocationId=n),n=r.customProperties.getProperty("ProcessId"),n&&(e.ProcessId=n),n=r.customProperties.getProperty("LogLevel"),n&&(e.LogLevel=n),n=r.customProperties.getProperty("Category"),n&&(e.Category=n),n=r.customProperties.getProperty("HostInstanceId"),n&&(e.HostInstanceId=n),n=r.customProperties.getProperty("AzFuncLiveLogsSessionId"),n&&(e.AzFuncLiveLogsSessionId=n)}},t.truncateProperties=function(e){if(e.properties)try{for(var r={},n=Object.keys(e.properties),o=Object.values(e.properties),s=0;s<n.length;s++)n[s].length<=150&&(Nc.isDate(o[s])||(o[s]==null&&(o[s]=""),typeof o[s]=="object"&&(o[s]=Nc.stringify(o[s])),r[n[s]]=String(o[s]).substring(0,8192)),r[n[s]]=o[s]);return r}catch(a){uar.warn("Failed to properly truncate telemetry properties: ",a)}},t.createTraceData=function(e){var r,n=new jt.MessageData;n.message=(r=e.message)===null||r===void 0?void 0:r.substring(0,32768),n.properties=this.truncateProperties(e),isNaN(e.severity)?n.severityLevel=jt.SeverityLevel.Information:n.severityLevel=e.severity;var o=new jt.Data;return o.baseType=jt.telemetryTypeToBaseType(jt.TelemetryType.Trace),o.baseData=n,o},t.createDependencyData=function(e){var r,n,o,s=new jt.RemoteDependencyData;s.name=(r=e.name)===null||r===void 0?void 0:r.substring(0,1024),s.data=(n=e.data)===null||n===void 0?void 0:n.substring(0,8192),s.target=(o=e.target)===null||o===void 0?void 0:o.substring(0,1024),s.duration=Nc.msToTimeSpan(e.duration),s.success=e.success,s.type=e.dependencyTypeName,s.properties=this.truncateProperties(e),s.resultCode=e.resultCode?e.resultCode.toString():"0",e.id?s.id=e.id:s.id=Nc.w3cTraceId();var a=new jt.Data;return a.baseType=jt.telemetryTypeToBaseType(jt.TelemetryType.Dependency),a.baseData=s,a},t.createEventData=function(e){var r,n=new jt.EventData;n.name=(r=e.name)===null||r===void 0?void 0:r.substring(0,512),n.properties=this.truncateProperties(e),n.measurements=e.measurements;var o=new jt.Data;return o.baseType=jt.telemetryTypeToBaseType(jt.TelemetryType.Event),o.baseData=n,o},t.createExceptionData=function(e){var r,n,o=new jt.ExceptionData;o.properties=this.truncateProperties(e),isNaN(e.severity)?o.severityLevel=jt.SeverityLevel.Error:o.severityLevel=e.severity,o.measurements=e.measurements,o.exceptions=[];var s=e.exception.stack,a=new jt.ExceptionDetails;a.message=(r=e.exception.message)===null||r===void 0?void 0:r.substring(0,32768),a.typeName=(n=e.exception.name)===null||n===void 0?void 0:n.substring(0,1024),a.parsedStack=this.parseStack(s),a.hasFullStack=Nc.isArray(a.parsedStack)&&a.parsedStack.length>0,o.exceptions.push(a);var c=new jt.Data;return c.baseType=jt.telemetryTypeToBaseType(jt.TelemetryType.Exception),c.baseData=o,c},t.createRequestData=function(e){var r,n,o,s,a=new jt.RequestData;e.id?a.id=e.id:a.id=Nc.w3cTraceId(),a.name=(r=e.name)===null||r===void 0?void 0:r.substring(0,1024),a.url=(n=e.url)===null||n===void 0?void 0:n.substring(0,2048),a.source=(o=e.source)===null||o===void 0?void 0:o.substring(0,1024),a.duration=Nc.msToTimeSpan(e.duration),a.responseCode=(s=e.resultCode?e.resultCode.toString():"0")===null||s===void 0?void 0:s.substring(0,1024),a.success=e.success,a.properties=this.truncateProperties(e),a.measurements=e.measurements;var c=new jt.Data;return c.baseType=jt.telemetryTypeToBaseType(jt.TelemetryType.Request),c.baseData=a,c},t.createMetricData=function(e){var r,n=new jt.MetricData;n.metrics=[];var o=new jt.DataPoint;o.count=isNaN(e.count)?1:e.count,o.kind=jt.DataPointType.Aggregation,o.max=isNaN(e.max)?e.value:e.max,o.min=isNaN(e.min)?e.value:e.min,o.name=(r=e.name)===null||r===void 0?void 0:r.substring(0,1024),o.stdDev=isNaN(e.stdDev)?0:e.stdDev,o.value=e.value,o.ns=e.namespace,n.metrics.push(o),n.properties=this.truncateProperties(e);var s=new jt.Data;return s.baseType=jt.telemetryTypeToBaseType(jt.TelemetryType.Metric),s.baseData=n,s},t.createAvailabilityData=function(e){var r,n,o=new jt.AvailabilityData;e.id?o.id=e.id:o.id=Nc.w3cTraceId(),o.name=(r=e.name)===null||r===void 0?void 0:r.substring(0,1024),o.duration=Nc.msToTimeSpan(e.duration),o.success=e.success,o.runLocation=e.runLocation,o.message=(n=e.message)===null||n===void 0?void 0:n.substring(0,8192),o.measurements=e.measurements,o.properties=this.truncateProperties(e);var s=new jt.Data;return s.baseType=jt.telemetryTypeToBaseType(jt.TelemetryType.Availability),s.baseData=o,s},t.createPageViewData=function(e){var r,n,o=new jt.PageViewData;o.name=(r=e.name)===null||r===void 0?void 0:r.substring(0,1024),o.duration=Nc.msToTimeSpan(e.duration),o.url=(n=e.url)===null||n===void 0?void 0:n.substring(0,2048),o.measurements=e.measurements,o.properties=this.truncateProperties(e);var s=new jt.Data;return s.baseType=jt.telemetryTypeToBaseType(jt.TelemetryType.PageView),s.baseData=o,s},t.getTags=function(e,r){var n=PKe.CorrelationContextManager.getCurrentContext(),o={};if(e&&e.tags)for(var s in e.tags)o[s]=e.tags[s];if(r)for(var s in r)o[s]=r[s];return n&&(o[e.keys.operationId]=o[e.keys.operationId]||n.operation.id,o[e.keys.operationName]=o[e.keys.operationName]||n.operation.name,o[e.keys.operationParentId]=o[e.keys.operationParentId]||n.operation.parentId),o},t.parseStack=function(e){var r=void 0;if(typeof e=="string"){var n=e.split(`
`);r=[];for(var o=0,s=0,a=0;a<=n.length;a++){var c=n[a];if(RKe.regex.test(c)){var l=new RKe(n[a],o++);s+=l.sizeInBytes,r.push(l)}}var u=32*1024;if(s>u)for(var d=0,f=r.length-1,p=0,h=d,_=f;d<f;){var g=r[d].sizeInBytes,v=r[f].sizeInBytes;if(p+=g+v,p>u){var E=_-h+1;r.splice(h,E);break}h=d,_=f,d++,f--}}return r},t})(),RKe=(function(){function t(e,r){this.sizeInBytes=0,this.level=r,this.method="<no_method>",this.assembly=Nc.trim(e);var n=e.match(t.regex);n&&n.length>=5&&(this.method=Nc.trim(n[2])||this.method,this.fileName=Nc.trim(n[4])||"<no_filename>",this.line=parseInt(n[5])||0),this.sizeInBytes+=this.method.length,this.sizeInBytes+=this.fileName.length,this.sizeInBytes+=this.assembly.length,this.sizeInBytes+=t.baseSize,this.sizeInBytes+=this.level.toString().length,this.sizeInBytes+=this.line.toString().length}return t.regex=/^(\s+at)?(.*?)(\@|\s\(|\s)([^\(\n]+):(\d+):(\d+)(\)?)$/,t.baseSize=58,t})();OKe.exports=dar});var MKe=m(t1=>{"use strict";var far=t1&&t1.__awaiter||function(t,e,r,n){function o(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function c(d){try{u(n.next(d))}catch(f){a(f)}}function l(d){try{u(n.throw(d))}catch(f){a(f)}}function u(d){d.done?s(d.value):o(d.value).then(c,l)}u((n=n.apply(t,e||[])).next())})},par=t1&&t1.__generator||function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,o,s,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(u){return function(d){return l([u,d])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(r=0)),r;)try{if(n=1,o&&(s=u[0]&2?o.return:u[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,u[1])).done)return s;switch(o=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,o=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],o=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(t1,"__esModule",{value:!0});t1.FileAccessControl=void 0;var har=require("fs"),mar=require("os"),vw=require("child_process"),gar=qn(),_ar=(function(){function t(){}return t.checkFileProtection=function(){if(!t.OS_PROVIDES_FILE_PROTECTION&&!t.OS_FILE_PROTECTION_CHECKED)if(t.OS_FILE_PROTECTION_CHECKED=!0,t.USE_ICACLS){try{t.OS_PROVIDES_FILE_PROTECTION=har.existsSync(t.ICACLS_PATH)}catch{}t.OS_PROVIDES_FILE_PROTECTION||gar.warn(t.TAG,"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.")}else t.OS_PROVIDES_FILE_PROTECTION=!0},t.applyACLRules=function(e){return far(this,void 0,void 0,function(){var r,n;return par(this,function(o){switch(o.label){case 0:if(!t.USE_ICACLS)return[3,7];if(t.ACLED_DIRECTORIES[e]!==void 0)return[3,6];t.ACLED_DIRECTORIES[e]=!1,o.label=1;case 1:return o.trys.push([1,4,,5]),[4,this._getACLIdentity()];case 2:return r=o.sent(),[4,this._runICACLS(this._getACLArguments(e,r))];case 3:return o.sent(),t.ACLED_DIRECTORIES[e]=!0,[3,5];case 4:throw n=o.sent(),t.ACLED_DIRECTORIES[e]=!1,n;case 5:return[3,7];case 6:if(!t.ACLED_DIRECTORIES[e])throw new Error("Setting ACL restrictions did not succeed (cached result)");o.label=7;case 7:return[2]}})})},t.applyACLRulesSync=function(e){if(t.USE_ICACLS){if(t.ACLED_DIRECTORIES[e]===void 0){this._runICACLSSync(this._getACLArguments(e,this._getACLIdentitySync())),t.ACLED_DIRECTORIES[e]=!0;return}else if(!t.ACLED_DIRECTORIES[e])throw new Error("Setting ACL restrictions did not succeed (cached result)")}},t._runICACLS=function(e){return new Promise(function(r,n){var o=vw.spawn(t.ICACLS_PATH,e,{windowsHide:!0});o.on("error",function(s){return n(s)}),o.on("close",function(s,a){s===0?r():n(new Error("Setting ACL restrictions did not succeed (ICACLS returned code ".concat(s,")")))})})},t._runICACLSSync=function(e){if(vw.spawnSync){var r=vw.spawnSync(t.ICACLS_PATH,e,{windowsHide:!0});if(r.error)throw r.error;if(r.status!==0)throw new Error("Setting ACL restrictions did not succeed (ICACLS returned code ".concat(r.status,")"))}else throw new Error("Could not synchronously call ICACLS under current version of Node.js")},t._getACLIdentity=function(){return new Promise(function(e,r){t.ACL_IDENTITY&&e(t.ACL_IDENTITY);var n=vw.spawn(t.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]}),o="";n.stdout.on("data",function(s){return o+=s}),n.on("error",function(s){return r(s)}),n.on("close",function(s,a){t.ACL_IDENTITY=o&&o.trim(),s===0?e(t.ACL_IDENTITY):r(new Error("Getting ACL identity did not succeed (PS returned code ".concat(s,")")))})})},t._getACLIdentitySync=function(){if(t.ACL_IDENTITY)return t.ACL_IDENTITY;if(vw.spawnSync){var e=vw.spawnSync(t.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]});if(e.error)throw e.error;if(e.status!==0)throw new Error("Getting ACL identity did not succeed (PS returned code ".concat(e.status,")"));return t.ACL_IDENTITY=e.stdout&&e.stdout.toString().trim(),t.ACL_IDENTITY}else throw new Error("Could not synchronously get ACL identity under current version of Node.js")},t._getACLArguments=function(e,r){return[e,"/grant","*S-1-5-32-544:(OI)(CI)F","/grant","".concat(r,":(OI)(CI)F"),"/inheritance:r"]},t.TAG="FileAccessControl",t.ICACLS_PATH="".concat(process.env.systemdrive,"/windows/system32/icacls.exe"),t.POWERSHELL_PATH="".concat(process.env.systemdrive,"/windows/system32/windowspowershell/v1.0/powershell.exe"),t.ACLED_DIRECTORIES={},t.ACL_IDENTITY=null,t.OS_FILE_PROTECTION_CHECKED=!1,t.OS_PROVIDES_FILE_PROTECTION=!1,t.USE_ICACLS=mar.type()==="Windows_NT",t})();t1.FileAccessControl=_ar});var Kse=m((JM,NKe)=>{"use strict";var $q=JM&&JM.__awaiter||function(t,e,r,n){function o(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function c(d){try{u(n.next(d))}catch(f){a(f)}}function l(d){try{u(n.throw(d))}catch(f){a(f)}}function u(d){d.done?s(d.value):o(d.value).then(c,l)}u((n=n.apply(t,e||[])).next())})},Vq=JM&&JM.__generator||function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,o,s,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(u){return function(d){return l([u,d])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(r=0)),r;)try{if(n=1,o&&(s=u[0]&2?o.return:u[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,u[1])).done)return s;switch(o=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,o=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],o=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},zse=require("fs"),yar=require("os"),iT=require("path"),Ear=require("zlib"),r1=ni(),Tar=Wx(),im=Oee(),Lc=Ss(),Sar=require("url"),Wse=qn(),ZM=MKe(),bar=439,Car=402,Aar=[200,206,402,408,429,439,500],xar="Invalid instrumentation key",war=(function(){function t(e,r,n,o,s,a,c){this._redirectedHost=null,this._config=e,this._onSuccess=n,this._onError=o,this._statsbeat=s,this._enableDiskRetryMode=!1,this._resendInterval=t.WAIT_BETWEEN_RESEND,this._maxBytesOnDisk=t.MAX_BYTES_ON_DISK,this._numConsecutiveFailures=0,this._numConsecutiveRedirects=0,this._resendTimer=null,this._getAuthorizationHandler=r,this._fileCleanupTimer=null,this._tempDir=iT.join(yar.tmpdir(),t.TEMPDIR_PREFIX+this._config.instrumentationKey),this._isStatsbeatSender=a||!1,this._shutdownStatsbeat=c,this._failedToIngestCounter=0,this._statsbeatHasReachedIngestionAtLeastOnce=!1}return t.prototype.setDiskRetryMode=function(e,r,n){var o=this;e&&ZM.FileAccessControl.checkFileProtection(),this._enableDiskRetryMode=ZM.FileAccessControl.OS_PROVIDES_FILE_PROTECTION&&e,typeof r=="number"&&r>=0&&(this._resendInterval=Math.floor(r)),typeof n=="number"&&n>=0&&(this._maxBytesOnDisk=Math.floor(n)),e&&!ZM.FileAccessControl.OS_PROVIDES_FILE_PROTECTION&&(this._enableDiskRetryMode=!1,this._logWarn("Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected.")),this._enableDiskRetryMode?(this._statsbeat&&this._statsbeat.addFeature(r1.StatsbeatFeature.DISK_RETRY),this._fileCleanupTimer||(this._fileCleanupTimer=setTimeout(function(){o._fileCleanupTask()},t.CLEANUP_TIMEOUT),this._fileCleanupTimer.unref())):(this._statsbeat&&this._statsbeat.removeFeature(r1.StatsbeatFeature.DISK_RETRY),this._fileCleanupTimer&&clearTimeout(this._fileCleanupTimer))},t.prototype.send=function(e,r){return $q(this,void 0,void 0,function(){var n,o,s,a,c,l,u,d,f=this;return Vq(this,function(p){switch(p.label){case 0:if(!(e&&e.length>0))return[3,5];if(n=this._redirectedHost||this._config.endpointUrl,o=new Sar.URL(n).hostname,s={method:"POST",withCredentials:!1,headers:{"Content-Type":"application/x-json-stream"}},a=this._getAuthorizationHandler?this._getAuthorizationHandler(this._config):null,!a)return[3,4];this._statsbeat&&this._statsbeat.addFeature(r1.StatsbeatFeature.AAD_HANDLING),p.label=1;case 1:return p.trys.push([1,3,,4]),[4,a.addAuthorizationHeader(s)];case 2:return p.sent(),[3,4];case 3:return c=p.sent(),l="Failed to get AAD bearer token for the Application.",this._enableDiskRetryMode&&(l+="This batch of telemetry items will be retried. ",this._storeToDisk(e)),l+="Error:"+c.toString(),this._logWarn(l),typeof r=="function"&&r(l),[2];case 4:if(u="",e.forEach(function(h){var _=Lc.stringify(h);typeof _=="string"&&(u+=_+`
`)}),u.length>0&&(u=u.substring(0,u.length-1)),u.length===0)return typeof r=="function"&&r("Empty batch of telemetry items. Nothing to send."),[2];d=Buffer.from?Buffer.from(u):new Buffer(u),Ear.gzip(d,function(h,_){var g=_;h?(f._logWarn(Lc.dumpObj(h)),g=d,s.headers["Content-Length"]=d.length.toString()):(s.headers["Content-Encoding"]="gzip",s.headers["Content-Length"]=_.length.toString()),f._logInfo(Lc.dumpObj(s)),s[Tar.disableCollectionRequestOption]=!0;var v=+new Date,E=function(S){S.setEncoding("utf-8");var b="";S.on("data",function(w){b+=w}),S.on("end",function(){var w,P=+new Date,A=P-v;if(f._numConsecutiveFailures=0,b.includes(xar)&&S.statusCode===400&&(Wse.warn("Instrumentation key was invalid, please check the iKey"),(w=f._shutdownStatsbeat)===null||w===void 0||w.call(f)),f._isStatsbeatSender&&!f._statsbeatHasReachedIngestionAtLeastOnce&&(Aar.includes(S.statusCode)?f._statsbeatHasReachedIngestionAtLeastOnce=!0:f._statsbeatFailedToIngest()),f._statsbeat&&(S.statusCode==Car||S.statusCode==bar?f._statsbeat.countThrottle(r1.StatsbeatNetworkCategory.Breeze,o,S.statusCode):f._statsbeat.countRequest(r1.StatsbeatNetworkCategory.Breeze,o,A,S.statusCode===200,S.statusCode)),f._enableDiskRetryMode){if(S.statusCode===200)f._resendTimer||(f._resendTimer=setTimeout(function(){f._resendTimer=null,f._sendFirstFileOnDisk()},f._resendInterval),f._resendTimer.unref());else if(f._isRetriable(S.statusCode))try{f._statsbeat&&f._statsbeat.countRetry(r1.StatsbeatNetworkCategory.Breeze,o,S.statusCode);var O=JSON.parse(b),L=[];O.errors&&(O.errors.forEach(function(Q){(Q.statusCode==429||Q.statusCode==500||Q.statusCode==503)&&L.push(e[Q.index])}),L.length>0&&f._storeToDisk(L))}catch{f._storeToDisk(e)}}if(S.statusCode===307||S.statusCode===308)if(f._numConsecutiveRedirects++,f._numConsecutiveRedirects<10){var j=S.headers.location?S.headers.location.toString():null;j&&(f._redirectedHost=j,f.send(e,r))}else{var $={name:"Circular Redirect",message:"Error sending telemetry because of circular redirects."};f._statsbeat&&f._statsbeat.countException(r1.StatsbeatNetworkCategory.Breeze,o,$),typeof r=="function"&&r("Error sending telemetry because of circular redirects.")}else f._numConsecutiveRedirects=0,typeof r=="function"&&r(b),f._logInfo(b),typeof f._onSuccess=="function"&&f._onSuccess(b)})},y=Lc.makeRequest(f._config,n,s,E);y.setTimeout(t.HTTP_TIMEOUT,function(){f._requestTimedOut=!0,y.abort()}),y.on("error",function(S){if(f._isStatsbeatSender&&!f._statsbeatHasReachedIngestionAtLeastOnce&&f._statsbeatFailedToIngest(),f._numConsecutiveFailures++,f._statsbeat&&f._statsbeat.countException(r1.StatsbeatNetworkCategory.Breeze,o,S),!f._enableDiskRetryMode||f._numConsecutiveFailures>0&&f._numConsecutiveFailures%t.MAX_CONNECTION_FAILURES_BEFORE_WARN===0){var b="Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:";f._enableDiskRetryMode&&(b="Ingestion endpoint could not be reached ".concat(f._numConsecutiveFailures," consecutive times. There may be resulting telemetry loss. Most recent error:")),f._logWarn(b,Lc.dumpObj(S))}else{var b="Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:";f._logInfo(b,Lc.dumpObj(S))}f._onErrorHelper(S),typeof r=="function"&&(S?(f._requestTimedOut&&(S.name="telemetry timeout",S.message="telemetry request timed out"),r(Lc.dumpObj(S))):r("Error sending telemetry")),f._enableDiskRetryMode&&f._storeToDisk(e)}),y.write(g),y.end()}),p.label=5;case 5:return[2]}})})},t.prototype.saveOnCrash=function(e){this._enableDiskRetryMode&&this._storeToDiskSync(Lc.stringify(e))},t.prototype._isRetriable=function(e){return e===206||e===401||e===403||e===408||e===429||e===500||e===502||e===503||e===504},t.prototype._logInfo=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this._isStatsbeatSender||Wse.info(t.TAG,e,r)},t.prototype._logWarn=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this._isStatsbeatSender||Wse.warn(t.TAG,e,r)},t.prototype._statsbeatFailedToIngest=function(){this._shutdownStatsbeat&&(this._failedToIngestCounter++,this._failedToIngestCounter>=3&&this._shutdownStatsbeat())},t.prototype._storeToDisk=function(e){return $q(this,void 0,void 0,function(){var r,n,o,s,a,c,l;return Vq(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),this._logInfo("Checking existence of data storage directory: "+this._tempDir),[4,im.confirmDirExists(this._tempDir)];case 1:return u.sent(),[3,3];case 2:return r=u.sent(),this._logWarn("Failed to create folder to put telemetry: "+Lc.dumpObj(r)),this._onErrorHelper(r),[2];case 3:return u.trys.push([3,5,,6]),[4,ZM.FileAccessControl.applyACLRules(this._tempDir)];case 4:return u.sent(),[3,6];case 5:return n=u.sent(),this._logWarn("Failed to apply file access control to folder: "+Lc.dumpObj(n)),this._onErrorHelper(n),[2];case 6:return u.trys.push([6,8,,9]),[4,im.getShallowDirectorySize(this._tempDir)];case 7:return o=u.sent(),o>this._maxBytesOnDisk?(this._logWarn("Not saving data due to max size limit being met. Directory size in bytes is: "+o),[2]):[3,9];case 8:return s=u.sent(),this._logWarn("Failed to read directory for retriable telemetry: "+Lc.dumpObj(s)),this._onErrorHelper(s),[2];case 9:return u.trys.push([9,11,,12]),a="".concat(new Date().getTime(),".ai.json"),c=iT.join(this._tempDir,a),this._logInfo("saving data to disk at: "+c),[4,im.writeFileAsync(c,Lc.stringify(e),{mode:384})];case 10:return u.sent(),[3,12];case 11:return l=u.sent(),this._logWarn("Failed to persist telemetry to disk: "+Lc.dumpObj(l)),this._onErrorHelper(l),[2];case 12:return[2]}})})},t.prototype._storeToDiskSync=function(e){try{this._logInfo("Checking existence of data storage directory: "+this._tempDir),zse.existsSync(this._tempDir)||zse.mkdirSync(this._tempDir),ZM.FileAccessControl.applyACLRulesSync(this._tempDir);var r=im.getShallowDirectorySizeSync(this._tempDir);if(r>this._maxBytesOnDisk){this._logInfo("Not saving data due to max size limit being met. Directory size in bytes is: "+r);return}var n="".concat(new Date().getTime(),".ai.json"),o=iT.join(this._tempDir,n);this._logInfo("saving data before crash to disk at: "+o),zse.writeFileSync(o,e,{mode:384})}catch(s){this._logWarn("Error while saving data to disk: "+Lc.dumpObj(s)),this._onErrorHelper(s)}},t.prototype._sendFirstFileOnDisk=function(){return $q(this,void 0,void 0,function(){var e,r,n,o,s,a;return Vq(this,function(c){switch(c.label){case 0:return c.trys.push([0,6,,7]),[4,im.readdirAsync(this._tempDir)];case 1:return e=c.sent(),e=e.filter(function(l){return iT.basename(l).indexOf(".ai.json")>-1}),e.length>0?(r=e[0],n=iT.join(this._tempDir,r),[4,im.readFileAsync(n)]):[3,5];case 2:return o=c.sent(),[4,im.unlinkAsync(n)];case 3:return c.sent(),s=JSON.parse(o.toString()),[4,this.send(s)];case 4:c.sent(),c.label=5;case 5:return[3,7];case 6:return a=c.sent(),this._onErrorHelper(a),[3,7];case 7:return[2]}})})},t.prototype._onErrorHelper=function(e){typeof this._onError=="function"&&this._onError(e)},t.prototype._fileCleanupTask=function(){return $q(this,void 0,void 0,function(){var e,r,n,o,s,a,c=this;return Vq(this,function(l){switch(l.label){case 0:return l.trys.push([0,6,,7]),[4,im.readdirAsync(this._tempDir)];case 1:if(e=l.sent(),e=e.filter(function(u){return iT.basename(u).indexOf(".ai.json")>-1}),!(e.length>0))return[3,5];r=0,l.label=2;case 2:return r<e.length?(n=new Date(parseInt(e[r].split(".ai.json")[0])),o=new Date(+new Date-t.FILE_RETEMPTION_PERIOD)>n,o?(s=iT.join(this._tempDir,e[r]),[4,im.unlinkAsync(s).catch(function(u){c._onErrorHelper(u)})]):[3,4]):[3,5];case 3:l.sent(),l.label=4;case 4:return r++,[3,2];case 5:return[3,7];case 6:return a=l.sent(),a.code!="ENOENT"&&this._onErrorHelper(a),[3,7];case 7:return[2]}})})},t.TAG="Sender",t.WAIT_BETWEEN_RESEND=60*1e3,t.MAX_BYTES_ON_DISK=50*1024*1024,t.MAX_CONNECTION_FAILURES_BEFORE_WARN=5,t.CLEANUP_TIMEOUT=3600*1e3,t.FILE_RETEMPTION_PERIOD=10080*60*1e3,t.TEMPDIR_PREFIX="appInsights-node",t.HTTP_TIMEOUT=2e4,t})();NKe.exports=war});var kKe=m(Hq=>{"use strict";Object.defineProperty(Hq,"__esModule",{value:!0});Hq.AzureVirtualMachine=void 0;var LKe=qn(),Iar=Ss(),Par=Wx(),Rar="http://169.254.169.254/metadata/instance/compute",Oar="api-version=2017-12-01",Mar="format=json",Nar="UNREACH",Lar=(function(){function t(){}return t.getAzureComputeMetadata=function(e,r){var n,o=this,s={},a="".concat(Rar,"?").concat(Oar,"&").concat(Mar),c=(n={method:"GET"},n[Par.disableCollectionRequestOption]=!0,n.headers={Metadata:"True"},n),l=Iar.makeRequest(e,a,c,function(u){if(u.statusCode===200){s.isVM=!0;var d="";u.on("data",function(f){d+=f}),u.on("end",function(){try{var f=JSON.parse(d);s.id=f.vmId||"",s.subscriptionId=f.subscriptionId||"",s.osType=f.osType||""}catch(p){LKe.info(t.TAG,p)}r(s)})}else r(s)},!1,!1);l&&(setTimeout(function(){o._requestTimedOut=!0,l.abort()},t.HTTP_TIMEOUT),l.on("error",function(u){o._requestTimedOut&&u&&(u.name="telemetry timeout",u.message="telemetry request timed out"),u&&u.message&&u.message.indexOf(Nar)>-1?s.isVM=!1:LKe.info(t.TAG,u),r(s)}),l.end())},t.HTTP_TIMEOUT=2500,t.TAG="AzureVirtualMachine",t})();Hq.AzureVirtualMachine=Lar});var DKe=m(Gq=>{"use strict";Object.defineProperty(Gq,"__esModule",{value:!0});Gq.NetworkStatsbeat=void 0;var kar=(function(){function t(e,r){this.endpoint=e,this.host=r,this.totalRequestCount=0,this.totalSuccesfulRequestCount=0,this.totalFailedRequestCount=[],this.retryCount=[],this.exceptionCount=[],this.throttleCount=[],this.intervalRequestExecutionTime=0,this.lastIntervalRequestExecutionTime=0,this.lastTime=+new Date,this.lastRequestCount=0}return t})();Gq.NetworkStatsbeat=kar});var BKe=m((oT,jKe)=>{"use strict";var Y0=oT&&oT.__assign||function(){return Y0=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},Y0.apply(this,arguments)},Yse=oT&&oT.__awaiter||function(t,e,r,n){function o(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function c(d){try{u(n.next(d))}catch(f){a(f)}}function l(d){try{u(n.throw(d))}catch(f){a(f)}}function u(d){d.done?s(d.value):o(d.value).then(c,l)}u((n=n.apply(t,e||[])).next())})},Qse=oT&&oT.__generator||function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,o,s,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(u){return function(d){return l([u,d])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(r=0)),r;)try{if(n=1,o&&(s=u[0]&2?o.return:u[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,u[1])).done)return s;switch(o=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,o=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],o=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Dar=require("os"),Uar=Gse(),UKe=qn(),qar=Kse(),oi=ni(),Far=sa(),jar=kKe(),Bar=qoe(),qKe=jx(),$ar=DKe(),FKe=Ss(),Var="node",Har=(function(){function t(e,r){this._attach=oi.StatsbeatAttach.sdk,this._feature=oi.StatsbeatFeature.NONE,this._instrumentation=oi.StatsbeatInstrumentation.NONE,this._isInitialized=!1,this._statbeatMetrics=[],this._networkStatsbeatCollection=[],this._config=e,this._context=r||new qKe,this._longHandleTimeout=null;var n=this._getConnectionString(e);this._statsbeatConfig=new Bar(n),this._statsbeatConfig.samplingPercentage=100,this._sender=new qar(this._statsbeatConfig,null,null,null,null,!0,this._shutdownStatsbeat.bind(this))}return t.prototype.enable=function(e){var r=this;this._isEnabled=e,this._isEnabled&&!this._isInitialized&&(this._getCustomProperties(),this._isInitialized=!0),e?(this._handle||(this._handle=setInterval(function(){r.trackShortIntervalStatsbeats()},t.STATS_COLLECTION_SHORT_INTERVAL),this._handle.unref()),this._longHandle||(this._longHandleTimeout=setTimeout(function(){r.isEnabled()&&r.trackLongIntervalStatsbeats()},t.STATS_COLLECTION_INITIAL_DELAY),this._longHandleTimeout.unref(),this._longHandle=setInterval(function(){r.trackLongIntervalStatsbeats()},t.STATS_COLLECTION_LONG_INTERVAL),this._longHandle.unref())):(this._handle&&(clearInterval(this._handle),this._handle=null),this._longHandle&&(clearInterval(this._longHandle),this._longHandle=null),this._longHandleTimeout&&(clearTimeout(this._longHandleTimeout),this._longHandleTimeout=null))},t.prototype.isInitialized=function(){return this._isInitialized},t.prototype.isEnabled=function(){return this._isEnabled},t.prototype.setCodelessAttach=function(){this._attach=oi.StatsbeatAttach.codeless},t.prototype.addFeature=function(e){this._feature|=e},t.prototype.removeFeature=function(e){this._feature&=~e},t.prototype.addInstrumentation=function(e){this._instrumentation|=e},t.prototype.removeInstrumentation=function(e){this._instrumentation&=~e},t.prototype.countRequest=function(e,r,n,o,s){if(this.isEnabled()){var a=this._getNetworkStatsbeatCounter(e,r);if(a.totalRequestCount++,a.intervalRequestExecutionTime+=n,o===!1){if(!s)return;var c=a.totalFailedRequestCount.find(function(l){return s===l.statusCode});c?c.count++:a.totalFailedRequestCount.push({statusCode:s,count:1})}else a.totalSuccesfulRequestCount++}},t.prototype.countException=function(e,r,n){if(this.isEnabled()){var o=this._getNetworkStatsbeatCounter(e,r),s=o.exceptionCount.find(function(a){return n.name===a.exceptionType});s?s.count++:o.exceptionCount.push({exceptionType:n.name,count:1})}},t.prototype.countThrottle=function(e,r,n){if(this.isEnabled()){var o=this._getNetworkStatsbeatCounter(e,r),s=o.throttleCount.find(function(a){return n===a.statusCode});s?s.count++:o.throttleCount.push({statusCode:n,count:1})}},t.prototype.countRetry=function(e,r,n){if(this.isEnabled()){var o=this._getNetworkStatsbeatCounter(e,r),s=o.retryCount.find(function(a){return n===a.statusCode});s?s.count++:o.retryCount.push({statusCode:n,count:1})}},t.prototype.trackShortIntervalStatsbeats=function(){return Yse(this,void 0,void 0,function(){var e,r;return Qse(this,function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,this._getResourceProvider()];case 1:return n.sent(),e={os:this._os,rp:this._resourceProvider,cikey:this._cikey,runtimeVersion:this._runtimeVersion,language:this._language,version:this._sdkVersion,attach:this._attach},this._trackRequestDuration(e),this._trackRequestsCount(e),[4,this._sendStatsbeats()];case 2:return n.sent(),[3,4];case 3:return r=n.sent(),UKe.info(t.TAG,"Failed to send Statsbeat metrics: "+FKe.dumpObj(r)),[3,4];case 4:return[2]}})})},t.prototype.trackLongIntervalStatsbeats=function(){return Yse(this,void 0,void 0,function(){var e,r,n,o,s;return Qse(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),[4,this._getResourceProvider()];case 1:return a.sent(),e={os:this._os,rp:this._resourceProvider,cikey:this._cikey,runtimeVersion:this._runtimeVersion,language:this._language,version:this._sdkVersion,attach:this._attach},r=Object.assign({rpId:this._resourceIdentifier},e),this._statbeatMetrics.push({name:oi.StatsbeatCounter.ATTACH,value:1,properties:r}),this._instrumentation!=oi.StatsbeatInstrumentation.NONE&&(n=Object.assign({feature:this._instrumentation,type:oi.StatsbeatFeatureType.Instrumentation},e),this._statbeatMetrics.push({name:oi.StatsbeatCounter.FEATURE,value:1,properties:n})),this._feature!=oi.StatsbeatFeature.NONE&&(o=Object.assign({feature:this._feature,type:oi.StatsbeatFeatureType.Feature},e),this._statbeatMetrics.push({name:oi.StatsbeatCounter.FEATURE,value:1,properties:o})),[4,this._sendStatsbeats()];case 2:return a.sent(),[3,4];case 3:return s=a.sent(),UKe.info(t.TAG,"Failed to send Statsbeat metrics: "+FKe.dumpObj(s)),[3,4];case 4:return[2]}})})},t.prototype._getNetworkStatsbeatCounter=function(e,r){for(var n=this._getShortHost(r),o=0;o<this._networkStatsbeatCollection.length;o++)if(e===this._networkStatsbeatCollection[o].endpoint&&n===this._networkStatsbeatCollection[o].host)return this._networkStatsbeatCollection[o];var s=new $ar.NetworkStatsbeat(e,n);return this._networkStatsbeatCollection.push(s),s},t.prototype._trackRequestDuration=function(e){for(var r=0;r<this._networkStatsbeatCollection.length;r++){var n=this._networkStatsbeatCollection[r];n.time=+new Date;var o=n.totalRequestCount-n.lastRequestCount||0,s=n.intervalRequestExecutionTime-n.lastIntervalRequestExecutionTime,a=s>0&&s/o||0;if(n.lastIntervalRequestExecutionTime=n.intervalRequestExecutionTime,o>0){var c=Object.assign({endpoint:this._networkStatsbeatCollection[r].endpoint,host:this._networkStatsbeatCollection[r].host},e);this._statbeatMetrics.push({name:oi.StatsbeatCounter.REQUEST_DURATION,value:a,properties:c})}n.lastRequestCount=n.totalRequestCount,n.lastTime=n.time}},t.prototype._getShortHost=function(e){var r=e;try{var n=new RegExp(/^https?:\/\/(?:www\.)?([^\/.-]+)/),o=n.exec(e);o!=null&&o.length>1&&(r=o[1]),r=r.replace(".in.applicationinsights.azure.com","")}catch{}return r},t.prototype._trackRequestsCount=function(e){for(var r=this,n=function(c){s=o._networkStatsbeatCollection[c];var l=Object.assign({endpoint:s.endpoint,host:s.host},e);s.totalSuccesfulRequestCount>0&&(o._statbeatMetrics.push({name:oi.StatsbeatCounter.REQUEST_SUCCESS,value:s.totalSuccesfulRequestCount,properties:l}),s.totalSuccesfulRequestCount=0),s.totalFailedRequestCount.length>0&&(s.totalFailedRequestCount.forEach(function(u){l=Object.assign(Y0(Y0({},l),{statusCode:u.statusCode})),r._statbeatMetrics.push({name:oi.StatsbeatCounter.REQUEST_FAILURE,value:u.count,properties:l})}),s.totalFailedRequestCount=[]),s.retryCount.length>0&&(s.retryCount.forEach(function(u){l=Object.assign(Y0(Y0({},l),{statusCode:u.statusCode})),r._statbeatMetrics.push({name:oi.StatsbeatCounter.RETRY_COUNT,value:u.count,properties:l})}),s.retryCount=[]),s.throttleCount.length>0&&(s.throttleCount.forEach(function(u){l=Object.assign(Y0(Y0({},l),{statusCode:u.statusCode})),r._statbeatMetrics.push({name:oi.StatsbeatCounter.THROTTLE_COUNT,value:u.count,properties:l})}),s.throttleCount=[]),s.exceptionCount.length>0&&(s.exceptionCount.forEach(function(u){l=Object.assign(Y0(Y0({},l),{exceptionType:u.exceptionType})),r._statbeatMetrics.push({name:oi.StatsbeatCounter.EXCEPTION_COUNT,value:u.count,properties:l})}),s.exceptionCount=[])},o=this,s,a=0;a<this._networkStatsbeatCollection.length;a++)n(a)},t.prototype._sendStatsbeats=function(){return Yse(this,void 0,void 0,function(){var e,r,n,o;return Qse(this,function(s){switch(s.label){case 0:if(!(this._statbeatMetrics.length>0))return[3,2];for(e=[],r=0;r<this._statbeatMetrics.length;r++)n={name:this._statbeatMetrics[r].name,value:this._statbeatMetrics[r].value,properties:this._statbeatMetrics[r].properties},o=Uar.createEnvelope(n,Far.TelemetryType.Metric,null,this._context,this._statsbeatConfig),o.name=oi.StatsbeatTelemetryName,e.push(o);return this._statbeatMetrics=[],[4,this._sender.send(e)];case 1:s.sent(),s.label=2;case 2:return[2]}})})},t.prototype._getCustomProperties=function(){this._language=Var,this._cikey=this._config.instrumentationKey,this._sdkVersion=qKe.sdkVersion,this._os=Dar.type(),this._runtimeVersion=process.version},t.prototype._getResourceProvider=function(){var e=this;return new Promise(function(r,n){var o=!1;e._resourceProvider=oi.StatsbeatResourceProvider.unknown,e._resourceIdentifier=oi.StatsbeatResourceProvider.unknown,process.env.AKS_ARM_NAMESPACE_ID?(e._resourceProvider=oi.StatsbeatResourceProvider.aks,e._resourceIdentifier=process.env.AKS_ARM_NAMESPACE_ID):process.env.WEBSITE_SITE_NAME?(e._resourceProvider=oi.StatsbeatResourceProvider.appsvc,e._resourceIdentifier=process.env.WEBSITE_SITE_NAME,process.env.WEBSITE_HOME_STAMPNAME&&(e._resourceIdentifier+="/"+process.env.WEBSITE_HOME_STAMPNAME)):process.env.FUNCTIONS_WORKER_RUNTIME?(e._resourceProvider=oi.StatsbeatResourceProvider.functions,process.env.WEBSITE_HOSTNAME&&(e._resourceIdentifier=process.env.WEBSITE_HOSTNAME)):e._config&&(e._isVM===void 0||e._isVM==!0?(o=!0,jar.AzureVirtualMachine.getAzureComputeMetadata(e._config,function(s){e._isVM=s.isVM,e._isVM&&(e._resourceProvider=oi.StatsbeatResourceProvider.vm,e._resourceIdentifier=s.id+"/"+s.subscriptionId,s.osType&&(e._os=s.osType)),r()})):e._resourceProvider=oi.StatsbeatResourceProvider.unknown),o||r()})},t.prototype._shutdownStatsbeat=function(){this.enable(!1)},t.prototype._getConnectionString=function(e){for(var r=e.endpointUrl,n=["westeurope","northeurope","francecentral","francesouth","germanywestcentral","norwayeast","norwaywest","swedencentral","switzerlandnorth","switzerlandwest","uksouth","ukwest"],o=0;o<n.length;o++)if(r.indexOf(n[o])>-1)return t.EU_CONNECTION_STRING;return t.NON_EU_CONNECTION_STRING},t.NON_EU_CONNECTION_STRING="InstrumentationKey=c4a29126-a7cb-47e5-b348-11414998b11e;IngestionEndpoint=https://westus-0.in.applicationinsights.azure.com",t.EU_CONNECTION_STRING="InstrumentationKey=7dc56bab-3c0c-4e9f-9ebb-d1acadee8d0f;IngestionEndpoint=https://westeurope-5.in.applicationinsights.azure.com",t.STATS_COLLECTION_SHORT_INTERVAL=9e5,t.STATS_COLLECTION_LONG_INTERVAL=864e5,t.STATS_COLLECTION_INITIAL_DELAY=15e3,t.TAG="Statsbeat",t})();jKe.exports=Har});var HKe=m((O3n,VKe)=>{"use strict";var Gar=require("url"),zar=qoe(),War=yKe(),Kar=jx(),om=sa(),Yar=TKe(),Zse=IKe(),$Ke=z_(),Qar=BKe(),Zar=Kse(),Jse=Ss(),zq=qn(),Jar=Gse(),Xar=(function(){function t(e){this._telemetryProcessors=[];var r=new zar(e);if(this.config=r,!this.config.instrumentationKey||this.config.instrumentationKey=="")throw new Error("Instrumentation key not found, please provide a connection string before starting Application Insights SDK.");this.context=new Kar,this.commonProperties={},this.authorizationHandler=null,this.config.disableStatsbeat||(this._statsbeat=new Qar(this.config,this.context),this._statsbeat.enable(!0));var n=new Zar(this.config,this.getAuthorizationHandler,null,null,this._statsbeat);this.channel=new Yar(function(){return r.disableAppInsights},function(){return r.maxBatchSize},function(){return r.maxBatchIntervalMs},n)}return t.prototype.trackAvailability=function(e){this.track(e,om.TelemetryType.Availability)},t.prototype.trackPageView=function(e){this.track(e,om.TelemetryType.PageView)},t.prototype.trackTrace=function(e){this.track(e,om.TelemetryType.Trace)},t.prototype.trackMetric=function(e){this.track(e,om.TelemetryType.Metric)},t.prototype.trackException=function(e){e&&e.exception&&!Jse.isError(e.exception)&&(e.exception=new Error(e.exception.toString())),this.track(e,om.TelemetryType.Exception)},t.prototype.trackEvent=function(e){this.track(e,om.TelemetryType.Event)},t.prototype.trackRequest=function(e){this.track(e,om.TelemetryType.Request)},t.prototype.trackDependency=function(e){if(e&&!e.target&&e.data)try{e.target=new Gar.URL(e.data).host}catch(r){e.target=null,zq.warn(t.TAG,"The URL object is failed to create.",r)}this.track(e,om.TelemetryType.Dependency)},t.prototype.flush=function(e){this.channel.triggerSend(e?!!e.isAppCrashing:!1,e?e.callback:void 0)},t.prototype.track=function(e,r){if(e&&om.telemetryTypeToBaseType(r)){var n=Jar.createEnvelope(e,r,this.commonProperties,this.context,this.config);e.time&&(n.time=e.time.toISOString());var o=this.runTelemetryProcessors(n,e.contextObjects);o=o&&Zse.samplingTelemetryProcessor(n,{correlationContext:$Ke.CorrelationContextManager.getCurrentContext()}),Zse.preAggregatedMetricsTelemetryProcessor(n,this.context),o&&(Zse.performanceMetricsTelemetryProcessor(n,this.quickPulseClient),this.channel.send(n))}else zq.warn(t.TAG,"track() requires telemetry object and telemetryType to be specified.")},t.prototype.setAutoPopulateAzureProperties=function(e){},t.prototype.getAuthorizationHandler=function(e){return e&&e.aadTokenCredential?(this.authorizationHandler||(zq.info(t.TAG,"Adding authorization handler"),this.authorizationHandler=new War(e.aadTokenCredential,e.aadAudience)),this.authorizationHandler):null},t.prototype.addTelemetryProcessor=function(e){this._telemetryProcessors.push(e)},t.prototype.clearTelemetryProcessors=function(){this._telemetryProcessors=[]},t.prototype.runTelemetryProcessors=function(e,r){var n=!0,o=this._telemetryProcessors.length;if(o===0)return n;r=r||{},r.correlationContext=$Ke.CorrelationContextManager.getCurrentContext();for(var s=0;s<o;++s)try{var a=this._telemetryProcessors[s];if(a&&a.apply(null,[e,r])===!1){n=!1;break}}catch(c){n=!0,zq.warn(t.TAG,"One of telemetry processors failed, telemetry item will be sent.",c,e)}return n&&(e&&e.tags&&(e.tags=Jse.validateStringMap(e.tags)),e&&e.data&&e.data.baseData&&e.data.baseData.properties&&(e.data.baseData.properties=Jse.validateStringMap(e.data.baseData.properties))),n},t.prototype.getStatsbeat=function(){return this._statsbeat},t.TAG="TelemetryClient",t})();VKe.exports=Xar});var WKe=m((Xse,zKe)=>{"use strict";var ecr=Xse&&Xse.__extends||(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(n[s]=o[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),tcr=HKe(),GKe=Ooe(),rcr=Wx(),Wq=qn(),ncr=(function(t){ecr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.trackNodeHttpRequestSync=function(r){r&&r.request&&r.response&&r.duration?GKe.trackRequestSync(this,r):Wq.warn("trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.")},e.prototype.trackNodeHttpRequest=function(r){(r.duration||r.error)&&Wq.warn("trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects."),r&&r.request&&r.response?GKe.trackRequest(this,r):Wq.warn("trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.")},e.prototype.trackNodeHttpDependency=function(r){r&&r.request?rcr.trackRequest(this,r):Wq.warn("trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.")},e})(tcr);zKe.exports=ncr});var YKe=m(KKe=>{"use strict";Object.defineProperty(KKe,"__esModule",{value:!0})});var XKe=m(X=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0});X.Configuration=X.liveMetricsClient=X.defaultClient=X.DistributedTracingModes=void 0;X.setup=fcr;X.start=JKe;X.getCorrelationContext=hcr;X.startOperation=mcr;X.wrapWithCorrelationContext=gcr;X.dispose=_cr;var tae=z_(),icr=hGe(),ocr=gGe(),rae=zU(),scr=_oe(),acr=xGe(),ccr=UGe(),lcr=Wx(),ucr=Ooe(),QKe=OE(),XM=qn(),ZKe=_ze(),nae=yze(),dcr=Sze();X.TelemetryClient=WKe();X.Contracts=sa();X.azureFunctionsTypes=YKe();var eae;(function(t){t[t.AI=0]="AI",t[t.AI_AND_W3C=1]="AI_AND_W3C"})(eae||(X.DistributedTracingModes=eae={}));var eN,tN,rN,nN,iN,yw,Ew,sT,oN,sN,$l=!1,Kq;function fcr(t){return X.defaultClient?XM.info("The default client is already setup"):(X.defaultClient=new X.TelemetryClient(t),eN=new icr(X.defaultClient),tN=new ocr(X.defaultClient),rN=new rae(X.defaultClient),nN=new scr(X.defaultClient),iN=new acr(X.defaultClient),yw=new ccr(X.defaultClient),sT=new ucr(X.defaultClient),oN=new lcr(X.defaultClient),Ew||(Ew=new nae.AutoCollectNativePerformance(X.defaultClient)),sN=new dcr.AzureFunctionsHook(X.defaultClient)),iae}function pcr(){X.defaultClient&&(X.defaultClient.config.enableAutoCollectExternalLoggers==null&&(X.defaultClient.config.enableAutoCollectExternalLoggers=!0),X.defaultClient.config.enableAutoCollectConsole==null&&(X.defaultClient.config.enableAutoCollectConsole=!1),X.defaultClient.config.enableAutoCollectExceptions==null&&(X.defaultClient.config.enableAutoCollectExceptions=!0),X.defaultClient.config.enableAutoCollectPerformance==null&&(X.defaultClient.config.enableAutoCollectPerformance=!0),X.defaultClient.config.enableAutoCollectPreAggregatedMetrics==null&&(X.defaultClient.config.enableAutoCollectPreAggregatedMetrics=!0),X.defaultClient.config.enableAutoCollectHeartbeat==null&&(X.defaultClient.config.enableAutoCollectHeartbeat=!0),X.defaultClient.config.enableAutoCollectRequests==null&&(X.defaultClient.config.enableAutoCollectRequests=!0),X.defaultClient.config.enableAutoCollectDependencies==null&&(X.defaultClient.config.enableAutoCollectDependencies=!0),X.defaultClient.config.enableUseDiskRetryCaching==null&&(X.defaultClient.config.enableUseDiskRetryCaching=!0),X.defaultClient.config.enableAutoDependencyCorrelation==null&&(X.defaultClient.config.enableAutoDependencyCorrelation=!0),X.defaultClient.config.enableSendLiveMetrics==null&&(X.defaultClient.config.enableSendLiveMetrics=!1),X.defaultClient.config.enableAutoCollectExtendedMetrics==null&&(X.defaultClient.config.enableAutoCollectExtendedMetrics=!0),X.defaultClient.config.enableWebInstrumentation==null&&(X.defaultClient.config.enableWebInstrumentation=!1),X.defaultClient.config.enableAutoCollectIncomingRequestAzureFunctions==null&&(X.defaultClient.config.enableAutoCollectIncomingRequestAzureFunctions=!1))}function JKe(){if(X.defaultClient){$l=!0,pcr(),eN.enable(X.defaultClient.config.enableAutoCollectExternalLoggers,X.defaultClient.config.enableAutoCollectConsole),tN.enable(X.defaultClient.config.enableAutoCollectExceptions),rN.enable(X.defaultClient.config.enableAutoCollectPerformance),nN.enable(X.defaultClient.config.enableAutoCollectPreAggregatedMetrics),iN.enable(X.defaultClient.config.enableAutoCollectHeartbeat),sT.useAutoCorrelation(X.defaultClient.config.enableAutoDependencyCorrelation,X.defaultClient.config.enableUseAsyncHooks),sT.enable(X.defaultClient.config.enableAutoCollectRequests),oN.enable(X.defaultClient.config.enableAutoCollectDependencies),yw.enable(X.defaultClient.config.enableWebInstrumentation,X.defaultClient.config.webInstrumentationConnectionString),X.defaultClient.config.enableSendLiveMetrics&&(X.liveMetricsClient||(X.liveMetricsClient=new ZKe(X.defaultClient.config,X.defaultClient.context,X.defaultClient.getAuthorizationHandler,X.defaultClient),Kq=new rae(X.liveMetricsClient,1e3,!0),X.liveMetricsClient.addCollector(Kq),X.defaultClient.quickPulseClient=X.liveMetricsClient),X.liveMetricsClient.enable(X.defaultClient.config.enableSendLiveMetrics)),sN.enable(X.defaultClient.config.enableAutoCollectIncomingRequestAzureFunctions);var t=nae.AutoCollectNativePerformance.parseEnabled(X.defaultClient.config.enableAutoCollectExtendedMetrics,X.defaultClient.config);Ew.enable(X.defaultClient.config.enableAutoCollectExtendedMetrics,t.disabledMetrics),X.defaultClient&&X.defaultClient.channel&&X.defaultClient.channel.setUseDiskRetryCaching(X.defaultClient.config.enableUseDiskRetryCaching,X.defaultClient.config.enableResendInterval,X.defaultClient.config.enableMaxBytesOnDisk)}else XM.warn("Start cannot be called before setup");return iae}function hcr(){return tae.CorrelationContextManager.getCurrentContext()}function mcr(t,e){return tae.CorrelationContextManager.startOperation(t,e)}function gcr(t,e){return tae.CorrelationContextManager.wrapCallback(t,e)}var iae=(function(){function t(){}return t.setDistributedTracingMode=function(e){return QKe.w3cEnabled=e===eae.AI_AND_W3C,t},t.setAutoCollectConsole=function(e,r){return r===void 0&&(r=!1),X.defaultClient&&(X.defaultClient.config.enableAutoCollectExternalLoggers=e,X.defaultClient.config.enableAutoCollectConsole=r,$l&&eN.enable(e,r)),t},t.setAutoCollectExceptions=function(e){return X.defaultClient&&(X.defaultClient.config.enableAutoCollectExceptions=e,$l&&tN.enable(e)),t},t.setAutoCollectPerformance=function(e,r){if(r===void 0&&(r=!0),X.defaultClient){X.defaultClient.config.enableAutoCollectPerformance=e;var n=nae.AutoCollectNativePerformance.parseEnabled(r,X.defaultClient.config);X.defaultClient.config.enableAutoCollectExtendedMetrics=n.isEnabled,$l&&(rN.enable(e),Ew.enable(X.defaultClient.config.enableAutoCollectExtendedMetrics,n.disabledMetrics))}return t},t.setAutoCollectPreAggregatedMetrics=function(e){return X.defaultClient&&(X.defaultClient.config.enableAutoCollectPreAggregatedMetrics=e,$l&&nN.enable(e)),t},t.setAutoCollectHeartbeat=function(e){return X.defaultClient&&(X.defaultClient.config.enableAutoCollectHeartbeat=e,$l&&iN.enable(e)),t},t.enableAutoWebSnippetInjection=function(e,r){return X.defaultClient&&(X.defaultClient.config.enableWebInstrumentation=e,X.defaultClient.config.webInstrumentationConnectionString=r,$l&&yw.enable(X.defaultClient.config.enableAutoWebSnippetInjection,X.defaultClient.config.webSnippetConnectionString)),t},t.enableWebInstrumentation=function(e,r){return X.defaultClient&&(X.defaultClient.config.enableWebInstrumentation=e,X.defaultClient.config.webInstrumentationConnectionString=r,$l&&yw.enable(X.defaultClient.config.enableWebInstrumentation,X.defaultClient.config.webInstrumentationConnectionString)),t},t.setAutoCollectRequests=function(e){return X.defaultClient&&(X.defaultClient.config.enableAutoCollectRequests=e,$l&&sT.enable(e)),t},t.setAutoCollectDependencies=function(e){return X.defaultClient&&(X.defaultClient.config.enableAutoCollectDependencies=e,$l&&oN.enable(e)),t},t.setAutoDependencyCorrelation=function(e,r){return X.defaultClient&&(X.defaultClient.config.enableAutoDependencyCorrelation=e,X.defaultClient.config.enableUseAsyncHooks=r,$l&&sT.useAutoCorrelation(e,r)),t},t.setUseDiskRetryCaching=function(e,r,n){return X.defaultClient&&(X.defaultClient.config.enableUseDiskRetryCaching=e,X.defaultClient.config.enableResendInterval=r,X.defaultClient.config.enableMaxBytesOnDisk=n,X.defaultClient.channel&&X.defaultClient.channel.setUseDiskRetryCaching(X.defaultClient.config.enableUseDiskRetryCaching,X.defaultClient.config.enableResendInterval,X.defaultClient.config.enableMaxBytesOnDisk)),t},t.setInternalLogging=function(e,r){return e===void 0&&(e=!1),r===void 0&&(r=!0),XM.enableDebug=e,XM.disableWarnings=!r,t},t.setAutoCollectIncomingRequestAzureFunctions=function(e){return X.defaultClient&&(X.defaultClient.config.enableAutoCollectIncomingRequestAzureFunctions=e,$l&&sN.enable(e)),t},t.setSendLiveMetrics=function(e){return e===void 0&&(e=!1),X.defaultClient?(!X.liveMetricsClient&&e?(X.liveMetricsClient=new ZKe(X.defaultClient.config,X.defaultClient.context,X.defaultClient.getAuthorizationHandler,X.defaultClient),Kq=new rae(X.liveMetricsClient,1e3,!0),X.liveMetricsClient.addCollector(Kq),X.defaultClient.quickPulseClient=X.liveMetricsClient):X.liveMetricsClient&&X.liveMetricsClient.enable(e),X.defaultClient.config.enableSendLiveMetrics=e,t):(XM.warn("Live metrics client cannot be setup without the default client"),t)},t.start=JKe,t})();X.Configuration=iae;function _cr(){QKe.w3cEnabled=!0,X.defaultClient=null,$l=!1,eN&&eN.dispose(),tN&&tN.dispose(),rN&&rN.dispose(),nN&&nN.dispose(),iN&&iN.dispose(),yw&&yw.dispose(),Ew&&Ew.dispose(),sT&&sT.dispose(),oN&&oN.dispose(),X.liveMetricsClient&&(X.liveMetricsClient.enable(!1),X.liveMetricsClient=void 0),sN&&sN.dispose()}});var sae=m(Hu=>{"use strict";var vcr=Hu&&Hu.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),ycr=Hu&&Hu.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),eYe=Hu&&Hu.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),o=0;o<n.length;o++)n[o]!=="default"&&vcr(r,e,n[o]);return ycr(r,e),r}})();Object.defineProperty(Hu,"__esModule",{value:!0});Hu.AzureInsightReporter=void 0;Hu.wrapEventNameForPrefixRemoval=Tcr;Hu.unwrapEventNameFromPrefix=tYe;process.env.APPLICATION_INSIGHTS_NO_STATSBEAT="true";var Ecr=eYe(XKe()),Yq=eYe(require("os"));function Tcr(t){return`wrapped-telemetry-event-name-${t}-wrapped-telemetry-event-name`}function Scr(t){return t.includes("wrapped-telemetry-event-name-")&&t.endsWith("-wrapped-telemetry-event-name")}function tYe(t){let e=t.match(/wrapped-telemetry-event-name-(.*?)-wrapped-telemetry-event-name/);return e?e[1]:t}var oae=class{constructor(e,r,n,o,s){this.tokenStore=n,this.namespace=o,this.client=bcr(e,r,s),rYe(e,r,this.client)}separateData(e){if(e.properties!==void 0||e.measurements!==void 0)return e.properties=e.properties||{},e.measurements=e.measurements||{},e;let r={},n={};for(let[o,s]of Object.entries(e))typeof s=="number"?n[o]=s:r[o]=s;return{properties:r,measurements:n}}sendEventData(e,r){let{properties:n,measurements:o}=this.separateData(r||{}),s=this.tokenStore.copilotToken?.getTokenValue("tid");this.client.trackEvent({name:this.massageEventName(e),properties:n,measurements:o,tagOverrides:s?{"ai.user.id":s}:void 0})}sendErrorData(e,r){let{properties:n,measurements:o}=this.separateData(r||{});this.client.trackException({exception:e,properties:n,measurements:o})}flush(){return new Promise(e=>{this.client.flush({callback:()=>{e(void 0)}})})}massageEventName(e){return Scr(e)?tYe(e):e.includes(this.namespace)?e:`${this.namespace}/${e}`}};Hu.AzureInsightReporter=oae;function bcr(t,e,r){let n=new Ecr.TelemetryClient(r);return n.config.enableAutoCollectRequests=!1,n.config.enableAutoCollectPerformance=!1,n.config.enableAutoCollectExceptions=!1,n.config.enableAutoCollectConsole=!1,n.config.enableAutoCollectDependencies=!1,n.config.noDiagnosticChannel=!0,rYe(t,e,n),n}function rYe(t,e,r){r.commonProperties=Ccr(r.commonProperties,e),r.context.tags[r.context.keys.cloudRoleInstance]="REDACTED",r.context.tags[r.context.keys.sessionId]=e.sessionId,r.config.endpointUrl=t.copilotTelemetryURL}function Ccr(t,e){return t=t||{},t.common_os=Yq.platform(),t.common_platformversion=Yq.release(),t.common_arch=Yq.arch(),t.common_cpu=Array.from(new Set(Yq.cpus().map(r=>r.model))).join(),t.common_vscodemachineid=e.machineId,t.common_vscodesessionid=e.sessionId,t.client_deviceid=e.devDeviceId,t.common_uikind=e.uiKind,t.common_remotename=e.remoteName??"none",t.common_isnewappinstall="",t}});var nYe=m((k3n,Acr)=>{Acr.exports={name:"copilot-chat",displayName:"GitHub Copilot Chat",description:"AI chat features powered by Copilot",version:"0.35.1",build:"1",internalAIKey:"1058ec22-3c95-4951-8443-f26c1f325911",completionsCoreVersion:"1.378.1799",internalLargeStorageAriaKey:"ec712b3202c5462fb6877acae7f1f9d7-c19ad55e-3e3c-4f99-984b-827f6d95bd9e-6917",ariaKey:"0c6ae279ed8443289764825290e4f9e2-1a736e7c-1324-4338-be46-fc2a58ae4d14-7255",buildType:"dev",publisher:"GitHub",homepage:"https://github.com/features/copilot?editor=vscode",license:"SEE LICENSE IN LICENSE.txt",repository:{type:"git",url:"https://github.com/microsoft/vscode-copilot-chat"},bugs:{url:"https://github.com/microsoft/vscode/issues"},qna:"https://github.com/github-community/community/discussions/categories/copilot",icon:"assets/copilot.png",pricing:"Trial",engines:{vscode:"^1.107.0-20251119",npm:">=9.0.0",node:">=22.14.0"},categories:["AI","Chat","Programming Languages","Machine Learning"],keywords:["ai","openai","codex","pilot","snippets","documentation","autocomplete","intellisense","refactor","javascript","python","typescript","php","go","golang","ruby","c++","c#","java","kotlin","co-pilot"],badges:[{url:"https://img.shields.io/badge/GitHub%20Copilot-Subscription%20Required-orange",href:"https://github.com/github-copilot/signup?editor=vscode",description:"%github.copilot.badge.signUp%"},{url:"https://img.shields.io/github/stars/github/copilot-docs?style=social",href:"https://github.com/github/copilot-docs",description:"%github.copilot.badge.star%"},{url:"https://img.shields.io/youtube/channel/views/UC7c3Kb6jYCRj4JOHHZTxKsQ?style=social",href:"https://www.youtube.com/@GitHub/search?query=copilot",description:"%github.copilot.badge.youtube%"},{url:"https://img.shields.io/twitter/follow/github?style=social",href:"https://twitter.com/github",description:"%github.copilot.badge.twitter%"}],activationEvents:["onStartupFinished","onLanguageModelChat:copilot","onUri","onFileSystem:ccreq","onFileSystem:ccsettings","onCustomAgentsProvider"],main:"./dist/extension",l10n:"./l10n",enabledApiProposals:["extensionsAny","newSymbolNamesProvider","interactive","codeActionAI","activeComment","commentReveal","contribCommentThreadAdditionalMenu","contribCommentsViewThreadMenus","documentFiltersExclusive","embeddings","findTextInFiles","findTextInFiles2","findFiles2@2","textSearchProvider","terminalDataWriteEvent","terminalExecuteCommandEvent","terminalSelection","terminalQuickFixProvider","mappedEditsProvider","aiRelatedInformation","aiSettingsSearch","chatParticipantAdditions","chatEditing","defaultChatParticipant@4","contribSourceControlInputBoxMenu","authLearnMore","testObserver","aiTextSearchProvider@2","chatParticipantPrivate@11","chatProvider@4","contribDebugCreateConfiguration","chatReferenceDiagnostic","textSearchProvider2","chatReferenceBinaryData","languageModelSystem","languageModelCapabilities","inlineCompletionsAdditions","chatStatusItem","taskProblemMatcherStatus","contribLanguageModelToolSets","textDocumentChangeReason","resolvers","taskExecutionTerminal","dataChannels","languageModelThinkingPart","chatSessionsProvider@3","devDeviceId","contribEditorContentMenu"],contributes:{languageModelTools:[{name:"copilot_searchCodebase",toolReferenceName:"codebase",displayName:"%copilot.tools.searchCodebase.name%",icon:"$(folder)",userDescription:"%copilot.codebase.tool.description%",modelDescription:"Run a natural language search for relevant code or documentation comments from the user's current workspace. Returns relevant code snippets from the user's current workspace if it is large, or the full contents of the workspace if it is small.",tags:["codesearch","vscode_codesearch"],inputSchema:{type:"object",properties:{query:{type:"string",description:"The query to search the codebase for. Should contain all relevant context. Should ideally be text that might appear in the codebase, such as function names, variable names, or comments."}},required:["query"]}},{name:"copilot_searchWorkspaceSymbols",toolReferenceName:"symbols",displayName:"%copilot.tools.searchWorkspaceSymbols.name%",icon:"$(symbol)",userDescription:"%copilot.workspaceSymbols.tool.description%",modelDescription:"Search the user's workspace for code symbols using language services. Use this tool when the user is looking for a specific symbol in their workspace.",tags:["vscode_codesearch"],inputSchema:{type:"object",properties:{symbolName:{type:"string",description:"The symbol to search for, such as a function name, class name, or variable name."}},required:["symbolName"]}},{name:"copilot_listCodeUsages",toolReferenceName:"usages",legacyToolReferenceFullNames:["usages"],displayName:"%copilot.tools.listCodeUsages.name%",icon:"$(references)",userDescription:"%copilot.listCodeUsages.tool.description%",modelDescription:`Request to list all usages (references, definitions, implementations etc) of a function, class, method, variable etc. Use this tool when 
1. Looking for a sample implementation of an interface or class
2. Checking how a function is used throughout the codebase.
3. Including and updating all usages when changing a function, method, or constructor`,tags:["vscode_codesearch"],inputSchema:{type:"object",properties:{symbolName:{type:"string",description:"The name of the symbol, such as a function name, class name, method name, variable name, etc."},filePaths:{type:"array",description:"One or more file paths which likely contain the definition of the symbol. For instance the file which declares a class or function. This is optional but will speed up the invocation of this tool and improve the quality of its output.",items:{type:"string"}}},required:["symbolName"]}},{name:"copilot_getVSCodeAPI",toolReferenceName:"vscodeAPI",displayName:"%copilot.tools.getVSCodeAPI.name%",icon:"$(references)",userDescription:"%copilot.vscode.tool.description%",modelDescription:`Get comprehensive VS Code API documentation and references for extension development. This tool provides authoritative documentation for VS Code's extensive API surface, including proposed APIs, contribution points, and best practices. Use this tool for understanding complex VS Code API interactions.

When to use this tool:
- User asks about specific VS Code APIs, interfaces, or extension capabilities
- Need documentation for VS Code extension contribution points (commands, views, settings, etc.)
- Questions about proposed APIs and their usage patterns
- Understanding VS Code extension lifecycle, activation events, and packaging
- Best practices for VS Code extension development architecture
- API examples and code patterns for extension features
- Troubleshooting extension-specific issues or API limitations

When NOT to use this tool:
- Creating simple standalone files or scripts unrelated to VS Code extensions
- General programming questions not specific to VS Code extension development
- Questions about using VS Code as an editor (user-facing features)
- Non-extension related development tasks
- File creation or editing that doesn't involve VS Code extension APIs

CRITICAL usage guidelines:
1. Always include specific API names, interfaces, or concepts in your query
2. Mention the extension feature you're trying to implement
3. Include context about proposed vs stable APIs when relevant
4. Reference specific contribution points when asking about extension manifest
5. Be specific about the VS Code version or API version when known

Scope: This tool is for EXTENSION DEVELOPMENT ONLY - building tools that extend VS Code itself, not for general file creation or non-extension programming tasks.`,inputSchema:{type:"object",properties:{query:{type:"string",description:"The query to search vscode documentation for. Should contain all relevant context."}},required:["query"]},tags:[]},{name:"copilot_findFiles",toolReferenceName:"fileSearch",displayName:"%copilot.tools.findFiles.name%",modelDescription:`Search for files in the workspace by glob pattern. This only returns the paths of matching files. Use this tool when you know the exact filename pattern of the files you're searching for. Glob patterns match from the root of the workspace folder. Examples:
- **/*.{js,ts} to match all js/ts files in the workspace.
- src/** to match all files under the top-level src folder.
- **/foo/**/*.js to match all js files under any foo folder in the workspace.`,tags:["vscode_codesearch"],inputSchema:{type:"object",properties:{query:{type:"string",description:"Search for files with names or paths matching this glob pattern."},maxResults:{type:"number",description:"The maximum number of results to return. Do not use this unless necessary, it can slow things down. By default, only some matches are returned. If you use this and don't see what you're looking for, you can try again with a more specific query or a larger maxResults."}},required:["query"]}},{name:"copilot_findTextInFiles",toolReferenceName:"textSearch",displayName:"%copilot.tools.findTextInFiles.name%",modelDescription:"Do a fast text search in the workspace. Use this tool when you want to search with an exact string or regex. If you are not sure what words will appear in the workspace, prefer using regex patterns with alternation (|) or character classes to search for multiple potential words at once instead of making separate searches. For example, use 'function|method|procedure' to look for all of those words at once. Use includePattern to search within files matching a specific pattern, or in a specific file, using a relative path. Use 'includeIgnoredFiles' to include files normally ignored by .gitignore, other ignore files, and `files.exclude` and `search.exclude` settings. Warning: using this may cause the search to be slower, only set it when you want to search in ignored folders like node_modules or build outputs. Use this tool when you want to see an overview of a particular file, instead of using read_file many times to look for code within a file.",tags:["vscode_codesearch"],inputSchema:{type:"object",properties:{query:{type:"string",description:"The pattern to search for in files in the workspace. Use regex with alternation (e.g., 'word1|word2|word3') or character classes to find multiple potential words in a single search. Be sure to set the isRegexp property properly to declare whether it's a regex or plain text pattern. Is case-insensitive."},isRegexp:{type:"boolean",description:"Whether the pattern is a regex."},includePattern:{type:"string",description:'Search files matching this glob pattern. Will be applied to the relative path of files within the workspace. To search recursively inside a folder, use a proper glob pattern like "src/folder/**". Do not use | in includePattern.'},maxResults:{type:"number",description:"The maximum number of results to return. Do not use this unless necessary, it can slow things down. By default, only some matches are returned. If you use this and don't see what you're looking for, you can try again with a more specific query or a larger maxResults."},includeIgnoredFiles:{type:"boolean",description:"Whether to include files that would normally be ignored according to .gitignore, other ignore files and `files.exclude` and `search.exclude` settings. Warning: using this may cause the search to be slower. Only set it when you want to search in ignored folders like node_modules or build outputs."}},required:["query","isRegexp"]}},{name:"copilot_applyPatch",displayName:"%copilot.tools.applyPatch.name%",toolReferenceName:"applyPatch",userDescription:"%copilot.tools.applyPatch.description%",modelDescription:`Edit text files. Do not use this tool to edit Jupyter notebooks. \`apply_patch\` allows you to execute a diff/patch against a text file, but the format of the diff specification is unique to this task, so pay careful attention to these instructions. To use the \`apply_patch\` command, you should pass a message of the following structure as "input":

*** Begin Patch
[YOUR_PATCH]
*** End Patch

Where [YOUR_PATCH] is the actual content of your patch, specified in the following V4A diff format.

*** [ACTION] File: [/absolute/path/to/file] -> ACTION can be one of Add, Update, or Delete.
An example of a message that you might pass as "input" to this function, in order to apply a patch, is shown below.

*** Begin Patch
*** Update File: /Users/someone/pygorithm/searching/binary_search.py
@@class BaseClass
@@    def search():
-        pass
+        raise NotImplementedError()

@@class Subclass
@@    def search():
-        pass
+        raise NotImplementedError()

*** End Patch
Do not use line numbers in this diff format.`,inputSchema:{type:"object",properties:{input:{type:"string",description:"The edit patch to apply."},explanation:{type:"string",description:"A short description of what the tool call is aiming to achieve."}},required:["input","explanation"]}},{name:"copilot_readFile",toolReferenceName:"readFile",legacyToolReferenceFullNames:["search/readFile"],displayName:"%copilot.tools.readFile.name%",userDescription:"%copilot.tools.readFile.userDescription%",modelDescription:`Read the contents of a file.

You must specify the line range you're interested in. Line numbers are 1-indexed. If the file contents returned are insufficient for your task, you may call this tool again to retrieve more content. Prefer reading larger ranges over doing many small reads.`,tags:["vscode_codesearch"],inputSchema:{type:"object",properties:{filePath:{description:"The absolute path of the file to read.",type:"string"},startLine:{type:"number",description:"The line number to start reading from, 1-based."},endLine:{type:"number",description:"The inclusive line number to end reading at, 1-based."}},required:["filePath","startLine","endLine"]}},{name:"copilot_listDirectory",toolReferenceName:"listDirectory",displayName:"%copilot.tools.listDirectory.name%",modelDescription:"List the contents of a directory. Result will have the name of the child. If the name ends in /, it's a folder, otherwise a file",tags:["vscode_codesearch"],inputSchema:{type:"object",properties:{path:{type:"string",description:"The absolute path to the directory to list."}},required:["path"]}},{name:"copilot_getErrors",displayName:"%copilot.tools.getErrors.name%",toolReferenceName:"problems",legacyToolReferenceFullNames:["problems"],icon:"$(error)",userDescription:"%copilot.tools.errors.description%",modelDescription:"Get any compile or lint errors in a specific file or across all files. If the user mentions errors or problems in a file, they may be referring to these. Use the tool to see the same errors that the user is seeing. If the user asks you to analyze all errors, or does not specify a file, use this tool to gather errors for all files. Also use this tool after editing a file to validate the change.",tags:[],inputSchema:{type:"object",properties:{filePaths:{description:"The absolute paths to the files or folders to check for errors. Omit 'filePaths' when retrieving all errors.",type:"array",items:{type:"string"}}}}},{name:"copilot_readProjectStructure",displayName:"%copilot.tools.readProjectStructure.name%",modelDescription:"Get a file tree representation of the workspace.",tags:[]},{name:"copilot_getChangedFiles",displayName:"%copilot.tools.getChangedFiles.name%",toolReferenceName:"changes",legacyToolReferenceFullNames:["changes"],icon:"$(diff)",userDescription:"%copilot.tools.changes.description%",modelDescription:"Get git diffs of current file changes in a git repository. Don't forget that you can use run_in_terminal to run git commands in a terminal as well.",tags:["vscode_codesearch"],inputSchema:{type:"object",properties:{repositoryPath:{type:"string",description:"The absolute path to the git repository to look for changes in. If not provided, the active git repository will be used."},sourceControlState:{type:"array",items:{type:"string",enum:["staged","unstaged","merge-conflicts"]},description:"The kinds of git state to filter by. Allowed values are: 'staged', 'unstaged', and 'merge-conflicts'. If not provided, all states will be included."}}}},{name:"copilot_testFailure",toolReferenceName:"testFailure",legacyToolReferenceFullNames:["testFailure"],displayName:"%copilot.tools.testFailure.name%",icon:"$(beaker)",userDescription:"%copilot.testFailure.tool.description%",modelDescription:"Includes test failure information in the prompt.",inputSchema:{},tags:["vscode_editing_with_tests","enable_other_tool_copilot_readFile","enable_other_tool_copilot_listDirectory","enable_other_tool_copilot_findFiles","enable_other_tool_copilot_runTests"]},{name:"copilot_updateUserPreferences",toolReferenceName:"updateUserPreferences",displayName:"%copilot.tools.updateUserPreferences.name%",modelDescription:"Update the user's preferences file with new information about the user and their coding preferences, based on the current chat history.",canBeReferencedInPrompt:!0,tags:[],inputSchema:{type:"object",properties:{facts:{type:"array",items:{type:"string"},description:"An array of new user preferences to remember."}},required:["facts"]},when:"config.github.copilot.chat.enableUserPreferences"},{name:"copilot_createNewWorkspace",displayName:"%github.copilot.tools.createNewWorkspace.name%",toolReferenceName:"newWorkspace",legacyToolReferenceFullNames:["new/newWorkspace"],icon:"$(new-folder)",userDescription:"%github.copilot.tools.createNewWorkspace.userDescription%",when:"config.github.copilot.chat.newWorkspaceCreation.enabled",modelDescription:`Get comprehensive setup steps to help the user create complete project structures in a VS Code workspace. This tool is designed for full project initialization and scaffolding, not for creating individual files.

When to use this tool:
- User wants to create a new complete project from scratch
- Setting up entire project frameworks (TypeScript projects, React apps, Node.js servers, etc.)
- Initializing Model Context Protocol (MCP) servers with full structure
- Creating VS Code extensions with proper scaffolding
- Setting up Next.js, Vite, or other framework-based projects
- User asks for "new project", "create a workspace", "set up a [framework] project"
- Need to establish complete development environment with dependencies, config files, and folder structure

When NOT to use this tool:
- Creating single files or small code snippets
- Adding individual files to existing projects
- Making modifications to existing codebases
- User asks to "create a file" or "add a component"
- Simple code examples or demonstrations
- Debugging or fixing existing code

This tool provides complete project setup including:
- Folder structure creation
- Package.json and dependency management
- Configuration files (tsconfig, eslint, etc.)
- Initial boilerplate code
- Development environment setup
- Build and run instructions

Use other file creation tools for individual files within existing projects.`,inputSchema:{type:"object",properties:{query:{type:"string",description:"The query to use to generate the new workspace. This should be a clear and concise description of the workspace the user wants to create."}},required:["query"]},tags:["enable_other_tool_install_extension","enable_other_tool_get_project_setup_info"]},{name:"copilot_getProjectSetupInfo",displayName:"%github.copilot.tools.getProjectSetupInfo.name%",when:"config.github.copilot.chat.newWorkspaceCreation.enabled",toolReferenceName:"getProjectSetupInfo",legacyToolReferenceFullNames:["new/getProjectSetupInfo"],modelDescription:"Do not call this tool without first calling the tool to create a workspace. This tool provides a project setup information for a Visual Studio Code workspace based on a project type and programming language.",inputSchema:{type:"object",properties:{projectType:{type:"string",description:"The type of project to create. Supported values are: 'python-script', 'python-project', 'mcp-server', 'model-context-protocol-server', 'vscode-extension', 'next-js', 'vite' and 'other'"}},required:["projectType"]},tags:[]},{name:"copilot_installExtension",displayName:"Install Extension in VS Code",when:"config.github.copilot.chat.newWorkspaceCreation.enabled",toolReferenceName:"installExtension",legacyToolReferenceFullNames:["new/installExtension"],modelDescription:"Install an extension in VS Code. Use this tool to install an extension in Visual Studio Code as part of a new workspace creation process only.",inputSchema:{type:"object",properties:{id:{type:"string",description:"The ID of the extension to install. This should be in the format <publisher>.<extension>."},name:{type:"string",description:"The name of the extension to install. This should be a clear and concise description of the extension."}},required:["id","name"]},tags:[]},{name:"copilot_runVscodeCommand",displayName:"Run VS Code Command",when:"config.github.copilot.chat.newWorkspaceCreation.enabled",toolReferenceName:"runCommand",legacyToolReferenceFullNames:["new/runVscodeCommand"],modelDescription:"Run a command in VS Code. Use this tool to run a command in Visual Studio Code as part of a new workspace creation process only.",inputSchema:{type:"object",properties:{commandId:{type:"string",description:"The ID of the command to execute. This should be in the format <command>."},name:{type:"string",description:"The name of the command to execute. This should be a clear and concise description of the command."},args:{type:"array",description:"The arguments to pass to the command. This should be an array of strings.",items:{type:"string"}}},required:["commandId","name"]},tags:[]},{name:"copilot_createNewJupyterNotebook",displayName:"Create New Jupyter Notebook",icon:"$(notebook)",toolReferenceName:"createJupyterNotebook",legacyToolReferenceFullNames:["newJupyterNotebook"],modelDescription:"Generates a new Jupyter Notebook (.ipynb) in VS Code. Jupyter Notebooks are interactive documents commonly used for data exploration, analysis, visualization, and combining code with narrative text. Prefer creating plain Python files or similar unless a user explicitly requests creating a new Jupyter Notebook or already has a Jupyter Notebook opened or exists in the workspace.",userDescription:"%copilot.tools.newJupyterNotebook.description%",inputSchema:{type:"object",properties:{query:{type:"string",description:"The query to use to generate the jupyter notebook. This should be a clear and concise description of the notebook the user wants to create."}},required:["query"]},tags:[]},{name:"copilot_insertEdit",toolReferenceName:"insertEdit",displayName:"%copilot.tools.insertEdit.name%",modelDescription:`Insert new code into an existing file in the workspace. Use this tool once per file that needs to be modified, even if there are multiple changes for a file. Generate the "explanation" property first.
The system is very smart and can understand how to apply your edits to the files, you just need to provide minimal hints.
Avoid repeating existing code, instead use comments to represent regions of unchanged code. Be as concise as possible. For example:
// ...existing code...
{ changed code }
// ...existing code...
{ changed code }
// ...existing code...

Here is an example of how you should use format an edit to an existing Person class:
class Person {
	// ...existing code...
	age: number;
	// ...existing code...
	getAge() {
	return this.age;
	}
}`,tags:[],inputSchema:{type:"object",properties:{explanation:{type:"string",description:"A short explanation of the edit being made."},filePath:{type:"string",description:"An absolute path to the file to edit."},code:{type:"string",description:`The code change to apply to the file.
The system is very smart and can understand how to apply your edits to the files, you just need to provide minimal hints.
Avoid repeating existing code, instead use comments to represent regions of unchanged code. Be as concise as possible. For example:
// ...existing code...
{ changed code }
// ...existing code...
{ changed code }
// ...existing code...

Here is an example of how you should use format an edit to an existing Person class:
class Person {
	// ...existing code...
	age: number;
	// ...existing code...
	getAge() {
		return this.age;
	}
}`}},required:["explanation","filePath","code"]}},{name:"copilot_createFile",toolReferenceName:"createFile",legacyToolReferenceFullNames:["createFile"],displayName:"%copilot.tools.createFile.name%",userDescription:"%copilot.tools.createFile.description%",modelDescription:"This is a tool for creating a new file in the workspace. The file will be created with the specified content. The directory will be created if it does not already exist. Never use this tool to edit a file that already exists.",tags:[],inputSchema:{type:"object",properties:{filePath:{type:"string",description:"The absolute path to the file to create."},content:{type:"string",description:"The content to write to the file."}},required:["filePath","content"]}},{name:"copilot_createDirectory",toolReferenceName:"createDirectory",legacyToolReferenceFullNames:["createDirectory"],displayName:"%copilot.tools.createDirectory.name%",userDescription:"%copilot.tools.createDirectory.description%",modelDescription:"Create a new directory structure in the workspace. Will recursively create all directories in the path, like mkdir -p. You do not need to use this tool before using create_file, that tool will automatically create the needed directories.",tags:[],inputSchema:{type:"object",properties:{dirPath:{type:"string",description:"The absolute path to the directory to create."}},required:["dirPath"]}},{name:"copilot_openSimpleBrowser",displayName:"%copilot.tools.openSimpleBrowser.name%",modelDescription:"Preview a website or open a URL in the editor's Simple Browser. Useful for quickly viewing locally hosted websites, demos, or resources without leaving the coding environment.",userDescription:"%copilot.tools.openSimpleBrowser.description%",toolReferenceName:"openSimpleBrowser",legacyToolReferenceFullNames:["openSimpleBrowser"],tags:[],inputSchema:{type:"object",properties:{url:{type:"string",description:"The website URL to preview or open in the Simple Browser inside the editor. Must be either an http or https URL"}},required:["url"]}},{name:"copilot_replaceString",toolReferenceName:"replaceString",displayName:"%copilot.tools.replaceString.name%",modelDescription:"This is a tool for making edits in an existing file in the workspace. For moving or renaming files, use run in terminal tool with the 'mv' command instead. For larger edits, split them into smaller edits and call the edit tool multiple times to ensure accuracy. Before editing, always ensure you have the context to understand the file's contents and context. To edit a file, provide: 1) filePath (absolute path), 2) oldString (MUST be the exact literal text to replace including all whitespace, indentation, newlines, and surrounding code etc), and 3) newString (MUST be the exact literal text to replace \\`oldString\\` with (also including all whitespace, indentation, newlines, and surrounding code etc.). Ensure the resulting code is correct and idiomatic.). Each use of this tool replaces exactly ONE occurrence of oldString.\n\nCRITICAL for \\`oldString\\`: Must uniquely identify the single instance to change. Include at least 3 lines of context BEFORE and AFTER the target text, matching whitespace and indentation precisely. If this string matches multiple locations, or does not match exactly, the tool will fail. Never use 'Lines 123-456 omitted' from summarized documents or ...existing code... comments in the oldString or newString.",when:"!config.github.copilot.chat.disableReplaceTool",inputSchema:{type:"object",properties:{filePath:{type:"string",description:"An absolute path to the file to edit."},oldString:{type:"string",description:"The exact literal text to replace, preferably unescaped. For single replacements (default), include at least 3 lines of context BEFORE and AFTER the target text, matching whitespace and indentation precisely. For multiple replacements, specify expected_replacements parameter. If this string is not the exact literal text (i.e. you escaped it) or does not match exactly, the tool will fail."},newString:{type:"string",description:"The exact literal text to replace `old_string` with, preferably unescaped. Provide the EXACT text. Ensure the resulting code is correct and idiomatic."}},required:["filePath","oldString","newString"]}},{name:"copilot_multiReplaceString",toolReferenceName:"multiReplaceString",displayName:"%copilot.tools.multiReplaceString.name%",modelDescription:"This tool allows you to apply multiple replace_string_in_file operations in a single call, which is more efficient than calling replace_string_in_file multiple times. It takes an array of replacement operations and applies them sequentially. Each replacement operation has the same parameters as replace_string_in_file: filePath, oldString, newString, and explanation. This tool is ideal when you need to make multiple edits across different files or multiple edits in the same file. The tool will provide a summary of successful and failed operations.",when:"!config.github.copilot.chat.disableReplaceTool",inputSchema:{type:"object",properties:{explanation:{type:"string",description:"A brief explanation of what the multi-replace operation will accomplish."},replacements:{type:"array",description:"An array of replacement operations to apply sequentially.",items:{type:"object",properties:{explanation:{type:"string",description:"A brief explanation of this specific replacement operation."},filePath:{type:"string",description:"An absolute path to the file to edit."},oldString:{type:"string",description:"The exact literal text to replace, preferably unescaped. Include at least 3 lines of context BEFORE and AFTER the target text, matching whitespace and indentation precisely. If this string is not the exact literal text or does not match exactly, this replacement will fail."},newString:{type:"string",description:"The exact literal text to replace `oldString` with, preferably unescaped. Provide the EXACT text. Ensure the resulting code is correct and idiomatic."}},required:["explanation","filePath","oldString","newString"]},minItems:1}},required:["explanation","replacements"]}},{name:"copilot_editNotebook",toolReferenceName:"editNotebook",icon:"$(pencil)",displayName:"%copilot.tools.editNotebook.name%",userDescription:"%copilot.tools.editNotebook.userDescription%",modelDescription:`This is a tool for editing an existing Notebook file in the workspace. Generate the "explanation" property first.
The system is very smart and can understand how to apply your edits to the notebooks.
When updating the content of an existing cell, ensure newCode preserves whitespace and indentation exactly and does NOT include any code markers such as (...existing code...).`,tags:["enable_other_tool_copilot_getNotebookSummary"],inputSchema:{type:"object",properties:{filePath:{type:"string",description:"An absolute path to the notebook file to edit, or the URI of a untitled, not yet named, file, such as `untitled:Untitled-1."},cellId:{type:"string",description:"Id of the cell that needs to be deleted or edited. Use the value `TOP`, `BOTTOM` when inserting a cell at the top or bottom of the notebook, else provide the id of the cell after which a new cell is to be inserted. Remember, if a cellId is provided and editType=insert, then a cell will be inserted after the cell with the provided cellId."},newCode:{anyOf:[{type:"string",description:"The code for the new or existing cell to be edited. Code should not be wrapped within <VSCode.Cell> tags. Do NOT include code markers such as (...existing code...) to indicate existing code."},{type:"array",items:{type:"string",description:"The code for the new or existing cell to be edited. Code should not be wrapped within <VSCode.Cell> tags"}}]},language:{type:"string",description:"The language of the cell. `markdown`, `python`, `javascript`, `julia`, etc."},editType:{type:"string",enum:["insert","delete","edit"],description:"The operation peformed on the cell, whether `insert`, `delete` or `edit`.\nUse the `editType` field to specify the operation: `insert` to add a new cell, `edit` to modify an existing cell's content, and `delete` to remove a cell."}},required:["filePath","editType","cellId"]}},{name:"copilot_runNotebookCell",displayName:"%copilot.tools.runNotebookCell.name%",toolReferenceName:"runNotebookCell",legacyToolReferenceFullNames:["runNotebooks/runCell"],icon:"$(play)",modelDescription:"This is a tool for running a code cell in a notebook file directly in the notebook editor. The output from the execution will be returned. Code cells should be run as they are added or edited when working through a problem to bring the kernel state up to date and ensure the code executes successfully. Code cells are ready to run and don't require any pre-processing. If asked to run the first cell in a notebook, you should run the first code cell since markdown cells cannot be executed. NOTE: Avoid executing Markdown cells or providing Markdown cell IDs, as Markdown cells cannot be  executed.",userDescription:"%copilot.tools.runNotebookCell.description%",tags:["enable_other_tool_copilot_getNotebookSummary"],inputSchema:{type:"object",properties:{filePath:{type:"string",description:"An absolute path to the notebook file with the cell to run, or the URI of a untitled, not yet named, file, such as `untitled:Untitled-1.ipynb"},reason:{type:"string",description:"An optional explanation of why the cell is being run. This will be shown to the user before the tool is run and is not necessary if it's self-explanatory."},cellId:{type:"string",description:"The ID for the code cell to execute. Avoid providing markdown cell IDs as nothing will be executed."},continueOnError:{type:"boolean",description:"Whether or not execution should continue for remaining cells if an error is encountered. Default to false unless instructed otherwise."}},required:["filePath","cellId"]}},{name:"copilot_getNotebookSummary",toolReferenceName:"getNotebookSummary",legacyToolReferenceFullNames:["runNotebooks/getNotebookSummary"],displayName:"Get the structure of a notebook",modelDescription:"This is a tool returns the list of the Notebook cells along with the id, cell types, line ranges, language, execution information and output mime types for each cell. This is useful to get Cell Ids when executing a notebook or determine what cells have been executed and what order, or what cells have outputs. If required to read contents of a cell use this to determine the line range of a cells, and then use read_file tool to read a specific line range. Requery this tool if the contents of the notebook change.",tags:[],inputSchema:{type:"object",properties:{filePath:{type:"string",description:"An absolute path to the notebook file with the cell to run, or the URI of a untitled, not yet named, file, such as `untitled:Untitled-1.ipynb"}},required:["filePath"]}},{name:"copilot_readNotebookCellOutput",displayName:"%copilot.tools.getNotebookCellOutput.name%",toolReferenceName:"readNotebookCellOutput",legacyToolReferenceFullNames:["runNotebooks/readNotebookCellOutput"],icon:"$(notebook-render-output)",modelDescription:"This tool will retrieve the output for a notebook cell from its most recent execution or restored from disk. The cell may have output even when it has not been run in the current kernel session. This tool has a higher token limit for output length than the runNotebookCell tool.",userDescription:"%copilot.tools.getNotebookCellOutput.description%",when:"userHasOpenedNotebook",tags:[],inputSchema:{type:"object",properties:{filePath:{type:"string",description:"An absolute path to the notebook file with the cell to run, or the URI of a untitled, not yet named, file, such as `untitled:Untitled-1.ipynb"},cellId:{type:"string",description:"The ID of the cell for which output should be retrieved."}},required:["filePath","cellId"]}},{name:"copilot_fetchWebPage",displayName:"%copilot.tools.fetchWebPage.name%",toolReferenceName:"fetch",legacyToolReferenceFullNames:["fetch"],when:"!isWeb",icon:"$(globe)",userDescription:"%copilot.tools.fetchWebPage.description%",modelDescription:"Fetches the main content from a web page. This tool is useful for summarizing or analyzing the content of a webpage. You should use this tool when you think the user is looking for information from a specific webpage.",tags:[],inputSchema:{type:"object",properties:{urls:{type:"array",items:{type:"string"},description:"An array of URLs to fetch content from."},query:{type:"string",description:"The query to search for in the web page's content. This should be a clear and concise description of the content you want to find."}},required:["urls","query"]}},{name:"copilot_findTestFiles",displayName:"%copilot.tools.findTestFiles.name%",icon:"$(beaker)",canBeReferencedInPrompt:!1,toolReferenceName:"findTestFiles",userDescription:"%copilot.tools.findTestFiles.description%",modelDescription:"For a source code file, find the file that contains the tests. For a test file find the file that contains the code under test.",tags:[],inputSchema:{type:"object",properties:{filePaths:{type:"array",items:{type:"string"}}},required:["filePaths"]}},{name:"copilot_getDocInfo",displayName:"%copilot.tools.getDocInfo.name%",icon:"$(beaker)",canBeReferencedInPrompt:!1,toolReferenceName:"docInfo",userDescription:"%copilot.tools.getDocInfo.description%",modelDescription:"Find information about how to document it a symbol like a class or function. This tool is useful for generating documentation comments for code symbols. You should use this tool when you think the user is looking for information about how to document a specific code symbol.",tags:[],inputSchema:{type:"object",properties:{filePaths:{type:"array",items:{type:"string"},description:"The file paths for which documentation information is needed."}},required:["filePaths"]}},{name:"copilot_getSearchResults",toolReferenceName:"searchResults",displayName:"%github.copilot.tools.searchResults.name%",icon:"$(search)",userDescription:"%github.copilot.tools.searchResults.description%",modelDescription:"The results from the search view"},{name:"copilot_githubRepo",toolReferenceName:"githubRepo",legacyToolReferenceFullNames:["githubRepo"],displayName:"%github.copilot.tools.githubRepo.name%",modelDescription:"Searches a GitHub repository for relevant source code snippets. Only use this tool if the user is very clearly asking for code snippets from a specific GitHub repository. Do not use this tool for Github repos that the user has open in their workspace.",userDescription:"%github.copilot.tools.githubRepo.userDescription%",icon:"$(repo)",when:"!config.github.copilot.chat.githubMcpServer.enabled",inputSchema:{type:"object",properties:{repo:{type:"string",description:"The name of the Github repository to search for code in. Should must be formatted as '<owner>/<repo>'."},query:{type:"string",description:"The query to search for repo. Should contain all relevant context."}},required:["repo","query"]}},{name:"copilot_toolReplay",modelDescription:"Replays a tool call from a previous chat session.",displayName:"tool replay",when:"false",inputSchema:{type:"object",properties:{toolCallId:{type:"string",description:"the id of the tool original tool call"},toolName:{type:"string",description:"the name of the tool being replayed"},toolCallArgs:{type:"object",description:"the arguments of the tool call"}}}},{name:"copilot_memory",toolReferenceName:"memory",displayName:"%copilot.tools.memory.name%",userDescription:"%copilot.tools.memory.description%",modelDescription:"Manage persistent memory across conversations. This tool allows you to create, view, update, and delete memory files that persist between chat sessions. Use this to remember important information about the user, their preferences, project context, or anything that should be recalled in future conversations. Available commands: view (list/read memories), create (new memory file), str_replace (edit content), insert (add content), delete (remove memory), rename (change filename).",icon:"$(database)",when:"config.github.copilot.chat.tools.memory.enabled",canBeReferencedInPrompt:!0,tags:[],inputSchema:{type:"object",properties:{command:{type:"string",enum:["view","create","str_replace","insert","delete","rename"],description:`The memory operation to perform:
- view: Show directory contents or file contents (optional line ranges)
- create: Create or overwrite a file
- str_replace: Replace text in a file
- insert: Insert text at a specific line
- delete: Delete a file or directory
- rename: Rename or move a file or directory`},path:{type:"string",description:`Path to the memory file or directory. Must start with /memories.
- For view: /memories or /memories/file.md
- For create/str_replace/insert/delete: /memories/file.md
- Not used for rename (use old_path/new_path instead)`},view_range:{type:"array",items:{type:"number"},minItems:2,maxItems:2,description:"[view only] Optional line range [start, end] to view specific lines. Example: [1, 10]"},file_text:{type:"string",description:"[create only] Content to write to the file. Required for create command."},old_str:{type:"string",description:"[str_replace only] The exact literal text to find and replace. Must be unique in the file. Required for str_replace command."},new_str:{type:"string",description:"[str_replace only] The exact literal text to replace old_str with. Can be empty string. Required for str_replace command."},insert_line:{type:"number",description:"[insert only] Line number at which to insert text (0-indexed, 0 = before first line). Required for insert command."},insert_text:{type:"string",description:"[insert only] Text to insert at the specified line. Required for insert command."},old_path:{type:"string",description:"[rename only] Current path of the file or directory. Must start with /memories. Required for rename command."},new_path:{type:"string",description:"[rename only] New path for the file or directory. Must start with /memories. Required for rename command."}},required:["command"]}},{name:"copilot_editFiles",modelDescription:"This is a placeholder tool, do not use",userDescription:"Edit files",icon:"$(pencil)",displayName:"Edit Files",toolReferenceName:"editFiles",legacyToolReferenceFullNames:["editFiles"]}],languageModelToolSets:[{name:"edit",description:"%copilot.toolSet.editing.description%",icon:"$(pencil)",tools:["createDirectory","createFile","createJupyterNotebook","editFiles","editNotebook"]},{name:"execute",description:"",tools:["runNotebookCell","testFailure"]},{name:"read",description:"%copilot.toolSet.read.description%",icon:"$(eye)",tools:["getNotebookSummary","problems","readFile","readNotebookCellOutput"]},{name:"search",description:"%copilot.toolSet.search.description%",icon:"$(search)",tools:["changes","codebase","fileSearch","listDirectory","searchResults","textSearch","usages"]},{name:"vscode",description:"",tools:["getProjectSetupInfo","installExtension","newWorkspace","openSimpleBrowser","runCommand","vscodeAPI"]},{name:"web",description:"%copilot.toolSet.web.description%",icon:"$(globe)",tools:["fetch","githubRepo"]}],chatParticipants:[{id:"github.copilot.default",name:"GitHubCopilot",fullName:"GitHub Copilot",description:"%copilot.description%",isDefault:!0,locations:["panel"],modes:["ask"],disambiguation:[{category:"generate_code_sample",description:"The user wants to generate code snippets without referencing the contents of the current workspace. This category does not include generating entire projects.",examples:["Write an example of computing a SHA256 hash."]},{category:"add_feature_to_file",description:"The user wants to change code in a file that is provided in their request, without referencing the contents of the current workspace. This category does not include generating entire projects.",examples:["Add a refresh button to the table widget."]},{category:"question_about_specific_files",description:"The user has a question about a specific file or code snippet that they have provided as part of their query, and the question does not require additional workspace context to answer.",examples:["What does this file do?"]}]},{id:"github.copilot.editingSession",name:"GitHubCopilot",fullName:"GitHub Copilot",description:"%copilot.edits.description%",isDefault:!0,locations:["panel"],modes:["edit"],when:"!config.chat.edits2.enabled"},{id:"github.copilot.editingSessionEditor",name:"GitHubCopilot",fullName:"GitHub Copilot",description:"%copilot.edits.description%",isDefault:!0,locations:["editor"],commands:[{name:"generate",when:"!config.inlineChat.enableV2",description:"%copilot.workspace.generate.description%",disambiguation:[{category:"generate",description:"Generate new code",examples:["Add a function that returns the sum of two numbers"]}]},{name:"edit",when:"!config.inlineChat.enableV2",description:"%copilot.workspace.edit.inline.description%",disambiguation:[{category:"edit",description:"Make changes to existing code",examples:["Change this method to use async/await"]}]},{name:"doc",when:"!config.inlineChat.enableV2",description:"%copilot.workspace.doc.description%",disambiguation:[{category:"doc",description:"Add documentation comment for this symbol",examples:["Add jsdoc to this method"]}]},{name:"fix",when:"!config.inlineChat.enableV2",description:"%copilot.workspace.fix.description%",disambiguation:[{category:"fix",description:"Propose a fix for the problems in the selected code",examples:["There is a problem in this code. Rewrite the code to show it with the bug fixed."]}]},{name:"tests",when:"!config.inlineChat.enableV2",description:"%copilot.workspace.tests.description%",disambiguation:[{category:"tests",description:"Generate unit tests for the selected code. The user does not want to fix their existing tests.",examples:["Write a set of detailed unit test functions for the code above."]}]}]},{id:"github.copilot.editingSession2",name:"GitHubCopilot",fullName:"GitHub Copilot",description:"%copilot.edits.description%",isDefault:!0,locations:["panel"],modes:["edit"],when:"config.chat.edits2.enabled"},{id:"github.copilot.editsAgent",name:"agent",fullName:"GitHub Copilot",description:"%copilot.agent.description%",locations:["panel"],modes:["agent"],isEngine:!0,isDefault:!0,isAgent:!0,when:"config.chat.agent.enabled",commands:[{name:"list"},{name:"error",description:"Make a model request which will result in an error",when:"github.copilot.chat.debug"}]},{id:"github.copilot.notebook",name:"GitHubCopilot",fullName:"GitHub Copilot",description:"%copilot.description%",isDefault:!0,locations:["notebook"],when:"!config.inlineChat.notebookAgent",commands:[{name:"fix",description:"%copilot.workspace.fix.description%"},{name:"explain",description:"%copilot.workspace.explain.description%"}]},{id:"github.copilot.notebookEditorAgent",name:"GitHubCopilot",fullName:"GitHub Copilot",description:"%copilot.description%",isDefault:!0,locations:["notebook"],when:"config.inlineChat.notebookAgent",commands:[{name:"fix",description:"%copilot.workspace.fix.description%"},{name:"explain",description:"%copilot.workspace.explain.description%"}]},{id:"github.copilot.workspace",name:"workspace",fullName:"Workspace",description:"%copilot.workspace.description%",when:"!github.copilot.interactiveSession.disabled",sampleRequest:"%copilot.workspace.sampleRequest%",locations:["panel"],disambiguation:[{category:"workspace_project_questions",description:"The user wants to learn about or update the code or files in their current workspace. Questions in this category may be about understanding what the whole workspace does or locating the implementation of some code. This does not include generating or updating tests.",examples:["What does this project do?"]},{category:"find_code_in_workspace",description:"The user wants to locate the implementation of some functionality in their current workspace.",examples:["Where is the tree widget implemented?"]},{category:"generate_with_workspace_context",description:"The user wants to generate code based on multiple files in the workspace and did not specify which files to reference.",examples:["Create a README for this project."]}],commands:[{name:"explain",description:"%copilot.workspace.explain.description%"},{name:"review",description:"%copilot.workspace.review.description%",when:"github.copilot.advanced.review.intent"},{name:"tests",description:"%copilot.workspace.tests.description%",disambiguation:[{category:"create_tests",description:"The user wants to generate unit tests.",examples:["Generate tests for my selection using pytest."]}]},{name:"fix",description:"%copilot.workspace.fix.description%",sampleRequest:"%copilot.workspace.fix.sampleRequest%"},{name:"new",description:"%copilot.workspace.new.description%",sampleRequest:"%copilot.workspace.new.sampleRequest%",isSticky:!0,disambiguation:[{category:"create_new_workspace_or_extension",description:"The user wants to create a complete Visual Studio Code workspace from scratch, such as a new application or a Visual Studio Code extension. Use this category only if the question relates to generating or creating new workspaces in Visual Studio Code. Do not use this category for updating existing code or generating sample code snippets",examples:["Scaffold a Node server.","Create a sample project which uses the fileSystemProvider API.","react application"]}]},{name:"newNotebook",description:"%copilot.workspace.newNotebook.description%",sampleRequest:"%copilot.workspace.newNotebook.sampleRequest%",disambiguation:[{category:"create_jupyter_notebook",description:"The user wants to create a new Jupyter notebook in Visual Studio Code.",examples:["Create a notebook to analyze this CSV file."]}]},{name:"semanticSearch",description:"%copilot.workspace.semanticSearch.description%",sampleRequest:"%copilot.workspace.semanticSearch.sampleRequest%",when:"config.github.copilot.semanticSearch.enabled"},{name:"setupTests",description:"%copilot.vscode.setupTests.description%",sampleRequest:"%copilot.vscode.setupTests.sampleRequest%",when:"config.github.copilot.chat.setupTests.enabled",disambiguation:[{category:"set_up_tests",description:"The user wants to configure project test setup, framework, or test runner. The user does not want to fix their existing tests.",examples:["Set up tests for this project."]}]}]},{id:"github.copilot.vscode",name:"vscode",fullName:"VS Code",description:"%copilot.vscode.description%",when:"!github.copilot.interactiveSession.disabled",sampleRequest:"%copilot.vscode.sampleRequest%",locations:["panel"],disambiguation:[{category:"vscode_configuration_questions",description:"The user wants to learn about, use, or configure the Visual Studio Code. Use this category if the users question is specifically about commands, settings, keybindings, extensions and other features available in Visual Studio Code. Do not use this category to answer questions about generating code or creating new projects including Visual Studio Code extensions.",examples:["Switch to light mode.","Keyboard shortcut to toggle terminal visibility.","Settings to enable minimap.","Whats new in the latest release?"]},{category:"configure_python_environment",description:"The user wants to set up their Python environment.",examples:["Create a virtual environment for my project."]}],commands:[{name:"search",description:"%copilot.vscode.search.description%",sampleRequest:"%copilot.vscode.search.sampleRequest%"}]},{id:"github.copilot.terminal",name:"terminal",fullName:"Terminal",description:"%copilot.terminal.description%",when:"!github.copilot.interactiveSession.disabled",sampleRequest:"%copilot.terminal.sampleRequest%",isDefault:!0,locations:["terminal"],commands:[{name:"explain",description:"%copilot.terminal.explain.description%",sampleRequest:"%copilot.terminal.explain.sampleRequest%"}]},{id:"github.copilot.terminalPanel",name:"terminal",fullName:"Terminal",description:"%copilot.terminalPanel.description%",when:"!github.copilot.interactiveSession.disabled",sampleRequest:"%copilot.terminal.sampleRequest%",locations:["panel"],commands:[{name:"explain",description:"%copilot.terminal.explain.description%",sampleRequest:"%copilot.terminal.explain.sampleRequest%",disambiguation:[{category:"terminal_state_questions",description:"The user wants to learn about specific state such as the selection, command, or failed command in the integrated terminal in Visual Studio Code.",examples:["Why did the latest terminal command fail?"]}]}]},{id:"github.copilot.chatReplay",name:"chatReplay",fullName:"Chat Replay",when:"debugType == 'vscode-chat-replay'",locations:["panel"]}],languageModelChatProviders:[{vendor:"copilot",displayName:"Copilot"},{vendor:"azure",displayName:"Azure",managementCommand:"github.copilot.chat.manageBYOK"},{vendor:"anthropic",displayName:"Anthropic",managementCommand:"github.copilot.chat.manageBYOK"},{vendor:"xai",displayName:"xAI",managementCommand:"github.copilot.chat.manageBYOK"},{vendor:"ollama",displayName:"Ollama"},{vendor:"openai",displayName:"OpenAI",managementCommand:"github.copilot.chat.manageBYOK"},{vendor:"gemini",displayName:"Google",managementCommand:"github.copilot.chat.manageBYOK"},{vendor:"groq",displayName:"Groq",managementCommand:"github.copilot.chat.manageBYOK"},{vendor:"openrouter",displayName:"OpenRouter",managementCommand:"github.copilot.chat.manageBYOK"},{vendor:"customoai",when:"productQualityType != 'stable'",displayName:"OpenAI Compatible",managementCommand:"github.copilot.chat.manageBYOK"}],interactiveSession:[{label:"GitHub Copilot",id:"copilot",icon:"",when:"!github.copilot.interactiveSession.disabled"}],mcpServerDefinitionProviders:[{id:"github",label:"GitHub"}],viewsWelcome:[{view:"debug",when:"github.copilot-chat.activated",contents:"%github.copilot.viewsWelcome.debug%"},{view:"codex-placeholder",when:"true",contents:"%github.copilot.viewsWelcome.codexPlaceholder%"},{view:"workbench.view.chat.sessions.openai-codex",contents:"%github.copilot.viewsWelcome.codexWelcomeView%"},{view:"copilot-agents-placeholder",when:"true",contents:"%github.copilot.viewsWelcome.agentsPlaceholder%"},{view:"workbench.view.chat.sessions.copilot-cloud-agent",when:"github.copilot.auth.missingPermissiveSession",contents:"%github.copilot.viewsWelcome.noPermissiveToken.contents%"},{view:"workbench.view.chat.sessions.copilot-cloud-agent",when:"workspaceFolderCount == 0",contents:"%github.copilot.viewsWelcome.noFolder.contents%"},{view:"workbench.view.chat.sessions.copilot-cloud-agent",when:"git.state == initialized && gitOpenRepositoryCount == 0 && workspaceFolderCount > 0 && git.parentRepositoryCount == 0",contents:"%github.copilot.viewsWelcome.noRepo.contents%"},{view:"workbench.view.chat.sessions.copilot-cloud-agent",when:"git.state == initialized && workspaceFolderCount > 0 && (git.parentRepositoryCount > 0 || gitOpenRepositoryCount > 0) && !github:hasGitHubRemotes",contents:"%github.copilot.viewsWelcome.noGitHub.contents%"},{view:"workbench.view.chat.sessions.copilot-cloud-agent",when:"github.copilot.chat.cloudSessionsEmpty",contents:"%github.copilot.viewsWelcome.cloudSessionsEmpty.contents%"},{view:"workbench.view.chat.sessions.copilotcli",when:"github.copilot.chat.cliSessionsEmpty",contents:"%github.copilot.viewsWelcome.cliSessionsEmpty.contents%"}],chatViewsWelcome:[{icon:"$(copilot-large)",title:"Ask Copilot",content:"%github.copilot.viewsWelcome.individual.expired%",when:"github.copilot.interactiveSession.individual.expired"},{icon:"$(copilot-large)",title:"Ask Copilot",content:"%github.copilot.viewsWelcome.enterprise%",when:"github.copilot.interactiveSession.enterprise.disabled"},{icon:"$(copilot-large)",title:"Ask Copilot",content:"%github.copilot.viewsWelcome.offline%",when:"github.copilot.offline"},{icon:"$(copilot-large)",title:"Ask Copilot",content:"%github.copilot.viewsWelcome.contactSupport%",when:"github.copilot.interactiveSession.contactSupport"},{icon:"$(copilot-large)",title:"Ask Copilot",content:"%github.copilot.viewsWelcome.chatDisabled%",when:"github.copilot.interactiveSession.chatDisabled"},{icon:"$(copilot-large)",title:"Ask Copilot",content:"%github.copilot.viewsWelcome.switchToReleaseChannel%",when:"github.copilot.interactiveSession.switchToReleaseChannel"}],commands:[{command:"github.copilot.chat.triggerPermissiveSignIn",title:"%github.copilot.command.triggerPermissiveSignIn%"},{command:"github.copilot.claude.sessions.refresh",title:"%github.copilot.command.refreshClaudeCodeSessions%",icon:"$(refresh)",category:"Claude Code"},{command:"github.copilot.cli.sessions.refresh",title:"%github.copilot.command.refreshAgentSessions%",icon:"$(refresh)",category:"Copilot CLI"},{command:"github.copilot.cli.sessions.delete",title:"%github.copilot.command.deleteAgentSession%",icon:"$(close)",category:"Copilot CLI"},{command:"github.copilot.cli.sessions.resumeInTerminal",title:"%github.copilot.command.cli.sessions.resumeInTerminal%",icon:"$(terminal)",category:"Copilot CLI"},{command:"github.copilot.cli.sessions.newTerminalSession",title:"%github.copilot.cli.sessions.newTerminalSession%",icon:"$(terminal)",category:"Copilot CLI"},{command:"github.copilot.chat.replay",title:"Start Chat Replay",icon:"$(debug-line-by-line)",enablement:"resourceFilename === 'benchRun.chatReplay.json' && !inDebugMode"},{command:"github.copilot.chat.replay.enableWorkspaceEditTracing",title:"%github.copilot.command.enableEditTracing%",category:"Developer",enablement:"!github.copilot.chat.replay.workspaceEditTracing"},{command:"github.copilot.chat.replay.disableWorkspaceEditTracing",title:"%github.copilot.command.disableEditTracing%",category:"Developer",enablement:"github.copilot.chat.replay.workspaceEditTracing"},{command:"github.copilot.chat.explain",title:"%github.copilot.command.explainThis%",enablement:"!github.copilot.interactiveSession.disabled",category:"Chat"},{command:"github.copilot.chat.explain.palette",title:"%github.copilot.command.explainThis%",enablement:"!github.copilot.interactiveSession.disabled && !editorReadonly",category:"Chat"},{command:"github.copilot.chat.review",title:"%github.copilot.command.reviewAndComment%",enablement:"config.github.copilot.chat.reviewSelection.enabled && !github.copilot.interactiveSession.disabled",category:"Chat"},{command:"github.copilot.chat.review.apply",title:"%github.copilot.command.applyReviewSuggestion%",icon:"$(sparkle)",enablement:"commentThread =~ /hasSuggestion/",category:"Chat"},{command:"github.copilot.chat.review.applyAndNext",title:"%github.copilot.command.applyReviewSuggestionAndNext%",icon:"$(sparkle)",enablement:"commentThread =~ /hasSuggestion/",category:"Chat"},{command:"github.copilot.chat.review.discard",title:"%github.copilot.command.discardReviewSuggestion%",icon:"$(close)",category:"Chat"},{command:"github.copilot.chat.review.discardAndNext",title:"%github.copilot.command.discardReviewSuggestionAndNext%",icon:"$(close)",category:"Chat"},{command:"github.copilot.chat.review.discardAll",title:"%github.copilot.command.discardAllReviewSuggestion%",icon:"$(close-all)",category:"Chat"},{command:"github.copilot.chat.review.stagedChanges",title:"%github.copilot.command.reviewStagedChanges%",icon:"$(code-review)",enablement:"github.copilot.chat.reviewDiff.enabled && !github.copilot.interactiveSession.disabled",category:"Chat"},{command:"github.copilot.chat.review.unstagedChanges",title:"%github.copilot.command.reviewUnstagedChanges%",icon:"$(code-review)",enablement:"github.copilot.chat.reviewDiff.enabled && !github.copilot.interactiveSession.disabled",category:"Chat"},{command:"github.copilot.chat.review.changes",title:"%github.copilot.command.reviewChanges%",icon:"$(code-review)",enablement:"github.copilot.chat.reviewDiff.enabled && !github.copilot.interactiveSession.disabled",category:"Chat"},{command:"github.copilot.chat.review.stagedFileChange",title:"%github.copilot.command.reviewFileChange%",icon:"$(code-review)",enablement:"github.copilot.chat.reviewDiff.enabled && !github.copilot.interactiveSession.disabled",category:"Chat"},{command:"github.copilot.chat.review.unstagedFileChange",title:"%github.copilot.command.reviewFileChange%",icon:"$(code-review)",enablement:"github.copilot.chat.reviewDiff.enabled && !github.copilot.interactiveSession.disabled",category:"Chat"},{command:"github.copilot.chat.review.previous",title:"%github.copilot.command.gotoPreviousReviewSuggestion%",icon:"$(arrow-up)",category:"Chat"},{command:"github.copilot.chat.review.next",title:"%github.copilot.command.gotoNextReviewSuggestion%",icon:"$(arrow-down)",category:"Chat"},{command:"github.copilot.chat.review.continueInInlineChat",title:"%github.copilot.command.continueReviewInInlineChat%",icon:"$(comment-discussion)",category:"Chat"},{command:"github.copilot.chat.review.continueInChat",title:"%github.copilot.command.continueReviewInChat%",icon:"$(comment-discussion)",category:"Chat"},{command:"github.copilot.chat.review.markHelpful",title:"%github.copilot.command.helpfulReviewSuggestion%",icon:"$(thumbsup)",enablement:"!(commentThread =~ /markedAsHelpful/)",category:"Chat"},{command:"github.copilot.chat.openUserPreferences",title:"%github.copilot.command.openUserPreferences%",category:"Chat",enablement:"config.github.copilot.chat.enableUserPreferences"},{command:"github.copilot.chat.tools.memory.openFolder",title:"%github.copilot.command.openMemoryFolder%",category:"Chat",enablement:"config.github.copilot.chat.tools.memory.enabled"},{command:"github.copilot.chat.review.markUnhelpful",title:"%github.copilot.command.unhelpfulReviewSuggestion%",icon:"$(thumbsdown)",enablement:"!(commentThread =~ /markedAsUnhelpful/)",category:"Chat"},{command:"github.copilot.chat.generate",title:"%github.copilot.command.generateThis%",icon:"$(sparkle)",enablement:"!github.copilot.interactiveSession.disabled && !editorReadonly",category:"Chat"},{command:"github.copilot.chat.generateDocs",title:"%github.copilot.command.generateDocs%",enablement:"!github.copilot.interactiveSession.disabled && !editorReadonly",category:"Chat"},{command:"github.copilot.chat.generateTests",title:"%github.copilot.command.generateTests%",enablement:"!github.copilot.interactiveSession.disabled && !editorReadonly",category:"Chat"},{command:"github.copilot.chat.fix",title:"%github.copilot.command.fixThis%",enablement:"!github.copilot.interactiveSession.disabled && !editorReadonly",category:"Chat"},{command:"github.copilot.interactiveSession.feedback",title:"%github.copilot.command.sendChatFeedback%",enablement:"github.copilot-chat.activated && !github.copilot.interactiveSession.disabled",icon:"$(feedback)",category:"Chat"},{command:"github.copilot.debug.workbenchState",title:"%github.copilot.command.logWorkbenchState%",category:"Developer"},{command:"github.copilot.debug.showChatLogView",title:"%github.copilot.command.showChatLogView%",category:"Developer"},{command:"github.copilot.debug.showOutputChannel",title:"%github.copilot.command.showOutputChannel%",category:"Developer"},{command:"github.copilot.debug.showContextInspectorView",title:"%github.copilot.command.showContextInspectorView%",icon:"$(inspect)",category:"Developer"},{command:"github.copilot.debug.validateNesRename",title:"%github.copilot.command.validateNesRename%",category:"Developer"},{command:"github.copilot.debug.resetVirtualToolGroups",title:"%github.copilot.command.resetVirtualToolGroups%",icon:"$(inspect)",category:"Developer"},{command:"github.copilot.terminal.explainTerminalLastCommand",title:"%github.copilot.command.explainTerminalLastCommand%",category:"Chat"},{command:"github.copilot.git.generateCommitMessage",title:"%github.copilot.git.generateCommitMessage%",icon:"$(sparkle)",enablement:"!github.copilot.interactiveSession.disabled",category:"Chat"},{command:"github.copilot.git.resolveMergeConflicts",title:"%github.copilot.git.resolveMergeConflicts%",icon:"$(chat-sparkle)",enablement:"!github.copilot.interactiveSession.disabled",category:"Chat"},{command:"github.copilot.devcontainer.generateDevContainerConfig",title:"%github.copilot.devcontainer.generateDevContainerConfig%",category:"Chat"},{command:"github.copilot.tests.fixTestFailure",icon:"$(sparkle)",title:"%github.copilot.command.fixTestFailure%",category:"Chat"},{command:"github.copilot.tests.fixTestFailure.fromInline",icon:"$(sparkle)",title:"%github.copilot.command.fixTestFailure%"},{command:"github.copilot.chat.attachFile",title:"%github.copilot.chat.attachFile%",category:"Chat"},{command:"github.copilot.chat.attachSelection",title:"%github.copilot.chat.attachSelection%",icon:"$(comment-discussion)",category:"Chat"},{command:"github.copilot.debug.collectDiagnostics",title:"%github.copilot.command.collectDiagnostics%",category:"Developer"},{command:"github.copilot.debug.inlineEdit.clearCache",title:"%github.copilot.command.inlineEdit.clearCache%",category:"Developer"},{command:"github.copilot.debug.inlineEdit.reportNotebookNESIssue",title:"%github.copilot.command.inlineEdit.reportNotebookNESIssue%",enablement:"config.github.copilot.chat.advanced.notebook.alternativeNESFormat.enabled || github.copilot.chat.enableEnhancedNotebookNES",category:"Developer"},{command:"github.copilot.debug.generateSTest",title:"%github.copilot.command.generateSTest%",enablement:"github.copilot.debugReportFeedback",category:"Developer"},{command:"github.copilot.open.walkthrough",title:"%github.copilot.command.openWalkthrough%",category:"Chat"},{command:"github.copilot.debug.generateInlineEditTests",title:"Generate Inline Edit Tests",category:"Chat",enablement:"resourceScheme == 'ccreq'"},{command:"github.copilot.buildLocalWorkspaceIndex",title:"%github.copilot.command.buildLocalWorkspaceIndex%",category:"Chat",enablement:"github.copilot-chat.activated"},{command:"github.copilot.buildRemoteWorkspaceIndex",title:"%github.copilot.command.buildRemoteWorkspaceIndex%",category:"Chat",enablement:"github.copilot-chat.activated"},{command:"github.copilot.report",title:"Report Issue",category:"Chat"},{command:"github.copilot.chat.rerunWithCopilotDebug",title:"%github.copilot.command.rerunWithCopilotDebug%",category:"Chat"},{command:"github.copilot.chat.startCopilotDebugCommand",title:"Start Copilot Debug"},{command:"github.copilot.chat.clearTemporalContext",title:"Clear Temporal Context",category:"Developer"},{command:"github.copilot.search.markHelpful",title:"Helpful",icon:"$(thumbsup)",enablement:"!github.copilot.search.feedback.sent"},{command:"github.copilot.search.markUnhelpful",title:"Unhelpful",icon:"$(thumbsdown)",enablement:"!github.copilot.search.feedback.sent"},{command:"github.copilot.search.feedback",title:"Feedback",icon:"$(feedback)",enablement:"!github.copilot.search.feedback.sent"},{command:"github.copilot.chat.debug.showElements",title:"Show Rendered Elements"},{command:"github.copilot.chat.debug.hideElements",title:"Hide Rendered Elements"},{command:"github.copilot.chat.debug.showTools",title:"Show Tools"},{command:"github.copilot.chat.debug.hideTools",title:"Hide Tools"},{command:"github.copilot.chat.debug.showNesRequests",title:"Show NES Requests"},{command:"github.copilot.chat.debug.hideNesRequests",title:"Hide NES Requests"},{command:"github.copilot.chat.debug.showRawRequestBody",title:"Show Raw Request Body"},{command:"github.copilot.chat.debug.exportLogItem",title:"Export as...",icon:"$(export)"},{command:"github.copilot.chat.debug.exportPromptArchive",title:"Export All as Archive...",icon:"$(archive)"},{command:"github.copilot.chat.debug.exportPromptLogsAsJson",title:"Export All as JSON...",icon:"$(export)"},{command:"github.copilot.chat.debug.exportAllPromptLogsAsJson",title:"Export All Prompt Logs as JSON...",icon:"$(export)"},{command:"github.copilot.chat.showAsChatSession",title:"Show as chat session",icon:"$(chat-sparkle)"},{command:"github.copilot.debug.collectWorkspaceIndexDiagnostics",title:"%github.copilot.command.collectWorkspaceIndexDiagnostics%",category:"Developer"},{command:"github.copilot.chat.mcp.setup.check",title:"MCP Check: is supported"},{command:"github.copilot.chat.mcp.setup.validatePackage",title:"MCP Check: validate package"},{command:"github.copilot.chat.mcp.setup.flow",title:"MCP Check: do prompts"},{command:"github.copilot.chat.generateAltText",title:"Generate/Refine Alt Text"},{command:"github.copilot.chat.notebook.enableFollowCellExecution",title:"Enable Follow Cell Execution from Chat",shortTitle:"Follow",icon:"$(pinned)"},{command:"github.copilot.chat.notebook.disableFollowCellExecution",title:"Disable Follow Cell Execution from Chat",shortTitle:"Unfollow",icon:"$(pinned-dirty)"},{command:"github.copilot.chat.manageBYOK",title:"Manage Bring Your Own Key Vendor",enablement:"false"},{command:"github.copilot.chat.manageBYOKAPIKey",title:"Manage Bring Your Own Key API Key",enablement:"false"},{command:"github.copilot.cloud.sessions.refresh",title:"%github.copilot.command.refreshAgentSessions%",icon:"$(refresh)"},{command:"github.copilot.cloud.resetWorkspaceConfirmations",title:"%github.copilot.command.resetCloudAgentWorkspaceConfirmations%"},{command:"github.copilot.cloud.sessions.openInBrowser",title:"%github.copilot.command.openCopilotAgentSessionsInBrowser%",icon:"$(link-external)"},{command:"github.copilot.cloud.sessions.proxy.closeChatSessionPullRequest",title:"%github.copilot.command.closeChatSessionPullRequest.title%"},{command:"github.copilot.chat.openSuggestionsPanel",title:"Open Completions Panel",enablement:"github.copilot.extensionUnification.activated && !isWeb",category:"GitHub Copilot"},{command:"github.copilot.chat.toggleStatusMenu",title:"Open Status Menu",enablement:"github.copilot.extensionUnification.activated",category:"GitHub Copilot"},{command:"github.copilot.chat.completions.disable",title:"Disable Inline Suggestions",enablement:"github.copilot.extensionUnification.activated && github.copilot.activated && config.editor.inlineSuggest.enabled && github.copilot.completions.enabled",category:"GitHub Copilot"},{command:"github.copilot.chat.completions.enable",title:"Enable Inline Suggestions",enablement:"github.copilot.extensionUnification.activated && github.copilot.activated && !(config.editor.inlineSuggest.enabled && github.copilot.completions.enabled)",category:"GitHub Copilot"},{command:"github.copilot.chat.completions.toggle",title:"Toggle (Enable/Disable) Inline Suggestions",enablement:"github.copilot.extensionUnification.activated && github.copilot.activated",category:"GitHub Copilot"},{command:"github.copilot.chat.openModelPicker",title:"Change Completions Model",category:"GitHub Copilot",enablement:"github.copilot.extensionUnification.activated && !isWeb"},{command:"github.copilot.chat.applyCopilotCLIAgentSessionChanges",title:"%github.copilot.command.applyCopilotCLIAgentSessionChanges%",icon:"$(git-stash-pop)",category:"GitHub Copilot"},{command:"github.copilot.chat.applyCopilotCLIAgentSessionChanges.apply",title:"%github.copilot.chat.applyCopilotCLIAgentSessionChanges.apply%",icon:"$(git-stash-pop)",category:"GitHub Copilot"}],configuration:[{title:"GitHub Copilot Chat",id:"stable",properties:{"github.copilot.chat.codeGeneration.useInstructionFiles":{type:"boolean",default:!0,markdownDescription:"%github.copilot.config.codeGeneration.useInstructionFiles%"},"github.copilot.editor.enableCodeActions":{type:"boolean",default:!0,description:"%github.copilot.config.enableCodeActions%"},"github.copilot.renameSuggestions.triggerAutomatically":{type:"boolean",default:!0,description:"%github.copilot.config.renameSuggestions.triggerAutomatically%"},"github.copilot.chat.localeOverride":{type:"string",enum:["auto","en","fr","it","de","es","ru","zh-CN","zh-TW","ja","ko","cs","pt-br","tr","pl"],enumDescriptions:["Use VS Code's configured display language","English","fran\xE7ais","italiano","Deutsch","espa\xF1ol","\u0440\u0443\u0441\u0441\u043A\u0438\u0439","\u4E2D\u6587(\u7B80\u4F53)","\u4E2D\u6587(\u7E41\u9AD4)","\u65E5\u672C\u8A9E","\uD55C\uAD6D\uC5B4","\u010De\u0161tina","portugu\xEAs","T\xFCrk\xE7e","polski"],default:"auto",markdownDescription:"%github.copilot.config.localeOverride%"},"github.copilot.chat.terminalChatLocation":{type:"string",default:"chatView",markdownDescription:"%github.copilot.config.terminalChatLocation%",markdownEnumDescriptions:["%github.copilot.config.terminalChatLocation.chatView%","%github.copilot.config.terminalChatLocation.quickChat%","%github.copilot.config.terminalChatLocation.terminal%"],enum:["chatView","quickChat","terminal"]},"github.copilot.chat.scopeSelection":{type:"boolean",default:!1,markdownDescription:"%github.copilot.config.scopeSelection%"},"github.copilot.chat.useProjectTemplates":{type:"boolean",default:!0,markdownDescription:"%github.copilot.config.useProjectTemplates%"},"github.copilot.nextEditSuggestions.enabled":{type:"boolean",default:!1,tags:["nextEditSuggestions","onExp"],markdownDescription:"%github.copilot.nextEditSuggestions.enabled%",scope:"language-overridable"},"github.copilot.nextEditSuggestions.fixes":{type:"boolean",default:!0,tags:["nextEditSuggestions","onExp"],markdownDescription:"%github.copilot.nextEditSuggestions.fixes%",scope:"language-overridable"},"github.copilot.nextEditSuggestions.allowWhitespaceOnlyChanges":{type:"boolean",default:!0,tags:["nextEditSuggestions","onExp"],markdownDescription:"%github.copilot.nextEditSuggestions.allowWhitespaceOnlyChanges%",scope:"language-overridable"},"github.copilot.chat.agent.autoFix":{type:"boolean",default:!0,description:"%github.copilot.config.autoFix%",tags:["onExp"]},"github.copilot.chat.customInstructionsInSystemMessage":{type:"boolean",default:!0,description:"%github.copilot.config.customInstructionsInSystemMessage%"},"github.copilot.chat.agent.currentEditorContext.enabled":{type:"boolean",default:!0,description:"%github.copilot.config.agent.currentEditorContext.enabled%"},"github.copilot.enable":{type:"object",scope:"window",default:{"*":!0,plaintext:!1,markdown:!1,scminput:!1},additionalProperties:{type:"boolean"},markdownDescription:"Enable or disable auto triggering of Copilot completions for specified [languages](https://code.visualstudio.com/docs/languages/identifiers). You can still trigger suggestions manually using `Alt + \\`"},"github.copilot.selectedCompletionModel":{type:"string",default:"",markdownDescription:'The currently selected completion model ID. To select from a list of available models, use the __"Change Completions Model"__ command or open the model picker (from the Copilot menu in the VS Code title bar, select __"Configure Code Completions"__ then __"Change Completions Model"__. The value must be a valid model ID. An empty value indicates that the default model will be used.'}}},{id:"preview",properties:{"github.copilot.chat.reviewAgent.enabled":{type:"boolean",default:!0,description:"%github.copilot.config.reviewAgent.enabled%",tags:["preview"]},"github.copilot.chat.reviewSelection.enabled":{type:"boolean",default:!0,description:"%github.copilot.config.reviewSelection.enabled%",tags:["preview"]},"github.copilot.chat.reviewSelection.instructions":{type:"array",items:{oneOf:[{type:"object",markdownDescription:"%github.copilot.config.reviewSelection.instruction.file%",properties:{file:{type:"string",examples:[".copilot-review-instructions.md"]},language:{type:"string"}},examples:[{file:".copilot-review-instructions.md"}],required:["file"]},{type:"object",markdownDescription:"%github.copilot.config.reviewSelection.instruction.text%",properties:{text:{type:"string",examples:["Use underscore for field names."]},language:{type:"string"}},required:["text"],examples:[{text:"Use underscore for field names."},{text:"Resolve all TODO tasks."}]}]},default:[],markdownDescription:"%github.copilot.config.reviewSelection.instructions%",examples:[[{file:".copilot-review-instructions.md"},{text:"Resolve all TODO tasks."}]],tags:["preview"]},"github.copilot.chat.copilotDebugCommand.enabled":{type:"boolean",default:!0,tags:["preview"],description:"%github.copilot.chat.copilotDebugCommand.enabled%"},"github.copilot.chat.codesearch.enabled":{type:"boolean",default:!1,tags:["preview"],markdownDescription:"%github.copilot.config.codesearch.enabled%"},"github.copilot.chat.byok.ollamaEndpoint":{type:"string",default:"http://localhost:11434",tags:["preview"],markdownDescription:"%github.copilot.config.byok.ollamaEndpoint%"}}},{id:"experimental",properties:{"github.copilot.chat.githubMcpServer.enabled":{type:"boolean",default:!1,markdownDescription:"%github.copilot.config.githubMcpServer.enabled%",tags:["experimental"]},"github.copilot.chat.githubMcpServer.toolsets":{type:"array",default:["default"],markdownDescription:"%github.copilot.config.githubMcpServer.toolsets%",items:{type:"string"},tags:["experimental"]},"github.copilot.chat.githubMcpServer.readonly":{type:"boolean",default:!1,markdownDescription:"%github.copilot.config.githubMcpServer.readonly%",tags:["experimental"]},"github.copilot.chat.githubMcpServer.lockdown":{type:"boolean",default:!1,markdownDescription:"%github.copilot.config.githubMcpServer.lockdown%",tags:["experimental"]},"github.copilot.chat.imageUpload.enabled":{type:"boolean",default:!0,tags:["experimental","onExp"],markdownDescription:"%github.copilot.config.imageUpload.enabled%"},"github.copilot.chat.edits.suggestRelatedFilesFromGitHistory":{type:"boolean",default:!0,tags:["experimental"],markdownDescription:"%github.copilot.config.edits.suggestRelatedFilesFromGitHistory%"},"github.copilot.chat.edits.suggestRelatedFilesForTests":{type:"boolean",default:!0,tags:["experimental"],markdownDescription:"%github.copilot.chat.edits.suggestRelatedFilesForTests%"},"github.copilot.chat.codeGeneration.instructions":{markdownDeprecationMessage:"%github.copilot.config.codeGeneration.instructions.deprecated%",type:"array",items:{oneOf:[{type:"object",markdownDescription:"%github.copilot.config.codeGeneration.instruction.file%",properties:{file:{type:"string",examples:[".copilot-codeGeneration-instructions.md"]},language:{type:"string"}},examples:[{file:".copilot-codeGeneration-instructions.md"}],required:["file"]},{type:"object",markdownDescription:"%github.copilot.config.codeGeneration.instruction.text%",properties:{text:{type:"string",examples:["Use underscore for field names."]},language:{type:"string"}},required:["text"],examples:[{text:"Use underscore for field names."},{text:"Always add a comment: 'Generated by Copilot'."}]}]},default:[],markdownDescription:"%github.copilot.config.codeGeneration.instructions%",examples:[[{file:".copilot-codeGeneration-instructions.md"},{text:"Always add a comment: 'Generated by Copilot'."}]],tags:["experimental"]},"github.copilot.chat.testGeneration.instructions":{markdownDeprecationMessage:"%github.copilot.config.testGeneration.instructions.deprecated%",type:"array",items:{oneOf:[{type:"object",markdownDescription:"%github.copilot.config.experimental.testGeneration.instruction.file%",properties:{file:{type:"string",examples:[".copilot-test-instructions.md"]},language:{type:"string"}},examples:[{file:".copilot-test-instructions.md"}],required:["file"]},{type:"object",markdownDescription:"%github.copilot.config.experimental.testGeneration.instruction.text%",properties:{text:{type:"string",examples:["Use suite and test instead of describe and it."]},language:{type:"string"}},required:["text"],examples:[{text:"Always try uniting related tests in a suite."}]}]},default:[],markdownDescription:"%github.copilot.config.testGeneration.instructions%",examples:[[{file:".copilot-test-instructions.md"},{text:"Always try uniting related tests in a suite."}]],tags:["experimental"]},"github.copilot.chat.commitMessageGeneration.instructions":{type:"array",items:{oneOf:[{type:"object",markdownDescription:"%github.copilot.config.commitMessageGeneration.instruction.file%",properties:{file:{type:"string",examples:[".copilot-commit-message-instructions.md"]}},examples:[{file:".copilot-commit-message-instructions.md"}],required:["file"]},{type:"object",markdownDescription:"%github.copilot.config.commitMessageGeneration.instruction.text%",properties:{text:{type:"string",examples:["Use conventional commit message format."]}},required:["text"],examples:[{text:"Use conventional commit message format."}]}]},default:[],markdownDescription:"%github.copilot.config.commitMessageGeneration.instructions%",examples:[[{file:".copilot-commit-message-instructions.md"},{text:"Use conventional commit message format."}]],tags:["experimental"]},"github.copilot.chat.pullRequestDescriptionGeneration.instructions":{type:"array",items:{oneOf:[{type:"object",markdownDescription:"%github.copilot.config.pullRequestDescriptionGeneration.instruction.file%",properties:{file:{type:"string",examples:[".copilot-pull-request-description-instructions.md"]}},examples:[{file:".copilot-pull-request-description-instructions.md"}],required:["file"]},{type:"object",markdownDescription:"%github.copilot.config.pullRequestDescriptionGeneration.instruction.text%",properties:{text:{type:"string",examples:["Include every commit message in the pull request description."]}},required:["text"],examples:[{text:"Include every commit message in the pull request description."}]}]},default:[],markdownDescription:"%github.copilot.config.pullRequestDescriptionGeneration.instructions%",examples:[[{file:".copilot-pull-request-description-instructions.md"},{text:"Use conventional commit message format."}]],tags:["experimental"]},"github.copilot.chat.generateTests.codeLens":{type:"boolean",default:!1,description:"%github.copilot.config.generateTests.codeLens%",tags:["experimental"]},"github.copilot.chat.setupTests.enabled":{type:"boolean",default:!0,markdownDescription:"%github.copilot.config.setupTests.enabled%",tags:["experimental"]},"github.copilot.chat.languageContext.typescript.enabled":{type:"boolean",default:!1,scope:"resource",tags:["experimental","onExP"],markdownDescription:"%github.copilot.chat.languageContext.typescript.enabled%"},"github.copilot.chat.languageContext.typescript.items":{type:"string",enum:["minimal","double","fillHalf","fill"],default:"double",scope:"resource",tags:["experimental","onExP"],markdownDescription:"%github.copilot.chat.languageContext.typescript.items%"},"github.copilot.chat.languageContext.typescript.includeDocumentation":{type:"boolean",default:!1,scope:"resource",tags:["experimental","onExP"],markdownDescription:"%github.copilot.chat.languageContext.typescript.includeDocumentation%"},"github.copilot.chat.languageContext.typescript.cacheTimeout":{type:"number",default:500,scope:"resource",tags:["experimental","onExP"],markdownDescription:"%github.copilot.chat.languageContext.typescript.cacheTimeout%"},"github.copilot.chat.languageContext.fix.typescript.enabled":{type:"boolean",default:!1,scope:"resource",tags:["experimental","onExP"],markdownDescription:"%github.copilot.chat.languageContext.fix.typescript.enabled%"},"github.copilot.chat.languageContext.inline.typescript.enabled":{type:"boolean",default:!1,scope:"resource",tags:["experimental","onExP"],markdownDescription:"%github.copilot.chat.languageContext.inline.typescript.enabled%"},"github.copilot.chat.newWorkspaceCreation.enabled":{type:"boolean",default:!0,tags:["experimental"],description:"%github.copilot.config.newWorkspaceCreation.enabled%"},"github.copilot.chat.newWorkspace.useContext7":{type:"boolean",default:!1,tags:["experimental"],markdownDescription:"%github.copilot.config.newWorkspace.useContext7%"},"github.copilot.chat.notebook.followCellExecution.enabled":{type:"boolean",default:!1,tags:["experimental"],description:"%github.copilot.config.notebook.followCellExecution%"},"github.copilot.chat.notebook.enhancedNextEditSuggestions.enabled":{type:"boolean",default:!1,tags:["experimental","onExp"],description:"%github.copilot.config.notebook.enhancedNextEditSuggestions%"},"github.copilot.chat.summarizeAgentConversationHistory.enabled":{type:"boolean",default:!0,tags:["experimental"],description:"%github.copilot.config.summarizeAgentConversationHistory.enabled%"},"github.copilot.chat.virtualTools.threshold":{type:"number",minimum:0,maximum:128,default:128,tags:["experimental"],markdownDescription:"%github.copilot.config.virtualTools.threshold%"},"github.copilot.chat.azureAuthType":{type:"string",enum:["entraId","apiKey"],enumDescriptions:["%github.copilot.config.azureAuthType.entraId%","%github.copilot.config.azureAuthType.apiKey%"],default:"entraId",tags:["experimental"],markdownDescription:"%github.copilot.config.azureAuthType%"},"github.copilot.chat.azureModels":{type:"object",default:{},tags:["experimental"],additionalProperties:{type:"object",properties:{name:{type:"string",description:"Display name of the Azure model"},url:{type:"string",markdownDescription:"URL endpoint for the Azure model.\n\n**Important:** Base URLs default to Chat Completions API. Explicit API paths including `/responses` or `/chat/completions` are respected. Both behaviors are independent of the `#github.copilot.chat.useResponsesApi#` setting."},toolCalling:{type:"boolean",description:"Whether the model supports tool calling"},vision:{type:"boolean",description:"Whether the model supports vision capabilities"},maxInputTokens:{type:"number",description:"Maximum number of input tokens supported by the model"},maxOutputTokens:{type:"number",description:"Maximum number of output tokens supported by the model"},thinking:{type:"boolean",default:!1,description:"Whether the model supports thinking capabilities"},zeroDataRetentionEnabled:{type:"boolean",default:!1,markdownDescription:"Whether Zero Data Retention (ZDR) is enabled for this endpoint. When `true`, `previous_response_id` will not be sent in requests via Responses API."},requestHeaders:{type:"object",description:"Additional HTTP headers to include with requests to this model. These reserved headers are not allowed and ignored if present: forbidden request headers (https://developer.mozilla.org/en-US/docs/Glossary/Forbidden_request_header), forwarding headers ('forwarded', 'x-forwarded-for', 'x-forwarded-host', 'x-forwarded-proto'), and others ('api-key', 'authorization', 'content-type', 'openai-intent', 'x-github-api-version', 'x-initiator', 'x-interaction-id', 'x-interaction-type', 'x-onbehalf-extension-id', 'x-request-id', 'x-vscode-user-agent-library-version'). Pattern-based forbidden headers ('proxy-*', 'sec-*', 'x-http-method*' with forbidden methods) are also blocked.",additionalProperties:{type:"string"}}},required:["name","url","toolCalling","vision","maxInputTokens","maxOutputTokens"],additionalProperties:!1},markdownDescription:"Configure custom Azure OpenAI models. Each key should be a unique model ID, and the value should be an object with model configuration including name, url, toolCalling, vision, maxInputTokens, and maxOutputTokens properties."},"github.copilot.chat.customOAIModels":{type:"object",default:{},tags:["experimental"],additionalProperties:{type:"object",properties:{name:{type:"string",description:"Display name of the custom OpenAI model"},url:{type:"string",markdownDescription:"URL endpoint for the custom OpenAI-compatible model.\n\n**Important:** Base URLs default to Chat Completions API. Explicit API paths including `/responses` or `/chat/completions` are respected. Both behaviors are independent of the `#github.copilot.chat.useResponsesApi#` setting."},toolCalling:{type:"boolean",description:"Whether the model supports tool calling"},vision:{type:"boolean",description:"Whether the model supports vision capabilities"},maxInputTokens:{type:"number",description:"Maximum number of input tokens supported by the model"},maxOutputTokens:{type:"number",description:"Maximum number of output tokens supported by the model"},requiresAPIKey:{type:"boolean",description:"Whether the model requires an API key for authentication",default:!0},editTools:{type:"array",description:`List of edit tools supported by the model. If this is not configured, the editor will try multiple edit tools and pick the best one.

- 'find-replace': Find and replace text in a document.
- 'multi-find-replace': Find and replace text in a document.
- 'apply-patch': A file-oriented diff format used by some OpenAI models
- 'code-rewrite': A general but slower editing tool that allows the model to rewrite and code snippet and provide only the replacement to the editor.`,items:{type:"string",enum:["find-replace","multi-find-replace","apply-patch","code-rewrite"]}},thinking:{type:"boolean",default:!1,description:"Whether the model supports thinking capabilities"},zeroDataRetentionEnabled:{type:"boolean",default:!1,markdownDescription:"Whether Zero Data Retention (ZDR) is enabled for this endpoint. When `true`, `previous_response_id` will not be sent in requests via Responses API."},requestHeaders:{type:"object",description:"Additional HTTP headers to include with requests to this model. These reserved headers are not allowed and ignored if present: forbidden request headers (https://developer.mozilla.org/en-US/docs/Glossary/Forbidden_request_header), forwarding headers ('forwarded', 'x-forwarded-for', 'x-forwarded-host', 'x-forwarded-proto'), and others ('api-key', 'authorization', 'content-type', 'openai-intent', 'x-github-api-version', 'x-initiator', 'x-interaction-id', 'x-interaction-type', 'x-onbehalf-extension-id', 'x-request-id', 'x-vscode-user-agent-library-version'). Pattern-based forbidden headers ('proxy-*', 'sec-*', 'x-http-method*' with forbidden methods) are also blocked.",additionalProperties:{type:"string"}}},required:["name","url","toolCalling","vision","maxInputTokens","maxOutputTokens","requiresAPIKey"],additionalProperties:!1},markdownDescription:"Configure custom OpenAI-compatible models. Each key should be a unique model ID, and the value should be an object with model configuration including name, url, toolCalling, vision, maxInputTokens, and maxOutputTokens properties."},"github.copilot.chat.alternateGptPrompt.enabled":{type:"boolean",default:!1,tags:["experimental"],description:"%github.copilot.config.alternateGptPrompt.enabled%"},"github.copilot.chat.useResponsesApi":{type:"boolean",default:!0,markdownDescription:"%github.copilot.config.useResponsesApi%",tags:["experimental","onExp"]},"github.copilot.chat.responsesApiReasoningEffort":{type:"string",default:"default",markdownDescription:"%github.copilot.config.responsesApiReasoningEffort%",tags:["experimental","onExp"],enum:["low","medium","high","default"]},"github.copilot.chat.responsesApiReasoningSummary":{type:"string",default:"detailed",markdownDescription:"%github.copilot.config.responsesApiReasoningSummary%",tags:["experimental","onExp"],enum:["off","detailed"]},"github.copilot.chat.anthropic.thinking.budgetTokens":{type:"number",markdownDescription:"%github.copilot.config.anthropic.thinking.budgetTokens%",minimum:0,maximum:32e3,default:4e3,tags:["experimental","onExp"]},"github.copilot.chat.anthropic.tools.websearch.enabled":{type:"boolean",default:!1,markdownDescription:"%github.copilot.config.anthropic.tools.websearch.enabled%",tags:["experimental","onExp"]},"github.copilot.chat.anthropic.tools.websearch.maxUses":{type:"number",default:5,markdownDescription:"%github.copilot.config.anthropic.tools.websearch.maxUses%",minimum:1,maximum:20,tags:["experimental"]},"github.copilot.chat.anthropic.tools.websearch.allowedDomains":{type:"array",default:[],markdownDescription:"%github.copilot.config.anthropic.tools.websearch.allowedDomains%",items:{type:"string"},tags:["experimental"]},"github.copilot.chat.anthropic.tools.websearch.blockedDomains":{type:"array",default:[],markdownDescription:"%github.copilot.config.anthropic.tools.websearch.blockedDomains%",items:{type:"string"},tags:["experimental"]},"github.copilot.chat.anthropic.tools.websearch.userLocation":{type:["object","null"],default:null,markdownDescription:"%github.copilot.config.anthropic.tools.websearch.userLocation%",properties:{city:{type:"string",description:"City name (e.g., 'San Francisco')"},region:{type:"string",description:"State or region (e.g., 'California')"},country:{type:"string",description:"ISO country code (e.g., 'US')"},timezone:{type:"string",description:"IANA timezone identifier (e.g., 'America/Los_Angeles')"}},tags:["experimental"]},"github.copilot.chat.tools.memory.enabled":{type:"boolean",default:!1,markdownDescription:"%github.copilot.config.tools.memory.enabled%",tags:["experimental","onExp"]},"github.copilot.chat.completionsFetcher":{type:["string","null"],markdownDescription:"%github.copilot.config.completionsFetcher%",tags:["experimental","onExp"],enum:["electron-fetch","node-fetch"]},"github.copilot.chat.nesFetcher":{type:["string","null"],markdownDescription:"%github.copilot.config.nesFetcher%",tags:["experimental","onExp"],enum:["electron-fetch","node-fetch"]},"github.copilot.chat.customAgents.showOrganizationAndEnterpriseAgents":{type:"boolean",default:!1,description:"%github.copilot.config.customAgents.showOrganizationAndEnterpriseAgents%",tags:["experimental"]}}},{id:"advanced",properties:{"github.copilot.chat.debug.overrideChatEngine":{type:["string","null"],markdownDescription:"%github.copilot.config.debug.overrideChatEngine%",tags:["advanced","experimental"]},"github.copilot.chat.edits.gemini3MultiReplaceString":{type:"boolean",default:!1,markdownDescription:"Enable the modern `multi_replace_string_in_file` edit tool when generating edits with Gemini 3 models.",tags:["advanced","experimental","onExp"]},"github.copilot.chat.projectLabels.expanded":{type:"boolean",default:!1,markdownDescription:"%github.copilot.config.projectLabels.expanded%",tags:["advanced","experimental","onExp"]},"github.copilot.chat.projectLabels.chat":{type:"boolean",default:!1,markdownDescription:"%github.copilot.config.projectLabels.chat%",tags:["advanced","experimental","onExp"]},"github.copilot.chat.projectLabels.inline":{type:"boolean",default:!1,markdownDescription:"%github.copilot.config.projectLabels.inline%",tags:["advanced","experimental","onExp"]},"github.copilot.chat.workspace.maxLocalIndexSize":{type:"number",default:1e5,markdownDescription:"%github.copilot.config.workspace.maxLocalIndexSize%",tags:["advanced","experimental","onExp"]},"github.copilot.chat.workspace.enableFullWorkspace":{type:"boolean",default:!0,markdownDescription:"%github.copilot.config.workspace.enableFullWorkspace%",tags:["advanced","experimental","onExp"]},"github.copilot.chat.workspace.enableCodeSearch":{type:"boolean",default:!0,markdownDescription:"%github.copilot.config.workspace.enableCodeSearch%",tags:["advanced","experimental","onExp"]},"github.copilot.chat.workspace.enableEmbeddingsSearch":{type:"boolean",default:!0,markdownDescription:"%github.copilot.config.workspace.enableEmbeddingsSearch%",tags:["advanced","experimental","onExp"]},"github.copilot.chat.workspace.preferredEmbeddingsModel":{type:"string",default:"",markdownDescription:"%github.copilot.config.workspace.preferredEmbeddingsModel%",tags:["advanced","experimental","onExp"]},"github.copilot.chat.workspace.prototypeAdoCodeSearchEndpointOverride":{type:"string",default:"",markdownDescription:"%github.copilot.config.workspace.prototypeAdoCodeSearchEndpointOverride%",tags:["advanced","experimental"]},"github.copilot.chat.feedback.onChange":{type:"boolean",default:!1,markdownDescription:"%github.copilot.config.feedback.onChange%",tags:["advanced","experimental"]},"github.copilot.chat.review.intent":{type:"boolean",default:!1,markdownDescription:"%github.copilot.config.review.intent%",tags:["advanced","experimental"]},"github.copilot.chat.notebook.summaryExperimentEnabled":{type:"boolean",default:!1,markdownDescription:"%github.copilot.config.notebook.summaryExperimentEnabled%",tags:["advanced","experimental"]},"github.copilot.chat.notebook.variableFilteringEnabled":{type:"boolean",default:!1,markdownDescription:"%github.copilot.config.notebook.variableFilteringEnabled%",tags:["advanced","experimental"]},"github.copilot.chat.notebook.alternativeFormat":{type:"string",default:"xml",enum:["xml","markdown"],markdownDescription:"%github.copilot.config.notebook.alternativeFormat%",tags:["advanced","experimental","onExp"]},"github.copilot.chat.notebook.alternativeNESFormat.enabled":{type:"boolean",default:!1,markdownDescription:"%github.copilot.config.notebook.alternativeNESFormat.enabled%",tags:["advanced","experimental","onExp"]},"github.copilot.chat.debugTerminalCommandPatterns":{type:"array",default:[],items:{type:"string"},markdownDescription:"%github.copilot.config.debugTerminalCommandPatterns%",tags:["advanced","experimental"]},"github.copilot.chat.localWorkspaceRecording.enabled":{type:"boolean",default:!1,markdownDescription:"%github.copilot.config.localWorkspaceRecording.enabled%",tags:["advanced","experimental"]},"github.copilot.chat.editRecording.enabled":{type:"boolean",default:!1,markdownDescription:"%github.copilot.config.editRecording.enabled%",tags:["advanced","experimental"]},"github.copilot.chat.inlineChat.selectionRatioThreshold":{type:"number",default:0,markdownDescription:"%github.copilot.config.inlineChat.selectionRatioThreshold%",tags:["advanced","experimental","onExp"]},"github.copilot.chat.debug.requestLogger.maxEntries":{type:"number",default:100,markdownDescription:"%github.copilot.config.debug.requestLogger.maxEntries%",tags:["advanced","experimental"]},"github.copilot.chat.inlineEdits.diagnosticsContextProvider.enabled":{type:"boolean",default:!1,markdownDescription:"%github.copilot.config.inlineEdits.diagnosticsContextProvider.enabled%",tags:["advanced","experimental","onExp"]},"github.copilot.chat.codesearch.agent.enabled":{type:"boolean",default:!0,markdownDescription:"%github.copilot.config.codesearch.agent.enabled%",tags:["advanced","experimental"]},"github.copilot.chat.agent.temperature":{type:["number","null"],markdownDescription:"%github.copilot.config.agent.temperature%",tags:["advanced","experimental"]},"github.copilot.chat.instantApply.shortContextModelName":{type:"string",default:"gpt-4o-instant-apply-full-ft-v66-short",markdownDescription:"%github.copilot.config.instantApply.shortContextModelName%",tags:["advanced","experimental","onExp"]},"github.copilot.chat.instantApply.shortContextLimit":{type:"number",default:8e3,markdownDescription:"%github.copilot.config.instantApply.shortContextLimit%",tags:["advanced","experimental","onExp"]},"github.copilot.chat.enableUserPreferences":{type:"boolean",default:!1,markdownDescription:"%github.copilot.config.enableUserPreferences%",tags:["advanced","experimental"]},"github.copilot.chat.summarizeAgentConversationHistoryThreshold":{type:["number","null"],markdownDescription:"%github.copilot.config.summarizeAgentConversationHistoryThreshold%",tags:["advanced","experimental"]},"github.copilot.chat.agentHistorySummarizationMode":{type:["string","null"],markdownDescription:"%github.copilot.config.agentHistorySummarizationMode%",tags:["advanced","experimental"]},"github.copilot.chat.agentHistorySummarizationWithPromptCache":{type:"boolean",default:!1,markdownDescription:"%github.copilot.config.agentHistorySummarizationWithPromptCache%",tags:["advanced","experimental","onExp"]},"github.copilot.chat.agentHistorySummarizationForceGpt41":{type:"boolean",default:!1,markdownDescription:"%github.copilot.config.agentHistorySummarizationForceGpt41%",tags:["advanced","experimental","onExp"]},"github.copilot.chat.useResponsesApiTruncation":{type:"boolean",default:!1,markdownDescription:"%github.copilot.config.useResponsesApiTruncation%",tags:["advanced","experimental"]},"github.copilot.chat.omitBaseAgentInstructions":{type:"boolean",default:!1,markdownDescription:"%github.copilot.config.omitBaseAgentInstructions%",tags:["advanced","experimental"]},"github.copilot.chat.promptFileContextProvider.enabled":{type:"boolean",default:!0,markdownDescription:"%github.copilot.config.promptFileContextProvider.enabled%",tags:["advanced","experimental","onExp"]},"github.copilot.chat.tools.defaultToolsGrouped":{type:"boolean",default:!1,markdownDescription:"%github.copilot.config.tools.defaultToolsGrouped%",tags:["advanced","experimental","onExp"]},"github.copilot.chat.claudeCode.enabled":{type:["boolean","string"],default:!1,markdownDescription:"%github.copilot.config.claudeCode.enabled%",tags:["advanced","experimental"]},"github.copilot.chat.claudeCode.debug":{type:"boolean",default:!1,markdownDescription:"%github.copilot.config.claudeCode.debug%",tags:["advanced","experimental"]},"github.copilot.chat.gpt5AlternativePatch":{type:"boolean",default:!1,markdownDescription:"%github.copilot.config.gpt5AlternativePatch%",tags:["advanced","experimental","onExp"]},"github.copilot.chat.inlineEdits.triggerOnEditorChangeAfterSeconds":{type:["number","null"],markdownDescription:"%github.copilot.config.inlineEdits.triggerOnEditorChangeAfterSeconds%",tags:["advanced","experimental","onExp"]},"github.copilot.chat.inlineEdits.nextCursorPrediction.displayLine":{type:"boolean",default:!0,markdownDescription:"%github.copilot.config.inlineEdits.nextCursorPrediction.displayLine%",tags:["advanced","experimental","onExp"]},"github.copilot.chat.inlineEdits.nextCursorPrediction.currentFileMaxTokens":{type:"number",default:2e3,markdownDescription:"%github.copilot.config.inlineEdits.nextCursorPrediction.currentFileMaxTokens%",tags:["advanced","experimental","onExp"]},"github.copilot.chat.inlineEdits.renameSymbolSuggestions":{type:"boolean",default:!1,markdownDescription:"%github.copilot.config.inlineEdits.renameSymbolSuggestions%",tags:["advanced","experimental","onExp"]},"github.copilot.nextEditSuggestions.preferredModel":{type:"string",default:"none",markdownDescription:"%github.copilot.config.nextEditSuggestions.preferredModel%",tags:["advanced","experimental","onExp"]},"github.copilot.chat.suggestRelatedFilesFromGitHistory.useEmbeddings":{type:"boolean",default:!1,markdownDescription:"%github.copilot.config.suggestRelatedFilesFromGitHistory.useEmbeddings%",tags:["advanced","experimental"]},"github.copilot.chat.cli.customAgents.enabled":{type:"boolean",default:!1,markdownDescription:"%github.copilot.config.cli.customAgents.enabled%",tags:["advanced","experimental"]},"github.copilot.chat.cli.mcp.enabled":{type:"boolean",default:!1,markdownDescription:"%github.copilot.config.cli.mcp.enabled%",tags:["advanced","experimental"]}}}],submenus:[{id:"copilot/reviewComment/additionalActions/applyAndNext",label:"%github.copilot.submenu.reviewComment.applyAndNext.label%"},{id:"copilot/reviewComment/additionalActions/discardAndNext",label:"%github.copilot.submenu.reviewComment.discardAndNext.label%"},{id:"copilot/reviewComment/additionalActions/discard",label:"%github.copilot.submenu.reviewComment.discard.label%"},{id:"github.copilot.chat.debug.filter",label:"Filter",icon:"$(filter)"},{id:"github.copilot.chat.debug.exportAllPromptLogsAsJson",label:"Export All Logs as JSON",icon:"$(file-export)"}],menus:{"editor/title":[{command:"github.copilot.debug.generateInlineEditTests",when:"resourceScheme == 'ccreq'"},{command:"github.copilot.chat.notebook.enableFollowCellExecution",when:"config.github.copilot.chat.notebook.followCellExecution.enabled && !github.copilot.notebookFollowInSessionEnabled && github.copilot.notebookAgentModeUsage && !config.notebook.globalToolbar",group:"navigation@10"},{command:"github.copilot.chat.notebook.disableFollowCellExecution",when:"config.github.copilot.chat.notebook.followCellExecution.enabled && github.copilot.notebookFollowInSessionEnabled && github.copilot.notebookAgentModeUsage && !config.notebook.globalToolbar",group:"navigation@10"},{command:"github.copilot.chat.replay",group:"navigation@9",when:"resourceFilename === 'benchRun.chatReplay.json'"},{command:"github.copilot.chat.showAsChatSession",group:"navigation@9",when:"resourceFilename === 'benchRun.chatReplay.json' || resourceFilename === 'chat-export-logs.json'"},{command:"github.copilot.chat.applyCopilotCLIAgentSessionChanges",group:"navigation@1",when:"resourceScheme == copilotcli-worktree-changes"}],"explorer/context":[{command:"github.copilot.chat.showAsChatSession",when:"resourceFilename === 'benchRun.chatReplay.json' || resourceFilename === 'chat-export-logs.json'",group:"2_copilot@1"}],"editor/context":[{command:"github.copilot.chat.explain",when:"!github.copilot.interactiveSession.disabled",group:"1_chat@4"}],"editor/context/chat":[{command:"github.copilot.chat.fix",when:"!github.copilot.interactiveSession.disabled && !editorReadonly",group:"copilotAction@1"},{command:"github.copilot.chat.review",when:"config.github.copilot.chat.reviewSelection.enabled && !github.copilot.interactiveSession.disabled && resourceScheme != 'vscode-chat-code-block'",group:"copilotAction@2"},{command:"github.copilot.chat.generateDocs",when:"!github.copilot.interactiveSession.disabled && !editorReadonly",group:"copilotGenerate@1"},{command:"github.copilot.chat.generateTests",when:"!github.copilot.interactiveSession.disabled && !editorReadonly",group:"copilotGenerate@2"}],"chat/input/editing/sessionToolbar":[{command:"github.copilot.chat.applyCopilotCLIAgentSessionChanges.apply",when:"chatSessionType == copilotcli",group:"navigation@0"}],"testing/item/result":[{command:"github.copilot.tests.fixTestFailure.fromInline",when:"testResultState == failed && !testResultOutdated",group:"inline@2"}],"testing/item/context":[{command:"github.copilot.tests.fixTestFailure.fromInline",when:"testResultState == failed && !testResultOutdated",group:"inline@2"}],commandPalette:[{command:"github.copilot.chat.triggerPermissiveSignIn",when:"false"},{command:"github.copilot.interactiveSession.feedback",when:"github.copilot-chat.activated && !github.copilot.interactiveSession.disabled"},{command:"github.copilot.debug.workbenchState",when:"true"},{command:"github.copilot.chat.rerunWithCopilotDebug",when:"false"},{command:"github.copilot.chat.startCopilotDebugCommand",when:"false"},{command:"github.copilot.git.generateCommitMessage",when:"false"},{command:"github.copilot.git.resolveMergeConflicts",when:"false"},{command:"github.copilot.chat.explain",when:"false"},{command:"github.copilot.chat.review",when:"!github.copilot.interactiveSession.disabled"},{command:"github.copilot.chat.review.apply",when:"false"},{command:"github.copilot.chat.review.applyAndNext",when:"false"},{command:"github.copilot.chat.review.discard",when:"false"},{command:"github.copilot.chat.review.discardAndNext",when:"false"},{command:"github.copilot.chat.review.discardAll",when:"false"},{command:"github.copilot.chat.review.stagedChanges",when:"false"},{command:"github.copilot.chat.review.unstagedChanges",when:"false"},{command:"github.copilot.chat.review.changes",when:"false"},{command:"github.copilot.chat.review.stagedFileChange",when:"false"},{command:"github.copilot.chat.review.unstagedFileChange",when:"false"},{command:"github.copilot.chat.review.previous",when:"false"},{command:"github.copilot.chat.review.next",when:"false"},{command:"github.copilot.chat.review.continueInInlineChat",when:"false"},{command:"github.copilot.chat.review.continueInChat",when:"false"},{command:"github.copilot.chat.review.markHelpful",when:"false"},{command:"github.copilot.chat.review.markUnhelpful",when:"false"},{command:"github.copilot.devcontainer.generateDevContainerConfig",when:"false"},{command:"github.copilot.tests.fixTestFailure",when:"false"},{command:"github.copilot.tests.fixTestFailure.fromInline",when:"false"},{command:"github.copilot.search.markHelpful",when:"false"},{command:"github.copilot.search.markUnhelpful",when:"false"},{command:"github.copilot.search.feedback",when:"false"},{command:"github.copilot.chat.debug.showElements",when:"false"},{command:"github.copilot.chat.debug.hideElements",when:"false"},{command:"github.copilot.chat.debug.showTools",when:"false"},{command:"github.copilot.chat.debug.hideTools",when:"false"},{command:"github.copilot.chat.debug.showNesRequests",when:"false"},{command:"github.copilot.chat.debug.hideNesRequests",when:"false"},{command:"github.copilot.chat.debug.exportLogItem",when:"false"},{command:"github.copilot.chat.debug.exportPromptArchive",when:"false"},{command:"github.copilot.chat.debug.exportPromptLogsAsJson",when:"false"},{command:"github.copilot.chat.debug.exportAllPromptLogsAsJson",when:"false"},{command:"github.copilot.chat.mcp.setup.check",when:"false"},{command:"github.copilot.chat.mcp.setup.validatePackage",when:"false"},{command:"github.copilot.chat.mcp.setup.flow",when:"false"},{command:"github.copilot.chat.debug.showRawRequestBody",when:"false"},{command:"github.copilot.debug.showOutputChannel",when:"false"},{command:"github.copilot.cli.sessions.delete",when:"false"},{command:"github.copilot.cli.sessions.refresh",when:"false"},{command:"github.copilot.cli.sessions.resumeInTerminal",when:"false"},{command:"github.copilot.cli.sessions.newTerminalSession",when:"false"},{command:"github.copilot.cloud.sessions.refresh",when:"false"},{command:"github.copilot.cloud.sessions.openInBrowser",when:"false"},{command:"github.copilot.cloud.sessions.proxy.closeChatSessionPullRequest",when:"false"},{command:"github.copilot.chat.applyCopilotCLIAgentSessionChanges",when:"false"},{command:"github.copilot.chat.applyCopilotCLIAgentSessionChanges.apply",when:"false"},{command:"github.copilot.chat.showAsChatSession",when:"false"}],"view/title":[{command:"github.copilot.claude.sessions.refresh",when:"view == workbench.view.chat.sessions.claude-code",group:"navigation@1"},{command:"github.copilot.cli.sessions.refresh",when:"view == workbench.view.chat.sessions.copilotcli",group:"navigation@1"},{submenu:"github.copilot.chat.debug.filter",when:"view == copilot-chat",group:"navigation"},{command:"github.copilot.chat.debug.exportAllPromptLogsAsJson",when:"view == copilot-chat",group:"export@1"},{command:"github.copilot.debug.showOutputChannel",when:"view == copilot-chat",group:"3_show@1"},{command:"github.copilot.debug.showChatLogView",when:"view == workbench.panel.chat.view.copilot",group:"3_show"},{command:"github.copilot.cloud.sessions.refresh",when:"view == workbench.view.chat.sessions.copilot-cloud-agent",group:"navigation@1"}],"view/item/context":[{command:"github.copilot.chat.debug.showRawRequestBody",when:"view == copilot-chat && viewItem == request",group:"export@0"},{command:"github.copilot.chat.debug.exportLogItem",when:"view == copilot-chat && (viewItem == toolcall || viewItem == request)",group:"export@1"},{command:"github.copilot.chat.debug.exportPromptArchive",when:"view == copilot-chat && viewItem == chatprompt",group:"export@2"},{command:"github.copilot.chat.debug.exportPromptLogsAsJson",when:"view == copilot-chat && viewItem == chatprompt",group:"export@3"}],"searchPanel/aiResults/commands":[{command:"github.copilot.search.markHelpful",group:"inline@0",when:"aiResultsTitle && aiResultsRequested"},{command:"github.copilot.search.markUnhelpful",group:"inline@1",when:"aiResultsTitle && aiResultsRequested"},{command:"github.copilot.search.feedback",group:"inline@2",when:"aiResultsTitle && aiResultsRequested && github.copilot.debugReportFeedback"}],"comments/comment/title":[{command:"github.copilot.chat.review.markHelpful",group:"inline@0",when:"commentController == github-copilot-review"},{command:"github.copilot.chat.review.markUnhelpful",group:"inline@1",when:"commentController == github-copilot-review"}],"commentsView/commentThread/context":[{command:"github.copilot.chat.review.apply",group:"context@1",when:"commentController == github-copilot-review"},{command:"github.copilot.chat.review.discard",group:"context@2",when:"commentController == github-copilot-review"},{command:"github.copilot.chat.review.discardAll",group:"context@3",when:"commentController == github-copilot-review"}],"comments/commentThread/additionalActions":[{submenu:"copilot/reviewComment/additionalActions/applyAndNext",group:"inline@1",when:"commentController == github-copilot-review && github.copilot.chat.review.numberOfComments > 1"},{command:"github.copilot.chat.review.apply",group:"inline@1",when:"commentController == github-copilot-review && github.copilot.chat.review.numberOfComments == 1"},{submenu:"copilot/reviewComment/additionalActions/discardAndNext",group:"inline@2",when:"commentController == github-copilot-review && github.copilot.chat.review.numberOfComments > 1"},{submenu:"copilot/reviewComment/additionalActions/discard",group:"inline@2",when:"commentController == github-copilot-review && github.copilot.chat.review.numberOfComments == 1"}],"copilot/reviewComment/additionalActions/applyAndNext":[{command:"github.copilot.chat.review.applyAndNext",group:"inline@1",when:"commentController == github-copilot-review"},{command:"github.copilot.chat.review.apply",group:"inline@2",when:"commentController == github-copilot-review"}],"copilot/reviewComment/additionalActions/discardAndNext":[{command:"github.copilot.chat.review.discardAndNext",group:"inline@1",when:"commentController == github-copilot-review"},{command:"github.copilot.chat.review.discard",group:"inline@2",when:"commentController == github-copilot-review"},{command:"github.copilot.chat.review.continueInInlineChat",group:"inline@3",when:"commentController == github-copilot-review"}],"copilot/reviewComment/additionalActions/discard":[{command:"github.copilot.chat.review.discard",group:"inline@2",when:"commentController == github-copilot-review"},{command:"github.copilot.chat.review.continueInInlineChat",group:"inline@3",when:"commentController == github-copilot-review"}],"comments/commentThread/title":[{command:"github.copilot.chat.review.previous",group:"inline@1",when:"commentController == github-copilot-review"},{command:"github.copilot.chat.review.next",group:"inline@2",when:"commentController == github-copilot-review"},{command:"github.copilot.chat.review.continueInChat",group:"inline@3",when:"commentController == github-copilot-review"},{command:"github.copilot.chat.review.discardAll",group:"inline@4",when:"commentController == github-copilot-review"}],"scm/title":[{command:"github.copilot.chat.review.changes",group:"navigation",when:"config.github.copilot.chat.reviewAgent.enabled && github.copilot.chat.reviewDiff.enabled && scmProvider == git && scmProviderRootUri in github.copilot.chat.reviewDiff.enabledRootUris"}],"scm/resourceGroup/context":[{command:"github.copilot.chat.review.stagedChanges",when:"config.github.copilot.chat.reviewAgent.enabled && github.copilot.chat.reviewDiff.enabled && scmProvider == git && scmResourceGroup == index",group:"inline@-3"},{command:"github.copilot.chat.review.unstagedChanges",when:"config.github.copilot.chat.reviewAgent.enabled && github.copilot.chat.reviewDiff.enabled && scmProvider == git && scmResourceGroup == workingTree",group:"inline@-3"}],"scm/resourceState/context":[{command:"github.copilot.git.resolveMergeConflicts",when:"scmProvider == git && scmResourceGroup == merge && git.activeResourceHasMergeConflicts",group:"z_chat@1"},{command:"github.copilot.chat.review.stagedFileChange",group:"3_copilot",when:"config.github.copilot.chat.reviewAgent.enabled && github.copilot.chat.reviewDiff.enabled && scmProvider == git && scmResourceGroup == index"},{command:"github.copilot.chat.review.unstagedFileChange",group:"3_copilot",when:"config.github.copilot.chat.reviewAgent.enabled && github.copilot.chat.reviewDiff.enabled && scmProvider == git && scmResourceGroup == workingTree"}],"scm/inputBox":[{command:"github.copilot.git.generateCommitMessage",when:"scmProvider == git"}],"testing/message/context":[{command:"github.copilot.tests.fixTestFailure",when:"testing.testItemHasUri",group:"inline@1"}],"issue/reporter":[{command:"github.copilot.report"}],"github.copilot.chat.debug.filter":[{command:"github.copilot.chat.debug.showElements",when:"github.copilot.chat.debug.elementsHidden",group:"commands@0"},{command:"github.copilot.chat.debug.hideElements",when:"!github.copilot.chat.debug.elementsHidden",group:"commands@0"},{command:"github.copilot.chat.debug.showTools",when:"github.copilot.chat.debug.toolsHidden",group:"commands@1"},{command:"github.copilot.chat.debug.hideTools",when:"!github.copilot.chat.debug.toolsHidden",group:"commands@1"},{command:"github.copilot.chat.debug.showNesRequests",when:"github.copilot.chat.debug.nesRequestsHidden",group:"commands@2"},{command:"github.copilot.chat.debug.hideNesRequests",when:"!github.copilot.chat.debug.nesRequestsHidden",group:"commands@2"}],"notebook/toolbar":[{command:"github.copilot.chat.notebook.enableFollowCellExecution",when:"config.github.copilot.chat.notebook.followCellExecution.enabled && !github.copilot.notebookFollowInSessionEnabled && github.copilot.notebookAgentModeUsage && config.notebook.globalToolbar",group:"navigation/execute@15"},{command:"github.copilot.chat.notebook.disableFollowCellExecution",when:"config.github.copilot.chat.notebook.followCellExecution.enabled && github.copilot.notebookFollowInSessionEnabled && github.copilot.notebookAgentModeUsage && config.notebook.globalToolbar",group:"navigation/execute@15"}],"editor/content":[{command:"github.copilot.git.resolveMergeConflicts",group:"z_chat@1",when:"config.git.enabled && !git.missing && !isInDiffEditor && !isMergeEditor && resource in git.mergeChanges && git.activeResourceHasMergeConflicts"}],"multiDiffEditor/content":[{command:"github.copilot.chat.applyCopilotCLIAgentSessionChanges",when:"resourceScheme == copilotcli-worktree-changes"}],"chat/chatSessions":[{command:"github.copilot.chat.applyCopilotCLIAgentSessionChanges",when:"chatSessionType == copilotcli",group:"inline@0"},{command:"github.copilot.cli.sessions.resumeInTerminal",when:"chatSessionType == copilotcli",group:"inline@1"},{command:"github.copilot.cli.sessions.delete",when:"chatSessionType == copilotcli",group:"inline@2"},{command:"github.copilot.cli.sessions.newTerminalSession",when:"view == workbench.view.chat.sessions.copilotcli",group:"submenu"},{command:"github.copilot.cli.sessions.refresh",when:"view == workbench.view.chat.sessions.copilotcli",group:"navigation@1"},{command:"github.copilot.cloud.sessions.openInBrowser",when:"chatSessionType == copilot-cloud-agent",group:"navigation@10"},{command:"github.copilot.cloud.sessions.proxy.closeChatSessionPullRequest",when:"chatSessionType == copilot-cloud-agent",group:"context"}]},icons:{"copilot-logo":{description:"%github.copilot.icon%",default:{fontPath:"assets/copilot.woff",fontCharacter:"\\0041"}},"copilot-warning":{description:"%github.copilot.icon%",default:{fontPath:"assets/copilot.woff",fontCharacter:"\\0042"}},"copilot-notconnected":{description:"%github.copilot.icon%",default:{fontPath:"assets/copilot.woff",fontCharacter:"\\0043"}}},iconFonts:[{id:"copilot-font",src:[{path:"assets/copilot.woff",format:"woff"}]}],terminalQuickFixes:[{id:"copilot-chat.fixWithCopilot",commandLineMatcher:".+",commandExitResult:"error",outputMatcher:{anchor:"bottom",length:1,lineMatcher:".+",offset:0},kind:"explain"},{id:"copilot-chat.generateCommitMessage",commandLineMatcher:"git add .+",commandExitResult:"success",kind:"explain",outputMatcher:{anchor:"bottom",length:1,lineMatcher:".+",offset:0}},{id:"copilot-chat.terminalToDebugging",commandLineMatcher:".+",kind:"explain",commandExitResult:"error",outputMatcher:{anchor:"bottom",length:1,lineMatcher:"",offset:0}},{id:"copilot-chat.terminalToDebuggingSuccess",commandLineMatcher:".+",kind:"explain",commandExitResult:"success",outputMatcher:{anchor:"bottom",length:1,lineMatcher:"",offset:0}}],languages:[{id:"ignore",filenamePatterns:[".copilotignore"],aliases:[]},{id:"markdown",extensions:[".copilotmd"]}],views:{"copilot-chat":[{id:"copilot-chat",name:"Chat Debug",icon:"assets/debug-icon.svg",when:"github.copilot.chat.showLogView"}],"context-inspector":[{id:"context-inspector",name:"Language Context Inspector",icon:"$(inspect)",when:"github.copilot.chat.showContextInspectorView"}],agentSessions:[{id:"codex-placeholder",name:"OpenAI Codex",when:"github.copilot.chat.codex.showPlaceholder",icon:"$(file)"},{id:"copilot-agents-placeholder",name:"GitHub Copilot Agents",when:"chatEntitlementSignedOut || !chatIsEnabled",icon:"$(copilot)"}]},viewsContainers:{activitybar:[{id:"copilot-chat",title:"Chat Debug",icon:"assets/debug-icon.svg"},{id:"context-inspector",title:"Language Context Inspector",icon:"$(inspect)"}]},configurationDefaults:{"workbench.editorAssociations":{"*.copilotmd":"vscode.markdown.preview.editor"}},keybindings:[{command:"github.copilot.chat.rerunWithCopilotDebug",key:"ctrl+alt+.",mac:"cmd+alt+.",when:"github.copilot-chat.activated && terminalShellIntegrationEnabled && terminalFocus && !terminalAltBufferActive"}],walkthroughs:[{id:"copilotWelcome",title:"%github.copilot.walkthrough.title%",description:"%github.copilot.walkthrough.description%",when:"!isWeb",steps:[{id:"copilot.setup.signIn",title:"%github.copilot.walkthrough.setup.signIn.title%",description:"%github.copilot.walkthrough.setup.signIn.description%",when:"chatEntitlementSignedOut && !view.workbench.panel.chat.view.copilot.visible && !github.copilot-chat.activated && !github.copilot.offline && !github.copilot.interactiveSession.individual.disabled && !github.copilot.interactiveSession.individual.expired && !github.copilot.interactiveSession.enterprise.disabled && !github.copilot.interactiveSession.contactSupport",media:{video:{dark:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/workspace.mp4",light:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/workspace-light.mp4",hc:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/workspace-hc.mp4",hcLight:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/workspace-hclight.mp4"},altText:"%github.copilot.walkthrough.panelChat.media.altText%"}},{id:"copilot.setup.signInNoAction",title:"%github.copilot.walkthrough.setup.signIn.title%",description:"%github.copilot.walkthrough.setup.noAction.description%",when:"chatEntitlementSignedOut && view.workbench.panel.chat.view.copilot.visible && !github.copilot-chat.activated && !github.copilot.offline && !github.copilot.interactiveSession.individual.disabled && !github.copilot.interactiveSession.individual.expired && !github.copilot.interactiveSession.enterprise.disabled && !github.copilot.interactiveSession.contactSupport",media:{video:{dark:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/workspace.mp4",light:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/workspace-light.mp4",hc:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/workspace-hc.mp4",hcLight:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/workspace-hclight.mp4"},altText:"%github.copilot.walkthrough.panelChat.media.altText%"}},{id:"copilot.setup.signUp",title:"%github.copilot.walkthrough.setup.signUp.title%",description:"%github.copilot.walkthrough.setup.signUp.description%",when:"chatPlanCanSignUp && !view.workbench.panel.chat.view.copilot.visible && !github.copilot-chat.activated && !github.copilot.offline && (github.copilot.interactiveSession.individual.disabled || github.copilot.interactiveSession.individual.expired) && !github.copilot.interactiveSession.enterprise.disabled && !github.copilot.interactiveSession.contactSupport",media:{video:{dark:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/workspace.mp4",light:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/workspace-light.mp4",hc:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/workspace-hc.mp4",hcLight:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/workspace-hclight.mp4"},altText:"%github.copilot.walkthrough.panelChat.media.altText%"}},{id:"copilot.setup.signUpNoAction",title:"%github.copilot.walkthrough.setup.signUp.title%",description:"%github.copilot.walkthrough.setup.noAction.description%",when:"chatPlanCanSignUp && view.workbench.panel.chat.view.copilot.visible && !github.copilot-chat.activated && !github.copilot.offline && (github.copilot.interactiveSession.individual.disabled || github.copilot.interactiveSession.individual.expired) && !github.copilot.interactiveSession.enterprise.disabled && !github.copilot.interactiveSession.contactSupport",media:{video:{dark:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/workspace.mp4",light:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/workspace-light.mp4",hc:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/workspace-hc.mp4",hcLight:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/workspace-hclight.mp4"},altText:"%github.copilot.walkthrough.panelChat.media.altText%"}},{id:"copilot.panelChat",title:"%github.copilot.walkthrough.panelChat.title%",description:"%github.copilot.walkthrough.panelChat.description%",when:"!chatEntitlementSignedOut || chatIsEnabled ",media:{video:{dark:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/workspace.mp4",light:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/workspace-light.mp4",hc:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/workspace-hc.mp4",hcLight:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/workspace-hclight.mp4"},altText:"%github.copilot.walkthrough.panelChat.media.altText%"}},{id:"copilot.edits",title:"%github.copilot.walkthrough.edits.title%",description:"%github.copilot.walkthrough.edits.description%",when:"!chatEntitlementSignedOut || chatIsEnabled ",media:{video:{dark:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/edits.mp4",light:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/edits-light.mp4",hc:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/edits-hc.mp4",hcLight:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/edits-hclight.mp4"},altText:"%github.copilot.walkthrough.edits.media.altText%"}},{id:"copilot.firstSuggest",title:"%github.copilot.walkthrough.firstSuggest.title%",description:"%github.copilot.walkthrough.firstSuggest.description%",when:"!chatEntitlementSignedOut || chatIsEnabled ",media:{video:{dark:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/ghost-text.mp4",light:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/ghost-text-light.mp4",hc:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/ghost-text-hc.mp4",hcLight:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/ghost-text-hclight.mp4"},altText:"%github.copilot.walkthrough.firstSuggest.media.altText%"}},{id:"copilot.inlineChatNotMac",title:"%github.copilot.walkthrough.inlineChatNotMac.title%",description:"%github.copilot.walkthrough.inlineChatNotMac.description%",when:"!isMac && (!chatEntitlementSignedOut || chatIsEnabled )",media:{video:{dark:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/inline.mp4",light:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/inline-light.mp4",hc:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/inline-hc.mp4",hcLight:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/inline-hclight.mp4"},altText:"%github.copilot.walkthrough.inlineChatNotMac.media.altText%"}},{id:"copilot.inlineChatMac",title:"%github.copilot.walkthrough.inlineChatMac.title%",description:"%github.copilot.walkthrough.inlineChatMac.description%",when:"isMac && (!chatEntitlementSignedOut || chatIsEnabled )",media:{video:{dark:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/inline.mp4",light:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/inline-light.mp4",hc:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/inline-hc.mp4",hcLight:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/inline-hclight.mp4"},altText:"%github.copilot.walkthrough.inlineChatMac.media.altText%"}},{id:"copilot.sparkle",title:"%github.copilot.walkthrough.sparkle.title%",description:"%github.copilot.walkthrough.sparkle.description%",when:"!chatEntitlementSignedOut || chatIsEnabled",media:{video:{dark:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/git-commit.mp4",light:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/git-commit-light.mp4",hc:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/git-commit-hc.mp4",hcLight:"https://vscodewalkthroughs.z1.web.core.windows.net/v0.26/git-commit-hclight.mp4"},altText:"%github.copilot.walkthrough.sparkle.media.altText%"}}]}],jsonValidation:[{fileMatch:"settings.json",url:"ccsettings://root/schema.json"}],typescriptServerPlugins:[{name:"@vscode/copilot-typescript-server-plugin",enableForWorkspaceTypeScriptVersions:!0}],chatSessions:[{type:"claude-code",name:"claude",displayName:"Claude Code CLI Agent",icon:"$(sparkle)",welcomeTitle:"Claude Code Agent",welcomeMessage:"Run local background tasks",inputPlaceholder:"Describe your task, type `#` for adding context",order:3,description:"The Claude Code Agent works on your local machine",when:"config.github.copilot.chat.claudeCode.enabled",canDelegate:!1,capabilities:{supportsFileAttachments:!0},commands:[{name:"init",description:"Initialize a new CLAUDE.md file with codebase documentation"},{name:"compact",description:"Clear conversation history but keep a summary in context. Optional: /compact [instructions for summarization]"},{name:"pr-comments",description:"Get comments from a GitHub pull request"},{name:"review",description:"Review a pull request"},{name:"security-review",description:"Complete a security review of the pending changes on the current branch"}]},{type:"copilotcli",name:"cli",displayName:"Background Agent",icon:"$(collection)",welcomeTitle:"Background Agent",welcomeMessage:"Run tasks in the background",inputPlaceholder:"Run tasks in the background, type `#` for adding context",order:2,canDelegate:!0,description:"Delegate tasks to a background agent.",capabilities:{supportsFileAttachments:!0,supportsProblemAttachments:!0,supportsToolAttachments:!1,supportsSymbolAttachments:!0,supportsSearchResultAttachments:!0,supportsSourceControlAttachments:!0},commands:[{name:"delegate",description:"Delegate chat session to cloud agent and create associated PR"}]},{type:"copilot-cloud-agent",alternativeIds:["copilot-swe-agent"],name:"cloud",displayName:"Cloud Agent",icon:"$(cloud)",welcomeTitle:"Cloud Agent",welcomeMessage:"Delegate tasks to the cloud",inputPlaceholder:"Delegate tasks to the cloud, type `#` for adding context",order:1,canDelegate:!0,description:"Delegate tasks to the GitHub Copilot Cloud Agent. The agent works asynchronously in the cloud to implement changes, iterates via chat, and can create or update pull requests as needed.",capabilities:{supportsFileAttachments:!0}}],debuggers:[{type:"vscode-chat-replay",label:"vscode-chat-replay",languages:["json"],when:"resourceFilename === 'benchRun.chatReplay.json'",configurationAttributes:{launch:{properties:{program:{type:"string",description:"Chat replay file to debug (parse for headers)",default:"${file}"},stopOnEntry:{type:"boolean",default:!0,description:"Break immediately to step through manually."}},required:["program"]}}}],chatAgents:[{name:"Plan",path:"./assets/agents/Plan.agent.md",description:"Researches a task to create multi-step plans"}],chatPromptFiles:[{name:"savePrompt",path:"./assets/prompts/savePrompt.prompt.md",description:"Generalize the current discussion into a reusable prompt and save it as a file"}]},extensionPack:["GitHub.copilot"],prettier:{useTabs:!0,tabWidth:4,singleQuote:!0},scripts:{postinstall:"tsx ./script/postinstall.ts",prepare:"husky","vscode-dts:dev":"node node_modules/@vscode/dts/index.js dev && mv vscode.proposed.*.ts src/extension","vscode-dts:main":"node node_modules/@vscode/dts/index.js main && mv vscode.d.ts src/extension",build:"tsx .esbuild.ts",compile:"tsx .esbuild.ts --dev",watch:"npm-run-all -p watch:*","watch:esbuild":"tsx .esbuild.ts --watch --dev","watch:tsc-extension":"tsc --noEmit --watch --project tsconfig.json","watch:tsc-extension-web":"tsc --noEmit --watch --project tsconfig.worker.json","watch:tsc-simulation-workbench":"tsc --noEmit --watch --project test/simulation/workbench/tsconfig.json",typecheck:"tsc --noEmit --project tsconfig.json && tsc --noEmit --project test/simulation/workbench/tsconfig.json && tsc --noEmit --project tsconfig.worker.json && tsc --noEmit --project src/extension/completions-core/vscode-node/extension/src/copilotPanel/webView/tsconfig.json",lint:"eslint . --max-warnings=0","lint-staged":"eslint --max-warnings=0",tsfmt:"npx tsfmt -r --verify",test:"npm-run-all test:*","test:extension":"vscode-test","test:sanity":"vscode-test --sanity","test:unit":"vitest --run --pool=forks",vitest:"vitest",bench:"vitest bench",get_env:"tsx script/setup/getEnv.mts",get_token:"tsx script/setup/getToken.mts",prettier:"prettier --list-different --write --cache .",simulate:"node dist/simulationMain.js","simulate-require-cache":"node dist/simulationMain.js --require-cache","simulate-ci":"node dist/simulationMain.js --ci --require-cache","simulate-update-baseline":"node dist/simulationMain.js --update-baseline","simulate-gc":"node dist/simulationMain.js --require-cache --gc",setup:"npm run get_env && npm run get_token","setup:dotnet":"run-script-os","setup:dotnet:darwin:linux":"curl -O https://raw.githubusercontent.com/dotnet/install-scripts/main/src/dotnet-install.sh && chmod u+x dotnet-install.sh && ./dotnet-install.sh --channel 10.0 && rm dotnet-install.sh","setup:dotnet:win32":'powershell.exe -NoProfile -ExecutionPolicy Bypass -Command "Invoke-WebRequest -Uri https://raw.githubusercontent.com/dotnet/install-scripts/main/src/dotnet-install.ps1 -OutFile dotnet-install.ps1; ./dotnet-install.ps1 -channel 10.0; Remove-Item dotnet-install.ps1"',"analyze-edits":"tsx script/analyzeEdits.ts","extract-chat-lib":"tsx script/build/extractChatLib.ts",create_venv:"tsx script/setup/createVenv.mts",package:"vsce package",web:"vscode-test-web --headless --extensionDevelopmentPath=. .","test:prompt":'mocha "src/extension/completions-core/vscode-node/prompt/**/test/**/*.test.{ts,tsx}"',"test:completions-core":"tsx src/extension/completions-core/vscode-node/extension/test/runTest.ts"},devDependencies:{"@azure/identity":"4.9.1","@azure/keyvault-secrets":"^4.10.0","@azure/msal-node":"^3.6.3","@c4312/scip":"^0.1.0","@fluentui/react-components":"^9.66.6","@fluentui/react-icons":"^2.0.305","@hediet/node-reload":"^0.8.0","@keyv/sqlite":"^4.0.5","@octokit/types":"^14.1.0","@parcel/watcher":"^2.5.1","@stylistic/eslint-plugin":"^3.0.1","@types/eslint":"^9.0.0","@types/google-protobuf":"^3.15.12","@types/js-yaml":"^4.0.9","@types/markdown-it":"^14.0.0","@types/minimist":"^1.2.5","@types/mocha":"^10.0.10","@types/node":"^22.16.3","@types/picomatch":"^4.0.0","@types/react":"17.0.44","@types/react-dom":"^18.2.17","@types/sinon":"^17.0.4","@types/source-map-support":"^0.5.10","@types/tar":"^6.1.13","@types/vinyl":"^2.0.12","@types/vscode":"^1.102.0","@types/vscode-webview":"^1.57.4","@types/yargs":"^17.0.24","@typescript-eslint/eslint-plugin":"^8.35.0","@typescript-eslint/parser":"^8.32.0","@typescript-eslint/typescript-estree":"^8.26.1","@vitest/coverage-v8":"^3.2.4","@vitest/snapshot":"^1.5.0","@vscode/debugadapter":"^1.68.0","@vscode/debugprotocol":"^1.68.0","@vscode/dts":"^0.4.1","@vscode/lsif-language-service":"^0.1.0-pre.4","@vscode/test-cli":"^0.0.11","@vscode/test-electron":"^2.5.2","@vscode/test-web":"^0.0.71","@vscode/vsce":"3.6.0",copyfiles:"^2.4.1","csv-parse":"^6.0.0",dotenv:"^17.2.0",electron:"^37.2.1",esbuild:"^0.25.6",eslint:"^9.30.0","eslint-import-resolver-typescript":"^4.4.4","eslint-plugin-header":"^3.1.1","eslint-plugin-import":"^2.32.0","eslint-plugin-jsdoc":"^51.3.4","eslint-plugin-no-only-tests":"^3.3.0",fastq:"^1.19.1",glob:"^11.1.0",husky:"^9.1.7","js-yaml":"^4.1.1",keyv:"^5.3.2","lint-staged":"15.2.9",minimist:"^1.2.8",mobx:"^6.13.7","mobx-react-lite":"^4.1.0",mocha:"^11.7.1","mocha-junit-reporter":"^2.2.1","mocha-multi-reporters":"^1.5.1","monaco-editor":"0.44.0","npm-run-all":"^4.1.5",open:"^10.1.2",openai:"^6.7.0",outdent:"^0.8.0",picomatch:"^4.0.2",playwright:"^1.56.1",prettier:"^3.6.2",react:"^17.0.2","react-dom":"17.0.2",rimraf:"^6.0.1","run-script-os":"^1.1.6",shiki:"~1.15.0",sinon:"^21.0.0","source-map-support":"^0.5.21",tar:"^7.4.3","ts-dedent":"^2.2.0",tsx:"^4.20.3",typescript:"^5.8.3","typescript-eslint":"^8.36.0","typescript-formatter":"github:jrieken/typescript-formatter#497efb26bc40b5fa59a350e6eab17bce650a7e4b","vite-plugin-top-level-await":"^1.5.0","vite-plugin-wasm":"^3.5.0",vitest:"^3.0.5","vscode-languageserver-protocol":"^3.17.5","vscode-languageserver-textdocument":"^1.0.12","vscode-languageserver-types":"^3.17.5",yaml:"^2.8.0",yargs:"^17.7.2"},dependencies:{"@anthropic-ai/claude-agent-sdk":"0.1.55","@anthropic-ai/sdk":"^0.68.0","@github/copilot":"^0.0.366","@google/genai":"^1.22.0","@humanwhocodes/gitignore-to-minimatch":"1.0.2","@microsoft/tiktokenizer":"^1.0.10","@sinclair/typebox":"^0.34.41","@vscode/copilot-api":"^0.2.5","@vscode/extension-telemetry":"^1.2.0","@vscode/l10n":"^0.0.18","@vscode/prompt-tsx":"^0.4.0-alpha.5","@vscode/tree-sitter-wasm":"0.0.5-php.2","@vscode/webview-ui-toolkit":"^1.3.1","@xterm/headless":"^5.5.0",ajv:"^8.17.1",applicationinsights:"^2.9.7",diff:"^8.0.2",dompurify:"^3.3.0",ignore:"^7.0.5",isbinaryfile:"^5.0.4","jsonc-parser":"^3.3.1","lru-cache":"^11.1.0","markdown-it":"^14.1.0",minimatch:"^10.0.3",undici:"^7.11.0","vscode-tas-client":"^0.1.84","web-tree-sitter":"^0.23.0"},overrides:{"@aminya/node-gyp-build":"npm:node-gyp-build@4.8.1",string_decoder:"npm:string_decoder@1.2.0","node-gyp":"npm:node-gyp@10.3.1"}}});var aN=m(kc=>{"use strict";Object.defineProperty(kc,"__esModule",{value:!0});kc.vscodeEngineVersion=kc.isPreRelease=kc.isProduction=kc.packageJson=void 0;kc.packageJson=nYe();kc.isProduction=kc.packageJson.buildType!=="dev";kc.isPreRelease=kc.packageJson.isPreRelease||!kc.isProduction;kc.vscodeEngineVersion=kc.packageJson.engines.vscode});var Q0=m(Dc=>{"use strict";Object.defineProperty(Dc,"__esModule",{value:!0});Dc.isScenarioAutomation=Dc.AbstractEnvService=Dc.INativeEnvService=Dc.IEnvService=Dc.NameAndVersion=Dc.OperatingSystem=void 0;var oYe=Qe(),sYe=f8(),Tw=aN(),iYe;(function(t){t.Windows="Windows",t.Macintosh="Mac",t.Linux="Linux"})(iYe||(Dc.OperatingSystem=iYe={}));var aae=class{constructor(e,r){this.name=e,this.version=r}format(){return`${this.name}/${this.version}`}};Dc.NameAndVersion=aae;Dc.IEnvService=(0,oYe.createServiceIdentifier)("IEnvService");Dc.INativeEnvService=(0,oYe.createServiceIdentifier)("INativeEnvService");var cae=class{isProduction(){return Tw.isProduction}isPreRelease(){return Tw.isPreRelease}isSimulation(){return sYe.env.SIMULATION==="1"}getBuildType(){return Tw.packageJson.buildType}getVersion(){return Tw.packageJson.version}getBuild(){return Tw.packageJson.build}getName(){return Tw.packageJson.name}getEditorVersionHeaders(){return{"Editor-Version":this.getEditorInfo().format(),"Editor-Plugin-Version":this.getEditorPluginInfo().format()}}};Dc.AbstractEnvService=cae;Dc.isScenarioAutomation=sYe.env.IS_SCENARIO_AUTOMATION==="1"});var ws=m(aT=>{"use strict";Object.defineProperty(aT,"__esModule",{value:!0});aT.generateUuid=void 0;aT.isUUID=wcr;aT.prefixedUuid=Icr;var xcr=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function wcr(t){return xcr.test(t)}aT.generateUuid=(function(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID.bind(crypto);let t=new Uint8Array(16),e=[];for(let r=0;r<256;r++)e.push(r.toString(16).padStart(2,"0"));return function(){crypto.getRandomValues(t),t[6]=t[6]&15|64,t[8]=t[8]&63|128;let n=0,o="";return o+=e[t[n++]],o+=e[t[n++]],o+=e[t[n++]],o+=e[t[n++]],o+="-",o+=e[t[n++]],o+=e[t[n++]],o+="-",o+=e[t[n++]],o+=e[t[n++]],o+="-",o+=e[t[n++]],o+=e[t[n++]],o+="-",o+=e[t[n++]],o+=e[t[n++]],o+=e[t[n++]],o+=e[t[n++]],o+=e[t[n++]],o+=e[t[n++]],o}})();function Icr(t){return`${t}-${(0,aT.generateUuid)()}`}});var aYe=m(Qq=>{"use strict";Object.defineProperty(Qq,"__esModule",{value:!0});Qq.CopilotConfigPrefix=void 0;Qq.CopilotConfigPrefix="github.copilot"});var Sw=m(ca=>{"use strict";Object.defineProperty(ca,"__esModule",{value:!0});ca.stringArray=ca.array=ca.func=ca.error=ca.number=ca.string=ca.boolean=void 0;function Pcr(t){return t===!0||t===!1}ca.boolean=Pcr;function cYe(t){return typeof t=="string"||t instanceof String}ca.string=cYe;function Rcr(t){return typeof t=="number"||t instanceof Number}ca.number=Rcr;function Ocr(t){return t instanceof Error}ca.error=Ocr;function Mcr(t){return typeof t=="function"}ca.func=Mcr;function lYe(t){return Array.isArray(t)}ca.array=lYe;function Ncr(t){return lYe(t)&&t.every(e=>cYe(e))}ca.stringArray=Ncr});var Nae=m(bt=>{"use strict";Object.defineProperty(bt,"__esModule",{value:!0});bt.Message=bt.NotificationType9=bt.NotificationType8=bt.NotificationType7=bt.NotificationType6=bt.NotificationType5=bt.NotificationType4=bt.NotificationType3=bt.NotificationType2=bt.NotificationType1=bt.NotificationType0=bt.NotificationType=bt.RequestType9=bt.RequestType8=bt.RequestType7=bt.RequestType6=bt.RequestType5=bt.RequestType4=bt.RequestType3=bt.RequestType2=bt.RequestType1=bt.RequestType=bt.RequestType0=bt.AbstractMessageSignature=bt.ParameterStructures=bt.ResponseError=bt.ErrorCodes=void 0;var cT=Sw(),lae;(function(t){t.ParseError=-32700,t.InvalidRequest=-32600,t.MethodNotFound=-32601,t.InvalidParams=-32602,t.InternalError=-32603,t.jsonrpcReservedErrorRangeStart=-32099,t.serverErrorStart=-32099,t.MessageWriteError=-32099,t.MessageReadError=-32098,t.PendingResponseRejected=-32097,t.ConnectionInactive=-32096,t.ServerNotInitialized=-32002,t.UnknownErrorCode=-32001,t.jsonrpcReservedErrorRangeEnd=-32e3,t.serverErrorEnd=-32e3})(lae||(bt.ErrorCodes=lae={}));var uae=class t extends Error{constructor(e,r,n){super(r),this.code=cT.number(e)?e:lae.UnknownErrorCode,this.data=n,Object.setPrototypeOf(this,t.prototype)}toJson(){let e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),e}};bt.ResponseError=uae;var Uc=class t{constructor(e){this.kind=e}static is(e){return e===t.auto||e===t.byName||e===t.byPosition}toString(){return this.kind}};bt.ParameterStructures=Uc;Uc.auto=new Uc("auto");Uc.byPosition=new Uc("byPosition");Uc.byName=new Uc("byName");var si=class{constructor(e,r){this.method=e,this.numberOfParams=r}get parameterStructures(){return Uc.auto}};bt.AbstractMessageSignature=si;var dae=class extends si{constructor(e){super(e,0)}};bt.RequestType0=dae;var fae=class extends si{constructor(e,r=Uc.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};bt.RequestType=fae;var pae=class extends si{constructor(e,r=Uc.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};bt.RequestType1=pae;var hae=class extends si{constructor(e){super(e,2)}};bt.RequestType2=hae;var mae=class extends si{constructor(e){super(e,3)}};bt.RequestType3=mae;var gae=class extends si{constructor(e){super(e,4)}};bt.RequestType4=gae;var _ae=class extends si{constructor(e){super(e,5)}};bt.RequestType5=_ae;var vae=class extends si{constructor(e){super(e,6)}};bt.RequestType6=vae;var yae=class extends si{constructor(e){super(e,7)}};bt.RequestType7=yae;var Eae=class extends si{constructor(e){super(e,8)}};bt.RequestType8=Eae;var Tae=class extends si{constructor(e){super(e,9)}};bt.RequestType9=Tae;var Sae=class extends si{constructor(e,r=Uc.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};bt.NotificationType=Sae;var bae=class extends si{constructor(e){super(e,0)}};bt.NotificationType0=bae;var Cae=class extends si{constructor(e,r=Uc.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};bt.NotificationType1=Cae;var Aae=class extends si{constructor(e){super(e,2)}};bt.NotificationType2=Aae;var xae=class extends si{constructor(e){super(e,3)}};bt.NotificationType3=xae;var wae=class extends si{constructor(e){super(e,4)}};bt.NotificationType4=wae;var Iae=class extends si{constructor(e){super(e,5)}};bt.NotificationType5=Iae;var Pae=class extends si{constructor(e){super(e,6)}};bt.NotificationType6=Pae;var Rae=class extends si{constructor(e){super(e,7)}};bt.NotificationType7=Rae;var Oae=class extends si{constructor(e){super(e,8)}};bt.NotificationType8=Oae;var Mae=class extends si{constructor(e){super(e,9)}};bt.NotificationType9=Mae;var uYe;(function(t){function e(o){let s=o;return s&&cT.string(s.method)&&(cT.string(s.id)||cT.number(s.id))}t.isRequest=e;function r(o){let s=o;return s&&cT.string(s.method)&&o.id===void 0}t.isNotification=r;function n(o){let s=o;return s&&(s.result!==void 0||!!s.error)&&(cT.string(s.id)||cT.number(s.id)||s.id===null)}t.isResponse=n})(uYe||(bt.Message=uYe={}))});var kae=m(n1=>{"use strict";var dYe;Object.defineProperty(n1,"__esModule",{value:!0});n1.LRUCache=n1.LinkedMap=n1.Touch=void 0;var la;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(la||(n1.Touch=la={}));var Zq=class{constructor(){this[dYe]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,r=la.None){let n=this._map.get(e);if(n)return r!==la.None&&this.touch(n,r),n.value}set(e,r,n=la.None){let o=this._map.get(e);if(o)o.value=r,n!==la.None&&this.touch(o,n);else{switch(o={key:e,value:r,next:void 0,previous:void 0},n){case la.None:this.addItemLast(o);break;case la.First:this.addItemFirst(o);break;case la.Last:this.addItemLast(o);break;default:this.addItemLast(o);break}this._map.set(e,o),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let r=this._map.get(e);if(r)return this._map.delete(e),this.removeItem(r),this._size--,r.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,r){let n=this._state,o=this._head;for(;o;){if(r?e.bind(r)(o.value,o.key,this):e(o.value,o.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");o=o.next}}keys(){let e=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(r){let o={value:r.key,done:!1};return r=r.next,o}else return{value:void 0,done:!0}}};return n}values(){let e=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(r){let o={value:r.value,done:!1};return r=r.next,o}else return{value:void 0,done:!0}}};return n}entries(){let e=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(r){let o={value:[r.key,r.value],done:!1};return r=r.next,o}else return{value:void 0,done:!0}}};return n}[(dYe=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let r=this._head,n=this.size;for(;r&&n>e;)this._map.delete(r.key),r=r.next,n--;this._head=r,this._size=n,r&&(r.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let r=e.next,n=e.previous;if(!r||!n)throw new Error("Invalid list");r.previous=n,n.next=r}e.next=void 0,e.previous=void 0,this._state++}touch(e,r){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(r!==la.First&&r!==la.Last)){if(r===la.First){if(e===this._head)return;let n=e.next,o=e.previous;e===this._tail?(o.next=void 0,this._tail=o):(n.previous=o,o.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(r===la.Last){if(e===this._tail)return;let n=e.next,o=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=o,o.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((r,n)=>{e.push([n,r])}),e}fromJSON(e){this.clear();for(let[r,n]of e)this.set(r,n)}};n1.LinkedMap=Zq;var Lae=class extends Zq{constructor(e,r=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,r),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,r=la.AsNew){return super.get(e,r)}peek(e){return super.get(e,la.None)}set(e,r){return super.set(e,r,la.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};n1.LRUCache=Lae});var pYe=m(Jq=>{"use strict";Object.defineProperty(Jq,"__esModule",{value:!0});Jq.Disposable=void 0;var fYe;(function(t){function e(r){return{dispose:r}}t.create=e})(fYe||(Jq.Disposable=fYe={}))});var i1=m(qae=>{"use strict";Object.defineProperty(qae,"__esModule",{value:!0});var Dae;function Uae(){if(Dae===void 0)throw new Error("No runtime abstraction layer installed");return Dae}(function(t){function e(r){if(r===void 0)throw new Error("No runtime abstraction layer provided");Dae=r}t.install=e})(Uae||(Uae={}));qae.default=Uae});var Cw=m(bw=>{"use strict";Object.defineProperty(bw,"__esModule",{value:!0});bw.Emitter=bw.Event=void 0;var Lcr=i1(),hYe;(function(t){let e={dispose(){}};t.None=function(){return e}})(hYe||(bw.Event=hYe={}));var Fae=class{add(e,r=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(r),Array.isArray(n)&&n.push({dispose:()=>this.remove(e,r)})}remove(e,r=null){if(!this._callbacks)return;let n=!1;for(let o=0,s=this._callbacks.length;o<s;o++)if(this._callbacks[o]===e)if(this._contexts[o]===r){this._callbacks.splice(o,1),this._contexts.splice(o,1);return}else n=!0;if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let r=[],n=this._callbacks.slice(0),o=this._contexts.slice(0);for(let s=0,a=n.length;s<a;s++)try{r.push(n[s].apply(o[s],e))}catch(c){(0,Lcr.default)().console.error(c)}return r}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},Xq=class t{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,r,n)=>{this._callbacks||(this._callbacks=new Fae),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,r);let o={dispose:()=>{this._callbacks&&(this._callbacks.remove(e,r),o.dispose=t._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(n)&&n.push(o),o}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};bw.Emitter=Xq;Xq._noop=function(){}});var rF=m(Aw=>{"use strict";Object.defineProperty(Aw,"__esModule",{value:!0});Aw.CancellationTokenSource=Aw.CancellationToken=void 0;var kcr=i1(),Dcr=Sw(),jae=Cw(),eF;(function(t){t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:jae.Event.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:jae.Event.None});function e(r){let n=r;return n&&(n===t.None||n===t.Cancelled||Dcr.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}t.is=e})(eF||(Aw.CancellationToken=eF={}));var Ucr=Object.freeze(function(t,e){let r=(0,kcr.default)().timer.setTimeout(t.bind(e),0);return{dispose(){r.dispose()}}}),tF=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?Ucr:(this._emitter||(this._emitter=new jae.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},Bae=class{get token(){return this._token||(this._token=new tF),this._token}cancel(){this._token?this._token.cancel():this._token=eF.Cancelled}dispose(){this._token?this._token instanceof tF&&this._token.dispose():this._token=eF.None}};Aw.CancellationTokenSource=Bae});var mYe=m(xw=>{"use strict";Object.defineProperty(xw,"__esModule",{value:!0});xw.SharedArrayReceiverStrategy=xw.SharedArraySenderStrategy=void 0;var qcr=rF(),cN;(function(t){t.Continue=0,t.Cancelled=1})(cN||(cN={}));var $ae=class{constructor(){this.buffers=new Map}enableCancellation(e){if(e.id===null)return;let r=new SharedArrayBuffer(4),n=new Int32Array(r,0,1);n[0]=cN.Continue,this.buffers.set(e.id,r),e.$cancellationData=r}async sendCancellation(e,r){let n=this.buffers.get(r);if(n===void 0)return;let o=new Int32Array(n,0,1);Atomics.store(o,0,cN.Cancelled)}cleanup(e){this.buffers.delete(e)}dispose(){this.buffers.clear()}};xw.SharedArraySenderStrategy=$ae;var Vae=class{constructor(e){this.data=new Int32Array(e,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===cN.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}},Hae=class{constructor(e){this.token=new Vae(e)}cancel(){}dispose(){}},Gae=class{constructor(){this.kind="request"}createCancellationTokenSource(e){let r=e.$cancellationData;return r===void 0?new qcr.CancellationTokenSource:new Hae(r)}};xw.SharedArrayReceiverStrategy=Gae});var Wae=m(nF=>{"use strict";Object.defineProperty(nF,"__esModule",{value:!0});nF.Semaphore=void 0;var Fcr=i1(),zae=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((r,n)=>{this._waiting.push({thunk:e,resolve:r,reject:n}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,Fcr.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let r=e.thunk();r instanceof Promise?r.then(n=>{this._active--,e.resolve(n),this.runNext()},n=>{this._active--,e.reject(n),this.runNext()}):(this._active--,e.resolve(r),this.runNext())}catch(r){this._active--,e.reject(r),this.runNext()}}};nF.Semaphore=zae});var _Ye=m(o1=>{"use strict";Object.defineProperty(o1,"__esModule",{value:!0});o1.ReadableStreamMessageReader=o1.AbstractMessageReader=o1.MessageReader=void 0;var Yae=i1(),ww=Sw(),Kae=Cw(),jcr=Wae(),gYe;(function(t){function e(r){let n=r;return n&&ww.func(n.listen)&&ww.func(n.dispose)&&ww.func(n.onError)&&ww.func(n.onClose)&&ww.func(n.onPartialMessage)}t.is=e})(gYe||(o1.MessageReader=gYe={}));var iF=class{constructor(){this.errorEmitter=new Kae.Emitter,this.closeEmitter=new Kae.Emitter,this.partialMessageEmitter=new Kae.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${ww.string(e.message)?e.message:"unknown"}`)}};o1.AbstractMessageReader=iF;var Qae;(function(t){function e(r){let n,o,s,a=new Map,c,l=new Map;if(r===void 0||typeof r=="string")n=r??"utf-8";else{if(n=r.charset??"utf-8",r.contentDecoder!==void 0&&(s=r.contentDecoder,a.set(s.name,s)),r.contentDecoders!==void 0)for(let u of r.contentDecoders)a.set(u.name,u);if(r.contentTypeDecoder!==void 0&&(c=r.contentTypeDecoder,l.set(c.name,c)),r.contentTypeDecoders!==void 0)for(let u of r.contentTypeDecoders)l.set(u.name,u)}return c===void 0&&(c=(0,Yae.default)().applicationJson.decoder,l.set(c.name,c)),{charset:n,contentDecoder:s,contentDecoders:a,contentTypeDecoder:c,contentTypeDecoders:l}}t.fromOptions=e})(Qae||(Qae={}));var Zae=class extends iF{constructor(e,r){super(),this.readable=e,this.options=Qae.fromOptions(r),this.buffer=(0,Yae.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new jcr.Semaphore(1)}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let r=this.readable.onData(n=>{this.onData(n)});return this.readable.onError(n=>this.fireError(n)),this.readable.onClose(()=>this.fireClose()),r}onData(e){try{for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let n=this.buffer.tryReadHeaders(!0);if(!n)return;let o=n.get("content-length");if(!o){this.fireError(new Error(`Header must provide a Content-Length property.
${JSON.stringify(Object.fromEntries(n))}`));return}let s=parseInt(o);if(isNaN(s)){this.fireError(new Error(`Content-Length value must be a number. Got ${o}`));return}this.nextMessageLength=s}let r=this.buffer.tryReadBody(this.nextMessageLength);if(r===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{let n=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(r):r,o=await this.options.contentTypeDecoder.decode(n,this.options);this.callback(o)}).catch(n=>{this.fireError(n)})}}catch(r){this.fireError(r)}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,Yae.default)().timer.setTimeout((e,r)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:r}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};o1.ReadableStreamMessageReader=Zae});var SYe=m(s1=>{"use strict";Object.defineProperty(s1,"__esModule",{value:!0});s1.WriteableStreamMessageWriter=s1.AbstractMessageWriter=s1.MessageWriter=void 0;var vYe=i1(),lN=Sw(),Bcr=Wae(),yYe=Cw(),$cr="Content-Length: ",EYe=`\r
`,TYe;(function(t){function e(r){let n=r;return n&&lN.func(n.dispose)&&lN.func(n.onClose)&&lN.func(n.onError)&&lN.func(n.write)}t.is=e})(TYe||(s1.MessageWriter=TYe={}));var oF=class{constructor(){this.errorEmitter=new yYe.Emitter,this.closeEmitter=new yYe.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,r,n){this.errorEmitter.fire([this.asError(e),r,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${lN.string(e.message)?e.message:"unknown"}`)}};s1.AbstractMessageWriter=oF;var Jae;(function(t){function e(r){return r===void 0||typeof r=="string"?{charset:r??"utf-8",contentTypeEncoder:(0,vYe.default)().applicationJson.encoder}:{charset:r.charset??"utf-8",contentEncoder:r.contentEncoder,contentTypeEncoder:r.contentTypeEncoder??(0,vYe.default)().applicationJson.encoder}}t.fromOptions=e})(Jae||(Jae={}));var Xae=class extends oF{constructor(e,r){super(),this.writable=e,this.options=Jae.fromOptions(r),this.errorCount=0,this.writeSemaphore=new Bcr.Semaphore(1),this.writable.onError(n=>this.fireError(n)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(n=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(n):n).then(n=>{let o=[];return o.push($cr,n.byteLength.toString(),EYe),o.push(EYe),this.doWrite(e,o,n)},n=>{throw this.fireError(n),n}))}async doWrite(e,r,n){try{return await this.writable.write(r.join(""),"ascii"),this.writable.write(n)}catch(o){return this.handleError(o,e),Promise.reject(o)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}end(){this.writable.end()}};s1.WriteableStreamMessageWriter=Xae});var bYe=m(sF=>{"use strict";Object.defineProperty(sF,"__esModule",{value:!0});sF.AbstractMessageBuffer=void 0;var Vcr=13,Hcr=10,Gcr=`\r
`,ece=class{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let r=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(r),this._totalLength+=r.byteLength}tryReadHeaders(e=!1){if(this._chunks.length===0)return;let r=0,n=0,o=0,s=0;e:for(;n<this._chunks.length;){let u=this._chunks[n];for(o=0;o<u.length;){switch(u[o]){case Vcr:switch(r){case 0:r=1;break;case 2:r=3;break;default:r=0}break;case Hcr:switch(r){case 1:r=2;break;case 3:r=4,o++;break e;default:r=0}break;default:r=0}o++}s+=u.byteLength,n++}if(r!==4)return;let a=this._read(s+o),c=new Map,l=this.toString(a,"ascii").split(Gcr);if(l.length<2)return c;for(let u=0;u<l.length-2;u++){let d=l[u],f=d.indexOf(":");if(f===-1)throw new Error(`Message header must separate key and value using ':'
${d}`);let p=d.substr(0,f),h=d.substr(f+1).trim();c.set(e?p.toLowerCase():p,h)}return c}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let s=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(s)}if(this._chunks[0].byteLength>e){let s=this._chunks[0],a=this.asNative(s,e);return this._chunks[0]=s.slice(e),this._totalLength-=e,a}let r=this.allocNative(e),n=0,o=0;for(;e>0;){let s=this._chunks[o];if(s.byteLength>e){let a=s.slice(0,e);r.set(a,n),n+=e,this._chunks[o]=s.slice(e),this._totalLength-=e,e-=e}else r.set(s,n),n+=s.byteLength,this._chunks.shift(),this._totalLength-=s.byteLength,e-=s.byteLength}return r}};sF.AbstractMessageBuffer=ece});var IYe=m(sr=>{"use strict";Object.defineProperty(sr,"__esModule",{value:!0});sr.createMessageConnection=sr.ConnectionOptions=sr.MessageStrategy=sr.CancellationStrategy=sr.CancellationSenderStrategy=sr.CancellationReceiverStrategy=sr.RequestCancellationReceiverStrategy=sr.IdCancellationReceiverStrategy=sr.ConnectionStrategy=sr.ConnectionError=sr.ConnectionErrors=sr.LogTraceNotification=sr.SetTraceNotification=sr.TraceFormat=sr.TraceValues=sr.Trace=sr.NullLogger=sr.ProgressType=sr.ProgressToken=void 0;var CYe=i1(),Mi=Sw(),Ft=Nae(),AYe=kae(),uN=Cw(),tce=rF(),pN;(function(t){t.type=new Ft.NotificationType("$/cancelRequest")})(pN||(pN={}));var rce;(function(t){function e(r){return typeof r=="string"||typeof r=="number"}t.is=e})(rce||(sr.ProgressToken=rce={}));var dN;(function(t){t.type=new Ft.NotificationType("$/progress")})(dN||(dN={}));var nce=class{constructor(){}};sr.ProgressType=nce;var ice;(function(t){function e(r){return Mi.func(r)}t.is=e})(ice||(ice={}));sr.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var mn;(function(t){t[t.Off=0]="Off",t[t.Messages=1]="Messages",t[t.Compact=2]="Compact",t[t.Verbose=3]="Verbose"})(mn||(sr.Trace=mn={}));var xYe;(function(t){t.Off="off",t.Messages="messages",t.Compact="compact",t.Verbose="verbose"})(xYe||(sr.TraceValues=xYe={}));(function(t){function e(n){if(!Mi.string(n))return t.Off;switch(n=n.toLowerCase(),n){case"off":return t.Off;case"messages":return t.Messages;case"compact":return t.Compact;case"verbose":return t.Verbose;default:return t.Off}}t.fromString=e;function r(n){switch(n){case t.Off:return"off";case t.Messages:return"messages";case t.Compact:return"compact";case t.Verbose:return"verbose";default:return"off"}}t.toString=r})(mn||(sr.Trace=mn={}));var Vl;(function(t){t.Text="text",t.JSON="json"})(Vl||(sr.TraceFormat=Vl={}));(function(t){function e(r){return Mi.string(r)?(r=r.toLowerCase(),r==="json"?t.JSON:t.Text):t.Text}t.fromString=e})(Vl||(sr.TraceFormat=Vl={}));var oce;(function(t){t.type=new Ft.NotificationType("$/setTrace")})(oce||(sr.SetTraceNotification=oce={}));var aF;(function(t){t.type=new Ft.NotificationType("$/logTrace")})(aF||(sr.LogTraceNotification=aF={}));var fN;(function(t){t[t.Closed=1]="Closed",t[t.Disposed=2]="Disposed",t[t.AlreadyListening=3]="AlreadyListening"})(fN||(sr.ConnectionErrors=fN={}));var Iw=class t extends Error{constructor(e,r){super(r),this.code=e,Object.setPrototypeOf(this,t.prototype)}};sr.ConnectionError=Iw;var sce;(function(t){function e(r){let n=r;return n&&Mi.func(n.cancelUndispatched)}t.is=e})(sce||(sr.ConnectionStrategy=sce={}));var cF;(function(t){function e(r){let n=r;return n&&(n.kind===void 0||n.kind==="id")&&Mi.func(n.createCancellationTokenSource)&&(n.dispose===void 0||Mi.func(n.dispose))}t.is=e})(cF||(sr.IdCancellationReceiverStrategy=cF={}));var ace;(function(t){function e(r){let n=r;return n&&n.kind==="request"&&Mi.func(n.createCancellationTokenSource)&&(n.dispose===void 0||Mi.func(n.dispose))}t.is=e})(ace||(sr.RequestCancellationReceiverStrategy=ace={}));var lF;(function(t){t.Message=Object.freeze({createCancellationTokenSource(r){return new tce.CancellationTokenSource}});function e(r){return cF.is(r)||ace.is(r)}t.is=e})(lF||(sr.CancellationReceiverStrategy=lF={}));var uF;(function(t){t.Message=Object.freeze({sendCancellation(r,n){return r.sendNotification(pN.type,{id:n})},cleanup(r){}});function e(r){let n=r;return n&&Mi.func(n.sendCancellation)&&Mi.func(n.cleanup)}t.is=e})(uF||(sr.CancellationSenderStrategy=uF={}));var dF;(function(t){t.Message=Object.freeze({receiver:lF.Message,sender:uF.Message});function e(r){let n=r;return n&&lF.is(n.receiver)&&uF.is(n.sender)}t.is=e})(dF||(sr.CancellationStrategy=dF={}));var fF;(function(t){function e(r){let n=r;return n&&Mi.func(n.handleMessage)}t.is=e})(fF||(sr.MessageStrategy=fF={}));var wYe;(function(t){function e(r){let n=r;return n&&(dF.is(n.cancellationStrategy)||sce.is(n.connectionStrategy)||fF.is(n.messageStrategy))}t.is=e})(wYe||(sr.ConnectionOptions=wYe={}));var Yd;(function(t){t[t.New=1]="New",t[t.Listening=2]="Listening",t[t.Closed=3]="Closed",t[t.Disposed=4]="Disposed"})(Yd||(Yd={}));function zcr(t,e,r,n){let o=r!==void 0?r:sr.NullLogger,s=0,a=0,c=0,l="2.0",u,d=new Map,f,p=new Map,h=new Map,_,g=new AYe.LinkedMap,v=new Map,E=new Set,y=new Map,S=mn.Off,b=Vl.Text,w,P=Yd.New,A=new uN.Emitter,O=new uN.Emitter,L=new uN.Emitter,j=new uN.Emitter,$=new uN.Emitter,Q=n&&n.cancellationStrategy?n.cancellationStrategy:dF.Message;function K(M){if(M===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+M.toString()}function N(M){return M===null?"res-unknown-"+(++c).toString():"res-"+M.toString()}function G(){return"not-"+(++a).toString()}function Y(M,ee){Ft.Message.isRequest(ee)?M.set(K(ee.id),ee):Ft.Message.isResponse(ee)?M.set(N(ee.id),ee):M.set(G(),ee)}function J(M){}function ie(){return P===Yd.Listening}function oe(){return P===Yd.Closed}function ne(){return P===Yd.Disposed}function de(){(P===Yd.New||P===Yd.Listening)&&(P=Yd.Closed,O.fire(void 0))}function Ee(M){A.fire([M,void 0,void 0])}function Me(M){A.fire(M)}t.onClose(de),t.onError(Ee),e.onClose(de),e.onError(Me);function He(){_||g.size===0||(_=(0,CYe.default)().timer.setImmediate(()=>{_=void 0,lt()}))}function Je(M){Ft.Message.isRequest(M)?Dt(M):Ft.Message.isNotification(M)?Nt(M):Ft.Message.isResponse(M)?qt(M):D(M)}function lt(){if(g.size===0)return;let M=g.shift();try{let ee=n?.messageStrategy;fF.is(ee)?ee.handleMessage(M,Je):Je(M)}finally{He()}}let St=M=>{try{if(Ft.Message.isNotification(M)&&M.method===pN.type.method){let ee=M.params.id,pe=K(ee),be=g.get(pe);if(Ft.Message.isRequest(be)){let ot=n?.connectionStrategy,mt=ot&&ot.cancelUndispatched?ot.cancelUndispatched(be,J):void 0;if(mt&&(mt.error!==void 0||mt.result!==void 0)){g.delete(pe),y.delete(ee),mt.id=be.id,me(mt,M.method,Date.now()),e.write(mt).catch(()=>o.error("Sending response for canceled message failed."));return}}let ct=y.get(ee);if(ct!==void 0){ct.cancel(),et(M);return}else E.add(ee)}Y(g,M)}finally{He()}};function Dt(M){if(ne())return;function ee(Ye,ut,st){let wt={jsonrpc:l,id:M.id};Ye instanceof Ft.ResponseError?wt.error=Ye.toJson():wt.result=Ye===void 0?null:Ye,me(wt,ut,st),e.write(wt).catch(()=>o.error("Sending response failed."))}function pe(Ye,ut,st){let wt={jsonrpc:l,id:M.id,error:Ye.toJson()};me(wt,ut,st),e.write(wt).catch(()=>o.error("Sending response failed."))}function be(Ye,ut,st){Ye===void 0&&(Ye=null);let wt={jsonrpc:l,id:M.id,result:Ye};me(wt,ut,st),e.write(wt).catch(()=>o.error("Sending response failed."))}ye(M);let ct=d.get(M.method),ot,mt;ct&&(ot=ct.type,mt=ct.handler);let vt=Date.now();if(mt||u){let Ye=M.id??String(Date.now()),ut=cF.is(Q.receiver)?Q.receiver.createCancellationTokenSource(Ye):Q.receiver.createCancellationTokenSource(M);M.id!==null&&E.has(M.id)&&ut.cancel(),M.id!==null&&y.set(Ye,ut);try{let st;if(mt)if(M.params===void 0){if(ot!==void 0&&ot.numberOfParams!==0){pe(new Ft.ResponseError(Ft.ErrorCodes.InvalidParams,`Request ${M.method} defines ${ot.numberOfParams} params but received none.`),M.method,vt);return}st=mt(ut.token)}else if(Array.isArray(M.params)){if(ot!==void 0&&ot.parameterStructures===Ft.ParameterStructures.byName){pe(new Ft.ResponseError(Ft.ErrorCodes.InvalidParams,`Request ${M.method} defines parameters by name but received parameters by position`),M.method,vt);return}st=mt(...M.params,ut.token)}else{if(ot!==void 0&&ot.parameterStructures===Ft.ParameterStructures.byPosition){pe(new Ft.ResponseError(Ft.ErrorCodes.InvalidParams,`Request ${M.method} defines parameters by position but received parameters by name`),M.method,vt);return}st=mt(M.params,ut.token)}else u&&(st=u(M.method,M.params,ut.token));let wt=st;st?wt.then?wt.then(kt=>{y.delete(Ye),ee(kt,M.method,vt)},kt=>{y.delete(Ye),kt instanceof Ft.ResponseError?pe(kt,M.method,vt):kt&&Mi.string(kt.message)?pe(new Ft.ResponseError(Ft.ErrorCodes.InternalError,`Request ${M.method} failed with message: ${kt.message}`),M.method,vt):pe(new Ft.ResponseError(Ft.ErrorCodes.InternalError,`Request ${M.method} failed unexpectedly without providing any details.`),M.method,vt)}):(y.delete(Ye),ee(st,M.method,vt)):(y.delete(Ye),be(st,M.method,vt))}catch(st){y.delete(Ye),st instanceof Ft.ResponseError?ee(st,M.method,vt):st&&Mi.string(st.message)?pe(new Ft.ResponseError(Ft.ErrorCodes.InternalError,`Request ${M.method} failed with message: ${st.message}`),M.method,vt):pe(new Ft.ResponseError(Ft.ErrorCodes.InternalError,`Request ${M.method} failed unexpectedly without providing any details.`),M.method,vt)}}else pe(new Ft.ResponseError(Ft.ErrorCodes.MethodNotFound,`Unhandled method ${M.method}`),M.method,vt)}function qt(M){if(!ne())if(M.id===null)M.error?o.error(`Received response message without id: Error is: 
${JSON.stringify(M.error,void 0,4)}`):o.error("Received response message without id. No further error information provided.");else{let ee=M.id,pe=v.get(ee);if(Rt(M,pe),pe!==void 0){v.delete(ee);try{if(M.error){let be=M.error;pe.reject(new Ft.ResponseError(be.code,be.message,be.data))}else if(M.result!==void 0)pe.resolve(M.result);else throw new Error("Should never happen.")}catch(be){be.message?o.error(`Response handler '${pe.method}' failed with message: ${be.message}`):o.error(`Response handler '${pe.method}' failed unexpectedly.`)}}}}function Nt(M){if(ne())return;let ee,pe;if(M.method===pN.type.method){let be=M.params.id;E.delete(be),et(M);return}else{let be=p.get(M.method);be&&(pe=be.handler,ee=be.type)}if(pe||f)try{if(et(M),pe)if(M.params===void 0)ee!==void 0&&ee.numberOfParams!==0&&ee.parameterStructures!==Ft.ParameterStructures.byName&&o.error(`Notification ${M.method} defines ${ee.numberOfParams} params but received none.`),pe();else if(Array.isArray(M.params)){let be=M.params;M.method===dN.type.method&&be.length===2&&rce.is(be[0])?pe({token:be[0],value:be[1]}):(ee!==void 0&&(ee.parameterStructures===Ft.ParameterStructures.byName&&o.error(`Notification ${M.method} defines parameters by name but received parameters by position`),ee.numberOfParams!==M.params.length&&o.error(`Notification ${M.method} defines ${ee.numberOfParams} params but received ${be.length} arguments`)),pe(...be))}else ee!==void 0&&ee.parameterStructures===Ft.ParameterStructures.byPosition&&o.error(`Notification ${M.method} defines parameters by position but received parameters by name`),pe(M.params);else f&&f(M.method,M.params)}catch(be){be.message?o.error(`Notification handler '${M.method}' failed with message: ${be.message}`):o.error(`Notification handler '${M.method}' failed unexpectedly.`)}else L.fire(M)}function D(M){if(!M){o.error("Received empty message.");return}o.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(M,null,4)}`);let ee=M;if(Mi.string(ee.id)||Mi.number(ee.id)){let pe=ee.id,be=v.get(pe);be&&be.reject(new Error("The received response has neither a result nor an error property."))}}function fe(M){if(M!=null)switch(S){case mn.Verbose:return JSON.stringify(M,null,4);case mn.Compact:return JSON.stringify(M);default:return}}function B(M){if(!(S===mn.Off||!w))if(b===Vl.Text){let ee;(S===mn.Verbose||S===mn.Compact)&&M.params&&(ee=`Params: ${fe(M.params)}

`),w.log(`Sending request '${M.method} - (${M.id})'.`,ee)}else Ot("send-request",M)}function Oe(M){if(!(S===mn.Off||!w))if(b===Vl.Text){let ee;(S===mn.Verbose||S===mn.Compact)&&(M.params?ee=`Params: ${fe(M.params)}

`:ee=`No parameters provided.

`),w.log(`Sending notification '${M.method}'.`,ee)}else Ot("send-notification",M)}function me(M,ee,pe){if(!(S===mn.Off||!w))if(b===Vl.Text){let be;(S===mn.Verbose||S===mn.Compact)&&(M.error&&M.error.data?be=`Error data: ${fe(M.error.data)}

`:M.result?be=`Result: ${fe(M.result)}

`:M.error===void 0&&(be=`No result returned.

`)),w.log(`Sending response '${ee} - (${M.id})'. Processing request took ${Date.now()-pe}ms`,be)}else Ot("send-response",M)}function ye(M){if(!(S===mn.Off||!w))if(b===Vl.Text){let ee;(S===mn.Verbose||S===mn.Compact)&&M.params&&(ee=`Params: ${fe(M.params)}

`),w.log(`Received request '${M.method} - (${M.id})'.`,ee)}else Ot("receive-request",M)}function et(M){if(!(S===mn.Off||!w||M.method===aF.type.method))if(b===Vl.Text){let ee;(S===mn.Verbose||S===mn.Compact)&&(M.params?ee=`Params: ${fe(M.params)}

`:ee=`No parameters provided.

`),w.log(`Received notification '${M.method}'.`,ee)}else Ot("receive-notification",M)}function Rt(M,ee){if(!(S===mn.Off||!w))if(b===Vl.Text){let pe;if((S===mn.Verbose||S===mn.Compact)&&(M.error&&M.error.data?pe=`Error data: ${fe(M.error.data)}

`:M.result?pe=`Result: ${fe(M.result)}

`:M.error===void 0&&(pe=`No result returned.

`)),ee){let be=M.error?` Request failed: ${M.error.message} (${M.error.code}).`:"";w.log(`Received response '${ee.method} - (${M.id})' in ${Date.now()-ee.timerStart}ms.${be}`,pe)}else w.log(`Received response ${M.id} without active response promise.`,pe)}else Ot("receive-response",M)}function Ot(M,ee){if(!w||S===mn.Off)return;let pe={isLSPMessage:!0,type:M,message:ee,timestamp:Date.now()};w.log(pe)}function xt(){if(oe())throw new Iw(fN.Closed,"Connection is closed.");if(ne())throw new Iw(fN.Disposed,"Connection is disposed.")}function Ut(){if(ie())throw new Iw(fN.AlreadyListening,"Connection is already listening")}function Jt(){if(!ie())throw new Error("Call listen() first.")}function $t(M){return M===void 0?null:M}function ar(M){if(M!==null)return M}function _r(M){return M!=null&&!Array.isArray(M)&&typeof M=="object"}function ur(M,ee){switch(M){case Ft.ParameterStructures.auto:return _r(ee)?ar(ee):[$t(ee)];case Ft.ParameterStructures.byName:if(!_r(ee))throw new Error("Received parameters by name but param is not an object literal.");return ar(ee);case Ft.ParameterStructures.byPosition:return[$t(ee)];default:throw new Error(`Unknown parameter structure ${M.toString()}`)}}function zt(M,ee){let pe,be=M.numberOfParams;switch(be){case 0:pe=void 0;break;case 1:pe=ur(M.parameterStructures,ee[0]);break;default:pe=[];for(let ct=0;ct<ee.length&&ct<be;ct++)pe.push($t(ee[ct]));if(ee.length<be)for(let ct=ee.length;ct<be;ct++)pe.push(null);break}return pe}let Wt={sendNotification:(M,...ee)=>{xt();let pe,be;if(Mi.string(M)){pe=M;let ot=ee[0],mt=0,vt=Ft.ParameterStructures.auto;Ft.ParameterStructures.is(ot)&&(mt=1,vt=ot);let Ye=ee.length,ut=Ye-mt;switch(ut){case 0:be=void 0;break;case 1:be=ur(vt,ee[mt]);break;default:if(vt===Ft.ParameterStructures.byName)throw new Error(`Received ${ut} parameters for 'by Name' notification parameter structure.`);be=ee.slice(mt,Ye).map(st=>$t(st));break}}else{let ot=ee;pe=M.method,be=zt(M,ot)}let ct={jsonrpc:l,method:pe,params:be};return Oe(ct),e.write(ct).catch(ot=>{throw o.error("Sending notification failed."),ot})},onNotification:(M,ee)=>{xt();let pe;return Mi.func(M)?f=M:ee&&(Mi.string(M)?(pe=M,p.set(M,{type:void 0,handler:ee})):(pe=M.method,p.set(M.method,{type:M,handler:ee}))),{dispose:()=>{pe!==void 0?p.delete(pe):f=void 0}}},onProgress:(M,ee,pe)=>{if(h.has(ee))throw new Error(`Progress handler for token ${ee} already registered`);return h.set(ee,pe),{dispose:()=>{h.delete(ee)}}},sendProgress:(M,ee,pe)=>Wt.sendNotification(dN.type,{token:ee,value:pe}),onUnhandledProgress:j.event,sendRequest:(M,...ee)=>{xt(),Jt();let pe,be,ct;if(Mi.string(M)){pe=M;let Ye=ee[0],ut=ee[ee.length-1],st=0,wt=Ft.ParameterStructures.auto;Ft.ParameterStructures.is(Ye)&&(st=1,wt=Ye);let kt=ee.length;tce.CancellationToken.is(ut)&&(kt=kt-1,ct=ut);let Vt=kt-st;switch(Vt){case 0:be=void 0;break;case 1:be=ur(wt,ee[st]);break;default:if(wt===Ft.ParameterStructures.byName)throw new Error(`Received ${Vt} parameters for 'by Name' request parameter structure.`);be=ee.slice(st,kt).map(Pr=>$t(Pr));break}}else{let Ye=ee;pe=M.method,be=zt(M,Ye);let ut=M.numberOfParams;ct=tce.CancellationToken.is(Ye[ut])?Ye[ut]:void 0}let ot=s++,mt;ct&&(mt=ct.onCancellationRequested(()=>{let Ye=Q.sender.sendCancellation(Wt,ot);return Ye===void 0?(o.log(`Received no promise from cancellation strategy when cancelling id ${ot}`),Promise.resolve()):Ye.catch(()=>{o.log(`Sending cancellation messages for id ${ot} failed`)})}));let vt={jsonrpc:l,id:ot,method:pe,params:be};return B(vt),typeof Q.sender.enableCancellation=="function"&&Q.sender.enableCancellation(vt),new Promise(async(Ye,ut)=>{let st=Vt=>{Ye(Vt),Q.sender.cleanup(ot),mt?.dispose()},wt=Vt=>{ut(Vt),Q.sender.cleanup(ot),mt?.dispose()},kt={method:pe,timerStart:Date.now(),resolve:st,reject:wt};try{await e.write(vt),v.set(ot,kt)}catch(Vt){throw o.error("Sending request failed."),kt.reject(new Ft.ResponseError(Ft.ErrorCodes.MessageWriteError,Vt.message?Vt.message:"Unknown reason")),Vt}})},onRequest:(M,ee)=>{xt();let pe=null;return ice.is(M)?(pe=void 0,u=M):Mi.string(M)?(pe=null,ee!==void 0&&(pe=M,d.set(M,{handler:ee,type:void 0}))):ee!==void 0&&(pe=M.method,d.set(M.method,{type:M,handler:ee})),{dispose:()=>{pe!==null&&(pe!==void 0?d.delete(pe):u=void 0)}}},hasPendingResponse:()=>v.size>0,trace:async(M,ee,pe)=>{let be=!1,ct=Vl.Text;pe!==void 0&&(Mi.boolean(pe)?be=pe:(be=pe.sendNotification||!1,ct=pe.traceFormat||Vl.Text)),S=M,b=ct,S===mn.Off?w=void 0:w=ee,be&&!oe()&&!ne()&&await Wt.sendNotification(oce.type,{value:mn.toString(M)})},onError:A.event,onClose:O.event,onUnhandledNotification:L.event,onDispose:$.event,end:()=>{e.end()},dispose:()=>{if(ne())return;P=Yd.Disposed,$.fire(void 0);let M=new Ft.ResponseError(Ft.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let ee of v.values())ee.reject(M);v=new Map,y=new Map,E=new Set,g=new AYe.LinkedMap,Mi.func(e.dispose)&&e.dispose(),Mi.func(t.dispose)&&t.dispose()},listen:()=>{xt(),Ut(),P=Yd.Listening,t.listen(St)},inspect:()=>{(0,CYe.default)().console.log("inspect")}};return Wt.onNotification(aF.type,M=>{if(S===mn.Off||!w)return;let ee=S===mn.Verbose||S===mn.Compact;w.log(M.message,ee?M.verbose:void 0)}),Wt.onNotification(dN.type,M=>{let ee=h.get(M.token);ee?ee(M.value):j.fire(M)}),Wt}sr.createMessageConnection=zcr});var pF=m(ue=>{"use strict";Object.defineProperty(ue,"__esModule",{value:!0});ue.ProgressType=ue.ProgressToken=ue.createMessageConnection=ue.NullLogger=ue.ConnectionOptions=ue.ConnectionStrategy=ue.AbstractMessageBuffer=ue.WriteableStreamMessageWriter=ue.AbstractMessageWriter=ue.MessageWriter=ue.ReadableStreamMessageReader=ue.AbstractMessageReader=ue.MessageReader=ue.SharedArrayReceiverStrategy=ue.SharedArraySenderStrategy=ue.CancellationToken=ue.CancellationTokenSource=ue.Emitter=ue.Event=ue.Disposable=ue.LRUCache=ue.Touch=ue.LinkedMap=ue.ParameterStructures=ue.NotificationType9=ue.NotificationType8=ue.NotificationType7=ue.NotificationType6=ue.NotificationType5=ue.NotificationType4=ue.NotificationType3=ue.NotificationType2=ue.NotificationType1=ue.NotificationType0=ue.NotificationType=ue.ErrorCodes=ue.ResponseError=ue.RequestType9=ue.RequestType8=ue.RequestType7=ue.RequestType6=ue.RequestType5=ue.RequestType4=ue.RequestType3=ue.RequestType2=ue.RequestType1=ue.RequestType0=ue.RequestType=ue.Message=ue.RAL=void 0;ue.MessageStrategy=ue.CancellationStrategy=ue.CancellationSenderStrategy=ue.CancellationReceiverStrategy=ue.ConnectionError=ue.ConnectionErrors=ue.LogTraceNotification=ue.SetTraceNotification=ue.TraceFormat=ue.TraceValues=ue.Trace=void 0;var Yn=Nae();Object.defineProperty(ue,"Message",{enumerable:!0,get:function(){return Yn.Message}});Object.defineProperty(ue,"RequestType",{enumerable:!0,get:function(){return Yn.RequestType}});Object.defineProperty(ue,"RequestType0",{enumerable:!0,get:function(){return Yn.RequestType0}});Object.defineProperty(ue,"RequestType1",{enumerable:!0,get:function(){return Yn.RequestType1}});Object.defineProperty(ue,"RequestType2",{enumerable:!0,get:function(){return Yn.RequestType2}});Object.defineProperty(ue,"RequestType3",{enumerable:!0,get:function(){return Yn.RequestType3}});Object.defineProperty(ue,"RequestType4",{enumerable:!0,get:function(){return Yn.RequestType4}});Object.defineProperty(ue,"RequestType5",{enumerable:!0,get:function(){return Yn.RequestType5}});Object.defineProperty(ue,"RequestType6",{enumerable:!0,get:function(){return Yn.RequestType6}});Object.defineProperty(ue,"RequestType7",{enumerable:!0,get:function(){return Yn.RequestType7}});Object.defineProperty(ue,"RequestType8",{enumerable:!0,get:function(){return Yn.RequestType8}});Object.defineProperty(ue,"RequestType9",{enumerable:!0,get:function(){return Yn.RequestType9}});Object.defineProperty(ue,"ResponseError",{enumerable:!0,get:function(){return Yn.ResponseError}});Object.defineProperty(ue,"ErrorCodes",{enumerable:!0,get:function(){return Yn.ErrorCodes}});Object.defineProperty(ue,"NotificationType",{enumerable:!0,get:function(){return Yn.NotificationType}});Object.defineProperty(ue,"NotificationType0",{enumerable:!0,get:function(){return Yn.NotificationType0}});Object.defineProperty(ue,"NotificationType1",{enumerable:!0,get:function(){return Yn.NotificationType1}});Object.defineProperty(ue,"NotificationType2",{enumerable:!0,get:function(){return Yn.NotificationType2}});Object.defineProperty(ue,"NotificationType3",{enumerable:!0,get:function(){return Yn.NotificationType3}});Object.defineProperty(ue,"NotificationType4",{enumerable:!0,get:function(){return Yn.NotificationType4}});Object.defineProperty(ue,"NotificationType5",{enumerable:!0,get:function(){return Yn.NotificationType5}});Object.defineProperty(ue,"NotificationType6",{enumerable:!0,get:function(){return Yn.NotificationType6}});Object.defineProperty(ue,"NotificationType7",{enumerable:!0,get:function(){return Yn.NotificationType7}});Object.defineProperty(ue,"NotificationType8",{enumerable:!0,get:function(){return Yn.NotificationType8}});Object.defineProperty(ue,"NotificationType9",{enumerable:!0,get:function(){return Yn.NotificationType9}});Object.defineProperty(ue,"ParameterStructures",{enumerable:!0,get:function(){return Yn.ParameterStructures}});var cce=kae();Object.defineProperty(ue,"LinkedMap",{enumerable:!0,get:function(){return cce.LinkedMap}});Object.defineProperty(ue,"LRUCache",{enumerable:!0,get:function(){return cce.LRUCache}});Object.defineProperty(ue,"Touch",{enumerable:!0,get:function(){return cce.Touch}});var Wcr=pYe();Object.defineProperty(ue,"Disposable",{enumerable:!0,get:function(){return Wcr.Disposable}});var PYe=Cw();Object.defineProperty(ue,"Event",{enumerable:!0,get:function(){return PYe.Event}});Object.defineProperty(ue,"Emitter",{enumerable:!0,get:function(){return PYe.Emitter}});var RYe=rF();Object.defineProperty(ue,"CancellationTokenSource",{enumerable:!0,get:function(){return RYe.CancellationTokenSource}});Object.defineProperty(ue,"CancellationToken",{enumerable:!0,get:function(){return RYe.CancellationToken}});var OYe=mYe();Object.defineProperty(ue,"SharedArraySenderStrategy",{enumerable:!0,get:function(){return OYe.SharedArraySenderStrategy}});Object.defineProperty(ue,"SharedArrayReceiverStrategy",{enumerable:!0,get:function(){return OYe.SharedArrayReceiverStrategy}});var lce=_Ye();Object.defineProperty(ue,"MessageReader",{enumerable:!0,get:function(){return lce.MessageReader}});Object.defineProperty(ue,"AbstractMessageReader",{enumerable:!0,get:function(){return lce.AbstractMessageReader}});Object.defineProperty(ue,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return lce.ReadableStreamMessageReader}});var uce=SYe();Object.defineProperty(ue,"MessageWriter",{enumerable:!0,get:function(){return uce.MessageWriter}});Object.defineProperty(ue,"AbstractMessageWriter",{enumerable:!0,get:function(){return uce.AbstractMessageWriter}});Object.defineProperty(ue,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return uce.WriteableStreamMessageWriter}});var Kcr=bYe();Object.defineProperty(ue,"AbstractMessageBuffer",{enumerable:!0,get:function(){return Kcr.AbstractMessageBuffer}});var Is=IYe();Object.defineProperty(ue,"ConnectionStrategy",{enumerable:!0,get:function(){return Is.ConnectionStrategy}});Object.defineProperty(ue,"ConnectionOptions",{enumerable:!0,get:function(){return Is.ConnectionOptions}});Object.defineProperty(ue,"NullLogger",{enumerable:!0,get:function(){return Is.NullLogger}});Object.defineProperty(ue,"createMessageConnection",{enumerable:!0,get:function(){return Is.createMessageConnection}});Object.defineProperty(ue,"ProgressToken",{enumerable:!0,get:function(){return Is.ProgressToken}});Object.defineProperty(ue,"ProgressType",{enumerable:!0,get:function(){return Is.ProgressType}});Object.defineProperty(ue,"Trace",{enumerable:!0,get:function(){return Is.Trace}});Object.defineProperty(ue,"TraceValues",{enumerable:!0,get:function(){return Is.TraceValues}});Object.defineProperty(ue,"TraceFormat",{enumerable:!0,get:function(){return Is.TraceFormat}});Object.defineProperty(ue,"SetTraceNotification",{enumerable:!0,get:function(){return Is.SetTraceNotification}});Object.defineProperty(ue,"LogTraceNotification",{enumerable:!0,get:function(){return Is.LogTraceNotification}});Object.defineProperty(ue,"ConnectionErrors",{enumerable:!0,get:function(){return Is.ConnectionErrors}});Object.defineProperty(ue,"ConnectionError",{enumerable:!0,get:function(){return Is.ConnectionError}});Object.defineProperty(ue,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return Is.CancellationReceiverStrategy}});Object.defineProperty(ue,"CancellationSenderStrategy",{enumerable:!0,get:function(){return Is.CancellationSenderStrategy}});Object.defineProperty(ue,"CancellationStrategy",{enumerable:!0,get:function(){return Is.CancellationStrategy}});Object.defineProperty(ue,"MessageStrategy",{enumerable:!0,get:function(){return Is.MessageStrategy}});var Ycr=i1();ue.RAL=Ycr.default});var LYe=m(hce=>{"use strict";Object.defineProperty(hce,"__esModule",{value:!0});var MYe=require("util"),sm=pF(),hF=class t extends sm.AbstractMessageBuffer{constructor(e="utf-8"){super(e)}emptyBuffer(){return t.emptyBuffer}fromString(e,r){return Buffer.from(e,r)}toString(e,r){return e instanceof Buffer?e.toString(r):new MYe.TextDecoder(r).decode(e)}asNative(e,r){return r===void 0?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,r):Buffer.from(e,0,r)}allocNative(e){return Buffer.allocUnsafe(e)}};hF.emptyBuffer=Buffer.allocUnsafe(0);var dce=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),sm.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),sm.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),sm.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),sm.Disposable.create(()=>this.stream.off("data",e))}},fce=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),sm.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),sm.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),sm.Disposable.create(()=>this.stream.off("end",e))}write(e,r){return new Promise((n,o)=>{let s=a=>{a==null?n():o(a)};typeof e=="string"?this.stream.write(e,r,s):this.stream.write(e,s)})}end(){this.stream.end()}},NYe=Object.freeze({messageBuffer:Object.freeze({create:t=>new hF(t)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(t,e)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(t,void 0,0),e.charset))}catch(r){return Promise.reject(r)}}}),decoder:Object.freeze({name:"application/json",decode:(t,e)=>{try{return t instanceof Buffer?Promise.resolve(JSON.parse(t.toString(e.charset))):Promise.resolve(JSON.parse(new MYe.TextDecoder(e.charset).decode(t)))}catch(r){return Promise.reject(r)}}})}),stream:Object.freeze({asReadableStream:t=>new dce(t),asWritableStream:t=>new fce(t)}),console,timer:Object.freeze({setTimeout(t,e,...r){let n=setTimeout(t,e,...r);return{dispose:()=>clearTimeout(n)}},setImmediate(t,...e){let r=setImmediate(t,...e);return{dispose:()=>clearImmediate(r)}},setInterval(t,e,...r){let n=setInterval(t,e,...r);return{dispose:()=>clearInterval(n)}}})});function pce(){return NYe}(function(t){function e(){sm.RAL.install(NYe)}t.install=e})(pce||(pce={}));hce.default=pce});var dT=m(Yr=>{"use strict";var Qcr=Yr&&Yr.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),Zcr=Yr&&Yr.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Qcr(e,t,r)};Object.defineProperty(Yr,"__esModule",{value:!0});Yr.createMessageConnection=Yr.createServerSocketTransport=Yr.createClientSocketTransport=Yr.createServerPipeTransport=Yr.createClientPipeTransport=Yr.generateRandomPipeName=Yr.StreamMessageWriter=Yr.StreamMessageReader=Yr.SocketMessageWriter=Yr.SocketMessageReader=Yr.PortMessageWriter=Yr.PortMessageReader=Yr.IPCMessageWriter=Yr.IPCMessageReader=void 0;var Pw=LYe();Pw.default.install();var kYe=require("path"),Jcr=require("os"),Xcr=require("crypto"),_F=require("net"),Hl=pF();Zcr(pF(),Yr);var mce=class extends Hl.AbstractMessageReader{constructor(e){super(),this.process=e;let r=this.process;r.on("error",n=>this.fireError(n)),r.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),Hl.Disposable.create(()=>this.process.off("message",e))}};Yr.IPCMessageReader=mce;var gce=class extends Hl.AbstractMessageWriter{constructor(e){super(),this.process=e,this.errorCount=0;let r=this.process;r.on("error",n=>this.fireError(n)),r.on("close",()=>this.fireClose)}write(e){try{return typeof this.process.send=="function"&&this.process.send(e,void 0,void 0,r=>{r?(this.errorCount++,this.handleError(r,e)):this.errorCount=0}),Promise.resolve()}catch(r){return this.handleError(r,e),Promise.reject(r)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}end(){}};Yr.IPCMessageWriter=gce;var _ce=class extends Hl.AbstractMessageReader{constructor(e){super(),this.onData=new Hl.Emitter,e.on("close",()=>this.fireClose),e.on("error",r=>this.fireError(r)),e.on("message",r=>{this.onData.fire(r)})}listen(e){return this.onData.event(e)}};Yr.PortMessageReader=_ce;var vce=class extends Hl.AbstractMessageWriter{constructor(e){super(),this.port=e,this.errorCount=0,e.on("close",()=>this.fireClose()),e.on("error",r=>this.fireError(r))}write(e){try{return this.port.postMessage(e),Promise.resolve()}catch(r){return this.handleError(r,e),Promise.reject(r)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}end(){}};Yr.PortMessageWriter=vce;var lT=class extends Hl.ReadableStreamMessageReader{constructor(e,r="utf-8"){super((0,Pw.default)().stream.asReadableStream(e),r)}};Yr.SocketMessageReader=lT;var uT=class extends Hl.WriteableStreamMessageWriter{constructor(e,r){super((0,Pw.default)().stream.asWritableStream(e),r),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};Yr.SocketMessageWriter=uT;var mF=class extends Hl.ReadableStreamMessageReader{constructor(e,r){super((0,Pw.default)().stream.asReadableStream(e),r)}};Yr.StreamMessageReader=mF;var gF=class extends Hl.WriteableStreamMessageWriter{constructor(e,r){super((0,Pw.default)().stream.asWritableStream(e),r)}};Yr.StreamMessageWriter=gF;var DYe=process.env.XDG_RUNTIME_DIR,elr=new Map([["linux",107],["darwin",103]]);function tlr(){let t=(0,Xcr.randomBytes)(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${t}-sock`;let e;DYe?e=kYe.join(DYe,`vscode-ipc-${t}.sock`):e=kYe.join(Jcr.tmpdir(),`vscode-${t}.sock`);let r=elr.get(process.platform);return r!==void 0&&e.length>r&&(0,Pw.default)().console.warn(`WARNING: IPC handle "${e}" is longer than ${r} characters.`),e}Yr.generateRandomPipeName=tlr;function rlr(t,e="utf-8"){let r,n=new Promise((o,s)=>{r=o});return new Promise((o,s)=>{let a=(0,_F.createServer)(c=>{a.close(),r([new lT(c,e),new uT(c,e)])});a.on("error",s),a.listen(t,()=>{a.removeListener("error",s),o({onConnected:()=>n})})})}Yr.createClientPipeTransport=rlr;function nlr(t,e="utf-8"){let r=(0,_F.createConnection)(t);return[new lT(r,e),new uT(r,e)]}Yr.createServerPipeTransport=nlr;function ilr(t,e="utf-8"){let r,n=new Promise((o,s)=>{r=o});return new Promise((o,s)=>{let a=(0,_F.createServer)(c=>{a.close(),r([new lT(c,e),new uT(c,e)])});a.on("error",s),a.listen(t,"127.0.0.1",()=>{a.removeListener("error",s),o({onConnected:()=>n})})})}Yr.createClientSocketTransport=ilr;function olr(t,e="utf-8"){let r=(0,_F.createConnection)(t,"127.0.0.1");return[new lT(r,e),new uT(r,e)]}Yr.createServerSocketTransport=olr;function slr(t){let e=t;return e.read!==void 0&&e.addListener!==void 0}function alr(t){let e=t;return e.write!==void 0&&e.addListener!==void 0}function clr(t,e,r,n){r||(r=Hl.NullLogger);let o=slr(t)?new mF(t):t,s=alr(e)?new gF(e):e;return Hl.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),(0,Hl.createMessageConnection)(o,s,r,n)}Yr.createMessageConnection=clr});var yce=m((rLn,UYe)=>{"use strict";UYe.exports=dT()});var hN=m((qYe,vF)=>{(function(t){if(typeof vF=="object"&&typeof vF.exports=="object"){var e=t(require,qYe);e!==void 0&&(vF.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],t)})(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextDocument=e.EOL=e.WorkspaceFolder=e.InlineCompletionContext=e.SelectedCompletionInfo=e.InlineCompletionTriggerKind=e.InlineCompletionList=e.InlineCompletionItem=e.StringValue=e.InlayHint=e.InlayHintLabelPart=e.InlayHintKind=e.InlineValueContext=e.InlineValueEvaluatableExpression=e.InlineValueVariableLookup=e.InlineValueText=e.SemanticTokens=e.SemanticTokenModifiers=e.SemanticTokenTypes=e.SelectionRange=e.DocumentLink=e.FormattingOptions=e.CodeLens=e.CodeAction=e.CodeActionContext=e.CodeActionTriggerKind=e.CodeActionKind=e.DocumentSymbol=e.WorkspaceSymbol=e.SymbolInformation=e.SymbolTag=e.SymbolKind=e.DocumentHighlight=e.DocumentHighlightKind=e.SignatureInformation=e.ParameterInformation=e.Hover=e.MarkedString=e.CompletionList=e.CompletionItem=e.CompletionItemLabelDetails=e.InsertTextMode=e.InsertReplaceEdit=e.CompletionItemTag=e.InsertTextFormat=e.CompletionItemKind=e.MarkupContent=e.MarkupKind=e.TextDocumentItem=e.OptionalVersionedTextDocumentIdentifier=e.VersionedTextDocumentIdentifier=e.TextDocumentIdentifier=e.WorkspaceChange=e.WorkspaceEdit=e.DeleteFile=e.RenameFile=e.CreateFile=e.TextDocumentEdit=e.AnnotatedTextEdit=e.ChangeAnnotationIdentifier=e.ChangeAnnotation=e.TextEdit=e.Command=e.Diagnostic=e.CodeDescription=e.DiagnosticTag=e.DiagnosticSeverity=e.DiagnosticRelatedInformation=e.FoldingRange=e.FoldingRangeKind=e.ColorPresentation=e.ColorInformation=e.Color=e.LocationLink=e.Location=e.Range=e.Position=e.uinteger=e.integer=e.URI=e.DocumentUri=void 0;var r;(function(I){function U(F){return typeof F=="string"}I.is=U})(r||(e.DocumentUri=r={}));var n;(function(I){function U(F){return typeof F=="string"}I.is=U})(n||(e.URI=n={}));var o;(function(I){I.MIN_VALUE=-2147483648,I.MAX_VALUE=2147483647;function U(F){return typeof F=="number"&&I.MIN_VALUE<=F&&F<=I.MAX_VALUE}I.is=U})(o||(e.integer=o={}));var s;(function(I){I.MIN_VALUE=0,I.MAX_VALUE=2147483647;function U(F){return typeof F=="number"&&I.MIN_VALUE<=F&&F<=I.MAX_VALUE}I.is=U})(s||(e.uinteger=s={}));var a;(function(I){function U(R,x){return R===Number.MAX_VALUE&&(R=s.MAX_VALUE),x===Number.MAX_VALUE&&(x=s.MAX_VALUE),{line:R,character:x}}I.create=U;function F(R){var x=R;return W.objectLiteral(x)&&W.uinteger(x.line)&&W.uinteger(x.character)}I.is=F})(a||(e.Position=a={}));var c;(function(I){function U(R,x,z,te){if(W.uinteger(R)&&W.uinteger(x)&&W.uinteger(z)&&W.uinteger(te))return{start:a.create(R,x),end:a.create(z,te)};if(a.is(R)&&a.is(x))return{start:R,end:x};throw new Error("Range#create called with invalid arguments[".concat(R,", ").concat(x,", ").concat(z,", ").concat(te,"]"))}I.create=U;function F(R){var x=R;return W.objectLiteral(x)&&a.is(x.start)&&a.is(x.end)}I.is=F})(c||(e.Range=c={}));var l;(function(I){function U(R,x){return{uri:R,range:x}}I.create=U;function F(R){var x=R;return W.objectLiteral(x)&&c.is(x.range)&&(W.string(x.uri)||W.undefined(x.uri))}I.is=F})(l||(e.Location=l={}));var u;(function(I){function U(R,x,z,te){return{targetUri:R,targetRange:x,targetSelectionRange:z,originSelectionRange:te}}I.create=U;function F(R){var x=R;return W.objectLiteral(x)&&c.is(x.targetRange)&&W.string(x.targetUri)&&c.is(x.targetSelectionRange)&&(c.is(x.originSelectionRange)||W.undefined(x.originSelectionRange))}I.is=F})(u||(e.LocationLink=u={}));var d;(function(I){function U(R,x,z,te){return{red:R,green:x,blue:z,alpha:te}}I.create=U;function F(R){var x=R;return W.objectLiteral(x)&&W.numberRange(x.red,0,1)&&W.numberRange(x.green,0,1)&&W.numberRange(x.blue,0,1)&&W.numberRange(x.alpha,0,1)}I.is=F})(d||(e.Color=d={}));var f;(function(I){function U(R,x){return{range:R,color:x}}I.create=U;function F(R){var x=R;return W.objectLiteral(x)&&c.is(x.range)&&d.is(x.color)}I.is=F})(f||(e.ColorInformation=f={}));var p;(function(I){function U(R,x,z){return{label:R,textEdit:x,additionalTextEdits:z}}I.create=U;function F(R){var x=R;return W.objectLiteral(x)&&W.string(x.label)&&(W.undefined(x.textEdit)||w.is(x))&&(W.undefined(x.additionalTextEdits)||W.typedArray(x.additionalTextEdits,w.is))}I.is=F})(p||(e.ColorPresentation=p={}));var h;(function(I){I.Comment="comment",I.Imports="imports",I.Region="region"})(h||(e.FoldingRangeKind=h={}));var _;(function(I){function U(R,x,z,te,$e,It){var pt={startLine:R,endLine:x};return W.defined(z)&&(pt.startCharacter=z),W.defined(te)&&(pt.endCharacter=te),W.defined($e)&&(pt.kind=$e),W.defined(It)&&(pt.collapsedText=It),pt}I.create=U;function F(R){var x=R;return W.objectLiteral(x)&&W.uinteger(x.startLine)&&W.uinteger(x.startLine)&&(W.undefined(x.startCharacter)||W.uinteger(x.startCharacter))&&(W.undefined(x.endCharacter)||W.uinteger(x.endCharacter))&&(W.undefined(x.kind)||W.string(x.kind))}I.is=F})(_||(e.FoldingRange=_={}));var g;(function(I){function U(R,x){return{location:R,message:x}}I.create=U;function F(R){var x=R;return W.defined(x)&&l.is(x.location)&&W.string(x.message)}I.is=F})(g||(e.DiagnosticRelatedInformation=g={}));var v;(function(I){I.Error=1,I.Warning=2,I.Information=3,I.Hint=4})(v||(e.DiagnosticSeverity=v={}));var E;(function(I){I.Unnecessary=1,I.Deprecated=2})(E||(e.DiagnosticTag=E={}));var y;(function(I){function U(F){var R=F;return W.objectLiteral(R)&&W.string(R.href)}I.is=U})(y||(e.CodeDescription=y={}));var S;(function(I){function U(R,x,z,te,$e,It){var pt={range:R,message:x};return W.defined(z)&&(pt.severity=z),W.defined(te)&&(pt.code=te),W.defined($e)&&(pt.source=$e),W.defined(It)&&(pt.relatedInformation=It),pt}I.create=U;function F(R){var x,z=R;return W.defined(z)&&c.is(z.range)&&W.string(z.message)&&(W.number(z.severity)||W.undefined(z.severity))&&(W.integer(z.code)||W.string(z.code)||W.undefined(z.code))&&(W.undefined(z.codeDescription)||W.string((x=z.codeDescription)===null||x===void 0?void 0:x.href))&&(W.string(z.source)||W.undefined(z.source))&&(W.undefined(z.relatedInformation)||W.typedArray(z.relatedInformation,g.is))}I.is=F})(S||(e.Diagnostic=S={}));var b;(function(I){function U(R,x){for(var z=[],te=2;te<arguments.length;te++)z[te-2]=arguments[te];var $e={title:R,command:x};return W.defined(z)&&z.length>0&&($e.arguments=z),$e}I.create=U;function F(R){var x=R;return W.defined(x)&&W.string(x.title)&&W.string(x.command)}I.is=F})(b||(e.Command=b={}));var w;(function(I){function U(z,te){return{range:z,newText:te}}I.replace=U;function F(z,te){return{range:{start:z,end:z},newText:te}}I.insert=F;function R(z){return{range:z,newText:""}}I.del=R;function x(z){var te=z;return W.objectLiteral(te)&&W.string(te.newText)&&c.is(te.range)}I.is=x})(w||(e.TextEdit=w={}));var P;(function(I){function U(R,x,z){var te={label:R};return x!==void 0&&(te.needsConfirmation=x),z!==void 0&&(te.description=z),te}I.create=U;function F(R){var x=R;return W.objectLiteral(x)&&W.string(x.label)&&(W.boolean(x.needsConfirmation)||x.needsConfirmation===void 0)&&(W.string(x.description)||x.description===void 0)}I.is=F})(P||(e.ChangeAnnotation=P={}));var A;(function(I){function U(F){var R=F;return W.string(R)}I.is=U})(A||(e.ChangeAnnotationIdentifier=A={}));var O;(function(I){function U(z,te,$e){return{range:z,newText:te,annotationId:$e}}I.replace=U;function F(z,te,$e){return{range:{start:z,end:z},newText:te,annotationId:$e}}I.insert=F;function R(z,te){return{range:z,newText:"",annotationId:te}}I.del=R;function x(z){var te=z;return w.is(te)&&(P.is(te.annotationId)||A.is(te.annotationId))}I.is=x})(O||(e.AnnotatedTextEdit=O={}));var L;(function(I){function U(R,x){return{textDocument:R,edits:x}}I.create=U;function F(R){var x=R;return W.defined(x)&&oe.is(x.textDocument)&&Array.isArray(x.edits)}I.is=F})(L||(e.TextDocumentEdit=L={}));var j;(function(I){function U(R,x,z){var te={kind:"create",uri:R};return x!==void 0&&(x.overwrite!==void 0||x.ignoreIfExists!==void 0)&&(te.options=x),z!==void 0&&(te.annotationId=z),te}I.create=U;function F(R){var x=R;return x&&x.kind==="create"&&W.string(x.uri)&&(x.options===void 0||(x.options.overwrite===void 0||W.boolean(x.options.overwrite))&&(x.options.ignoreIfExists===void 0||W.boolean(x.options.ignoreIfExists)))&&(x.annotationId===void 0||A.is(x.annotationId))}I.is=F})(j||(e.CreateFile=j={}));var $;(function(I){function U(R,x,z,te){var $e={kind:"rename",oldUri:R,newUri:x};return z!==void 0&&(z.overwrite!==void 0||z.ignoreIfExists!==void 0)&&($e.options=z),te!==void 0&&($e.annotationId=te),$e}I.create=U;function F(R){var x=R;return x&&x.kind==="rename"&&W.string(x.oldUri)&&W.string(x.newUri)&&(x.options===void 0||(x.options.overwrite===void 0||W.boolean(x.options.overwrite))&&(x.options.ignoreIfExists===void 0||W.boolean(x.options.ignoreIfExists)))&&(x.annotationId===void 0||A.is(x.annotationId))}I.is=F})($||(e.RenameFile=$={}));var Q;(function(I){function U(R,x,z){var te={kind:"delete",uri:R};return x!==void 0&&(x.recursive!==void 0||x.ignoreIfNotExists!==void 0)&&(te.options=x),z!==void 0&&(te.annotationId=z),te}I.create=U;function F(R){var x=R;return x&&x.kind==="delete"&&W.string(x.uri)&&(x.options===void 0||(x.options.recursive===void 0||W.boolean(x.options.recursive))&&(x.options.ignoreIfNotExists===void 0||W.boolean(x.options.ignoreIfNotExists)))&&(x.annotationId===void 0||A.is(x.annotationId))}I.is=F})(Q||(e.DeleteFile=Q={}));var K;(function(I){function U(F){var R=F;return R&&(R.changes!==void 0||R.documentChanges!==void 0)&&(R.documentChanges===void 0||R.documentChanges.every(function(x){return W.string(x.kind)?j.is(x)||$.is(x)||Q.is(x):L.is(x)}))}I.is=U})(K||(e.WorkspaceEdit=K={}));var N=(function(){function I(U,F){this.edits=U,this.changeAnnotations=F}return I.prototype.insert=function(U,F,R){var x,z;if(R===void 0?x=w.insert(U,F):A.is(R)?(z=R,x=O.insert(U,F,R)):(this.assertChangeAnnotations(this.changeAnnotations),z=this.changeAnnotations.manage(R),x=O.insert(U,F,z)),this.edits.push(x),z!==void 0)return z},I.prototype.replace=function(U,F,R){var x,z;if(R===void 0?x=w.replace(U,F):A.is(R)?(z=R,x=O.replace(U,F,R)):(this.assertChangeAnnotations(this.changeAnnotations),z=this.changeAnnotations.manage(R),x=O.replace(U,F,z)),this.edits.push(x),z!==void 0)return z},I.prototype.delete=function(U,F){var R,x;if(F===void 0?R=w.del(U):A.is(F)?(x=F,R=O.del(U,F)):(this.assertChangeAnnotations(this.changeAnnotations),x=this.changeAnnotations.manage(F),R=O.del(U,x)),this.edits.push(R),x!==void 0)return x},I.prototype.add=function(U){this.edits.push(U)},I.prototype.all=function(){return this.edits},I.prototype.clear=function(){this.edits.splice(0,this.edits.length)},I.prototype.assertChangeAnnotations=function(U){if(U===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},I})(),G=(function(){function I(U){this._annotations=U===void 0?Object.create(null):U,this._counter=0,this._size=0}return I.prototype.all=function(){return this._annotations},Object.defineProperty(I.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),I.prototype.manage=function(U,F){var R;if(A.is(U)?R=U:(R=this.nextId(),F=U),this._annotations[R]!==void 0)throw new Error("Id ".concat(R," is already in use."));if(F===void 0)throw new Error("No annotation provided for id ".concat(R));return this._annotations[R]=F,this._size++,R},I.prototype.nextId=function(){return this._counter++,this._counter.toString()},I})(),Y=(function(){function I(U){var F=this;this._textEditChanges=Object.create(null),U!==void 0?(this._workspaceEdit=U,U.documentChanges?(this._changeAnnotations=new G(U.changeAnnotations),U.changeAnnotations=this._changeAnnotations.all(),U.documentChanges.forEach(function(R){if(L.is(R)){var x=new N(R.edits,F._changeAnnotations);F._textEditChanges[R.textDocument.uri]=x}})):U.changes&&Object.keys(U.changes).forEach(function(R){var x=new N(U.changes[R]);F._textEditChanges[R]=x})):this._workspaceEdit={}}return Object.defineProperty(I.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),I.prototype.getTextEditChange=function(U){if(oe.is(U)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var F={uri:U.uri,version:U.version},R=this._textEditChanges[F.uri];if(!R){var x=[],z={textDocument:F,edits:x};this._workspaceEdit.documentChanges.push(z),R=new N(x,this._changeAnnotations),this._textEditChanges[F.uri]=R}return R}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var R=this._textEditChanges[U];if(!R){var x=[];this._workspaceEdit.changes[U]=x,R=new N(x),this._textEditChanges[U]=R}return R}},I.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new G,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},I.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},I.prototype.createFile=function(U,F,R){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var x;P.is(F)||A.is(F)?x=F:R=F;var z,te;if(x===void 0?z=j.create(U,R):(te=A.is(x)?x:this._changeAnnotations.manage(x),z=j.create(U,R,te)),this._workspaceEdit.documentChanges.push(z),te!==void 0)return te},I.prototype.renameFile=function(U,F,R,x){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var z;P.is(R)||A.is(R)?z=R:x=R;var te,$e;if(z===void 0?te=$.create(U,F,x):($e=A.is(z)?z:this._changeAnnotations.manage(z),te=$.create(U,F,x,$e)),this._workspaceEdit.documentChanges.push(te),$e!==void 0)return $e},I.prototype.deleteFile=function(U,F,R){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var x;P.is(F)||A.is(F)?x=F:R=F;var z,te;if(x===void 0?z=Q.create(U,R):(te=A.is(x)?x:this._changeAnnotations.manage(x),z=Q.create(U,R,te)),this._workspaceEdit.documentChanges.push(z),te!==void 0)return te},I})();e.WorkspaceChange=Y;var J;(function(I){function U(R){return{uri:R}}I.create=U;function F(R){var x=R;return W.defined(x)&&W.string(x.uri)}I.is=F})(J||(e.TextDocumentIdentifier=J={}));var ie;(function(I){function U(R,x){return{uri:R,version:x}}I.create=U;function F(R){var x=R;return W.defined(x)&&W.string(x.uri)&&W.integer(x.version)}I.is=F})(ie||(e.VersionedTextDocumentIdentifier=ie={}));var oe;(function(I){function U(R,x){return{uri:R,version:x}}I.create=U;function F(R){var x=R;return W.defined(x)&&W.string(x.uri)&&(x.version===null||W.integer(x.version))}I.is=F})(oe||(e.OptionalVersionedTextDocumentIdentifier=oe={}));var ne;(function(I){function U(R,x,z,te){return{uri:R,languageId:x,version:z,text:te}}I.create=U;function F(R){var x=R;return W.defined(x)&&W.string(x.uri)&&W.string(x.languageId)&&W.integer(x.version)&&W.string(x.text)}I.is=F})(ne||(e.TextDocumentItem=ne={}));var de;(function(I){I.PlainText="plaintext",I.Markdown="markdown";function U(F){var R=F;return R===I.PlainText||R===I.Markdown}I.is=U})(de||(e.MarkupKind=de={}));var Ee;(function(I){function U(F){var R=F;return W.objectLiteral(F)&&de.is(R.kind)&&W.string(R.value)}I.is=U})(Ee||(e.MarkupContent=Ee={}));var Me;(function(I){I.Text=1,I.Method=2,I.Function=3,I.Constructor=4,I.Field=5,I.Variable=6,I.Class=7,I.Interface=8,I.Module=9,I.Property=10,I.Unit=11,I.Value=12,I.Enum=13,I.Keyword=14,I.Snippet=15,I.Color=16,I.File=17,I.Reference=18,I.Folder=19,I.EnumMember=20,I.Constant=21,I.Struct=22,I.Event=23,I.Operator=24,I.TypeParameter=25})(Me||(e.CompletionItemKind=Me={}));var He;(function(I){I.PlainText=1,I.Snippet=2})(He||(e.InsertTextFormat=He={}));var Je;(function(I){I.Deprecated=1})(Je||(e.CompletionItemTag=Je={}));var lt;(function(I){function U(R,x,z){return{newText:R,insert:x,replace:z}}I.create=U;function F(R){var x=R;return x&&W.string(x.newText)&&c.is(x.insert)&&c.is(x.replace)}I.is=F})(lt||(e.InsertReplaceEdit=lt={}));var St;(function(I){I.asIs=1,I.adjustIndentation=2})(St||(e.InsertTextMode=St={}));var Dt;(function(I){function U(F){var R=F;return R&&(W.string(R.detail)||R.detail===void 0)&&(W.string(R.description)||R.description===void 0)}I.is=U})(Dt||(e.CompletionItemLabelDetails=Dt={}));var qt;(function(I){function U(F){return{label:F}}I.create=U})(qt||(e.CompletionItem=qt={}));var Nt;(function(I){function U(F,R){return{items:F||[],isIncomplete:!!R}}I.create=U})(Nt||(e.CompletionList=Nt={}));var D;(function(I){function U(R){return R.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}I.fromPlainText=U;function F(R){var x=R;return W.string(x)||W.objectLiteral(x)&&W.string(x.language)&&W.string(x.value)}I.is=F})(D||(e.MarkedString=D={}));var fe;(function(I){function U(F){var R=F;return!!R&&W.objectLiteral(R)&&(Ee.is(R.contents)||D.is(R.contents)||W.typedArray(R.contents,D.is))&&(F.range===void 0||c.is(F.range))}I.is=U})(fe||(e.Hover=fe={}));var B;(function(I){function U(F,R){return R?{label:F,documentation:R}:{label:F}}I.create=U})(B||(e.ParameterInformation=B={}));var Oe;(function(I){function U(F,R){for(var x=[],z=2;z<arguments.length;z++)x[z-2]=arguments[z];var te={label:F};return W.defined(R)&&(te.documentation=R),W.defined(x)?te.parameters=x:te.parameters=[],te}I.create=U})(Oe||(e.SignatureInformation=Oe={}));var me;(function(I){I.Text=1,I.Read=2,I.Write=3})(me||(e.DocumentHighlightKind=me={}));var ye;(function(I){function U(F,R){var x={range:F};return W.number(R)&&(x.kind=R),x}I.create=U})(ye||(e.DocumentHighlight=ye={}));var et;(function(I){I.File=1,I.Module=2,I.Namespace=3,I.Package=4,I.Class=5,I.Method=6,I.Property=7,I.Field=8,I.Constructor=9,I.Enum=10,I.Interface=11,I.Function=12,I.Variable=13,I.Constant=14,I.String=15,I.Number=16,I.Boolean=17,I.Array=18,I.Object=19,I.Key=20,I.Null=21,I.EnumMember=22,I.Struct=23,I.Event=24,I.Operator=25,I.TypeParameter=26})(et||(e.SymbolKind=et={}));var Rt;(function(I){I.Deprecated=1})(Rt||(e.SymbolTag=Rt={}));var Ot;(function(I){function U(F,R,x,z,te){var $e={name:F,kind:R,location:{uri:z,range:x}};return te&&($e.containerName=te),$e}I.create=U})(Ot||(e.SymbolInformation=Ot={}));var xt;(function(I){function U(F,R,x,z){return z!==void 0?{name:F,kind:R,location:{uri:x,range:z}}:{name:F,kind:R,location:{uri:x}}}I.create=U})(xt||(e.WorkspaceSymbol=xt={}));var Ut;(function(I){function U(R,x,z,te,$e,It){var pt={name:R,detail:x,kind:z,range:te,selectionRange:$e};return It!==void 0&&(pt.children=It),pt}I.create=U;function F(R){var x=R;return x&&W.string(x.name)&&W.number(x.kind)&&c.is(x.range)&&c.is(x.selectionRange)&&(x.detail===void 0||W.string(x.detail))&&(x.deprecated===void 0||W.boolean(x.deprecated))&&(x.children===void 0||Array.isArray(x.children))&&(x.tags===void 0||Array.isArray(x.tags))}I.is=F})(Ut||(e.DocumentSymbol=Ut={}));var Jt;(function(I){I.Empty="",I.QuickFix="quickfix",I.Refactor="refactor",I.RefactorExtract="refactor.extract",I.RefactorInline="refactor.inline",I.RefactorRewrite="refactor.rewrite",I.Source="source",I.SourceOrganizeImports="source.organizeImports",I.SourceFixAll="source.fixAll"})(Jt||(e.CodeActionKind=Jt={}));var $t;(function(I){I.Invoked=1,I.Automatic=2})($t||(e.CodeActionTriggerKind=$t={}));var ar;(function(I){function U(R,x,z){var te={diagnostics:R};return x!=null&&(te.only=x),z!=null&&(te.triggerKind=z),te}I.create=U;function F(R){var x=R;return W.defined(x)&&W.typedArray(x.diagnostics,S.is)&&(x.only===void 0||W.typedArray(x.only,W.string))&&(x.triggerKind===void 0||x.triggerKind===$t.Invoked||x.triggerKind===$t.Automatic)}I.is=F})(ar||(e.CodeActionContext=ar={}));var _r;(function(I){function U(R,x,z){var te={title:R},$e=!0;return typeof x=="string"?($e=!1,te.kind=x):b.is(x)?te.command=x:te.edit=x,$e&&z!==void 0&&(te.kind=z),te}I.create=U;function F(R){var x=R;return x&&W.string(x.title)&&(x.diagnostics===void 0||W.typedArray(x.diagnostics,S.is))&&(x.kind===void 0||W.string(x.kind))&&(x.edit!==void 0||x.command!==void 0)&&(x.command===void 0||b.is(x.command))&&(x.isPreferred===void 0||W.boolean(x.isPreferred))&&(x.edit===void 0||K.is(x.edit))}I.is=F})(_r||(e.CodeAction=_r={}));var ur;(function(I){function U(R,x){var z={range:R};return W.defined(x)&&(z.data=x),z}I.create=U;function F(R){var x=R;return W.defined(x)&&c.is(x.range)&&(W.undefined(x.command)||b.is(x.command))}I.is=F})(ur||(e.CodeLens=ur={}));var zt;(function(I){function U(R,x){return{tabSize:R,insertSpaces:x}}I.create=U;function F(R){var x=R;return W.defined(x)&&W.uinteger(x.tabSize)&&W.boolean(x.insertSpaces)}I.is=F})(zt||(e.FormattingOptions=zt={}));var Wt;(function(I){function U(R,x,z){return{range:R,target:x,data:z}}I.create=U;function F(R){var x=R;return W.defined(x)&&c.is(x.range)&&(W.undefined(x.target)||W.string(x.target))}I.is=F})(Wt||(e.DocumentLink=Wt={}));var M;(function(I){function U(R,x){return{range:R,parent:x}}I.create=U;function F(R){var x=R;return W.objectLiteral(x)&&c.is(x.range)&&(x.parent===void 0||I.is(x.parent))}I.is=F})(M||(e.SelectionRange=M={}));var ee;(function(I){I.namespace="namespace",I.type="type",I.class="class",I.enum="enum",I.interface="interface",I.struct="struct",I.typeParameter="typeParameter",I.parameter="parameter",I.variable="variable",I.property="property",I.enumMember="enumMember",I.event="event",I.function="function",I.method="method",I.macro="macro",I.keyword="keyword",I.modifier="modifier",I.comment="comment",I.string="string",I.number="number",I.regexp="regexp",I.operator="operator",I.decorator="decorator"})(ee||(e.SemanticTokenTypes=ee={}));var pe;(function(I){I.declaration="declaration",I.definition="definition",I.readonly="readonly",I.static="static",I.deprecated="deprecated",I.abstract="abstract",I.async="async",I.modification="modification",I.documentation="documentation",I.defaultLibrary="defaultLibrary"})(pe||(e.SemanticTokenModifiers=pe={}));var be;(function(I){function U(F){var R=F;return W.objectLiteral(R)&&(R.resultId===void 0||typeof R.resultId=="string")&&Array.isArray(R.data)&&(R.data.length===0||typeof R.data[0]=="number")}I.is=U})(be||(e.SemanticTokens=be={}));var ct;(function(I){function U(R,x){return{range:R,text:x}}I.create=U;function F(R){var x=R;return x!=null&&c.is(x.range)&&W.string(x.text)}I.is=F})(ct||(e.InlineValueText=ct={}));var ot;(function(I){function U(R,x,z){return{range:R,variableName:x,caseSensitiveLookup:z}}I.create=U;function F(R){var x=R;return x!=null&&c.is(x.range)&&W.boolean(x.caseSensitiveLookup)&&(W.string(x.variableName)||x.variableName===void 0)}I.is=F})(ot||(e.InlineValueVariableLookup=ot={}));var mt;(function(I){function U(R,x){return{range:R,expression:x}}I.create=U;function F(R){var x=R;return x!=null&&c.is(x.range)&&(W.string(x.expression)||x.expression===void 0)}I.is=F})(mt||(e.InlineValueEvaluatableExpression=mt={}));var vt;(function(I){function U(R,x){return{frameId:R,stoppedLocation:x}}I.create=U;function F(R){var x=R;return W.defined(x)&&c.is(R.stoppedLocation)}I.is=F})(vt||(e.InlineValueContext=vt={}));var Ye;(function(I){I.Type=1,I.Parameter=2;function U(F){return F===1||F===2}I.is=U})(Ye||(e.InlayHintKind=Ye={}));var ut;(function(I){function U(R){return{value:R}}I.create=U;function F(R){var x=R;return W.objectLiteral(x)&&(x.tooltip===void 0||W.string(x.tooltip)||Ee.is(x.tooltip))&&(x.location===void 0||l.is(x.location))&&(x.command===void 0||b.is(x.command))}I.is=F})(ut||(e.InlayHintLabelPart=ut={}));var st;(function(I){function U(R,x,z){var te={position:R,label:x};return z!==void 0&&(te.kind=z),te}I.create=U;function F(R){var x=R;return W.objectLiteral(x)&&a.is(x.position)&&(W.string(x.label)||W.typedArray(x.label,ut.is))&&(x.kind===void 0||Ye.is(x.kind))&&x.textEdits===void 0||W.typedArray(x.textEdits,w.is)&&(x.tooltip===void 0||W.string(x.tooltip)||Ee.is(x.tooltip))&&(x.paddingLeft===void 0||W.boolean(x.paddingLeft))&&(x.paddingRight===void 0||W.boolean(x.paddingRight))}I.is=F})(st||(e.InlayHint=st={}));var wt;(function(I){function U(F){return{kind:"snippet",value:F}}I.createSnippet=U})(wt||(e.StringValue=wt={}));var kt;(function(I){function U(F,R,x,z){return{insertText:F,filterText:R,range:x,command:z}}I.create=U})(kt||(e.InlineCompletionItem=kt={}));var Vt;(function(I){function U(F){return{items:F}}I.create=U})(Vt||(e.InlineCompletionList=Vt={}));var Pr;(function(I){I.Invoked=0,I.Automatic=1})(Pr||(e.InlineCompletionTriggerKind=Pr={}));var Br;(function(I){function U(F,R){return{range:F,text:R}}I.create=U})(Br||(e.SelectedCompletionInfo=Br={}));var $r;(function(I){function U(F,R){return{triggerKind:F,selectedCompletionInfo:R}}I.create=U})($r||(e.InlineCompletionContext=$r={}));var Vr;(function(I){function U(F){var R=F;return W.objectLiteral(R)&&n.is(R.uri)&&W.string(R.name)}I.is=U})(Vr||(e.WorkspaceFolder=Vr={})),e.EOL=[`
`,`\r
`,"\r"];var Hr;(function(I){function U(z,te,$e,It){return new en(z,te,$e,It)}I.create=U;function F(z){var te=z;return!!(W.defined(te)&&W.string(te.uri)&&(W.undefined(te.languageId)||W.string(te.languageId))&&W.uinteger(te.lineCount)&&W.func(te.getText)&&W.func(te.positionAt)&&W.func(te.offsetAt))}I.is=F;function R(z,te){for(var $e=z.getText(),It=x(te,function(br,Zy){var NRe=br.range.start.line-Zy.range.start.line;return NRe===0?br.range.start.character-Zy.range.start.character:NRe}),pt=$e.length,Xt=It.length-1;Xt>=0;Xt--){var er=It[Xt],cr=z.offsetAt(er.range.start),tt=z.offsetAt(er.range.end);if(tt<=pt)$e=$e.substring(0,cr)+er.newText+$e.substring(tt,$e.length);else throw new Error("Overlapping edit");pt=cr}return $e}I.applyEdits=R;function x(z,te){if(z.length<=1)return z;var $e=z.length/2|0,It=z.slice(0,$e),pt=z.slice($e);x(It,te),x(pt,te);for(var Xt=0,er=0,cr=0;Xt<It.length&&er<pt.length;){var tt=te(It[Xt],pt[er]);tt<=0?z[cr++]=It[Xt++]:z[cr++]=pt[er++]}for(;Xt<It.length;)z[cr++]=It[Xt++];for(;er<pt.length;)z[cr++]=pt[er++];return z}})(Hr||(e.TextDocument=Hr={}));var en=(function(){function I(U,F,R,x){this._uri=U,this._languageId=F,this._version=R,this._content=x,this._lineOffsets=void 0}return Object.defineProperty(I.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(I.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(I.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),I.prototype.getText=function(U){if(U){var F=this.offsetAt(U.start),R=this.offsetAt(U.end);return this._content.substring(F,R)}return this._content},I.prototype.update=function(U,F){this._content=U.text,this._version=F,this._lineOffsets=void 0},I.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var U=[],F=this._content,R=!0,x=0;x<F.length;x++){R&&(U.push(x),R=!1);var z=F.charAt(x);R=z==="\r"||z===`
`,z==="\r"&&x+1<F.length&&F.charAt(x+1)===`
`&&x++}R&&F.length>0&&U.push(F.length),this._lineOffsets=U}return this._lineOffsets},I.prototype.positionAt=function(U){U=Math.max(Math.min(U,this._content.length),0);var F=this.getLineOffsets(),R=0,x=F.length;if(x===0)return a.create(0,U);for(;R<x;){var z=Math.floor((R+x)/2);F[z]>U?x=z:R=z+1}var te=R-1;return a.create(te,U-F[te])},I.prototype.offsetAt=function(U){var F=this.getLineOffsets();if(U.line>=F.length)return this._content.length;if(U.line<0)return 0;var R=F[U.line],x=U.line+1<F.length?F[U.line+1]:this._content.length;return Math.max(Math.min(R+U.character,x),R)},Object.defineProperty(I.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),I})(),W;(function(I){var U=Object.prototype.toString;function F(tt){return typeof tt<"u"}I.defined=F;function R(tt){return typeof tt>"u"}I.undefined=R;function x(tt){return tt===!0||tt===!1}I.boolean=x;function z(tt){return U.call(tt)==="[object String]"}I.string=z;function te(tt){return U.call(tt)==="[object Number]"}I.number=te;function $e(tt,br,Zy){return U.call(tt)==="[object Number]"&&br<=tt&&tt<=Zy}I.numberRange=$e;function It(tt){return U.call(tt)==="[object Number]"&&-2147483648<=tt&&tt<=2147483647}I.integer=It;function pt(tt){return U.call(tt)==="[object Number]"&&0<=tt&&tt<=2147483647}I.uinteger=pt;function Xt(tt){return U.call(tt)==="[object Function]"}I.func=Xt;function er(tt){return tt!==null&&typeof tt=="object"}I.objectLiteral=er;function cr(tt,br){return Array.isArray(tt)&&tt.every(br)}I.typedArray=cr})(W||(W={}))})});var _i=m(qc=>{"use strict";Object.defineProperty(qc,"__esModule",{value:!0});qc.ProtocolNotificationType=qc.ProtocolNotificationType0=qc.ProtocolRequestType=qc.ProtocolRequestType0=qc.RegistrationType=qc.MessageDirection=void 0;var Rw=dT(),FYe;(function(t){t.clientToServer="clientToServer",t.serverToClient="serverToClient",t.both="both"})(FYe||(qc.MessageDirection=FYe={}));var Ece=class{constructor(e){this.method=e}};qc.RegistrationType=Ece;var Tce=class extends Rw.RequestType0{constructor(e){super(e)}};qc.ProtocolRequestType0=Tce;var Sce=class extends Rw.RequestType{constructor(e){super(e,Rw.ParameterStructures.byName)}};qc.ProtocolRequestType=Sce;var bce=class extends Rw.NotificationType0{constructor(e){super(e)}};qc.ProtocolNotificationType0=bce;var Cce=class extends Rw.NotificationType{constructor(e){super(e,Rw.ParameterStructures.byName)}};qc.ProtocolNotificationType=Cce});var yF=m(To=>{"use strict";Object.defineProperty(To,"__esModule",{value:!0});To.objectLiteral=To.typedArray=To.stringArray=To.array=To.func=To.error=To.number=To.string=To.boolean=void 0;function llr(t){return t===!0||t===!1}To.boolean=llr;function jYe(t){return typeof t=="string"||t instanceof String}To.string=jYe;function ulr(t){return typeof t=="number"||t instanceof Number}To.number=ulr;function dlr(t){return t instanceof Error}To.error=dlr;function flr(t){return typeof t=="function"}To.func=flr;function BYe(t){return Array.isArray(t)}To.array=BYe;function plr(t){return BYe(t)&&t.every(e=>jYe(e))}To.stringArray=plr;function hlr(t,e){return Array.isArray(t)&&t.every(e)}To.typedArray=hlr;function mlr(t){return t!==null&&typeof t=="object"}To.objectLiteral=mlr});var HYe=m(EF=>{"use strict";Object.defineProperty(EF,"__esModule",{value:!0});EF.ImplementationRequest=void 0;var $Ye=_i(),VYe;(function(t){t.method="textDocument/implementation",t.messageDirection=$Ye.MessageDirection.clientToServer,t.type=new $Ye.ProtocolRequestType(t.method)})(VYe||(EF.ImplementationRequest=VYe={}))});var WYe=m(TF=>{"use strict";Object.defineProperty(TF,"__esModule",{value:!0});TF.TypeDefinitionRequest=void 0;var GYe=_i(),zYe;(function(t){t.method="textDocument/typeDefinition",t.messageDirection=GYe.MessageDirection.clientToServer,t.type=new GYe.ProtocolRequestType(t.method)})(zYe||(TF.TypeDefinitionRequest=zYe={}))});var QYe=m(Ow=>{"use strict";Object.defineProperty(Ow,"__esModule",{value:!0});Ow.DidChangeWorkspaceFoldersNotification=Ow.WorkspaceFoldersRequest=void 0;var SF=_i(),KYe;(function(t){t.method="workspace/workspaceFolders",t.messageDirection=SF.MessageDirection.serverToClient,t.type=new SF.ProtocolRequestType0(t.method)})(KYe||(Ow.WorkspaceFoldersRequest=KYe={}));var YYe;(function(t){t.method="workspace/didChangeWorkspaceFolders",t.messageDirection=SF.MessageDirection.clientToServer,t.type=new SF.ProtocolNotificationType(t.method)})(YYe||(Ow.DidChangeWorkspaceFoldersNotification=YYe={}))});var XYe=m(bF=>{"use strict";Object.defineProperty(bF,"__esModule",{value:!0});bF.ConfigurationRequest=void 0;var ZYe=_i(),JYe;(function(t){t.method="workspace/configuration",t.messageDirection=ZYe.MessageDirection.serverToClient,t.type=new ZYe.ProtocolRequestType(t.method)})(JYe||(bF.ConfigurationRequest=JYe={}))});var rQe=m(Mw=>{"use strict";Object.defineProperty(Mw,"__esModule",{value:!0});Mw.ColorPresentationRequest=Mw.DocumentColorRequest=void 0;var CF=_i(),eQe;(function(t){t.method="textDocument/documentColor",t.messageDirection=CF.MessageDirection.clientToServer,t.type=new CF.ProtocolRequestType(t.method)})(eQe||(Mw.DocumentColorRequest=eQe={}));var tQe;(function(t){t.method="textDocument/colorPresentation",t.messageDirection=CF.MessageDirection.clientToServer,t.type=new CF.ProtocolRequestType(t.method)})(tQe||(Mw.ColorPresentationRequest=tQe={}))});var oQe=m(Nw=>{"use strict";Object.defineProperty(Nw,"__esModule",{value:!0});Nw.FoldingRangeRefreshRequest=Nw.FoldingRangeRequest=void 0;var AF=_i(),nQe;(function(t){t.method="textDocument/foldingRange",t.messageDirection=AF.MessageDirection.clientToServer,t.type=new AF.ProtocolRequestType(t.method)})(nQe||(Nw.FoldingRangeRequest=nQe={}));var iQe;(function(t){t.method="workspace/foldingRange/refresh",t.messageDirection=AF.MessageDirection.serverToClient,t.type=new AF.ProtocolRequestType0(t.method)})(iQe||(Nw.FoldingRangeRefreshRequest=iQe={}))});var cQe=m(xF=>{"use strict";Object.defineProperty(xF,"__esModule",{value:!0});xF.DeclarationRequest=void 0;var sQe=_i(),aQe;(function(t){t.method="textDocument/declaration",t.messageDirection=sQe.MessageDirection.clientToServer,t.type=new sQe.ProtocolRequestType(t.method)})(aQe||(xF.DeclarationRequest=aQe={}))});var dQe=m(wF=>{"use strict";Object.defineProperty(wF,"__esModule",{value:!0});wF.SelectionRangeRequest=void 0;var lQe=_i(),uQe;(function(t){t.method="textDocument/selectionRange",t.messageDirection=lQe.MessageDirection.clientToServer,t.type=new lQe.ProtocolRequestType(t.method)})(uQe||(wF.SelectionRangeRequest=uQe={}))});var mQe=m(a1=>{"use strict";Object.defineProperty(a1,"__esModule",{value:!0});a1.WorkDoneProgressCancelNotification=a1.WorkDoneProgressCreateRequest=a1.WorkDoneProgress=void 0;var glr=dT(),IF=_i(),fQe;(function(t){t.type=new glr.ProgressType;function e(r){return r===t.type}t.is=e})(fQe||(a1.WorkDoneProgress=fQe={}));var pQe;(function(t){t.method="window/workDoneProgress/create",t.messageDirection=IF.MessageDirection.serverToClient,t.type=new IF.ProtocolRequestType(t.method)})(pQe||(a1.WorkDoneProgressCreateRequest=pQe={}));var hQe;(function(t){t.method="window/workDoneProgress/cancel",t.messageDirection=IF.MessageDirection.clientToServer,t.type=new IF.ProtocolNotificationType(t.method)})(hQe||(a1.WorkDoneProgressCancelNotification=hQe={}))});var yQe=m(c1=>{"use strict";Object.defineProperty(c1,"__esModule",{value:!0});c1.CallHierarchyOutgoingCallsRequest=c1.CallHierarchyIncomingCallsRequest=c1.CallHierarchyPrepareRequest=void 0;var Lw=_i(),gQe;(function(t){t.method="textDocument/prepareCallHierarchy",t.messageDirection=Lw.MessageDirection.clientToServer,t.type=new Lw.ProtocolRequestType(t.method)})(gQe||(c1.CallHierarchyPrepareRequest=gQe={}));var _Qe;(function(t){t.method="callHierarchy/incomingCalls",t.messageDirection=Lw.MessageDirection.clientToServer,t.type=new Lw.ProtocolRequestType(t.method)})(_Qe||(c1.CallHierarchyIncomingCallsRequest=_Qe={}));var vQe;(function(t){t.method="callHierarchy/outgoingCalls",t.messageDirection=Lw.MessageDirection.clientToServer,t.type=new Lw.ProtocolRequestType(t.method)})(vQe||(c1.CallHierarchyOutgoingCallsRequest=vQe={}))});var AQe=m(Fc=>{"use strict";Object.defineProperty(Fc,"__esModule",{value:!0});Fc.SemanticTokensRefreshRequest=Fc.SemanticTokensRangeRequest=Fc.SemanticTokensDeltaRequest=Fc.SemanticTokensRequest=Fc.SemanticTokensRegistrationType=Fc.TokenFormat=void 0;var am=_i(),EQe;(function(t){t.Relative="relative"})(EQe||(Fc.TokenFormat=EQe={}));var mN;(function(t){t.method="textDocument/semanticTokens",t.type=new am.RegistrationType(t.method)})(mN||(Fc.SemanticTokensRegistrationType=mN={}));var TQe;(function(t){t.method="textDocument/semanticTokens/full",t.messageDirection=am.MessageDirection.clientToServer,t.type=new am.ProtocolRequestType(t.method),t.registrationMethod=mN.method})(TQe||(Fc.SemanticTokensRequest=TQe={}));var SQe;(function(t){t.method="textDocument/semanticTokens/full/delta",t.messageDirection=am.MessageDirection.clientToServer,t.type=new am.ProtocolRequestType(t.method),t.registrationMethod=mN.method})(SQe||(Fc.SemanticTokensDeltaRequest=SQe={}));var bQe;(function(t){t.method="textDocument/semanticTokens/range",t.messageDirection=am.MessageDirection.clientToServer,t.type=new am.ProtocolRequestType(t.method),t.registrationMethod=mN.method})(bQe||(Fc.SemanticTokensRangeRequest=bQe={}));var CQe;(function(t){t.method="workspace/semanticTokens/refresh",t.messageDirection=am.MessageDirection.serverToClient,t.type=new am.ProtocolRequestType0(t.method)})(CQe||(Fc.SemanticTokensRefreshRequest=CQe={}))});var IQe=m(PF=>{"use strict";Object.defineProperty(PF,"__esModule",{value:!0});PF.ShowDocumentRequest=void 0;var xQe=_i(),wQe;(function(t){t.method="window/showDocument",t.messageDirection=xQe.MessageDirection.serverToClient,t.type=new xQe.ProtocolRequestType(t.method)})(wQe||(PF.ShowDocumentRequest=wQe={}))});var OQe=m(RF=>{"use strict";Object.defineProperty(RF,"__esModule",{value:!0});RF.LinkedEditingRangeRequest=void 0;var PQe=_i(),RQe;(function(t){t.method="textDocument/linkedEditingRange",t.messageDirection=PQe.MessageDirection.clientToServer,t.type=new PQe.ProtocolRequestType(t.method)})(RQe||(RF.LinkedEditingRangeRequest=RQe={}))});var FQe=m(ua=>{"use strict";Object.defineProperty(ua,"__esModule",{value:!0});ua.WillDeleteFilesRequest=ua.DidDeleteFilesNotification=ua.DidRenameFilesNotification=ua.WillRenameFilesRequest=ua.DidCreateFilesNotification=ua.WillCreateFilesRequest=ua.FileOperationPatternKind=void 0;var Gu=_i(),MQe;(function(t){t.file="file",t.folder="folder"})(MQe||(ua.FileOperationPatternKind=MQe={}));var NQe;(function(t){t.method="workspace/willCreateFiles",t.messageDirection=Gu.MessageDirection.clientToServer,t.type=new Gu.ProtocolRequestType(t.method)})(NQe||(ua.WillCreateFilesRequest=NQe={}));var LQe;(function(t){t.method="workspace/didCreateFiles",t.messageDirection=Gu.MessageDirection.clientToServer,t.type=new Gu.ProtocolNotificationType(t.method)})(LQe||(ua.DidCreateFilesNotification=LQe={}));var kQe;(function(t){t.method="workspace/willRenameFiles",t.messageDirection=Gu.MessageDirection.clientToServer,t.type=new Gu.ProtocolRequestType(t.method)})(kQe||(ua.WillRenameFilesRequest=kQe={}));var DQe;(function(t){t.method="workspace/didRenameFiles",t.messageDirection=Gu.MessageDirection.clientToServer,t.type=new Gu.ProtocolNotificationType(t.method)})(DQe||(ua.DidRenameFilesNotification=DQe={}));var UQe;(function(t){t.method="workspace/didDeleteFiles",t.messageDirection=Gu.MessageDirection.clientToServer,t.type=new Gu.ProtocolNotificationType(t.method)})(UQe||(ua.DidDeleteFilesNotification=UQe={}));var qQe;(function(t){t.method="workspace/willDeleteFiles",t.messageDirection=Gu.MessageDirection.clientToServer,t.type=new Gu.ProtocolRequestType(t.method)})(qQe||(ua.WillDeleteFilesRequest=qQe={}))});var HQe=m(l1=>{"use strict";Object.defineProperty(l1,"__esModule",{value:!0});l1.MonikerRequest=l1.MonikerKind=l1.UniquenessLevel=void 0;var jQe=_i(),BQe;(function(t){t.document="document",t.project="project",t.group="group",t.scheme="scheme",t.global="global"})(BQe||(l1.UniquenessLevel=BQe={}));var $Qe;(function(t){t.$import="import",t.$export="export",t.local="local"})($Qe||(l1.MonikerKind=$Qe={}));var VQe;(function(t){t.method="textDocument/moniker",t.messageDirection=jQe.MessageDirection.clientToServer,t.type=new jQe.ProtocolRequestType(t.method)})(VQe||(l1.MonikerRequest=VQe={}))});var KQe=m(u1=>{"use strict";Object.defineProperty(u1,"__esModule",{value:!0});u1.TypeHierarchySubtypesRequest=u1.TypeHierarchySupertypesRequest=u1.TypeHierarchyPrepareRequest=void 0;var kw=_i(),GQe;(function(t){t.method="textDocument/prepareTypeHierarchy",t.messageDirection=kw.MessageDirection.clientToServer,t.type=new kw.ProtocolRequestType(t.method)})(GQe||(u1.TypeHierarchyPrepareRequest=GQe={}));var zQe;(function(t){t.method="typeHierarchy/supertypes",t.messageDirection=kw.MessageDirection.clientToServer,t.type=new kw.ProtocolRequestType(t.method)})(zQe||(u1.TypeHierarchySupertypesRequest=zQe={}));var WQe;(function(t){t.method="typeHierarchy/subtypes",t.messageDirection=kw.MessageDirection.clientToServer,t.type=new kw.ProtocolRequestType(t.method)})(WQe||(u1.TypeHierarchySubtypesRequest=WQe={}))});var ZQe=m(Dw=>{"use strict";Object.defineProperty(Dw,"__esModule",{value:!0});Dw.InlineValueRefreshRequest=Dw.InlineValueRequest=void 0;var OF=_i(),YQe;(function(t){t.method="textDocument/inlineValue",t.messageDirection=OF.MessageDirection.clientToServer,t.type=new OF.ProtocolRequestType(t.method)})(YQe||(Dw.InlineValueRequest=YQe={}));var QQe;(function(t){t.method="workspace/inlineValue/refresh",t.messageDirection=OF.MessageDirection.serverToClient,t.type=new OF.ProtocolRequestType0(t.method)})(QQe||(Dw.InlineValueRefreshRequest=QQe={}))});var tZe=m(d1=>{"use strict";Object.defineProperty(d1,"__esModule",{value:!0});d1.InlayHintRefreshRequest=d1.InlayHintResolveRequest=d1.InlayHintRequest=void 0;var Uw=_i(),JQe;(function(t){t.method="textDocument/inlayHint",t.messageDirection=Uw.MessageDirection.clientToServer,t.type=new Uw.ProtocolRequestType(t.method)})(JQe||(d1.InlayHintRequest=JQe={}));var XQe;(function(t){t.method="inlayHint/resolve",t.messageDirection=Uw.MessageDirection.clientToServer,t.type=new Uw.ProtocolRequestType(t.method)})(XQe||(d1.InlayHintResolveRequest=XQe={}));var eZe;(function(t){t.method="workspace/inlayHint/refresh",t.messageDirection=Uw.MessageDirection.serverToClient,t.type=new Uw.ProtocolRequestType0(t.method)})(eZe||(d1.InlayHintRefreshRequest=eZe={}))});var cZe=m(zu=>{"use strict";Object.defineProperty(zu,"__esModule",{value:!0});zu.DiagnosticRefreshRequest=zu.WorkspaceDiagnosticRequest=zu.DocumentDiagnosticRequest=zu.DocumentDiagnosticReportKind=zu.DiagnosticServerCancellationData=void 0;var aZe=dT(),_lr=yF(),qw=_i(),rZe;(function(t){function e(r){let n=r;return n&&_lr.boolean(n.retriggerRequest)}t.is=e})(rZe||(zu.DiagnosticServerCancellationData=rZe={}));var nZe;(function(t){t.Full="full",t.Unchanged="unchanged"})(nZe||(zu.DocumentDiagnosticReportKind=nZe={}));var iZe;(function(t){t.method="textDocument/diagnostic",t.messageDirection=qw.MessageDirection.clientToServer,t.type=new qw.ProtocolRequestType(t.method),t.partialResult=new aZe.ProgressType})(iZe||(zu.DocumentDiagnosticRequest=iZe={}));var oZe;(function(t){t.method="workspace/diagnostic",t.messageDirection=qw.MessageDirection.clientToServer,t.type=new qw.ProtocolRequestType(t.method),t.partialResult=new aZe.ProgressType})(oZe||(zu.WorkspaceDiagnosticRequest=oZe={}));var sZe;(function(t){t.method="workspace/diagnostic/refresh",t.messageDirection=qw.MessageDirection.serverToClient,t.type=new qw.ProtocolRequestType0(t.method)})(sZe||(zu.DiagnosticRefreshRequest=sZe={}))});var mZe=m(Hi=>{"use strict";Object.defineProperty(Hi,"__esModule",{value:!0});Hi.DidCloseNotebookDocumentNotification=Hi.DidSaveNotebookDocumentNotification=Hi.DidChangeNotebookDocumentNotification=Hi.NotebookCellArrayChange=Hi.DidOpenNotebookDocumentNotification=Hi.NotebookDocumentSyncRegistrationType=Hi.NotebookDocument=Hi.NotebookCell=Hi.ExecutionSummary=Hi.NotebookCellKind=void 0;var gN=hN(),Qd=yF(),Z0=_i(),Ace;(function(t){t.Markup=1,t.Code=2;function e(r){return r===1||r===2}t.is=e})(Ace||(Hi.NotebookCellKind=Ace={}));var xce;(function(t){function e(o,s){let a={executionOrder:o};return(s===!0||s===!1)&&(a.success=s),a}t.create=e;function r(o){let s=o;return Qd.objectLiteral(s)&&gN.uinteger.is(s.executionOrder)&&(s.success===void 0||Qd.boolean(s.success))}t.is=r;function n(o,s){return o===s?!0:o==null||s===null||s===void 0?!1:o.executionOrder===s.executionOrder&&o.success===s.success}t.equals=n})(xce||(Hi.ExecutionSummary=xce={}));var MF;(function(t){function e(s,a){return{kind:s,document:a}}t.create=e;function r(s){let a=s;return Qd.objectLiteral(a)&&Ace.is(a.kind)&&gN.DocumentUri.is(a.document)&&(a.metadata===void 0||Qd.objectLiteral(a.metadata))}t.is=r;function n(s,a){let c=new Set;return s.document!==a.document&&c.add("document"),s.kind!==a.kind&&c.add("kind"),s.executionSummary!==a.executionSummary&&c.add("executionSummary"),(s.metadata!==void 0||a.metadata!==void 0)&&!o(s.metadata,a.metadata)&&c.add("metadata"),(s.executionSummary!==void 0||a.executionSummary!==void 0)&&!xce.equals(s.executionSummary,a.executionSummary)&&c.add("executionSummary"),c}t.diff=n;function o(s,a){if(s===a)return!0;if(s==null||a===null||a===void 0||typeof s!=typeof a||typeof s!="object")return!1;let c=Array.isArray(s),l=Array.isArray(a);if(c!==l)return!1;if(c&&l){if(s.length!==a.length)return!1;for(let u=0;u<s.length;u++)if(!o(s[u],a[u]))return!1}if(Qd.objectLiteral(s)&&Qd.objectLiteral(a)){let u=Object.keys(s),d=Object.keys(a);if(u.length!==d.length||(u.sort(),d.sort(),!o(u,d)))return!1;for(let f=0;f<u.length;f++){let p=u[f];if(!o(s[p],a[p]))return!1}}return!0}})(MF||(Hi.NotebookCell=MF={}));var lZe;(function(t){function e(n,o,s,a){return{uri:n,notebookType:o,version:s,cells:a}}t.create=e;function r(n){let o=n;return Qd.objectLiteral(o)&&Qd.string(o.uri)&&gN.integer.is(o.version)&&Qd.typedArray(o.cells,MF.is)}t.is=r})(lZe||(Hi.NotebookDocument=lZe={}));var Fw;(function(t){t.method="notebookDocument/sync",t.messageDirection=Z0.MessageDirection.clientToServer,t.type=new Z0.RegistrationType(t.method)})(Fw||(Hi.NotebookDocumentSyncRegistrationType=Fw={}));var uZe;(function(t){t.method="notebookDocument/didOpen",t.messageDirection=Z0.MessageDirection.clientToServer,t.type=new Z0.ProtocolNotificationType(t.method),t.registrationMethod=Fw.method})(uZe||(Hi.DidOpenNotebookDocumentNotification=uZe={}));var dZe;(function(t){function e(n){let o=n;return Qd.objectLiteral(o)&&gN.uinteger.is(o.start)&&gN.uinteger.is(o.deleteCount)&&(o.cells===void 0||Qd.typedArray(o.cells,MF.is))}t.is=e;function r(n,o,s){let a={start:n,deleteCount:o};return s!==void 0&&(a.cells=s),a}t.create=r})(dZe||(Hi.NotebookCellArrayChange=dZe={}));var fZe;(function(t){t.method="notebookDocument/didChange",t.messageDirection=Z0.MessageDirection.clientToServer,t.type=new Z0.ProtocolNotificationType(t.method),t.registrationMethod=Fw.method})(fZe||(Hi.DidChangeNotebookDocumentNotification=fZe={}));var pZe;(function(t){t.method="notebookDocument/didSave",t.messageDirection=Z0.MessageDirection.clientToServer,t.type=new Z0.ProtocolNotificationType(t.method),t.registrationMethod=Fw.method})(pZe||(Hi.DidSaveNotebookDocumentNotification=pZe={}));var hZe;(function(t){t.method="notebookDocument/didClose",t.messageDirection=Z0.MessageDirection.clientToServer,t.type=new Z0.ProtocolNotificationType(t.method),t.registrationMethod=Fw.method})(hZe||(Hi.DidCloseNotebookDocumentNotification=hZe={}))});var vZe=m(NF=>{"use strict";Object.defineProperty(NF,"__esModule",{value:!0});NF.InlineCompletionRequest=void 0;var gZe=_i(),_Ze;(function(t){t.method="textDocument/inlineCompletion",t.messageDirection=gZe.MessageDirection.clientToServer,t.type=new gZe.ProtocolRequestType(t.method)})(_Ze||(NF.InlineCompletionRequest=_Ze={}))});var OJe=m(k=>{"use strict";Object.defineProperty(k,"__esModule",{value:!0});k.WorkspaceSymbolRequest=k.CodeActionResolveRequest=k.CodeActionRequest=k.DocumentSymbolRequest=k.DocumentHighlightRequest=k.ReferencesRequest=k.DefinitionRequest=k.SignatureHelpRequest=k.SignatureHelpTriggerKind=k.HoverRequest=k.CompletionResolveRequest=k.CompletionRequest=k.CompletionTriggerKind=k.PublishDiagnosticsNotification=k.WatchKind=k.RelativePattern=k.FileChangeType=k.DidChangeWatchedFilesNotification=k.WillSaveTextDocumentWaitUntilRequest=k.WillSaveTextDocumentNotification=k.TextDocumentSaveReason=k.DidSaveTextDocumentNotification=k.DidCloseTextDocumentNotification=k.DidChangeTextDocumentNotification=k.TextDocumentContentChangeEvent=k.DidOpenTextDocumentNotification=k.TextDocumentSyncKind=k.TelemetryEventNotification=k.LogMessageNotification=k.ShowMessageRequest=k.ShowMessageNotification=k.MessageType=k.DidChangeConfigurationNotification=k.ExitNotification=k.ShutdownRequest=k.InitializedNotification=k.InitializeErrorCodes=k.InitializeRequest=k.WorkDoneProgressOptions=k.TextDocumentRegistrationOptions=k.StaticRegistrationOptions=k.PositionEncodingKind=k.FailureHandlingKind=k.ResourceOperationKind=k.UnregistrationRequest=k.RegistrationRequest=k.DocumentSelector=k.NotebookCellTextDocumentFilter=k.NotebookDocumentFilter=k.TextDocumentFilter=void 0;k.MonikerRequest=k.MonikerKind=k.UniquenessLevel=k.WillDeleteFilesRequest=k.DidDeleteFilesNotification=k.WillRenameFilesRequest=k.DidRenameFilesNotification=k.WillCreateFilesRequest=k.DidCreateFilesNotification=k.FileOperationPatternKind=k.LinkedEditingRangeRequest=k.ShowDocumentRequest=k.SemanticTokensRegistrationType=k.SemanticTokensRefreshRequest=k.SemanticTokensRangeRequest=k.SemanticTokensDeltaRequest=k.SemanticTokensRequest=k.TokenFormat=k.CallHierarchyPrepareRequest=k.CallHierarchyOutgoingCallsRequest=k.CallHierarchyIncomingCallsRequest=k.WorkDoneProgressCancelNotification=k.WorkDoneProgressCreateRequest=k.WorkDoneProgress=k.SelectionRangeRequest=k.DeclarationRequest=k.FoldingRangeRefreshRequest=k.FoldingRangeRequest=k.ColorPresentationRequest=k.DocumentColorRequest=k.ConfigurationRequest=k.DidChangeWorkspaceFoldersNotification=k.WorkspaceFoldersRequest=k.TypeDefinitionRequest=k.ImplementationRequest=k.ApplyWorkspaceEditRequest=k.ExecuteCommandRequest=k.PrepareRenameRequest=k.RenameRequest=k.PrepareSupportDefaultBehavior=k.DocumentOnTypeFormattingRequest=k.DocumentRangesFormattingRequest=k.DocumentRangeFormattingRequest=k.DocumentFormattingRequest=k.DocumentLinkResolveRequest=k.DocumentLinkRequest=k.CodeLensRefreshRequest=k.CodeLensResolveRequest=k.CodeLensRequest=k.WorkspaceSymbolResolveRequest=void 0;k.InlineCompletionRequest=k.DidCloseNotebookDocumentNotification=k.DidSaveNotebookDocumentNotification=k.DidChangeNotebookDocumentNotification=k.NotebookCellArrayChange=k.DidOpenNotebookDocumentNotification=k.NotebookDocumentSyncRegistrationType=k.NotebookDocument=k.NotebookCell=k.ExecutionSummary=k.NotebookCellKind=k.DiagnosticRefreshRequest=k.WorkspaceDiagnosticRequest=k.DocumentDiagnosticRequest=k.DocumentDiagnosticReportKind=k.DiagnosticServerCancellationData=k.InlayHintRefreshRequest=k.InlayHintResolveRequest=k.InlayHintRequest=k.InlineValueRefreshRequest=k.InlineValueRequest=k.TypeHierarchySupertypesRequest=k.TypeHierarchySubtypesRequest=k.TypeHierarchyPrepareRequest=void 0;var Ie=_i(),yZe=hN(),ss=yF(),vlr=HYe();Object.defineProperty(k,"ImplementationRequest",{enumerable:!0,get:function(){return vlr.ImplementationRequest}});var ylr=WYe();Object.defineProperty(k,"TypeDefinitionRequest",{enumerable:!0,get:function(){return ylr.TypeDefinitionRequest}});var wJe=QYe();Object.defineProperty(k,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return wJe.WorkspaceFoldersRequest}});Object.defineProperty(k,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return wJe.DidChangeWorkspaceFoldersNotification}});var Elr=XYe();Object.defineProperty(k,"ConfigurationRequest",{enumerable:!0,get:function(){return Elr.ConfigurationRequest}});var IJe=rQe();Object.defineProperty(k,"DocumentColorRequest",{enumerable:!0,get:function(){return IJe.DocumentColorRequest}});Object.defineProperty(k,"ColorPresentationRequest",{enumerable:!0,get:function(){return IJe.ColorPresentationRequest}});var PJe=oQe();Object.defineProperty(k,"FoldingRangeRequest",{enumerable:!0,get:function(){return PJe.FoldingRangeRequest}});Object.defineProperty(k,"FoldingRangeRefreshRequest",{enumerable:!0,get:function(){return PJe.FoldingRangeRefreshRequest}});var Tlr=cQe();Object.defineProperty(k,"DeclarationRequest",{enumerable:!0,get:function(){return Tlr.DeclarationRequest}});var Slr=dQe();Object.defineProperty(k,"SelectionRangeRequest",{enumerable:!0,get:function(){return Slr.SelectionRangeRequest}});var Oce=mQe();Object.defineProperty(k,"WorkDoneProgress",{enumerable:!0,get:function(){return Oce.WorkDoneProgress}});Object.defineProperty(k,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return Oce.WorkDoneProgressCreateRequest}});Object.defineProperty(k,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return Oce.WorkDoneProgressCancelNotification}});var Mce=yQe();Object.defineProperty(k,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return Mce.CallHierarchyIncomingCallsRequest}});Object.defineProperty(k,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return Mce.CallHierarchyOutgoingCallsRequest}});Object.defineProperty(k,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return Mce.CallHierarchyPrepareRequest}});var jw=AQe();Object.defineProperty(k,"TokenFormat",{enumerable:!0,get:function(){return jw.TokenFormat}});Object.defineProperty(k,"SemanticTokensRequest",{enumerable:!0,get:function(){return jw.SemanticTokensRequest}});Object.defineProperty(k,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return jw.SemanticTokensDeltaRequest}});Object.defineProperty(k,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return jw.SemanticTokensRangeRequest}});Object.defineProperty(k,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return jw.SemanticTokensRefreshRequest}});Object.defineProperty(k,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return jw.SemanticTokensRegistrationType}});var blr=IQe();Object.defineProperty(k,"ShowDocumentRequest",{enumerable:!0,get:function(){return blr.ShowDocumentRequest}});var Clr=OQe();Object.defineProperty(k,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return Clr.LinkedEditingRangeRequest}});var fT=FQe();Object.defineProperty(k,"FileOperationPatternKind",{enumerable:!0,get:function(){return fT.FileOperationPatternKind}});Object.defineProperty(k,"DidCreateFilesNotification",{enumerable:!0,get:function(){return fT.DidCreateFilesNotification}});Object.defineProperty(k,"WillCreateFilesRequest",{enumerable:!0,get:function(){return fT.WillCreateFilesRequest}});Object.defineProperty(k,"DidRenameFilesNotification",{enumerable:!0,get:function(){return fT.DidRenameFilesNotification}});Object.defineProperty(k,"WillRenameFilesRequest",{enumerable:!0,get:function(){return fT.WillRenameFilesRequest}});Object.defineProperty(k,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return fT.DidDeleteFilesNotification}});Object.defineProperty(k,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return fT.WillDeleteFilesRequest}});var Nce=HQe();Object.defineProperty(k,"UniquenessLevel",{enumerable:!0,get:function(){return Nce.UniquenessLevel}});Object.defineProperty(k,"MonikerKind",{enumerable:!0,get:function(){return Nce.MonikerKind}});Object.defineProperty(k,"MonikerRequest",{enumerable:!0,get:function(){return Nce.MonikerRequest}});var Lce=KQe();Object.defineProperty(k,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return Lce.TypeHierarchyPrepareRequest}});Object.defineProperty(k,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return Lce.TypeHierarchySubtypesRequest}});Object.defineProperty(k,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return Lce.TypeHierarchySupertypesRequest}});var RJe=ZQe();Object.defineProperty(k,"InlineValueRequest",{enumerable:!0,get:function(){return RJe.InlineValueRequest}});Object.defineProperty(k,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return RJe.InlineValueRefreshRequest}});var kce=tZe();Object.defineProperty(k,"InlayHintRequest",{enumerable:!0,get:function(){return kce.InlayHintRequest}});Object.defineProperty(k,"InlayHintResolveRequest",{enumerable:!0,get:function(){return kce.InlayHintResolveRequest}});Object.defineProperty(k,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return kce.InlayHintRefreshRequest}});var _N=cZe();Object.defineProperty(k,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return _N.DiagnosticServerCancellationData}});Object.defineProperty(k,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return _N.DocumentDiagnosticReportKind}});Object.defineProperty(k,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return _N.DocumentDiagnosticRequest}});Object.defineProperty(k,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return _N.WorkspaceDiagnosticRequest}});Object.defineProperty(k,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return _N.DiagnosticRefreshRequest}});var J0=mZe();Object.defineProperty(k,"NotebookCellKind",{enumerable:!0,get:function(){return J0.NotebookCellKind}});Object.defineProperty(k,"ExecutionSummary",{enumerable:!0,get:function(){return J0.ExecutionSummary}});Object.defineProperty(k,"NotebookCell",{enumerable:!0,get:function(){return J0.NotebookCell}});Object.defineProperty(k,"NotebookDocument",{enumerable:!0,get:function(){return J0.NotebookDocument}});Object.defineProperty(k,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return J0.NotebookDocumentSyncRegistrationType}});Object.defineProperty(k,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return J0.DidOpenNotebookDocumentNotification}});Object.defineProperty(k,"NotebookCellArrayChange",{enumerable:!0,get:function(){return J0.NotebookCellArrayChange}});Object.defineProperty(k,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return J0.DidChangeNotebookDocumentNotification}});Object.defineProperty(k,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return J0.DidSaveNotebookDocumentNotification}});Object.defineProperty(k,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return J0.DidCloseNotebookDocumentNotification}});var Alr=vZe();Object.defineProperty(k,"InlineCompletionRequest",{enumerable:!0,get:function(){return Alr.InlineCompletionRequest}});var wce;(function(t){function e(r){let n=r;return ss.string(n)||ss.string(n.language)||ss.string(n.scheme)||ss.string(n.pattern)}t.is=e})(wce||(k.TextDocumentFilter=wce={}));var Ice;(function(t){function e(r){let n=r;return ss.objectLiteral(n)&&(ss.string(n.notebookType)||ss.string(n.scheme)||ss.string(n.pattern))}t.is=e})(Ice||(k.NotebookDocumentFilter=Ice={}));var Pce;(function(t){function e(r){let n=r;return ss.objectLiteral(n)&&(ss.string(n.notebook)||Ice.is(n.notebook))&&(n.language===void 0||ss.string(n.language))}t.is=e})(Pce||(k.NotebookCellTextDocumentFilter=Pce={}));var Rce;(function(t){function e(r){if(!Array.isArray(r))return!1;for(let n of r)if(!ss.string(n)&&!wce.is(n)&&!Pce.is(n))return!1;return!0}t.is=e})(Rce||(k.DocumentSelector=Rce={}));var EZe;(function(t){t.method="client/registerCapability",t.messageDirection=Ie.MessageDirection.serverToClient,t.type=new Ie.ProtocolRequestType(t.method)})(EZe||(k.RegistrationRequest=EZe={}));var TZe;(function(t){t.method="client/unregisterCapability",t.messageDirection=Ie.MessageDirection.serverToClient,t.type=new Ie.ProtocolRequestType(t.method)})(TZe||(k.UnregistrationRequest=TZe={}));var SZe;(function(t){t.Create="create",t.Rename="rename",t.Delete="delete"})(SZe||(k.ResourceOperationKind=SZe={}));var bZe;(function(t){t.Abort="abort",t.Transactional="transactional",t.TextOnlyTransactional="textOnlyTransactional",t.Undo="undo"})(bZe||(k.FailureHandlingKind=bZe={}));var CZe;(function(t){t.UTF8="utf-8",t.UTF16="utf-16",t.UTF32="utf-32"})(CZe||(k.PositionEncodingKind=CZe={}));var AZe;(function(t){function e(r){let n=r;return n&&ss.string(n.id)&&n.id.length>0}t.hasId=e})(AZe||(k.StaticRegistrationOptions=AZe={}));var xZe;(function(t){function e(r){let n=r;return n&&(n.documentSelector===null||Rce.is(n.documentSelector))}t.is=e})(xZe||(k.TextDocumentRegistrationOptions=xZe={}));var wZe;(function(t){function e(n){let o=n;return ss.objectLiteral(o)&&(o.workDoneProgress===void 0||ss.boolean(o.workDoneProgress))}t.is=e;function r(n){let o=n;return o&&ss.boolean(o.workDoneProgress)}t.hasWorkDoneProgress=r})(wZe||(k.WorkDoneProgressOptions=wZe={}));var IZe;(function(t){t.method="initialize",t.messageDirection=Ie.MessageDirection.clientToServer,t.type=new Ie.ProtocolRequestType(t.method)})(IZe||(k.InitializeRequest=IZe={}));var PZe;(function(t){t.unknownProtocolVersion=1})(PZe||(k.InitializeErrorCodes=PZe={}));var RZe;(function(t){t.method="initialized",t.messageDirection=Ie.MessageDirection.clientToServer,t.type=new Ie.ProtocolNotificationType(t.method)})(RZe||(k.InitializedNotification=RZe={}));var OZe;(function(t){t.method="shutdown",t.messageDirection=Ie.MessageDirection.clientToServer,t.type=new Ie.ProtocolRequestType0(t.method)})(OZe||(k.ShutdownRequest=OZe={}));var MZe;(function(t){t.method="exit",t.messageDirection=Ie.MessageDirection.clientToServer,t.type=new Ie.ProtocolNotificationType0(t.method)})(MZe||(k.ExitNotification=MZe={}));var NZe;(function(t){t.method="workspace/didChangeConfiguration",t.messageDirection=Ie.MessageDirection.clientToServer,t.type=new Ie.ProtocolNotificationType(t.method)})(NZe||(k.DidChangeConfigurationNotification=NZe={}));var LZe;(function(t){t.Error=1,t.Warning=2,t.Info=3,t.Log=4,t.Debug=5})(LZe||(k.MessageType=LZe={}));var kZe;(function(t){t.method="window/showMessage",t.messageDirection=Ie.MessageDirection.serverToClient,t.type=new Ie.ProtocolNotificationType(t.method)})(kZe||(k.ShowMessageNotification=kZe={}));var DZe;(function(t){t.method="window/showMessageRequest",t.messageDirection=Ie.MessageDirection.serverToClient,t.type=new Ie.ProtocolRequestType(t.method)})(DZe||(k.ShowMessageRequest=DZe={}));var UZe;(function(t){t.method="window/logMessage",t.messageDirection=Ie.MessageDirection.serverToClient,t.type=new Ie.ProtocolNotificationType(t.method)})(UZe||(k.LogMessageNotification=UZe={}));var qZe;(function(t){t.method="telemetry/event",t.messageDirection=Ie.MessageDirection.serverToClient,t.type=new Ie.ProtocolNotificationType(t.method)})(qZe||(k.TelemetryEventNotification=qZe={}));var FZe;(function(t){t.None=0,t.Full=1,t.Incremental=2})(FZe||(k.TextDocumentSyncKind=FZe={}));var jZe;(function(t){t.method="textDocument/didOpen",t.messageDirection=Ie.MessageDirection.clientToServer,t.type=new Ie.ProtocolNotificationType(t.method)})(jZe||(k.DidOpenTextDocumentNotification=jZe={}));var BZe;(function(t){function e(n){let o=n;return o!=null&&typeof o.text=="string"&&o.range!==void 0&&(o.rangeLength===void 0||typeof o.rangeLength=="number")}t.isIncremental=e;function r(n){let o=n;return o!=null&&typeof o.text=="string"&&o.range===void 0&&o.rangeLength===void 0}t.isFull=r})(BZe||(k.TextDocumentContentChangeEvent=BZe={}));var $Ze;(function(t){t.method="textDocument/didChange",t.messageDirection=Ie.MessageDirection.clientToServer,t.type=new Ie.ProtocolNotificationType(t.method)})($Ze||(k.DidChangeTextDocumentNotification=$Ze={}));var VZe;(function(t){t.method="textDocument/didClose",t.messageDirection=Ie.MessageDirection.clientToServer,t.type=new Ie.ProtocolNotificationType(t.method)})(VZe||(k.DidCloseTextDocumentNotification=VZe={}));var HZe;(function(t){t.method="textDocument/didSave",t.messageDirection=Ie.MessageDirection.clientToServer,t.type=new Ie.ProtocolNotificationType(t.method)})(HZe||(k.DidSaveTextDocumentNotification=HZe={}));var GZe;(function(t){t.Manual=1,t.AfterDelay=2,t.FocusOut=3})(GZe||(k.TextDocumentSaveReason=GZe={}));var zZe;(function(t){t.method="textDocument/willSave",t.messageDirection=Ie.MessageDirection.clientToServer,t.type=new Ie.ProtocolNotificationType(t.method)})(zZe||(k.WillSaveTextDocumentNotification=zZe={}));var WZe;(function(t){t.method="textDocument/willSaveWaitUntil",t.messageDirection=Ie.MessageDirection.clientToServer,t.type=new Ie.ProtocolRequestType(t.method)})(WZe||(k.WillSaveTextDocumentWaitUntilRequest=WZe={}));var KZe;(function(t){t.method="workspace/didChangeWatchedFiles",t.messageDirection=Ie.MessageDirection.clientToServer,t.type=new Ie.ProtocolNotificationType(t.method)})(KZe||(k.DidChangeWatchedFilesNotification=KZe={}));var YZe;(function(t){t.Created=1,t.Changed=2,t.Deleted=3})(YZe||(k.FileChangeType=YZe={}));var QZe;(function(t){function e(r){let n=r;return ss.objectLiteral(n)&&(yZe.URI.is(n.baseUri)||yZe.WorkspaceFolder.is(n.baseUri))&&ss.string(n.pattern)}t.is=e})(QZe||(k.RelativePattern=QZe={}));var ZZe;(function(t){t.Create=1,t.Change=2,t.Delete=4})(ZZe||(k.WatchKind=ZZe={}));var JZe;(function(t){t.method="textDocument/publishDiagnostics",t.messageDirection=Ie.MessageDirection.serverToClient,t.type=new Ie.ProtocolNotificationType(t.method)})(JZe||(k.PublishDiagnosticsNotification=JZe={}));var XZe;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.TriggerForIncompleteCompletions=3})(XZe||(k.CompletionTriggerKind=XZe={}));var eJe;(function(t){t.method="textDocument/completion",t.messageDirection=Ie.MessageDirection.clientToServer,t.type=new Ie.ProtocolRequestType(t.method)})(eJe||(k.CompletionRequest=eJe={}));var tJe;(function(t){t.method="completionItem/resolve",t.messageDirection=Ie.MessageDirection.clientToServer,t.type=new Ie.ProtocolRequestType(t.method)})(tJe||(k.CompletionResolveRequest=tJe={}));var rJe;(function(t){t.method="textDocument/hover",t.messageDirection=Ie.MessageDirection.clientToServer,t.type=new Ie.ProtocolRequestType(t.method)})(rJe||(k.HoverRequest=rJe={}));var nJe;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.ContentChange=3})(nJe||(k.SignatureHelpTriggerKind=nJe={}));var iJe;(function(t){t.method="textDocument/signatureHelp",t.messageDirection=Ie.MessageDirection.clientToServer,t.type=new Ie.ProtocolRequestType(t.method)})(iJe||(k.SignatureHelpRequest=iJe={}));var oJe;(function(t){t.method="textDocument/definition",t.messageDirection=Ie.MessageDirection.clientToServer,t.type=new Ie.ProtocolRequestType(t.method)})(oJe||(k.DefinitionRequest=oJe={}));var sJe;(function(t){t.method="textDocument/references",t.messageDirection=Ie.MessageDirection.clientToServer,t.type=new Ie.ProtocolRequestType(t.method)})(sJe||(k.ReferencesRequest=sJe={}));var aJe;(function(t){t.method="textDocument/documentHighlight",t.messageDirection=Ie.MessageDirection.clientToServer,t.type=new Ie.ProtocolRequestType(t.method)})(aJe||(k.DocumentHighlightRequest=aJe={}));var cJe;(function(t){t.method="textDocument/documentSymbol",t.messageDirection=Ie.MessageDirection.clientToServer,t.type=new Ie.ProtocolRequestType(t.method)})(cJe||(k.DocumentSymbolRequest=cJe={}));var lJe;(function(t){t.method="textDocument/codeAction",t.messageDirection=Ie.MessageDirection.clientToServer,t.type=new Ie.ProtocolRequestType(t.method)})(lJe||(k.CodeActionRequest=lJe={}));var uJe;(function(t){t.method="codeAction/resolve",t.messageDirection=Ie.MessageDirection.clientToServer,t.type=new Ie.ProtocolRequestType(t.method)})(uJe||(k.CodeActionResolveRequest=uJe={}));var dJe;(function(t){t.method="workspace/symbol",t.messageDirection=Ie.MessageDirection.clientToServer,t.type=new Ie.ProtocolRequestType(t.method)})(dJe||(k.WorkspaceSymbolRequest=dJe={}));var fJe;(function(t){t.method="workspaceSymbol/resolve",t.messageDirection=Ie.MessageDirection.clientToServer,t.type=new Ie.ProtocolRequestType(t.method)})(fJe||(k.WorkspaceSymbolResolveRequest=fJe={}));var pJe;(function(t){t.method="textDocument/codeLens",t.messageDirection=Ie.MessageDirection.clientToServer,t.type=new Ie.ProtocolRequestType(t.method)})(pJe||(k.CodeLensRequest=pJe={}));var hJe;(function(t){t.method="codeLens/resolve",t.messageDirection=Ie.MessageDirection.clientToServer,t.type=new Ie.ProtocolRequestType(t.method)})(hJe||(k.CodeLensResolveRequest=hJe={}));var mJe;(function(t){t.method="workspace/codeLens/refresh",t.messageDirection=Ie.MessageDirection.serverToClient,t.type=new Ie.ProtocolRequestType0(t.method)})(mJe||(k.CodeLensRefreshRequest=mJe={}));var gJe;(function(t){t.method="textDocument/documentLink",t.messageDirection=Ie.MessageDirection.clientToServer,t.type=new Ie.ProtocolRequestType(t.method)})(gJe||(k.DocumentLinkRequest=gJe={}));var _Je;(function(t){t.method="documentLink/resolve",t.messageDirection=Ie.MessageDirection.clientToServer,t.type=new Ie.ProtocolRequestType(t.method)})(_Je||(k.DocumentLinkResolveRequest=_Je={}));var vJe;(function(t){t.method="textDocument/formatting",t.messageDirection=Ie.MessageDirection.clientToServer,t.type=new Ie.ProtocolRequestType(t.method)})(vJe||(k.DocumentFormattingRequest=vJe={}));var yJe;(function(t){t.method="textDocument/rangeFormatting",t.messageDirection=Ie.MessageDirection.clientToServer,t.type=new Ie.ProtocolRequestType(t.method)})(yJe||(k.DocumentRangeFormattingRequest=yJe={}));var EJe;(function(t){t.method="textDocument/rangesFormatting",t.messageDirection=Ie.MessageDirection.clientToServer,t.type=new Ie.ProtocolRequestType(t.method)})(EJe||(k.DocumentRangesFormattingRequest=EJe={}));var TJe;(function(t){t.method="textDocument/onTypeFormatting",t.messageDirection=Ie.MessageDirection.clientToServer,t.type=new Ie.ProtocolRequestType(t.method)})(TJe||(k.DocumentOnTypeFormattingRequest=TJe={}));var SJe;(function(t){t.Identifier=1})(SJe||(k.PrepareSupportDefaultBehavior=SJe={}));var bJe;(function(t){t.method="textDocument/rename",t.messageDirection=Ie.MessageDirection.clientToServer,t.type=new Ie.ProtocolRequestType(t.method)})(bJe||(k.RenameRequest=bJe={}));var CJe;(function(t){t.method="textDocument/prepareRename",t.messageDirection=Ie.MessageDirection.clientToServer,t.type=new Ie.ProtocolRequestType(t.method)})(CJe||(k.PrepareRenameRequest=CJe={}));var AJe;(function(t){t.method="workspace/executeCommand",t.messageDirection=Ie.MessageDirection.clientToServer,t.type=new Ie.ProtocolRequestType(t.method)})(AJe||(k.ExecuteCommandRequest=AJe={}));var xJe;(function(t){t.method="workspace/applyEdit",t.messageDirection=Ie.MessageDirection.serverToClient,t.type=new Ie.ProtocolRequestType("workspace/applyEdit")})(xJe||(k.ApplyWorkspaceEditRequest=xJe={}))});var NJe=m(LF=>{"use strict";Object.defineProperty(LF,"__esModule",{value:!0});LF.createProtocolConnection=void 0;var MJe=dT();function xlr(t,e,r,n){return MJe.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),(0,MJe.createMessageConnection)(t,e,r,n)}LF.createProtocolConnection=xlr});var kJe=m(jc=>{"use strict";var wlr=jc&&jc.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),kF=jc&&jc.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&wlr(e,t,r)};Object.defineProperty(jc,"__esModule",{value:!0});jc.LSPErrorCodes=jc.createProtocolConnection=void 0;kF(dT(),jc);kF(hN(),jc);kF(_i(),jc);kF(OJe(),jc);var Ilr=NJe();Object.defineProperty(jc,"createProtocolConnection",{enumerable:!0,get:function(){return Ilr.createProtocolConnection}});var LJe;(function(t){t.lspReservedErrorRangeStart=-32899,t.RequestFailed=-32803,t.ServerCancelled=-32802,t.ContentModified=-32801,t.RequestCancelled=-32800,t.lspReservedErrorRangeEnd=-32800})(LJe||(jc.LSPErrorCodes=LJe={}))});var cm=m(X0=>{"use strict";var Plr=X0&&X0.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),DJe=X0&&X0.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Plr(e,t,r)};Object.defineProperty(X0,"__esModule",{value:!0});X0.createProtocolConnection=void 0;var Rlr=yce();DJe(yce(),X0);DJe(kJe(),X0);function Olr(t,e,r,n){return(0,Rlr.createMessageConnection)(t,e,r,n)}X0.createProtocolConnection=Olr});var UJe=m(Zd=>{"use strict";var Mlr=Zd&&Zd.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),Nlr=Zd&&Zd.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),Llr=Zd&&Zd.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),o=0;o<n.length;o++)n[o]!=="default"&&Mlr(r,e,n[o]);return Nlr(r,e),r}})();Object.defineProperty(Zd,"__esModule",{value:!0});Zd.Emitter=void 0;Zd.transformEvent=Dlr;var klr=Llr(cm()),Dce=class extends klr.Emitter{get event(){return super.event}};Zd.Emitter=Dce;function Dlr(t,e){return(r,n,o)=>(n&&(r=r.bind(n)),t(a=>{let c=e(a);c!==void 0&&r(c)},void 0,o))}});var Gl=m(Ge=>{"use strict";Object.defineProperty(Ge,"__esModule",{value:!0});Ge.apiVersion=Ge.ICompletionsEditorAndPluginInfo=Ge.BuildInfo=Ge.InMemoryConfigProvider=Ge.DefaultsOnlyConfigProvider=Ge.ConfigProvider=Ge.ICompletionsConfigProvider=Ge.BuildType=Ge.BlockMode=Ge.ConfigKey=Ge.packageJson=void 0;Ge.shouldDoServerTrimming=Flr;Ge.getConfigKeyRecursively=jlr;Ge.getConfigDefaultForKey=FJe;Ge.getOptionalConfigDefaultForKey=jJe;Ge.getConfig=Blr;Ge.dumpForTelemetry=$lr;Ge.formatNameAndVersion=jce;Ge.editorVersionHeaders=Vlr;var DF=aN();Object.defineProperty(Ge,"packageJson",{enumerable:!0,get:function(){return DF.packageJson}});var qJe=Qe(),Ulr=aYe(),qlr=UJe();Ge.ConfigKey={Enable:"enable",UserSelectedCompletionModel:"selectedCompletionModel",ShowEditorCompletions:"editor.showEditorCompletions",EnableAutoCompletions:"editor.enableAutoCompletions",DelayCompletions:"editor.delayCompletions",FilterCompletions:"editor.filterCompletions",CompletionsDelay:"completionsDelay",CompletionsDebounce:"completionsDebounce",RelatedFilesVSCodeCSharp:"advanced.relatedFilesVSCodeCSharp",RelatedFilesVSCodeTypeScript:"advanced.relatedFilesVSCodeTypeScript",RelatedFilesVSCode:"advanced.relatedFilesVSCode",ContextProviders:"advanced.contextProviders",DebugFilterLogCategories:"advanced.debug.filterLogCategories",DebugSnippyOverrideUrl:"advanced.debug.codeRefOverrideUrl",UseSubsetMatching:"advanced.useSubsetMatching",ContextProviderTimeBudget:"advanced.contextProviderTimeBudget",DebugOverrideCapiUrl:"internal.capiUrl",DebugOverrideCapiUrlLegacy:"advanced.debug.overrideCapiUrl",DebugTestOverrideCapiUrl:"internal.capiTestUrl",DebugTestOverrideCapiUrlLegacy:"advanced.debug.testOverrideCapiUrl",DebugOverrideProxyUrl:"internal.completionsUrl",DebugOverrideProxyUrlLegacy:"advanced.debug.overrideProxyUrl",DebugTestOverrideProxyUrl:"internal.completionsTestUrl",DebugTestOverrideProxyUrlLegacy:"advanced.debug.testOverrideProxyUrl",DebugOverrideEngine:"internal.completionModel",DebugOverrideEngineLegacy:"advanced.debug.overrideEngine",AlwaysRequestMultiline:"internal.alwaysRequestMultiline",ModelAlwaysTerminatesSingleline:"internal.modelAlwaysTerminatesSingleline",UseWorkspaceContextCoordinator:"internal.useWorkspaceContextCoordinator",IncludeNeighboringFiles:"internal.includeNeighboringFiles",ExcludeRelatedFiles:"internal.excludeRelatedFiles",DebugOverrideCppHeadersEnableSwitch:"internal.cppHeadersEnableSwitch",UseSplitContextPrompt:"internal.useSplitContextPrompt"};var UF;(function(t){t.Parsing="parsing",t.Server="server",t.ParsingAndServer="parsingandserver",t.MoreMultiline="moremultiline"})(UF||(Ge.BlockMode=UF={}));function Flr(t){return[UF.Server,UF.ParsingAndServer].includes(t)}var pT;(function(t){t.DEV="dev",t.PROD="prod",t.NIGHTLY="nightly"})(pT||(Ge.BuildType=pT={}));Ge.ICompletionsConfigProvider=(0,qJe.createServiceIdentifier)("ICompletionsConfigProvider");var vN=class{requireReady(){return Promise.resolve()}};Ge.ConfigProvider=vN;var Uce=class extends vN{constructor(){super(...arguments),this.onDidChangeCopilotSettings=()=>({dispose:()=>{}})}getConfig(e){return FJe(e)}getOptionalConfig(e){return jJe(e)}dumpForTelemetry(){return{}}};Ge.DefaultsOnlyConfigProvider=Uce;var qce=class extends vN{constructor(e){super(),this.baseConfigProvider=e,this.copilotEmitter=new qlr.Emitter,this.onDidChangeCopilotSettings=this.copilotEmitter.event,this.overrides=new Map}setOverrides(e){this.overrides=e}clearOverrides(){this.overrides.clear()}getOptionalOverride(e){return this.overrides.get(e)}getConfig(e){return this.getOptionalOverride(e)??this.baseConfigProvider.getConfig(e)}getOptionalConfig(e){return this.getOptionalOverride(e)??this.baseConfigProvider.getOptionalConfig(e)}setConfig(e,r){this.setCopilotSettings({[e]:r})}setCopilotSettings(e){for(let[r,n]of Object.entries(e))n!==void 0?this.overrides.set(r,n):this.overrides.delete(r);this.copilotEmitter.fire(this)}dumpForTelemetry(){let e=this.baseConfigProvider.dumpForTelemetry();for(let r of[Ge.ConfigKey.ShowEditorCompletions,Ge.ConfigKey.EnableAutoCompletions,Ge.ConfigKey.DelayCompletions,Ge.ConfigKey.FilterCompletions]){let n=this.overrides.get(r);n!==void 0&&(e[r]=JSON.stringify(n))}return e}};Ge.InMemoryConfigProvider=qce;function jlr(t,e){let r=t,n=[];for(let o of e.split(".")){let s=[...n,o].join(".");r&&typeof r=="object"&&s in r?(r=r[s],n.length=0):n.push(o)}if(!(r===void 0||n.length>0))return r}function FJe(t){if(Fce.has(t))return Fce.get(t);throw new Error(`Missing config default value: ${Ulr.CopilotConfigPrefix}.${t}`)}function jJe(t){return Fce.get(t)}var Fce=new Map([[Ge.ConfigKey.DebugOverrideCppHeadersEnableSwitch,!1],[Ge.ConfigKey.RelatedFilesVSCodeCSharp,!1],[Ge.ConfigKey.RelatedFilesVSCodeTypeScript,!1],[Ge.ConfigKey.RelatedFilesVSCode,!1],[Ge.ConfigKey.IncludeNeighboringFiles,!1],[Ge.ConfigKey.ExcludeRelatedFiles,!1],[Ge.ConfigKey.ContextProviders,[]],[Ge.ConfigKey.DebugSnippyOverrideUrl,""],[Ge.ConfigKey.UseSubsetMatching,null],[Ge.ConfigKey.ContextProviderTimeBudget,void 0],[Ge.ConfigKey.DebugOverrideCapiUrl,""],[Ge.ConfigKey.DebugTestOverrideCapiUrl,""],[Ge.ConfigKey.DebugOverrideProxyUrl,""],[Ge.ConfigKey.DebugTestOverrideProxyUrl,""],[Ge.ConfigKey.DebugOverrideEngine,""],[Ge.ConfigKey.AlwaysRequestMultiline,void 0],[Ge.ConfigKey.CompletionsDebounce,void 0],[Ge.ConfigKey.CompletionsDelay,void 0],[Ge.ConfigKey.ModelAlwaysTerminatesSingleline,void 0],[Ge.ConfigKey.UseWorkspaceContextCoordinator,void 0],[Ge.ConfigKey.ShowEditorCompletions,void 0],[Ge.ConfigKey.EnableAutoCompletions,void 0],[Ge.ConfigKey.DelayCompletions,void 0],[Ge.ConfigKey.FilterCompletions,void 0],[Ge.ConfigKey.UseSplitContextPrompt,!0],[Ge.ConfigKey.Enable,{"*":!0,plaintext:!1,markdown:!1,scminput:!1}],[Ge.ConfigKey.UserSelectedCompletionModel,""],[Ge.ConfigKey.DebugOverrideEngineLegacy,""],[Ge.ConfigKey.DebugOverrideProxyUrlLegacy,""],[Ge.ConfigKey.DebugTestOverrideProxyUrlLegacy,""],[Ge.ConfigKey.DebugOverrideCapiUrlLegacy,""],[Ge.ConfigKey.DebugTestOverrideCapiUrlLegacy,""],[Ge.ConfigKey.DebugFilterLogCategories,[]]]);function Blr(t,e){return t.get(Ge.ICompletionsConfigProvider).getConfig(e)}function $lr(t){try{return t.get(Ge.ICompletionsConfigProvider).dumpForTelemetry()}catch(e){return console.error(`Error dumping config for telemetry: ${e}`),{}}}var qF=class t{static isPreRelease(){return this.getBuildType()===pT.NIGHTLY}static isProduction(){return this.getBuildType()!==pT.DEV}static getBuildType(){return DF.packageJson.buildType==="prod"?t.getVersion().length===15?pT.NIGHTLY:pT.PROD:pT.DEV}static getVersion(){return DF.packageJson.version}static getBuild(){return DF.packageJson.build}};Ge.BuildInfo=qF;function jce({name:t,version:e}){return`${t}/${e}`}Ge.ICompletionsEditorAndPluginInfo=(0,qJe.createServiceIdentifier)("ICompletionsEditorAndPluginInfo");Ge.apiVersion="2025-05-01";function Vlr(t){let e=t.get(Ge.ICompletionsEditorAndPluginInfo);return{"Editor-Version":jce(e.getEditorInfo()),"Editor-Plugin-Version":jce(e.getEditorPluginInfo()),"Copilot-Language-Server-Version":qF.getVersion()}}});var Bce=m(FF=>{"use strict";Object.defineProperty(FF,"__esModule",{value:!0});FF.ExpServiceTelemetryNames=void 0;var BJe;(function(t){t.featuresTelemetryPropertyName="VSCode.ABExp.Features"})(BJe||(FF.ExpServiceTelemetryNames=BJe={}))});var jF=m(Bw=>{"use strict";Object.defineProperty(Bw,"__esModule",{value:!0});Bw.ExpConfig=Bw.ExpTreatmentVariables=void 0;var Hlr=Ps(),Glr=Bce(),$Je;(function(t){t.CustomEngine="copilotcustomengine",t.CustomEngineTargetEngine="copilotcustomenginetargetengine",t.OverrideBlockMode="copilotoverrideblockmode",t.SuffixPercent="CopilotSuffixPercent",t.CppHeadersEnableSwitch="copilotcppheadersenableswitch",t.UseSubsetMatching="copilotsubsetmatching",t.SuffixMatchThreshold="copilotsuffixmatchthreshold",t.MaxPromptCompletionTokens="maxpromptcompletionTokens",t.StableContextPercent="copilotstablecontextpercent",t.VolatileContextPercent="copilotvolatilecontextpercent",t.RelatedFilesVSCodeCSharp="copilotrelatedfilesvscodecsharp",t.RelatedFilesVSCodeTypeScript="copilotrelatedfilesvscodetypescript",t.RelatedFilesVSCode="copilotrelatedfilesvscode",t.ContextProviders="copilotcontextproviders",t.IncludeNeighboringFiles="copilotincludeneighboringfiles",t.ExcludeRelatedFiles="copilotexcluderelatedfiles",t.ContextProviderTimeBudget="copilotcontextprovidertimebudget",t.CppContextProviderParams="copilotcppContextProviderParams",t.CSharpContextProviderParams="copilotcsharpcontextproviderparams",t.JavaContextProviderParams="copilotjavacontextproviderparams",t.MultiLanguageContextProviderParams="copilotmultilanguagecontextproviderparams",t.TsContextProviderParams="copilottscontextproviderparams",t.CompletionsDebounce="copilotcompletionsdebounce",t.ElectronFetcher="copilotelectronfetcher",t.FetchFetcher="copilotfetchfetcher",t.AsyncCompletionsTimeout="copilotasynccompletionstimeout",t.EnablePromptContextProxyField="copilotenablepromptcontextproxyfield",t.ProgressiveReveal="copilotprogressivereveal",t.ModelAlwaysTerminatesSingleline="copilotmodelterminatesingleline",t.ProgressiveRevealLongLookaheadSize="copilotprogressivereveallonglookaheadsize",t.ProgressiveRevealShortLookaheadSize="copilotprogressiverevealshortlookaheadsize",t.MaxMultilineTokens="copilotmaxmultilinetokens",t.MultilineAfterAcceptLines="copilotmultilineafteracceptlines",t.CompletionsDelay="copilotcompletionsdelay",t.SingleLineUnlessAccepted="copilotsinglelineunlessaccepted"})($Je||(Bw.ExpTreatmentVariables=$Je={}));var $ce=class t{constructor(e,r){this.variables=e,this.features=r}static createFallbackConfig(e,r){return(0,Hlr.telemetryExpProblem)(e,{reason:r}),this.createEmptyConfig()}static createEmptyConfig(){return new t({},"")}addToTelemetry(e){e.properties[Glr.ExpServiceTelemetryNames.featuresTelemetryPropertyName]=this.features}};Bw.ExpConfig=$ce});var Wa=m(BF=>{"use strict";Object.defineProperty(BF,"__esModule",{value:!0});BF.ICompletionsFeaturesService=void 0;var zlr=Qe();BF.ICompletionsFeaturesService=(0,zlr.createServiceIdentifier)("ICompletionsFeaturesService")});var $F=m(f1=>{"use strict";Object.defineProperty(f1,"__esModule",{value:!0});f1.FilterSettings=f1.Release=f1.Filter=void 0;var hT;(function(t){t.ExtensionRelease="X-VSCode-ExtensionRelease",t.CopilotClientTimeBucket="X-Copilot-ClientTimeBucket",t.CopilotEngine="X-Copilot-Engine",t.CopilotOverrideEngine="X-Copilot-OverrideEngine",t.CopilotRepository="X-Copilot-Repository",t.CopilotFileType="X-Copilot-FileType",t.CopilotUserKind="X-Copilot-UserKind",t.CopilotDogfood="X-Copilot-Dogfood",t.CopilotCustomModel="X-Copilot-CustomModel",t.CopilotOrgs="X-Copilot-Orgs",t.CopilotCustomModelNames="X-Copilot-CustomModelNames",t.CopilotTrackingId="X-Copilot-CopilotTrackingId",t.CopilotClientVersion="X-Copilot-ClientVersion",t.CopilotRelatedPluginVersionCppTools="X-Copilot-RelatedPluginVersion-msvscodecpptools",t.CopilotRelatedPluginVersionCMakeTools="X-Copilot-RelatedPluginVersion-msvscodecmaketools",t.CopilotRelatedPluginVersionMakefileTools="X-Copilot-RelatedPluginVersion-msvscodemakefiletools",t.CopilotRelatedPluginVersionCSharpDevKit="X-Copilot-RelatedPluginVersion-msdotnettoolscsdevkit",t.CopilotRelatedPluginVersionPython="X-Copilot-RelatedPluginVersion-mspythonpython",t.CopilotRelatedPluginVersionPylance="X-Copilot-RelatedPluginVersion-mspythonvscodepylance",t.CopilotRelatedPluginVersionJavaPack="X-Copilot-RelatedPluginVersion-vscjavavscodejavapack",t.CopilotRelatedPluginVersionJavaManager="X-Copilot-RelatedPluginVersion-vscjavavscodejavadependency",t.CopilotRelatedPluginVersionTypescript="X-Copilot-RelatedPluginVersion-vscodetypescriptlanguagefeatures",t.CopilotRelatedPluginVersionTypescriptNext="X-Copilot-RelatedPluginVersion-msvscodevscodetypescriptnext",t.CopilotRelatedPluginVersionCSharp="X-Copilot-RelatedPluginVersion-msdotnettoolscsharp",t.CopilotRelatedPluginVersionGithubCopilotChat="X-Copilot-RelatedPluginVersion-githubcopilotchat",t.CopilotRelatedPluginVersionGithubCopilot="X-Copilot-RelatedPluginVersion-githubcopilot"})(hT||(f1.Filter=hT={}));var VJe;(function(t){t.Stable="stable",t.Nightly="nightly"})(VJe||(f1.Release=VJe={}));var Wlr={[hT.CopilotClientTimeBucket]:"timeBucket",[hT.CopilotOverrideEngine]:"engine",[hT.CopilotRepository]:"repo",[hT.CopilotFileType]:"fileType",[hT.CopilotUserKind]:"userKind"},Vce=class{constructor(e){this.filters=e;for(let[r,n]of Object.entries(this.filters))n===""&&delete this.filters[r]}addToTelemetry(e){for(let[r,n]of Object.entries(this.filters)){let o=Wlr[r];o!==void 0&&(e.properties[o]=n)}}toHeaders(){return{...this.filters}}};f1.FilterSettings=Vce});var zl=m(mT=>{"use strict";Object.defineProperty(mT,"__esModule",{value:!0});mT.DebugNameData=void 0;mT.getDebugName=WJe;mT.getClassName=KJe;mT.getFunctionName=YJe;var Hce=class{constructor(e,r,n){this.owner=e,this.debugNameSource=r,this.referenceFn=n}getDebugName(e){return WJe(e,this)}};mT.DebugNameData=Hce;var HJe=new Map,Gce=new WeakMap;function WJe(t,e){let r=Gce.get(t);if(r)return r;let n=Klr(t,e);if(n){let o=HJe.get(n)??0;o++,HJe.set(n,o);let s=o===1?n:`${n}#${o}`;return Gce.set(t,s),s}}function Klr(t,e){let r=Gce.get(t);if(r)return r;let n=e.owner?Qlr(e.owner)+".":"",o,s=e.debugNameSource;if(s!==void 0)if(typeof s=="function"){if(o=s(),o!==void 0)return n+o}else return n+s;let a=e.referenceFn;if(a!==void 0&&(o=YJe(a),o!==void 0))return n+o;if(e.owner!==void 0){let c=Ylr(e.owner,t);if(c!==void 0)return n+c}}function Ylr(t,e){for(let r in t)if(t[r]===e)return r}var GJe=new Map,zJe=new WeakMap;function Qlr(t){let e=zJe.get(t);if(e)return e;let r=KJe(t)??"Object",n=GJe.get(r)??0;n++,GJe.set(r,n);let o=n===1?r:`${r}#${n}`;return zJe.set(t,o),o}function KJe(t){let e=t.constructor;if(e)return e.name==="Object"?void 0:e.name}function YJe(t){let e=t.toString(),n=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(e);return(n?n[1]:void 0)?.trim()}});var ZJe=m(Rs=>{"use strict";var Zlr=Rs&&Rs.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),Jlr=Rs&&Rs.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),Xlr=Rs&&Rs.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),o=0;o<n.length;o++)n[o]!=="default"&&Zlr(r,e,n[o]);return Jlr(r,e),r}})();Object.defineProperty(Rs,"__esModule",{value:!0});Rs.strictEquals=void 0;Rs.itemsEquals=rur;Rs.jsonStringifyEquals=nur;Rs.itemEquals=iur;Rs.equalsIfDefined=our;Rs.structuralEquals=zce;Rs.getStructuralKey=sur;var eur=Xlr(Ui()),tur=(t,e)=>t===e;Rs.strictEquals=tur;function rur(t=Rs.strictEquals){return(e,r)=>eur.equals(e,r,t)}function nur(){return(t,e)=>JSON.stringify(t)===JSON.stringify(e)}function iur(){return(t,e)=>t.equals(e)}function our(t,e,r){if(r!==void 0){let n=t;return n==null||e===void 0||e===null?e===n:r(n,e)}else{let n=t;return(o,s)=>o==null||s===void 0||s===null?s===o:n(o,s)}}function zce(t,e){if(t===e)return!0;if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(!zce(t[r],e[r]))return!1;return!0}if(t&&typeof t=="object"&&e&&typeof e=="object"&&Object.getPrototypeOf(t)===Object.prototype&&Object.getPrototypeOf(e)===Object.prototype){let r=t,n=e,o=Object.keys(r),s=Object.keys(n),a=new Set(s);if(o.length!==s.length)return!1;for(let c of o)if(!a.has(c)||!zce(r[c],n[c]))return!1;return!0}return!1}function sur(t){return JSON.stringify(Wce(t))}var aur=0,QJe=new WeakMap;function Wce(t){if(Array.isArray(t))return t.map(Wce);if(t&&typeof t=="object")if(Object.getPrototypeOf(t)===Object.prototype){let e=t,r=Object.create(null);for(let n of Object.keys(e).sort())r[n]=Wce(e[n]);return r}else{let e=QJe.get(t);return e===void 0&&(e=aur++,QJe.set(t,e)),e+"----2b76a038c20c4bcc"}return t}});var Ka=m(Gi=>{"use strict";Object.defineProperty(Gi,"__esModule",{value:!0});Gi.trackDisposable=Gi.toDisposable=Gi.markAsDisposed=Gi.DisposableStore=Gi.Event=Gi.onUnexpectedError=Gi.onBugIndicatingError=Gi.BugIndicatingError=Gi.strictEquals=Gi.assertFn=void 0;var cur=qi();Object.defineProperty(Gi,"assertFn",{enumerable:!0,get:function(){return cur.assertFn}});var lur=ZJe();Object.defineProperty(Gi,"strictEquals",{enumerable:!0,get:function(){return lur.strictEquals}});var Kce=Gr();Object.defineProperty(Gi,"BugIndicatingError",{enumerable:!0,get:function(){return Kce.BugIndicatingError}});Object.defineProperty(Gi,"onBugIndicatingError",{enumerable:!0,get:function(){return Kce.onBugIndicatingError}});Object.defineProperty(Gi,"onUnexpectedError",{enumerable:!0,get:function(){return Kce.onUnexpectedError}});var uur=Fi();Object.defineProperty(Gi,"Event",{enumerable:!0,get:function(){return uur.Event}});var VF=Ar();Object.defineProperty(Gi,"DisposableStore",{enumerable:!0,get:function(){return VF.DisposableStore}});Object.defineProperty(Gi,"markAsDisposed",{enumerable:!0,get:function(){return VF.markAsDisposed}});Object.defineProperty(Gi,"toDisposable",{enumerable:!0,get:function(){return VF.toDisposable}});Object.defineProperty(Gi,"trackDisposable",{enumerable:!0,get:function(){return VF.trackDisposable}})});var JJe=m(Yce=>{"use strict";Object.defineProperty(Yce,"__esModule",{value:!0});Yce.handleBugIndicatingErrorRecovery=fur;var dur=Ka();function fur(t){let e=new Error("BugIndicatingErrorRecovery: "+t);(0,dur.onUnexpectedError)(e),console.error("recovered from an error that indicates a bug",e)}});var ep=m($w=>{"use strict";Object.defineProperty($w,"__esModule",{value:!0});$w.addLogger=pur;$w.getLogger=hur;$w.setLogObservableFn=mur;$w.logObservable=gur;var gT;function pur(t){gT?gT instanceof HF?gT.loggers.push(t):gT=new HF([gT,t]):gT=t}function hur(){return gT}var Qce;function mur(t){Qce=t}function gur(t){Qce&&Qce(t)}var HF=class{constructor(e){this.loggers=e}handleObservableCreated(e,r){for(let n of this.loggers)n.handleObservableCreated(e,r)}handleOnListenerCountChanged(e,r){for(let n of this.loggers)n.handleOnListenerCountChanged(e,r)}handleObservableUpdated(e,r){for(let n of this.loggers)n.handleObservableUpdated(e,r)}handleAutorunCreated(e,r){for(let n of this.loggers)n.handleAutorunCreated(e,r)}handleAutorunDisposed(e){for(let r of this.loggers)r.handleAutorunDisposed(e)}handleAutorunDependencyChanged(e,r,n){for(let o of this.loggers)o.handleAutorunDependencyChanged(e,r,n)}handleAutorunStarted(e){for(let r of this.loggers)r.handleAutorunStarted(e)}handleAutorunFinished(e){for(let r of this.loggers)r.handleAutorunFinished(e)}handleDerivedDependencyChanged(e,r,n){for(let o of this.loggers)o.handleDerivedDependencyChanged(e,r,n)}handleDerivedCleared(e){for(let r of this.loggers)r.handleDerivedCleared(e)}handleBeginTransaction(e){for(let r of this.loggers)r.handleBeginTransaction(e)}handleEndTransaction(e){for(let r of this.loggers)r.handleEndTransaction(e)}}});var lm=m(p1=>{"use strict";Object.defineProperty(p1,"__esModule",{value:!0});p1.TransactionImpl=void 0;p1.transaction=Zce;p1.globalTransaction=vur;p1.asyncTransaction=yur;p1.subtransaction=Eur;var XJe=JJe(),_ur=zl(),eXe=ep();function Zce(t,e){let r=new Vw(t,e);try{t(r)}finally{r.finish()}}var GF;function vur(t){if(GF)t(GF);else{let e=new Vw(t,void 0);GF=e;try{t(e)}finally{e.finish(),GF=void 0}}}async function yur(t,e){let r=new Vw(t,e);try{await t(r)}finally{r.finish()}}function Eur(t,e,r){t?e(t):Zce(e,r)}var Vw=class{constructor(e,r){this._fn=e,this._getDebugName=r,this._updatingObservers=[],(0,eXe.getLogger)()?.handleBeginTransaction(this)}getDebugName(){return this._getDebugName?this._getDebugName():(0,_ur.getFunctionName)(this._fn)}updateObserver(e,r){if(!this._updatingObservers){(0,XJe.handleBugIndicatingErrorRecovery)("Transaction already finished!"),Zce(n=>{n.updateObserver(e,r)});return}this._updatingObservers.push({observer:e,observable:r}),e.beginUpdate(r)}finish(){let e=this._updatingObservers;if(!e){(0,XJe.handleBugIndicatingErrorRecovery)("transaction.finish() has already been called!");return}for(let r=0;r<e.length;r++){let{observer:n,observable:o}=e[r];n.endUpdate(o)}this._updatingObservers=null,(0,eXe.getLogger)()?.handleEndTransaction(this)}debugGetUpdatingObservers(){return this._updatingObservers}};p1.TransactionImpl=Vw});var Wu=m(zF=>{"use strict";Object.defineProperty(zF,"__esModule",{value:!0});zF.DebugLocation=void 0;var tXe;(function(t){let e=!1;function r(){e=!0}t.enable=r;function n(){if(!e)return;let o=Error,s=o.stackTraceLimit;o.stackTraceLimit=3;let a=new Error().stack;return o.stackTraceLimit=s,Jce.fromStack(a,2)}t.ofCaller=n})(tXe||(zF.DebugLocation=tXe={}));var Jce=class t{static fromStack(e,r){let n=e.split(`
`),o=Tur(n[r+1]);if(o)return new t(o.fileName,o.line,o.column,o.id)}constructor(e,r,n,o){this.fileName=e,this.line=r,this.column=n,this.id=o}};function Tur(t){let e=t.match(/\((.*):(\d+):(\d+)\)/);if(e)return{fileName:e[1],line:parseInt(e[2]),column:parseInt(e[3]),id:t};let r=t.match(/at ([^\(\)]*):(\d+):(\d+)/);if(r)return{fileName:r[1],line:parseInt(r[2]),column:parseInt(r[3]),id:t}}});var Jd=m(tp=>{"use strict";Object.defineProperty(tp,"__esModule",{value:!0});tp.BaseObservable=tp.ConvenientObservable=void 0;tp._setDerivedOpts=bur;tp._setRecomputeInitiallyAndOnChange=Cur;tp._setKeepObserved=Aur;tp._setDebugGetDependencyGraph=xur;var rXe=Wu(),Sur=zl(),Hw=ep(),Xce;function bur(t){Xce=t}var nXe;function Cur(t){nXe=t}var iXe;function Aur(t){iXe=t}var oXe;function xur(t){oXe=t}var WF=class{get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,r,n=rXe.DebugLocation.ofCaller()){let o=r===void 0?void 0:e,s=r===void 0?e:r;return Xce({owner:o,debugName:()=>{let a=(0,Sur.getFunctionName)(s);if(a!==void 0)return a;let l=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(s.toString());if(l)return`${this.debugName}.${l[2]}`;if(!o)return`${this.debugName} (mapped)`},debugReferenceFn:s},a=>s(this.read(a),a),n)}flatten(){return Xce({owner:void 0,debugName:()=>`${this.debugName} (flattened)`},e=>this.read(e).read(e))}recomputeInitiallyAndOnChange(e,r){return e.add(nXe(this,r)),this}keepObserved(e){return e.add(iXe(this)),this}get debugValue(){return this.get()}debugGetDependencyGraph(){return oXe(this)}};tp.ConvenientObservable=WF;var ele=class extends WF{constructor(e){super(),this._observers=new Set,(0,Hw.getLogger)()?.handleObservableCreated(this,e)}addObserver(e){let r=this._observers.size;this._observers.add(e),r===0&&this.onFirstObserverAdded(),r!==this._observers.size&&(0,Hw.getLogger)()?.handleOnListenerCountChanged(this,this._observers.size)}removeObserver(e){let r=this._observers.delete(e);r&&this._observers.size===0&&this.onLastObserverRemoved(),r&&(0,Hw.getLogger)()?.handleOnListenerCountChanged(this,this._observers.size)}onFirstObserverAdded(){}onLastObserverRemoved(){}log(){let e=!!(0,Hw.getLogger)();return(0,Hw.logObservable)(this),e||(0,Hw.getLogger)()?.handleObservableCreated(this,rXe.DebugLocation.ofCaller()),this}debugGetObservers(){return this._observers}};tp.BaseObservable=ele});var m1=m(h1=>{"use strict";Object.defineProperty(h1,"__esModule",{value:!0});h1.DisposableObservableValue=h1.ObservableValue=void 0;h1.observableValue=Pur;h1.disposableObservableValue=Rur;var wur=lm(),Iur=Jd(),aXe=Ka(),KF=zl(),sXe=ep(),cXe=Wu();function Pur(t,e,r=cXe.DebugLocation.ofCaller()){let n;return typeof t=="string"?n=new KF.DebugNameData(void 0,t,void 0):n=new KF.DebugNameData(t,void 0,void 0),new yN(n,e,aXe.strictEquals,r)}var yN=class extends Iur.BaseObservable{get debugName(){return this._debugNameData.getDebugName(this)??"ObservableValue"}constructor(e,r,n,o){super(o),this._debugNameData=e,this._equalityComparator=n,this._value=r,(0,sXe.getLogger)()?.handleObservableUpdated(this,{hadValue:!1,newValue:r,change:void 0,didChange:!0,oldValue:void 0})}get(){return this._value}set(e,r,n){if(n===void 0&&this._equalityComparator(this._value,e))return;let o;r||(r=o=new wur.TransactionImpl(()=>{},()=>`Setting ${this.debugName}`));try{let s=this._value;this._setValue(e),(0,sXe.getLogger)()?.handleObservableUpdated(this,{oldValue:s,newValue:e,change:n,didChange:!0,hadValue:!0});for(let a of this._observers)r.updateObserver(a,this),a.handleChange(this,n)}finally{o&&o.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(e){this._value=e}debugGetState(){return{value:this._value}}debugSetValue(e){this._value=e}};h1.ObservableValue=yN;function Rur(t,e,r=cXe.DebugLocation.ofCaller()){let n;return typeof t=="string"?n=new KF.DebugNameData(void 0,t,void 0):n=new KF.DebugNameData(t,void 0,void 0),new YF(n,e,aXe.strictEquals,r)}var YF=class extends yN{_setValue(e){this._value!==e&&(this._value&&this._value.dispose(),this._value=e)}dispose(){this._value?.dispose()}};h1.DisposableObservableValue=YF});var uXe=m(QF=>{"use strict";Object.defineProperty(QF,"__esModule",{value:!0});QF.LazyObservableValue=void 0;var Our=lm(),lXe=ep(),Mur=Jd(),tle=class extends Mur.BaseObservable{get debugName(){return this._debugNameData.getDebugName(this)??"LazyObservableValue"}constructor(e,r,n,o){super(o),this._debugNameData=e,this._equalityComparator=n,this._isUpToDate=!0,this._deltas=[],this._updateCounter=0,this._value=r}get(){return this._update(),this._value}_update(){if(!this._isUpToDate)if(this._isUpToDate=!0,this._deltas.length>0){for(let e of this._deltas){(0,lXe.getLogger)()?.handleObservableUpdated(this,{change:e,didChange:!0,oldValue:"(unknown)",newValue:this._value,hadValue:!0});for(let r of this._observers)r.handleChange(this,e)}this._deltas.length=0}else{(0,lXe.getLogger)()?.handleObservableUpdated(this,{change:void 0,didChange:!0,oldValue:"(unknown)",newValue:this._value,hadValue:!0});for(let e of this._observers)e.handleChange(this,void 0)}}_beginUpdate(){if(this._updateCounter++,this._updateCounter===1)for(let e of this._observers)e.beginUpdate(this)}_endUpdate(){if(this._updateCounter--,this._updateCounter===0){this._update();let e=[...this._observers];for(let r of e)r.endUpdate(this)}}addObserver(e){let r=!this._observers.has(e)&&this._updateCounter>0;super.addObserver(e),r&&e.beginUpdate(this)}removeObserver(e){let r=this._observers.has(e)&&this._updateCounter>0;super.removeObserver(e),r&&e.endUpdate(this)}set(e,r,n){if(n===void 0&&this._equalityComparator(this._value,e))return;let o;r||(r=o=new Our.TransactionImpl(()=>{},()=>`Setting ${this.debugName}`));try{if(this._isUpToDate=!1,this._setValue(e),n!==void 0&&this._deltas.push(n),r.updateObserver({beginUpdate:()=>this._beginUpdate(),endUpdate:()=>this._endUpdate(),handleChange:(s,a)=>{},handlePossibleChange:s=>{}},this),this._updateCounter>1)for(let s of this._observers)s.handlePossibleChange(this)}finally{o&&o.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(e){this._value=e}};QF.LazyObservableValue=tle});var ZF=m(rle=>{"use strict";Object.defineProperty(rle,"__esModule",{value:!0});rle.observableValueOpts=Dur;var dXe=zl(),fXe=Ka(),Nur=m1(),Lur=uXe(),kur=Wu();function Dur(t,e,r=kur.DebugLocation.ofCaller()){return t.lazy?new Lur.LazyObservableValue(new dXe.DebugNameData(t.owner,t.debugName,void 0),e,t.equalsFn??fXe.strictEquals,r):new Nur.ObservableValue(new dXe.DebugNameData(t.owner,t.debugName,void 0),e,t.equalsFn??fXe.strictEquals,r)}});var XF=m(JF=>{"use strict";Object.defineProperty(JF,"__esModule",{value:!0});JF.AutorunObserver=void 0;var rp=Ka(),EN=ep();function Uur(t){switch(t){case 1:return"dependenciesMightHaveChanged";case 2:return"stale";case 3:return"upToDate";default:return"<unknown>"}}var nle=class{get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}constructor(e,r,n,o){this._debugNameData=e,this._runFn=r,this._changeTracker=n,this._state=2,this._updateCount=0,this._disposed=!1,this._dependencies=new Set,this._dependenciesToBeRemoved=new Set,this._isRunning=!1,this._store=void 0,this._delayedStore=void 0,this._changeSummary=this._changeTracker?.createChangeSummary(void 0),(0,EN.getLogger)()?.handleAutorunCreated(this,o),this._run(),(0,rp.trackDisposable)(this)}dispose(){if(!this._disposed){this._disposed=!0;for(let e of this._dependencies)e.removeObserver(this);this._dependencies.clear(),this._store!==void 0&&this._store.dispose(),this._delayedStore!==void 0&&this._delayedStore.dispose(),(0,EN.getLogger)()?.handleAutorunDisposed(this),(0,rp.markAsDisposed)(this)}}_run(){let e=this._dependenciesToBeRemoved;this._dependenciesToBeRemoved=this._dependencies,this._dependencies=e,this._state=3;try{if(!this._disposed){(0,EN.getLogger)()?.handleAutorunStarted(this);let r=this._changeSummary,n=this._delayedStore;n!==void 0&&(this._delayedStore=void 0);try{this._isRunning=!0,this._changeTracker&&(this._changeTracker.beforeUpdate?.(this,r),this._changeSummary=this._changeTracker.createChangeSummary(r)),this._store!==void 0&&(this._store.dispose(),this._store=void 0),this._runFn(this,r)}catch(o){(0,rp.onBugIndicatingError)(o)}finally{this._isRunning=!1,n!==void 0&&n.dispose()}}}finally{this._disposed||(0,EN.getLogger)()?.handleAutorunFinished(this);for(let r of this._dependenciesToBeRemoved)r.removeObserver(this);this._dependenciesToBeRemoved.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(e){this._state===3&&(this._state=1),this._updateCount++}endUpdate(e){try{if(this._updateCount===1)do{if(this._state===1){this._state=3;for(let r of this._dependencies)if(r.reportChanges(),this._state===2)break}this._state!==3&&this._run()}while(this._state!==3)}finally{this._updateCount--}(0,rp.assertFn)(()=>this._updateCount>=0)}handlePossibleChange(e){this._state===3&&this._isDependency(e)&&(this._state=1)}handleChange(e,r){if(this._isDependency(e)){(0,EN.getLogger)()?.handleAutorunDependencyChanged(this,e,r);try{(this._changeTracker?this._changeTracker.handleChange({changedObservable:e,change:r,didChange:o=>o===e},this._changeSummary):!0)&&(this._state=2)}catch(n){(0,rp.onBugIndicatingError)(n)}}}_isDependency(e){return this._dependencies.has(e)&&!this._dependenciesToBeRemoved.has(e)}_ensureNoRunning(){if(!this._isRunning)throw new rp.BugIndicatingError("The reader object cannot be used outside its compute function!")}readObservable(e){if(this._ensureNoRunning(),this._disposed)return e.get();e.addObserver(this);let r=e.get();return this._dependencies.add(e),this._dependenciesToBeRemoved.delete(e),r}get store(){if(this._ensureNoRunning(),this._disposed)throw new rp.BugIndicatingError("Cannot access store after dispose");return this._store===void 0&&(this._store=new rp.DisposableStore),this._store}get delayedStore(){if(this._ensureNoRunning(),this._disposed)throw new rp.BugIndicatingError("Cannot access store after dispose");return this._delayedStore===void 0&&(this._delayedStore=new rp.DisposableStore),this._delayedStore}debugGetState(){return{isRunning:this._isRunning,updateCount:this._updateCount,dependencies:this._dependencies,state:this._state,stateStr:Uur(this._state)}}debugRerun(){this._isRunning?this._state=2:this._run()}};JF.AutorunObserver=nle});var Gw=m(np=>{"use strict";Object.defineProperty(np,"__esModule",{value:!0});np.autorun=pXe;np.autorunOpts=rj;np.autorunHandleChanges=hXe;np.autorunWithStoreHandleChanges=qur;np.autorunWithStore=Fur;np.autorunDelta=jur;np.autorunIterableDelta=Bur;np.autorunSelfDisposable=$ur;var ej=Ka(),ile=zl(),ole=XF(),tj=Wu();function pXe(t,e=tj.DebugLocation.ofCaller()){return new ole.AutorunObserver(new ile.DebugNameData(void 0,void 0,t),t,void 0,e)}function rj(t,e,r=tj.DebugLocation.ofCaller()){return new ole.AutorunObserver(new ile.DebugNameData(t.owner,t.debugName,t.debugReferenceFn??e),e,void 0,r)}function hXe(t,e,r=tj.DebugLocation.ofCaller()){return new ole.AutorunObserver(new ile.DebugNameData(t.owner,t.debugName,t.debugReferenceFn??e),e,t.changeTracker,r)}function qur(t,e){let r=new ej.DisposableStore,n=hXe({owner:t.owner,debugName:t.debugName,debugReferenceFn:t.debugReferenceFn??e,changeTracker:t.changeTracker},(o,s)=>{r.clear(),e(o,s,r)});return(0,ej.toDisposable)(()=>{n.dispose(),r.dispose()})}function Fur(t){let e=new ej.DisposableStore,r=rj({owner:void 0,debugName:void 0,debugReferenceFn:t},n=>{e.clear(),t(n,e)});return(0,ej.toDisposable)(()=>{r.dispose(),e.dispose()})}function jur(t,e){let r;return rj({debugReferenceFn:e},n=>{let o=t.read(n),s=r;r=o,e({lastValue:s,newValue:o})})}function Bur(t,e,r=n=>n){let n=new Map;return rj({debugReferenceFn:t},o=>{let s=new Map,a=new Map(n);for(let c of t(o)){let l=r(c);n.has(l)?a.delete(l):(s.set(l,c),n.set(l,c))}for(let c of a.keys())n.delete(c);(s.size||a.size)&&e({addedValues:[...s.values()],removedValues:[...a.values()]})})}function $ur(t,e=tj.DebugLocation.ofCaller()){let r,n=!1;return r=pXe(o=>{t({delayedStore:o.delayedStore,store:o.store,readObservable:o.readObservable.bind(o),dispose:()=>{r?.dispose(),n=!0}})},e),n&&r.dispose(),r}});var Ww=m(zw=>{"use strict";Object.defineProperty(zw,"__esModule",{value:!0});zw.DerivedWithSetter=zw.Derived=void 0;var Vur=Jd(),_T=Ka(),sle=ep();function Hur(t){switch(t){case 0:return"initial";case 1:return"dependenciesMightHaveChanged";case 2:return"stale";case 3:return"upToDate";default:return"<unknown>"}}var nj=class extends Vur.BaseObservable{get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}constructor(e,r,n,o=void 0,s,a){super(a),this._debugNameData=e,this._computeFn=r,this._changeTracker=n,this._handleLastObserverRemoved=o,this._equalityComparator=s,this._state=0,this._value=void 0,this._updateCount=0,this._dependencies=new Set,this._dependenciesToBeRemoved=new Set,this._changeSummary=void 0,this._isUpdating=!1,this._isComputing=!1,this._didReportChange=!1,this._isInBeforeUpdate=!1,this._isReaderValid=!1,this._store=void 0,this._delayedStore=void 0,this._removedObserverToCallEndUpdateOn=null,this._changeSummary=this._changeTracker?.createChangeSummary(void 0)}onLastObserverRemoved(){this._state=0,this._value=void 0,(0,sle.getLogger)()?.handleDerivedCleared(this);for(let e of this._dependencies)e.removeObserver(this);this._dependencies.clear(),this._store!==void 0&&(this._store.dispose(),this._store=void 0),this._delayedStore!==void 0&&(this._delayedStore.dispose(),this._delayedStore=void 0),this._handleLastObserverRemoved?.()}get(){if(this._isComputing,this._observers.size===0){let r;try{this._isReaderValid=!0;let n;this._changeTracker&&(n=this._changeTracker.createChangeSummary(void 0),this._changeTracker.beforeUpdate?.(this,n)),r=this._computeFn(this,n)}finally{this._isReaderValid=!1}return this.onLastObserverRemoved(),r}else{do{if(this._state===1){for(let r of this._dependencies)if(r.reportChanges(),this._state===2)break}this._state===1&&(this._state=3),this._state!==3&&this._recompute()}while(this._state!==3);return this._value}}_recompute(){let e=!1;this._isComputing=!0,this._didReportChange=!1;let r=this._dependenciesToBeRemoved;this._dependenciesToBeRemoved=this._dependencies,this._dependencies=r;try{let n=this._changeSummary;this._isReaderValid=!0,this._changeTracker&&(this._isInBeforeUpdate=!0,this._changeTracker.beforeUpdate?.(this,n),this._isInBeforeUpdate=!1,this._changeSummary=this._changeTracker?.createChangeSummary(n));let o=this._state!==0,s=this._value;this._state=3;let a=this._delayedStore;a!==void 0&&(this._delayedStore=void 0);try{this._store!==void 0&&(this._store.dispose(),this._store=void 0),this._value=this._computeFn(this,n)}finally{this._isReaderValid=!1;for(let c of this._dependenciesToBeRemoved)c.removeObserver(this);this._dependenciesToBeRemoved.clear(),a!==void 0&&a.dispose()}e=this._didReportChange||o&&!this._equalityComparator(s,this._value),(0,sle.getLogger)()?.handleObservableUpdated(this,{oldValue:s,newValue:this._value,change:void 0,didChange:e,hadValue:o})}catch(n){(0,_T.onBugIndicatingError)(n)}if(this._isComputing=!1,!this._didReportChange&&e)for(let n of this._observers)n.handleChange(this,void 0);else this._didReportChange=!1}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(e){if(this._isUpdating)throw new _T.BugIndicatingError("Cyclic deriveds are not supported yet!");this._updateCount++,this._isUpdating=!0;try{let r=this._updateCount===1;if(this._state===3&&(this._state=1,!r))for(let n of this._observers)n.handlePossibleChange(this);if(r)for(let n of this._observers)n.beginUpdate(this)}finally{this._isUpdating=!1}}endUpdate(e){if(this._updateCount--,this._updateCount===0){let r=[...this._observers];for(let n of r)n.endUpdate(this);if(this._removedObserverToCallEndUpdateOn){let n=[...this._removedObserverToCallEndUpdateOn];this._removedObserverToCallEndUpdateOn=null;for(let o of n)o.endUpdate(this)}}(0,_T.assertFn)(()=>this._updateCount>=0)}handlePossibleChange(e){if(this._state===3&&this._dependencies.has(e)&&!this._dependenciesToBeRemoved.has(e)){this._state=1;for(let r of this._observers)r.handlePossibleChange(this)}}handleChange(e,r){if(this._dependencies.has(e)&&!this._dependenciesToBeRemoved.has(e)||this._isInBeforeUpdate){(0,sle.getLogger)()?.handleDerivedDependencyChanged(this,e,r);let n=!1;try{n=this._changeTracker?this._changeTracker.handleChange({changedObservable:e,change:r,didChange:s=>s===e},this._changeSummary):!0}catch(s){(0,_T.onBugIndicatingError)(s)}let o=this._state===3;if(n&&(this._state===1||o)&&(this._state=2,o))for(let s of this._observers)s.handlePossibleChange(this)}}_ensureReaderValid(){if(!this._isReaderValid)throw new _T.BugIndicatingError("The reader object cannot be used outside its compute function!")}readObservable(e){this._ensureReaderValid(),e.addObserver(this);let r=e.get();return this._dependencies.add(e),this._dependenciesToBeRemoved.delete(e),r}reportChange(e){this._ensureReaderValid(),this._didReportChange=!0;for(let r of this._observers)r.handleChange(this,e)}get store(){return this._ensureReaderValid(),this._store===void 0&&(this._store=new _T.DisposableStore),this._store}get delayedStore(){return this._ensureReaderValid(),this._delayedStore===void 0&&(this._delayedStore=new _T.DisposableStore),this._delayedStore}addObserver(e){let r=!this._observers.has(e)&&this._updateCount>0;super.addObserver(e),r&&(this._removedObserverToCallEndUpdateOn&&this._removedObserverToCallEndUpdateOn.has(e)?this._removedObserverToCallEndUpdateOn.delete(e):e.beginUpdate(this))}removeObserver(e){this._observers.has(e)&&this._updateCount>0&&(this._removedObserverToCallEndUpdateOn||(this._removedObserverToCallEndUpdateOn=new Set),this._removedObserverToCallEndUpdateOn.add(e)),super.removeObserver(e)}debugGetState(){return{state:this._state,stateStr:Hur(this._state),updateCount:this._updateCount,isComputing:this._isComputing,dependencies:this._dependencies,value:this._value}}debugSetValue(e){this._value=e}debugRecompute(){this._isComputing?this._state=2:this._recompute()}setValue(e,r,n){this._value=e;let o=this._observers;r.updateObserver(this,this);for(let s of o)s.handleChange(this,n)}};zw.Derived=nj;var ale=class extends nj{constructor(e,r,n,o=void 0,s,a,c){super(e,r,n,o,s,c),this.set=a}};zw.DerivedWithSetter=ale});var ij=m(g1=>{"use strict";Object.defineProperty(g1,"__esModule",{value:!0});g1.derived=zur;g1.derivedWithSetter=Wur;g1.derivedOpts=mXe;g1.derivedHandleChanges=Kur;g1.derivedWithStore=Yur;g1.derivedDisposable=Qur;var ip=Ka(),Kw=Wu(),vT=zl(),Gur=Jd(),yT=Ww();function zur(t,e,r=Kw.DebugLocation.ofCaller()){return e!==void 0?new yT.Derived(new vT.DebugNameData(t,void 0,e),e,void 0,void 0,ip.strictEquals,r):new yT.Derived(new vT.DebugNameData(void 0,void 0,t),t,void 0,void 0,ip.strictEquals,r)}function Wur(t,e,r,n=Kw.DebugLocation.ofCaller()){return new yT.DerivedWithSetter(new vT.DebugNameData(t,void 0,e),e,void 0,void 0,ip.strictEquals,r,n)}function mXe(t,e,r=Kw.DebugLocation.ofCaller()){return new yT.Derived(new vT.DebugNameData(t.owner,t.debugName,t.debugReferenceFn),e,void 0,t.onLastObserverRemoved,t.equalsFn??ip.strictEquals,r)}(0,Gur._setDerivedOpts)(mXe);function Kur(t,e,r=Kw.DebugLocation.ofCaller()){return new yT.Derived(new vT.DebugNameData(t.owner,t.debugName,void 0),e,t.changeTracker,void 0,t.equalityComparer??ip.strictEquals,r)}function Yur(t,e,r=Kw.DebugLocation.ofCaller()){let n,o;e===void 0?(n=t,o=void 0):(o=t,n=e);let s=new ip.DisposableStore;return new yT.Derived(new vT.DebugNameData(o,void 0,n),a=>(s.isDisposed?s=new ip.DisposableStore:s.clear(),n(a,s)),void 0,()=>s.dispose(),ip.strictEquals,r)}function Qur(t,e,r=Kw.DebugLocation.ofCaller()){let n,o;e===void 0?(n=t,o=void 0):(o=t,n=e);let s;return new yT.Derived(new vT.DebugNameData(o,void 0,n),a=>{s?s.clear():s=new ip.DisposableStore;let c=n(a);return c&&s.add(c),c},void 0,()=>{s&&(s.dispose(),s=void 0)},ip.strictEquals,r)}});var yXe=m(op=>{"use strict";Object.defineProperty(op,"__esModule",{value:!0});op.ObservableLazyPromise=op.PromiseResult=op.ObservablePromise=op.ObservableLazy=void 0;var gXe=lm(),_Xe=ij(),vXe=m1(),oj=class{get cachedValue(){return this._value}constructor(e){this._computeValue=e,this._value=(0,vXe.observableValue)(this,void 0)}getValue(){let e=this._value.get();return e||(e=this._computeValue(),this._value.set(e,void 0)),e}};op.ObservableLazy=oj;var sj=class t{static fromFn(e){return new t(e())}static resolved(e){return new t(Promise.resolve(e))}constructor(e){this._value=(0,vXe.observableValue)(this,void 0),this.promiseResult=this._value,this.resolvedValue=(0,_Xe.derived)(this,r=>{let n=this.promiseResult.read(r);if(n)return n.getDataOrThrow()}),this.promise=e.then(r=>((0,gXe.transaction)(n=>{this._value.set(new TN(r,void 0),n)}),r),r=>{throw(0,gXe.transaction)(n=>{this._value.set(new TN(void 0,r),n)}),r})}};op.ObservablePromise=sj;var TN=class{constructor(e,r){this.data=e,this.error=r}getDataOrThrow(){if(this.error)throw this.error;return this.data}};op.PromiseResult=TN;var cle=class{constructor(e){this._computePromise=e,this._lazyValue=new oj(()=>new sj(this._computePromise())),this.cachedPromiseResult=(0,_Xe.derived)(this,r=>this._lazyValue.cachedValue.read(r)?.promiseResult.read(r))}getPromise(){return this._lazyValue.getValue().promise}};op.ObservableLazyPromise=cle});var ule=m(sp=>{"use strict";Object.defineProperty(sp,"__esModule",{value:!0});sp.cancelOnDispose=sp.CancellationTokenSource=sp.CancellationToken=sp.CancellationError=void 0;var Zur=Gr();Object.defineProperty(sp,"CancellationError",{enumerable:!0,get:function(){return Zur.CancellationError}});var lle=Oh();Object.defineProperty(sp,"CancellationToken",{enumerable:!0,get:function(){return lle.CancellationToken}});Object.defineProperty(sp,"CancellationTokenSource",{enumerable:!0,get:function(){return lle.CancellationTokenSource}});Object.defineProperty(sp,"cancelOnDispose",{enumerable:!0,get:function(){return lle.cancelOnDispose}})});var EXe=m(aj=>{"use strict";Object.defineProperty(aj,"__esModule",{value:!0});aj.waitForState=ndr;aj.derivedWithCancellationToken=idr;var Jur=zl(),dle=ule(),Xur=Ka(),edr=Gw(),tdr=Ww(),rdr=Wu();function ndr(t,e,r,n){return e||(e=o=>o!=null),new Promise((o,s)=>{let a=!0,c=!1,l=t.map(d=>({isFinished:e(d),error:r?r(d):!1,state:d})),u=(0,edr.autorun)(d=>{let{isFinished:f,error:p,state:h}=l.read(d);(f||p)&&(a?c=!0:u.dispose(),p?s(p===!0?h:p):o(h))});if(n){let d=n.onCancellationRequested(()=>{u.dispose(),d.dispose(),s(new dle.CancellationError)});if(n.isCancellationRequested){u.dispose(),d.dispose(),s(new dle.CancellationError);return}}a=!1,c&&u.dispose()})}function idr(t,e){let r,n;e===void 0?(r=t,n=void 0):(n=t,r=e);let o;return new tdr.Derived(new Jur.DebugNameData(n,void 0,r),s=>(o&&o.dispose(!0),o=new dle.CancellationTokenSource,r(s,o.token)),void 0,()=>o?.dispose(),Xur.strictEquals,rdr.DebugLocation.ofCaller())}});var _1=m(ET=>{"use strict";Object.defineProperty(ET,"__esModule",{value:!0});ET.FromEventObservable=void 0;ET.observableFromEvent=fle;ET.observableFromEventOpts=adr;var odr=lm(),SXe=Ka(),bXe=zl(),TXe=ep(),sdr=Jd(),CXe=Wu();function fle(...t){let e,r,n,o;return t.length===2?[r,n]=t:[e,r,n,o]=t,new Xd(new bXe.DebugNameData(e,void 0,n),r,n,()=>Xd.globalTransaction,SXe.strictEquals,o??CXe.DebugLocation.ofCaller())}function adr(t,e,r,n=CXe.DebugLocation.ofCaller()){return new Xd(new bXe.DebugNameData(t.owner,t.debugName,t.debugReferenceFn??r),e,r,()=>Xd.globalTransaction,t.equalsFn??SXe.strictEquals,n)}var Xd=class extends sdr.BaseObservable{constructor(e,r,n,o,s,a){super(a),this._debugNameData=e,this.event=r,this._getValue=n,this._getTransaction=o,this._equalityComparator=s,this._hasValue=!1,this.handleEvent=c=>{let l=this._getValue(c),u=this._value,d=!this._hasValue||!this._equalityComparator(u,l),f=!1;d&&(this._value=l,this._hasValue&&(f=!0,(0,odr.subtransaction)(this._getTransaction(),p=>{(0,TXe.getLogger)()?.handleObservableUpdated(this,{oldValue:u,newValue:l,change:void 0,didChange:d,hadValue:this._hasValue});for(let h of this._observers)p.updateObserver(h,this),h.handleChange(this,void 0)},()=>{let p=this.getDebugName();return"Event fired"+(p?`: ${p}`:"")})),this._hasValue=!0),f||(0,TXe.getLogger)()?.handleObservableUpdated(this,{oldValue:u,newValue:l,change:void 0,didChange:d,hadValue:this._hasValue})}}getDebugName(){return this._debugNameData.getDebugName(this)}get debugName(){let e=this.getDebugName();return"From Event"+(e?`: ${e}`:"")}onFirstObserverAdded(){this._subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this._subscription.dispose(),this._subscription=void 0,this._hasValue=!1,this._value=void 0}get(){return this._subscription?(this._hasValue||this.handleEvent(void 0),this._value):this._getValue(void 0)}debugSetValue(e){this._value=e}debugGetState(){return{value:this._value,hasValue:this._hasValue}}};ET.FromEventObservable=Xd;(function(t){t.Observer=Xd;function e(r,n){let o=!1;Xd.globalTransaction===void 0&&(Xd.globalTransaction=r,o=!0);try{n()}finally{o&&(Xd.globalTransaction=void 0)}}t.batchEventsGlobally=e})(fle||(ET.observableFromEvent=fle={}))});var hle=m(ple=>{"use strict";Object.defineProperty(ple,"__esModule",{value:!0});ple.observableSignal=fdr;var cdr=lm(),ldr=zl(),udr=Jd(),ddr=Wu();function fdr(t,e=ddr.DebugLocation.ofCaller()){return typeof t=="string"?new cj(t,void 0,e):new cj(void 0,t,e)}var cj=class extends udr.BaseObservable{get debugName(){return new ldr.DebugNameData(this._owner,this._debugName,void 0).getDebugName(this)??"Observable Signal"}toString(){return this.debugName}constructor(e,r,n){super(n),this._debugName=e,this._owner=r}trigger(e,r){if(!e){(0,cdr.transaction)(n=>{this.trigger(n,r)},()=>`Trigger signal ${this.debugName}`);return}for(let n of this._observers)e.updateObserver(n,this),n.handleChange(this,r)}get(){}}});var _le=m(Bc=>{"use strict";Object.defineProperty(Bc,"__esModule",{value:!0});Bc.KeepAliveObserver=void 0;Bc.observableFromPromise=gdr;Bc.signalFromObservable=_dr;Bc.debouncedObservableDeprecated=vdr;Bc.debouncedObservable=ydr;Bc.wasEventTriggeredRecently=Edr;Bc.keepObserved=wXe;Bc.recomputeInitiallyAndOnChange=IXe;Bc.derivedObservableWithCache=Tdr;Bc.derivedObservableWithWritableCache=Sdr;Bc.mapObservableArrayCached=bdr;var AXe=Gw(),pdr=lm(),mle=m1(),gle=Ka(),uj=ij(),hdr=_1(),mdr=hle(),xXe=Jd();function gdr(t){let e=(0,mle.observableValue)("promiseValue",{});return t.then(r=>{e.set({value:r},void 0)}),e}function _dr(t,e){return(0,uj.derivedOpts)({owner:t,equalsFn:()=>!1},r=>{e.read(r)})}function vdr(t,e,r){let n=(0,mle.observableValue)("debounced",void 0),o;return r.add((0,AXe.autorun)(s=>{let a=t.read(s);o&&clearTimeout(o),o=setTimeout(()=>{(0,pdr.transaction)(c=>{n.set(a,c)})},e)})),n}function ydr(t,e){let r=!1,n,o;return(0,hdr.observableFromEvent)(s=>{let a=(0,AXe.autorun)(c=>{let l=t.read(c);r?(o&&clearTimeout(o),o=setTimeout(()=>{n=l,s()},e)):(r=!0,n=l)});return{dispose(){a.dispose(),r=!1,n=void 0}}},()=>r?n:t.get())}function Edr(t,e,r){let n=(0,mle.observableValue)("triggeredRecently",!1),o;return r.add(t(()=>{n.set(!0,void 0),o&&clearTimeout(o),o=setTimeout(()=>{n.set(!1,void 0)},e)})),n}function wXe(t){let e=new SN(!1,void 0);return t.addObserver(e),(0,gle.toDisposable)(()=>{t.removeObserver(e)})}(0,xXe._setKeepObserved)(wXe);function IXe(t,e){let r=new SN(!0,e);t.addObserver(r);try{r.beginUpdate(t)}finally{r.endUpdate(t)}return(0,gle.toDisposable)(()=>{t.removeObserver(r)})}(0,xXe._setRecomputeInitiallyAndOnChange)(IXe);var SN=class{constructor(e,r){this._forceRecompute=e,this._handleValue=r,this._counter=0}beginUpdate(e){this._counter++}endUpdate(e){this._counter===1&&this._forceRecompute&&(this._handleValue?this._handleValue(e.get()):e.reportChanges()),this._counter--}handlePossibleChange(e){}handleChange(e,r){}};Bc.KeepAliveObserver=SN;function Tdr(t,e){let r;return(0,uj.derivedOpts)({owner:t,debugReferenceFn:e},o=>(r=e(o,r),r))}function Sdr(t,e){let r,n=(0,mdr.observableSignal)("derivedObservableWithWritableCache"),o=(0,uj.derived)(t,s=>(n.read(s),r=e(s,r),r));return Object.assign(o,{clearCache:s=>{r=void 0,n.trigger(s)},setCache:(s,a)=>{r=s,n.trigger(a)}})}function bdr(t,e,r,n){let o=new lj(r,n);return(0,uj.derivedOpts)({debugReferenceFn:r,owner:t,onLastObserverRemoved:()=>{o.dispose(),o=new lj(r)}},a=>(o.setItems(e.read(a)),o.getItems()))}var lj=class{constructor(e,r){this._map=e,this._keySelector=r,this._cache=new Map,this._items=[]}dispose(){this._cache.forEach(e=>e.store.dispose()),this._cache.clear()}setItems(e){let r=[],n=new Set(this._cache.keys());for(let o of e){let s=this._keySelector?this._keySelector(o):o,a=this._cache.get(s);if(a)n.delete(s);else{let c=new gle.DisposableStore;a={out:this._map(o,c),store:c},this._cache.set(s,a)}r.push(a.out)}for(let o of n)this._cache.get(o).store.dispose(),this._cache.delete(o);this._items=r}getItems(){return this._items}}});var RXe=m(dj=>{"use strict";Object.defineProperty(dj,"__esModule",{value:!0});dj.recordChanges=Cdr;dj.recordChangesLazy=Adr;var PXe=Ka();function Cdr(t){return{createChangeSummary:e=>({changes:[]}),handleChange(e,r){for(let n in t)e.didChange(t[n])&&r.changes.push({key:n,change:e.change});return!0},beforeUpdate(e,r){for(let n in t){if(n==="changes")throw new PXe.BugIndicatingError('property name "changes" is reserved for change tracking');r[n]=t[n].read(e)}}}}function Adr(t){let e;return{createChangeSummary:r=>({changes:[]}),handleChange(r,n){e||(e=t());for(let o in e)r.didChange(e[o])&&n.changes.push({key:o,change:r.change});return!0},beforeUpdate(r,n){e||(e=t());for(let o in e){if(o==="changes")throw new PXe.BugIndicatingError('property name "changes" is reserved for change tracking');n[o]=e[o].read(r)}}}}});var OXe=m(yle=>{"use strict";Object.defineProperty(yle,"__esModule",{value:!0});yle.constObservable=wdr;var xdr=Jd();function wdr(t){return new vle(t)}var vle=class extends xdr.ConvenientObservable{constructor(e){super(),this.value=e}get debugName(){return this.toString()}get(){return this.value}addObserver(e){}removeObserver(e){}log(){return this}toString(){return`Const: ${this.value}`}}});var MXe=m(Tle=>{"use strict";Object.defineProperty(Tle,"__esModule",{value:!0});Tle.observableSignalFromEvent=Mdr;var Idr=lm(),Pdr=zl(),Rdr=Jd(),Odr=Wu();function Mdr(t,e,r=Odr.DebugLocation.ofCaller()){return new Ele(typeof t=="string"?t:new Pdr.DebugNameData(t,void 0,void 0),e,r)}var Ele=class extends Rdr.BaseObservable{constructor(e,r,n){super(n),this.event=r,this.handleEvent=()=>{(0,Idr.transaction)(o=>{for(let s of this._observers)o.updateObserver(s,this),s.handleChange(this,void 0)},()=>this.debugName)},this.debugName=typeof e=="string"?e:e.getDebugName(this)??"Observable Signal From Event"}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0}get(){}}});var NXe=m(bN=>{"use strict";Object.defineProperty(bN,"__esModule",{value:!0});bN.ValueWithChangeEventFromObservable=void 0;bN.observableFromValueWithChangeEvent=kdr;var Ndr=Ka(),Ldr=_1(),fj=class{constructor(e){this.observable=e}get onDidChange(){return Ndr.Event.fromObservableLight(this.observable)}get value(){return this.observable.get()}};bN.ValueWithChangeEventFromObservable=fj;function kdr(t,e){return e instanceof fj?e.observable:(0,Ldr.observableFromEvent)(t,e.onDidChange,()=>e.value)}});var DXe=m(CN=>{"use strict";Object.defineProperty(CN,"__esModule",{value:!0});CN.runOnChange=LXe;CN.runOnChangeWithStore=kXe;CN.runOnChangeWithCancellationToken=Fdr;var Ddr=ule(),Udr=Ka(),qdr=Gw();function LXe(t,e){let r,n=!0;return(0,qdr.autorunWithStoreHandleChanges)({changeTracker:{createChangeSummary:()=>({deltas:[],didChange:!1}),handleChange:(o,s)=>{if(o.didChange(t)){let a=o.change;a!==void 0&&s.deltas.push(a),s.didChange=!0}return!0}}},(o,s)=>{let a=t.read(o),c=r;s.didChange&&(r=a,e(a,c,s.deltas)),n&&(n=!1,r=a)})}function kXe(t,e){let r=new Udr.DisposableStore,n=LXe(t,(o,s,a)=>{r.clear(),e(o,s,a,r)});return{dispose(){n.dispose(),r.dispose()}}}function Fdr(t,e){return kXe(t,(r,n,o,s)=>{e(r,n,o,(0,Ddr.cancelOnDispose)(s))})}});var FXe=m(pj=>{"use strict";Object.defineProperty(pj,"__esModule",{value:!0});pj.latestChangedValue=Vdr;pj.derivedConstOnceDefined=Hdr;var UXe=Ka(),qXe=zl(),jdr=_1(),Bdr=Gw(),$dr=_le();function Vdr(t,e){if(e.length===0)throw new UXe.BugIndicatingError;let r=!1,n,o=(0,jdr.observableFromEvent)(t,s=>{let a=new UXe.DisposableStore;for(let c of e)a.add((0,Bdr.autorunOpts)({debugName:()=>(0,qXe.getDebugName)(o,new qXe.DebugNameData(t,void 0,void 0))+".updateLastChangedValue"},l=>{r=!0,n=c.read(l),s()}));return a.add({dispose(){r=!1,n=void 0}}),a},()=>r?n:e[e.length-1].get());return o}function Hdr(t,e){return(0,$dr.derivedObservableWithCache)(t,(r,n)=>n??e(r))}});var jXe=m(hj=>{"use strict";Object.defineProperty(hj,"__esModule",{value:!0});hj.ObservableSet=void 0;var Gdr=ZF(),Sle=class{constructor(){this._data=new Set,this._obs=(0,Gdr.observableValueOpts)({equalsFn:()=>!1},this),this.observable=this._obs}get size(){return this._data.size}has(e){return this._data.has(e)}add(e,r){return this._data.has(e)||(this._data.add(e),this._obs.set(this,r)),this}delete(e,r){let n=this._data.delete(e);return n&&this._obs.set(this,r),n}clear(e){this._data.size>0&&(this._data.clear(),this._obs.set(this,e))}forEach(e,r){this._data.forEach((n,o,s)=>{e.call(r,n,o,this)})}*entries(){for(let e of this._data)yield[e,e]}*keys(){yield*this._data.keys()}*values(){yield*this._data.values()}[Symbol.iterator](){return this.values()}get[Symbol.toStringTag](){return"ObservableSet"}};hj.ObservableSet=Sle});var BXe=m(mj=>{"use strict";Object.defineProperty(mj,"__esModule",{value:!0});mj.ObservableMap=void 0;var zdr=ZF(),ble=class{constructor(){this._data=new Map,this._obs=(0,zdr.observableValueOpts)({equalsFn:()=>!1},this),this.observable=this._obs}get size(){return this._data.size}has(e){return this._data.has(e)}get(e){return this._data.get(e)}set(e,r,n){let o=this._data.has(e),s=this._data.get(e);return(!o||s!==r)&&(this._data.set(e,r),this._obs.set(this,n)),this}delete(e,r){let n=this._data.delete(e);return n&&this._obs.set(this,r),n}clear(e){this._data.size>0&&(this._data.clear(),this._obs.set(this,e))}forEach(e,r){this._data.forEach((n,o,s)=>{e.call(r,n,o,this)})}*entries(){yield*this._data.entries()}*keys(){yield*this._data.keys()}*values(){yield*this._data.values()}[Symbol.iterator](){return this.entries()}get[Symbol.toStringTag](){return"ObservableMap"}};mj.ObservableMap=ble});var vj=m(Jw=>{"use strict";Object.defineProperty(Jw,"__esModule",{value:!0});Jw.ConsoleObservableLogger=void 0;Jw.logObservableToConsole=Ydr;Jw.formatValue=Zw;var Wdr=ep(),Kdr=zl(),$Xe=Ww(),gj;function Ydr(t){gj||(gj=new _j,(0,Wdr.addLogger)(gj)),gj.addFilteredObj(t)}var _j=class{constructor(){this.indentation=0,this.changedObservablesSets=new WeakMap}addFilteredObj(e){this._filteredObjects||(this._filteredObjects=new Set),this._filteredObjects.add(e)}_isIncluded(e){return this._filteredObjects?.has(e)??!0}textToConsoleArgs(e){return Qdr([Yw(Xdr("|  ",this.indentation)),e])}formatInfo(e){return e.hadValue?e.didChange?[Yw(" "),Ku(Zw(e.oldValue,70),{color:"red",strikeThrough:!0}),Yw(" "),Ku(Zw(e.newValue,60),{color:"green"})]:[Yw(" (unchanged)")]:[Yw(" "),Ku(Zw(e.newValue,60),{color:"green"}),Yw(" (initial)")]}handleObservableCreated(e){if(e instanceof $Xe.Derived){let r=e;if(this.changedObservablesSets.set(r,new Set),!1){let o=[];r.__debugUpdating=o;let s=r.beginUpdate;r.beginUpdate=c=>(o.push(c),s.apply(r,[c]));let a=r.endUpdate;r.endUpdate=c=>{let l=o.indexOf(c);return l===-1&&console.error("endUpdate called without beginUpdate",r.debugName,c.debugName),o.splice(l,1),a.apply(r,[c])}}}}handleOnListenerCountChanged(e,r){}handleObservableUpdated(e,r){if(this._isIncluded(e)){if(e instanceof $Xe.Derived){this._handleDerivedRecomputed(e,r);return}console.log(...this.textToConsoleArgs([Qw("observable value changed"),Ku(e.debugName,{color:"BlueViolet"}),...this.formatInfo(r)]))}}formatChanges(e){if(e.size!==0)return Ku(" (changed deps: "+[...e].map(r=>r.debugName).join(", ")+")",{color:"gray"})}handleDerivedDependencyChanged(e,r,n){this._isIncluded(e)&&this.changedObservablesSets.get(e)?.add(r)}_handleDerivedRecomputed(e,r){if(!this._isIncluded(e))return;let n=this.changedObservablesSets.get(e);n&&(console.log(...this.textToConsoleArgs([Qw("derived recomputed"),Ku(e.debugName,{color:"BlueViolet"}),...this.formatInfo(r),this.formatChanges(n),{data:[{fn:e._debugNameData.referenceFn??e._computeFn}]}])),n.clear())}handleDerivedCleared(e){this._isIncluded(e)&&console.log(...this.textToConsoleArgs([Qw("derived cleared"),Ku(e.debugName,{color:"BlueViolet"})]))}handleFromEventObservableTriggered(e,r){this._isIncluded(e)&&console.log(...this.textToConsoleArgs([Qw("observable from event triggered"),Ku(e.debugName,{color:"BlueViolet"}),...this.formatInfo(r),{data:[{fn:e._getValue}]}]))}handleAutorunCreated(e){this._isIncluded(e)&&this.changedObservablesSets.set(e,new Set)}handleAutorunDisposed(e){}handleAutorunDependencyChanged(e,r,n){this._isIncluded(e)&&this.changedObservablesSets.get(e).add(r)}handleAutorunStarted(e){let r=this.changedObservablesSets.get(e);r&&(this._isIncluded(e)&&console.log(...this.textToConsoleArgs([Qw("autorun"),Ku(e.debugName,{color:"BlueViolet"}),this.formatChanges(r),{data:[{fn:e._debugNameData.referenceFn??e._runFn}]}])),r.clear(),this.indentation++)}handleAutorunFinished(e){this.indentation--}handleBeginTransaction(e){let r=e.getDebugName();r===void 0&&(r=""),this._isIncluded(e)&&console.log(...this.textToConsoleArgs([Qw("transaction"),Ku(r,{color:"BlueViolet"}),{data:[{fn:e._fn}]}])),this.indentation++}handleEndTransaction(){this.indentation--}};Jw.ConsoleObservableLogger=_j;function Qdr(t){let e=new Array,r=[],n="";function o(a){if("length"in a)for(let c of a)c&&o(c);else"text"in a?(n+=`%c${a.text}`,e.push(a.style),a.data&&r.push(...a.data)):"data"in a&&r.push(...a.data)}o(t);let s=[n,...e];return s.push(...r),s}function Yw(t){return Ku(t,{color:"black"})}function Qw(t){return Ku(efr(`${t}: `,10),{color:"black",bold:!0})}function Ku(t,e={color:"black"}){function r(o){return Object.entries(o).reduce((s,[a,c])=>`${s}${a}:${c};`,"")}let n={color:e.color};return e.strikeThrough&&(n["text-decoration"]="line-through"),e.bold&&(n["font-weight"]="bold"),{text:t,style:r(n)}}function Zw(t,e){switch(typeof t){case"number":return""+t;case"string":return t.length+2<=e?`"${t}"`:`"${t.substr(0,e-7)}"+...`;case"boolean":return t?"true":"false";case"undefined":return"undefined";case"object":return t===null?"null":Array.isArray(t)?Zdr(t,e):Jdr(t,e);case"symbol":return t.toString();case"function":return`[[Function${t.name?" "+t.name:""}]]`;default:return""+t}}function Zdr(t,e){let r="[ ",n=!0;for(let o of t){if(n||(r+=", "),r.length-5>e){r+="...";break}n=!1,r+=`${Zw(o,e-r.length)}`}return r+=" ]",r}function Jdr(t,e){if(typeof t.toString=="function"&&t.toString!==Object.prototype.toString){let s=t.toString();return s.length<=e?s:s.substring(0,e-3)+"..."}let r=(0,Kdr.getClassName)(t),n=r?r+"(":"{ ",o=!0;for(let[s,a]of Object.entries(t)){if(o||(n+=", "),n.length-5>e){n+="...";break}o=!1,n+=`${s}: ${Zw(a,e-n.length)}`}return n+=r?")":" }",n}function Xdr(t,e){let r="";for(let n=1;n<=e;n++)r+=t;return r}function efr(t,e){for(;t.length<e;)t+=" ";return t}});var VXe=m(yj=>{"use strict";Object.defineProperty(yj,"__esModule",{value:!0});yj.SimpleTypedRpcConnection=void 0;var Cle=class t{static createHost(e,r){return new t(e,r)}static createClient(e,r){return new t(e,r)}constructor(e,r){this._channelFactory=e,this._getHandler=r,this._channel=this._channelFactory({handleNotification:s=>{let a=s,c=this._getHandler().notifications[a[0]];if(!c)throw new Error(`Unknown notification "${a[0]}"!`);c(...a[1])},handleRequest:s=>{let a=s;try{return{type:"result",value:this._getHandler().requests[a[0]](...a[1])}}catch(c){return{type:"error",value:c}}}});let n=new Proxy({},{get:(s,a)=>async(...c)=>{let l=await this._channel.sendRequest([a,c]);if(l.type==="error")throw l.value;return l.value}}),o=new Proxy({},{get:(s,a)=>(...c)=>{this._channel.sendNotification([a,c])}});this.api={notifications:o,requests:n}}};yj.SimpleTypedRpcConnection=Cle});var HXe=m(Ale=>{"use strict";Object.defineProperty(Ale,"__esModule",{value:!0});Ale.registerDebugChannel=rfr;var tfr=VXe();function rfr(t,e){let r=globalThis,n=[],o,{channel:s,handler:a}=nfr({sendNotification:l=>{o?o.sendNotification(l):n.push(l)}}),c;return(r.$$debugValueEditor_debugChannels??(r.$$debugValueEditor_debugChannels={}))[t]=l=>{c=e(),o=l;for(let u of n)l.sendNotification(u);return n=[],a},tfr.SimpleTypedRpcConnection.createClient(s,()=>{if(!c)throw new Error("Not supported");return c})}function nfr(t){let e;return{channel:n=>(e=n,{sendNotification:o=>{t.sendNotification(o)},sendRequest:o=>{throw new Error("not supported")}}),handler:{handleRequest:n=>n.type==="notification"?e?.handleNotification(n.data):e?.handleRequest(n.data)}}}});var WXe=m(v1=>{"use strict";Object.defineProperty(v1,"__esModule",{value:!0});v1.Throttler=v1.Debouncer=void 0;v1.deepAssign=GXe;v1.deepAssignDeleteNulls=zXe;var xle=class{constructor(){this._timeout=void 0}debounce(e,r){this._timeout!==void 0&&clearTimeout(this._timeout),this._timeout=setTimeout(()=>{this._timeout=void 0,e()},r)}dispose(){this._timeout!==void 0&&clearTimeout(this._timeout)}};v1.Debouncer=xle;var wle=class{constructor(){this._timeout=void 0}throttle(e,r){this._timeout===void 0&&(this._timeout=setTimeout(()=>{this._timeout=void 0,e()},r))}dispose(){this._timeout!==void 0&&clearTimeout(this._timeout)}};v1.Throttler=wle;function GXe(t,e){for(let r in e)t[r]&&typeof t[r]=="object"&&e[r]&&typeof e[r]=="object"?GXe(t[r],e[r]):t[r]=e[r]}function zXe(t,e){for(let r in e)e[r]===null?delete t[r]:t[r]&&typeof t[r]=="object"&&e[r]&&typeof e[r]=="object"?zXe(t[r],e[r]):t[r]=e[r]}});var QXe=m(Tj=>{"use strict";Object.defineProperty(Tj,"__esModule",{value:!0});Tj.DevToolsLogger=void 0;var KXe=XF(),Ej=vj(),ifr=HXe(),Ile=WXe(),AN=Ol(),ofr=_1(),TT=Gr(),ST=Ww(),YXe=m1(),sfr=Wu(),Ple=class t{static{this._instance=void 0}static getInstance(){return t._instance===void 0&&(t._instance=new t),t._instance}getTransactionState(){let e=[],r=[...this._activeTransactions];if(r.length===0)return;let n=r.flatMap(s=>s.debugGetUpdatingObservers()??[]).map(s=>s.observer),o=new Set;for(;n.length>0;){let s=n.shift();if(o.has(s))continue;o.add(s);let a=this._getInfo(s,c=>{o.has(c)||n.push(c)});a&&e.push(a)}return{names:r.map(s=>s.getDebugName()??"tx"),affected:e}}_getObservableInfo(e){let r=this._instanceInfos.get(e);if(!r){(0,TT.onUnexpectedError)(new TT.BugIndicatingError("No info found"));return}return r}_getAutorunInfo(e){let r=this._instanceInfos.get(e);if(!r){(0,TT.onUnexpectedError)(new TT.BugIndicatingError("No info found"));return}return r}_getInfo(e,r){if(e instanceof ST.Derived){let n=[...e.debugGetObservers()];for(let l of n)r(l);let o=this._getObservableInfo(e);if(!o)return;let s=e.debugGetState(),a={name:e.debugName,instanceId:o.instanceId,updateCount:s.updateCount},c=[...o.changedObservables].map(l=>this._instanceInfos.get(l)?.instanceId).filter(AN.isDefined);if(s.isComputing)return{...a,type:"observable/derived",state:"updating",changedDependencies:c,initialComputation:!1};switch(s.state){case 0:return{...a,type:"observable/derived",state:"noValue"};case 3:return{...a,type:"observable/derived",state:"upToDate"};case 2:return{...a,type:"observable/derived",state:"stale",changedDependencies:c};case 1:return{...a,type:"observable/derived",state:"possiblyStale"}}}else if(e instanceof KXe.AutorunObserver){let n=this._getAutorunInfo(e);if(!n)return;let o={name:e.debugName,instanceId:n.instanceId,updateCount:n.updateCount},s=[...n.changedObservables].map(a=>this._instanceInfos.get(a).instanceId);if(e.debugGetState().isRunning)return{...o,type:"autorun",state:"updating",changedDependencies:s};switch(e.debugGetState().state){case 3:return{...o,type:"autorun",state:"upToDate"};case 2:return{...o,type:"autorun",state:"stale",changedDependencies:s};case 1:return{...o,type:"autorun",state:"possiblyStale"}}}}_formatObservable(e){let r=this._getObservableInfo(e);if(r)return{name:e.debugName,instanceId:r.instanceId}}_formatObserver(e){if(e instanceof ST.Derived)return{name:e.toString(),instanceId:this._getObservableInfo(e)?.instanceId};let r=this._getAutorunInfo(e);if(r)return{name:e.toString(),instanceId:r.instanceId}}constructor(){this._declarationId=0,this._instanceId=0,this._declarations=new Map,this._instanceInfos=new WeakMap,this._aliveInstances=new Map,this._activeTransactions=new Set,this._channel=(0,ifr.registerDebugChannel)("observableDevTools",()=>({notifications:{setDeclarationIdFilter:e=>{},logObservableValue:e=>{console.log("logObservableValue",e)},flushUpdates:()=>{this._flushUpdates()},resetUpdates:()=>{this._pendingChanges=null,this._channel.api.notifications.handleChange(this._fullState,!0)}},requests:{getDeclarations:()=>{let e={};for(let r of this._declarations.values())e[r.id]=r;return{decls:e}},getSummarizedInstances:()=>null,getObservableValueInfo:e=>({observers:[...this._aliveInstances.get(e).debugGetObservers()].map(n=>this._formatObserver(n)).filter(AN.isDefined)}),getDerivedInfo:e=>{let r=this._aliveInstances.get(e);return{dependencies:[...r.debugGetState().dependencies].map(n=>this._formatObservable(n)).filter(AN.isDefined),observers:[...r.debugGetObservers()].map(n=>this._formatObserver(n)).filter(AN.isDefined)}},getAutorunInfo:e=>({dependencies:[...this._aliveInstances.get(e).debugGetState().dependencies].map(n=>this._formatObservable(n)).filter(AN.isDefined)}),getTransactionState:()=>this.getTransactionState(),setValue:(e,r)=>{let n=this._aliveInstances.get(e);if(n instanceof ST.Derived)n.debugSetValue(r);else if(n instanceof YXe.ObservableValue)n.debugSetValue(r);else if(n instanceof ofr.FromEventObservable)n.debugSetValue(r);else throw new TT.BugIndicatingError("Observable is not supported");let o=[...n.debugGetObservers()];for(let s of o)s.beginUpdate(n);for(let s of o)s.handleChange(n,void 0);for(let s of o)s.endUpdate(n)},getValue:e=>{let r=this._aliveInstances.get(e);if(r instanceof ST.Derived)return(0,Ej.formatValue)(r.debugGetState().value,200);if(r instanceof YXe.ObservableValue)return(0,Ej.formatValue)(r.debugGetState().value,200)},logValue:e=>{let r=this._aliveInstances.get(e);if(r&&"get"in r)console.log("Logged Value:",r.get());else throw new TT.BugIndicatingError("Observable is not supported")},rerun:e=>{let r=this._aliveInstances.get(e);if(r instanceof ST.Derived)r.debugRecompute();else if(r instanceof KXe.AutorunObserver)r.debugRerun();else throw new TT.BugIndicatingError("Observable is not supported")}}})),this._pendingChanges=null,this._changeThrottler=new Ile.Throttler,this._fullState={},this._flushUpdates=()=>{this._pendingChanges!==null&&(this._channel.api.notifications.handleChange(this._pendingChanges,!1),this._pendingChanges=null)},sfr.DebugLocation.enable()}_handleChange(e){(0,Ile.deepAssignDeleteNulls)(this._fullState,e),this._pendingChanges===null?this._pendingChanges=e:(0,Ile.deepAssign)(this._pendingChanges,e),this._changeThrottler.throttle(this._flushUpdates,10)}_getDeclarationId(e,r){if(!r)return-1;let n=this._declarations.get(r.id);return n===void 0&&(n={id:this._declarationId++,type:e,url:r.fileName,line:r.line,column:r.column},this._declarations.set(r.id,n),this._handleChange({decls:{[n.id]:n}})),n.id}handleObservableCreated(e,r){let o={declarationId:this._getDeclarationId("observable/value",r),instanceId:this._instanceId++,listenerCount:0,lastValue:void 0,updateCount:0,changedObservables:new Set};this._instanceInfos.set(e,o)}handleOnListenerCountChanged(e,r){let n=this._getObservableInfo(e);if(n){if(n.listenerCount===0&&r>0){let o=e instanceof ST.Derived?"observable/derived":"observable/value";this._aliveInstances.set(n.instanceId,e),this._handleChange({instances:{[n.instanceId]:{instanceId:n.instanceId,declarationId:n.declarationId,formattedValue:n.lastValue,type:o,name:e.debugName}}})}else n.listenerCount>0&&r===0&&(this._handleChange({instances:{[n.instanceId]:null}}),this._aliveInstances.delete(n.instanceId));n.listenerCount=r}}handleObservableUpdated(e,r){if(e instanceof ST.Derived){this._handleDerivedRecomputed(e,r);return}let n=this._getObservableInfo(e);n&&r.didChange&&(n.lastValue=(0,Ej.formatValue)(r.newValue,30),n.listenerCount>0&&this._handleChange({instances:{[n.instanceId]:{formattedValue:n.lastValue}}}))}handleAutorunCreated(e,r){let o={declarationId:this._getDeclarationId("autorun",r),instanceId:this._instanceId++,updateCount:0,changedObservables:new Set};this._instanceInfos.set(e,o),this._aliveInstances.set(o.instanceId,e),o&&this._handleChange({instances:{[o.instanceId]:{instanceId:o.instanceId,declarationId:o.declarationId,runCount:0,type:"autorun",name:e.debugName}}})}handleAutorunDisposed(e){let r=this._getAutorunInfo(e);r&&(this._handleChange({instances:{[r.instanceId]:null}}),this._instanceInfos.delete(e),this._aliveInstances.delete(r.instanceId))}handleAutorunDependencyChanged(e,r,n){let o=this._getAutorunInfo(e);o&&o.changedObservables.add(r)}handleAutorunStarted(e){}handleAutorunFinished(e){let r=this._getAutorunInfo(e);r&&(r.changedObservables.clear(),r.updateCount++,this._handleChange({instances:{[r.instanceId]:{runCount:r.updateCount}}}))}handleDerivedDependencyChanged(e,r,n){let o=this._getObservableInfo(e);o&&o.changedObservables.add(r)}_handleDerivedRecomputed(e,r){let n=this._getObservableInfo(e);if(!n)return;let o=(0,Ej.formatValue)(r.newValue,30);n.updateCount++,n.changedObservables.clear(),n.lastValue=o,n.listenerCount>0&&this._handleChange({instances:{[n.instanceId]:{formattedValue:o,recomputationCount:n.updateCount}}})}handleDerivedCleared(e){let r=this._getObservableInfo(e);r&&(r.lastValue=void 0,r.changedObservables.clear(),r.listenerCount>0&&this._handleChange({instances:{[r.instanceId]:{formattedValue:void 0}}}))}handleBeginTransaction(e){this._activeTransactions.add(e)}handleEndTransaction(e){this._activeTransactions.delete(e)}};Tj.DevToolsLogger=Ple});var JXe=m(Ole=>{"use strict";Object.defineProperty(Ole,"__esModule",{value:!0});Ole.debugGetDependencyGraph=ffr;var afr=Ww(),cfr=_1(),lfr=m1(),ufr=XF(),dfr=vj();function ffr(t,e){let r=e?.debugNamePostProcessor??(s=>s),n=Rle.from(t,r);return n?ZXe(n,0,new Set).trim():""}function ZXe(t,e,r){let n="		".repeat(e),o=[];if(r.has(t.sourceObj))return o.push(`${n}* ${t.type} ${t.name} (already listed)`),o.join(`
`);if(r.add(t.sourceObj),o.push(`${n}* ${t.type} ${t.name}:`),o.push(`${n}  value: ${(0,dfr.formatValue)(t.value,50)}`),o.push(`${n}  state: ${t.state}`),t.dependencies.length>0){o.push(`${n}  dependencies:`);for(let a of t.dependencies)o.push(ZXe(a,e+1,r))}return o.join(`
`)}var Rle=class t{static from(e,r){if(e instanceof ufr.AutorunObserver){let n=e.debugGetState();return new t(e,r(e.debugName),"autorun",void 0,n.stateStr,Array.from(n.dependencies).map(o=>t.from(o,r)||t.unknown(o)))}else if(e instanceof afr.Derived){let n=e.debugGetState();return new t(e,r(e.debugName),"derived",n.value,n.stateStr,Array.from(n.dependencies).map(o=>t.from(o,r)||t.unknown(o)))}else if(e instanceof lfr.ObservableValue){let n=e.debugGetState();return new t(e,r(e.debugName),"observableValue",n.value,"upToDate",[])}else if(e instanceof cfr.FromEventObservable){let n=e.debugGetState();return new t(e,r(e.debugName),"fromEvent",n.value,n.hasValue?"upToDate":"initial",[])}}static unknown(e){return new t(e,"(unknown)","unknown",void 0,"unknown",[])}constructor(e,r,n,o,s,a){this.sourceObj=e,this.name=r,this.type=n,this.value=o,this.state=s,this.dependencies=a}}});var bT=m(ge=>{"use strict";Object.defineProperty(ge,"__esModule",{value:!0});ge.latestChangedValue=ge.derivedConstOnceDefined=ge.runOnChangeWithStore=ge.runOnChangeWithCancellationToken=ge.runOnChange=ge.ValueWithChangeEventFromObservable=ge.observableFromValueWithChangeEvent=ge.TransactionImpl=ge.transaction=ge.subtransaction=ge.globalTransaction=ge.asyncTransaction=ge.observableSignalFromEvent=ge.observableFromEventOpts=ge.observableSignal=ge.constObservable=ge.recordChangesLazy=ge.recordChanges=ge.wasEventTriggeredRecently=ge.signalFromObservable=ge.recomputeInitiallyAndOnChange=ge.observableFromPromise=ge.mapObservableArrayCached=ge.keepObserved=ge.derivedObservableWithWritableCache=ge.derivedObservableWithCache=ge.debouncedObservable=ge.debouncedObservableDeprecated=ge.waitForState=ge.derivedWithCancellationToken=ge.PromiseResult=ge.ObservablePromise=ge.ObservableLazyPromise=ge.ObservableLazy=ge.derivedWithStore=ge.derivedWithSetter=ge.derivedOpts=ge.derivedHandleChanges=ge.derivedDisposable=ge.derived=ge.disposableObservableValue=ge.autorunSelfDisposable=ge.autorunIterableDelta=ge.autorunWithStoreHandleChanges=ge.autorunWithStore=ge.autorunOpts=ge.autorunHandleChanges=ge.autorunDelta=ge.autorun=ge.observableValueOpts=void 0;ge.DebugLocation=ge.ObservableMap=ge.ObservableSet=ge.observableValue=ge.observableFromEvent=void 0;var pfr=ZF();Object.defineProperty(ge,"observableValueOpts",{enumerable:!0,get:function(){return pfr.observableValueOpts}});var y1=Gw();Object.defineProperty(ge,"autorun",{enumerable:!0,get:function(){return y1.autorun}});Object.defineProperty(ge,"autorunDelta",{enumerable:!0,get:function(){return y1.autorunDelta}});Object.defineProperty(ge,"autorunHandleChanges",{enumerable:!0,get:function(){return y1.autorunHandleChanges}});Object.defineProperty(ge,"autorunOpts",{enumerable:!0,get:function(){return y1.autorunOpts}});Object.defineProperty(ge,"autorunWithStore",{enumerable:!0,get:function(){return y1.autorunWithStore}});Object.defineProperty(ge,"autorunWithStoreHandleChanges",{enumerable:!0,get:function(){return y1.autorunWithStoreHandleChanges}});Object.defineProperty(ge,"autorunIterableDelta",{enumerable:!0,get:function(){return y1.autorunIterableDelta}});Object.defineProperty(ge,"autorunSelfDisposable",{enumerable:!0,get:function(){return y1.autorunSelfDisposable}});var hfr=m1();Object.defineProperty(ge,"disposableObservableValue",{enumerable:!0,get:function(){return hfr.disposableObservableValue}});var Xw=ij();Object.defineProperty(ge,"derived",{enumerable:!0,get:function(){return Xw.derived}});Object.defineProperty(ge,"derivedDisposable",{enumerable:!0,get:function(){return Xw.derivedDisposable}});Object.defineProperty(ge,"derivedHandleChanges",{enumerable:!0,get:function(){return Xw.derivedHandleChanges}});Object.defineProperty(ge,"derivedOpts",{enumerable:!0,get:function(){return Xw.derivedOpts}});Object.defineProperty(ge,"derivedWithSetter",{enumerable:!0,get:function(){return Xw.derivedWithSetter}});Object.defineProperty(ge,"derivedWithStore",{enumerable:!0,get:function(){return Xw.derivedWithStore}});var Sj=yXe();Object.defineProperty(ge,"ObservableLazy",{enumerable:!0,get:function(){return Sj.ObservableLazy}});Object.defineProperty(ge,"ObservableLazyPromise",{enumerable:!0,get:function(){return Sj.ObservableLazyPromise}});Object.defineProperty(ge,"ObservablePromise",{enumerable:!0,get:function(){return Sj.ObservablePromise}});Object.defineProperty(ge,"PromiseResult",{enumerable:!0,get:function(){return Sj.PromiseResult}});var eet=EXe();Object.defineProperty(ge,"derivedWithCancellationToken",{enumerable:!0,get:function(){return eet.derivedWithCancellationToken}});Object.defineProperty(ge,"waitForState",{enumerable:!0,get:function(){return eet.waitForState}});var ap=_le();Object.defineProperty(ge,"debouncedObservableDeprecated",{enumerable:!0,get:function(){return ap.debouncedObservableDeprecated}});Object.defineProperty(ge,"debouncedObservable",{enumerable:!0,get:function(){return ap.debouncedObservable}});Object.defineProperty(ge,"derivedObservableWithCache",{enumerable:!0,get:function(){return ap.derivedObservableWithCache}});Object.defineProperty(ge,"derivedObservableWithWritableCache",{enumerable:!0,get:function(){return ap.derivedObservableWithWritableCache}});Object.defineProperty(ge,"keepObserved",{enumerable:!0,get:function(){return ap.keepObserved}});Object.defineProperty(ge,"mapObservableArrayCached",{enumerable:!0,get:function(){return ap.mapObservableArrayCached}});Object.defineProperty(ge,"observableFromPromise",{enumerable:!0,get:function(){return ap.observableFromPromise}});Object.defineProperty(ge,"recomputeInitiallyAndOnChange",{enumerable:!0,get:function(){return ap.recomputeInitiallyAndOnChange}});Object.defineProperty(ge,"signalFromObservable",{enumerable:!0,get:function(){return ap.signalFromObservable}});Object.defineProperty(ge,"wasEventTriggeredRecently",{enumerable:!0,get:function(){return ap.wasEventTriggeredRecently}});var tet=RXe();Object.defineProperty(ge,"recordChanges",{enumerable:!0,get:function(){return tet.recordChanges}});Object.defineProperty(ge,"recordChangesLazy",{enumerable:!0,get:function(){return tet.recordChangesLazy}});var mfr=OXe();Object.defineProperty(ge,"constObservable",{enumerable:!0,get:function(){return mfr.constObservable}});var gfr=hle();Object.defineProperty(ge,"observableSignal",{enumerable:!0,get:function(){return gfr.observableSignal}});var _fr=_1();Object.defineProperty(ge,"observableFromEventOpts",{enumerable:!0,get:function(){return _fr.observableFromEventOpts}});var vfr=MXe();Object.defineProperty(ge,"observableSignalFromEvent",{enumerable:!0,get:function(){return vfr.observableSignalFromEvent}});var xN=lm();Object.defineProperty(ge,"asyncTransaction",{enumerable:!0,get:function(){return xN.asyncTransaction}});Object.defineProperty(ge,"globalTransaction",{enumerable:!0,get:function(){return xN.globalTransaction}});Object.defineProperty(ge,"subtransaction",{enumerable:!0,get:function(){return xN.subtransaction}});Object.defineProperty(ge,"transaction",{enumerable:!0,get:function(){return xN.transaction}});Object.defineProperty(ge,"TransactionImpl",{enumerable:!0,get:function(){return xN.TransactionImpl}});var ret=NXe();Object.defineProperty(ge,"observableFromValueWithChangeEvent",{enumerable:!0,get:function(){return ret.observableFromValueWithChangeEvent}});Object.defineProperty(ge,"ValueWithChangeEventFromObservable",{enumerable:!0,get:function(){return ret.ValueWithChangeEventFromObservable}});var Mle=DXe();Object.defineProperty(ge,"runOnChange",{enumerable:!0,get:function(){return Mle.runOnChange}});Object.defineProperty(ge,"runOnChangeWithCancellationToken",{enumerable:!0,get:function(){return Mle.runOnChangeWithCancellationToken}});Object.defineProperty(ge,"runOnChangeWithStore",{enumerable:!0,get:function(){return Mle.runOnChangeWithStore}});var net=FXe();Object.defineProperty(ge,"derivedConstOnceDefined",{enumerable:!0,get:function(){return net.derivedConstOnceDefined}});Object.defineProperty(ge,"latestChangedValue",{enumerable:!0,get:function(){return net.latestChangedValue}});var yfr=_1();Object.defineProperty(ge,"observableFromEvent",{enumerable:!0,get:function(){return yfr.observableFromEvent}});var Efr=m1();Object.defineProperty(ge,"observableValue",{enumerable:!0,get:function(){return Efr.observableValue}});var Tfr=jXe();Object.defineProperty(ge,"ObservableSet",{enumerable:!0,get:function(){return Tfr.ObservableSet}});var Sfr=BXe();Object.defineProperty(ge,"ObservableMap",{enumerable:!0,get:function(){return Sfr.ObservableMap}});var bfr=Wu();Object.defineProperty(ge,"DebugLocation",{enumerable:!0,get:function(){return bfr.DebugLocation}});var Nle=ep(),iet=vj(),Cfr=QXe(),XXe=f8(),Afr=Jd(),xfr=JXe();(0,Afr._setDebugGetDependencyGraph)(xfr.debugGetDependencyGraph);(0,Nle.setLogObservableFn)(iet.logObservableToConsole);var wfr=!1;wfr&&(0,Nle.addLogger)(new iet.ConsoleObservableLogger);XXe.env&&XXe.env.VSCODE_DEV_DEBUG_OBSERVABLES&&(0,Nle.addLogger)(Cfr.DevToolsLogger.getInstance())});var bj=m(Yu=>{"use strict";Object.defineProperty(Yu,"__esModule",{value:!0});Yu.deepClone=oet;Yu.deepFreeze=Ifr;Yu.cloneAndChange=Pfr;Yu.mixin=aet;Yu.equals=wN;Yu.safeStringify=Rfr;Yu.distinct=Ofr;Yu.getCaseInsensitive=Mfr;Yu.filter=Nfr;Yu.mapValues=Lfr;var E1=Ol();function oet(t){if(!t||typeof t!="object"||t instanceof RegExp)return t;let e=Array.isArray(t)?[]:{};return Object.entries(t).forEach(([r,n])=>{e[r]=n&&typeof n=="object"?oet(n):n}),e}function Ifr(t){if(!t||typeof t!="object")return t;let e=[t];for(;e.length>0;){let r=e.shift();Object.freeze(r);for(let n in r)if(set.call(r,n)){let o=r[n];typeof o=="object"&&!Object.isFrozen(o)&&!(0,E1.isTypedArray)(o)&&e.push(o)}}return t}var set=Object.prototype.hasOwnProperty;function Pfr(t,e){return Lle(t,e,new Set)}function Lle(t,e,r){if((0,E1.isUndefinedOrNull)(t))return t;let n=e(t);if(typeof n<"u")return n;if(Array.isArray(t)){let o=[];for(let s of t)o.push(Lle(s,e,r));return o}if((0,E1.isObject)(t)){if(r.has(t))throw new Error("Cannot clone recursive data-structure");r.add(t);let o={};for(let s in t)set.call(t,s)&&(o[s]=Lle(t[s],e,r));return r.delete(t),o}return t}function aet(t,e,r=!0){return(0,E1.isObject)(t)?((0,E1.isObject)(e)&&Object.keys(e).forEach(n=>{n in t?r&&((0,E1.isObject)(t[n])&&(0,E1.isObject)(e[n])?aet(t[n],e[n],r):t[n]=e[n]):t[n]=e[n]}),t):e}function wN(t,e){if(t===e)return!0;if(t==null||e===null||e===void 0||typeof t!=typeof e||typeof t!="object"||Array.isArray(t)!==Array.isArray(e))return!1;let r,n;if(Array.isArray(t)){if(t.length!==e.length)return!1;for(r=0;r<t.length;r++)if(!wN(t[r],e[r]))return!1}else{let o=[];for(n in t)o.push(n);o.sort();let s=[];for(n in e)s.push(n);if(s.sort(),!wN(o,s))return!1;for(r=0;r<o.length;r++)if(!wN(t[o[r]],e[o[r]]))return!1}return!0}function Rfr(t){let e=new Set;return JSON.stringify(t,(r,n)=>{if((0,E1.isObject)(n)||Array.isArray(n)){if(e.has(n))return"[Circular]";e.add(n)}return typeof n=="bigint"?`[BigInt ${n.toString()}]`:n})}function Ofr(t,e){let r=Object.create(null);return!t||!e||Object.keys(e).forEach(o=>{let s=t[o],a=e[o];wN(s,a)||(r[o]=a)}),r}function Mfr(t,e){let r=e.toLowerCase(),n=Object.keys(t).find(o=>o.toLowerCase()===r);return n?t[n]:t[e]}function Nfr(t,e){let r=Object.create(null);for(let[n,o]of Object.entries(t))e(n,o)&&(r[n]=o);return r}function Lfr(t,e){let r={};for(let[n,o]of Object.entries(t))r[n]=e(o,n);return r}});var cp=m(CT=>{"use strict";var kfr=CT&&CT.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),Dfr=CT&&CT.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&kfr(e,t,r)};Object.defineProperty(CT,"__esModule",{value:!0});Dfr(bT(),CT)});var det=m(eI=>{"use strict";Object.defineProperty(eI,"__esModule",{value:!0});eI.JointCompletionsProviderTriggerChangeStrategy=eI.JointCompletionsProviderStrategy=void 0;var cet;(function(t){t.Regular="regular",t.CursorEndOfLine="cursorEndOfLine"})(cet||(eI.JointCompletionsProviderStrategy=cet={}));var uet;(function(t){t.NoTriggerOnRequestInFlight="noTriggerOnRequestInFlight",t.NoTriggerOnCompletionsRequestInFlight="noTriggerOnCompletionsRequestInFlight",t.AlwaysTrigger="alwaysTrigger"})(uet||(eI.JointCompletionsProviderTriggerChangeStrategy=uet={}))});var Aj=m(Cj=>{"use strict";Object.defineProperty(Cj,"__esModule",{value:!0});Cj.NextCursorLinePrediction=void 0;var fet;(function(t){t.Jump="jump",t.OnlyWithEdit="onlyWithEdit",t.LabelOnlyWithEdit="labelOnlyWithEdit"})(fet||(Cj.NextCursorLinePrediction=fet={}))});var xj=m(Os=>{"use strict";Object.defineProperty(Os,"__esModule",{value:!0});Os.vString=qfr;Os.vNumber=jfr;Os.vBoolean=$fr;Os.vObjAny=Hfr;Os.vUndefined=zfr;Os.vUnchecked=pet;Os.vUnknown=Wfr;Os.vRequired=Kfr;Os.vObj=Yfr;Os.vArray=Qfr;Os.vTuple=Zfr;Os.vUnion=Jfr;Os.vEnum=Xfr;Os.vLiteral=e0r;Os.vLazy=t0r;var AT=class{constructor(e){this.type=e}validate(e){return typeof e!==this.type?{content:void 0,error:{message:`Expected ${this.type}, but got ${typeof e}`}}:{content:e,error:void 0}}toSchema(){return{type:this.type}}},Ufr=new AT("string");function qfr(){return Ufr}var Ffr=new AT("number");function jfr(){return Ffr}var Bfr=new AT("boolean");function $fr(){return Bfr}var Vfr=new AT("object");function Hfr(){return Vfr}var Gfr=new AT("undefined");function zfr(){return Gfr}function pet(){return{validate(t){return{content:t,error:void 0}},toSchema(){return{}}}}function Wfr(){return pet()}function Kfr(t){return{validate(e){return e===void 0?{content:void 0,error:{message:"Required field is missing"}}:t.validate(e)},toSchema(){return t.toSchema()},isRequired(){return!0}}}function Yfr(t){return{validate(e){if(typeof e!="object"||e===null)return{content:void 0,error:{message:"Expected object"}};let r={};for(let n in t){let o=t[n],s=e[n],a=o.isRequired?.()??!1;if(a&&s===void 0)return{content:void 0,error:{message:`Required field '${n}' is missing`}};if(!a&&s===void 0)continue;let{content:c,error:l}=o.validate(s);if(l)return{content:void 0,error:{message:`Error in property '${n}': ${l.message}`}};r[n]=c}return{content:r,error:void 0}},toSchema(){let e=[],r={};for(let[o,s]of Object.entries(t))r[o]=s.toSchema(),s.isRequired?.()&&e.push(o);return{type:"object",properties:r,...e.length>0?{required:e}:{}}}}}function Qfr(t){return{validate(e){if(!Array.isArray(e))return{content:void 0,error:{message:"Expected array"}};let r=[];for(let n=0;n<e.length;n++){let{content:o,error:s}=t.validate(e[n]);if(s)return{content:void 0,error:{message:`Error in element ${n}: ${s.message}`}};r.push(o)}return{content:r,error:void 0}},toSchema(){return{type:"array",items:t.toSchema()}}}}function Zfr(...t){return{validate(e){if(!Array.isArray(e))return{content:void 0,error:{message:"Expected array"}};if(e.length!==t.length)return{content:void 0,error:{message:`Expected tuple of length ${t.length}, but got ${e.length}`}};let r=[];for(let n=0;n<t.length;n++){let o=t[n],{content:s,error:a}=o.validate(e[n]);if(a)return{content:void 0,error:{message:`Error in element ${n}: ${a.message}`}};r.push(s)}return{content:r,error:void 0}},toSchema(){return{type:"array",items:t.map(e=>e.toSchema())}}}}function Jfr(...t){return{validate(e){let r;for(let n of t){let{content:o,error:s}=n.validate(e);if(!s)return{content:o,error:void 0};r=s}return{content:void 0,error:r}},toSchema(){return{oneOf:t.map(e=>e.toSchema())}}}}function Xfr(...t){return{validate(e){return t.indexOf(e)===-1?{content:void 0,error:{message:`Expected one of: ${t.join(", ")}`}}:{content:e,error:void 0}},toSchema(){return{enum:t}}}}function e0r(t){return{validate(e){return e!==t?{content:void 0,error:{message:`Expected: ${t}`}}:{content:e,error:void 0}},toSchema(){return{const:t}}}}function t0r(t){return{validate(e){return t().validate(e)},toSchema(){return t().toSchema()}}}});var S1=m(da=>{"use strict";Object.defineProperty(da,"__esModule",{value:!0});da.MODEL_CONFIGURATION_VALIDATOR=da.LANGUAGE_CONTEXT_ENABLED_LANGUAGES=da.DEFAULT_OPTIONS=da.ResponseFormat=da.PromptingStrategy=da.AggressivenessLevel=void 0;da.isPromptingStrategy=n0r;var r0r=qi(),T1=xj(),het;(function(t){t.Low="low",t.Medium="medium",t.High="high"})(het||(da.AggressivenessLevel=het={}));var ef;(function(t){t.CopilotNesXtab="copilotNesXtab",t.UnifiedModel="xtabUnifiedModel",t.Codexv21NesUnified="codexv21nesUnified",t.Nes41Miniv3="nes41miniv3",t.SimplifiedSystemPrompt="simplifiedSystemPrompt",t.Xtab275="xtab275",t.XtabAggressiveness="xtabAggressiveness"})(ef||(da.PromptingStrategy=ef={}));function n0r(t){return Object.values(ef).includes(t)}var wj;(function(t){t.CodeBlock="codeBlock",t.UnifiedWithXml="unifiedWithXml",t.EditWindowOnly="editWindowOnly"})(wj||(da.ResponseFormat=wj={}));(function(t){function e(r){switch(r){case ef.UnifiedModel:case ef.Codexv21NesUnified:case ef.Nes41Miniv3:return t.UnifiedWithXml;case ef.Xtab275:case ef.XtabAggressiveness:return t.EditWindowOnly;case ef.SimplifiedSystemPrompt:case ef.CopilotNesXtab:case void 0:return t.CodeBlock;default:(0,r0r.assertNever)(r)}}t.fromPromptingStrategy=e})(wj||(da.ResponseFormat=wj={}));da.DEFAULT_OPTIONS={promptingStrategy:void 0,currentFile:{maxTokens:2e3,includeTags:!0,prioritizeAboveCursor:!1},pagedClipping:{pageSize:10},recentlyViewedDocuments:{nDocuments:5,maxTokens:2e3,includeViewedFiles:!1},languageContext:{enabled:!1,maxTokens:2e3,traitPosition:"after"},diffHistory:{nEntries:25,maxTokens:1e3,onlyForDocsInPrompt:!1,useRelativePaths:!1},includePostScript:!0};da.LANGUAGE_CONTEXT_ENABLED_LANGUAGES={prompt:!0,instructions:!0,chatagent:!0};da.MODEL_CONFIGURATION_VALIDATOR=(0,T1.vObj)({modelName:(0,T1.vRequired)((0,T1.vString)()),promptingStrategy:(0,T1.vUnion)((0,T1.vEnum)(...Object.values(ef)),(0,T1.vUndefined)()),includeTagsInCurrentFile:(0,T1.vRequired)((0,T1.vBoolean)())})});var zi=m(tI=>{"use strict";Object.defineProperty(tI,"__esModule",{value:!0});tI.OffsetRangeSet=tI.OffsetRange=void 0;var Ij=Gr(),Pj=class t{static fromTo(e,r){return new t(e,r)}static addRange(e,r){let n=0;for(;n<r.length&&r[n].endExclusive<e.start;)n++;let o=n;for(;o<r.length&&r[o].start<=e.endExclusive;)o++;if(n===o)r.splice(n,0,e);else{let s=Math.min(e.start,r[n].start),a=Math.max(e.endExclusive,r[o-1].endExclusive);r.splice(n,o-n,new t(s,a))}}static tryCreate(e,r){if(!(e>r))return new t(e,r)}static ofLength(e){return new t(0,e)}static ofStartAndLength(e,r){return new t(e,e+r)}static emptyAt(e){return new t(e,e)}constructor(e,r){if(this.start=e,this.endExclusive=r,e>r)throw new Ij.BugIndicatingError(`Invalid range: ${this.toString()}`)}get isEmpty(){return this.start===this.endExclusive}delta(e){return new t(this.start+e,this.endExclusive+e)}deltaStart(e){return new t(this.start+e,this.endExclusive)}deltaEnd(e){return new t(this.start,this.endExclusive+e)}get length(){return this.endExclusive-this.start}toString(){return`[${this.start}, ${this.endExclusive})`}equals(e){return this.start===e.start&&this.endExclusive===e.endExclusive}containsRange(e){return this.start<=e.start&&e.endExclusive<=this.endExclusive}contains(e){return this.start<=e&&e<this.endExclusive}join(e){return new t(Math.min(this.start,e.start),Math.max(this.endExclusive,e.endExclusive))}intersect(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);if(r<=n)return new t(r,n)}intersectionLength(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return Math.max(0,n-r)}intersects(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return r<n}intersectsOrTouches(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return r<=n}isBefore(e){return this.endExclusive<=e.start}isAfter(e){return this.start>=e.endExclusive}slice(e){return e.slice(this.start,this.endExclusive)}substring(e){return e.substring(this.start,this.endExclusive)}clip(e){if(this.isEmpty)throw new Ij.BugIndicatingError(`Invalid clipping range: ${this.toString()}`);return Math.max(this.start,Math.min(this.endExclusive-1,e))}clipCyclic(e){if(this.isEmpty)throw new Ij.BugIndicatingError(`Invalid clipping range: ${this.toString()}`);return e<this.start?this.endExclusive-(this.start-e)%this.length:e>=this.endExclusive?this.start+(e-this.start)%this.length:e}map(e){let r=[];for(let n=this.start;n<this.endExclusive;n++)r.push(e(n));return r}forEach(e){for(let r=this.start;r<this.endExclusive;r++)e(r)}joinRightTouching(e){if(this.endExclusive!==e.start)throw new Ij.BugIndicatingError(`Invalid join: ${this.toString()} and ${e.toString()}`);return new t(this.start,e.endExclusive)}};tI.OffsetRange=Pj;var kle=class t{constructor(){this._sortedRanges=[]}get ranges(){return[...this._sortedRanges]}addRange(e){let r=0;for(;r<this._sortedRanges.length&&this._sortedRanges[r].endExclusive<e.start;)r++;let n=r;for(;n<this._sortedRanges.length&&this._sortedRanges[n].start<=e.endExclusive;)n++;if(r===n)this._sortedRanges.splice(r,0,e);else{let o=Math.min(e.start,this._sortedRanges[r].start),s=Math.max(e.endExclusive,this._sortedRanges[n-1].endExclusive);this._sortedRanges.splice(r,n-r,new Pj(o,s))}}toString(){return this._sortedRanges.map(e=>e.toString()).join(", ")}intersectsStrict(e){let r=0;for(;r<this._sortedRanges.length&&this._sortedRanges[r].endExclusive<=e.start;)r++;return r<this._sortedRanges.length&&this._sortedRanges[r].start<e.endExclusive}intersectWithRange(e){let r=new t;for(let n of this._sortedRanges){let o=n.intersect(e);o&&r.addRange(o)}return r}intersectWithRangeLength(e){return this.intersectWithRange(e).length}get length(){return this._sortedRanges.reduce((e,r)=>e+r.length,0)}};tI.OffsetRangeSet=kle});var tf=m(Rj=>{"use strict";Object.defineProperty(Rj,"__esModule",{value:!0});Rj.Position=void 0;var Dle=class t{constructor(e,r){this.lineNumber=e,this.column=r}with(e=this.lineNumber,r=this.column){return e===this.lineNumber&&r===this.column?this:new t(e,r)}delta(e=0,r=0){return this.with(Math.max(1,this.lineNumber+e),Math.max(1,this.column+r))}equals(e){return t.equals(this,e)}static equals(e,r){return!e&&!r?!0:!!e&&!!r&&e.lineNumber===r.lineNumber&&e.column===r.column}isBefore(e){return t.isBefore(this,e)}static isBefore(e,r){return e.lineNumber<r.lineNumber?!0:r.lineNumber<e.lineNumber?!1:e.column<r.column}isBeforeOrEqual(e){return t.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,r){return e.lineNumber<r.lineNumber?!0:r.lineNumber<e.lineNumber?!1:e.column<=r.column}static compare(e,r){let n=e.lineNumber|0,o=r.lineNumber|0;if(n===o){let s=e.column|0,a=r.column|0;return s-a}return n-o}clone(){return new t(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new t(e.lineNumber,e.column)}static isIPosition(e){return!!e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}};Rj.Position=Dle});var Ya=m(Oj=>{"use strict";Object.defineProperty(Oj,"__esModule",{value:!0});Oj.Range=void 0;var met=tf(),Ule=class t{constructor(e,r,n,o){e>n||e===n&&r>o?(this.startLineNumber=n,this.startColumn=o,this.endLineNumber=e,this.endColumn=r):(this.startLineNumber=e,this.startColumn=r,this.endLineNumber=n,this.endColumn=o)}isEmpty(){return t.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return t.containsPosition(this,e)}static containsPosition(e,r){return!(r.lineNumber<e.startLineNumber||r.lineNumber>e.endLineNumber||r.lineNumber===e.startLineNumber&&r.column<e.startColumn||r.lineNumber===e.endLineNumber&&r.column>e.endColumn)}static strictContainsPosition(e,r){return!(r.lineNumber<e.startLineNumber||r.lineNumber>e.endLineNumber||r.lineNumber===e.startLineNumber&&r.column<=e.startColumn||r.lineNumber===e.endLineNumber&&r.column>=e.endColumn)}containsRange(e){return t.containsRange(this,e)}static containsRange(e,r){return!(r.startLineNumber<e.startLineNumber||r.endLineNumber<e.startLineNumber||r.startLineNumber>e.endLineNumber||r.endLineNumber>e.endLineNumber||r.startLineNumber===e.startLineNumber&&r.startColumn<e.startColumn||r.endLineNumber===e.endLineNumber&&r.endColumn>e.endColumn)}strictContainsRange(e){return t.strictContainsRange(this,e)}static strictContainsRange(e,r){return!(r.startLineNumber<e.startLineNumber||r.endLineNumber<e.startLineNumber||r.startLineNumber>e.endLineNumber||r.endLineNumber>e.endLineNumber||r.startLineNumber===e.startLineNumber&&r.startColumn<=e.startColumn||r.endLineNumber===e.endLineNumber&&r.endColumn>=e.endColumn)}plusRange(e){return t.plusRange(this,e)}static plusRange(e,r){let n,o,s,a;return r.startLineNumber<e.startLineNumber?(n=r.startLineNumber,o=r.startColumn):r.startLineNumber===e.startLineNumber?(n=r.startLineNumber,o=Math.min(r.startColumn,e.startColumn)):(n=e.startLineNumber,o=e.startColumn),r.endLineNumber>e.endLineNumber?(s=r.endLineNumber,a=r.endColumn):r.endLineNumber===e.endLineNumber?(s=r.endLineNumber,a=Math.max(r.endColumn,e.endColumn)):(s=e.endLineNumber,a=e.endColumn),new t(n,o,s,a)}intersectRanges(e){return t.intersectRanges(this,e)}static intersectRanges(e,r){let n=e.startLineNumber,o=e.startColumn,s=e.endLineNumber,a=e.endColumn,c=r.startLineNumber,l=r.startColumn,u=r.endLineNumber,d=r.endColumn;return n<c?(n=c,o=l):n===c&&(o=Math.max(o,l)),s>u?(s=u,a=d):s===u&&(a=Math.min(a,d)),n>s||n===s&&o>a?null:new t(n,o,s,a)}equalsRange(e){return t.equalsRange(this,e)}static equalsRange(e,r){return!e&&!r?!0:!!e&&!!r&&e.startLineNumber===r.startLineNumber&&e.startColumn===r.startColumn&&e.endLineNumber===r.endLineNumber&&e.endColumn===r.endColumn}getEndPosition(){return t.getEndPosition(this)}static getEndPosition(e){return new met.Position(e.endLineNumber,e.endColumn)}getStartPosition(){return t.getStartPosition(this)}static getStartPosition(e){return new met.Position(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,r){return new t(this.startLineNumber,this.startColumn,e,r)}setStartPosition(e,r){return new t(e,r,this.endLineNumber,this.endColumn)}collapseToStart(){return t.collapseToStart(this)}static collapseToStart(e){return new t(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}collapseToEnd(){return t.collapseToEnd(this)}static collapseToEnd(e){return new t(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn)}delta(e){return new t(this.startLineNumber+e,this.startColumn,this.endLineNumber+e,this.endColumn)}isSingleLine(){return this.startLineNumber===this.endLineNumber}static fromPositions(e,r=e){return new t(e.lineNumber,e.column,r.lineNumber,r.column)}static lift(e){return e?new t(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return!!e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,r){return!(e.endLineNumber<r.startLineNumber||e.endLineNumber===r.startLineNumber&&e.endColumn<r.startColumn||r.endLineNumber<e.startLineNumber||r.endLineNumber===e.startLineNumber&&r.endColumn<e.startColumn)}static areIntersecting(e,r){return!(e.endLineNumber<r.startLineNumber||e.endLineNumber===r.startLineNumber&&e.endColumn<=r.startColumn||r.endLineNumber<e.startLineNumber||r.endLineNumber===e.startLineNumber&&r.endColumn<=e.startColumn)}static areOnlyIntersecting(e,r){return!(e.endLineNumber<r.startLineNumber-1||e.endLineNumber===r.startLineNumber&&e.endColumn<r.startColumn-1||r.endLineNumber<e.startLineNumber-1||r.endLineNumber===e.startLineNumber&&r.endColumn<e.startColumn-1)}static compareRangesUsingStarts(e,r){if(e&&r){let s=e.startLineNumber|0,a=r.startLineNumber|0;if(s===a){let c=e.startColumn|0,l=r.startColumn|0;if(c===l){let u=e.endLineNumber|0,d=r.endLineNumber|0;if(u===d){let f=e.endColumn|0,p=r.endColumn|0;return f-p}return u-d}return c-l}return s-a}return(e?1:0)-(r?1:0)}static compareRangesUsingEnds(e,r){return e.endLineNumber===r.endLineNumber?e.endColumn===r.endColumn?e.startLineNumber===r.startLineNumber?e.startColumn-r.startColumn:e.startLineNumber-r.startLineNumber:e.endColumn-r.endColumn:e.endLineNumber-r.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}};Oj.Range=Ule});var um=m(iI=>{"use strict";Object.defineProperty(iI,"__esModule",{value:!0});iI.LineRangeSet=iI.LineRange=void 0;var get=Gr(),i0r=zi(),_et=Ya(),rI=u_(),vet=Ui(),nI=class t{static ofLength(e,r){return new t(e,e+r)}static fromRange(e){return new t(e.startLineNumber,e.endLineNumber)}static fromRangeInclusive(e){return new t(e.startLineNumber,e.endLineNumber+1)}static{this.compareByStart=(0,vet.compareBy)(e=>e.startLineNumber,vet.numberComparator)}static subtract(e,r){return r?e.startLineNumber<r.startLineNumber&&r.endLineNumberExclusive<e.endLineNumberExclusive?[new t(e.startLineNumber,r.startLineNumber),new t(r.endLineNumberExclusive,e.endLineNumberExclusive)]:r.startLineNumber<=e.startLineNumber&&e.endLineNumberExclusive<=r.endLineNumberExclusive?[]:r.endLineNumberExclusive<e.endLineNumberExclusive?[new t(Math.max(r.endLineNumberExclusive,e.startLineNumber),e.endLineNumberExclusive)]:[new t(e.startLineNumber,Math.min(r.startLineNumber,e.endLineNumberExclusive))]:[e]}static joinMany(e){if(e.length===0)return[];let r=new IN(e[0].slice());for(let n=1;n<e.length;n++)r=r.getUnion(new IN(e[n].slice()));return r.ranges}static join(e){if(e.length===0)throw new get.BugIndicatingError("lineRanges cannot be empty");let r=e[0].startLineNumber,n=e[0].endLineNumberExclusive;for(let o=1;o<e.length;o++)r=Math.min(r,e[o].startLineNumber),n=Math.max(n,e[o].endLineNumberExclusive);return new t(r,n)}static deserialize(e){return new t(e[0],e[1])}constructor(e,r){if(e>r)throw new get.BugIndicatingError(`startLineNumber ${e} cannot be after endLineNumberExclusive ${r}`);this.startLineNumber=e,this.endLineNumberExclusive=r}contains(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}containsRange(e){return this.startLineNumber<=e.startLineNumber&&e.endLineNumberExclusive<=this.endLineNumberExclusive}get isEmpty(){return this.startLineNumber===this.endLineNumberExclusive}delta(e){return new t(this.startLineNumber+e,this.endLineNumberExclusive+e)}deltaLength(e){return new t(this.startLineNumber,this.endLineNumberExclusive+e)}get length(){return this.endLineNumberExclusive-this.startLineNumber}join(e){return new t(Math.min(this.startLineNumber,e.startLineNumber),Math.max(this.endLineNumberExclusive,e.endLineNumberExclusive))}toString(){return`[${this.startLineNumber},${this.endLineNumberExclusive})`}intersect(e){let r=Math.max(this.startLineNumber,e.startLineNumber),n=Math.min(this.endLineNumberExclusive,e.endLineNumberExclusive);if(r<=n)return new t(r,n)}intersectsStrict(e){return this.startLineNumber<e.endLineNumberExclusive&&e.startLineNumber<this.endLineNumberExclusive}intersectsOrTouches(e){return this.startLineNumber<=e.endLineNumberExclusive&&e.startLineNumber<=this.endLineNumberExclusive}equals(e){return this.startLineNumber===e.startLineNumber&&this.endLineNumberExclusive===e.endLineNumberExclusive}toInclusiveRange(){return this.isEmpty?null:new _et.Range(this.startLineNumber,1,this.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER)}toExclusiveRange(){return new _et.Range(this.startLineNumber,1,this.endLineNumberExclusive,1)}mapToLineArray(e){let r=[];for(let n=this.startLineNumber;n<this.endLineNumberExclusive;n++)r.push(e(n));return r}forEach(e){for(let r=this.startLineNumber;r<this.endLineNumberExclusive;r++)e(r)}serialize(){return[this.startLineNumber,this.endLineNumberExclusive]}toOffsetRange(){return new i0r.OffsetRange(this.startLineNumber-1,this.endLineNumberExclusive-1)}distanceToRange(e){return this.endLineNumberExclusive<=e.startLineNumber?e.startLineNumber-this.endLineNumberExclusive:e.endLineNumberExclusive<=this.startLineNumber?this.startLineNumber-e.endLineNumberExclusive:0}distanceToLine(e){return this.contains(e)?0:e<this.startLineNumber?this.startLineNumber-e:e-this.endLineNumberExclusive}addMargin(e,r){return new t(this.startLineNumber-e,this.endLineNumberExclusive+r)}};iI.LineRange=nI;var IN=class t{constructor(e=[]){this._normalizedRanges=e}get ranges(){return this._normalizedRanges}addRange(e){if(e.length===0)return;let r=(0,rI.findFirstIdxMonotonousOrArrLen)(this._normalizedRanges,o=>o.endLineNumberExclusive>=e.startLineNumber),n=(0,rI.findLastIdxMonotonous)(this._normalizedRanges,o=>o.startLineNumber<=e.endLineNumberExclusive)+1;if(r===n)this._normalizedRanges.splice(r,0,e);else if(r===n-1){let o=this._normalizedRanges[r];this._normalizedRanges[r]=o.join(e)}else{let o=this._normalizedRanges[r].join(this._normalizedRanges[n-1]).join(e);this._normalizedRanges.splice(r,n-r,o)}}contains(e){let r=(0,rI.findLastMonotonous)(this._normalizedRanges,n=>n.startLineNumber<=e);return!!r&&r.endLineNumberExclusive>e}intersects(e){let r=(0,rI.findLastMonotonous)(this._normalizedRanges,n=>n.startLineNumber<e.endLineNumberExclusive);return!!r&&r.endLineNumberExclusive>e.startLineNumber}getUnion(e){if(this._normalizedRanges.length===0)return e;if(e._normalizedRanges.length===0)return this;let r=[],n=0,o=0,s=null;for(;n<this._normalizedRanges.length||o<e._normalizedRanges.length;){let a=null;if(n<this._normalizedRanges.length&&o<e._normalizedRanges.length){let c=this._normalizedRanges[n],l=e._normalizedRanges[o];c.startLineNumber<l.startLineNumber?(a=c,n++):(a=l,o++)}else n<this._normalizedRanges.length?(a=this._normalizedRanges[n],n++):(a=e._normalizedRanges[o],o++);s===null?s=a:s.endLineNumberExclusive>=a.startLineNumber?s=new nI(s.startLineNumber,Math.max(s.endLineNumberExclusive,a.endLineNumberExclusive)):(r.push(s),s=a)}return s!==null&&r.push(s),new t(r)}subtractFrom(e){let r=(0,rI.findFirstIdxMonotonousOrArrLen)(this._normalizedRanges,a=>a.endLineNumberExclusive>=e.startLineNumber),n=(0,rI.findLastIdxMonotonous)(this._normalizedRanges,a=>a.startLineNumber<=e.endLineNumberExclusive)+1;if(r===n)return new t([e]);let o=[],s=e.startLineNumber;for(let a=r;a<n;a++){let c=this._normalizedRanges[a];c.startLineNumber>s&&o.push(new nI(s,c.startLineNumber)),s=c.endLineNumberExclusive}return s<e.endLineNumberExclusive&&o.push(new nI(s,e.endLineNumberExclusive)),new t(o)}toString(){return this._normalizedRanges.map(e=>e.toString()).join(", ")}getIntersection(e){let r=[],n=0,o=0;for(;n<this._normalizedRanges.length&&o<e._normalizedRanges.length;){let s=this._normalizedRanges[n],a=e._normalizedRanges[o],c=s.intersect(a);c&&!c.isEmpty&&r.push(c),s.endLineNumberExclusive<a.endLineNumberExclusive?n++:o++}return new t(r)}getWithDelta(e){return new t(this._normalizedRanges.map(r=>r.delta(e)))}};iI.LineRangeSet=IN});var oI=m(Nj=>{"use strict";Object.defineProperty(Nj,"__esModule",{value:!0});Nj.TextLength=void 0;var o0r=um(),yet=tf(),Mj=Ya(),qle=class t{static{this.zero=new t(0,0)}static lengthDiffNonNegative(e,r){return r.isLessThan(e)?t.zero:e.lineCount===r.lineCount?new t(0,r.columnCount-e.columnCount):new t(r.lineCount-e.lineCount,r.columnCount)}static betweenPositions(e,r){return e.lineNumber===r.lineNumber?new t(0,r.column-e.column):new t(r.lineNumber-e.lineNumber,r.column-1)}static fromPosition(e){return new t(e.lineNumber-1,e.column-1)}static ofRange(e){return t.betweenPositions(e.getStartPosition(),e.getEndPosition())}static ofText(e){let r=0,n=0;for(let o of e)o===`
`?(r++,n=0):n++;return new t(r,n)}static ofSubstr(e,r){return t.ofText(r.substring(e))}static sum(e,r){return e.reduce((n,o)=>n.add(r(o)),t.zero)}constructor(e,r){this.lineCount=e,this.columnCount=r}isZero(){return this.lineCount===0&&this.columnCount===0}isLessThan(e){return this.lineCount!==e.lineCount?this.lineCount<e.lineCount:this.columnCount<e.columnCount}isGreaterThan(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>e.columnCount}isGreaterThanOrEqualTo(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>=e.columnCount}equals(e){return this.lineCount===e.lineCount&&this.columnCount===e.columnCount}compare(e){return this.lineCount!==e.lineCount?this.lineCount-e.lineCount:this.columnCount-e.columnCount}add(e){return e.lineCount===0?new t(this.lineCount,this.columnCount+e.columnCount):new t(this.lineCount+e.lineCount,e.columnCount)}createRange(e){return this.lineCount===0?new Mj.Range(e.lineNumber,e.column,e.lineNumber,e.column+this.columnCount):new Mj.Range(e.lineNumber,e.column,e.lineNumber+this.lineCount,this.columnCount+1)}toRange(){return new Mj.Range(1,1,this.lineCount+1,this.columnCount+1)}toLineRange(){return o0r.LineRange.ofLength(1,this.lineCount+1)}addToPosition(e){return this.lineCount===0?new yet.Position(e.lineNumber,e.column+this.columnCount):new yet.Position(e.lineNumber+this.lineCount,this.columnCount+1)}addToRange(e){return Mj.Range.fromPositions(this.addToPosition(e.getStartPosition()),this.addToPosition(e.getEndPosition()))}toString(){return`${this.lineCount},${this.columnCount}`}};Nj.TextLength=qle});var kj=m(xT=>{"use strict";Object.defineProperty(xT,"__esModule",{value:!0});xT.PositionOffsetTransformer=xT.PositionOffsetTransformerBase=void 0;xT._setPositionOffsetTransformerDependencies=l0r;var s0r=u_(),a0r=zi(),PN=tf(),c0r=Ya(),Lj=class{getOffsetRange(e){return new a0r.OffsetRange(this.getOffset(e.getStartPosition()),this.getOffset(e.getEndPosition()))}getRange(e){return c0r.Range.fromPositions(this.getPosition(e.start),this.getPosition(e.endExclusive))}getStringEdit(e){let r=e.replacements.map(n=>this.getStringReplacement(n));return new dm.deps.StringEdit(r)}getStringReplacement(e){return new dm.deps.StringReplacement(this.getOffsetRange(e.range),e.text)}getTextReplacement(e){return new dm.deps.TextReplacement(this.getRange(e.replaceRange),e.newText)}getTextEdit(e){let r=e.replacements.map(n=>this.getTextReplacement(n));return new dm.deps.TextEdit(r)}};xT.PositionOffsetTransformerBase=Lj;var dm=class{static{this._deps=void 0}static get deps(){if(!this._deps)throw new Error("Dependencies not set. Call _setDependencies first.");return this._deps}};function l0r(t){dm._deps=t}var Fle=class extends Lj{constructor(e){super(),this.text=e}get lineStartOffsetByLineIdx(){return this._lineStartOffsetByLineIdx||this._computeLineOffsets(),this._lineStartOffsetByLineIdx}get lineEndOffsetByLineIdx(){return this._lineEndOffsetByLineIdx||this._computeLineOffsets(),this._lineEndOffsetByLineIdx}_computeLineOffsets(){this._lineStartOffsetByLineIdx=[],this._lineEndOffsetByLineIdx=[],this._lineStartOffsetByLineIdx.push(0);for(let e=0;e<this.text.length;e++)this.text.charAt(e)===`
`&&(this._lineStartOffsetByLineIdx.push(e+1),e>0&&this.text.charAt(e-1)==="\r"?this._lineEndOffsetByLineIdx.push(e-1):this._lineEndOffsetByLineIdx.push(e));this._lineEndOffsetByLineIdx.push(this.text.length)}getOffset(e){let r=this._validatePosition(e);return this.lineStartOffsetByLineIdx[r.lineNumber-1]+r.column-1}_validatePosition(e){if(e.lineNumber<1)return new PN.Position(1,1);let r=this.textLength.lineCount+1;if(e.lineNumber>r){let o=this.getLineLength(r);return new PN.Position(r,o+1)}if(e.column<1)return new PN.Position(e.lineNumber,1);let n=this.getLineLength(e.lineNumber);return e.column-1>n?new PN.Position(e.lineNumber,n+1):e}getPosition(e){let r=(0,s0r.findLastIdxMonotonous)(this.lineStartOffsetByLineIdx,s=>s<=e),n=r+1,o=e-this.lineStartOffsetByLineIdx[r]+1;return new PN.Position(n,o)}getTextLength(e){return dm.deps.TextLength.ofRange(this.getRange(e))}get textLength(){let e=this.lineStartOffsetByLineIdx.length-1;return new dm.deps.TextLength(e,this.text.length-this.lineStartOffsetByLineIdx[e])}getLineLength(e){return this.lineEndOffsetByLineIdx[e-1]-this.lineStartOffsetByLineIdx[e-1]}};xT.PositionOffsetTransformer=Fle});var up=m(lp=>{"use strict";Object.defineProperty(lp,"__esModule",{value:!0});lp.StringText=lp.ArrayText=lp.LineBasedText=lp.AbstractText=void 0;var u0r=qi(),d0r=Fo(),f0r=tf(),Eet=Ya(),p0r=oI(),Tet=kj(),RN=class{constructor(){this._transformer=void 0}get endPositionExclusive(){return this.length.addToPosition(new f0r.Position(1,1))}get lineRange(){return this.length.toLineRange()}getValue(){return this.getValueOfRange(this.length.toRange())}getValueOfOffsetRange(e){return this.getValueOfRange(this.getTransformer().getRange(e))}getLineLength(e){return this.getValueOfRange(new Eet.Range(e,1,e,Number.MAX_SAFE_INTEGER)).length}getTransformer(){return this._transformer||(this._transformer=new Tet.PositionOffsetTransformer(this.getValue())),this._transformer}getLineAt(e){return this.getValueOfRange(new Eet.Range(e,1,e,Number.MAX_SAFE_INTEGER))}getLines(){let e=this.getValue();return(0,d0r.splitLines)(e)}getLinesOfRange(e){return e.mapToLineArray(r=>this.getLineAt(r))}equals(e){return this===e?!0:this.getValue()===e.getValue()}};lp.AbstractText=RN;var Dj=class extends RN{constructor(e,r){(0,u0r.assert)(r>=1),super(),this._getLineContent=e,this._lineCount=r}getValueOfRange(e){if(e.startLineNumber===e.endLineNumber)return this._getLineContent(e.startLineNumber).substring(e.startColumn-1,e.endColumn-1);let r=this._getLineContent(e.startLineNumber).substring(e.startColumn-1);for(let n=e.startLineNumber+1;n<e.endLineNumber;n++)r+=`
`+this._getLineContent(n);return r+=`
`+this._getLineContent(e.endLineNumber).substring(0,e.endColumn-1),r}getLineLength(e){return this._getLineContent(e).length}get length(){let e=this._getLineContent(this._lineCount);return new p0r.TextLength(this._lineCount-1,e.length)}};lp.LineBasedText=Dj;var jle=class extends Dj{constructor(e){super(r=>e[r-1],e.length)}};lp.ArrayText=jle;var Ble=class extends RN{constructor(e){super(),this.value=e,this._t=new Tet.PositionOffsetTransformer(this.value)}getValueOfRange(e){return this._t.getOffsetRange(e).substring(this.value)}get length(){return this._t.textLength}getTransformer(){return this._t}};lp.StringText=Ble});var Cet=m(dp=>{"use strict";Object.defineProperty(dp,"__esModule",{value:!0});dp.AnnotationReplacement=dp.Edit=dp.BaseReplacement=dp.BaseEdit=void 0;var h0r=Ui(),bet=Gr(),Qu=zi(),Uj=class{constructor(e){this.replacements=e;let r=-1;for(let n of e){if(!(n.replaceRange.start>=r))throw new bet.BugIndicatingError(`Edits must be disjoint and sorted. Found ${n} after ${r}`);r=n.replaceRange.endExclusive}}equals(e){if(this.replacements.length!==e.replacements.length)return!1;for(let r=0;r<this.replacements.length;r++)if(!this.replacements[r].equals(e.replacements[r]))return!1;return!0}toString(){return`[${this.replacements.map(r=>r.toString()).join(", ")}]`}normalize(){let e=[],r;for(let n of this.replacements)if(!(n.getNewLength()===0&&n.replaceRange.length===0)){if(r&&r.replaceRange.endExclusive===n.replaceRange.start){let o=r.tryJoinTouching(n);if(o){r=o;continue}}r&&e.push(r),r=n}return r&&e.push(r),this._createNew(e)}compose(e){let r=this.normalize(),n=e.normalize();if(r.isEmpty())return n;if(n.isEmpty())return r;let o=[...r.replacements],s=[],a=0;for(let c of n.replacements){for(;;){let f=o[0];if(!f||f.replaceRange.start+a+f.getNewLength()>=c.replaceRange.start)break;o.shift(),s.push(f),a+=f.getNewLength()-f.replaceRange.length}let l=a,u,d;for(;;){let f=o[0];if(!f||f.replaceRange.start+a>c.replaceRange.endExclusive)break;u||(u=f),d=f,o.shift(),a+=f.getNewLength()-f.replaceRange.length}if(!u)s.push(c.delta(-a));else{let f=Math.min(u.replaceRange.start,c.replaceRange.start-l),p=c.replaceRange.start-(u.replaceRange.start+l);if(p>0){let v=u.slice(Qu.OffsetRange.emptyAt(f),new Qu.OffsetRange(0,p));s.push(v)}if(!d)throw new bet.BugIndicatingError("Invariant violation: lastIntersecting is undefined");let h=d.replaceRange.endExclusive+a-c.replaceRange.endExclusive;if(h>0){let v=d.slice(Qu.OffsetRange.ofStartAndLength(d.replaceRange.endExclusive,0),new Qu.OffsetRange(d.getNewLength()-h,d.getNewLength()));o.unshift(v),a-=v.getNewLength()-v.replaceRange.length}let _=new Qu.OffsetRange(f,c.replaceRange.endExclusive-a),g=c.slice(_,new Qu.OffsetRange(0,c.getNewLength()));s.push(g)}}for(;;){let c=o.shift();if(!c)break;s.push(c)}return this._createNew(s).normalize()}decomposeSplit(e){let r=[],n=[],o=0;for(let s of this.replacements)e(s)?(r.push(s),o+=s.getNewLength()-s.replaceRange.length):n.push(s.slice(s.replaceRange.delta(o),new Qu.OffsetRange(0,s.getNewLength())));return{e1:this._createNew(r),e2:this._createNew(n)}}getNewRanges(){let e=[],r=0;for(let n of this.replacements)e.push(Qu.OffsetRange.ofStartAndLength(n.replaceRange.start+r,n.getNewLength())),r+=n.getLengthDelta();return e}getJoinedReplaceRange(){if(this.replacements.length!==0)return this.replacements[0].replaceRange.join(this.replacements.at(-1).replaceRange)}isEmpty(){return this.replacements.length===0}getLengthDelta(){return(0,h0r.sumBy)(this.replacements,e=>e.getLengthDelta())}getNewDataLength(e){return e+this.getLengthDelta()}applyToOffset(e){let r=0;for(let n of this.replacements)if(n.replaceRange.start<=e){if(e<n.replaceRange.endExclusive)return n.replaceRange.start+r;r+=n.getNewLength()-n.replaceRange.length}else break;return e+r}applyToOffsetRange(e){return new Qu.OffsetRange(this.applyToOffset(e.start),this.applyToOffset(e.endExclusive))}applyInverseToOffset(e){let r=0;for(let n of this.replacements){let o=n.getNewLength();if(n.replaceRange.start<=e-r){if(e-r<n.replaceRange.start+o)return n.replaceRange.start;r+=o-n.replaceRange.length}else break}return e-r}applyToOffsetOrUndefined(e){let r=0;for(let n of this.replacements)if(n.replaceRange.start<=e){if(e<n.replaceRange.endExclusive)return;r+=n.getNewLength()-n.replaceRange.length}else break;return e+r}applyToOffsetRangeOrUndefined(e){let r=this.applyToOffsetOrUndefined(e.start);if(r===void 0)return;let n=this.applyToOffsetOrUndefined(e.endExclusive);if(n!==void 0)return new Qu.OffsetRange(r,n)}};dp.BaseEdit=Uj;var qj=class{constructor(e){this.replaceRange=e}delta(e){return this.slice(this.replaceRange.delta(e),new Qu.OffsetRange(0,this.getNewLength()))}getLengthDelta(){return this.getNewLength()-this.replaceRange.length}toString(){return`{ ${this.replaceRange.toString()} -> ${this.getNewLength()} }`}get isEmpty(){return this.getNewLength()===0&&this.replaceRange.length===0}getRangeAfterReplace(){return new Qu.OffsetRange(this.replaceRange.start,this.replaceRange.start+this.getNewLength())}};dp.BaseReplacement=qj;var $le=class t extends Uj{static{this.empty=new t([])}static create(e){return new t(e)}static single(e){return new t([e])}_createNew(e){return new t(e)}};dp.Edit=$le;var Vle=class t extends qj{constructor(e,r,n){super(e),this.newLength=r,this.annotation=n}equals(e){return this.replaceRange.equals(e.replaceRange)&&this.newLength===e.newLength&&this.annotation===e.annotation}getNewLength(){return this.newLength}tryJoinTouching(e){if(this.annotation===e.annotation)return new t(this.replaceRange.joinRightTouching(e.replaceRange),this.newLength+e.newLength,this.annotation)}slice(e,r){return new t(e,r?r.length:this.newLength,this.annotation)}};dp.AnnotationReplacement=Vle});var Wl=m(Ms=>{"use strict";Object.defineProperty(Ms,"__esModule",{value:!0});Ms.AnnotatedStringReplacement=Ms.AnnotatedStringEdit=Ms.VoidEditData=Ms.StringReplacement=Ms.StringEdit=Ms.BaseStringReplacement=Ms.BaseStringEdit=void 0;Ms.applyEditsToRanges=g0r;var Fj=Fo(),pp=zi(),m0r=up(),Aet=Cet(),ON=class extends Aet.BaseEdit{get TReplacement(){throw new Error("TReplacement is not defined for BaseStringEdit")}static composeOrUndefined(e){if(e.length===0)return;let r=e[0];for(let n=1;n<e.length;n++)r=r.compose(e[n]);return r}static trySwap(e,r){let n=e.inverseOnSlice((a,c)=>" ".repeat(c-a)),o=r.tryRebase(n);if(!o)return;let s=e.tryRebase(o);if(s)return{e1:o,e2:s}}apply(e){let r=[],n=0;for(let o of this.replacements)r.push(e.substring(n,o.replaceRange.start)),r.push(o.newText),n=o.replaceRange.endExclusive;return r.push(e.substring(n)),r.join("")}inverseOnSlice(e){let r=[],n=0;for(let o of this.replacements)r.push($c.replace(pp.OffsetRange.ofStartAndLength(o.replaceRange.start+n,o.newText.length),e(o.replaceRange.start,o.replaceRange.endExclusive))),n+=o.newText.length-o.replaceRange.length;return new fp(r)}inverse(e){return this.inverseOnSlice((r,n)=>e.substring(r,n))}rebaseSkipConflicting(e){return this._tryRebase(e,!1)}tryRebase(e){return this._tryRebase(e,!0)}_tryRebase(e,r){let n=[],o=0,s=0,a=0;for(;s<this.replacements.length||o<e.replacements.length;){let c=e.replacements[o],l=this.replacements[s];if(l)if(!c)n.push(new $c(l.replaceRange.delta(a),l.newText)),s++;else if(l.replaceRange.intersectsOrTouches(c.replaceRange)){if(s++,r)return}else l.replaceRange.start<c.replaceRange.start?(n.push(new $c(l.replaceRange.delta(a),l.newText)),s++):(o++,a+=c.newText.length-c.replaceRange.length);else break}return new fp(n)}toJson(){return this.replacements.map(e=>e.toJson())}isNeutralOn(e){return this.replacements.every(r=>r.isNeutralOn(e))}removeCommonSuffixPrefix(e){let r=[];for(let n of this.replacements){let o=n.removeCommonSuffixPrefix(e);o.isEmpty||r.push(o)}return new fp(r)}normalizeEOL(e){return new fp(this.replacements.map(r=>r.normalizeEOL(e)))}normalizeOnSource(e){let r=this.apply(e),o=$c.replace(pp.OffsetRange.ofLength(e.length),r).removeCommonSuffixAndPrefix(e);return o.isEmpty?fp.empty:o.toEdit()}removeCommonSuffixAndPrefix(e){return this._createNew(this.replacements.map(r=>r.removeCommonSuffixAndPrefix(e))).normalize()}applyOnText(e){return new m0r.StringText(this.apply(e.value))}mapData(e){return new jj(this.replacements.map(r=>new wT(r.replaceRange,r.newText,e(r))))}};Ms.BaseStringEdit=ON;var MN=class extends Aet.BaseReplacement{constructor(e,r){super(e),this.newText=r}getNewLength(){return this.newText.length}toString(){return`${this.replaceRange} -> ${JSON.stringify(this.newText)}`}replace(e){return e.substring(0,this.replaceRange.start)+this.newText+e.substring(this.replaceRange.endExclusive)}isNeutralOn(e){return this.newText===e.substring(this.replaceRange.start,this.replaceRange.endExclusive)}removeCommonSuffixPrefix(e){let r=e.substring(this.replaceRange.start,this.replaceRange.endExclusive),n=(0,Fj.commonPrefixLength)(r,this.newText),o=Math.min(r.length-n,this.newText.length-n,(0,Fj.commonSuffixLength)(r,this.newText)),s=new pp.OffsetRange(this.replaceRange.start+n,this.replaceRange.endExclusive-o),a=this.newText.substring(n,this.newText.length-o);return new $c(s,a)}normalizeEOL(e){let r=this.newText.replace(/\r\n|\n/g,e);return new $c(this.replaceRange,r)}removeCommonSuffixAndPrefix(e){return this.removeCommonSuffix(e).removeCommonPrefix(e)}removeCommonPrefix(e){let r=this.replaceRange.substring(e),n=(0,Fj.commonPrefixLength)(r,this.newText);return n===0?this:this.slice(this.replaceRange.deltaStart(n),new pp.OffsetRange(n,this.newText.length))}removeCommonSuffix(e){let r=this.replaceRange.substring(e),n=(0,Fj.commonSuffixLength)(r,this.newText);return n===0?this:this.slice(this.replaceRange.deltaEnd(-n),new pp.OffsetRange(0,this.newText.length-n))}toEdit(){return new fp([this])}toJson(){return{txt:this.newText,pos:this.replaceRange.start,len:this.replaceRange.length}}};Ms.BaseStringReplacement=MN;var fp=class t extends ON{static{this.empty=new t([])}static create(e){return new t(e)}static single(e){return new t([e])}static replace(e,r){return new t([new $c(e,r)])}static insert(e,r){return new t([new $c(pp.OffsetRange.emptyAt(e),r)])}static delete(e){return new t([new $c(e,"")])}static fromJson(e){return new t(e.map($c.fromJson))}static compose(e){if(e.length===0)return t.empty;let r=e[0];for(let n=1;n<e.length;n++)r=r.compose(e[n]);return r}static composeSequentialReplacements(e){let r=t.empty,n=[];for(let o of e){let s=n.at(-1);!s||o.replaceRange.isBefore(s.replaceRange)?n.push(o):(r=r.compose(t.create(n.reverse())),n=[o])}return r=r.compose(t.create(n.reverse())),r}constructor(e){super(e)}_createNew(e){return new t(e)}};Ms.StringEdit=fp;var $c=class t extends MN{static insert(e,r){return new t(pp.OffsetRange.emptyAt(e),r)}static replace(e,r){return new t(e,r)}static delete(e){return new t(e,"")}static fromJson(e){return new t(pp.OffsetRange.ofStartAndLength(e.pos,e.len),e.txt)}equals(e){return this.replaceRange.equals(e.replaceRange)&&this.newText===e.newText}tryJoinTouching(e){return new t(this.replaceRange.joinRightTouching(e.replaceRange),this.newText+e.newText)}slice(e,r){return new t(e,r?r.substring(this.newText):this.newText)}};Ms.StringReplacement=$c;function g0r(t,e){t=t.slice();let r=[],n=0;for(let o of e.replacements){for(;;){let a=t[0];if(!a||a.endExclusive>=o.replaceRange.start)break;t.shift(),r.push(a.delta(n))}let s=[];for(;;){let a=t[0];if(!a||!a.intersectsOrTouches(o.replaceRange))break;t.shift(),s.push(a)}for(let a=s.length-1;a>=0;a--){let c=s[a],l=c.intersect(o.replaceRange).length;c=c.deltaEnd(-l+(a===0?o.newText.length:0));let u=c.start-o.replaceRange.start;u>0&&(c=c.delta(-u)),a!==0&&(c=c.delta(o.newText.length)),c=c.delta(-(o.newText.length-o.replaceRange.length)),t.unshift(c)}n+=o.newText.length-o.replaceRange.length}for(;;){let o=t[0];if(!o)break;t.shift(),r.push(o.delta(n))}return r}var Hle=class{join(e){return this}};Ms.VoidEditData=Hle;var jj=class t extends ON{static{this.empty=new t([])}static create(e){return new t(e)}static single(e){return new t([e])}static replace(e,r,n){return new t([new wT(e,r,n)])}static insert(e,r,n){return new t([new wT(pp.OffsetRange.emptyAt(e),r,n)])}static delete(e,r){return new t([new wT(e,"",r)])}static compose(e){if(e.length===0)return t.empty;let r=e[0];for(let n=1;n<e.length;n++)r=r.compose(e[n]);return r}constructor(e){super(e)}_createNew(e){return new t(e)}toStringEdit(e){let r=[];for(let n of this.replacements)(!e||e(n))&&r.push(new $c(n.replaceRange,n.newText));return new fp(r)}};Ms.AnnotatedStringEdit=jj;var wT=class t extends MN{static insert(e,r,n){return new t(pp.OffsetRange.emptyAt(e),r,n)}static replace(e,r,n){return new t(e,r,n)}static delete(e,r){return new t(e,"",r)}constructor(e,r,n){super(e,r),this.data=n}equals(e){return this.replaceRange.equals(e.replaceRange)&&this.newText===e.newText&&this.data===e.data}tryJoinTouching(e){let r=this.data.join(e.data);if(r!==void 0)return new t(this.replaceRange.joinRightTouching(e.replaceRange),this.newText+e.newText,r)}slice(e,r){return new t(e,r?r.substring(this.newText):this.newText,this.data)}};Ms.AnnotatedStringReplacement=wT});var NN=m(sI=>{"use strict";Object.defineProperty(sI,"__esModule",{value:!0});sI.TextReplacement=sI.TextEdit=void 0;var xet=Ui(),wet=qi(),Gle=Gr(),Bj=Fo(),b1=tf(),Qa=Ya(),Vj=oI(),Iet=up(),Hj=class t{static fromStringEdit(e,r){let n=e.replacements.map(o=>hp.fromStringReplacement(o,r));return new t(n)}static replace(e,r){return new t([new hp(e,r)])}static delete(e){return new t([new hp(e,"")])}static insert(e,r){return new t([new hp(Qa.Range.fromPositions(e,e),r)])}static fromParallelReplacementsUnsorted(e){let r=e.slice().sort((0,xet.compareBy)(n=>n.range,Qa.Range.compareRangesUsingStarts));return new t(r)}constructor(e){this.replacements=e,(0,wet.assertFn)(()=>(0,wet.checkAdjacentItems)(e,(r,n)=>r.range.getEndPosition().isBeforeOrEqual(n.range.getStartPosition())))}normalize(){let e=[];for(let r of this.replacements)if(e.length>0&&e[e.length-1].range.getEndPosition().equals(r.range.getStartPosition())){let n=e[e.length-1];e[e.length-1]=new hp(n.range.plusRange(r.range),n.text+r.text)}else r.isEmpty||e.push(r);return new t(e)}mapPosition(e){let r=0,n=0,o=0;for(let s of this.replacements){let a=s.range.getStartPosition();if(e.isBeforeOrEqual(a))break;let c=s.range.getEndPosition(),l=Vj.TextLength.ofText(s.text);if(e.isBefore(c)){let u=new b1.Position(a.lineNumber+r,a.column+(a.lineNumber+r===n?o:0)),d=l.addToPosition(u);return $j(u,d)}a.lineNumber+r!==n&&(o=0),r+=l.lineCount-(s.range.endLineNumber-s.range.startLineNumber),l.lineCount===0?c.lineNumber!==a.lineNumber?o+=l.columnCount-(c.column-1):o+=l.columnCount-(c.column-a.column):o=l.columnCount,n=c.lineNumber+r}return new b1.Position(e.lineNumber+r,e.column+(e.lineNumber+r===n?o:0))}mapRange(e){function r(a){return a instanceof b1.Position?a:a.getStartPosition()}function n(a){return a instanceof b1.Position?a:a.getEndPosition()}let o=r(this.mapPosition(e.getStartPosition())),s=n(this.mapPosition(e.getEndPosition()));return $j(o,s)}inverseMapPosition(e,r){return this.inverse(r).mapPosition(e)}inverseMapRange(e,r){return this.inverse(r).mapRange(e)}apply(e){let r="",n=new b1.Position(1,1);for(let s of this.replacements){let a=s.range,c=a.getStartPosition(),l=a.getEndPosition(),u=$j(n,c);u.isEmpty()||(r+=e.getValueOfRange(u)),r+=s.text,n=l}let o=$j(n,e.endPositionExclusive);return o.isEmpty()||(r+=e.getValueOfRange(o)),r}applyToString(e){let r=new Iet.StringText(e);return this.apply(r)}inverse(e){let r=this.getNewRanges();return new t(this.replacements.map((n,o)=>new hp(r[o],e.getValueOfRange(n.range))))}getNewRanges(){let e=[],r=0,n=0,o=0;for(let s of this.replacements){let a=Vj.TextLength.ofText(s.text),c=b1.Position.lift({lineNumber:s.range.startLineNumber+n,column:s.range.startColumn+(s.range.startLineNumber===r?o:0)}),l=a.createRange(c);e.push(l),n=l.endLineNumber-s.range.endLineNumber,o=l.endColumn-s.range.endColumn,r=s.range.endLineNumber}return e}toReplacement(e){if(this.replacements.length===0)throw new Gle.BugIndicatingError;if(this.replacements.length===1)return this.replacements[0];let r=this.replacements[0].range.getStartPosition(),n=this.replacements[this.replacements.length-1].range.getEndPosition(),o="";for(let s=0;s<this.replacements.length;s++){let a=this.replacements[s];if(o+=a.text,s<this.replacements.length-1){let c=this.replacements[s+1],l=Qa.Range.fromPositions(a.range.getEndPosition(),c.range.getStartPosition()),u=e.getValueOfRange(l);o+=u}}return new hp(Qa.Range.fromPositions(r,n),o)}equals(e){return(0,xet.equals)(this.replacements,e.replacements,(r,n)=>r.equals(n))}toString(e){return e===void 0?this.replacements.map(r=>r.toString()).join(`
`):typeof e=="string"?this.toString(new Iet.StringText(e)):this.replacements.length===0?"":this.replacements.map(r=>{let o=e.getValueOfRange(r.range),s=Qa.Range.fromPositions(new b1.Position(Math.max(1,r.range.startLineNumber-1),1),r.range.getStartPosition()),a=e.getValueOfRange(s);a.length>10&&(a="..."+a.substring(a.length-10));let c=Qa.Range.fromPositions(r.range.getEndPosition(),new b1.Position(r.range.endLineNumber+1,1)),l=e.getValueOfRange(c);l.length>10&&(l=l.substring(0,10)+"...");let u=o;if(u.length>10){let f=Math.floor(5);u=u.substring(0,f)+"..."+u.substring(u.length-f)}let d=r.text;if(d.length>10){let f=Math.floor(5);d=d.substring(0,f)+"..."+d.substring(d.length-f)}return u.length===0?`${a}\u2770${d}\u2771${l}`:`${a}\u2770${u}\u21A6${d}\u2771${l}`}).join(`
`)}};sI.TextEdit=Hj;var hp=class t{static joinReplacements(e,r){if(e.length===0)throw new Gle.BugIndicatingError;if(e.length===1)return e[0];let n=e[0].range.getStartPosition(),o=e[e.length-1].range.getEndPosition(),s="";for(let a=0;a<e.length;a++){let c=e[a];if(s+=c.text,a<e.length-1){let l=e[a+1],u=Qa.Range.fromPositions(c.range.getEndPosition(),l.range.getStartPosition()),d=r.getValueOfRange(u);s+=d}}return new t(Qa.Range.fromPositions(n,o),s)}static fromStringReplacement(e,r){return new t(r.getTransformer().getRange(e.replaceRange),e.newText)}static delete(e){return new t(e,"")}constructor(e,r){this.range=e,this.text=r}get isEmpty(){return this.range.isEmpty()&&this.text.length===0}static equals(e,r){return e.range.equalsRange(r.range)&&e.text===r.text}toSingleEditOperation(){return{range:this.range,text:this.text}}toEdit(){return new Hj([this])}equals(e){return t.equals(this,e)}extendToCoverRange(e,r){if(this.range.containsRange(e))return this;let n=this.range.plusRange(e),o=r.getValueOfRange(Qa.Range.fromPositions(n.getStartPosition(),this.range.getStartPosition())),s=r.getValueOfRange(Qa.Range.fromPositions(this.range.getEndPosition(),n.getEndPosition())),a=o+this.text+s;return new t(n,a)}extendToFullLine(e){let r=new Qa.Range(this.range.startLineNumber,1,this.range.endLineNumber,e.getTransformer().getLineLength(this.range.endLineNumber)+1);return this.extendToCoverRange(r,e)}removeCommonPrefixAndSuffix(e){return this.removeCommonPrefix(e).removeCommonSuffix(e)}removeCommonPrefix(e){let r=e.getValueOfRange(this.range).replaceAll(`\r
`,`
`),n=this.text.replaceAll(`\r
`,`
`),o=(0,Bj.commonPrefixLength)(r,n),s=Vj.TextLength.ofText(r.substring(0,o)).addToPosition(this.range.getStartPosition()),a=n.substring(o),c=Qa.Range.fromPositions(s,this.range.getEndPosition());return new t(c,a)}removeCommonSuffix(e){let r=e.getValueOfRange(this.range).replaceAll(`\r
`,`
`),n=this.text.replaceAll(`\r
`,`
`),o=(0,Bj.commonSuffixLength)(r,n),s=Vj.TextLength.ofText(r.substring(0,r.length-o)).addToPosition(this.range.getStartPosition()),a=n.substring(0,n.length-o),c=Qa.Range.fromPositions(this.range.getStartPosition(),s);return new t(c,a)}isEffectiveDeletion(e){let r=this.text.replaceAll(`\r
`,`
`),n=e.getValueOfRange(this.range).replaceAll(`\r
`,`
`),o=(0,Bj.commonPrefixLength)(r,n);r=r.substring(o),n=n.substring(o);let s=(0,Bj.commonSuffixLength)(r,n);return r=r.substring(0,r.length-s),n=n.substring(0,n.length-s),r===""}toString(){let e=this.range.getStartPosition(),r=this.range.getEndPosition();return`(${e.lineNumber},${e.column} -> ${r.lineNumber},${r.column}): "${this.text}"`}};sI.TextReplacement=hp;function $j(t,e){if(t.lineNumber===e.lineNumber&&t.column===Number.MAX_SAFE_INTEGER)return Qa.Range.fromPositions(e,e);if(!t.isBeforeOrEqual(e))throw new Gle.BugIndicatingError("start must be before end");return new Qa.Range(t.lineNumber,t.column,e.lineNumber,e.column)}});var uI=m(C1=>{"use strict";Object.defineProperty(C1,"__esModule",{value:!0});C1.SerializedLineReplacement=C1.LineReplacement=C1.LineEdit=void 0;var zle=Ui(),Pet=qi(),_0r=Fo(),LN=um(),Oet=Wl(),aI=tf(),cI=Ya(),lI=NN(),Gj=class t{static{this.empty=new t([])}static deserialize(e){return new t(e.map(r=>IT.deserialize(r)))}static fromStringEdit(e,r){let n=lI.TextEdit.fromStringEdit(e,r);return t.fromTextEdit(n,r)}static fromTextEdit(e,r){let n=e.replacements,o=[],s=[];for(let a=0;a<n.length;a++){let c=n[a],l=a+1<n.length?n[a+1]:void 0;if(s.push(c),l&&l.range.startLineNumber===c.range.endLineNumber)continue;let u=lI.TextReplacement.joinReplacements(s,r);s.length=0;let d=IT.fromSingleTextEdit(u,r);o.push(d)}return new t(o)}static createFromUnsorted(e){let r=e.slice();return r.sort((0,zle.compareBy)(n=>n.lineRange.startLineNumber,zle.numberComparator)),new t(r)}constructor(e){this.replacements=e,(0,Pet.assert)((0,Pet.checkAdjacentItems)(e,(r,n)=>r.lineRange.endLineNumberExclusive<=n.lineRange.startLineNumber))}isEmpty(){return this.replacements.length===0}toEdit(e){let r=[];for(let n of this.replacements){let o=n.toSingleEdit(e);r.push(o)}return new Oet.StringEdit(r)}toString(){return this.replacements.map(e=>e.toString()).join(",")}serialize(){return this.replacements.map(e=>e.serialize())}getNewLineRanges(){let e=[],r=0;for(let n of this.replacements)e.push(LN.LineRange.ofLength(n.lineRange.startLineNumber+r,n.newLines.length)),r+=n.newLines.length-n.lineRange.length;return e}mapLineNumber(e){let r=0;for(let n of this.replacements){if(n.lineRange.endLineNumberExclusive>e)break;r+=n.newLines.length-n.lineRange.length}return e+r}mapLineRange(e){return new LN.LineRange(this.mapLineNumber(e.startLineNumber),this.mapLineNumber(e.endLineNumberExclusive))}mapBackLineRange(e,r){return this.inverse(r).mapLineRange(e)}touches(e){return this.replacements.some(r=>e.replacements.some(n=>r.lineRange.intersect(n.lineRange)))}rebase(e){return new t(this.replacements.map(r=>new IT(e.mapLineRange(r.lineRange),r.newLines)))}humanReadablePatch(e){let r=[];function n(c,l,u,d){let f=u==="unmodified"?" ":u==="deleted"?"-":"+";d===void 0&&(d="[[[[[ WARNING: LINE DOES NOT EXIST ]]]]]");let p=c===-1?"   ":c.toString().padStart(3," "),h=l===-1?"   ":l.toString().padStart(3," ");r.push(`${f} ${p} ${h} ${d}`)}function o(){r.push("---")}let s=0,a=!0;for(let c of(0,zle.groupAdjacentBy)(this.replacements,(l,u)=>l.lineRange.distanceToRange(u.lineRange)<=5)){a?a=!1:o();let l=c[0].lineRange.startLineNumber-2;for(let u of c){for(let p=Math.max(1,l);p<u.lineRange.startLineNumber;p++)n(p,p+s,"unmodified",e[p-1]);let d=u.lineRange,f=u.newLines;for(let p of d.mapToLineArray(h=>h)){let h=e[p-1];n(p,-1,"deleted",h)}for(let p=0;p<f.length;p++){let h=f[p];n(-1,d.startLineNumber+s+p,"added",h)}l=d.endLineNumberExclusive,s+=u.newLines.length-u.lineRange.length}for(let u=l;u<=Math.min(l+2,e.length);u++)n(u,u+s,"unmodified",e[u-1])}return r.join(`
`)}apply(e){let r=[],n=0;for(let o of this.replacements){for(;n<o.lineRange.startLineNumber-1;)r.push(e[n]),n++;for(let s of o.newLines)r.push(s);n=o.lineRange.endLineNumberExclusive-1}for(;n<e.length;)r.push(e[n]),n++;return r}inverse(e){let r=this.getNewLineRanges();return new t(this.replacements.map((n,o)=>new IT(r[o],e.slice(n.lineRange.startLineNumber-1,n.lineRange.endLineNumberExclusive-1))))}};C1.LineEdit=Gj;var IT=class t{static deserialize(e){return new t(LN.LineRange.ofLength(e[0],e[1]-e[0]),e[2])}static fromSingleTextEdit(e,r){let n=(0,_0r.splitLines)(e.text),o=e.range.startLineNumber,s=r.getValueOfRange(cI.Range.fromPositions(new aI.Position(e.range.startLineNumber,1),e.range.getStartPosition()));n[0]=s+n[0];let a=e.range.endLineNumber+1,c=r.getTransformer().getLineLength(e.range.endLineNumber)+1,l=r.getValueOfRange(cI.Range.fromPositions(e.range.getEndPosition(),new aI.Position(e.range.endLineNumber,c)));n[n.length-1]=n[n.length-1]+l;let u=e.range.startColumn===r.getTransformer().getLineLength(e.range.startLineNumber)+1,d=e.range.endColumn===1;return u&&n[0].length===s.length&&(o++,n.shift()),n.length>0&&o<a&&d&&n[n.length-1].length===l.length&&(a--,n.pop()),new t(new LN.LineRange(o,a),n)}constructor(e,r){this.lineRange=e,this.newLines=r}toSingleTextEdit(e){if(this.newLines.length===0){let r=e.getTransformer().textLength;if(this.lineRange.endLineNumberExclusive===r.lineCount+2){let n;if(this.lineRange.startLineNumber>1){let s=this.lineRange.startLineNumber-1,a=e.getTransformer().getLineLength(s)+1;n=new aI.Position(s,a)}else n=new aI.Position(1,1);let o=r.addToPosition(new aI.Position(1,1));return new lI.TextReplacement(cI.Range.fromPositions(n,o),"")}else return new lI.TextReplacement(new cI.Range(this.lineRange.startLineNumber,1,this.lineRange.endLineNumberExclusive,1),"")}else if(this.lineRange.isEmpty){let r,n,o,s=this.lineRange.startLineNumber;return s===e.getTransformer().textLength.lineCount+2?(r=s-1,n=e.getTransformer().getLineLength(r)+1,o=this.newLines.map(a=>`
`+a).join("")):(r=s,n=1,o=this.newLines.map(a=>a+`
`).join("")),new lI.TextReplacement(cI.Range.fromPositions(new aI.Position(r,n)),o)}else{let r=this.lineRange.endLineNumberExclusive-1,n=e.getTransformer().getLineLength(r)+1,o=new cI.Range(this.lineRange.startLineNumber,1,r,n),s=this.newLines.join(`
`);return new lI.TextReplacement(o,s)}}toSingleEdit(e){let r=this.toSingleTextEdit(e),n=e.getTransformer().getOffsetRange(r.range);return new Oet.StringReplacement(n,r.text)}toString(){return`${this.lineRange}->${JSON.stringify(this.newLines)}`}serialize(){return[this.lineRange.startLineNumber,this.lineRange.endLineNumberExclusive,this.newLines]}removeCommonSuffixPrefixLines(e){let r=this.lineRange.startLineNumber,n=this.lineRange.endLineNumberExclusive,o=0;for(;r<n&&o<this.newLines.length&&this.newLines[o]===e.getLineAt(r);)r++,o++;let s=0;for(;r<n&&s+o<this.newLines.length&&this.newLines[this.newLines.length-1-s]===e.getLineAt(n-1);)n--,s++;return o===0&&s===0?this:new t(new LN.LineRange(r,n),this.newLines.slice(o,this.newLines.length-s))}toLineEdit(){return new Gj([this])}};C1.LineReplacement=IT;var Ret;(function(t){function e(r){return Array.isArray(r)&&r.length===3&&typeof r[0]=="number"&&typeof r[1]=="number"&&Array.isArray(r[2])&&r[2].every(n=>typeof n=="string")}t.is=e})(Ret||(C1.SerializedLineReplacement=Ret={}))});var Wle=m(dI=>{"use strict";Object.defineProperty(dI,"__esModule",{value:!0});dI.ArrayMap=dI.ResponseProcessor=void 0;var v0r=Gr(),zj=uI(),Wj=um(),Met;(function(t){t.DEFAULT_DIFF_PARAMS={emitFastCursorLineChange:!1,nSignificantLinesToConverge:2,nLinesToConverge:3};async function*e(o,s,a,c){let l=new Kj;for(let[p,h]of o.entries())l.add(h,p);let u=0,d=-1,f={k:"aligned"};for await(let p of s){if(++d,u>=o.length){switch(f.k){case"aligned":{f={k:"diverged",startLineIdx:u,newLines:[p]};break}case"diverged":f.newLines.push(p)}continue}if(f.k==="aligned"){if(o[u]===p){++u;continue}f={k:"diverged",startLineIdx:u,newLines:[]}}f.newLines.push(p);let h=n(o,a,l,f,u,c);h&&(yield h.singleLineEdit,u=h.convergenceEndIdx,f={k:"aligned"})}switch(f.k){case"diverged":{let p=new Wj.LineRange(f.startLineIdx+1,o.length+1);yield new zj.LineReplacement(p,f.newLines);break}case"aligned":{if(u<o.length){let p=new Wj.LineRange(u+1,o.length+1);yield new zj.LineReplacement(p,[])}break}}}t.diff=e;function r(o){return!!o.match(/[a-zA-Z1-9]+/)}function n(o,s,a,c,l,u){if(c.newLines.length===0)throw(0,v0r.illegalArgument)("Cannot check for convergence without new lines");let d=c.newLines.length-1,f=a.get(c.newLines[d]).map(L=>[L,L]);if(f.length===0){if(!u.emitFastCursorLineChange||l!==s||c.newLines.length>1)return;let L=[l,l+1],j=new Wj.LineRange(L[0]+1,L[1]+1);return{singleLineEdit:new zj.LineReplacement(j,c.newLines),convergenceEndIdx:l+1}}if(c.newLines.length<u.nSignificantLinesToConverge)return;let p=1,h=r(c.newLines[d])?1:0;--d;let _,g=f[0];for(p>0&&g[0]-c.startLineIdx===c.newLines.length-1&&(_="found_significant_matches");d>=0&&(f=f.map(([L,j])=>[L,j-1]),f=f.filter(([L,j])=>j>=0&&l<=j),f=f.filter(([L,j])=>o[j]===c.newLines[d]),f.length!==0);--d)if(++p,r(c.newLines[d])&&++h,h===u.nSignificantLinesToConverge&&(_="found_significant_matches",g=f[0]),p===u.nLinesToConverge){_="found_matches",g=f[0];break}if(!_)return;let v=g[1],E=g[0],y=E-v+1,S=v-c.startLineIdx,b=c.newLines.slice(0,c.newLines.length-y),w=b.length;if(S-w>1&&w>0)return;let P=[c.startLineIdx,v],A=new Wj.LineRange(P[0]+1,P[1]+1);return{singleLineEdit:new zj.LineReplacement(A,b),convergenceEndIdx:E+1}}})(Met||(dI.ResponseProcessor=Met={}));var Kj=class{constructor(){this.map=new Map}add(e,r){let n=this.map.get(e);n?n.push(r):this.map.set(e,[r])}get(e){return this.map.get(e)||[]}};dI.ArrayMap=Kj});var Let=m(Yj=>{"use strict";Object.defineProperty(Yj,"__esModule",{value:!0});Yj.AlternativeNotebookFormat=void 0;var Net;(function(t){t.json="json",t.xml="xml",t.text="text"})(Net||(Yj.AlternativeNotebookFormat=Net={}))});var Ni=m(Qt=>{"use strict";var y0r=Qt&&Qt.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),E0r=Qt&&Qt.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),rue=Qt&&Qt.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),o=0;o<n.length;o++)n[o]!=="default"&&y0r(r,e,n[o]);return E0r(r,e),r}})();Object.defineProperty(Qt,"__esModule",{value:!0});Qt.ConfigKey=Qt.XTabProviderId=Qt.AzureAuthMode=Qt.AuthPermissionMode=Qt.AuthProviderId=Qt.HARD_TOOL_LIMIT=Qt.ConfigurationMigrationRegistry=Qt.globalConfigRegistry=Qt.ConfigValueValidators=Qt.AbstractConfigurationService=Qt.IConfigurationService=Qt.CopilotConfigPrefix=void 0;Qt.getAllConfigKeys=P0r;Qt.registerNextEditProviderId=O0r;var T0r=Qe(),Kle=Gr(),qet=Fi(),S0r=Ar(),b0r=rue(bj()),C0r=cp(),Yle=rue(Ol()),Fet=aN(),ket=det(),A0r=Aj(),fa=rue(S1()),x0r=S1(),Det=Wle(),w0r=Let(),mp=xj();Qt.CopilotConfigPrefix="github.copilot";Qt.IConfigurationService=(0,T0r.createServiceIdentifier)("IConfigurationService");var Qle=class extends S0r.Disposable{constructor(e){super(),this._onDidChangeConfiguration=this._register(new qet.Emitter),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._isInternal=!1,this._isTeamMember=!1,this.observables=new Map,e&&this._register(e.onDidStoreUpdate(()=>{let r=!!e.copilotToken?.isVscodeTeamMember;this._setUserInfo({isInternal:!!e.copilotToken?.isInternal,isTeamMember:r,teamMemberUsername:r?e.copilotToken?.username:void 0})}))}getConfigMixedWithDefaults(e){if(e.options?.valueIgnoredForExternals&&!this._isInternal)return this.getDefaultValue(e);let r=this.getConfig(e);return r===void 0?this.getDefaultValue(e):Yle.isObject(r)&&Yle.isObject(e.defaultValue)?{...e.defaultValue,...r}:r}getDefaultValue(e){return gp.isDefaultValueWithTeamAndInternalValue(e.defaultValue)?this._isUsingTeamDefault(e)?e.defaultValue.teamDefaultValue:this._isInternal?e.defaultValue.internalDefaultValue:e.defaultValue.defaultValue:gp.isDefaultValueWithTeamValue(e.defaultValue)?this._isUsingTeamDefault(e)?e.defaultValue.teamDefaultValue:e.defaultValue.defaultValue:e.defaultValue}_setUserInfo(e){if(this._isInternal===e.isInternal&&this._isTeamMember===e.isTeamMember)return;let r=this._isInternal!==e.isInternal,n=this._isTeamMember!==e.isTeamMember;this._isInternal=e.isInternal,this._isTeamMember=e.isTeamMember;let o=new Set;for(let s of Qt.globalConfigRegistry.configs.values())(r&&(s.options?.valueIgnoredForExternals||gp.isDefaultValueWithTeamAndInternalValue(s.defaultValue))||n&&gp.isDefaultValueWithTeamValue(s.defaultValue))&&o.add(s.fullyQualifiedId);o.size>0&&this._onDidChangeConfiguration.fire({affectsConfiguration:s=>{for(let a of o)if(a===s||a.startsWith(s+".")||s.startsWith(a+"."))return!0;return!1}})}updateExperimentBasedConfiguration(e){e.length!==0&&this._onDidChangeConfiguration.fire({affectsConfiguration:()=>!0})}getConfigObservable(e){return this._getObservable_$show2FramesUp(e,()=>this.getConfig(e))}getExperimentBasedConfigObservable(e,r){return this._getObservable_$show2FramesUp(e,()=>this.getExperimentBasedConfig(e,r))}_getObservable_$show2FramesUp(e,r){let n=this.observables.get(e.id);return n||(n=(0,C0r.observableFromEventOpts)({debugName:()=>`Configuration Key "${e.id}"`},o=>this._register(this.onDidChangeConfiguration(s=>{s.affectsConfiguration(e.fullyQualifiedId)&&o(s)})),r),this.observables.set(e.id,n)),n}_isUsingTeamDefault(e){return!(!this._isTeamMember||!gp.isDefaultValueWithTeamAndInternalValue(e.defaultValue)&&!gp.isDefaultValueWithTeamValue(e.defaultValue))}isConfigured(e,r){let n=this.inspectConfig(e,r);return n?.globalValue!==void 0||n?.globalLanguageValue!==void 0||n?.workspaceFolderValue!==void 0||n?.workspaceFolderLanguageValue!==void 0||n?.workspaceValue!==void 0||n?.workspaceLanguageValue!==void 0}};Qt.AbstractConfigurationService=Qle;var gp;(function(t){function e(n){return Yle.isObject(n)&&"defaultValue"in n&&"teamDefaultValue"in n}t.isDefaultValueWithTeamValue=e;function r(n){return t.isDefaultValueWithTeamValue(n)&&"internalDefaultValue"in n}t.isDefaultValueWithTeamAndInternalValue=r})(gp||(Qt.ConfigValueValidators=gp={}));var Qj;function I0r(){if(!Qj){Qj=new Map;let e=Fet.packageJson.contributes.configuration.map(n=>n.properties),r=Object.assign({},...e);for(let n in r)Qj.set(n,r[n].default)}return Qj}function Uet(t,e,r){let n=`${Qt.CopilotConfigPrefix}.${t}`,o=r?.oldKey?`${Qt.CopilotConfigPrefix}.${r.oldKey}`:void 0,s=I0r(),a=s.has(n),c=s.get(n);if(a){let u=gp.isDefaultValueWithTeamAndInternalValue(e)||gp.isDefaultValueWithTeamValue(e)?e.defaultValue:e;if(!b0r.equals(u,c))throw new Kle.BugIndicatingError(`The default value for setting ${t} is different in packageJson and in code`)}if(a&&r?.valueIgnoredForExternals)throw new Kle.BugIndicatingError(`The setting ${t} is public, it therefore cannot be restricted to internal!`);let l=n.startsWith("github.copilot.advanced.")?n.substring(24):void 0;return{id:t,oldId:r?.oldKey,isPublic:a,fullyQualifiedId:n,fullyQualifiedOldId:o,advancedSubKey:l,defaultValue:e,options:r}}var Zle=class{constructor(){this.configs=new Map}registerConfig(e){this.configs.set(e.fullyQualifiedId,e)}};Qt.globalConfigRegistry=new Zle;var Jle=class{constructor(){this.migrations=[],this._onDidRegisterConfigurationMigrations=new qet.Emitter,this.onDidRegisterConfigurationMigration=this._onDidRegisterConfigurationMigrations.event}registerConfigurationMigrations(e){this.migrations.push(...e),this._onDidRegisterConfigurationMigrations.fire(e)}};Qt.ConfigurationMigrationRegistry=new Jle;function Le(t,e,r,n,o,s){if(e===1){let c={...Uet(t,r,o),configType:1,experimentName:s?.experimentName,validator:n};if(c.advancedSubKey)throw new Kle.BugIndicatingError("Shared settings cannot be experiment based");return Qt.globalConfigRegistry.registerConfig(c),c}let a={...Uet(t,r,o),configType:0,validator:n};return Qt.globalConfigRegistry.registerConfig(a),a}function qe(t,e,r,n,o,s){return o={...o,valueIgnoredForExternals:!0},e===0?Le(t,e,r,n,o):Le(t,e,r,n,o,s)}function jet(t,e){Qt.ConfigurationMigrationRegistry.registerConfigurationMigrations([{key:`${Qt.CopilotConfigPrefix}.${e}`,migrateFn:async r=>[[`${Qt.CopilotConfigPrefix}.${t}`,{value:r}],[`${Qt.CopilotConfigPrefix}.${e}`,{value:void 0}]]}])}function Wi(t,e,r,n){return jet(e,t),Le(e,0,r,void 0,{...n,oldKey:t})}function io(t,e,r,n,o){return jet(e,t),Le(e,1,r,void 0,{...n,oldKey:t},o)}Qt.HARD_TOOL_LIMIT=128;var Xle;(function(t){t.GitHub="github",t.GitHubEnterprise="github-enterprise",t.Microsoft="microsoft"})(Xle||(Qt.AuthProviderId=Xle={}));var eue;(function(t){t.Default="default",t.Minimal="minimal"})(eue||(Qt.AuthPermissionMode=eue={}));var kN;(function(t){t.EntraId="entraId",t.ApiKey="apiKey"})(kN||(Qt.AzureAuthMode=kN={}));(function(t){t.MICROSOFT_AUTH_PROVIDER="microsoft",t.COGNITIVE_SERVICES_SCOPE="https://cognitiveservices.azure.com/.default"})(kN||(Qt.AzureAuthMode=kN={}));Qt.XTabProviderId="XtabProvider";var tue;(function(t){let e;(function(o){o.DebugOverrideProxyUrl=Le("advanced.debug.overrideProxyUrl",0,void 0),o.DebugOverrideCAPIUrl=Le("advanced.debug.overrideCapiUrl",0,void 0),o.DebugUseNodeFetchFetcher=Le("advanced.debug.useNodeFetchFetcher",0,!0),o.DebugUseNodeFetcher=Le("advanced.debug.useNodeFetcher",0,!1),o.DebugUseElectronFetcher=Le("advanced.debug.useElectronFetcher",0,!0),o.AuthProvider=Le("advanced.authProvider",0,Xle.GitHub),o.AuthPermissions=Le("advanced.authPermissions",0,eue.Default)})(e=t.Shared||(t.Shared={}));let r;(function(o){o.DebugOverrideChatEngine=Wi("chat.advanced.debug.overrideChatEngine","chat.debug.overrideChatEngine",void 0),o.WorkspacePrototypeAdoCodeSearchEndpointOverride=Wi("chat.advanced.workspace.prototypeAdoCodeSearchEndpointOverride","chat.workspace.prototypeAdoCodeSearchEndpointOverride",""),o.FeedbackOnChange=Wi("chat.advanced.feedback.onChange","chat.feedback.onChange",!1),o.ReviewIntent=Wi("chat.advanced.review.intent","chat.review.intent",!1),o.NotebookSummaryExperimentEnabled=Wi("chat.advanced.notebook.summaryExperimentEnabled","chat.notebook.summaryExperimentEnabled",!1),o.NotebookVariableFilteringEnabled=Wi("chat.advanced.notebook.variableFilteringEnabled","chat.notebook.variableFilteringEnabled",!1),o.TerminalToDebuggerPatterns=Wi("chat.advanced.debugTerminalCommandPatterns","chat.debugTerminalCommandPatterns",[]),o.WorkspaceRecordingEnabled=Wi("chat.advanced.localWorkspaceRecording.enabled","chat.localWorkspaceRecording.enabled",!1),o.EditRecordingEnabled=Wi("chat.advanced.editRecording.enabled","chat.editRecording.enabled",!1),o.CodeSearchAgentEnabled=Wi("chat.advanced.codesearch.agent.enabled","chat.codesearch.agent.enabled",!0),o.AgentTemperature=Wi("chat.advanced.agent.temperature","chat.agent.temperature",void 0),o.EnableUserPreferences=Wi("chat.advanced.enableUserPreferences","chat.enableUserPreferences",!1),o.SummarizeAgentConversationHistoryThreshold=Wi("chat.advanced.summarizeAgentConversationHistoryThreshold","chat.summarizeAgentConversationHistoryThreshold",void 0),o.AgentHistorySummarizationMode=Wi("chat.advanced.agentHistorySummarizationMode","chat.agentHistorySummarizationMode",void 0),o.UseResponsesApiTruncation=Wi("chat.advanced.useResponsesApiTruncation","chat.useResponsesApiTruncation",!1),o.OmitBaseAgentInstructions=Wi("chat.advanced.omitBaseAgentInstructions","chat.omitBaseAgentInstructions",!1),o.ClaudeCodeDebugEnabled=Wi("chat.advanced.claudeCode.debug","chat.claudeCode.debug",!1),o.GitHistoryRelatedFilesUsingEmbeddings=Wi("chat.advanced.suggestRelatedFilesFromGitHistory.useEmbeddings","chat.suggestRelatedFilesFromGitHistory.useEmbeddings",!1),o.CLICustomAgentsEnabled=Wi("chat.advanced.cli.customAgents.enabled","chat.cli.customAgents.enabled",!1),o.CLIMCPServerEnabled=Wi("chat.advanced.cli.mcp.enabled","chat.cli.mcp.enabled",!1),o.EnableClaudeCodeAgent=Wi("chat.advanced.claudeCode.enabled","chat.claudeCode.enabled",!1),o.RequestLoggerMaxEntries=Wi("chat.advanced.debug.requestLogger.maxEntries","chat.debug.requestLogger.maxEntries",100),o.ProjectLabelsExpanded=io("chat.advanced.projectLabels.expanded","chat.projectLabels.expanded",!1),o.ProjectLabelsChat=io("chat.advanced.projectLabels.chat","chat.projectLabels.chat",!1),o.ProjectLabelsInline=io("chat.advanced.projectLabels.inline","chat.projectLabels.inline",!1),o.WorkspaceMaxLocalIndexSize=io("chat.advanced.workspace.maxLocalIndexSize","chat.workspace.maxLocalIndexSize",1e5),o.WorkspaceEnableFullWorkspace=io("chat.advanced.workspace.enableFullWorkspace","chat.workspace.enableFullWorkspace",!0),o.WorkspaceEnableCodeSearch=io("chat.advanced.workspace.enableCodeSearch","chat.workspace.enableCodeSearch",!0),o.WorkspaceEnableEmbeddingsSearch=io("chat.advanced.workspace.enableEmbeddingsSearch","chat.workspace.enableEmbeddingsSearch",!0),o.WorkspacePreferredEmbeddingsModel=io("chat.advanced.workspace.preferredEmbeddingsModel","chat.workspace.preferredEmbeddingsModel",""),o.NotebookAlternativeDocumentFormat=io("chat.advanced.notebook.alternativeFormat","chat.notebook.alternativeFormat",w0r.AlternativeNotebookFormat.xml),o.UseAlternativeNESNotebookFormat=io("chat.advanced.notebook.alternativeNESFormat.enabled","chat.notebook.alternativeNESFormat.enabled",!1),o.InlineChatSelectionRatioThreshold=Le("chat.inlineChat.selectionRatioThreshold",1,0),o.InstantApplyShortModelName=io("chat.advanced.instantApply.shortContextModelName","chat.instantApply.shortContextModelName","gpt-4o-instant-apply-full-ft-v66-short"),o.InstantApplyShortContextLimit=io("chat.advanced.instantApply.shortContextLimit","chat.instantApply.shortContextLimit",8e3),o.AgentHistorySummarizationWithPromptCache=io("chat.advanced.agentHistorySummarizationWithPromptCache","chat.agentHistorySummarizationWithPromptCache",!1),o.AgentHistorySummarizationForceGpt41=io("chat.advanced.agentHistorySummarizationForceGpt41","chat.agentHistorySummarizationForceGpt41",!1),o.PromptFileContext=io("chat.advanced.promptFileContextProvider.enabled","chat.promptFileContextProvider.enabled",!0),o.DefaultToolsGrouped=io("chat.advanced.tools.defaultToolsGrouped","chat.tools.defaultToolsGrouped",!1),o.Gpt5AlternativePatch=io("chat.advanced.gpt5AlternativePatch","chat.gpt5AlternativePatch",!1),o.InlineEditsTriggerOnEditorChangeAfterSeconds=io("chat.advanced.inlineEdits.triggerOnEditorChangeAfterSeconds","chat.inlineEdits.triggerOnEditorChangeAfterSeconds",{defaultValue:void 0,teamDefaultValue:10}),o.InlineEditsNextCursorPredictionDisplayLine=io("chat.advanced.inlineEdits.nextCursorPrediction.displayLine","chat.inlineEdits.nextCursorPrediction.displayLine",!0),o.InlineEditsNextCursorPredictionCurrentFileMaxTokens=io("chat.advanced.inlineEdits.nextCursorPrediction.currentFileMaxTokens","chat.inlineEdits.nextCursorPrediction.currentFileMaxTokens",fa.DEFAULT_OPTIONS.currentFile.maxTokens),o.InlineEditsRenameSymbolSuggestions=Le("chat.inlineEdits.renameSymbolSuggestions",1,{defaultValue:!1,teamDefaultValue:!0}),o.InlineEditsPreferredModel=Le("nextEditSuggestions.preferredModel",1,"none"),o.DiagnosticsContextProvider=io("chat.advanced.inlineEdits.diagnosticsContextProvider.enabled","chat.inlineEdits.diagnosticsContextProvider.enabled",!1),o.Gemini3MultiReplaceString=Le("chat.edits.gemini3MultiReplaceString",1,!1)})(r=t.Advanced||(t.Advanced={}));let n;(function(o){o.DebugOverrideChatMaxTokenNum=qe("chat.advanced.debug.overrideChatMaxTokenNum",0,0),o.DebugReportFeedback=qe("chat.advanced.debug.reportFeedback",0,{defaultValue:!1,teamDefaultValue:!0}),o.InlineEditsIgnoreCompletionsDisablement=qe("chat.advanced.inlineEdits.ignoreCompletionsDisablement",0,!1,(0,mp.vBoolean)()),o.InlineEditsModelPickerEnabled=qe("chat.advanced.inlineEdits.modelPicker.enabled",1,{defaultValue:!1,teamDefaultValue:!0},(0,mp.vBoolean)()),o.InlineEditsUseSlashModels=qe("chat.advanced.inlineEdits.useSlashModels",1,!1),o.InlineEditsLogContextRecorderEnabled=qe("chat.advanced.inlineEdits.logContextRecorder.enabled",0,!1),o.InlineEditsHideInternalInterface=qe("chat.advanced.inlineEdits.hideInternalInterface",0,!1,(0,mp.vBoolean)()),o.InlineEditsLogCancelledRequests=qe("chat.advanced.inlineEdits.logCancelledRequests",0,!1,(0,mp.vBoolean)()),o.InlineEditsNextCursorPredictionUrl=qe("chat.advanced.inlineEdits.nextCursorPrediction.url",0,void 0,(0,mp.vString)()),o.InlineEditsNextCursorPredictionApiKey=qe("chat.advanced.inlineEdits.nextCursorPrediction.apiKey",0,void 0,(0,mp.vString)()),o.InlineEditsXtabProviderUrl=qe("chat.advanced.inlineEdits.xtabProvider.url",0,void 0,(0,mp.vString)()),o.InlineEditsXtabProviderApiKey=qe("chat.advanced.inlineEdits.xtabProvider.apiKey",0,void 0,(0,mp.vString)()),o.InlineEditsXtabProviderModelConfiguration=qe("chat.advanced.inlineEdits.xtabProvider.modelConfiguration",0,{defaultValue:void 0,teamDefaultValue:{modelName:"copilot-nes-oct",promptingStrategy:fa.PromptingStrategy.Xtab275,includeTagsInCurrentFile:!1}},fa.MODEL_CONFIGURATION_VALIDATOR),o.InlineEditsInlineCompletionsEnabled=qe("chat.advanced.inlineEdits.inlineCompletions.enabled",0,!0,(0,mp.vBoolean)()),o.InlineEditsXtabProviderUsePrediction=qe("chat.advanced.inlineEdits.xtabProvider.usePrediction",0,!0,(0,mp.vBoolean)()),o.InlineEditsXtabLanguageContextEnabledLanguages=qe("chat.advanced.inlineEdits.xtabProvider.languageContext.enabledLanguages",0,x0r.LANGUAGE_CONTEXT_ENABLED_LANGUAGES),o.InlineEditsXtabLanguageContextTraitsPosition=qe("chat.advanced.inlineEdits.xtabProvider.languageContext.traitsPosition",1,"after"),o.InlineEditsDiagnosticsExplorationEnabled=qe("chat.advanced.inlineEdits.inlineEditsDiagnosticsExplorationEnabled",0,!1),o.InternalWelcomeHintEnabled=qe("chat.advanced.welcomePageHint.enabled",0,{defaultValue:!1,internalDefaultValue:!0,teamDefaultValue:!0}),o.InlineChatUseCodeMapper=qe("chat.advanced.inlineChat.useCodeMapper",0,!1),o.DebugCollectFetcherTelemetry=qe("chat.advanced.debug.collectFetcherTelemetry",1,!0),o.DebugExpUseNodeFetchFetcher=qe("chat.advanced.debug.useNodeFetchFetcher",1,void 0),o.DebugExpUseNodeFetcher=qe("chat.advanced.debug.useNodeFetcher",1,void 0),o.DebugExpUseElectronFetcher=qe("chat.advanced.debug.useElectronFetcher",1,void 0),o.InlineEditsAsyncCompletions=qe("chat.advanced.inlineEdits.asyncCompletions",1,!0),o.InlineEditsDebounceUseCoreRequestTime=qe("chat.advanced.inlineEdits.debounceUseCoreRequestTime",1,!1),o.InlineEditsYieldToCopilot=qe("chat.advanced.inlineEdits.yieldToCopilot",1,!1),o.InlineEditsExcludedProviders=qe("chat.advanced.inlineEdits.excludedProviders",1,void 0),o.InlineEditsEnableGhCompletionsProvider=qe("chat.advanced.inlineEdits.githubCompletionsProvider.enabled",1,!1),o.InlineEditsCompletionsUrl=qe("chat.advanced.inlineEdits.completionsProvider.url",1,void 0),o.InlineEditsDebounce=qe("chat.advanced.inlineEdits.debounce",1,200),o.InlineEditsCacheDelay=qe("chat.advanced.inlineEdits.cacheDelay",1,200),o.InlineEditsSubsequentCacheDelay=qe("chat.advanced.inlineEdits.subsequentCacheDelay",1,0),o.InlineEditsRebasedCacheDelay=qe("chat.advanced.inlineEdits.rebasedCacheDelay",1,0),o.InlineEditsBackoffDebounceEnabled=qe("chat.advanced.inlineEdits.backoffDebounceEnabled",1,!0),o.InlineEditsExtraDebounceEndOfLine=qe("chat.advanced.inlineEdits.extraDebounceEndOfLine",1,2e3),o.InlineEditsDebounceOnSelectionChange=qe("chat.advanced.inlineEdits.debounceOnSelectionChange",1,void 0),o.InlineEditsProviderId=qe("chat.advanced.inlineEdits.providerId",1,void 0),o.InlineEditsUnification=qe("chat.advanced.inlineEdits.unification",1,!1),o.InlineEditsNextCursorPredictionEnabled=qe("chat.advanced.inlineEdits.nextCursorPrediction.enabled",1,{defaultValue:void 0,teamDefaultValue:A0r.NextCursorLinePrediction.OnlyWithEdit}),o.InlineEditsNextCursorPredictionModelName=qe("chat.advanced.inlineEdits.nextCursorPrediction.modelName",1,"copilot-suggestions-himalia-001"),o.InlineEditsNextCursorPredictionMaxResponseTokens=qe("chat.advanced.inlineEdits.nextCursorPrediction.maxResponseTokens",1,4),o.InlineEditsXtabProviderModelConfigurationString=qe("chat.advanced.inlineEdits.xtabProvider.modelConfigurationString",1,void 0),o.InlineEditsXtabProviderDefaultModelConfigurationString=qe("chat.advanced.inlineEdits.xtabProvider.defaultModelConfigurationString",1,void 0),o.InlineEditsXtabProviderUseVaryingLinesAbove=qe("chat.advanced.inlineEdits.xtabProvider.useVaryingLinesAbove",1,void 0),o.InlineEditsXtabProviderNLinesAbove=qe("chat.advanced.inlineEdits.xtabProvider.nLinesAbove",1,void 0),o.InlineEditsXtabProviderNLinesBelow=qe("chat.advanced.inlineEdits.xtabProvider.nLinesBelow",1,void 0),o.InlineEditsXtabProviderRetryWithNMoreLinesBelow=qe("chat.advanced.inlineEdits.xtabProvider.retryWithNMoreLinesBelow",1,void 0),o.InlineEditsAutoExpandEditWindowLines=qe("chat.advanced.inlineEdits.autoExpandEditWindowLines",1,void 0),o.InlineEditsXtabNRecentlyViewedDocuments=qe("chat.advanced.inlineEdits.xtabProvider.nRecentlyViewedDocuments",1,fa.DEFAULT_OPTIONS.recentlyViewedDocuments.nDocuments),o.InlineEditsXtabRecentlyViewedDocumentsMaxTokens=qe("chat.advanced.inlineEdits.xtabProvider.recentlyViewedDocuments.maxTokens",1,fa.DEFAULT_OPTIONS.recentlyViewedDocuments.maxTokens),o.InlineEditsXtabDiffNEntries=qe("chat.advanced.inlineEdits.xtabProvider.diffNEntries",1,fa.DEFAULT_OPTIONS.diffHistory.nEntries),o.InlineEditsXtabDiffMaxTokens=qe("chat.advanced.inlineEdits.xtabProvider.diffMaxTokens",1,fa.DEFAULT_OPTIONS.diffHistory.maxTokens),o.InlineEditsXtabProviderEmitFastCursorLineChange=qe("chat.advanced.inlineEdits.xtabProvider.emitFastCursorLineChange",1,!0),o.InlineEditsXtabIncludeViewedFiles=qe("chat.advanced.inlineEdits.xtabProvider.includeViewedFiles",1,fa.DEFAULT_OPTIONS.recentlyViewedDocuments.includeViewedFiles),o.InlineEditsXtabPageSize=qe("chat.advanced.inlineEdits.xtabProvider.pageSize",1,fa.DEFAULT_OPTIONS.pagedClipping.pageSize),o.InlineEditsXtabEditWindowMaxTokens=qe("chat.advanced.inlineEdits.xtabProvider.editWindowMaxTokens",1,void 0),o.InlineEditsXtabIncludeTagsInCurrentFile=qe("chat.advanced.inlineEdits.xtabProvider.includeTagsInCurrentFile",1,fa.DEFAULT_OPTIONS.currentFile.includeTags),o.InlineEditsXtabCurrentFileMaxTokens=qe("chat.advanced.inlineEdits.xtabProvider.currentFileMaxTokens",1,fa.DEFAULT_OPTIONS.currentFile.maxTokens),o.InlineEditsXtabPrioritizeAboveCursor=qe("chat.advanced.inlineEdits.xtabProvider.currentFile.prioritizeAboveCursor",1,fa.DEFAULT_OPTIONS.currentFile.prioritizeAboveCursor),o.InlineEditsXtabDiffOnlyForDocsInPrompt=qe("chat.advanced.inlineEdits.xtabProvider.diffOnlyForDocsInPrompt",1,fa.DEFAULT_OPTIONS.diffHistory.onlyForDocsInPrompt),o.InlineEditsXtabDiffUseRelativePaths=qe("chat.advanced.inlineEdits.xtabProvider.diffUseRelativePaths",1,fa.DEFAULT_OPTIONS.diffHistory.useRelativePaths),o.InlineEditsXtabNNonSignificantLinesToConverge=qe("chat.advanced.inlineEdits.xtabProvider.nNonSignificantLinesToConverge",1,Det.ResponseProcessor.DEFAULT_DIFF_PARAMS.nLinesToConverge),o.InlineEditsXtabNSignificantLinesToConverge=qe("chat.advanced.inlineEdits.xtabProvider.nSignificantLinesToConverge",1,Det.ResponseProcessor.DEFAULT_DIFF_PARAMS.nSignificantLinesToConverge),o.InlineEditsXtabLanguageContextEnabled=qe("chat.advanced.inlineEdits.xtabProvider.languageContext.enabled",1,fa.DEFAULT_OPTIONS.languageContext.enabled),o.InlineEditsXtabLanguageContextMaxTokens=qe("chat.advanced.inlineEdits.xtabProvider.languageContext.maxTokens",1,fa.DEFAULT_OPTIONS.languageContext.maxTokens),o.InlineEditsXtabMaxMergeConflictLines=qe("chat.advanced.inlineEdits.xtabProvider.maxMergeConflictLines",1,void 0),o.InlineEditsXtabOnlyMergeConflictLines=qe("chat.advanced.inlineEdits.xtabProvider.onlyMergeConflictLines",1,!1),o.InlineEditsXtabAggressivenessLevel=qe("chat.advanced.inlineEdits.xtabProvider.aggressivenessLevel",1,void 0),o.InlineEditsUndoInsertionFiltering=qe("chat.advanced.inlineEdits.undoInsertionFiltering",1,"v1"),o.InlineEditsIgnoreWhenSuggestVisible=qe("chat.advanced.inlineEdits.ignoreWhenSuggestVisible",1,!1),o.InlineEditsJointCompletionsProviderEnabled=qe("chat.advanced.inlineEdits.jointCompletionsProvider.enabled",1,!1),o.InlineEditsJointCompletionsProviderStrategy=qe("chat.advanced.inlineEdits.jointCompletionsProvider.strategy",1,ket.JointCompletionsProviderStrategy.Regular),o.InlineEditsJointCompletionsProviderTriggerChangeStrategy=qe("chat.advanced.inlineEdits.jointCompletionsProvider.triggerChangeStrategy",1,ket.JointCompletionsProviderTriggerChangeStrategy.NoTriggerOnRequestInFlight),o.InstantApplyModelName=qe("chat.advanced.instantApply.modelName",1,"gpt-4o-instant-apply-full-ft-v66"),o.VerifyTextDocumentChanges=qe("chat.advanced.inlineEdits.verifyTextDocumentChanges",1,!1),o.EnableReadFileV2=Le("chat.advanced.enableReadFileV2",1,Fet.isPreRelease),o.AskAgent=Le("chat.advanced.enableAskAgent",1,{defaultValue:!1,teamDefaultValue:!0,internalDefaultValue:!0}),o.RetryNetworkErrors=Le("chat.advanced.enableRetryNetworkErrors",1,!1),o.UseMessagesApi=qe("chat.advanced.useMessagesApi",1,!1)})(n=t.TeamInternal||(t.TeamInternal={})),t.Enable=Le("enable",0,{"*":!0,plaintext:!1,markdown:!1,scminput:!1}),t.selectedCompletionsModel=Le("selectedCompletionModel",0,""),t.UseResponsesApi=Le("chat.useResponsesApi",1,!0),t.ResponsesApiReasoningEffort=Le("chat.responsesApiReasoningEffort",1,"default"),t.ResponsesApiReasoningSummary=Le("chat.responsesApiReasoningSummary",1,"detailed"),t.EnableChatImageUpload=Le("chat.imageUpload.enabled",1,!0),t.AnthropicThinkingBudget=Le("chat.anthropic.thinking.budgetTokens",1,4e3),t.AnthropicWebSearchToolEnabled=Le("chat.anthropic.tools.websearch.enabled",1,!1),t.AnthropicWebSearchMaxUses=Le("chat.anthropic.tools.websearch.maxUses",0,5),t.AnthropicWebSearchAllowedDomains=Le("chat.anthropic.tools.websearch.allowedDomains",0,[]),t.AnthropicWebSearchBlockedDomains=Le("chat.anthropic.tools.websearch.blockedDomains",0,[]),t.AnthropicWebSearchUserLocation=Le("chat.anthropic.tools.websearch.userLocation",0,null),t.MemoryToolEnabled=Le("chat.tools.memory.enabled",1,!1),t.CodeGenerationInstructions=Le("chat.codeGeneration.instructions",0,[]),t.TestGenerationInstructions=Le("chat.testGeneration.instructions",0,[]),t.CommitMessageGenerationInstructions=Le("chat.commitMessageGeneration.instructions",0,[]),t.PullRequestDescriptionGenerationInstructions=Le("chat.pullRequestDescriptionGeneration.instructions",0,[]),t.GenerateTestsCodeLens=Le("chat.generateTests.codeLens",0,!1),t.SetupTests=Le("chat.setupTests.enabled",0,!0),t.TypeScriptLanguageContext=Le("chat.languageContext.typescript.enabled",1,!1),t.TypeScriptLanguageContextMode=Le("chat.languageContext.typescript.items",1,"double"),t.TypeScriptLanguageContextIncludeDocumentation=Le("chat.languageContext.typescript.includeDocumentation",1,!1),t.TypeScriptLanguageContextCacheTimeout=Le("chat.languageContext.typescript.cacheTimeout",1,500),t.TypeScriptLanguageContextFix=Le("chat.languageContext.fix.typescript.enabled",1,!1),t.TypeScriptLanguageContextInline=Le("chat.languageContext.inline.typescript.enabled",1,!1),t.UseInstructionFiles=Le("chat.codeGeneration.useInstructionFiles",0,!0),t.ReviewAgent=Le("chat.reviewAgent.enabled",0,!0),t.CodeFeedback=Le("chat.reviewSelection.enabled",0,!0),t.CodeFeedbackInstructions=Le("chat.reviewSelection.instructions",0,[]),t.UseProjectTemplates=Le("chat.useProjectTemplates",0,!0),t.ExplainScopeSelection=Le("chat.scopeSelection",0,!1),t.EnableCodeActions=Le("editor.enableCodeActions",0,!0),t.LocaleOverride=Le("chat.localeOverride",0,"auto"),t.TerminalChatLocation=Le("chat.terminalChatLocation",0,"chatView"),t.AutomaticRenameSuggestions=Le("renameSuggestions.triggerAutomatically",0,!0),t.GitHistoryRelatedFilesProvider=Le("chat.edits.suggestRelatedFilesFromGitHistory",0,!0),t.Test2SrcRelatedFilesProvider=Le("chat.edits.suggestRelatedFilesForTests",0,!0),t.TerminalToDebuggerEnabled=Le("chat.copilotDebugCommand.enabled",0,!0),t.CodeSearchAgentEnabled=Le("chat.codesearch.enabled",0,!1),t.InlineEditsEnabled=Le("nextEditSuggestions.enabled",1,{defaultValue:!1,teamDefaultValue:!0}),t.InlineEditsEnableDiagnosticsProvider=Le("nextEditSuggestions.fixes",1,{defaultValue:!0,teamDefaultValue:!0}),t.InlineEditsAllowWhitespaceOnlyChanges=Le("nextEditSuggestions.allowWhitespaceOnlyChanges",1,!0),t.NewWorkspaceCreationAgentEnabled=Le("chat.newWorkspaceCreation.enabled",0,!0),t.NewWorkspaceUseContext7=Le("chat.newWorkspace.useContext7",0,!1),t.SummarizeAgentConversationHistory=Le("chat.summarizeAgentConversationHistory.enabled",0,!0),t.VirtualToolThreshold=Le("chat.virtualTools.threshold",1,Qt.HARD_TOOL_LIMIT),t.CurrentEditorAgentContext=Le("chat.agent.currentEditorContext.enabled",0,!0),t.OllamaEndpoint=Le("chat.byok.ollamaEndpoint",0,"http://localhost:11434"),t.AzureAuthType=Le("chat.azureAuthType",0,kN.EntraId),t.AzureModels=Le("chat.azureModels",0,{}),t.CustomOAIModels=Le("chat.customOAIModels",0,{}),t.AutoFixDiagnostics=Le("chat.agent.autoFix",1,!0),t.NotebookFollowCellExecution=Le("chat.notebook.followCellExecution.enabled",0,!1),t.UseAlternativeNESNotebookFormat=Le("chat.notebook.enhancedNextEditSuggestions.enabled",1,!1),t.CustomInstructionsInSystemMessage=Le("chat.customInstructionsInSystemMessage",0,!0),t.EnableAlternateGptPrompt=Le("chat.alternateGptPrompt.enabled",1,!1),t.ShowOrganizationAndEnterpriseAgents=Le("chat.customAgents.showOrganizationAndEnterpriseAgents",0,!1),t.CompletionsFetcher=Le("chat.completionsFetcher",1,void 0),t.NextEditSuggestionsFetcher=Le("chat.nesFetcher",1,void 0),t.GitHubMcpEnabled=Le("chat.githubMcpServer.enabled",1,!1),t.GitHubMcpToolsets=Le("chat.githubMcpServer.toolsets",0,["default"]),t.GitHubMcpReadonly=Le("chat.githubMcpServer.readonly",0,!1),t.GitHubMcpLockdown=Le("chat.githubMcpServer.lockdown",0,!1)})(tue||(Qt.ConfigKey=tue={}));function P0r(){return Object.values(tue).flatMap(t=>Object.values(t).map(e=>e.fullyQualifiedId))}var R0r=[];function O0r(t){return R0r.push(t),t}});var pa=m(Vc=>{"use strict";Object.defineProperty(Vc,"__esModule",{value:!0});Vc.LogMemory=Vc.LogServiceImpl=Vc.ConsoleLog=Vc.LogLevel=Vc.ILogService=void 0;Vc.collectErrorMessages=Bet;Vc.collectSingleLineErrorMessage=L0r;var M0r=Qe(),N0r=Ar();Vc.ILogService=(0,M0r.createServiceIdentifier)("ILogService");var rf;(function(t){t[t.Off=0]="Off",t[t.Trace=1]="Trace",t[t.Debug=2]="Debug",t[t.Info=3]="Info",t[t.Warning=4]="Warning",t[t.Error=5]="Error"})(rf||(Vc.LogLevel=rf={}));var nue=class{constructor(e,r=rf.Warning){this.prefix=e,this.minLogLevel=r}logIt(e,r,...n){this.prefix&&(r=`${this.prefix}${r}`),e===rf.Error?console.error(r,...n):e===rf.Warning?console.warn(r,...n):e>=this.minLogLevel&&console.log(r,...n)}};Vc.ConsoleLog=nue;var iue=class extends N0r.Disposable{constructor(e){super(),this.logger=new oue(e)}trace(e){this.logger.trace(e)}debug(e){this.logger.debug(e)}info(e){this.logger.info(e)}warn(e){this.logger.warn(e)}error(e,r){this.logger.error(e,r)}show(e){this.logger.show(e)}};Vc.LogServiceImpl=iue;var oue=class{constructor(e){this._logTargets=e}_logIt(e,r){Zj.addLog(rf[e],r),this._logTargets.forEach(n=>n.logIt(e,r))}trace(e){this._logIt(rf.Trace,e)}debug(e){this._logIt(rf.Debug,e)}info(e){this._logIt(rf.Info,e)}warn(e){this._logIt(rf.Warning,e)}error(e,r){this._logIt(rf.Error,Bet(e)+(r?`: ${r}`:""))}show(e){this._logTargets.forEach(r=>r.show?.(e))}};function Bet(t){let e=new Set;function r(n,o){if(!n||!["object","string"].includes(typeof n)||e.has(n))return"";e.add(n);let a=(typeof n=="string"?n:n.stack||n.message||n.code||n.toString?.()||"").toString?.()||"";return[a?`${a.split(`
`).map(c=>`${o}${c}`).join(`
`)}
`:"",n.chromiumDetails?`${o}${JSON.stringify($et(n.chromiumDetails))}
`:"",r(n.cause,o+"  "),...Array.isArray(n.errors)?n.errors.map(c=>r(c,o+"  ")):[]].join("")}return r(t,"").trim()}function L0r(t,e=!1){let r=new Set;function n(o){if(!o||!["object","string"].includes(typeof o)||r.has(o))return"";r.add(o);let c=((typeof o=="string"?o:o.message||o.code||o.toString?.()||"").toString?.()||"").trim().split(`
`).join(" "),l=[...e&&o.chromiumDetails?[JSON.stringify($et(o.chromiumDetails))]:[],...o.cause?[n(o.cause)]:[],...Array.isArray(o.errors)?o.errors.map(u=>n(u)):[]].join(", ");return l?`${c}: ${l}`:c}return n(t)}function $et(t){if(!t||typeof t!="object")return{};let e={active_streams:t.active_streams,created_streams:t.created_streams,pending_create_stream_request_count:t.pending_create_stream_request_count,negotiated_protocol:t.negotiated_protocol,error:t.error,error_on_unavailable:t.error_on_unavailable,max_concurrent_streams:t.max_concurrent_streams,streams_initiated_count:t.streams_initiated_count,streams_abandoned_count:t.streams_abandoned_count,stream_hi_water_mark:t.stream_hi_water_mark,frames_received:t.frames_received,send_window_size:t.send_window_size,recv_window_size:t.recv_window_size,unacked_recv_window_bytes:t.unacked_recv_window_bytes,availability_state:t.availability_state,last_good_stream_id:t.last_good_stream_id,reused:t.reused,drain_error:t.drain_error,drain_description:t.drain_description,go_away_error:t.go_away_error,go_away_debug_data:t.go_away_debug_data,rst_stream_error:t.rst_stream_error,rst_stream_description:t.rst_stream_description,aliases_length:Array.isArray(t.aliases)?t.aliases.length:void 0};if(t.proxy){let n=[...(Array.isArray(t.proxy)?t.proxy.join(" "):String(t.proxy)).matchAll(/([a-z][a-z0-9+.-]*):\/\//gi)].map(o=>o[1]);n.length>0&&(e.proxy_schemes=n)}return t.spdy_session_key&&typeof t.spdy_session_key=="object"&&(e.spdy_session={privacy_mode:t.spdy_session_key.privacy_mode,secure_dns_policy:t.spdy_session_key.secure_dns_policy,disable_cert_verification_network_fetches:t.spdy_session_key.disable_cert_verification_network_fetches}),Array.isArray(t.active_stream_details)&&(e.active_stream_details=t.active_stream_details.map(r=>({stream_id:r.stream_id,io_state:r.io_state,send_stalled_by_flow_control:r.send_stalled_by_flow_control,pending_send_status:r.pending_send_status}))),e}var Zj=class{static{this._logs=[]}static{this._requestIds=[]}static{this.MAX_LOGS=50}static extractRequestIdFromMessage(e){let r=e.match(/request done: requestId: \[([0-9a-fA-F-]+)\] model deployment ID: \[/);if(r){let n=r[1];if(!this._requestIds.includes(n))return n}}static addLog(e,r){this._logs.length>=this.MAX_LOGS&&this._logs.shift(),this._logs.push(`${e}: ${r}`),this._requestIds.length>=this.MAX_LOGS&&this._requestIds.shift();let n=this.extractRequestIdFromMessage(r);n&&this._requestIds.push(n)}static getLogs(){return this._logs}static getRequestIds(){return this._requestIds}};Vc.LogMemory=Zj});var UN=m(DN=>{"use strict";Object.defineProperty(DN,"__esModule",{value:!0});DN.ICopilotTokenManager=void 0;DN.nowSeconds=D0r;var k0r=Qe();DN.ICopilotTokenManager=(0,k0r.createServiceIdentifier)("ICopilotTokenManager");function D0r(){return Math.floor(Date.now()/1e3)}});var ha=m(So=>{"use strict";var U0r=So&&So.__decorate||function(t,e,r,n){var o=arguments.length,s=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(o<3?a(s):o>3?a(e,r,s):a(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},Jj=So&&So.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(So,"__esModule",{value:!0});So.BaseAuthenticationService=So.IAuthenticationService=So.MinimalModeError=So.GITHUB_SCOPE_ALIGNED=So.GITHUB_SCOPE_READ_USER=So.GITHUB_SCOPE_USER_EMAIL=void 0;So.authProviderId=H0r;var q0r=Qe(),sue=Fi(),F0r=Ar(),j0r=bT(),PT=Ni(),B0r=pa(),$0r=UN(),V0r=S_();So.GITHUB_SCOPE_USER_EMAIL=["user:email"];So.GITHUB_SCOPE_READ_USER=["read:user"];So.GITHUB_SCOPE_ALIGNED=["read:user","user:email","repo","workflow"];var aue=class extends Error{constructor(){super("The authentication service is in minimal mode."),this.name="MinimalModeError"}};So.MinimalModeError=aue;So.IAuthenticationService=(0,q0r.createServiceIdentifier)("IAuthenticationService");var cue=class extends F0r.Disposable{constructor(e,r,n,o){super(),this._logService=e,this._tokenStore=r,this._tokenManager=n,this._configurationService=o,this._onDidAuthenticationChange=this._register(new sue.Emitter),this.onDidAuthenticationChange=this._onDidAuthenticationChange.event,this._onDidAccessTokenChange=this._register(new sue.Emitter),this.onDidAccessTokenChange=this._onDidAccessTokenChange.event,this._onDidAdoAuthenticationChange=this._register(new sue.Emitter),this.onDidAdoAuthenticationChange=this._onDidAdoAuthenticationChange.event,this._isMinimalMode=(0,j0r.derived)(s=>this._configurationService.getConfigObservable(PT.ConfigKey.Shared.AuthPermissions).read(s)===PT.AuthPermissionMode.Minimal),this._register(n.onDidCopilotTokenRefresh(()=>{this._logService.debug("Handling CopilotToken refresh."),this._handleAuthChangeEvent()}))}get isMinimalMode(){return this._isMinimalMode.get()}get anyGitHubSession(){return this._anyGitHubSession}get permissiveGitHubSession(){return this._permissiveGitHubSession}get anyAdoSession(){return this._anyAdoSession}get copilotToken(){return this._tokenStore.copilotToken}async getCopilotToken(e){try{let r=await this._tokenManager.getCopilotToken(e);return this._tokenStore.copilotToken=r,this._copilotTokenError=void 0,r}catch(r){this._tokenStore.copilotToken=void 0;let n=this._copilotTokenError;throw this._copilotTokenError=r,n&&r&&n.message!==r.message&&this._onDidAuthenticationChange.fire(),r}}resetCopilotToken(e){this._tokenStore.copilotToken=void 0,this._tokenManager.resetCopilotToken(e)}async _handleAuthChangeEvent(){let e=this._anyGitHubSession,r=this._permissiveGitHubSession,n=this._anyAdoSession,o=this._tokenStore.copilotToken,s=this._copilotTokenError,a=await Promise.allSettled([this.getAnyGitHubSession({silent:!0}),this.getPermissiveGitHubSession({silent:!0}),this.getAnyAdoSession({silent:!0})]);for(let c of a)c.status==="rejected"&&this._logService.error(`Error getting a session: ${c.reason}`);if(e?.accessToken!==this._anyGitHubSession?.accessToken||r?.accessToken!==this._permissiveGitHubSession?.accessToken){this._onDidAccessTokenChange.fire(),this._logService.debug("Auth state changed, minting a new CopilotToken...");try{await this.getCopilotToken(!0)}catch{}this._logService.debug("Minted a new CopilotToken.");return}n?.accessToken!==this._anyAdoSession?.accessToken&&(this._logService.debug(`Ado auth state changed, firing event. Had token before: ${!!n?.accessToken}. Has token now: ${!!this._anyAdoSession?.accessToken}.`),this._onDidAdoAuthenticationChange.fire());try{await this.getCopilotToken()}catch{}(o?.token!==this._tokenStore.copilotToken?.token||s?.message!==this._copilotTokenError?.message)&&(this._logService.debug("CopilotToken state changed, firing event."),this._onDidAuthenticationChange.fire()),this._logService.debug("Finished handling auth change event.")}};So.BaseAuthenticationService=cue;So.BaseAuthenticationService=cue=U0r([Jj(0,B0r.ILogService),Jj(1,V0r.ICopilotTokenStore),Jj(2,$0r.ICopilotTokenManager),Jj(3,PT.IConfigurationService)],cue);function H0r(t){return t.getConfig(PT.ConfigKey.Shared.AuthProvider)===PT.AuthProviderId.GitHubEnterprise?PT.AuthProviderId.GitHubEnterprise:PT.AuthProviderId.GitHub}});var Xj=m(lue=>{"use strict";Object.defineProperty(lue,"__esModule",{value:!0});lue.onCopilotToken=G0r;function G0r(t,e){return t.onDidAuthenticationChange(()=>{let r=t.copilotToken;r&&e(r)})}});var due=m(nf=>{"use strict";var z0r=nf&&nf.__decorate||function(t,e,r,n){var o=arguments.length,s=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(o<3?a(s):o>3?a(e,r,s):a(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},W0r=nf&&nf.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(nf,"__esModule",{value:!0});nf.TelemetryUserConfig=nf.ICompletionsTelemetryUserConfigService=void 0;var K0r=ha(),Y0r=Qe(),Q0r=Ar(),Z0r=Xj();function J0r(t){let e=t.getTokenValue("tid"),r=t.organizationList,n=t.enterpriseList,o=t.getTokenValue("sku");if(!e)return;let s={copilot_trackingId:e};return r&&(s.organizations_list=r.toString()),n&&(s.enterprise_list=n.toString()),o&&(s.sku=o),s}nf.ICompletionsTelemetryUserConfigService=(0,Y0r.createServiceIdentifier)("ICompletionsTelemetryUserConfigService");var uue=class extends Q0r.Disposable{#e;constructor(e){super(),this.#e={},this.optedIn=!1,this.ftFlag="",this._register((0,Z0r.onCopilotToken)(e,n=>this.updateFromToken(n)));let r=e.copilotToken;r&&this.updateFromToken(r)}getProperties(){return this.#e}get trackingId(){return this.#e.copilot_trackingId}updateFromToken(e){let r=J0r(e);r&&(this.#e=r,this.optedIn=e.getTokenValue("rt")==="1",this.ftFlag=e.getTokenValue("ft")??"")}};nf.TelemetryUserConfig=uue;nf.TelemetryUserConfig=uue=z0r([W0r(0,K0r.IAuthenticationService)],uue)});var qN=m(fI=>{"use strict";Object.defineProperty(fI,"__esModule",{value:!0});fI.PromiseQueue=fI.ICompletionsPromiseQueueService=void 0;var X0r=Qe();fI.ICompletionsPromiseQueueService=(0,X0r.createServiceIdentifier)("completionsPromiseQueueService");var fue=class{constructor(){this.promises=new Set}register(e){this.promises.add(e),e.finally(()=>this.promises.delete(e))}async flush(){await Promise.allSettled(this.promises)}};fI.PromiseQueue=fue});var Ps=m(ai=>{"use strict";Object.defineProperty(ai,"__esModule",{value:!0});ai.TelemetryReporters=ai.ICompletionsTelemetryReporters=ai.CopilotTelemetryReporter=ai.TelemetryWithExp=ai.TelemetryData=ai.TelemetryStore=void 0;ai.telemetrizePromptLength=dpr;ai.now=hI;ai.telemetry=Tue;ai.telemetryExpProblem=hpr;ai.telemetryRaw=gpr;ai.telemetryException=Get;ai.telemetryCatch=_pr;ai.telemetryError=vpr;ai.logEngineCompletion=Epr;ai.logEnginePrompt=Tpr;var epr=Q0(),tpr=Qe(),rpr=ws(),gue=Nr(),eB=RT(),_p=Gl(),npr=jF(),ipr=Wa(),opr=$F(),spr=Bce(),_ue=due(),vue=qN(),Kl;(function(t){t[t.Standard=0]="Standard",t[t.Enhanced=1]="Enhanced"})(Kl||(ai.TelemetryStore=Kl={}));(function(t){function e(r){return r===t.Enhanced}t.isEnhanced=e})(Kl||(ai.TelemetryStore=Kl={}));function pI(t){return t===Kl.Enhanced}var apr=["engine.prompt","engine.completion","ghostText.capturedAfterAccepted","ghostText.capturedAfterRejected"],FN=8192,cpr=21,vp=class t{static{this.keysExemptedFromSanitization=[spr.ExpServiceTelemetryNames.featuresTelemetryPropertyName]}constructor(e,r,n){this.properties=e,this.measurements=r,this.issuedTime=n}static createAndMarkAsIssued(e,r){return new t(e||{},r||{},hI())}extendedBy(e,r){let n={...this.properties,...e},o={...this.measurements,...r},s=new t(n,o,this.issuedTime);return s.displayedTime=this.displayedTime,s}markAsDisplayed(){this.displayedTime===void 0&&(this.displayedTime=hI())}async extendWithExpTelemetry(e){let{filters:r,exp:n}=await e.get(ipr.ICompletionsFeaturesService).getFallbackExpAndFilters();n.addToTelemetry(this),r.addToTelemetry(this)}extendWithEditorAgnosticFields(e){let r=e.get(epr.IEnvService),n=e.get(_p.ICompletionsEditorAndPluginInfo);this.properties.editor_version=(0,_p.formatNameAndVersion)(n.getEditorInfo()),this.properties.editor_plugin_version=(0,_p.formatNameAndVersion)(n.getEditorPluginInfo()),this.properties.client_machineid=r.machineId,this.properties.client_sessionid=r.sessionId,this.properties.copilot_version=`copilot/${_p.BuildInfo.getVersion()}`,typeof process<"u"&&(this.properties.runtime_version=`node/${process.versions.node}`),this.properties.common_extname=n.getEditorPluginInfo().name,this.properties.common_extversion=n.getEditorPluginInfo().version,this.properties.common_vscodeversion=(0,_p.formatNameAndVersion)(n.getEditorInfo())}extendWithConfigProperties(e){let r=(0,_p.dumpForTelemetry)(e);r["copilot.build"]=_p.BuildInfo.getBuild(),r["copilot.buildType"]=_p.BuildInfo.getBuildType(),this.properties={...this.properties,...r}}extendWithRequestId(e){let r={headerRequestId:e.headerRequestId,serverExperiments:e.serverExperiments,deploymentId:e.deploymentId};this.properties={...this.properties,...r}}static{this.keysToRemoveFromStandardTelemetry=["gitRepoHost","gitRepoName","gitRepoOwner","gitRepoUrl","gitRepoPath","repo","request_option_nwo","userKind"]}static maybeRemoveRepoInfoFromProperties(e,r){if(pI(e))return r;let n={};for(let o in r)t.keysToRemoveFromStandardTelemetry.includes(o)||(n[o]=r[o]);return n}sanitizeKeys(){this.properties=t.sanitizeKeys(this.properties),this.measurements=t.sanitizeKeys(this.measurements);for(let e in this.measurements)isNaN(this.measurements[e])&&delete this.measurements[e]}multiplexProperties(){this.properties=t.multiplexProperties(this.properties)}static sanitizeKeys(e){e=e||{};let r={};for(let n in e){let o=t.keysExemptedFromSanitization.includes(n)?n:n.replace(/\./g,"_");r[o]=e[n]}return r}static multiplexProperties(e){let r={...e};for(let n in e){let o=e[n],s=o?.length??0;if(s>FN){let a=0,c=0;for(;s>0&&c<cpr;){c+=1;let l=n;c>1&&(l=n+"_"+(c<10?"0":"")+c);let u=a+FN;s<FN&&(u=a+s),r[l]=o.slice(a,u),s-=FN,a+=FN}}}return r}updateMeasurements(e){let r=e-this.issuedTime;if(this.measurements.timeSinceIssuedMs=r,this.displayedTime!==void 0){let n=e-this.displayedTime;this.measurements.timeSinceDisplayedMs=n}this.measurements.current_time===void 0&&(this.measurements.current_time=fpr(e))}async makeReadyForSending(e,r,n,o){let s=e.get(gue.IInstantiationService);this.extendWithConfigProperties(e),this.extendWithEditorAgnosticFields(e),this.sanitizeKeys(),this.multiplexProperties(),n==="IncludeExp"&&await this.extendWithExpTelemetry(e),this.updateMeasurements(o),Object.assign(this.properties,s.invokeFunction(Het))}};ai.TelemetryData=vp;var pue=class t extends vp{constructor(e,r,n,o){super(e,r,n),this.filtersAndExp=o}extendedBy(e,r){let n={...this.properties,...e},o={...this.measurements,...r},s=new t(n,o,this.issuedTime,this.filtersAndExp);return s.displayedTime=this.displayedTime,s}extendWithExpTelemetry(){return this.filtersAndExp.exp.addToTelemetry(this),this.filtersAndExp.filters.addToTelemetry(this),Promise.resolve()}static createEmptyConfigForTesting(){return new t({},{},0,{filters:new opr.FilterSettings({}),exp:npr.ExpConfig.createEmptyConfig()})}};ai.TelemetryWithExp=pue;function yue(t,e,r,n){let o=vp.maybeRemoveRepoInfoFromProperties(e,n.properties);pI(e)?t.sendEnhancedGHTelemetryEvent(r,o,n.measurements):t.sendGHTelemetryEvent(r,o,n.measurements)}function lpr(t,e,r,n){let o=t.get(eB.ICompletionsTelemetryService),s=vp.maybeRemoveRepoInfoFromProperties(e,n.properties);o.sendGHTelemetryErrorEvent(r,s,n.measurements)}function upr(t,e,r,n){Vet(t)}function dpr(t){return{promptCharLen:t.prefix.length+(t.context?.reduce((e,r)=>e+r.length,0)??0),promptSuffixCharLen:t.suffix.length}}function hI(){return performance.now()}function fpr(t){return Math.floor(t/1e3)}function Eue(t){return t.get(_ue.ICompletionsTelemetryUserConfigService).optedIn}function Vet(t){return t.get(_ue.ICompletionsTelemetryUserConfigService).ftFlag!==""}function Tue(t,e,r,n){return t.get(vue.ICompletionsPromiseQueueService).register(ppr(t,e,hI(),r?.extendedBy(),n))}async function ppr(t,e,r,n,o=Kl.Standard){let s=t.get(eB.ICompletionsTelemetryService),a=t.get(gue.IInstantiationService),c=n||vp.createAndMarkAsIssued({},{});await c.makeReadyForSending(t,o??!1,"IncludeExp",r),(!pI(o)||a.invokeFunction(Eue))&&yue(s,o,e,c),pI(o)&&apr.includes(e)&&a.invokeFunction(Vet)&&a.invokeFunction(upr,o,e,c)}function hpr(t,e){return t.get(vue.ICompletionsPromiseQueueService).register(mpr(t,e,hI()))}async function mpr(t,e,r){let n=t.get(eB.ICompletionsTelemetryService),o="expProblem",s=vp.createAndMarkAsIssued(e,{});await s.makeReadyForSending(t,Kl.Standard,"SkipExp",r),yue(n,Kl.Standard,o,s)}function gpr(t,e,r,n){let o=t.get(eB.ICompletionsTelemetryService),s={...r,...Het(t)};yue(o,Kl.Standard,e,{properties:s,measurements:n})}function Het(t){let e=t.get(_p.ICompletionsEditorAndPluginInfo),r={unique_id:(0,rpr.generateUuid)(),common_extname:e.getEditorPluginInfo().name,common_extversion:e.getEditorPluginInfo().version,common_vscodeversion:(0,_p.formatNameAndVersion)(e.getEditorInfo())};return{...t.get(_ue.ICompletionsTelemetryUserConfigService).getProperties(),...r}}function Get(t,e,r){return t.sendGHTelemetryException(e,r||"")}function _pr(t,e,r,n){let o=async(...s)=>{try{await r(...s)}catch(a){Get(t,a,n)}};return(...s)=>e.register(o(...s))}function vpr(t,e,r,n){return t.get(vue.ICompletionsPromiseQueueService).register(ypr(t,e,hI(),r?.extendedBy(),n))}async function ypr(t,e,r,n,o=Kl.Standard){if(pI(o)&&!Eue(t))return;let s=t.get(gue.IInstantiationService),a=n||vp.createAndMarkAsIssued({},{});await a.makeReadyForSending(t,o,"IncludeExp",r),s.invokeFunction(lpr,o,e,a)}function Epr(t,e,r,n,o){let s=vp.createAndMarkAsIssued({completionTextJson:JSON.stringify(e),choiceIndex:o.toString()});if(r.logprobs)for(let[a,c]of Object.entries(r.logprobs))s.properties["logprobs_"+a]=JSON.stringify(c)??"unset";return s.extendWithRequestId(n),Tue(t,"engine.completion",s,Kl.Enhanced)}function Tpr(t,e,r){let n={promptJson:JSON.stringify({prefix:e.prefix,context:e.context}),promptSuffixJson:JSON.stringify(e.suffix)};if(e.context){let s=r.properties["request.option.extra"]?JSON.parse(r.properties["request.option.extra"]):{};s.context=e.context,n["request.option.extra"]=JSON.stringify(s)}let o=r.extendedBy(n);return Tue(t,"engine.prompt",o,Kl.Enhanced)}var hue=class{};ai.CopilotTelemetryReporter=hue;ai.ICompletionsTelemetryReporters=(0,tpr.createServiceIdentifier)("ICompletionsTelemetryReporters");var mue=class{getReporter(e,r=Kl.Standard){return pI(r)?this.getEnhancedReporter(e):this.reporter}getEnhancedReporter(e){if(Eue(e))return this.reporterEnhanced}getFTReporter(e){}setReporter(e){this.reporter=e}setEnhancedReporter(e){this.reporterEnhanced=e}setFTReporter(e){this.reporterFT=e}async deactivate(){let e=[this.reporter,this.reporterEnhanced,this.reporterFT];this.reporter=this.reporterEnhanced=this.reporterFT=void 0,await Promise.all(e.map(r=>r?.dispose()))}};ai.TelemetryReporters=mue});var RT=m(of=>{"use strict";var Spr=of&&of.__decorate||function(t,e,r,n){var o=arguments.length,s=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(o<3?a(s):o>3?a(e,r,s):a(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},bpr=of&&of.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(of,"__esModule",{value:!0});of.CompletionsTelemetryServiceBridge=of.ICompletionsTelemetryService=void 0;var Cpr=qa(),Sue=sae(),Apr=Qe(),jN=Ps();of.ICompletionsTelemetryService=(0,Apr.createServiceIdentifier)("completionsTelemetryService");var bue=class{constructor(e){this.telemetryService=e,this.reporter=void 0,this.enhancedReporter=void 0}sendGHTelemetryEvent(e,r,n,o){this.telemetryService.sendGHTelemetryEvent((0,Sue.wrapEventNameForPrefixRemoval)(`copilot/${e}`),r,n),this.getSpyReporters(o??jN.TelemetryStore.Standard)?.sendTelemetryEvent(e,r,n)}sendEnhancedGHTelemetryEvent(e,r,n,o){this.telemetryService.sendEnhancedGHTelemetryEvent((0,Sue.wrapEventNameForPrefixRemoval)(`copilot/${e}`),r,n),this.getSpyReporters(o??jN.TelemetryStore.Enhanced)?.sendTelemetryEvent(e,r,n)}sendGHTelemetryErrorEvent(e,r,n,o){this.telemetryService.sendGHTelemetryErrorEvent((0,Sue.wrapEventNameForPrefixRemoval)(`copilot/${e}`),r,n),this.getSpyReporters(o??jN.TelemetryStore.Enhanced)?.sendTelemetryErrorEvent(e,r,n)}sendGHTelemetryException(e,r,n){this.telemetryService.sendGHTelemetryException(e,r),e instanceof Error&&this.getSpyReporters(n??jN.TelemetryStore.Enhanced)?.sendTelemetryException(e,void 0,void 0)}setSpyReporters(e,r){this.reporter=e,this.enhancedReporter=r}clearSpyReporters(){this.reporter=void 0,this.enhancedReporter=void 0}getSpyReporters(e){return jN.TelemetryStore.isEnhanced(e)?this.enhancedReporter:this.reporter}};of.CompletionsTelemetryServiceBridge=bue;of.CompletionsTelemetryServiceBridge=bue=Spr([bpr(0,Cpr.ITelemetryService)],bue)});var zet=m(mI=>{"use strict";Object.defineProperty(mI,"__esModule",{value:!0});mI.CopilotExtensionStatus=mI.ICompletionsExtensionStatus=void 0;var xpr=Qe();mI.ICompletionsExtensionStatus=(0,xpr.createServiceIdentifier)("ICompletionsExtensionStatus");var Cue=class{constructor(e="Normal",r,n=!1,o){this.kind=e,this.message=r,this.busy=n,this.command=o}};mI.CopilotExtensionStatus=Cue});var tB=m(OT=>{"use strict";Object.defineProperty(OT,"__esModule",{value:!0});OT.TokenErrorNotificationId=OT.CopilotToken=void 0;OT.containsInternalOrg=Ket;function Ket(t){return Yet(t)||Qet(t)}function Yet(t){let e=["4535c7beffc844b46bb1ed4aa04d759a"];for(let r of t)if(e.includes(r))return!0;return!1}function Qet(t){let e=["a5db0bcaae94032fe715fb34a5e4bce2","7184f66dfcee98cb5f08a1cb936d5225","1cb18ac6eedd49b43d74a1c5beb0b955","ea9395b9a9248c05ee6847cbd24355ed"];for(let r of t)if(e.includes(r))return!0;return!1}var Aue=class{constructor(e){this._info=e,this.tokenMap=this.parseToken(e.token)}parseToken(e){let r=new Map,o=e?.split(":")[0]?.split(";");for(let s of o){let[a,c]=s.split("=");r.set(a,c)}return r}get token(){return this._info.token}get sku(){return this._info.sku}get isIndividual(){return this._info.individual??!1}get organizationList(){return this._info.organization_list||[]}get enterpriseList(){return this._info.enterprise_list||[]}get endpoints(){return this._info.endpoints}get isInternal(){return Ket(this.organizationList)}get isMicrosoftInternal(){return Qet(this.organizationList)}get isGitHubInternal(){return Yet(this.organizationList)}get isFreeUser(){return this.sku==="free_limited_copilot"}get isNoAuthUser(){return this.sku==="no_auth_limited_copilot"}get isChatQuotaExceeded(){return this.isFreeUser&&(this._info.limited_user_quotas?.chat??1)<=0}get isCompletionsQuotaExceeded(){return this.isFreeUser&&(this._info.limited_user_quotas?.completions??1)<=0}get codeQuoteEnabled(){return this._info.code_quote_enabled??!1}get isVscodeTeamMember(){return this._info.isVscodeTeamMember}get codexAgentEnabled(){return this._info.codex_agent_enabled??!1}get copilotPlan(){if(this.isFreeUser)return"free";let e=this._info.copilot_plan;switch(e){case"individual":case"individual_pro":case"business":case"enterprise":return e;default:return"individual"}}get quotaInfo(){return{quota_snapshots:this._info.quota_snapshots,quota_reset_date:this._info.quota_reset_date}}get username(){return this._info.username}isTelemetryEnabled(){return this._isTelemetryEnabled===void 0&&(this._isTelemetryEnabled=this._info.telemetry==="enabled"),this._isTelemetryEnabled}isPublicSuggestionsEnabled(){return this._isPublicSuggestionsEnabled===void 0&&(this._isPublicSuggestionsEnabled=this._info.public_suggestions==="enabled"),this._isPublicSuggestionsEnabled}isChatEnabled(){return this._info.chat_enabled??!1}isCopilotIgnoreEnabled(){return this._info.copilotignore_enabled??!1}get isCopilotCodeReviewEnabled(){return this.getTokenValue("ccr")==="1"}isEditorPreviewFeaturesEnabled(){return this.getTokenValue("editor_preview_features")!=="0"}isMcpEnabled(){return this.getTokenValue("mcp")!=="0"}getTokenValue(e){return this.tokenMap.get(e)}isExpandedClientSideIndexingEnabled(){return this._info.blackbird_clientside_indexing===!0}isFcv1(){return this.tokenMap.get("fcv1")==="1"}};OT.CopilotToken=Aue;var Wet;(function(t){t.EnterPriseManagedUserAccount="enterprise_managed_user_account",t.NotSignedUp="not_signed_up",t.NoCopilotAccess="no_copilot_access",t.SubscriptionEnded="subscription_ended",t.ServerError="server_error",t.FeatureFlagBlocked="feature_flag_blocked",t.SpammyUser="spammy_user",t.CodespacesDemoInactive="codespaces_demo_inactive",t.SnippyNotConfigured="snippy_not_configured"})(Wet||(OT.TokenErrorNotificationId=Wet={}))});var gI=m(Yl=>{"use strict";var wpr=Yl&&Yl.__decorate||function(t,e,r,n){var o=arguments.length,s=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(o<3?a(s):o>3?a(e,r,s):a(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},Ipr=Yl&&Yl.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(Yl,"__esModule",{value:!0});Yl.CopilotTokenManagerImpl=Yl.ICompletionsCopilotTokenManager=Yl.CopilotToken=void 0;var Ppr=ha(),Rpr=Qe(),Opr=Ua(),Mpr=Ar(),Npr=tB();Object.defineProperty(Yl,"CopilotToken",{enumerable:!0,get:function(){return Npr.CopilotToken}});Yl.ICompletionsCopilotTokenManager=(0,Rpr.createServiceIdentifier)("ICompletionsCopilotTokenManager");var xue=class extends Mpr.Disposable{get token(){return this.tokenRefetcher.trigger(()=>this.updateCachedToken()),this._token}constructor(e=!1,r){super(),this.primed=e,this.authenticationService=r,this.tokenRefetcher=new Opr.ThrottledDelayer(5e3),this.updateCachedToken(),this._register(this.authenticationService.onDidAuthenticationChange(()=>this.updateCachedToken()))}primeToken(){try{return this.getToken().then(()=>!0,()=>!1)}catch{return Promise.resolve(!1)}}async getToken(){return this.updateCachedToken()}async updateCachedToken(){return this._token=await this.authenticationService.getCopilotToken(),this._token}resetToken(e){this.authenticationService.resetCopilotToken()}getLastToken(){return this.authenticationService.copilotToken}};Yl.CopilotTokenManagerImpl=xue;Yl.CopilotTokenManagerImpl=xue=wpr([Ipr(1,Ppr.IAuthenticationService)],xue)});var rB=m(_I=>{"use strict";Object.defineProperty(_I,"__esModule",{value:!0});_I.NoOpCitationManager=_I.ICompletionsCitationManager=void 0;var Lpr=Qe(),kpr=Ar();_I.ICompletionsCitationManager=(0,Lpr.createServiceIdentifier)("ICompletionsCitationManager");var wue=class{register(){return kpr.Disposable.None}async handleIPCodeCitation(e){}};_I.NoOpCitationManager=wue});var Za=m(as=>{"use strict";Object.defineProperty(as,"__esModule",{value:!0});as.HasPropertyKey=Dpr;as.IsAsyncIterator=Upr;as.IsArray=Iue;as.IsBigInt=qpr;as.IsBoolean=Fpr;as.IsDate=jpr;as.IsFunction=Bpr;as.IsIterator=$pr;as.IsNull=Vpr;as.IsNumber=Hpr;as.IsObject=Pue;as.IsRegExp=Gpr;as.IsString=zpr;as.IsSymbol=Wpr;as.IsUint8Array=Rue;as.IsUndefined=Kpr;function Dpr(t,e){return e in t}function Upr(t){return Pue(t)&&!Iue(t)&&!Rue(t)&&Symbol.asyncIterator in t}function Iue(t){return Array.isArray(t)}function qpr(t){return typeof t=="bigint"}function Fpr(t){return typeof t=="boolean"}function jpr(t){return t instanceof globalThis.Date}function Bpr(t){return typeof t=="function"}function $pr(t){return Pue(t)&&!Iue(t)&&!Rue(t)&&Symbol.iterator in t}function Vpr(t){return t===null}function Hpr(t){return typeof t=="number"}function Pue(t){return typeof t=="object"&&t!==null}function Gpr(t){return t instanceof globalThis.RegExp}function zpr(t){return typeof t=="string"}function Wpr(t){return typeof t=="symbol"}function Rue(t){return t instanceof globalThis.Uint8Array}function Kpr(t){return t===void 0}});var Hc=m(fm=>{"use strict";var Ypr=fm&&fm.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),Qpr=fm&&fm.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),Zpr=fm&&fm.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),o=0;o<n.length;o++)n[o]!=="default"&&Ypr(r,e,n[o]);return Qpr(r,e),r}})();Object.defineProperty(fm,"__esModule",{value:!0});fm.Clone=nhr;var BN=Zpr(Za());function Jpr(t){return t.map(e=>nB(e))}function Xpr(t){return new Date(t.getTime())}function ehr(t){return new Uint8Array(t)}function thr(t){return new RegExp(t.source,t.flags)}function rhr(t){let e={};for(let r of Object.getOwnPropertyNames(t))e[r]=nB(t[r]);for(let r of Object.getOwnPropertySymbols(t))e[r]=nB(t[r]);return e}function nB(t){return BN.IsArray(t)?Jpr(t):BN.IsDate(t)?Xpr(t):BN.IsUint8Array(t)?ehr(t):BN.IsRegExp(t)?thr(t):BN.IsObject(t)?rhr(t):t}function nhr(t){return nB(t)}});var oB=m(iB=>{"use strict";Object.defineProperty(iB,"__esModule",{value:!0});iB.CloneRest=ihr;iB.CloneType=Jet;var Zet=Hc();function ihr(t){return t.map(e=>Jet(e))}function Jet(t,e){return e===void 0?(0,Zet.Clone)(t):(0,Zet.Clone)({...e,...t})}});var Oue=m(A1=>{"use strict";var ohr=A1&&A1.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),Xet=A1&&A1.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&ohr(e,t,r)};Object.defineProperty(A1,"__esModule",{value:!0});Xet(oB(),A1);Xet(Hc(),A1)});var sB=m(qr=>{"use strict";Object.defineProperty(qr,"__esModule",{value:!0});qr.IsAsyncIterator=shr;qr.IsIterator=ahr;qr.IsStandardObject=chr;qr.IsInstanceObject=lhr;qr.IsPromise=uhr;qr.IsDate=dhr;qr.IsMap=fhr;qr.IsSet=phr;qr.IsRegExp=hhr;qr.IsTypedArray=mhr;qr.IsInt8Array=ghr;qr.IsUint8Array=_hr;qr.IsUint8ClampedArray=vhr;qr.IsInt16Array=yhr;qr.IsUint16Array=Ehr;qr.IsInt32Array=Thr;qr.IsUint32Array=Shr;qr.IsFloat32Array=bhr;qr.IsFloat64Array=Chr;qr.IsBigInt64Array=Ahr;qr.IsBigUint64Array=xhr;qr.HasPropertyKey=whr;qr.IsObject=$N;qr.IsArray=ett;qr.IsUndefined=ttt;qr.IsNull=rtt;qr.IsBoolean=ntt;qr.IsNumber=itt;qr.IsInteger=Ihr;qr.IsBigInt=ott;qr.IsString=stt;qr.IsFunction=att;qr.IsSymbol=ctt;qr.IsValueType=Phr;function shr(t){return $N(t)&&globalThis.Symbol.asyncIterator in t}function ahr(t){return $N(t)&&globalThis.Symbol.iterator in t}function chr(t){return $N(t)&&(globalThis.Object.getPrototypeOf(t)===Object.prototype||globalThis.Object.getPrototypeOf(t)===null)}function lhr(t){return $N(t)&&!ett(t)&&att(t.constructor)&&t.constructor.name!=="Object"}function uhr(t){return t instanceof globalThis.Promise}function dhr(t){return t instanceof Date&&globalThis.Number.isFinite(t.getTime())}function fhr(t){return t instanceof globalThis.Map}function phr(t){return t instanceof globalThis.Set}function hhr(t){return t instanceof globalThis.RegExp}function mhr(t){return globalThis.ArrayBuffer.isView(t)}function ghr(t){return t instanceof globalThis.Int8Array}function _hr(t){return t instanceof globalThis.Uint8Array}function vhr(t){return t instanceof globalThis.Uint8ClampedArray}function yhr(t){return t instanceof globalThis.Int16Array}function Ehr(t){return t instanceof globalThis.Uint16Array}function Thr(t){return t instanceof globalThis.Int32Array}function Shr(t){return t instanceof globalThis.Uint32Array}function bhr(t){return t instanceof globalThis.Float32Array}function Chr(t){return t instanceof globalThis.Float64Array}function Ahr(t){return t instanceof globalThis.BigInt64Array}function xhr(t){return t instanceof globalThis.BigUint64Array}function whr(t,e){return e in t}function $N(t){return t!==null&&typeof t=="object"}function ett(t){return globalThis.Array.isArray(t)&&!globalThis.ArrayBuffer.isView(t)}function ttt(t){return t===void 0}function rtt(t){return t===null}function ntt(t){return typeof t=="boolean"}function itt(t){return typeof t=="number"}function Ihr(t){return globalThis.Number.isInteger(t)}function ott(t){return typeof t=="bigint"}function stt(t){return typeof t=="string"}function att(t){return typeof t=="function"}function ctt(t){return typeof t=="symbol"}function Phr(t){return ott(t)||ntt(t)||rtt(t)||itt(t)||stt(t)||ctt(t)||ttt(t)}});var bo=m(MT=>{"use strict";var Rhr=MT&&MT.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),Ohr=MT&&MT.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Rhr(e,t,r)};Object.defineProperty(MT,"__esModule",{value:!0});Ohr(sB(),MT)});var VN=m(cB=>{"use strict";Object.defineProperty(cB,"__esModule",{value:!0});cB.TypeSystemPolicy=void 0;var aB=bo(),ltt;(function(t){t.InstanceMode="default",t.ExactOptionalPropertyTypes=!1,t.AllowArrayObject=!1,t.AllowNaN=!1,t.AllowNullVoid=!1;function e(a,c){return t.ExactOptionalPropertyTypes?c in a:a[c]!==void 0}t.IsExactOptionalProperty=e;function r(a){let c=(0,aB.IsObject)(a);return t.AllowArrayObject?c:c&&!(0,aB.IsArray)(a)}t.IsObjectLike=r;function n(a){return r(a)&&!(a instanceof Date)&&!(a instanceof Uint8Array)}t.IsRecordLike=n;function o(a){return t.AllowNaN?(0,aB.IsNumber)(a):Number.isFinite(a)}t.IsNumberLike=o;function s(a){let c=(0,aB.IsUndefined)(a);return t.AllowNullVoid?c||a===null:c}t.IsVoidLike=s})(ltt||(cB.TypeSystemPolicy=ltt={}))});var utt=m(pm=>{"use strict";var Mhr=pm&&pm.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),Nhr=pm&&pm.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),Lhr=pm&&pm.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),o=0;o<n.length;o++)n[o]!=="default"&&Mhr(r,e,n[o]);return Nhr(r,e),r}})();Object.defineProperty(pm,"__esModule",{value:!0});pm.Immutable=lB;var HN=Lhr(Za());function khr(t){return globalThis.Object.freeze(t).map(e=>lB(e))}function Dhr(t){let e={};for(let r of Object.getOwnPropertyNames(t))e[r]=lB(t[r]);for(let r of Object.getOwnPropertySymbols(t))e[r]=lB(t[r]);return globalThis.Object.freeze(e)}function lB(t){return HN.IsArray(t)?khr(t):HN.IsDate(t)?t:HN.IsUint8Array(t)?t:HN.IsRegExp(t)?t:HN.IsObject(t)?Dhr(t):t}});var Mt=m(Mue=>{"use strict";Object.defineProperty(Mue,"__esModule",{value:!0});Mue.CreateType=jhr;var Uhr=VN(),qhr=utt(),Fhr=Hc();function jhr(t,e){let r=e!==void 0?{...e,...t}:t;switch(Uhr.TypeSystemPolicy.InstanceMode){case"freeze":return(0,qhr.Immutable)(r);case"clone":return(0,Fhr.Clone)(r);default:return r}}});var hm=m(NT=>{"use strict";var Bhr=NT&&NT.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),$hr=NT&&NT.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Bhr(e,t,r)};Object.defineProperty(NT,"__esModule",{value:!0});$hr(Mt(),NT)});var Lue=m(uB=>{"use strict";Object.defineProperty(uB,"__esModule",{value:!0});uB.TypeBoxError=void 0;var Nue=class extends Error{constructor(e){super(e)}};uB.TypeBoxError=Nue});var vi=m(LT=>{"use strict";var Vhr=LT&&LT.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),Hhr=LT&&LT.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Vhr(e,t,r)};Object.defineProperty(LT,"__esModule",{value:!0});Hhr(Lue(),LT)});var GN=m(Zu=>{"use strict";Object.defineProperty(Zu,"__esModule",{value:!0});Zu.Kind=Zu.Hint=Zu.OptionalKind=Zu.ReadonlyKind=Zu.TransformKind=void 0;Zu.TransformKind=Symbol.for("TypeBox.Transform");Zu.ReadonlyKind=Symbol.for("TypeBox.Readonly");Zu.OptionalKind=Symbol.for("TypeBox.Optional");Zu.Hint=Symbol.for("TypeBox.Hint");Zu.Kind=Symbol.for("TypeBox.Kind")});var Ze=m(kT=>{"use strict";var Ghr=kT&&kT.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),zhr=kT&&kT.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Ghr(e,t,r)};Object.defineProperty(kT,"__esModule",{value:!0});zhr(GN(),kT)});var Er=m(Et=>{"use strict";var Whr=Et&&Et.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),Khr=Et&&Et.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),Yhr=Et&&Et.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),o=0;o<n.length;o++)n[o]!=="default"&&Whr(r,e,n[o]);return Khr(r,e),r}})();Object.defineProperty(Et,"__esModule",{value:!0});Et.IsReadonly=Qhr;Et.IsOptional=Zhr;Et.IsAny=dtt;Et.IsArgument=ftt;Et.IsArray=ptt;Et.IsAsyncIterator=htt;Et.IsBigInt=mtt;Et.IsBoolean=gtt;Et.IsComputed=_tt;Et.IsConstructor=vtt;Et.IsDate=ytt;Et.IsFunction=Ett;Et.IsImport=Jhr;Et.IsInteger=Ttt;Et.IsProperties=Xhr;Et.IsIntersect=Stt;Et.IsIterator=btt;Et.IsKindOf=xr;Et.IsLiteralString=emr;Et.IsLiteralNumber=tmr;Et.IsLiteralBoolean=rmr;Et.IsLiteralValue=nmr;Et.IsLiteral=zN;Et.IsMappedKey=Ctt;Et.IsMappedResult=Att;Et.IsNever=xtt;Et.IsNot=wtt;Et.IsNull=Itt;Et.IsNumber=Ptt;Et.IsObject=Rtt;Et.IsPromise=Ott;Et.IsRecord=Mtt;Et.IsRecursive=imr;Et.IsRef=Ntt;Et.IsRegExp=Ltt;Et.IsString=ktt;Et.IsSymbol=Dtt;Et.IsTemplateLiteral=Utt;Et.IsThis=qtt;Et.IsTransform=omr;Et.IsTuple=Ftt;Et.IsUndefined=jtt;Et.IsUnion=Btt;Et.IsUint8Array=$tt;Et.IsUnknown=Vtt;Et.IsUnsafe=Htt;Et.IsVoid=Gtt;Et.IsKind=ztt;Et.IsSchema=smr;var Gc=Yhr(Za()),mm=Ze();function Qhr(t){return Gc.IsObject(t)&&t[mm.ReadonlyKind]==="Readonly"}function Zhr(t){return Gc.IsObject(t)&&t[mm.OptionalKind]==="Optional"}function dtt(t){return xr(t,"Any")}function ftt(t){return xr(t,"Argument")}function ptt(t){return xr(t,"Array")}function htt(t){return xr(t,"AsyncIterator")}function mtt(t){return xr(t,"BigInt")}function gtt(t){return xr(t,"Boolean")}function _tt(t){return xr(t,"Computed")}function vtt(t){return xr(t,"Constructor")}function ytt(t){return xr(t,"Date")}function Ett(t){return xr(t,"Function")}function Jhr(t){return xr(t,"Import")}function Ttt(t){return xr(t,"Integer")}function Xhr(t){return Gc.IsObject(t)}function Stt(t){return xr(t,"Intersect")}function btt(t){return xr(t,"Iterator")}function xr(t,e){return Gc.IsObject(t)&&mm.Kind in t&&t[mm.Kind]===e}function emr(t){return zN(t)&&Gc.IsString(t.const)}function tmr(t){return zN(t)&&Gc.IsNumber(t.const)}function rmr(t){return zN(t)&&Gc.IsBoolean(t.const)}function nmr(t){return Gc.IsBoolean(t)||Gc.IsNumber(t)||Gc.IsString(t)}function zN(t){return xr(t,"Literal")}function Ctt(t){return xr(t,"MappedKey")}function Att(t){return xr(t,"MappedResult")}function xtt(t){return xr(t,"Never")}function wtt(t){return xr(t,"Not")}function Itt(t){return xr(t,"Null")}function Ptt(t){return xr(t,"Number")}function Rtt(t){return xr(t,"Object")}function Ott(t){return xr(t,"Promise")}function Mtt(t){return xr(t,"Record")}function imr(t){return Gc.IsObject(t)&&mm.Hint in t&&t[mm.Hint]==="Recursive"}function Ntt(t){return xr(t,"Ref")}function Ltt(t){return xr(t,"RegExp")}function ktt(t){return xr(t,"String")}function Dtt(t){return xr(t,"Symbol")}function Utt(t){return xr(t,"TemplateLiteral")}function qtt(t){return xr(t,"This")}function omr(t){return Gc.IsObject(t)&&mm.TransformKind in t}function Ftt(t){return xr(t,"Tuple")}function jtt(t){return xr(t,"Undefined")}function Btt(t){return xr(t,"Union")}function $tt(t){return xr(t,"Uint8Array")}function Vtt(t){return xr(t,"Unknown")}function Htt(t){return xr(t,"Unsafe")}function Gtt(t){return xr(t,"Void")}function ztt(t){return Gc.IsObject(t)&&mm.Kind in t&&Gc.IsString(t[mm.Kind])}function smr(t){return dtt(t)||ftt(t)||ptt(t)||gtt(t)||mtt(t)||htt(t)||_tt(t)||vtt(t)||ytt(t)||Ett(t)||Ttt(t)||Stt(t)||btt(t)||zN(t)||Ctt(t)||Att(t)||xtt(t)||wtt(t)||Itt(t)||Ptt(t)||Rtt(t)||Ott(t)||Mtt(t)||Ntt(t)||Ltt(t)||ktt(t)||Dtt(t)||Utt(t)||qtt(t)||Ftt(t)||jtt(t)||Btt(t)||$tt(t)||Vtt(t)||Htt(t)||Gtt(t)||ztt(t)}});var Fue=m(dt=>{"use strict";var amr=dt&&dt.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),cmr=dt&&dt.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),lmr=dt&&dt.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),o=0;o<n.length;o++)n[o]!=="default"&&amr(r,e,n[o]);return cmr(r,e),r}})();Object.defineProperty(dt,"__esModule",{value:!0});dt.TypeGuardUnknownTypeError=void 0;dt.IsReadonly=hmr;dt.IsOptional=mmr;dt.IsAny=Qtt;dt.IsArgument=Ztt;dt.IsArray=Jtt;dt.IsAsyncIterator=Xtt;dt.IsBigInt=ert;dt.IsBoolean=trt;dt.IsComputed=rrt;dt.IsConstructor=nrt;dt.IsDate=irt;dt.IsFunction=ort;dt.IsImport=gmr;dt.IsInteger=srt;dt.IsProperties=dB;dt.IsIntersect=art;dt.IsIterator=crt;dt.IsKindOf=wr;dt.IsLiteralString=lrt;dt.IsLiteralNumber=urt;dt.IsLiteralBoolean=_mr;dt.IsLiteral=KN;dt.IsLiteralValue=drt;dt.IsMappedKey=frt;dt.IsMappedResult=prt;dt.IsNever=hrt;dt.IsNot=mrt;dt.IsNull=grt;dt.IsNumber=_rt;dt.IsObject=vrt;dt.IsPromise=yrt;dt.IsRecord=Ert;dt.IsRecursive=vmr;dt.IsRef=Trt;dt.IsRegExp=Srt;dt.IsString=brt;dt.IsSymbol=Crt;dt.IsTemplateLiteral=Art;dt.IsThis=xrt;dt.IsTransform=wrt;dt.IsTuple=Irt;dt.IsUndefined=Prt;dt.IsUnionLiteral=ymr;dt.IsUnion=que;dt.IsUint8Array=Rrt;dt.IsUnknown=Ort;dt.IsUnsafe=Mrt;dt.IsVoid=Nrt;dt.IsKind=Lrt;dt.IsSchema=cs;var gt=lmr(Za()),yp=Ze(),umr=vi(),kue=class extends umr.TypeBoxError{};dt.TypeGuardUnknownTypeError=kue;var dmr=["Argument","Any","Array","AsyncIterator","BigInt","Boolean","Computed","Constructor","Date","Enum","Function","Integer","Intersect","Iterator","Literal","MappedKey","MappedResult","Not","Null","Number","Object","Promise","Record","Ref","RegExp","String","Symbol","TemplateLiteral","This","Tuple","Undefined","Union","Uint8Array","Unknown","Void"];function Wtt(t){try{return new RegExp(t),!0}catch{return!1}}function Due(t){if(!gt.IsString(t))return!1;for(let e=0;e<t.length;e++){let r=t.charCodeAt(e);if(r>=7&&r<=13||r===27||r===127)return!1}return!0}function Ktt(t){return Uue(t)||cs(t)}function WN(t){return gt.IsUndefined(t)||gt.IsBigInt(t)}function jn(t){return gt.IsUndefined(t)||gt.IsNumber(t)}function Uue(t){return gt.IsUndefined(t)||gt.IsBoolean(t)}function Sn(t){return gt.IsUndefined(t)||gt.IsString(t)}function fmr(t){return gt.IsUndefined(t)||gt.IsString(t)&&Due(t)&&Wtt(t)}function pmr(t){return gt.IsUndefined(t)||gt.IsString(t)&&Due(t)}function Ytt(t){return gt.IsUndefined(t)||cs(t)}function hmr(t){return gt.IsObject(t)&&t[yp.ReadonlyKind]==="Readonly"}function mmr(t){return gt.IsObject(t)&&t[yp.OptionalKind]==="Optional"}function Qtt(t){return wr(t,"Any")&&Sn(t.$id)}function Ztt(t){return wr(t,"Argument")&&gt.IsNumber(t.index)}function Jtt(t){return wr(t,"Array")&&t.type==="array"&&Sn(t.$id)&&cs(t.items)&&jn(t.minItems)&&jn(t.maxItems)&&Uue(t.uniqueItems)&&Ytt(t.contains)&&jn(t.minContains)&&jn(t.maxContains)}function Xtt(t){return wr(t,"AsyncIterator")&&t.type==="AsyncIterator"&&Sn(t.$id)&&cs(t.items)}function ert(t){return wr(t,"BigInt")&&t.type==="bigint"&&Sn(t.$id)&&WN(t.exclusiveMaximum)&&WN(t.exclusiveMinimum)&&WN(t.maximum)&&WN(t.minimum)&&WN(t.multipleOf)}function trt(t){return wr(t,"Boolean")&&t.type==="boolean"&&Sn(t.$id)}function rrt(t){return wr(t,"Computed")&&gt.IsString(t.target)&&gt.IsArray(t.parameters)&&t.parameters.every(e=>cs(e))}function nrt(t){return wr(t,"Constructor")&&t.type==="Constructor"&&Sn(t.$id)&&gt.IsArray(t.parameters)&&t.parameters.every(e=>cs(e))&&cs(t.returns)}function irt(t){return wr(t,"Date")&&t.type==="Date"&&Sn(t.$id)&&jn(t.exclusiveMaximumTimestamp)&&jn(t.exclusiveMinimumTimestamp)&&jn(t.maximumTimestamp)&&jn(t.minimumTimestamp)&&jn(t.multipleOfTimestamp)}function ort(t){return wr(t,"Function")&&t.type==="Function"&&Sn(t.$id)&&gt.IsArray(t.parameters)&&t.parameters.every(e=>cs(e))&&cs(t.returns)}function gmr(t){return wr(t,"Import")&&gt.HasPropertyKey(t,"$defs")&&gt.IsObject(t.$defs)&&dB(t.$defs)&&gt.HasPropertyKey(t,"$ref")&&gt.IsString(t.$ref)&&t.$ref in t.$defs}function srt(t){return wr(t,"Integer")&&t.type==="integer"&&Sn(t.$id)&&jn(t.exclusiveMaximum)&&jn(t.exclusiveMinimum)&&jn(t.maximum)&&jn(t.minimum)&&jn(t.multipleOf)}function dB(t){return gt.IsObject(t)&&Object.entries(t).every(([e,r])=>Due(e)&&cs(r))}function art(t){return wr(t,"Intersect")&&!(gt.IsString(t.type)&&t.type!=="object")&&gt.IsArray(t.allOf)&&t.allOf.every(e=>cs(e)&&!wrt(e))&&Sn(t.type)&&(Uue(t.unevaluatedProperties)||Ytt(t.unevaluatedProperties))&&Sn(t.$id)}function crt(t){return wr(t,"Iterator")&&t.type==="Iterator"&&Sn(t.$id)&&cs(t.items)}function wr(t,e){return gt.IsObject(t)&&yp.Kind in t&&t[yp.Kind]===e}function lrt(t){return KN(t)&&gt.IsString(t.const)}function urt(t){return KN(t)&&gt.IsNumber(t.const)}function _mr(t){return KN(t)&&gt.IsBoolean(t.const)}function KN(t){return wr(t,"Literal")&&Sn(t.$id)&&drt(t.const)}function drt(t){return gt.IsBoolean(t)||gt.IsNumber(t)||gt.IsString(t)}function frt(t){return wr(t,"MappedKey")&&gt.IsArray(t.keys)&&t.keys.every(e=>gt.IsNumber(e)||gt.IsString(e))}function prt(t){return wr(t,"MappedResult")&&dB(t.properties)}function hrt(t){return wr(t,"Never")&&gt.IsObject(t.not)&&Object.getOwnPropertyNames(t.not).length===0}function mrt(t){return wr(t,"Not")&&cs(t.not)}function grt(t){return wr(t,"Null")&&t.type==="null"&&Sn(t.$id)}function _rt(t){return wr(t,"Number")&&t.type==="number"&&Sn(t.$id)&&jn(t.exclusiveMaximum)&&jn(t.exclusiveMinimum)&&jn(t.maximum)&&jn(t.minimum)&&jn(t.multipleOf)}function vrt(t){return wr(t,"Object")&&t.type==="object"&&Sn(t.$id)&&dB(t.properties)&&Ktt(t.additionalProperties)&&jn(t.minProperties)&&jn(t.maxProperties)}function yrt(t){return wr(t,"Promise")&&t.type==="Promise"&&Sn(t.$id)&&cs(t.item)}function Ert(t){return wr(t,"Record")&&t.type==="object"&&Sn(t.$id)&&Ktt(t.additionalProperties)&&gt.IsObject(t.patternProperties)&&(e=>{let r=Object.getOwnPropertyNames(e.patternProperties);return r.length===1&&Wtt(r[0])&&gt.IsObject(e.patternProperties)&&cs(e.patternProperties[r[0]])})(t)}function vmr(t){return gt.IsObject(t)&&yp.Hint in t&&t[yp.Hint]==="Recursive"}function Trt(t){return wr(t,"Ref")&&Sn(t.$id)&&gt.IsString(t.$ref)}function Srt(t){return wr(t,"RegExp")&&Sn(t.$id)&&gt.IsString(t.source)&&gt.IsString(t.flags)&&jn(t.maxLength)&&jn(t.minLength)}function brt(t){return wr(t,"String")&&t.type==="string"&&Sn(t.$id)&&jn(t.minLength)&&jn(t.maxLength)&&fmr(t.pattern)&&pmr(t.format)}function Crt(t){return wr(t,"Symbol")&&t.type==="symbol"&&Sn(t.$id)}function Art(t){return wr(t,"TemplateLiteral")&&t.type==="string"&&gt.IsString(t.pattern)&&t.pattern[0]==="^"&&t.pattern[t.pattern.length-1]==="$"}function xrt(t){return wr(t,"This")&&Sn(t.$id)&&gt.IsString(t.$ref)}function wrt(t){return gt.IsObject(t)&&yp.TransformKind in t}function Irt(t){return wr(t,"Tuple")&&t.type==="array"&&Sn(t.$id)&&gt.IsNumber(t.minItems)&&gt.IsNumber(t.maxItems)&&t.minItems===t.maxItems&&(gt.IsUndefined(t.items)&&gt.IsUndefined(t.additionalItems)&&t.minItems===0||gt.IsArray(t.items)&&t.items.every(e=>cs(e)))}function Prt(t){return wr(t,"Undefined")&&t.type==="undefined"&&Sn(t.$id)}function ymr(t){return que(t)&&t.anyOf.every(e=>lrt(e)||urt(e))}function que(t){return wr(t,"Union")&&Sn(t.$id)&&gt.IsObject(t)&&gt.IsArray(t.anyOf)&&t.anyOf.every(e=>cs(e))}function Rrt(t){return wr(t,"Uint8Array")&&t.type==="Uint8Array"&&Sn(t.$id)&&jn(t.minByteLength)&&jn(t.maxByteLength)}function Ort(t){return wr(t,"Unknown")&&Sn(t.$id)}function Mrt(t){return wr(t,"Unsafe")}function Nrt(t){return wr(t,"Void")&&t.type==="void"&&Sn(t.$id)}function Lrt(t){return gt.IsObject(t)&&yp.Kind in t&&gt.IsString(t[yp.Kind])&&!dmr.includes(t[yp.Kind])}function cs(t){return gt.IsObject(t)&&(Qtt(t)||Ztt(t)||Jtt(t)||trt(t)||ert(t)||Xtt(t)||rrt(t)||nrt(t)||irt(t)||ort(t)||srt(t)||art(t)||crt(t)||KN(t)||frt(t)||prt(t)||hrt(t)||mrt(t)||grt(t)||_rt(t)||vrt(t)||yrt(t)||Ert(t)||Trt(t)||Srt(t)||brt(t)||Crt(t)||Art(t)||xrt(t)||Irt(t)||Prt(t)||que(t)||Rrt(t)||Ort(t)||Mrt(t)||Nrt(t)||Lrt(t))}});var Bue=m(zc=>{"use strict";var Emr=zc&&zc.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),Tmr=zc&&zc.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),jue=zc&&zc.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),o=0;o<n.length;o++)n[o]!=="default"&&Emr(r,e,n[o]);return Tmr(r,e),r}})();Object.defineProperty(zc,"__esModule",{value:!0});zc.ValueGuard=zc.TypeGuard=zc.KindGuard=void 0;zc.KindGuard=jue(Er());zc.TypeGuard=jue(Fue());zc.ValueGuard=jue(Za())});var krt=m($ue=>{"use strict";Object.defineProperty($ue,"__esModule",{value:!0});$ue.Increment=Smr;function Smr(t){return(parseInt(t)+1).toString()}});var Drt=m(DT=>{"use strict";var bmr=DT&&DT.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),Cmr=DT&&DT.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&bmr(e,t,r)};Object.defineProperty(DT,"__esModule",{value:!0});Cmr(krt(),DT)});var Urt=m(Ki=>{"use strict";Object.defineProperty(Ki,"__esModule",{value:!0});Ki.PatternNeverExact=Ki.PatternStringExact=Ki.PatternNumberExact=Ki.PatternBooleanExact=Ki.PatternNever=Ki.PatternString=Ki.PatternNumber=Ki.PatternBoolean=void 0;Ki.PatternBoolean="(true|false)";Ki.PatternNumber="(0|[1-9][0-9]*)";Ki.PatternString="(.*)";Ki.PatternNever="(?!.*)";Ki.PatternBooleanExact=`^${Ki.PatternBoolean}$`;Ki.PatternNumberExact=`^${Ki.PatternNumber}$`;Ki.PatternStringExact=`^${Ki.PatternString}$`;Ki.PatternNeverExact=`^${Ki.PatternNever}$`});var YN=m(UT=>{"use strict";var Amr=UT&&UT.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),xmr=UT&&UT.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Amr(e,t,r)};Object.defineProperty(UT,"__esModule",{value:!0});xmr(Urt(),UT)});var qrt=m(x1=>{"use strict";Object.defineProperty(x1,"__esModule",{value:!0});x1.Entries=wmr;x1.Clear=Imr;x1.Delete=Pmr;x1.Has=Rmr;x1.Set=Omr;x1.Get=Mmr;var vI=new Map;function wmr(){return new Map(vI)}function Imr(){return vI.clear()}function Pmr(t){return vI.delete(t)}function Rmr(t){return vI.has(t)}function Omr(t,e){vI.set(t,e)}function Mmr(t){return vI.get(t)}});var Frt=m(w1=>{"use strict";Object.defineProperty(w1,"__esModule",{value:!0});w1.Entries=Nmr;w1.Clear=Lmr;w1.Delete=kmr;w1.Has=Dmr;w1.Set=Umr;w1.Get=qmr;var yI=new Map;function Nmr(){return new Map(yI)}function Lmr(){return yI.clear()}function kmr(t){return yI.delete(t)}function Dmr(t){return yI.has(t)}function Umr(t,e){yI.set(t,e)}function qmr(t){return yI.get(t)}});var qT=m(Ju=>{"use strict";var Fmr=Ju&&Ju.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),jmr=Ju&&Ju.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),jrt=Ju&&Ju.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),o=0;o<n.length;o++)n[o]!=="default"&&Fmr(r,e,n[o]);return jmr(r,e),r}})();Object.defineProperty(Ju,"__esModule",{value:!0});Ju.TypeRegistry=Ju.FormatRegistry=void 0;Ju.FormatRegistry=jrt(qrt());Ju.TypeRegistry=jrt(Frt())});var Vrt=m(Ep=>{"use strict";Object.defineProperty(Ep,"__esModule",{value:!0});Ep.SetIncludes=Brt;Ep.SetIsSubset=Bmr;Ep.SetDistinct=$mr;Ep.SetIntersect=$rt;Ep.SetUnion=Vmr;Ep.SetComplement=Hmr;Ep.SetIntersectMany=zmr;Ep.SetUnionMany=Wmr;function Brt(t,e){return t.includes(e)}function Bmr(t,e){return t.every(r=>Brt(e,r))}function $mr(t){return[...new Set(t)]}function $rt(t,e){return t.filter(r=>e.includes(r))}function Vmr(t,e){return[...t,...e]}function Hmr(t,e){return t.filter(r=>!e.includes(r))}function Gmr(t,e){return t.reduce((r,n)=>$rt(r,n),e)}function zmr(t){return t.length===1?t[0]:t.length>1?Gmr(t.slice(1),t[0]):[]}function Wmr(t){let e=[];for(let r of t)e.push(...r);return e}});var QN=m(FT=>{"use strict";var Kmr=FT&&FT.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),Ymr=FT&&FT.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Kmr(e,t,r)};Object.defineProperty(FT,"__esModule",{value:!0});Ymr(Vrt(),FT)});var Hrt=m(Vue=>{"use strict";Object.defineProperty(Vue,"__esModule",{value:!0});Vue.Any=Jmr;var Qmr=hm(),Zmr=Ze();function Jmr(t){return(0,Qmr.CreateType)({[Zmr.Kind]:"Any"},t)}});var EI=m(jT=>{"use strict";var Xmr=jT&&jT.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),egr=jT&&jT.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Xmr(e,t,r)};Object.defineProperty(jT,"__esModule",{value:!0});egr(Hrt(),jT)});var Grt=m(Hue=>{"use strict";Object.defineProperty(Hue,"__esModule",{value:!0});Hue.Array=ngr;var tgr=Mt(),rgr=Ze();function ngr(t,e){return(0,tgr.CreateType)({[rgr.Kind]:"Array",type:"array",items:t},e)}});var TI=m(BT=>{"use strict";var igr=BT&&BT.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),ogr=BT&&BT.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&igr(e,t,r)};Object.defineProperty(BT,"__esModule",{value:!0});ogr(Grt(),BT)});var zrt=m(Gue=>{"use strict";Object.defineProperty(Gue,"__esModule",{value:!0});Gue.Argument=cgr;var sgr=Mt(),agr=Ze();function cgr(t){return(0,sgr.CreateType)({[agr.Kind]:"Argument",index:t})}});var fB=m($T=>{"use strict";var lgr=$T&&$T.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),ugr=$T&&$T.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&lgr(e,t,r)};Object.defineProperty($T,"__esModule",{value:!0});ugr(zrt(),$T)});var Wrt=m(zue=>{"use strict";Object.defineProperty(zue,"__esModule",{value:!0});zue.AsyncIterator=pgr;var dgr=Ze(),fgr=Mt();function pgr(t,e){return(0,fgr.CreateType)({[dgr.Kind]:"AsyncIterator",type:"AsyncIterator",items:t},e)}});var SI=m(VT=>{"use strict";var hgr=VT&&VT.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),mgr=VT&&VT.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&hgr(e,t,r)};Object.defineProperty(VT,"__esModule",{value:!0});mgr(Wrt(),VT)});var Krt=m(Wue=>{"use strict";Object.defineProperty(Wue,"__esModule",{value:!0});Wue.Computed=vgr;var ggr=hm(),_gr=GN();function vgr(t,e,r){return(0,ggr.CreateType)({[_gr.Kind]:"Computed",target:t,parameters:e},r)}});var I1=m(HT=>{"use strict";var ygr=HT&&HT.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),Egr=HT&&HT.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&ygr(e,t,r)};Object.defineProperty(HT,"__esModule",{value:!0});Egr(Krt(),HT)});var pB=m(Kue=>{"use strict";Object.defineProperty(Kue,"__esModule",{value:!0});Kue.Discard=Sgr;function Tgr(t,e){let{[e]:r,...n}=t;return n}function Sgr(t,e){return e.reduce((r,n)=>Tgr(r,n),t)}});var gm=m(GT=>{"use strict";var bgr=GT&&GT.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),Cgr=GT&&GT.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&bgr(e,t,r)};Object.defineProperty(GT,"__esModule",{value:!0});Cgr(pB(),GT)});var Yrt=m(Yue=>{"use strict";Object.defineProperty(Yue,"__esModule",{value:!0});Yue.Never=wgr;var Agr=Mt(),xgr=Ze();function wgr(t){return(0,Agr.CreateType)({[xgr.Kind]:"Never",not:{}},t)}});var oo=m(zT=>{"use strict";var Igr=zT&&zT.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),Pgr=zT&&zT.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Igr(e,t,r)};Object.defineProperty(zT,"__esModule",{value:!0});Pgr(Yrt(),zT)});var Qrt=m(Que=>{"use strict";Object.defineProperty(Que,"__esModule",{value:!0});Que.MappedKey=Mgr;var Rgr=Mt(),Ogr=Ze();function Mgr(t){return(0,Rgr.CreateType)({[Ogr.Kind]:"MappedKey",keys:t})}});var Jue=m(Zue=>{"use strict";Object.defineProperty(Zue,"__esModule",{value:!0});Zue.MappedResult=kgr;var Ngr=Mt(),Lgr=Ze();function kgr(t){return(0,Ngr.CreateType)({[Lgr.Kind]:"MappedResult",properties:t})}});var Zrt=m(Xue=>{"use strict";Object.defineProperty(Xue,"__esModule",{value:!0});Xue.Constructor=qgr;var Dgr=Mt(),Ugr=Ze();function qgr(t,e,r){return(0,Dgr.CreateType)({[Ugr.Kind]:"Constructor",type:"Constructor",parameters:t,returns:e},r)}});var bI=m(WT=>{"use strict";var Fgr=WT&&WT.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),jgr=WT&&WT.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Fgr(e,t,r)};Object.defineProperty(WT,"__esModule",{value:!0});jgr(Zrt(),WT)});var Jrt=m(ede=>{"use strict";Object.defineProperty(ede,"__esModule",{value:!0});ede.Function=Vgr;var Bgr=Mt(),$gr=Ze();function Vgr(t,e,r){return(0,Bgr.CreateType)({[$gr.Kind]:"Function",type:"Function",parameters:t,returns:e},r)}});var P1=m(KT=>{"use strict";var Hgr=KT&&KT.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),Ggr=KT&&KT.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Hgr(e,t,r)};Object.defineProperty(KT,"__esModule",{value:!0});Ggr(Jrt(),KT)});var rde=m(tde=>{"use strict";Object.defineProperty(tde,"__esModule",{value:!0});tde.UnionCreate=Kgr;var zgr=Mt(),Wgr=Ze();function Kgr(t,e){return(0,zgr.CreateType)({[Wgr.Kind]:"Union",anyOf:t},e)}});var rnt=m(nde=>{"use strict";Object.defineProperty(nde,"__esModule",{value:!0});nde.UnionEvaluated=n_r;var Ygr=Mt(),Qgr=Ze(),Zgr=gm(),Jgr=oo(),Xgr=Tp(),Xrt=rde(),tnt=Er();function e_r(t){return t.some(e=>(0,tnt.IsOptional)(e))}function ent(t){return t.map(e=>(0,tnt.IsOptional)(e)?t_r(e):e)}function t_r(t){return(0,Zgr.Discard)(t,[Qgr.OptionalKind])}function r_r(t,e){return e_r(t)?(0,Xgr.Optional)((0,Xrt.UnionCreate)(ent(t),e)):(0,Xrt.UnionCreate)(ent(t),e)}function n_r(t,e){return t.length===1?(0,Ygr.CreateType)(t[0],e):t.length===0?(0,Jgr.Never)(e):r_r(t,e)}});var int=m(nnt=>{"use strict";Object.defineProperty(nnt,"__esModule",{value:!0});var KDn=Ze()});var ont=m(ide=>{"use strict";Object.defineProperty(ide,"__esModule",{value:!0});ide.Union=a_r;var i_r=oo(),o_r=Mt(),s_r=rde();function a_r(t,e){return t.length===0?(0,i_r.Never)(e):t.length===1?(0,o_r.CreateType)(t[0],e):(0,s_r.UnionCreate)(t,e)}});var Yi=m(_m=>{"use strict";var c_r=_m&&_m.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),ode=_m&&_m.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&c_r(e,t,r)};Object.defineProperty(_m,"__esModule",{value:!0});ode(rnt(),_m);ode(int(),_m);ode(ont(),_m)});var hB=m(CI=>{"use strict";Object.defineProperty(CI,"__esModule",{value:!0});CI.TemplateLiteralParserError=void 0;CI.TemplateLiteralParse=YT;CI.TemplateLiteralParseExact=__r;var l_r=vi(),ZN=class extends l_r.TypeBoxError{};CI.TemplateLiteralParserError=ZN;function u_r(t){return t.replace(/\\\$/g,"$").replace(/\\\*/g,"*").replace(/\\\^/g,"^").replace(/\\\|/g,"|").replace(/\\\(/g,"(").replace(/\\\)/g,")")}function sde(t,e,r){return t[e]===r&&t.charCodeAt(e-1)!==92}function vm(t,e){return sde(t,e,"(")}function JN(t,e){return sde(t,e,")")}function snt(t,e){return sde(t,e,"|")}function d_r(t){if(!(vm(t,0)&&JN(t,t.length-1)))return!1;let e=0;for(let r=0;r<t.length;r++)if(vm(t,r)&&(e+=1),JN(t,r)&&(e-=1),e===0&&r!==t.length-1)return!1;return!0}function f_r(t){return t.slice(1,t.length-1)}function p_r(t){let e=0;for(let r=0;r<t.length;r++)if(vm(t,r)&&(e+=1),JN(t,r)&&(e-=1),snt(t,r)&&e===0)return!0;return!1}function h_r(t){for(let e=0;e<t.length;e++)if(vm(t,e))return!0;return!1}function m_r(t){let[e,r]=[0,0],n=[];for(let s=0;s<t.length;s++)if(vm(t,s)&&(e+=1),JN(t,s)&&(e-=1),snt(t,s)&&e===0){let a=t.slice(r,s);a.length>0&&n.push(YT(a)),r=s+1}let o=t.slice(r);return o.length>0&&n.push(YT(o)),n.length===0?{type:"const",const:""}:n.length===1?n[0]:{type:"or",expr:n}}function g_r(t){function e(o,s){if(!vm(o,s))throw new ZN("TemplateLiteralParser: Index must point to open parens");let a=0;for(let c=s;c<o.length;c++)if(vm(o,c)&&(a+=1),JN(o,c)&&(a-=1),a===0)return[s,c];throw new ZN("TemplateLiteralParser: Unclosed group parens in expression")}function r(o,s){for(let a=s;a<o.length;a++)if(vm(o,a))return[s,a];return[s,o.length]}let n=[];for(let o=0;o<t.length;o++)if(vm(t,o)){let[s,a]=e(t,o),c=t.slice(s,a+1);n.push(YT(c)),o=a}else{let[s,a]=r(t,o),c=t.slice(s,a);c.length>0&&n.push(YT(c)),o=a-1}return n.length===0?{type:"const",const:""}:n.length===1?n[0]:{type:"and",expr:n}}function YT(t){return d_r(t)?YT(f_r(t)):p_r(t)?m_r(t):h_r(t)?g_r(t):{type:"const",const:u_r(t)}}function __r(t){return YT(t.slice(1,t.length-1))}});var ade=m(AI=>{"use strict";Object.defineProperty(AI,"__esModule",{value:!0});AI.TemplateLiteralFiniteError=void 0;AI.IsTemplateLiteralExpressionFinite=gB;AI.IsTemplateLiteralFinite=b_r;var v_r=hB(),y_r=vi(),mB=class extends y_r.TypeBoxError{};AI.TemplateLiteralFiniteError=mB;function E_r(t){return t.type==="or"&&t.expr.length===2&&t.expr[0].type==="const"&&t.expr[0].const==="0"&&t.expr[1].type==="const"&&t.expr[1].const==="[1-9][0-9]*"}function T_r(t){return t.type==="or"&&t.expr.length===2&&t.expr[0].type==="const"&&t.expr[0].const==="true"&&t.expr[1].type==="const"&&t.expr[1].const==="false"}function S_r(t){return t.type==="const"&&t.const===".*"}function gB(t){return E_r(t)||S_r(t)?!1:T_r(t)?!0:t.type==="and"?t.expr.every(e=>gB(e)):t.type==="or"?t.expr.every(e=>gB(e)):t.type==="const"?!0:(()=>{throw new mB("Unknown expression type")})()}function b_r(t){let e=(0,v_r.TemplateLiteralParseExact)(t.pattern);return gB(e)}});var cde=m(xI=>{"use strict";Object.defineProperty(xI,"__esModule",{value:!0});xI.TemplateLiteralGenerateError=void 0;xI.TemplateLiteralExpressionGenerate=vB;xI.TemplateLiteralGenerate=R_r;var C_r=ade(),A_r=hB(),x_r=vi(),_B=class extends x_r.TypeBoxError{};xI.TemplateLiteralGenerateError=_B;function*ant(t){if(t.length===1)return yield*t[0];for(let e of t[0])for(let r of ant(t.slice(1)))yield`${e}${r}`}function*w_r(t){return yield*ant(t.expr.map(e=>[...vB(e)]))}function*I_r(t){for(let e of t.expr)yield*vB(e)}function*P_r(t){return yield t.const}function*vB(t){return t.type==="and"?yield*w_r(t):t.type==="or"?yield*I_r(t):t.type==="const"?yield*P_r(t):(()=>{throw new _B("Unknown expression")})()}function R_r(t){let e=(0,A_r.TemplateLiteralParseExact)(t.pattern);return(0,C_r.IsTemplateLiteralExpressionFinite)(e)?[...vB(e)]:[]}});var cnt=m(lde=>{"use strict";Object.defineProperty(lde,"__esModule",{value:!0});lde.Literal=N_r;var O_r=Mt(),M_r=Ze();function N_r(t,e){return(0,O_r.CreateType)({[M_r.Kind]:"Literal",const:t,type:typeof t},e)}});var ma=m(QT=>{"use strict";var L_r=QT&&QT.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),k_r=QT&&QT.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&L_r(e,t,r)};Object.defineProperty(QT,"__esModule",{value:!0});k_r(cnt(),QT)});var lnt=m(ude=>{"use strict";Object.defineProperty(ude,"__esModule",{value:!0});ude.Boolean=q_r;var D_r=Ze(),U_r=hm();function q_r(t){return(0,U_r.CreateType)({[D_r.Kind]:"Boolean",type:"boolean"},t)}});var XN=m(ZT=>{"use strict";var F_r=ZT&&ZT.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),j_r=ZT&&ZT.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&F_r(e,t,r)};Object.defineProperty(ZT,"__esModule",{value:!0});j_r(lnt(),ZT)});var unt=m(dde=>{"use strict";Object.defineProperty(dde,"__esModule",{value:!0});dde.BigInt=V_r;var B_r=Ze(),$_r=hm();function V_r(t){return(0,$_r.CreateType)({[B_r.Kind]:"BigInt",type:"bigint"},t)}});var wI=m(JT=>{"use strict";var H_r=JT&&JT.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),G_r=JT&&JT.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&H_r(e,t,r)};Object.defineProperty(JT,"__esModule",{value:!0});G_r(unt(),JT)});var dnt=m(fde=>{"use strict";Object.defineProperty(fde,"__esModule",{value:!0});fde.Number=K_r;var z_r=Mt(),W_r=Ze();function K_r(t){return(0,z_r.CreateType)({[W_r.Kind]:"Number",type:"number"},t)}});var R1=m(XT=>{"use strict";var Y_r=XT&&XT.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),Q_r=XT&&XT.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Y_r(e,t,r)};Object.defineProperty(XT,"__esModule",{value:!0});Q_r(dnt(),XT)});var fnt=m(pde=>{"use strict";Object.defineProperty(pde,"__esModule",{value:!0});pde.String=X_r;var Z_r=Mt(),J_r=Ze();function X_r(t){return(0,Z_r.CreateType)({[J_r.Kind]:"String",type:"string"},t)}});var O1=m(eS=>{"use strict";var e1r=eS&&eS.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),t1r=eS&&eS.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&e1r(e,t,r)};Object.defineProperty(eS,"__esModule",{value:!0});t1r(fnt(),eS)});var gde=m(mde=>{"use strict";Object.defineProperty(mde,"__esModule",{value:!0});mde.TemplateLiteralSyntax=u1r;var e4=ma(),r1r=XN(),n1r=wI(),i1r=R1(),o1r=O1(),s1r=Yi(),a1r=oo();function*c1r(t){let e=t.trim().replace(/"|'/g,"");return e==="boolean"?yield(0,r1r.Boolean)():e==="number"?yield(0,i1r.Number)():e==="bigint"?yield(0,n1r.BigInt)():e==="string"?yield(0,o1r.String)():yield(()=>{let r=e.split("|").map(n=>(0,e4.Literal)(n.trim()));return r.length===0?(0,a1r.Never)():r.length===1?r[0]:(0,s1r.UnionEvaluated)(r)})()}function*l1r(t){if(t[1]!=="{"){let e=(0,e4.Literal)("$"),r=hde(t.slice(1));return yield*[e,...r]}for(let e=2;e<t.length;e++)if(t[e]==="}"){let r=c1r(t.slice(2,e)),n=hde(t.slice(e+1));return yield*[...r,...n]}yield(0,e4.Literal)(t)}function*hde(t){for(let e=0;e<t.length;e++)if(t[e]==="$"){let r=(0,e4.Literal)(t.slice(0,e)),n=l1r(t.slice(e));return yield*[r,...n]}yield(0,e4.Literal)(t)}function u1r(t){return[...hde(t)]}});var _de=m(r4=>{"use strict";Object.defineProperty(r4,"__esModule",{value:!0});r4.TemplateLiteralPatternError=void 0;r4.TemplateLiteralPattern=h1r;var t4=YN(),d1r=Ze(),f1r=vi(),M1=Er(),yB=class extends f1r.TypeBoxError{};r4.TemplateLiteralPatternError=yB;function p1r(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function pnt(t,e){return(0,M1.IsTemplateLiteral)(t)?t.pattern.slice(1,t.pattern.length-1):(0,M1.IsUnion)(t)?`(${t.anyOf.map(r=>pnt(r,e)).join("|")})`:(0,M1.IsNumber)(t)?`${e}${t4.PatternNumber}`:(0,M1.IsInteger)(t)?`${e}${t4.PatternNumber}`:(0,M1.IsBigInt)(t)?`${e}${t4.PatternNumber}`:(0,M1.IsString)(t)?`${e}${t4.PatternString}`:(0,M1.IsLiteral)(t)?`${e}${p1r(t.const.toString())}`:(0,M1.IsBoolean)(t)?`${e}${t4.PatternBoolean}`:(()=>{throw new yB(`Unexpected Kind '${t[d1r.Kind]}'`)})()}function h1r(t){return`^${t.map(e=>pnt(e,"")).join("")}$`}});var hnt=m(vde=>{"use strict";Object.defineProperty(vde,"__esModule",{value:!0});vde.TemplateLiteralToUnion=v1r;var m1r=Yi(),g1r=ma(),_1r=cde();function v1r(t){let r=(0,_1r.TemplateLiteralGenerate)(t).map(n=>(0,g1r.Literal)(n));return(0,m1r.UnionEvaluated)(r)}});var gnt=m(yde=>{"use strict";Object.defineProperty(yde,"__esModule",{value:!0});yde.TemplateLiteral=b1r;var y1r=Mt(),E1r=gde(),mnt=_de(),T1r=Za(),S1r=Ze();function b1r(t,e){let r=(0,T1r.IsString)(t)?(0,mnt.TemplateLiteralPattern)((0,E1r.TemplateLiteralSyntax)(t)):(0,mnt.TemplateLiteralPattern)(t);return(0,y1r.CreateType)({[S1r.Kind]:"TemplateLiteral",type:"string",pattern:r},e)}});var sf=m(Ql=>{"use strict";var C1r=Ql&&Ql.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),tS=Ql&&Ql.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&C1r(e,t,r)};Object.defineProperty(Ql,"__esModule",{value:!0});tS(ade(),Ql);tS(cde(),Ql);tS(gde(),Ql);tS(hB(),Ql);tS(_de(),Ql);tS(hnt(),Ql);tS(gnt(),Ql)});var EB=m(Ede=>{"use strict";Object.defineProperty(Ede,"__esModule",{value:!0});Ede.IndexPropertyKeys=_nt;var A1r=sf(),n4=Er();function x1r(t){return(0,A1r.TemplateLiteralGenerate)(t).map(r=>r.toString())}function w1r(t){let e=[];for(let r of t)e.push(..._nt(r));return e}function I1r(t){return[t.toString()]}function _nt(t){return[...new Set((0,n4.IsTemplateLiteral)(t)?x1r(t):(0,n4.IsUnion)(t)?w1r(t.anyOf):(0,n4.IsLiteral)(t)?I1r(t.const):(0,n4.IsNumber)(t)?["[number]"]:(0,n4.IsInteger)(t)?["[number]"]:[])]}});var Sde=m(Tde=>{"use strict";Object.defineProperty(Tde,"__esModule",{value:!0});Tde.IndexFromMappedResult=L1r;var P1r=Co(),R1r=EB(),O1r=af();function M1r(t,e,r){let n={};for(let o of Object.getOwnPropertyNames(e))n[o]=(0,O1r.Index)(t,(0,R1r.IndexPropertyKeys)(e[o]),r);return n}function N1r(t,e,r){return M1r(t,e.properties,r)}function L1r(t,e,r){let n=N1r(t,e,r);return(0,P1r.MappedResult)(n)}});var SB=m(II=>{"use strict";Object.defineProperty(II,"__esModule",{value:!0});II.IndexFromPropertyKey=Cde;II.IndexFromPropertyKeys=Tnt;II.IndexFromComputed=K1r;II.Index=Y1r;var k1r=Mt(),D1r=vi(),ynt=I1(),TB=oo(),U1r=Zl(),bde=Yi(),q1r=EB(),F1r=Ade(),j1r=Sde(),Wc=Er();function Ent(t,e){return t.map(r=>Cde(r,e))}function B1r(t){return t.filter(e=>!(0,Wc.IsNever)(e))}function $1r(t,e){return(0,U1r.IntersectEvaluated)(B1r(Ent(t,e)))}function V1r(t){return t.some(e=>(0,Wc.IsNever)(e))?[]:t}function H1r(t,e){return(0,bde.UnionEvaluated)(V1r(Ent(t,e)))}function G1r(t,e){return e in t?t[e]:e==="[number]"?(0,bde.UnionEvaluated)(t):(0,TB.Never)()}function z1r(t,e){return e==="[number]"?t:(0,TB.Never)()}function W1r(t,e){return e in t?t[e]:(0,TB.Never)()}function Cde(t,e){return(0,Wc.IsIntersect)(t)?$1r(t.allOf,e):(0,Wc.IsUnion)(t)?H1r(t.anyOf,e):(0,Wc.IsTuple)(t)?G1r(t.items??[],e):(0,Wc.IsArray)(t)?z1r(t.items,e):(0,Wc.IsObject)(t)?W1r(t.properties,e):(0,TB.Never)()}function Tnt(t,e){return e.map(r=>Cde(t,r))}function vnt(t,e){return(0,bde.UnionEvaluated)(Tnt(t,e))}function K1r(t,e){return(0,ynt.Computed)("Index",[t,e])}function Y1r(t,e,r){if((0,Wc.IsRef)(t)||(0,Wc.IsRef)(e)){let n="Index types using Ref parameters require both Type and Key to be of TSchema";if(!(0,Wc.IsSchema)(t)||!(0,Wc.IsSchema)(e))throw new D1r.TypeBoxError(n);return(0,ynt.Computed)("Index",[t,e])}return(0,Wc.IsMappedResult)(e)?(0,j1r.IndexFromMappedResult)(t,e,r):(0,Wc.IsMappedKey)(e)?(0,F1r.IndexFromMappedKey)(t,e,r):(0,k1r.CreateType)((0,Wc.IsSchema)(e)?vnt(t,(0,q1r.IndexPropertyKeys)(e)):vnt(t,e),r)}});var Ade=m(xde=>{"use strict";Object.defineProperty(xde,"__esModule",{value:!0});xde.IndexFromMappedKey=rvr;var Q1r=SB(),Z1r=Co(),J1r=Hc();function X1r(t,e,r){return{[e]:(0,Q1r.Index)(t,[e],(0,J1r.Clone)(r))}}function evr(t,e,r){return e.reduce((n,o)=>({...n,...X1r(t,o,r)}),{})}function tvr(t,e,r){return evr(t,e.keys,r)}function rvr(t,e,r){let n=tvr(t,e,r);return(0,Z1r.MappedResult)(n)}});var af=m(Sp=>{"use strict";var nvr=Sp&&Sp.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),bB=Sp&&Sp.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&nvr(e,t,r)};Object.defineProperty(Sp,"__esModule",{value:!0});bB(Ade(),Sp);bB(Sde(),Sp);bB(EB(),Sp);bB(SB(),Sp)});var Snt=m(wde=>{"use strict";Object.defineProperty(wde,"__esModule",{value:!0});wde.Iterator=svr;var ivr=Mt(),ovr=Ze();function svr(t,e){return(0,ivr.CreateType)({[ovr.Kind]:"Iterator",type:"Iterator",items:t},e)}});var PI=m(rS=>{"use strict";var avr=rS&&rS.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),cvr=rS&&rS.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&avr(e,t,r)};Object.defineProperty(rS,"__esModule",{value:!0});cvr(Snt(),rS)});var Cnt=m(CB=>{"use strict";Object.defineProperty(CB,"__esModule",{value:!0});CB.Object=void 0;var lvr=Mt(),bnt=Ze(),uvr=Er();function dvr(t){let e=[];for(let r in t)(0,uvr.IsOptional)(t[r])||e.push(r);return e}function fvr(t,e){let r=dvr(t),n=r.length>0?{[bnt.Kind]:"Object",type:"object",properties:t,required:r}:{[bnt.Kind]:"Object",type:"object",properties:t};return(0,lvr.CreateType)(n,e)}CB.Object=fvr});var Ja=m(nS=>{"use strict";var pvr=nS&&nS.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),hvr=nS&&nS.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&pvr(e,t,r)};Object.defineProperty(nS,"__esModule",{value:!0});hvr(Cnt(),nS)});var Ant=m(Ide=>{"use strict";Object.defineProperty(Ide,"__esModule",{value:!0});Ide.Promise=_vr;var mvr=Mt(),gvr=Ze();function _vr(t,e){return(0,mvr.CreateType)({[gvr.Kind]:"Promise",type:"Promise",item:t},e)}});var i4=m(iS=>{"use strict";var vvr=iS&&iS.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),yvr=iS&&iS.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&vvr(e,t,r)};Object.defineProperty(iS,"__esModule",{value:!0});yvr(Ant(),iS)});var Rde=m(Pde=>{"use strict";Object.defineProperty(Pde,"__esModule",{value:!0});Pde.Readonly=xvr;var xnt=Mt(),wnt=Ze(),Evr=gm(),Tvr=Ode(),Svr=Er();function bvr(t){return(0,xnt.CreateType)((0,Evr.Discard)(t,[wnt.ReadonlyKind]))}function Cvr(t){return(0,xnt.CreateType)({...t,[wnt.ReadonlyKind]:"Readonly"})}function Avr(t,e){return e===!1?bvr(t):Cvr(t)}function xvr(t,e){let r=e??!0;return(0,Svr.IsMappedResult)(t)?(0,Tvr.ReadonlyFromMappedResult)(t,r):Avr(t,r)}});var Ode=m(Mde=>{"use strict";Object.defineProperty(Mde,"__esModule",{value:!0});Mde.ReadonlyFromMappedResult=Ovr;var wvr=Co(),Ivr=Rde();function Pvr(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=(0,Ivr.Readonly)(t[n],e);return r}function Rvr(t,e){return Pvr(t.properties,e)}function Ovr(t,e){let r=Rvr(t,e);return(0,wvr.MappedResult)(r)}});var L1=m(N1=>{"use strict";var Mvr=N1&&N1.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),Int=N1&&N1.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Mvr(e,t,r)};Object.defineProperty(N1,"__esModule",{value:!0});Int(Ode(),N1);Int(Rde(),N1)});var Rnt=m(Nde=>{"use strict";Object.defineProperty(Nde,"__esModule",{value:!0});Nde.Tuple=Lvr;var Nvr=Mt(),Pnt=Ze();function Lvr(t,e){return(0,Nvr.CreateType)(t.length>0?{[Pnt.Kind]:"Tuple",type:"array",items:t,additionalItems:!1,minItems:t.length,maxItems:t.length}:{[Pnt.Kind]:"Tuple",type:"array",minItems:t.length,maxItems:t.length},e)}});var ym=m(oS=>{"use strict";var kvr=oS&&oS.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),Dvr=oS&&oS.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&kvr(e,t,r)};Object.defineProperty(oS,"__esModule",{value:!0});Dvr(Rnt(),oS)});var Dnt=m(AB=>{"use strict";Object.defineProperty(AB,"__esModule",{value:!0});AB.MappedFunctionReturnType=knt;AB.Mapped=ryr;var Lde=Ze(),Ont=gm(),Uvr=TI(),qvr=SI(),Fvr=bI(),jvr=P1(),Bvr=af(),$vr=Zl(),Vvr=PI(),Mnt=ma(),Nnt=Ja(),Hvr=Tp(),Gvr=i4(),zvr=L1(),Wvr=ym(),Kvr=Yi(),Yvr=QN(),Qvr=Jue(),Xa=Er();function Lnt(t,e){return t in e?Xu(t,e[t]):(0,Qvr.MappedResult)(e)}function Zvr(t){return{[t]:(0,Mnt.Literal)(t)}}function Jvr(t){let e={};for(let r of t)e[r]=(0,Mnt.Literal)(r);return e}function Xvr(t,e){return(0,Yvr.SetIncludes)(e,t)?Zvr(t):Jvr(e)}function eyr(t,e){let r=Xvr(t,e);return Lnt(t,r)}function o4(t,e){return e.map(r=>Xu(t,r))}function tyr(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(e))r[n]=Xu(t,e[n]);return r}function Xu(t,e){let r={...e};return(0,Xa.IsOptional)(e)?(0,Hvr.Optional)(Xu(t,(0,Ont.Discard)(e,[Lde.OptionalKind]))):(0,Xa.IsReadonly)(e)?(0,zvr.Readonly)(Xu(t,(0,Ont.Discard)(e,[Lde.ReadonlyKind]))):(0,Xa.IsMappedResult)(e)?Lnt(t,e.properties):(0,Xa.IsMappedKey)(e)?eyr(t,e.keys):(0,Xa.IsConstructor)(e)?(0,Fvr.Constructor)(o4(t,e.parameters),Xu(t,e.returns),r):(0,Xa.IsFunction)(e)?(0,jvr.Function)(o4(t,e.parameters),Xu(t,e.returns),r):(0,Xa.IsAsyncIterator)(e)?(0,qvr.AsyncIterator)(Xu(t,e.items),r):(0,Xa.IsIterator)(e)?(0,Vvr.Iterator)(Xu(t,e.items),r):(0,Xa.IsIntersect)(e)?(0,$vr.Intersect)(o4(t,e.allOf),r):(0,Xa.IsUnion)(e)?(0,Kvr.Union)(o4(t,e.anyOf),r):(0,Xa.IsTuple)(e)?(0,Wvr.Tuple)(o4(t,e.items??[]),r):(0,Xa.IsObject)(e)?(0,Nnt.Object)(tyr(t,e.properties),r):(0,Xa.IsArray)(e)?(0,Uvr.Array)(Xu(t,e.items),r):(0,Xa.IsPromise)(e)?(0,Gvr.Promise)(Xu(t,e.item),r):e}function knt(t,e){let r={};for(let n of t)r[n]=Xu(n,e);return r}function ryr(t,e,r){let n=(0,Xa.IsSchema)(t)?(0,Bvr.IndexPropertyKeys)(t):t,o=e({[Lde.Kind]:"MappedKey",keys:n}),s=knt(n,o);return(0,Nnt.Object)(s,r)}});var Co=m(Em=>{"use strict";var nyr=Em&&Em.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),kde=Em&&Em.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&nyr(e,t,r)};Object.defineProperty(Em,"__esModule",{value:!0});kde(Qrt(),Em);kde(Jue(),Em);kde(Dnt(),Em)});var Ude=m(Dde=>{"use strict";Object.defineProperty(Dde,"__esModule",{value:!0});Dde.Optional=uyr;var Unt=Mt(),qnt=Ze(),iyr=gm(),oyr=qde(),syr=Er();function ayr(t){return(0,Unt.CreateType)((0,iyr.Discard)(t,[qnt.OptionalKind]))}function cyr(t){return(0,Unt.CreateType)({...t,[qnt.OptionalKind]:"Optional"})}function lyr(t,e){return e===!1?ayr(t):cyr(t)}function uyr(t,e){let r=e??!0;return(0,syr.IsMappedResult)(t)?(0,oyr.OptionalFromMappedResult)(t,r):lyr(t,r)}});var qde=m(Fde=>{"use strict";Object.defineProperty(Fde,"__esModule",{value:!0});Fde.OptionalFromMappedResult=myr;var dyr=Co(),fyr=Ude();function pyr(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=(0,fyr.Optional)(t[n],e);return r}function hyr(t,e){return pyr(t.properties,e)}function myr(t,e){let r=hyr(t,e);return(0,dyr.MappedResult)(r)}});var Tp=m(k1=>{"use strict";var gyr=k1&&k1.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),Fnt=k1&&k1.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&gyr(e,t,r)};Object.defineProperty(k1,"__esModule",{value:!0});Fnt(qde(),k1);Fnt(Ude(),k1)});var $de=m(Bde=>{"use strict";Object.defineProperty(Bde,"__esModule",{value:!0});Bde.IntersectCreate=vyr;var _yr=Mt(),jnt=Ze(),jde=Er();function vyr(t,e={}){let r=t.every(o=>(0,jde.IsObject)(o)),n=(0,jde.IsSchema)(e.unevaluatedProperties)?{unevaluatedProperties:e.unevaluatedProperties}:{};return(0,_yr.CreateType)(e.unevaluatedProperties===!1||(0,jde.IsSchema)(e.unevaluatedProperties)||r?{...n,[jnt.Kind]:"Intersect",type:"object",allOf:t}:{...n,[jnt.Kind]:"Intersect",allOf:t},e)}});var Vnt=m(Hde=>{"use strict";Object.defineProperty(Hde,"__esModule",{value:!0});Hde.IntersectEvaluated=wyr;var yyr=Ze(),Eyr=Mt(),Tyr=gm(),Syr=oo(),byr=Tp(),Bnt=$de(),Vde=Er();function Cyr(t){return t.every(e=>(0,Vde.IsOptional)(e))}function Ayr(t){return(0,Tyr.Discard)(t,[yyr.OptionalKind])}function $nt(t){return t.map(e=>(0,Vde.IsOptional)(e)?Ayr(e):e)}function xyr(t,e){return Cyr(t)?(0,byr.Optional)((0,Bnt.IntersectCreate)($nt(t),e)):(0,Bnt.IntersectCreate)($nt(t),e)}function wyr(t,e={}){if(t.length===1)return(0,Eyr.CreateType)(t[0],e);if(t.length===0)return(0,Syr.Never)(e);if(t.some(r=>(0,Vde.IsTransform)(r)))throw new Error("Cannot intersect transform types");return xyr(t,e)}});var Gnt=m(Hnt=>{"use strict";Object.defineProperty(Hnt,"__esModule",{value:!0});var F6n=Ze()});var znt=m(Gde=>{"use strict";Object.defineProperty(Gde,"__esModule",{value:!0});Gde.Intersect=Myr;var Iyr=Mt(),Pyr=oo(),Ryr=$de(),Oyr=Er();function Myr(t,e){if(t.length===1)return(0,Iyr.CreateType)(t[0],e);if(t.length===0)return(0,Pyr.Never)(e);if(t.some(r=>(0,Oyr.IsTransform)(r)))throw new Error("Cannot intersect transform types");return(0,Ryr.IntersectCreate)(t,e)}});var Zl=m(Tm=>{"use strict";var Nyr=Tm&&Tm.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),zde=Tm&&Tm.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Nyr(e,t,r)};Object.defineProperty(Tm,"__esModule",{value:!0});zde(Vnt(),Tm);zde(Gnt(),Tm);zde(znt(),Tm)});var Wnt=m(Wde=>{"use strict";Object.defineProperty(Wde,"__esModule",{value:!0});Wde.Ref=Uyr;var Lyr=vi(),kyr=Mt(),Dyr=Ze();function Uyr(...t){let[e,r]=typeof t[0]=="string"?[t[0],t[1]]:[t[0].$id,t[1]];if(typeof e!="string")throw new Lyr.TypeBoxError("Ref: $ref must be a string");return(0,kyr.CreateType)({[Dyr.Kind]:"Ref",$ref:e},r)}});var Sm=m(sS=>{"use strict";var qyr=sS&&sS.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),Fyr=sS&&sS.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&qyr(e,t,r)};Object.defineProperty(sS,"__esModule",{value:!0});Fyr(Wnt(),sS)});var Ynt=m(Qde=>{"use strict";Object.defineProperty(Qde,"__esModule",{value:!0});Qde.Awaited=Yde;var jyr=Mt(),Kde=I1(),Byr=Zl(),$yr=Yi(),Vyr=Sm(),s4=Er();function Hyr(t,e){return(0,Kde.Computed)("Awaited",[(0,Kde.Computed)(t,e)])}function Gyr(t){return(0,Kde.Computed)("Awaited",[(0,Vyr.Ref)(t)])}function zyr(t){return(0,Byr.Intersect)(Knt(t))}function Wyr(t){return(0,$yr.Union)(Knt(t))}function Kyr(t){return Yde(t)}function Knt(t){return t.map(e=>Yde(e))}function Yde(t,e){return(0,jyr.CreateType)((0,s4.IsComputed)(t)?Hyr(t.target,t.parameters):(0,s4.IsIntersect)(t)?zyr(t.allOf):(0,s4.IsUnion)(t)?Wyr(t.anyOf):(0,s4.IsPromise)(t)?Kyr(t.item):(0,s4.IsRef)(t)?Gyr(t.$ref):t,e)}});var a4=m(aS=>{"use strict";var Yyr=aS&&aS.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),Qyr=aS&&aS.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Yyr(e,t,r)};Object.defineProperty(aS,"__esModule",{value:!0});Qyr(Ynt(),aS)});var wB=m(xB=>{"use strict";Object.defineProperty(xB,"__esModule",{value:!0});xB.KeyOfPropertyKeys=Jde;xB.KeyOfPattern=nEr;var Qnt=QN(),RI=Er();function Znt(t){let e=[];for(let r of t)e.push(Jde(r));return e}function Zyr(t){let e=Znt(t);return(0,Qnt.SetUnionMany)(e)}function Jyr(t){let e=Znt(t);return(0,Qnt.SetIntersectMany)(e)}function Xyr(t){return t.map((e,r)=>r.toString())}function eEr(t){return["[number]"]}function tEr(t){return globalThis.Object.getOwnPropertyNames(t)}function rEr(t){return Zde?globalThis.Object.getOwnPropertyNames(t).map(r=>r[0]==="^"&&r[r.length-1]==="$"?r.slice(1,r.length-1):r):[]}function Jde(t){return(0,RI.IsIntersect)(t)?Zyr(t.allOf):(0,RI.IsUnion)(t)?Jyr(t.anyOf):(0,RI.IsTuple)(t)?Xyr(t.items??[]):(0,RI.IsArray)(t)?eEr(t.items):(0,RI.IsObject)(t)?tEr(t.properties):(0,RI.IsRecord)(t)?rEr(t.patternProperties):[]}var Zde=!1;function nEr(t){Zde=!0;let e=Jde(t);return Zde=!1,`^(${e.map(n=>`(${n})`).join("|")})$`}});var tfe=m(IB=>{"use strict";Object.defineProperty(IB,"__esModule",{value:!0});IB.KeyOfPropertyKeysToRest=Jnt;IB.KeyOf=hEr;var iEr=Mt(),oEr=ma(),sEr=R1(),efe=I1(),aEr=Sm(),cEr=wB(),lEr=Yi(),uEr=rfe(),Xde=Er();function dEr(t,e){return(0,efe.Computed)("KeyOf",[(0,efe.Computed)(t,e)])}function fEr(t){return(0,efe.Computed)("KeyOf",[(0,aEr.Ref)(t)])}function pEr(t,e){let r=(0,cEr.KeyOfPropertyKeys)(t),n=Jnt(r),o=(0,lEr.UnionEvaluated)(n);return(0,iEr.CreateType)(o,e)}function Jnt(t){return t.map(e=>e==="[number]"?(0,sEr.Number)():(0,oEr.Literal)(e))}function hEr(t,e){return(0,Xde.IsComputed)(t)?dEr(t.target,t.parameters):(0,Xde.IsRef)(t)?fEr(t.$ref):(0,Xde.IsMappedResult)(t)?(0,uEr.KeyOfFromMappedResult)(t,e):pEr(t,e)}});var rfe=m(nfe=>{"use strict";Object.defineProperty(nfe,"__esModule",{value:!0});nfe.KeyOfFromMappedResult=EEr;var mEr=Co(),gEr=tfe(),_Er=Hc();function vEr(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=(0,gEr.KeyOf)(t[n],(0,_Er.Clone)(e));return r}function yEr(t,e){return vEr(t.properties,e)}function EEr(t,e){let r=yEr(t,e);return(0,mEr.MappedResult)(r)}});var Xnt=m(ife=>{"use strict";Object.defineProperty(ife,"__esModule",{value:!0});ife.KeyOfPropertyEntries=bEr;var TEr=SB(),SEr=wB();function bEr(t){let e=(0,SEr.KeyOfPropertyKeys)(t),r=(0,TEr.IndexFromPropertyKeys)(t,e);return e.map((n,o)=>[e[o],r[o]])}});var ed=m(bp=>{"use strict";var CEr=bp&&bp.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),PB=bp&&bp.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&CEr(e,t,r)};Object.defineProperty(bp,"__esModule",{value:!0});PB(rfe(),bp);PB(Xnt(),bp);PB(wB(),bp);PB(tfe(),bp)});var eit=m(ofe=>{"use strict";Object.defineProperty(ofe,"__esModule",{value:!0});ofe.Composite=kEr;var AEr=Zl(),xEr=af(),wEr=ed(),IEr=Ja(),PEr=QN(),REr=Er();function OEr(t){let e=[];for(let r of t)e.push(...(0,wEr.KeyOfPropertyKeys)(r));return(0,PEr.SetDistinct)(e)}function MEr(t){return t.filter(e=>!(0,REr.IsNever)(e))}function NEr(t,e){let r=[];for(let n of t)r.push(...(0,xEr.IndexFromPropertyKeys)(n,[e]));return MEr(r)}function LEr(t,e){let r={};for(let n of e)r[n]=(0,AEr.IntersectEvaluated)(NEr(t,n));return r}function kEr(t,e){let r=OEr(t),n=LEr(t,r);return(0,IEr.Object)(n,e)}});var RB=m(cS=>{"use strict";var DEr=cS&&cS.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),UEr=cS&&cS.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&DEr(e,t,r)};Object.defineProperty(cS,"__esModule",{value:!0});UEr(eit(),cS)});var tit=m(sfe=>{"use strict";Object.defineProperty(sfe,"__esModule",{value:!0});sfe.Date=jEr;var qEr=Ze(),FEr=Mt();function jEr(t){return(0,FEr.CreateType)({[qEr.Kind]:"Date",type:"Date"},t)}});var c4=m(lS=>{"use strict";var BEr=lS&&lS.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),$Er=lS&&lS.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&BEr(e,t,r)};Object.defineProperty(lS,"__esModule",{value:!0});$Er(tit(),lS)});var rit=m(afe=>{"use strict";Object.defineProperty(afe,"__esModule",{value:!0});afe.Null=GEr;var VEr=Mt(),HEr=Ze();function GEr(t){return(0,VEr.CreateType)({[HEr.Kind]:"Null",type:"null"},t)}});var l4=m(uS=>{"use strict";var zEr=uS&&uS.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),WEr=uS&&uS.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&zEr(e,t,r)};Object.defineProperty(uS,"__esModule",{value:!0});WEr(rit(),uS)});var nit=m(cfe=>{"use strict";Object.defineProperty(cfe,"__esModule",{value:!0});cfe.Symbol=QEr;var KEr=Mt(),YEr=Ze();function QEr(t){return(0,KEr.CreateType)({[YEr.Kind]:"Symbol",type:"symbol"},t)}});var u4=m(dS=>{"use strict";var ZEr=dS&&dS.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),JEr=dS&&dS.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&ZEr(e,t,r)};Object.defineProperty(dS,"__esModule",{value:!0});JEr(nit(),dS)});var iit=m(lfe=>{"use strict";Object.defineProperty(lfe,"__esModule",{value:!0});lfe.Undefined=tTr;var XEr=Mt(),eTr=Ze();function tTr(t){return(0,XEr.CreateType)({[eTr.Kind]:"Undefined",type:"undefined"},t)}});var d4=m(fS=>{"use strict";var rTr=fS&&fS.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),nTr=fS&&fS.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&rTr(e,t,r)};Object.defineProperty(fS,"__esModule",{value:!0});nTr(iit(),fS)});var oit=m(ufe=>{"use strict";Object.defineProperty(ufe,"__esModule",{value:!0});ufe.Uint8Array=sTr;var iTr=Mt(),oTr=Ze();function sTr(t){return(0,iTr.CreateType)({[oTr.Kind]:"Uint8Array",type:"Uint8Array"},t)}});var f4=m(pS=>{"use strict";var aTr=pS&&pS.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),cTr=pS&&pS.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&aTr(e,t,r)};Object.defineProperty(pS,"__esModule",{value:!0});cTr(oit(),pS)});var sit=m(dfe=>{"use strict";Object.defineProperty(dfe,"__esModule",{value:!0});dfe.Unknown=dTr;var lTr=Mt(),uTr=Ze();function dTr(t){return(0,lTr.CreateType)({[uTr.Kind]:"Unknown"},t)}});var D1=m(hS=>{"use strict";var fTr=hS&&hS.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),pTr=hS&&hS.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&fTr(e,t,r)};Object.defineProperty(hS,"__esModule",{value:!0});pTr(sit(),hS)});var lit=m(mfe=>{"use strict";Object.defineProperty(mfe,"__esModule",{value:!0});mfe.Const=xTr;var ait=EI(),hTr=wI(),mTr=c4(),gTr=P1(),ffe=ma(),_Tr=l4(),cit=Ja(),vTr=u4(),yTr=ym(),pfe=L1(),ETr=d4(),TTr=f4(),STr=D1(),bTr=hm(),Kc=Za();function CTr(t){return t.map(e=>hfe(e,!1))}function ATr(t){let e={};for(let r of globalThis.Object.getOwnPropertyNames(t))e[r]=(0,pfe.Readonly)(hfe(t[r],!1));return e}function OB(t,e){return e===!0?t:(0,pfe.Readonly)(t)}function hfe(t,e){return(0,Kc.IsAsyncIterator)(t)||(0,Kc.IsIterator)(t)?OB((0,ait.Any)(),e):(0,Kc.IsArray)(t)?(0,pfe.Readonly)((0,yTr.Tuple)(CTr(t))):(0,Kc.IsUint8Array)(t)?(0,TTr.Uint8Array)():(0,Kc.IsDate)(t)?(0,mTr.Date)():(0,Kc.IsObject)(t)?OB((0,cit.Object)(ATr(t)),e):(0,Kc.IsFunction)(t)?OB((0,gTr.Function)([],(0,STr.Unknown)()),e):(0,Kc.IsUndefined)(t)?(0,ETr.Undefined)():(0,Kc.IsNull)(t)?(0,_Tr.Null)():(0,Kc.IsSymbol)(t)?(0,vTr.Symbol)():(0,Kc.IsBigInt)(t)?(0,hTr.BigInt)():(0,Kc.IsNumber)(t)||(0,Kc.IsBoolean)(t)||(0,Kc.IsString)(t)?(0,ffe.Literal)(t):(0,cit.Object)({})}function xTr(t,e){return(0,bTr.CreateType)(hfe(t,!0),e)}});var MB=m(mS=>{"use strict";var wTr=mS&&mS.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),ITr=mS&&mS.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&wTr(e,t,r)};Object.defineProperty(mS,"__esModule",{value:!0});ITr(lit(),mS)});var uit=m(bm=>{"use strict";var PTr=bm&&bm.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),RTr=bm&&bm.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),OTr=bm&&bm.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),o=0;o<n.length;o++)n[o]!=="default"&&PTr(r,e,n[o]);return RTr(r,e),r}})();Object.defineProperty(bm,"__esModule",{value:!0});bm.ConstructorParameters=kTr;var MTr=ym(),NTr=oo(),LTr=OTr(Er());function kTr(t,e){return LTr.IsConstructor(t)?(0,MTr.Tuple)(t.parameters,e):(0,NTr.Never)(e)}});var NB=m(gS=>{"use strict";var DTr=gS&&gS.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),UTr=gS&&gS.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&DTr(e,t,r)};Object.defineProperty(gS,"__esModule",{value:!0});UTr(uit(),gS)});var dit=m(gfe=>{"use strict";Object.defineProperty(gfe,"__esModule",{value:!0});gfe.Enum=$Tr;var qTr=ma(),FTr=Ze(),jTr=Yi(),BTr=Za();function $Tr(t,e){if((0,BTr.IsUndefined)(t))throw new Error("Enum undefined or empty");let r=globalThis.Object.getOwnPropertyNames(t).filter(s=>isNaN(s)).map(s=>t[s]),o=[...new Set(r)].map(s=>(0,qTr.Literal)(s));return(0,jTr.Union)(o,{...e,[FTr.Hint]:"Enum"})}});var LB=m(_S=>{"use strict";var VTr=_S&&_S.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),HTr=_S&&_S.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&VTr(e,t,r)};Object.defineProperty(_S,"__esModule",{value:!0});HTr(dit(),_S)});var Cfe=m(vS=>{"use strict";Object.defineProperty(vS,"__esModule",{value:!0});vS.ExtendsResult=vS.ExtendsResolverError=void 0;vS.ExtendsCheck=NSr;var fit=EI(),GTr=P1(),Tfe=R1(),vfe=O1(),zTr=D1(),pit=sf(),OI=YN(),vit=Ze(),WTr=vi(),H=Bue(),kB=class extends WTr.TypeBoxError{};vS.ExtendsResolverError=kB;var le;(function(t){t[t.Union=0]="Union",t[t.True=1]="True",t[t.False=2]="False"})(le||(vS.ExtendsResult=le={}));function td(t){return t===le.False?t:le.True}function MI(t){throw new kB(t)}function Ao(t){return H.TypeGuard.IsNever(t)||H.TypeGuard.IsIntersect(t)||H.TypeGuard.IsUnion(t)||H.TypeGuard.IsUnknown(t)||H.TypeGuard.IsAny(t)}function xo(t,e){return H.TypeGuard.IsNever(e)?Tit(t,e):H.TypeGuard.IsIntersect(e)?DB(t,e):H.TypeGuard.IsUnion(e)?bfe(t,e):H.TypeGuard.IsUnknown(e)?Ait(t,e):H.TypeGuard.IsAny(e)?Sfe(t,e):MI("StructuralRight")}function Sfe(t,e){return le.True}function KTr(t,e){return H.TypeGuard.IsIntersect(e)?DB(t,e):H.TypeGuard.IsUnion(e)&&e.anyOf.some(r=>H.TypeGuard.IsAny(r)||H.TypeGuard.IsUnknown(r))?le.True:H.TypeGuard.IsUnion(e)?le.Union:H.TypeGuard.IsUnknown(e)||H.TypeGuard.IsAny(e)?le.True:le.Union}function YTr(t,e){return H.TypeGuard.IsUnknown(t)?le.False:H.TypeGuard.IsAny(t)?le.Union:H.TypeGuard.IsNever(t)?le.True:le.False}function QTr(t,e){return H.TypeGuard.IsObject(e)&&UB(e)?le.True:Ao(e)?xo(t,e):H.TypeGuard.IsArray(e)?td(bn(t.items,e.items)):le.False}function ZTr(t,e){return Ao(e)?xo(t,e):H.TypeGuard.IsAsyncIterator(e)?td(bn(t.items,e.items)):le.False}function JTr(t,e){return Ao(e)?xo(t,e):H.TypeGuard.IsObject(e)?ga(t,e):H.TypeGuard.IsRecord(e)?rd(t,e):H.TypeGuard.IsBigInt(e)?le.True:le.False}function yit(t,e){return H.TypeGuard.IsLiteralBoolean(t)||H.TypeGuard.IsBoolean(t)?le.True:le.False}function XTr(t,e){return Ao(e)?xo(t,e):H.TypeGuard.IsObject(e)?ga(t,e):H.TypeGuard.IsRecord(e)?rd(t,e):H.TypeGuard.IsBoolean(e)?le.True:le.False}function eSr(t,e){return Ao(e)?xo(t,e):H.TypeGuard.IsObject(e)?ga(t,e):H.TypeGuard.IsConstructor(e)?t.parameters.length>e.parameters.length?le.False:t.parameters.every((r,n)=>td(bn(e.parameters[n],r))===le.True)?td(bn(t.returns,e.returns)):le.False:le.False}function tSr(t,e){return Ao(e)?xo(t,e):H.TypeGuard.IsObject(e)?ga(t,e):H.TypeGuard.IsRecord(e)?rd(t,e):H.TypeGuard.IsDate(e)?le.True:le.False}function rSr(t,e){return Ao(e)?xo(t,e):H.TypeGuard.IsObject(e)?ga(t,e):H.TypeGuard.IsFunction(e)?t.parameters.length>e.parameters.length?le.False:t.parameters.every((r,n)=>td(bn(e.parameters[n],r))===le.True)?td(bn(t.returns,e.returns)):le.False:le.False}function Eit(t,e){return H.TypeGuard.IsLiteral(t)&&H.ValueGuard.IsNumber(t.const)||H.TypeGuard.IsNumber(t)||H.TypeGuard.IsInteger(t)?le.True:le.False}function nSr(t,e){return H.TypeGuard.IsInteger(e)||H.TypeGuard.IsNumber(e)?le.True:Ao(e)?xo(t,e):H.TypeGuard.IsObject(e)?ga(t,e):H.TypeGuard.IsRecord(e)?rd(t,e):le.False}function DB(t,e){return e.allOf.every(r=>bn(t,r)===le.True)?le.True:le.False}function iSr(t,e){return t.allOf.some(r=>bn(r,e)===le.True)?le.True:le.False}function oSr(t,e){return Ao(e)?xo(t,e):H.TypeGuard.IsIterator(e)?td(bn(t.items,e.items)):le.False}function sSr(t,e){return H.TypeGuard.IsLiteral(e)&&e.const===t.const?le.True:Ao(e)?xo(t,e):H.TypeGuard.IsObject(e)?ga(t,e):H.TypeGuard.IsRecord(e)?rd(t,e):H.TypeGuard.IsString(e)?Cit(t,e):H.TypeGuard.IsNumber(e)?Sit(t,e):H.TypeGuard.IsInteger(e)?Eit(t,e):H.TypeGuard.IsBoolean(e)?yit(t,e):le.False}function Tit(t,e){return le.False}function aSr(t,e){return le.True}function hit(t){let[e,r]=[t,0];for(;H.TypeGuard.IsNot(e);)e=e.not,r+=1;return r%2===0?e:(0,zTr.Unknown)()}function cSr(t,e){return H.TypeGuard.IsNot(t)?bn(hit(t),e):H.TypeGuard.IsNot(e)?bn(t,hit(e)):MI("Invalid fallthrough for Not")}function lSr(t,e){return Ao(e)?xo(t,e):H.TypeGuard.IsObject(e)?ga(t,e):H.TypeGuard.IsRecord(e)?rd(t,e):H.TypeGuard.IsNull(e)?le.True:le.False}function Sit(t,e){return H.TypeGuard.IsLiteralNumber(t)||H.TypeGuard.IsNumber(t)||H.TypeGuard.IsInteger(t)?le.True:le.False}function uSr(t,e){return Ao(e)?xo(t,e):H.TypeGuard.IsObject(e)?ga(t,e):H.TypeGuard.IsRecord(e)?rd(t,e):H.TypeGuard.IsInteger(e)||H.TypeGuard.IsNumber(e)?le.True:le.False}function Yc(t,e){return Object.getOwnPropertyNames(t.properties).length===e}function mit(t){return UB(t)}function git(t){return Yc(t,0)||Yc(t,1)&&"description"in t.properties&&H.TypeGuard.IsUnion(t.properties.description)&&t.properties.description.anyOf.length===2&&(H.TypeGuard.IsString(t.properties.description.anyOf[0])&&H.TypeGuard.IsUndefined(t.properties.description.anyOf[1])||H.TypeGuard.IsString(t.properties.description.anyOf[1])&&H.TypeGuard.IsUndefined(t.properties.description.anyOf[0]))}function _fe(t){return Yc(t,0)}function _it(t){return Yc(t,0)}function dSr(t){return Yc(t,0)}function fSr(t){return Yc(t,0)}function pSr(t){return UB(t)}function hSr(t){let e=(0,Tfe.Number)();return Yc(t,0)||Yc(t,1)&&"length"in t.properties&&td(bn(t.properties.length,e))===le.True}function mSr(t){return Yc(t,0)}function UB(t){let e=(0,Tfe.Number)();return Yc(t,0)||Yc(t,1)&&"length"in t.properties&&td(bn(t.properties.length,e))===le.True}function gSr(t){let e=(0,GTr.Function)([(0,fit.Any)()],(0,fit.Any)());return Yc(t,0)||Yc(t,1)&&"then"in t.properties&&td(bn(t.properties.then,e))===le.True}function bit(t,e){return bn(t,e)===le.False||H.TypeGuard.IsOptional(t)&&!H.TypeGuard.IsOptional(e)?le.False:le.True}function ga(t,e){return H.TypeGuard.IsUnknown(t)?le.False:H.TypeGuard.IsAny(t)?le.Union:H.TypeGuard.IsNever(t)||H.TypeGuard.IsLiteralString(t)&&mit(e)||H.TypeGuard.IsLiteralNumber(t)&&_fe(e)||H.TypeGuard.IsLiteralBoolean(t)&&_it(e)||H.TypeGuard.IsSymbol(t)&&git(e)||H.TypeGuard.IsBigInt(t)&&dSr(e)||H.TypeGuard.IsString(t)&&mit(e)||H.TypeGuard.IsSymbol(t)&&git(e)||H.TypeGuard.IsNumber(t)&&_fe(e)||H.TypeGuard.IsInteger(t)&&_fe(e)||H.TypeGuard.IsBoolean(t)&&_it(e)||H.TypeGuard.IsUint8Array(t)&&pSr(e)||H.TypeGuard.IsDate(t)&&fSr(e)||H.TypeGuard.IsConstructor(t)&&mSr(e)||H.TypeGuard.IsFunction(t)&&hSr(e)?le.True:H.TypeGuard.IsRecord(t)&&H.TypeGuard.IsString(yfe(t))?e[vit.Hint]==="Record"?le.True:le.False:H.TypeGuard.IsRecord(t)&&H.TypeGuard.IsNumber(yfe(t))?Yc(e,0)?le.True:le.False:le.False}function _Sr(t,e){return Ao(e)?xo(t,e):H.TypeGuard.IsRecord(e)?rd(t,e):H.TypeGuard.IsObject(e)?(()=>{for(let r of Object.getOwnPropertyNames(e.properties)){if(!(r in t.properties)&&!H.TypeGuard.IsOptional(e.properties[r]))return le.False;if(H.TypeGuard.IsOptional(e.properties[r]))return le.True;if(bit(t.properties[r],e.properties[r])===le.False)return le.False}return le.True})():le.False}function vSr(t,e){return Ao(e)?xo(t,e):H.TypeGuard.IsObject(e)&&gSr(e)?le.True:H.TypeGuard.IsPromise(e)?td(bn(t.item,e.item)):le.False}function yfe(t){return OI.PatternNumberExact in t.patternProperties?(0,Tfe.Number)():OI.PatternStringExact in t.patternProperties?(0,vfe.String)():MI("Unknown record key pattern")}function Efe(t){return OI.PatternNumberExact in t.patternProperties?t.patternProperties[OI.PatternNumberExact]:OI.PatternStringExact in t.patternProperties?t.patternProperties[OI.PatternStringExact]:MI("Unable to get record value schema")}function rd(t,e){let[r,n]=[yfe(e),Efe(e)];return H.TypeGuard.IsLiteralString(t)&&H.TypeGuard.IsNumber(r)&&td(bn(t,n))===le.True?le.True:H.TypeGuard.IsUint8Array(t)&&H.TypeGuard.IsNumber(r)||H.TypeGuard.IsString(t)&&H.TypeGuard.IsNumber(r)||H.TypeGuard.IsArray(t)&&H.TypeGuard.IsNumber(r)?bn(t,n):H.TypeGuard.IsObject(t)?(()=>{for(let o of Object.getOwnPropertyNames(t.properties))if(bit(n,t.properties[o])===le.False)return le.False;return le.True})():le.False}function ySr(t,e){return Ao(e)?xo(t,e):H.TypeGuard.IsObject(e)?ga(t,e):H.TypeGuard.IsRecord(e)?bn(Efe(t),Efe(e)):le.False}function ESr(t,e){let r=H.TypeGuard.IsRegExp(t)?(0,vfe.String)():t,n=H.TypeGuard.IsRegExp(e)?(0,vfe.String)():e;return bn(r,n)}function Cit(t,e){return H.TypeGuard.IsLiteral(t)&&H.ValueGuard.IsString(t.const)||H.TypeGuard.IsString(t)?le.True:le.False}function TSr(t,e){return Ao(e)?xo(t,e):H.TypeGuard.IsObject(e)?ga(t,e):H.TypeGuard.IsRecord(e)?rd(t,e):H.TypeGuard.IsString(e)?le.True:le.False}function SSr(t,e){return Ao(e)?xo(t,e):H.TypeGuard.IsObject(e)?ga(t,e):H.TypeGuard.IsRecord(e)?rd(t,e):H.TypeGuard.IsSymbol(e)?le.True:le.False}function bSr(t,e){return H.TypeGuard.IsTemplateLiteral(t)?bn((0,pit.TemplateLiteralToUnion)(t),e):H.TypeGuard.IsTemplateLiteral(e)?bn(t,(0,pit.TemplateLiteralToUnion)(e)):MI("Invalid fallthrough for TemplateLiteral")}function CSr(t,e){return H.TypeGuard.IsArray(e)&&t.items!==void 0&&t.items.every(r=>bn(r,e.items)===le.True)}function ASr(t,e){return H.TypeGuard.IsNever(t)?le.True:H.TypeGuard.IsUnknown(t)?le.False:H.TypeGuard.IsAny(t)?le.Union:le.False}function xSr(t,e){return Ao(e)?xo(t,e):H.TypeGuard.IsObject(e)&&UB(e)||H.TypeGuard.IsArray(e)&&CSr(t,e)?le.True:H.TypeGuard.IsTuple(e)?H.ValueGuard.IsUndefined(t.items)&&!H.ValueGuard.IsUndefined(e.items)||!H.ValueGuard.IsUndefined(t.items)&&H.ValueGuard.IsUndefined(e.items)?le.False:H.ValueGuard.IsUndefined(t.items)&&!H.ValueGuard.IsUndefined(e.items)||t.items.every((r,n)=>bn(r,e.items[n])===le.True)?le.True:le.False:le.False}function wSr(t,e){return Ao(e)?xo(t,e):H.TypeGuard.IsObject(e)?ga(t,e):H.TypeGuard.IsRecord(e)?rd(t,e):H.TypeGuard.IsUint8Array(e)?le.True:le.False}function ISr(t,e){return Ao(e)?xo(t,e):H.TypeGuard.IsObject(e)?ga(t,e):H.TypeGuard.IsRecord(e)?rd(t,e):H.TypeGuard.IsVoid(e)?OSr(t,e):H.TypeGuard.IsUndefined(e)?le.True:le.False}function bfe(t,e){return e.anyOf.some(r=>bn(t,r)===le.True)?le.True:le.False}function PSr(t,e){return t.anyOf.every(r=>bn(r,e)===le.True)?le.True:le.False}function Ait(t,e){return le.True}function RSr(t,e){return H.TypeGuard.IsNever(e)?Tit(t,e):H.TypeGuard.IsIntersect(e)?DB(t,e):H.TypeGuard.IsUnion(e)?bfe(t,e):H.TypeGuard.IsAny(e)?Sfe(t,e):H.TypeGuard.IsString(e)?Cit(t,e):H.TypeGuard.IsNumber(e)?Sit(t,e):H.TypeGuard.IsInteger(e)?Eit(t,e):H.TypeGuard.IsBoolean(e)?yit(t,e):H.TypeGuard.IsArray(e)?YTr(t,e):H.TypeGuard.IsTuple(e)?ASr(t,e):H.TypeGuard.IsObject(e)?ga(t,e):H.TypeGuard.IsUnknown(e)?le.True:le.False}function OSr(t,e){return H.TypeGuard.IsUndefined(t)||H.TypeGuard.IsUndefined(t)?le.True:le.False}function MSr(t,e){return H.TypeGuard.IsIntersect(e)?DB(t,e):H.TypeGuard.IsUnion(e)?bfe(t,e):H.TypeGuard.IsUnknown(e)?Ait(t,e):H.TypeGuard.IsAny(e)?Sfe(t,e):H.TypeGuard.IsObject(e)?ga(t,e):H.TypeGuard.IsVoid(e)?le.True:le.False}function bn(t,e){return H.TypeGuard.IsTemplateLiteral(t)||H.TypeGuard.IsTemplateLiteral(e)?bSr(t,e):H.TypeGuard.IsRegExp(t)||H.TypeGuard.IsRegExp(e)?ESr(t,e):H.TypeGuard.IsNot(t)||H.TypeGuard.IsNot(e)?cSr(t,e):H.TypeGuard.IsAny(t)?KTr(t,e):H.TypeGuard.IsArray(t)?QTr(t,e):H.TypeGuard.IsBigInt(t)?JTr(t,e):H.TypeGuard.IsBoolean(t)?XTr(t,e):H.TypeGuard.IsAsyncIterator(t)?ZTr(t,e):H.TypeGuard.IsConstructor(t)?eSr(t,e):H.TypeGuard.IsDate(t)?tSr(t,e):H.TypeGuard.IsFunction(t)?rSr(t,e):H.TypeGuard.IsInteger(t)?nSr(t,e):H.TypeGuard.IsIntersect(t)?iSr(t,e):H.TypeGuard.IsIterator(t)?oSr(t,e):H.TypeGuard.IsLiteral(t)?sSr(t,e):H.TypeGuard.IsNever(t)?aSr(t,e):H.TypeGuard.IsNull(t)?lSr(t,e):H.TypeGuard.IsNumber(t)?uSr(t,e):H.TypeGuard.IsObject(t)?_Sr(t,e):H.TypeGuard.IsRecord(t)?ySr(t,e):H.TypeGuard.IsString(t)?TSr(t,e):H.TypeGuard.IsSymbol(t)?SSr(t,e):H.TypeGuard.IsTuple(t)?xSr(t,e):H.TypeGuard.IsPromise(t)?vSr(t,e):H.TypeGuard.IsUint8Array(t)?wSr(t,e):H.TypeGuard.IsUndefined(t)?ISr(t,e):H.TypeGuard.IsUnion(t)?PSr(t,e):H.TypeGuard.IsUnknown(t)?RSr(t,e):H.TypeGuard.IsVoid(t)?MSr(t,e):MI(`Unknown left type operand '${t[vit.Kind]}'`)}function NSr(t,e){return bn(t,e)}});var xfe=m(Afe=>{"use strict";Object.defineProperty(Afe,"__esModule",{value:!0});Afe.ExtendsFromMappedResult=FSr;var LSr=Co(),kSr=qB(),DSr=Hc();function USr(t,e,r,n,o){let s={};for(let a of globalThis.Object.getOwnPropertyNames(t))s[a]=(0,kSr.Extends)(t[a],e,r,n,(0,DSr.Clone)(o));return s}function qSr(t,e,r,n,o){return USr(t.properties,e,r,n,o)}function FSr(t,e,r,n,o){let s=qSr(t,e,r,n,o);return(0,LSr.MappedResult)(s)}});var qB=m(Ife=>{"use strict";Object.defineProperty(Ife,"__esModule",{value:!0});Ife.Extends=HSr;var xit=Mt(),jSr=Yi(),wfe=Cfe(),BSr=Pfe(),$Sr=xfe(),wit=Er();function VSr(t,e,r,n){let o=(0,wfe.ExtendsCheck)(t,e);return o===wfe.ExtendsResult.Union?(0,jSr.Union)([r,n]):o===wfe.ExtendsResult.True?r:n}function HSr(t,e,r,n,o){return(0,wit.IsMappedResult)(t)?(0,$Sr.ExtendsFromMappedResult)(t,e,r,n,o):(0,wit.IsMappedKey)(t)?(0,xit.CreateType)((0,BSr.ExtendsFromMappedKey)(t,e,r,n,o)):(0,xit.CreateType)(VSr(t,e,r,n),o)}});var Pfe=m(Rfe=>{"use strict";Object.defineProperty(Rfe,"__esModule",{value:!0});Rfe.ExtendsFromMappedKey=JSr;var GSr=Co(),zSr=ma(),WSr=qB(),KSr=Hc();function YSr(t,e,r,n,o){return{[t]:(0,WSr.Extends)((0,zSr.Literal)(t),e,r,n,(0,KSr.Clone)(o))}}function QSr(t,e,r,n,o){return t.reduce((s,a)=>({...s,...YSr(a,e,r,n,o)}),{})}function ZSr(t,e,r,n,o){return QSr(t.keys,e,r,n,o)}function JSr(t,e,r,n,o){let s=ZSr(t,e,r,n,o);return(0,GSr.MappedResult)(s)}});var BB=m(Ofe=>{"use strict";Object.defineProperty(Ofe,"__esModule",{value:!0});Ofe.ExtendsUndefinedCheck=jB;var FB=Ze();function XSr(t){return t.allOf.every(e=>jB(e))}function ebr(t){return t.anyOf.some(e=>jB(e))}function tbr(t){return!jB(t.not)}function jB(t){return t[FB.Kind]==="Intersect"?XSr(t):t[FB.Kind]==="Union"?ebr(t):t[FB.Kind]==="Not"?tbr(t):t[FB.Kind]==="Undefined"}});var yS=m(cf=>{"use strict";var rbr=cf&&cf.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),p4=cf&&cf.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&rbr(e,t,r)};Object.defineProperty(cf,"__esModule",{value:!0});p4(Cfe(),cf);p4(Pfe(),cf);p4(xfe(),cf);p4(BB(),cf);p4(qB(),cf)});var Nfe=m(Mfe=>{"use strict";Object.defineProperty(Mfe,"__esModule",{value:!0});Mfe.ExcludeFromTemplateLiteral=obr;var nbr=$B(),ibr=sf();function obr(t,e){return(0,nbr.Exclude)((0,ibr.TemplateLiteralToUnion)(t),e)}});var $B=m(Dfe=>{"use strict";Object.defineProperty(Dfe,"__esModule",{value:!0});Dfe.Exclude=dbr;var Lfe=Mt(),sbr=Yi(),abr=oo(),VB=yS(),cbr=Ufe(),lbr=Nfe(),kfe=Er();function ubr(t,e){let r=t.filter(n=>(0,VB.ExtendsCheck)(n,e)===VB.ExtendsResult.False);return r.length===1?r[0]:(0,sbr.Union)(r)}function dbr(t,e,r={}){return(0,kfe.IsTemplateLiteral)(t)?(0,Lfe.CreateType)((0,lbr.ExcludeFromTemplateLiteral)(t,e),r):(0,kfe.IsMappedResult)(t)?(0,Lfe.CreateType)((0,cbr.ExcludeFromMappedResult)(t,e),r):(0,Lfe.CreateType)((0,kfe.IsUnion)(t)?ubr(t.anyOf,e):(0,VB.ExtendsCheck)(t,e)!==VB.ExtendsResult.False?(0,abr.Never)():t,r)}});var Ufe=m(qfe=>{"use strict";Object.defineProperty(qfe,"__esModule",{value:!0});qfe.ExcludeFromMappedResult=gbr;var fbr=Co(),pbr=$B();function hbr(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=(0,pbr.Exclude)(t[n],e);return r}function mbr(t,e){return hbr(t.properties,e)}function gbr(t,e){let r=mbr(t,e);return(0,fbr.MappedResult)(r)}});var HB=m(Cm=>{"use strict";var _br=Cm&&Cm.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),Ffe=Cm&&Cm.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&_br(e,t,r)};Object.defineProperty(Cm,"__esModule",{value:!0});Ffe(Ufe(),Cm);Ffe(Nfe(),Cm);Ffe($B(),Cm)});var Bfe=m(jfe=>{"use strict";Object.defineProperty(jfe,"__esModule",{value:!0});jfe.ExtractFromTemplateLiteral=Ebr;var vbr=GB(),ybr=sf();function Ebr(t,e){return(0,vbr.Extract)((0,ybr.TemplateLiteralToUnion)(t),e)}});var GB=m(Hfe=>{"use strict";Object.defineProperty(Hfe,"__esModule",{value:!0});Hfe.Extract=xbr;var $fe=Mt(),Tbr=Yi(),Sbr=oo(),zB=yS(),bbr=Gfe(),Cbr=Bfe(),Vfe=Er();function Abr(t,e){let r=t.filter(n=>(0,zB.ExtendsCheck)(n,e)!==zB.ExtendsResult.False);return r.length===1?r[0]:(0,Tbr.Union)(r)}function xbr(t,e,r){return(0,Vfe.IsTemplateLiteral)(t)?(0,$fe.CreateType)((0,Cbr.ExtractFromTemplateLiteral)(t,e),r):(0,Vfe.IsMappedResult)(t)?(0,$fe.CreateType)((0,bbr.ExtractFromMappedResult)(t,e),r):(0,$fe.CreateType)((0,Vfe.IsUnion)(t)?Abr(t.anyOf,e):(0,zB.ExtendsCheck)(t,e)!==zB.ExtendsResult.False?t:(0,Sbr.Never)(),r)}});var Gfe=m(zfe=>{"use strict";Object.defineProperty(zfe,"__esModule",{value:!0});zfe.ExtractFromMappedResult=Obr;var wbr=Co(),Ibr=GB();function Pbr(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=(0,Ibr.Extract)(t[n],e);return r}function Rbr(t,e){return Pbr(t.properties,e)}function Obr(t,e){let r=Rbr(t,e);return(0,wbr.MappedResult)(r)}});var WB=m(Am=>{"use strict";var Mbr=Am&&Am.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),Wfe=Am&&Am.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Mbr(e,t,r)};Object.defineProperty(Am,"__esModule",{value:!0});Wfe(Gfe(),Am);Wfe(Bfe(),Am);Wfe(GB(),Am)});var Iit=m(xm=>{"use strict";var Nbr=xm&&xm.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),Lbr=xm&&xm.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),kbr=xm&&xm.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),o=0;o<n.length;o++)n[o]!=="default"&&Nbr(r,e,n[o]);return Lbr(r,e),r}})();Object.defineProperty(xm,"__esModule",{value:!0});xm.InstanceType=Fbr;var Dbr=Mt(),Ubr=oo(),qbr=kbr(Er());function Fbr(t,e){return qbr.IsConstructor(t)?(0,Dbr.CreateType)(t.returns,e):(0,Ubr.Never)(e)}});var KB=m(ES=>{"use strict";var jbr=ES&&ES.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),Bbr=ES&&ES.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&jbr(e,t,r)};Object.defineProperty(ES,"__esModule",{value:!0});Bbr(Iit(),ES)});var Pit=m(Kfe=>{"use strict";Object.defineProperty(Kfe,"__esModule",{value:!0});Kfe.ReadonlyOptional=Hbr;var $br=L1(),Vbr=Tp();function Hbr(t){return(0,$br.Readonly)((0,Vbr.Optional)(t))}});var h4=m(TS=>{"use strict";var Gbr=TS&&TS.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),zbr=TS&&TS.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Gbr(e,t,r)};Object.defineProperty(TS,"__esModule",{value:!0});zbr(Pit(),TS)});var Lit=m(NI=>{"use strict";Object.defineProperty(NI,"__esModule",{value:!0});NI.Record=lCr;NI.RecordPattern=Qfe;NI.RecordKey=uCr;NI.RecordValue=dCr;var Wbr=Mt(),Oit=Ze(),Kbr=oo(),Ybr=R1(),Mit=Ja(),Rit=O1(),Qbr=Yi(),Zbr=sf(),SS=YN(),Nit=af(),Jbr=Za(),Cp=Er();function bS(t,e,r){return(0,Wbr.CreateType)({[Oit.Kind]:"Record",type:"object",patternProperties:{[t]:e}},r)}function Yfe(t,e,r){let n={};for(let o of t)n[o]=e;return(0,Mit.Object)(n,{...r,[Oit.Hint]:"Record"})}function Xbr(t,e,r){return(0,Zbr.IsTemplateLiteralFinite)(t)?Yfe((0,Nit.IndexPropertyKeys)(t),e,r):bS(t.pattern,e,r)}function eCr(t,e,r){return Yfe((0,Nit.IndexPropertyKeys)((0,Qbr.Union)(t)),e,r)}function tCr(t,e,r){return Yfe([t.toString()],e,r)}function rCr(t,e,r){return bS(t.source,e,r)}function nCr(t,e,r){let n=(0,Jbr.IsUndefined)(t.pattern)?SS.PatternStringExact:t.pattern;return bS(n,e,r)}function iCr(t,e,r){return bS(SS.PatternStringExact,e,r)}function oCr(t,e,r){return bS(SS.PatternNeverExact,e,r)}function sCr(t,e,r){return(0,Mit.Object)({true:e,false:e},r)}function aCr(t,e,r){return bS(SS.PatternNumberExact,e,r)}function cCr(t,e,r){return bS(SS.PatternNumberExact,e,r)}function lCr(t,e,r={}){return(0,Cp.IsUnion)(t)?eCr(t.anyOf,e,r):(0,Cp.IsTemplateLiteral)(t)?Xbr(t,e,r):(0,Cp.IsLiteral)(t)?tCr(t.const,e,r):(0,Cp.IsBoolean)(t)?sCr(t,e,r):(0,Cp.IsInteger)(t)?aCr(t,e,r):(0,Cp.IsNumber)(t)?cCr(t,e,r):(0,Cp.IsRegExp)(t)?rCr(t,e,r):(0,Cp.IsString)(t)?nCr(t,e,r):(0,Cp.IsAny)(t)?iCr(t,e,r):(0,Cp.IsNever)(t)?oCr(t,e,r):(0,Kbr.Never)(r)}function Qfe(t){return globalThis.Object.getOwnPropertyNames(t.patternProperties)[0]}function uCr(t){let e=Qfe(t);return e===SS.PatternStringExact?(0,Rit.String)():e===SS.PatternNumberExact?(0,Ybr.Number)():(0,Rit.String)({pattern:e})}function dCr(t){return t.patternProperties[Qfe(t)]}});var LI=m(CS=>{"use strict";var fCr=CS&&CS.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),pCr=CS&&CS.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&fCr(e,t,r)};Object.defineProperty(CS,"__esModule",{value:!0});pCr(Lit(),CS)});var Dit=m(Ap=>{"use strict";var hCr=Ap&&Ap.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),mCr=Ap&&Ap.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),kit=Ap&&Ap.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),o=0;o<n.length;o++)n[o]!=="default"&&hCr(r,e,n[o]);return mCr(r,e),r}})();Object.defineProperty(Ap,"__esModule",{value:!0});Ap.FromTypes=kI;Ap.Instantiate=UCr;var gCr=oB(),_Cr=D1(),vCr=h4(),yCr=L1(),ECr=Tp(),TCr=Ja(),Zfe=LI(),SCr=kit(Za()),Qc=kit(Er());function bCr(t,e){return e.parameters=kI(t,e.parameters),e.returns=lf(t,e.returns),e}function CCr(t,e){return e.parameters=kI(t,e.parameters),e.returns=lf(t,e.returns),e}function ACr(t,e){return e.allOf=kI(t,e.allOf),e}function xCr(t,e){return e.anyOf=kI(t,e.anyOf),e}function wCr(t,e){return SCr.IsUndefined(e.items)||(e.items=kI(t,e.items)),e}function ICr(t,e){return e.items=lf(t,e.items),e}function PCr(t,e){return e.items=lf(t,e.items),e}function RCr(t,e){return e.items=lf(t,e.items),e}function OCr(t,e){return e.item=lf(t,e.item),e}function MCr(t,e){let r=DCr(t,e.properties);return{...e,...(0,TCr.Object)(r)}}function NCr(t,e){let r=lf(t,(0,Zfe.RecordKey)(e)),n=lf(t,(0,Zfe.RecordValue)(e)),o=(0,Zfe.Record)(r,n);return{...e,...o}}function LCr(t,e){return e.index in t?t[e.index]:(0,_Cr.Unknown)()}function kCr(t,e){let r=Qc.IsReadonly(e),n=Qc.IsOptional(e),o=lf(t,e);return r&&n?(0,vCr.ReadonlyOptional)(o):r&&!n?(0,yCr.Readonly)(o):!r&&n?(0,ECr.Optional)(o):o}function DCr(t,e){return globalThis.Object.getOwnPropertyNames(e).reduce((r,n)=>({...r,[n]:kCr(t,e[n])}),{})}function kI(t,e){return e.map(r=>lf(t,r))}function lf(t,e){return Qc.IsConstructor(e)?bCr(t,e):Qc.IsFunction(e)?CCr(t,e):Qc.IsIntersect(e)?ACr(t,e):Qc.IsUnion(e)?xCr(t,e):Qc.IsTuple(e)?wCr(t,e):Qc.IsArray(e)?ICr(t,e):Qc.IsAsyncIterator(e)?PCr(t,e):Qc.IsIterator(e)?RCr(t,e):Qc.IsPromise(e)?OCr(t,e):Qc.IsObject(e)?MCr(t,e):Qc.IsRecord(e)?NCr(t,e):Qc.IsArgument(e)?LCr(t,e):e}function UCr(t,e){return lf(e,(0,gCr.CloneType)(t))}});var YB=m(AS=>{"use strict";var qCr=AS&&AS.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),FCr=AS&&AS.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&qCr(e,t,r)};Object.defineProperty(AS,"__esModule",{value:!0});FCr(Dit(),AS)});var Uit=m(Jfe=>{"use strict";Object.defineProperty(Jfe,"__esModule",{value:!0});Jfe.Integer=$Cr;var jCr=Mt(),BCr=Ze();function $Cr(t){return(0,jCr.CreateType)({[BCr.Kind]:"Integer",type:"integer"},t)}});var QB=m(xS=>{"use strict";var VCr=xS&&xS.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),HCr=xS&&xS.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&VCr(e,t,r)};Object.defineProperty(xS,"__esModule",{value:!0});HCr(Uit(),xS)});var e0e=m(Xfe=>{"use strict";Object.defineProperty(Xfe,"__esModule",{value:!0});Xfe.IntrinsicFromMappedKey=JCr;var GCr=Co(),zCr=wS(),WCr=ma(),KCr=Hc();function YCr(t,e,r){return{[t]:(0,zCr.Intrinsic)((0,WCr.Literal)(t),e,(0,KCr.Clone)(r))}}function QCr(t,e,r){return t.reduce((o,s)=>({...o,...YCr(s,e,r)}),{})}function ZCr(t,e,r){return QCr(t.keys,e,r)}function JCr(t,e,r){let n=ZCr(t,e,r);return(0,GCr.MappedResult)(n)}});var wS=m(t0e=>{"use strict";Object.defineProperty(t0e,"__esModule",{value:!0});t0e.Intrinsic=$it;var XCr=Mt(),ZB=sf(),eAr=e0e(),qit=ma(),Fit=Yi(),JB=Er();function tAr(t){let[e,r]=[t.slice(0,1),t.slice(1)];return[e.toLowerCase(),r].join("")}function rAr(t){let[e,r]=[t.slice(0,1),t.slice(1)];return[e.toUpperCase(),r].join("")}function nAr(t){return t.toUpperCase()}function iAr(t){return t.toLowerCase()}function oAr(t,e,r){let n=(0,ZB.TemplateLiteralParseExact)(t.pattern);if(!(0,ZB.IsTemplateLiteralExpressionFinite)(n))return{...t,pattern:jit(t.pattern,e)};let a=[...(0,ZB.TemplateLiteralExpressionGenerate)(n)].map(u=>(0,qit.Literal)(u)),c=Bit(a,e),l=(0,Fit.Union)(c);return(0,ZB.TemplateLiteral)([l],r)}function jit(t,e){return typeof t=="string"?e==="Uncapitalize"?tAr(t):e==="Capitalize"?rAr(t):e==="Uppercase"?nAr(t):e==="Lowercase"?iAr(t):t:t.toString()}function Bit(t,e){return t.map(r=>$it(r,e))}function $it(t,e,r={}){return(0,JB.IsMappedKey)(t)?(0,eAr.IntrinsicFromMappedKey)(t,e,r):(0,JB.IsTemplateLiteral)(t)?oAr(t,e,r):(0,JB.IsUnion)(t)?(0,Fit.Union)(Bit(t.anyOf,e),r):(0,JB.IsLiteral)(t)?(0,qit.Literal)(jit(t.const,e),r):(0,XCr.CreateType)(t,r)}});var Vit=m(r0e=>{"use strict";Object.defineProperty(r0e,"__esModule",{value:!0});r0e.Capitalize=aAr;var sAr=wS();function aAr(t,e={}){return(0,sAr.Intrinsic)(t,"Capitalize",e)}});var Hit=m(n0e=>{"use strict";Object.defineProperty(n0e,"__esModule",{value:!0});n0e.Lowercase=lAr;var cAr=wS();function lAr(t,e={}){return(0,cAr.Intrinsic)(t,"Lowercase",e)}});var Git=m(i0e=>{"use strict";Object.defineProperty(i0e,"__esModule",{value:!0});i0e.Uncapitalize=dAr;var uAr=wS();function dAr(t,e={}){return(0,uAr.Intrinsic)(t,"Uncapitalize",e)}});var zit=m(o0e=>{"use strict";Object.defineProperty(o0e,"__esModule",{value:!0});o0e.Uppercase=pAr;var fAr=wS();function pAr(t,e={}){return(0,fAr.Intrinsic)(t,"Uppercase",e)}});var XB=m(nd=>{"use strict";var hAr=nd&&nd.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),DI=nd&&nd.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&hAr(e,t,r)};Object.defineProperty(nd,"__esModule",{value:!0});DI(Vit(),nd);DI(e0e(),nd);DI(wS(),nd);DI(Hit(),nd);DI(Git(),nd);DI(zit(),nd)});var a0e=m(s0e=>{"use strict";Object.defineProperty(s0e,"__esModule",{value:!0});s0e.OmitFromMappedResult=EAr;var mAr=Co(),gAr=e$(),_Ar=Hc();function vAr(t,e,r){let n={};for(let o of globalThis.Object.getOwnPropertyNames(t))n[o]=(0,gAr.Omit)(t[o],e,(0,_Ar.Clone)(r));return n}function yAr(t,e,r){return vAr(t.properties,e,r)}function EAr(t,e,r){let n=yAr(t,e,r);return(0,mAr.MappedResult)(n)}});var e$=m(u0e=>{"use strict";Object.defineProperty(u0e,"__esModule",{value:!0});u0e.Omit=DAr;var TAr=Mt(),SAr=pB(),bAr=GN(),c0e=I1(),CAr=ma(),AAr=af(),xAr=Zl(),Wit=Yi(),Kit=Ja(),wAr=d0e(),IAr=a0e(),wm=Er(),PAr=Za();function RAr(t,e){return t.map(r=>l0e(r,e))}function OAr(t,e){return t.map(r=>l0e(r,e))}function MAr(t,e){let{[e]:r,...n}=t;return n}function NAr(t,e){return e.reduce((r,n)=>MAr(r,n),t)}function LAr(t,e){let r=(0,SAr.Discard)(t,[bAr.TransformKind,"$id","required","properties"]),n=NAr(t.properties,e);return(0,Kit.Object)(n,r)}function kAr(t){let e=t.reduce((r,n)=>(0,wm.IsLiteralValue)(n)?[...r,(0,CAr.Literal)(n)]:r,[]);return(0,Wit.Union)(e)}function l0e(t,e){return(0,wm.IsIntersect)(t)?(0,xAr.Intersect)(RAr(t.allOf,e)):(0,wm.IsUnion)(t)?(0,Wit.Union)(OAr(t.anyOf,e)):(0,wm.IsObject)(t)?LAr(t,e):(0,Kit.Object)({})}function DAr(t,e,r){let n=(0,PAr.IsArray)(e)?kAr(e):e,o=(0,wm.IsSchema)(e)?(0,AAr.IndexPropertyKeys)(e):e,s=(0,wm.IsRef)(t),a=(0,wm.IsRef)(e);return(0,wm.IsMappedResult)(t)?(0,IAr.OmitFromMappedResult)(t,o,r):(0,wm.IsMappedKey)(e)?(0,wAr.OmitFromMappedKey)(t,e,r):s&&a?(0,c0e.Computed)("Omit",[t,n],r):!s&&a?(0,c0e.Computed)("Omit",[t,n],r):s&&!a?(0,c0e.Computed)("Omit",[t,n],r):(0,TAr.CreateType)({...l0e(t,o),...r})}});var d0e=m(f0e=>{"use strict";Object.defineProperty(f0e,"__esModule",{value:!0});f0e.OmitFromMappedKey=VAr;var UAr=Co(),qAr=e$(),FAr=Hc();function jAr(t,e,r){return{[e]:(0,qAr.Omit)(t,[e],(0,FAr.Clone)(r))}}function BAr(t,e,r){return e.reduce((n,o)=>({...n,...jAr(t,o,r)}),{})}function $Ar(t,e,r){return BAr(t,e.keys,r)}function VAr(t,e,r){let n=$Ar(t,e,r);return(0,UAr.MappedResult)(n)}});var m4=m(Im=>{"use strict";var HAr=Im&&Im.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),p0e=Im&&Im.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&HAr(e,t,r)};Object.defineProperty(Im,"__esModule",{value:!0});p0e(d0e(),Im);p0e(a0e(),Im);p0e(e$(),Im)});var m0e=m(h0e=>{"use strict";Object.defineProperty(h0e,"__esModule",{value:!0});h0e.PickFromMappedResult=QAr;var GAr=Co(),zAr=t$(),WAr=Hc();function KAr(t,e,r){let n={};for(let o of globalThis.Object.getOwnPropertyNames(t))n[o]=(0,zAr.Pick)(t[o],e,(0,WAr.Clone)(r));return n}function YAr(t,e,r){return KAr(t.properties,e,r)}function QAr(t,e,r){let n=YAr(t,e,r);return(0,GAr.MappedResult)(n)}});var t$=m(v0e=>{"use strict";Object.defineProperty(v0e,"__esModule",{value:!0});v0e.Pick=dxr;var ZAr=Mt(),JAr=pB(),g0e=I1(),XAr=Zl(),exr=ma(),Yit=Ja(),Qit=Yi(),txr=af(),rxr=GN(),Pm=Er(),nxr=Za(),ixr=y0e(),oxr=m0e();function sxr(t,e){return t.map(r=>_0e(r,e))}function axr(t,e){return t.map(r=>_0e(r,e))}function cxr(t,e){let r={};for(let n of e)n in t&&(r[n]=t[n]);return r}function lxr(t,e){let r=(0,JAr.Discard)(t,[rxr.TransformKind,"$id","required","properties"]),n=cxr(t.properties,e);return(0,Yit.Object)(n,r)}function uxr(t){let e=t.reduce((r,n)=>(0,Pm.IsLiteralValue)(n)?[...r,(0,exr.Literal)(n)]:r,[]);return(0,Qit.Union)(e)}function _0e(t,e){return(0,Pm.IsIntersect)(t)?(0,XAr.Intersect)(sxr(t.allOf,e)):(0,Pm.IsUnion)(t)?(0,Qit.Union)(axr(t.anyOf,e)):(0,Pm.IsObject)(t)?lxr(t,e):(0,Yit.Object)({})}function dxr(t,e,r){let n=(0,nxr.IsArray)(e)?uxr(e):e,o=(0,Pm.IsSchema)(e)?(0,txr.IndexPropertyKeys)(e):e,s=(0,Pm.IsRef)(t),a=(0,Pm.IsRef)(e);return(0,Pm.IsMappedResult)(t)?(0,oxr.PickFromMappedResult)(t,o,r):(0,Pm.IsMappedKey)(e)?(0,ixr.PickFromMappedKey)(t,e,r):s&&a?(0,g0e.Computed)("Pick",[t,n],r):!s&&a?(0,g0e.Computed)("Pick",[t,n],r):s&&!a?(0,g0e.Computed)("Pick",[t,n],r):(0,ZAr.CreateType)({..._0e(t,o),...r})}});var y0e=m(E0e=>{"use strict";Object.defineProperty(E0e,"__esModule",{value:!0});E0e.PickFromMappedKey=vxr;var fxr=Co(),pxr=t$(),hxr=Hc();function mxr(t,e,r){return{[e]:(0,pxr.Pick)(t,[e],(0,hxr.Clone)(r))}}function gxr(t,e,r){return e.reduce((n,o)=>({...n,...mxr(t,o,r)}),{})}function _xr(t,e,r){return gxr(t,e.keys,r)}function vxr(t,e,r){let n=_xr(t,e,r);return(0,fxr.MappedResult)(n)}});var g4=m(Rm=>{"use strict";var yxr=Rm&&Rm.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),T0e=Rm&&Rm.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&yxr(e,t,r)};Object.defineProperty(Rm,"__esModule",{value:!0});T0e(y0e(),Rm);T0e(m0e(),Rm);T0e(t$(),Rm)});var b0e=m(Om=>{"use strict";var Exr=Om&&Om.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),Txr=Om&&Om.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),Sxr=Om&&Om.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),o=0;o<n.length;o++)n[o]!=="default"&&Exr(r,e,n[o]);return Txr(r,e),r}})();Object.defineProperty(Om,"__esModule",{value:!0});Om.Partial=kxr;var bxr=Mt(),S0e=I1(),Cxr=Tp(),Jit=Ja(),Axr=Zl(),xxr=Yi(),wxr=Sm(),Ixr=gm(),Pxr=Ze(),Rxr=C0e(),ec=Sxr(Er());function Oxr(t,e){return(0,S0e.Computed)("Partial",[(0,S0e.Computed)(t,e)])}function Mxr(t){return(0,S0e.Computed)("Partial",[(0,wxr.Ref)(t)])}function Nxr(t){let e={};for(let r of globalThis.Object.getOwnPropertyNames(t))e[r]=(0,Cxr.Optional)(t[r]);return e}function Lxr(t){let e=(0,Ixr.Discard)(t,[Pxr.TransformKind,"$id","required","properties"]),r=Nxr(t.properties);return(0,Jit.Object)(r,e)}function Zit(t){return t.map(e=>Xit(e))}function Xit(t){return ec.IsComputed(t)?Oxr(t.target,t.parameters):ec.IsRef(t)?Mxr(t.$ref):ec.IsIntersect(t)?(0,Axr.Intersect)(Zit(t.allOf)):ec.IsUnion(t)?(0,xxr.Union)(Zit(t.anyOf)):ec.IsObject(t)?Lxr(t):ec.IsBigInt(t)||ec.IsBoolean(t)||ec.IsInteger(t)||ec.IsLiteral(t)||ec.IsNull(t)||ec.IsNumber(t)||ec.IsString(t)||ec.IsSymbol(t)||ec.IsUndefined(t)?t:(0,Jit.Object)({})}function kxr(t,e){return ec.IsMappedResult(t)?(0,Rxr.PartialFromMappedResult)(t,e):(0,bxr.CreateType)({...Xit(t),...e})}});var C0e=m(A0e=>{"use strict";Object.defineProperty(A0e,"__esModule",{value:!0});A0e.PartialFromMappedResult=Bxr;var Dxr=Co(),Uxr=b0e(),qxr=Hc();function Fxr(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=(0,Uxr.Partial)(t[n],(0,qxr.Clone)(e));return r}function jxr(t,e){return Fxr(t.properties,e)}function Bxr(t,e){let r=jxr(t,e);return(0,Dxr.MappedResult)(r)}});var _4=m(U1=>{"use strict";var $xr=U1&&U1.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),eot=U1&&U1.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&$xr(e,t,r)};Object.defineProperty(U1,"__esModule",{value:!0});eot(C0e(),U1);eot(b0e(),U1)});var w0e=m(Mm=>{"use strict";var Vxr=Mm&&Mm.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),Hxr=Mm&&Mm.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),Gxr=Mm&&Mm.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),o=0;o<n.length;o++)n[o]!=="default"&&Vxr(r,e,n[o]);return Hxr(r,e),r}})();Object.defineProperty(Mm,"__esModule",{value:!0});Mm.Required=twr;var zxr=Mt(),x0e=I1(),rot=Ja(),Wxr=Zl(),Kxr=Yi(),Yxr=Sm(),not=Ze(),iot=gm(),Qxr=I0e(),tc=Gxr(Er());function Zxr(t,e){return(0,x0e.Computed)("Required",[(0,x0e.Computed)(t,e)])}function Jxr(t){return(0,x0e.Computed)("Required",[(0,Yxr.Ref)(t)])}function Xxr(t){let e={};for(let r of globalThis.Object.getOwnPropertyNames(t))e[r]=(0,iot.Discard)(t[r],[not.OptionalKind]);return e}function ewr(t){let e=(0,iot.Discard)(t,[not.TransformKind,"$id","required","properties"]),r=Xxr(t.properties);return(0,rot.Object)(r,e)}function tot(t){return t.map(e=>oot(e))}function oot(t){return tc.IsComputed(t)?Zxr(t.target,t.parameters):tc.IsRef(t)?Jxr(t.$ref):tc.IsIntersect(t)?(0,Wxr.Intersect)(tot(t.allOf)):tc.IsUnion(t)?(0,Kxr.Union)(tot(t.anyOf)):tc.IsObject(t)?ewr(t):tc.IsBigInt(t)||tc.IsBoolean(t)||tc.IsInteger(t)||tc.IsLiteral(t)||tc.IsNull(t)||tc.IsNumber(t)||tc.IsString(t)||tc.IsSymbol(t)||tc.IsUndefined(t)?t:(0,rot.Object)({})}function twr(t,e){return tc.IsMappedResult(t)?(0,Qxr.RequiredFromMappedResult)(t,e):(0,zxr.CreateType)({...oot(t),...e})}});var I0e=m(P0e=>{"use strict";Object.defineProperty(P0e,"__esModule",{value:!0});P0e.RequiredFromMappedResult=swr;var rwr=Co(),nwr=w0e();function iwr(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=(0,nwr.Required)(t[n],e);return r}function owr(t,e){return iwr(t.properties,e)}function swr(t,e){let r=owr(t,e);return(0,rwr.MappedResult)(r)}});var v4=m(q1=>{"use strict";var awr=q1&&q1.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),sot=q1&&q1.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&awr(e,t,r)};Object.defineProperty(q1,"__esModule",{value:!0});sot(I0e(),q1);sot(w0e(),q1)});var uot=m(uf=>{"use strict";var cwr=uf&&uf.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),lwr=uf&&uf.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),uwr=uf&&uf.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),o=0;o<n.length;o++)n[o]!=="default"&&cwr(r,e,n[o]);return lwr(r,e),r}})();Object.defineProperty(uf,"__esModule",{value:!0});uf.FromType=Jc;uf.ComputeType=lot;uf.ComputeModuleProperties=Kwr;var Zc=hm(),dwr=Oue(),aot=gm(),fwr=TI(),pwr=a4(),hwr=SI(),mwr=bI(),gwr=af(),_wr=P1(),vwr=Zl(),ywr=PI(),Ewr=ed(),Twr=Ja(),Swr=m4(),bwr=g4(),R0e=oo(),Cwr=_4(),cot=LI(),Awr=v4(),xwr=ym(),wwr=Yi(),r$=Ze(),Ns=uwr(Er());function Iwr(t,e){return e.map(r=>Ns.IsRef(r)?O0e(t,r.$ref):Jc(t,r))}function O0e(t,e){return e in t?Ns.IsRef(t[e])?O0e(t,t[e].$ref):Jc(t,t[e]):(0,R0e.Never)()}function Pwr(t){return(0,pwr.Awaited)(t[0])}function Rwr(t){return(0,gwr.Index)(t[0],t[1])}function Owr(t){return(0,Ewr.KeyOf)(t[0])}function Mwr(t){return(0,Cwr.Partial)(t[0])}function Nwr(t){return(0,Swr.Omit)(t[0],t[1])}function Lwr(t){return(0,bwr.Pick)(t[0],t[1])}function kwr(t){return(0,Awr.Required)(t[0])}function Dwr(t,e,r){let n=Iwr(t,r);return e==="Awaited"?Pwr(n):e==="Index"?Rwr(n):e==="KeyOf"?Owr(n):e==="Partial"?Mwr(n):e==="Omit"?Nwr(n):e==="Pick"?Lwr(n):e==="Required"?kwr(n):(0,R0e.Never)()}function Uwr(t,e){return(0,fwr.Array)(Jc(t,e))}function qwr(t,e){return(0,hwr.AsyncIterator)(Jc(t,e))}function Fwr(t,e,r){return(0,mwr.Constructor)(y4(t,e),Jc(t,r))}function jwr(t,e,r){return(0,_wr.Function)(y4(t,e),Jc(t,r))}function Bwr(t,e){return(0,vwr.Intersect)(y4(t,e))}function $wr(t,e){return(0,ywr.Iterator)(Jc(t,e))}function Vwr(t,e){return(0,Twr.Object)(globalThis.Object.keys(e).reduce((r,n)=>({...r,[n]:Jc(t,e[n])}),{}))}function Hwr(t,e){let[r,n]=[Jc(t,(0,cot.RecordValue)(e)),(0,cot.RecordPattern)(e)],o=(0,dwr.CloneType)(e);return o.patternProperties[n]=r,o}function Gwr(t,e){return Ns.IsRef(e)?{...O0e(t,e.$ref),[r$.TransformKind]:e[r$.TransformKind]}:e}function zwr(t,e){return(0,xwr.Tuple)(y4(t,e))}function Wwr(t,e){return(0,wwr.Union)(y4(t,e))}function y4(t,e){return e.map(r=>Jc(t,r))}function Jc(t,e){return Ns.IsOptional(e)?(0,Zc.CreateType)(Jc(t,(0,aot.Discard)(e,[r$.OptionalKind])),e):Ns.IsReadonly(e)?(0,Zc.CreateType)(Jc(t,(0,aot.Discard)(e,[r$.ReadonlyKind])),e):Ns.IsTransform(e)?(0,Zc.CreateType)(Gwr(t,e),e):Ns.IsArray(e)?(0,Zc.CreateType)(Uwr(t,e.items),e):Ns.IsAsyncIterator(e)?(0,Zc.CreateType)(qwr(t,e.items),e):Ns.IsComputed(e)?(0,Zc.CreateType)(Dwr(t,e.target,e.parameters)):Ns.IsConstructor(e)?(0,Zc.CreateType)(Fwr(t,e.parameters,e.returns),e):Ns.IsFunction(e)?(0,Zc.CreateType)(jwr(t,e.parameters,e.returns),e):Ns.IsIntersect(e)?(0,Zc.CreateType)(Bwr(t,e.allOf),e):Ns.IsIterator(e)?(0,Zc.CreateType)($wr(t,e.items),e):Ns.IsObject(e)?(0,Zc.CreateType)(Vwr(t,e.properties),e):Ns.IsRecord(e)?(0,Zc.CreateType)(Hwr(t,e)):Ns.IsTuple(e)?(0,Zc.CreateType)(zwr(t,e.items||[]),e):Ns.IsUnion(e)?(0,Zc.CreateType)(Wwr(t,e.anyOf),e):e}function lot(t,e){return e in t?Jc(t,t[e]):(0,R0e.Never)()}function Kwr(t){return globalThis.Object.getOwnPropertyNames(t).reduce((e,r)=>({...e,[r]:lot(t,r)}),{})}});var fot=m(E4=>{"use strict";Object.defineProperty(E4,"__esModule",{value:!0});E4.TModule=void 0;E4.Module=Zwr;var dot=hm(),Ywr=Ze(),Qwr=uot(),n$=class{constructor(e){let r=(0,Qwr.ComputeModuleProperties)(e),n=this.WithIdentifiers(r);this.$defs=n}Import(e,r){let n={...this.$defs,[e]:(0,dot.CreateType)(this.$defs[e],r)};return(0,dot.CreateType)({[Ywr.Kind]:"Import",$defs:n,$ref:e})}WithIdentifiers(e){return globalThis.Object.getOwnPropertyNames(e).reduce((r,n)=>({...r,[n]:{...e[n],$id:n}}),{})}};E4.TModule=n$;function Zwr(t){return new n$(t)}});var i$=m(IS=>{"use strict";var Jwr=IS&&IS.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),Xwr=IS&&IS.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Jwr(e,t,r)};Object.defineProperty(IS,"__esModule",{value:!0});Xwr(fot(),IS)});var pot=m(M0e=>{"use strict";Object.defineProperty(M0e,"__esModule",{value:!0});M0e.Not=rIr;var eIr=Mt(),tIr=Ze();function rIr(t,e){return(0,eIr.CreateType)({[tIr.Kind]:"Not",not:t},e)}});var o$=m(PS=>{"use strict";var nIr=PS&&PS.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),iIr=PS&&PS.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&nIr(e,t,r)};Object.defineProperty(PS,"__esModule",{value:!0});iIr(pot(),PS)});var hot=m(Nm=>{"use strict";var oIr=Nm&&Nm.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),sIr=Nm&&Nm.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),aIr=Nm&&Nm.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),o=0;o<n.length;o++)n[o]!=="default"&&oIr(r,e,n[o]);return sIr(r,e),r}})();Object.defineProperty(Nm,"__esModule",{value:!0});Nm.Parameters=dIr;var cIr=ym(),lIr=oo(),uIr=aIr(Er());function dIr(t,e){return uIr.IsFunction(t)?(0,cIr.Tuple)(t.parameters,e):(0,lIr.Never)()}});var s$=m(RS=>{"use strict";var fIr=RS&&RS.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),pIr=RS&&RS.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&fIr(e,t,r)};Object.defineProperty(RS,"__esModule",{value:!0});pIr(hot(),RS)});var got=m(N0e=>{"use strict";Object.defineProperty(N0e,"__esModule",{value:!0});N0e.Recursive=vIr;var hIr=oB(),mIr=Mt(),gIr=Za(),mot=Ze(),_Ir=0;function vIr(t,e={}){(0,gIr.IsUndefined)(e.$id)&&(e.$id=`T${_Ir++}`);let r=(0,hIr.CloneType)(t({[mot.Kind]:"This",$ref:`${e.$id}`}));return r.$id=e.$id,(0,mIr.CreateType)({[mot.Hint]:"Recursive",...r},e)}});var a$=m(OS=>{"use strict";var yIr=OS&&OS.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),EIr=OS&&OS.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&yIr(e,t,r)};Object.defineProperty(OS,"__esModule",{value:!0});EIr(got(),OS)});var _ot=m(L0e=>{"use strict";Object.defineProperty(L0e,"__esModule",{value:!0});L0e.RegExp=CIr;var TIr=Mt(),SIr=Za(),bIr=Ze();function CIr(t,e){let r=(0,SIr.IsString)(t)?new globalThis.RegExp(t):t;return(0,TIr.CreateType)({[bIr.Kind]:"RegExp",type:"RegExp",source:r.source,flags:r.flags},e)}});var c$=m(MS=>{"use strict";var AIr=MS&&MS.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),xIr=MS&&MS.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&AIr(e,t,r)};Object.defineProperty(MS,"__esModule",{value:!0});xIr(_ot(),MS)});var vot=m(D0e=>{"use strict";Object.defineProperty(D0e,"__esModule",{value:!0});D0e.Rest=IIr;var k0e=Er();function wIr(t){return(0,k0e.IsIntersect)(t)?t.allOf:(0,k0e.IsUnion)(t)?t.anyOf:(0,k0e.IsTuple)(t)?t.items??[]:[]}function IIr(t){return wIr(t)}});var l$=m(NS=>{"use strict";var PIr=NS&&NS.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),RIr=NS&&NS.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&PIr(e,t,r)};Object.defineProperty(NS,"__esModule",{value:!0});RIr(vot(),NS)});var yot=m(Lm=>{"use strict";var OIr=Lm&&Lm.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),MIr=Lm&&Lm.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),NIr=Lm&&Lm.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),o=0;o<n.length;o++)n[o]!=="default"&&OIr(r,e,n[o]);return MIr(r,e),r}})();Object.defineProperty(Lm,"__esModule",{value:!0});Lm.ReturnType=UIr;var LIr=Mt(),kIr=oo(),DIr=NIr(Er());function UIr(t,e){return DIr.IsFunction(t)?(0,LIr.CreateType)(t.returns,e):(0,kIr.Never)(e)}});var u$=m(LS=>{"use strict";var qIr=LS&&LS.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),FIr=LS&&LS.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&qIr(e,t,r)};Object.defineProperty(LS,"__esModule",{value:!0});FIr(yot(),LS)});var Tot=m(Eot=>{"use strict";Object.defineProperty(Eot,"__esModule",{value:!0})});var bot=m(Sot=>{"use strict";Object.defineProperty(Sot,"__esModule",{value:!0});var A9n=Ze()});var Aot=m(F1=>{"use strict";var jIr=F1&&F1.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),Cot=F1&&F1.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&jIr(e,t,r)};Object.defineProperty(F1,"__esModule",{value:!0});Cot(Tot(),F1);Cot(bot(),F1)});var wot=m(xot=>{"use strict";Object.defineProperty(xot,"__esModule",{value:!0})});var Iot=m(kS=>{"use strict";var BIr=kS&&kS.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),$Ir=kS&&kS.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&BIr(e,t,r)};Object.defineProperty(kS,"__esModule",{value:!0});$Ir(wot(),kS)});var Pot=m(DS=>{"use strict";Object.defineProperty(DS,"__esModule",{value:!0});DS.TransformEncodeBuilder=DS.TransformDecodeBuilder=void 0;DS.Transform=HIr;var d$=Ze(),VIr=Er(),f$=class{constructor(e){this.schema=e}Decode(e){return new p$(this.schema,e)}};DS.TransformDecodeBuilder=f$;var p$=class{constructor(e,r){this.schema=e,this.decode=r}EncodeTransform(e,r){let s={Encode:a=>r[d$.TransformKind].Encode(e(a)),Decode:a=>this.decode(r[d$.TransformKind].Decode(a))};return{...r,[d$.TransformKind]:s}}EncodeSchema(e,r){let n={Decode:this.decode,Encode:e};return{...r,[d$.TransformKind]:n}}Encode(e){return(0,VIr.IsTransform)(this.schema)?this.EncodeTransform(e,this.schema):this.EncodeSchema(e,this.schema)}};DS.TransformEncodeBuilder=p$;function HIr(t){return new f$(t)}});var h$=m(US=>{"use strict";var GIr=US&&US.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),zIr=US&&US.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&GIr(e,t,r)};Object.defineProperty(US,"__esModule",{value:!0});zIr(Pot(),US)});var Oot=m(U0e=>{"use strict";Object.defineProperty(U0e,"__esModule",{value:!0});U0e.Unsafe=KIr;var WIr=Mt(),Rot=Ze();function KIr(t={}){return(0,WIr.CreateType)({[Rot.Kind]:t[Rot.Kind]??"Unsafe"},t)}});var T4=m(qS=>{"use strict";var YIr=qS&&qS.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),QIr=qS&&qS.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&YIr(e,t,r)};Object.defineProperty(qS,"__esModule",{value:!0});QIr(Oot(),qS)});var Mot=m(q0e=>{"use strict";Object.defineProperty(q0e,"__esModule",{value:!0});q0e.Void=XIr;var ZIr=Mt(),JIr=Ze();function XIr(t){return(0,ZIr.CreateType)({[JIr.Kind]:"Void",type:"void"},t)}});var m$=m(FS=>{"use strict";var ePr=FS&&FS.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),tPr=FS&&FS.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&ePr(e,t,r)};Object.defineProperty(FS,"__esModule",{value:!0});tPr(Mot(),FS)});var j0e=m(_$=>{"use strict";Object.defineProperty(_$,"__esModule",{value:!0});_$.JsonTypeBuilder=void 0;var rPr=EI(),nPr=TI(),iPr=XN(),oPr=RB(),sPr=MB(),aPr=LB(),cPr=HB(),lPr=yS(),uPr=WB(),dPr=af(),fPr=QB(),pPr=Zl(),g$=XB(),hPr=ed(),mPr=ma(),gPr=Co(),_Pr=oo(),vPr=o$(),yPr=l4(),EPr=i$(),TPr=R1(),SPr=Ja(),bPr=m4(),CPr=Tp(),APr=_4(),xPr=g4(),wPr=L1(),IPr=h4(),PPr=LI(),RPr=a$(),OPr=Sm(),MPr=v4(),NPr=l$(),LPr=O1(),kPr=sf(),DPr=h$(),UPr=ym(),qPr=Yi(),FPr=D1(),jPr=T4(),F0e=class{ReadonlyOptional(e){return(0,IPr.ReadonlyOptional)(e)}Readonly(e,r){return(0,wPr.Readonly)(e,r??!0)}Optional(e,r){return(0,CPr.Optional)(e,r??!0)}Any(e){return(0,rPr.Any)(e)}Array(e,r){return(0,nPr.Array)(e,r)}Boolean(e){return(0,iPr.Boolean)(e)}Capitalize(e,r){return(0,g$.Capitalize)(e,r)}Composite(e,r){return(0,oPr.Composite)(e,r)}Const(e,r){return(0,sPr.Const)(e,r)}Enum(e,r){return(0,aPr.Enum)(e,r)}Exclude(e,r,n){return(0,cPr.Exclude)(e,r,n)}Extends(e,r,n,o,s){return(0,lPr.Extends)(e,r,n,o,s)}Extract(e,r,n){return(0,uPr.Extract)(e,r,n)}Index(e,r,n){return(0,dPr.Index)(e,r,n)}Integer(e){return(0,fPr.Integer)(e)}Intersect(e,r){return(0,pPr.Intersect)(e,r)}KeyOf(e,r){return(0,hPr.KeyOf)(e,r)}Literal(e,r){return(0,mPr.Literal)(e,r)}Lowercase(e,r){return(0,g$.Lowercase)(e,r)}Mapped(e,r,n){return(0,gPr.Mapped)(e,r,n)}Module(e){return(0,EPr.Module)(e)}Never(e){return(0,_Pr.Never)(e)}Not(e,r){return(0,vPr.Not)(e,r)}Null(e){return(0,yPr.Null)(e)}Number(e){return(0,TPr.Number)(e)}Object(e,r){return(0,SPr.Object)(e,r)}Omit(e,r,n){return(0,bPr.Omit)(e,r,n)}Partial(e,r){return(0,APr.Partial)(e,r)}Pick(e,r,n){return(0,xPr.Pick)(e,r,n)}Record(e,r,n){return(0,PPr.Record)(e,r,n)}Recursive(e,r){return(0,RPr.Recursive)(e,r)}Ref(...e){return(0,OPr.Ref)(e[0],e[1])}Required(e,r){return(0,MPr.Required)(e,r)}Rest(e){return(0,NPr.Rest)(e)}String(e){return(0,LPr.String)(e)}TemplateLiteral(e,r){return(0,kPr.TemplateLiteral)(e,r)}Transform(e){return(0,DPr.Transform)(e)}Tuple(e,r){return(0,UPr.Tuple)(e,r)}Uncapitalize(e,r){return(0,g$.Uncapitalize)(e,r)}Union(e,r){return(0,qPr.Union)(e,r)}Unknown(e){return(0,FPr.Unknown)(e)}Unsafe(e){return(0,jPr.Unsafe)(e)}Uppercase(e,r){return(0,g$.Uppercase)(e,r)}};_$.JsonTypeBuilder=F0e});var Not=m(ce=>{"use strict";Object.defineProperty(ce,"__esModule",{value:!0});ce.Rest=ce.Required=ce.RegExp=ce.Ref=ce.Recursive=ce.Record=ce.ReadonlyOptional=ce.Readonly=ce.Promise=ce.Pick=ce.Partial=ce.Parameters=ce.Optional=ce.Omit=ce.Object=ce.Number=ce.Null=ce.Not=ce.Never=ce.Module=ce.Mapped=ce.Literal=ce.KeyOf=ce.Iterator=ce.Uppercase=ce.Lowercase=ce.Uncapitalize=ce.Capitalize=ce.Intersect=ce.Integer=ce.Instantiate=ce.InstanceType=ce.Index=ce.Function=ce.Extract=ce.Extends=ce.Exclude=ce.Enum=ce.Date=ce.ConstructorParameters=ce.Constructor=ce.Const=ce.Composite=ce.Boolean=ce.BigInt=ce.Awaited=ce.AsyncIterator=ce.Array=ce.Argument=ce.Any=void 0;ce.Void=ce.Unsafe=ce.Unknown=ce.Union=ce.Undefined=ce.Uint8Array=ce.Tuple=ce.Transform=ce.TemplateLiteral=ce.Symbol=ce.String=ce.ReturnType=void 0;var BPr=EI();Object.defineProperty(ce,"Any",{enumerable:!0,get:function(){return BPr.Any}});var $Pr=fB();Object.defineProperty(ce,"Argument",{enumerable:!0,get:function(){return $Pr.Argument}});var VPr=TI();Object.defineProperty(ce,"Array",{enumerable:!0,get:function(){return VPr.Array}});var HPr=SI();Object.defineProperty(ce,"AsyncIterator",{enumerable:!0,get:function(){return HPr.AsyncIterator}});var GPr=a4();Object.defineProperty(ce,"Awaited",{enumerable:!0,get:function(){return GPr.Awaited}});var zPr=wI();Object.defineProperty(ce,"BigInt",{enumerable:!0,get:function(){return zPr.BigInt}});var WPr=XN();Object.defineProperty(ce,"Boolean",{enumerable:!0,get:function(){return WPr.Boolean}});var KPr=RB();Object.defineProperty(ce,"Composite",{enumerable:!0,get:function(){return KPr.Composite}});var YPr=MB();Object.defineProperty(ce,"Const",{enumerable:!0,get:function(){return YPr.Const}});var QPr=bI();Object.defineProperty(ce,"Constructor",{enumerable:!0,get:function(){return QPr.Constructor}});var ZPr=NB();Object.defineProperty(ce,"ConstructorParameters",{enumerable:!0,get:function(){return ZPr.ConstructorParameters}});var JPr=c4();Object.defineProperty(ce,"Date",{enumerable:!0,get:function(){return JPr.Date}});var XPr=LB();Object.defineProperty(ce,"Enum",{enumerable:!0,get:function(){return XPr.Enum}});var eRr=HB();Object.defineProperty(ce,"Exclude",{enumerable:!0,get:function(){return eRr.Exclude}});var tRr=yS();Object.defineProperty(ce,"Extends",{enumerable:!0,get:function(){return tRr.Extends}});var rRr=WB();Object.defineProperty(ce,"Extract",{enumerable:!0,get:function(){return rRr.Extract}});var nRr=P1();Object.defineProperty(ce,"Function",{enumerable:!0,get:function(){return nRr.Function}});var iRr=af();Object.defineProperty(ce,"Index",{enumerable:!0,get:function(){return iRr.Index}});var oRr=KB();Object.defineProperty(ce,"InstanceType",{enumerable:!0,get:function(){return oRr.InstanceType}});var sRr=YB();Object.defineProperty(ce,"Instantiate",{enumerable:!0,get:function(){return sRr.Instantiate}});var aRr=QB();Object.defineProperty(ce,"Integer",{enumerable:!0,get:function(){return aRr.Integer}});var cRr=Zl();Object.defineProperty(ce,"Intersect",{enumerable:!0,get:function(){return cRr.Intersect}});var v$=XB();Object.defineProperty(ce,"Capitalize",{enumerable:!0,get:function(){return v$.Capitalize}});Object.defineProperty(ce,"Uncapitalize",{enumerable:!0,get:function(){return v$.Uncapitalize}});Object.defineProperty(ce,"Lowercase",{enumerable:!0,get:function(){return v$.Lowercase}});Object.defineProperty(ce,"Uppercase",{enumerable:!0,get:function(){return v$.Uppercase}});var lRr=PI();Object.defineProperty(ce,"Iterator",{enumerable:!0,get:function(){return lRr.Iterator}});var uRr=ed();Object.defineProperty(ce,"KeyOf",{enumerable:!0,get:function(){return uRr.KeyOf}});var dRr=ma();Object.defineProperty(ce,"Literal",{enumerable:!0,get:function(){return dRr.Literal}});var fRr=Co();Object.defineProperty(ce,"Mapped",{enumerable:!0,get:function(){return fRr.Mapped}});var pRr=i$();Object.defineProperty(ce,"Module",{enumerable:!0,get:function(){return pRr.Module}});var hRr=oo();Object.defineProperty(ce,"Never",{enumerable:!0,get:function(){return hRr.Never}});var mRr=o$();Object.defineProperty(ce,"Not",{enumerable:!0,get:function(){return mRr.Not}});var gRr=l4();Object.defineProperty(ce,"Null",{enumerable:!0,get:function(){return gRr.Null}});var _Rr=R1();Object.defineProperty(ce,"Number",{enumerable:!0,get:function(){return _Rr.Number}});var vRr=Ja();Object.defineProperty(ce,"Object",{enumerable:!0,get:function(){return vRr.Object}});var yRr=m4();Object.defineProperty(ce,"Omit",{enumerable:!0,get:function(){return yRr.Omit}});var ERr=Tp();Object.defineProperty(ce,"Optional",{enumerable:!0,get:function(){return ERr.Optional}});var TRr=s$();Object.defineProperty(ce,"Parameters",{enumerable:!0,get:function(){return TRr.Parameters}});var SRr=_4();Object.defineProperty(ce,"Partial",{enumerable:!0,get:function(){return SRr.Partial}});var bRr=g4();Object.defineProperty(ce,"Pick",{enumerable:!0,get:function(){return bRr.Pick}});var CRr=i4();Object.defineProperty(ce,"Promise",{enumerable:!0,get:function(){return CRr.Promise}});var ARr=L1();Object.defineProperty(ce,"Readonly",{enumerable:!0,get:function(){return ARr.Readonly}});var xRr=h4();Object.defineProperty(ce,"ReadonlyOptional",{enumerable:!0,get:function(){return xRr.ReadonlyOptional}});var wRr=LI();Object.defineProperty(ce,"Record",{enumerable:!0,get:function(){return wRr.Record}});var IRr=a$();Object.defineProperty(ce,"Recursive",{enumerable:!0,get:function(){return IRr.Recursive}});var PRr=Sm();Object.defineProperty(ce,"Ref",{enumerable:!0,get:function(){return PRr.Ref}});var RRr=c$();Object.defineProperty(ce,"RegExp",{enumerable:!0,get:function(){return RRr.RegExp}});var ORr=v4();Object.defineProperty(ce,"Required",{enumerable:!0,get:function(){return ORr.Required}});var MRr=l$();Object.defineProperty(ce,"Rest",{enumerable:!0,get:function(){return MRr.Rest}});var NRr=u$();Object.defineProperty(ce,"ReturnType",{enumerable:!0,get:function(){return NRr.ReturnType}});var LRr=O1();Object.defineProperty(ce,"String",{enumerable:!0,get:function(){return LRr.String}});var kRr=u4();Object.defineProperty(ce,"Symbol",{enumerable:!0,get:function(){return kRr.Symbol}});var DRr=sf();Object.defineProperty(ce,"TemplateLiteral",{enumerable:!0,get:function(){return DRr.TemplateLiteral}});var URr=h$();Object.defineProperty(ce,"Transform",{enumerable:!0,get:function(){return URr.Transform}});var qRr=ym();Object.defineProperty(ce,"Tuple",{enumerable:!0,get:function(){return qRr.Tuple}});var FRr=f4();Object.defineProperty(ce,"Uint8Array",{enumerable:!0,get:function(){return FRr.Uint8Array}});var jRr=d4();Object.defineProperty(ce,"Undefined",{enumerable:!0,get:function(){return jRr.Undefined}});var BRr=Yi();Object.defineProperty(ce,"Union",{enumerable:!0,get:function(){return BRr.Union}});var $Rr=D1();Object.defineProperty(ce,"Unknown",{enumerable:!0,get:function(){return $Rr.Unknown}});var VRr=T4();Object.defineProperty(ce,"Unsafe",{enumerable:!0,get:function(){return VRr.Unsafe}});var HRr=m$();Object.defineProperty(ce,"Void",{enumerable:!0,get:function(){return HRr.Void}})});var Lot=m(y$=>{"use strict";Object.defineProperty(y$,"__esModule",{value:!0});y$.JavaScriptTypeBuilder=void 0;var GRr=j0e(),zRr=fB(),WRr=SI(),KRr=a4(),YRr=wI(),QRr=bI(),ZRr=NB(),JRr=c4(),XRr=P1(),eOr=KB(),tOr=YB(),rOr=PI(),nOr=s$(),iOr=i4(),oOr=c$(),sOr=u$(),aOr=u4(),cOr=f4(),lOr=d4(),uOr=m$(),B0e=class extends GRr.JsonTypeBuilder{Argument(e){return(0,zRr.Argument)(e)}AsyncIterator(e,r){return(0,WRr.AsyncIterator)(e,r)}Awaited(e,r){return(0,KRr.Awaited)(e,r)}BigInt(e){return(0,YRr.BigInt)(e)}ConstructorParameters(e,r){return(0,ZRr.ConstructorParameters)(e,r)}Constructor(e,r,n){return(0,QRr.Constructor)(e,r,n)}Date(e={}){return(0,JRr.Date)(e)}Function(e,r,n){return(0,XRr.Function)(e,r,n)}InstanceType(e,r){return(0,eOr.InstanceType)(e,r)}Instantiate(e,r){return(0,tOr.Instantiate)(e,r)}Iterator(e,r){return(0,rOr.Iterator)(e,r)}Parameters(e,r){return(0,nOr.Parameters)(e,r)}Promise(e,r){return(0,iOr.Promise)(e,r)}RegExp(e,r){return(0,oOr.RegExp)(e,r)}ReturnType(e,r){return(0,sOr.ReturnType)(e,r)}Symbol(e){return(0,aOr.Symbol)(e)}Undefined(e){return(0,lOr.Undefined)(e)}Uint8Array(e){return(0,cOr.Uint8Array)(e)}Void(e){return(0,uOr.Void)(e)}};y$.JavaScriptTypeBuilder=B0e});var kot=m(Xc=>{"use strict";var dOr=Xc&&Xc.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),fOr=Xc&&Xc.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),pOr=Xc&&Xc.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),o=0;o<n.length;o++)n[o]!=="default"&&dOr(r,e,n[o]);return fOr(r,e),r}})();Object.defineProperty(Xc,"__esModule",{value:!0});Xc.Type=Xc.JavaScriptTypeBuilder=Xc.JsonTypeBuilder=void 0;var hOr=j0e();Object.defineProperty(Xc,"JsonTypeBuilder",{enumerable:!0,get:function(){return hOr.JsonTypeBuilder}});var mOr=pOr(Not()),gOr=Lot();Object.defineProperty(Xc,"JavaScriptTypeBuilder",{enumerable:!0,get:function(){return gOr.JavaScriptTypeBuilder}});var _Or=mOr;Xc.Type=_Or});var S4=m(Fe=>{"use strict";var vOr=Fe&&Fe.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),We=Fe&&Fe.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&vOr(e,t,r)};Object.defineProperty(Fe,"__esModule",{value:!0});We(Oue(),Fe);We(hm(),Fe);We(vi(),Fe);We(Bue(),Fe);We(Drt(),Fe);We(YN(),Fe);We(qT(),Fe);We(QN(),Fe);We(Ze(),Fe);We(EI(),Fe);We(TI(),Fe);We(fB(),Fe);We(SI(),Fe);We(a4(),Fe);We(wI(),Fe);We(XN(),Fe);We(RB(),Fe);We(MB(),Fe);We(bI(),Fe);We(NB(),Fe);We(c4(),Fe);We(LB(),Fe);We(HB(),Fe);We(yS(),Fe);We(WB(),Fe);We(P1(),Fe);We(af(),Fe);We(KB(),Fe);We(YB(),Fe);We(QB(),Fe);We(Zl(),Fe);We(PI(),Fe);We(XB(),Fe);We(ed(),Fe);We(ma(),Fe);We(i$(),Fe);We(Co(),Fe);We(oo(),Fe);We(o$(),Fe);We(l4(),Fe);We(R1(),Fe);We(Ja(),Fe);We(m4(),Fe);We(Tp(),Fe);We(s$(),Fe);We(_4(),Fe);We(g4(),Fe);We(i4(),Fe);We(L1(),Fe);We(h4(),Fe);We(LI(),Fe);We(a$(),Fe);We(Sm(),Fe);We(c$(),Fe);We(v4(),Fe);We(l$(),Fe);We(u$(),Fe);We(Aot(),Fe);We(Iot(),Fe);We(O1(),Fe);We(u4(),Fe);We(sf(),Fe);We(h$(),Fe);We(ym(),Fe);We(f4(),Fe);We(d4(),Fe);We(Yi(),Fe);We(D1(),Fe);We(T4(),Fe);We(m$(),Fe);We(kot(),Fe)});var Uot=m(id=>{"use strict";var yOr=id&&id.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),EOr=id&&id.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),TOr=id&&id.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),o=0;o<n.length;o++)n[o]!=="default"&&yOr(r,e,n[o]);return EOr(r,e),r}})();Object.defineProperty(id,"__esModule",{value:!0});id.DidChangeAuthNotification=id.DidChangeAuthParams=void 0;var rc=S4(),SOr=TOr(cm());id.DidChangeAuthParams=rc.Type.Object({accessToken:rc.Type.Optional(rc.Type.String({minLength:1})),handle:rc.Type.Optional(rc.Type.String({minLength:1})),login:rc.Type.Optional(rc.Type.String({minLength:1})),githubAppId:rc.Type.Optional(rc.Type.String({minLength:1})),apiUrl:rc.Type.Optional(rc.Type.String({})),serverUrl:rc.Type.Optional(rc.Type.String({})),tokenEndpoint:rc.Type.Optional(rc.Type.String({}))});var Dot;(function(t){t.method="github/didChangeAuth",t.type=new SOr.ProtocolNotificationType(t.method)})(Dot||(id.DidChangeAuthNotification=Dot={}))});var Fot=m(xp=>{"use strict";var bOr=xp&&xp.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),COr=xp&&xp.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),AOr=xp&&xp.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),o=0;o<n.length;o++)n[o]!=="default"&&bOr(r,e,n[o]);return COr(r,e),r}})();Object.defineProperty(xp,"__esModule",{value:!0});xp.CopilotIPCodeCitationNotification=void 0;var xOr=AOr(cm()),qot;(function(t){t.method="copilot/ipCodeCitation",t.type=new xOr.NotificationType(t.method)})(qot||(xp.CopilotIPCodeCitationNotification=qot={}))});var Bot=m(jot=>{"use strict";Object.defineProperty(jot,"__esModule",{value:!0})});var Vot=m(Qn=>{"use strict";Object.defineProperty(Qn,"__esModule",{value:!0});Qn.RangeSchema=Qn.WorkspaceFolder=Qn.VersionedTextDocumentIdentifier=Qn.TextEdit=Qn.TextDocumentItem=Qn.Range=Qn.Position=Qn.DocumentUri=Qn.Disposable=Qn.Command=Qn.CancellationTokenSource=Qn.CancellationToken=void 0;var E$=S4(),df=cm();Object.defineProperty(Qn,"CancellationToken",{enumerable:!0,get:function(){return df.CancellationToken}});Object.defineProperty(Qn,"CancellationTokenSource",{enumerable:!0,get:function(){return df.CancellationTokenSource}});Object.defineProperty(Qn,"Command",{enumerable:!0,get:function(){return df.Command}});Object.defineProperty(Qn,"Disposable",{enumerable:!0,get:function(){return df.Disposable}});Object.defineProperty(Qn,"DocumentUri",{enumerable:!0,get:function(){return df.DocumentUri}});Object.defineProperty(Qn,"Position",{enumerable:!0,get:function(){return df.Position}});Object.defineProperty(Qn,"Range",{enumerable:!0,get:function(){return df.Range}});Object.defineProperty(Qn,"TextDocumentItem",{enumerable:!0,get:function(){return df.TextDocumentItem}});Object.defineProperty(Qn,"TextEdit",{enumerable:!0,get:function(){return df.TextEdit}});Object.defineProperty(Qn,"VersionedTextDocumentIdentifier",{enumerable:!0,get:function(){return df.VersionedTextDocumentIdentifier}});Object.defineProperty(Qn,"WorkspaceFolder",{enumerable:!0,get:function(){return df.WorkspaceFolder}});var $ot=E$.Type.Object({line:E$.Type.Integer({minimum:0}),character:E$.Type.Integer({minimum:0})});Qn.RangeSchema=E$.Type.Object({start:$ot,end:$ot})});var Got=m(Hot=>{"use strict";Object.defineProperty(Hot,"__esModule",{value:!0})});var T$=m(Li=>{"use strict";var wOr=Li&&Li.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),b4=Li&&Li.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&wOr(e,t,r)};Object.defineProperty(Li,"__esModule",{value:!0});Li.TextEdit=Li.Range=Li.Position=Li.Disposable=Li.CancellationTokenSource=Li.CancellationToken=void 0;var UI=cm();Object.defineProperty(Li,"CancellationToken",{enumerable:!0,get:function(){return UI.CancellationToken}});Object.defineProperty(Li,"CancellationTokenSource",{enumerable:!0,get:function(){return UI.CancellationTokenSource}});Object.defineProperty(Li,"Disposable",{enumerable:!0,get:function(){return UI.Disposable}});Object.defineProperty(Li,"Position",{enumerable:!0,get:function(){return UI.Position}});Object.defineProperty(Li,"Range",{enumerable:!0,get:function(){return UI.Range}});Object.defineProperty(Li,"TextEdit",{enumerable:!0,get:function(){return UI.TextEdit}});b4(Uot(),Li);b4(Fot(),Li);b4(Bot(),Li);b4(Vot(),Li);b4(Got(),Li)});var V0e=m(Jl=>{"use strict";var IOr=Jl&&Jl.__decorate||function(t,e,r,n){var o=arguments.length,s=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(o<3?a(s):o>3?a(e,r,s):a(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},zot=Jl&&Jl.__param||function(t,e){return function(r,n){e(r,n,t)}},POr=Jl&&Jl.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Jl,"__esModule",{value:!0});Jl.CompletionNotifier=Jl.ICompletionsNotifierService=void 0;var ROr=POr(require("events")),OOr=Qe(),MOr=RT(),NOr=T$(),LOr=Ps(),kOr=qN(),S$="CompletionRequested";Jl.ICompletionsNotifierService=(0,OOr.createServiceIdentifier)("ICompletionsNotifierService");var $0e=class{#e=new ROr.default;constructor(e,r){this.completionsPromiseQueue=e,this.completionsTelemetryService=r}notifyRequest(e,r,n,o,s){return this.#e.emit(S$,{completionId:r,completionState:e,telemetryData:n,cancellationToken:o,options:s})}onRequest(e){let r=(0,LOr.telemetryCatch)(this.completionsTelemetryService,this.completionsPromiseQueue,e,`event.${S$}`);return this.#e.on(S$,r),NOr.Disposable.create(()=>this.#e.off(S$,r))}};Jl.CompletionNotifier=$0e;Jl.CompletionNotifier=$0e=IOr([zot(0,kOr.ICompletionsPromiseQueueService),zot(1,MOr.ICompletionsTelemetryService)],$0e)});var H0e=m(b$=>{"use strict";Object.defineProperty(b$,"__esModule",{value:!0});b$.ICompletionsObservableWorkspace=void 0;var DOr=Nr();b$.ICompletionsObservableWorkspace=(0,DOr.createDecorator)("ICompletionsObservableWorkspace")});var An=m(ff=>{"use strict";Object.defineProperty(ff,"__esModule",{value:!0});ff.logger=ff.Logger=ff.ICompletionsLogTargetService=ff.LogLevel=void 0;var UOr=Qe(),qOr=RT(),FOr=Ps(),jS;(function(t){t[t.DEBUG=4]="DEBUG",t[t.INFO=3]="INFO",t[t.WARN=2]="WARN",t[t.ERROR=1]="ERROR"})(jS||(ff.LogLevel=jS={}));ff.ICompletionsLogTargetService=(0,UOr.createServiceIdentifier)("ICompletionsLogTargetService");var C$=class{constructor(e){this.category=e}log(e,r,...n){e.logIt(r,this.category,...n)}debug(e,...r){this.log(e,jS.DEBUG,...r)}info(e,...r){this.log(e,jS.INFO,...r)}warn(e,...r){this.log(e,jS.WARN,...r)}error(e,...r){this.log(e,jS.ERROR,...r)}exception(e,r,n){if(r instanceof Error&&r.name==="Canceled"&&r.message==="Canceled")return;let o=n;n.startsWith(".")&&(o=n.substring(1),n=`${this.category}${n}`),(0,FOr.telemetryException)(e.get(qOr.ICompletionsTelemetryService),r,n);let s=r instanceof Error?r:new Error(`Non-error thrown: ${String(r)}`);this.log(e.get(ff.ICompletionsLogTargetService),jS.ERROR,`${o}:`,s)}};ff.Logger=C$;ff.logger=new C$("default")});var Kot=m(j1=>{"use strict";Object.defineProperty(j1,"__esModule",{value:!0});j1.INotificationService=j1.NullNotificationService=j1.ProgressLocation=void 0;var jOr=Qe(),BOr=Oh(),Wot;(function(t){t[t.SourceControl=1]="SourceControl",t[t.Window=10]="Window",t[t.Notification=15]="Notification"})(Wot||(j1.ProgressLocation=Wot={}));var G0e=class{showInformationMessage(e,r,...n){return Promise.resolve(void 0)}showWarningMessage(e,...r){return Promise.resolve(void 0)}showQuotaExceededDialog(e){return Promise.resolve()}withProgress(e,r){return Promise.resolve(r({report:()=>{}},BOr.CancellationToken.None))}};j1.NullNotificationService=G0e;j1.INotificationService=(0,jOr.createServiceIdentifier)("INotificationService")});var W0e=m(pf=>{"use strict";var $Or=pf&&pf.__decorate||function(t,e,r,n){var o=arguments.length,s=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(o<3?a(s):o>3?a(e,r,s):a(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},VOr=pf&&pf.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(pf,"__esModule",{value:!0});pf.ExtensionNotificationSender=pf.ICompletionsNotificationSender=void 0;var HOr=Kot(),GOr=Qe();pf.ICompletionsNotificationSender=(0,GOr.createServiceIdentifier)("ICompletionsNotificationSender");var z0e=class{constructor(e){this.notificationService=e}async showWarningMessage(e,...r){let n=await this.notificationService.showWarningMessage(e,...r.map(o=>o.title));if(n!==void 0)return{title:n}}};pf.ExtensionNotificationSender=z0e;pf.ExtensionNotificationSender=z0e=$Or([VOr(0,HOr.INotificationService)],z0e)});var Q0e=m(hf=>{"use strict";var zOr=hf&&hf.__decorate||function(t,e,r,n){var o=arguments.length,s=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(o<3?a(s):o>3?a(e,r,s):a(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},K0e=hf&&hf.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(hf,"__esModule",{value:!0});hf.UserErrorNotifier=hf.ICompletionsUserErrorNotifierService=void 0;var WOr=Q0(),KOr=Qe(),YOr=Bi(),Zot=An(),QOr=W0e(),ZOr=["UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_SIGNATURE_FAILURE"],Yot="Your proxy connection requires a trusted certificate. Please make sure the proxy certificate and any issuers are configured correctly and trusted by your operating system.",Qot="https://gh.io/copilot-network-errors";hf.ICompletionsUserErrorNotifierService=(0,KOr.createServiceIdentifier)("ICompletionsUserErrorNotifierService");var Y0e=class{constructor(e,r,n){this._logTarget=e,this._notificationSender=r,this._env=n,this.notifiedErrorCodes=[]}notifyUser(e){if(!(e instanceof Error))return;let r=e;r.code&&ZOr.includes(r.code)&&!this.didNotifyBefore(r.code)&&(this.notifiedErrorCodes.push(r.code),this.displayCertificateErrorNotification(r))}async displayCertificateErrorNotification(e){new Zot.Logger("certificates").error(this._logTarget,`${Yot} Please visit ${Qot} to learn more. Original cause:`,e);let r={title:"Learn more"};return this._notificationSender.showWarningMessage(Yot,r).then(n=>{if(n?.title===r.title)return this._env.openExternal(YOr.URI.parse(Qot))})}didNotifyBefore(e){return this.notifiedErrorCodes.indexOf(e)!==-1}};hf.UserErrorNotifier=Y0e;hf.UserErrorNotifier=Y0e=zOr([K0e(0,Zot.ICompletionsLogTargetService),K0e(1,QOr.ICompletionsNotificationSender),K0e(2,WOr.IEnvService)],Y0e)});var Vo=m(qI=>{"use strict";Object.defineProperty(qI,"__esModule",{value:!0});qI.NullExperimentationService=qI.IExperimentationService=void 0;var JOr=Qe(),XOr=Fi();qI.IExperimentationService=(0,JOr.createServiceIdentifier)("IExperimentationService");var Z0e=class{constructor(){this._onDidTreatmentsChange=new XOr.Emitter,this.onDidTreatmentsChange=this._onDidTreatmentsChange.event}async hasTreatments(){return Promise.resolve()}async hasAccountBasedTreatments(){return Promise.resolve()}getTreatmentVariable(e){}async setCompletionsFilters(e){}};qI.NullExperimentationService=Z0e});var BS=m(el=>{"use strict";Object.defineProperty(el,"__esModule",{value:!0});el.DEFAULT_PROMPT_ALLOCATION_PERCENT=el.DEFAULT_SUFFIX_MATCH_THRESHOLD=el.DEFAULT_NUM_SNIPPETS=el.DEFAULT_MAX_PROMPT_LENGTH=el.DEFAULT_MAX_COMPLETION_LENGTH=void 0;el.normalizeLanguageId=t2r;el.DEFAULT_MAX_COMPLETION_LENGTH=500;el.DEFAULT_MAX_PROMPT_LENGTH=8192-el.DEFAULT_MAX_COMPLETION_LENGTH;el.DEFAULT_NUM_SNIPPETS=4;el.DEFAULT_SUFFIX_MATCH_THRESHOLD=10;el.DEFAULT_PROMPT_ALLOCATION_PERCENT={prefix:35,suffix:15,stableContext:35,volatileContext:15};var e2r={javascriptreact:"javascript",jsx:"javascript",typescriptreact:"typescript",jade:"pug",cshtml:"razor",c:"cpp"};function t2r(t){return t=t.toLowerCase(),e2r[t]??t}});var Jot=m(J0e=>{"use strict";Object.defineProperty(J0e,"__esModule",{value:!0});J0e.getUserKind=n2r;function r2r(t){return["a5db0bcaae94032fe715fb34a5e4bce2","7184f66dfcee98cb5f08a1cb936d5225","faef89d9169d5eacf1d8c8dde3412e37","4535c7beffc844b46bb1ed4aa04d759a"].find(r=>t.includes(r))}function n2r(t){let e=t.organizationList??[];return r2r(e)??""}});var A$=m(wp=>{"use strict";Object.defineProperty(wp,"__esModule",{value:!0});wp.IEndpointProvider=wp.ModelSupportedEndpoint=void 0;wp.isEndpointEditToolName=s2r;wp.isChatModelInformation=a2r;wp.isEmbeddingModelInformation=c2r;wp.isCompletionModelInformation=l2r;var i2r=Qe(),o2r=new Set(["find-replace","multi-find-replace","apply-patch","code-rewrite"]);function s2r(t){return o2r.has(t)}var Xot;(function(t){t.ChatCompletions="/chat/completions",t.Responses="/responses",t.Messages="/v1/messages"})(Xot||(wp.ModelSupportedEndpoint=Xot={}));function a2r(t){return t.capabilities.type==="chat"}function c2r(t){return t.capabilities.type==="embeddings"}function l2r(t){return t.capabilities.type==="completion"}wp.IEndpointProvider=(0,i2r.createServiceIdentifier)("IEndpointProvider")});var est=m(Pp=>{"use strict";Object.defineProperty(Pp,"__esModule",{value:!0});Pp.bytePairEncode=Pp.BinaryMap=Pp.binaryMapKey=void 0;var u2r=(t,e,r)=>{let n=r-e,o=16777215>>>Math.max(0,(3-n)*8),s=(t[e+0]|t[e+1]<<8|t[e+2]<<16)&o,a=16777215>>>Math.min(31,Math.max(0,(6-n)*8)),c=(t[e+3]|t[e+4]<<8|t[e+5]<<16)&a;return s+16777216*c};Pp.binaryMapKey=u2r;var X0e=class t{constructor(){this.nested=new Map,this.final=new Map}get(e,r=0,n=e.length){let o=n<6+r,s=(0,Pp.binaryMapKey)(e,r,n);return o?this.final.get(s):this.nested.get(s)?.get(e,6+r,n)}set(e,r){let n=(0,Pp.binaryMapKey)(e,0,e.length);if(e.length<6){this.final.set(n,r);return}let s=this.nested.get(n);if(s instanceof t)s.set(e.subarray(6),r);else{let a=new t;a.set(e.subarray(6),r),this.nested.set(n,a)}}};Pp.BinaryMap=X0e;var Ip=new Int32Array(128),nc=new Int32Array(128);function d2r(t,e,r){if(r===1)return[e.get(t)];let n=2147483647,o=-1;for(;Ip.length<r*2;)nc=new Int32Array(nc.length*2),Ip=new Int32Array(Ip.length*2);for(let l=0;l<r-1;l++){let u=e.get(t,l,l+2)??2147483647;u<n&&(n=u,o=l),nc[l]=l,Ip[l]=u}nc[r-1]=r-1,Ip[r-1]=2147483647,nc[r]=r,Ip[r]=2147483647;let s=r+1;function a(l,u=0){if(l+u+2<s){let d=e.get(t,nc[l],nc[l+u+2]);if(d!==void 0)return d}return 2147483647}for(;n!==2147483647;){Ip[nc[o]]=a(o,1),o>0&&(Ip[nc[o-1]]=a(o-1,1));for(let l=o+1;l<s-1;l++)nc[l]=nc[l+1];s--,o=-1,n=2147483647;for(let l=0;l<s-1;l++){let u=Ip[nc[l]];Ip[nc[l]]<n&&(n=u,o=l)}}let c=[];for(let l=0;l<s-1;l++)c.push(e.get(t,nc[l],nc[l+1]));return c}Pp.bytePairEncode=d2r});var tst=m(x$=>{"use strict";Object.defineProperty(x$,"__esModule",{value:!0});x$.makeTextEncoder=void 0;var epe=class{constructor(){this.length=0,this.encoder=new TextEncoder}encode(e){let r=this.encoder.encode(e);return this.length=r.length,r}},tpe=class{constructor(){this.buffer=Buffer.alloc(256),this.length=0}encode(e){for(;;){if(this.length=this.buffer.write(e,"utf8"),this.length<this.buffer.length-4)return this.buffer;this.buffer=Buffer.alloc(this.length*2),this.length=this.buffer.write(e)}}},f2r=()=>typeof Buffer<"u"?new tpe:new epe;x$.makeTextEncoder=f2r});var rst=m(w$=>{"use strict";Object.defineProperty(w$,"__esModule",{value:!0});w$.LRUCache=void 0;var rpe=class{constructor(e){this.size=e,this.nodes=new Map}get(e){let r=this.nodes.get(e);if(r)return this.moveToHead(r),r.value}set(e,r){let n=this.nodes.get(e);if(n)n.value=r,this.moveToHead(n);else{let o=new npe(e,r);this.nodes.set(e,o),this.addNode(o),this.nodes.size>this.size&&(this.nodes.delete(this.tail.key),this.removeNode(this.tail))}}moveToHead(e){this.removeNode(e),e.next=void 0,e.prev=void 0,this.addNode(e)}addNode(e){this.head&&(this.head.prev=e,e.next=this.head),this.tail||(this.tail=e),this.head=e}removeNode(e){e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev}};w$.LRUCache=rpe;var npe=class{constructor(e,r){this.key=e,this.value=r}}});var ope=m(P$=>{"use strict";Object.defineProperty(P$,"__esModule",{value:!0});P$.TikTokenizer=void 0;var I$=est(),p2r=tst(),h2r=rst();function m2r(t){let e=new Map;try{let o=require("fs").readFileSync(t,"utf-8");return r(o),e}catch(n){throw new Error(`Failed to load from BPE encoder file stream: ${n}`)}function r(n){for(let o of n.split(/[\r\n]+/)){if(o.trim()==="")continue;let s=o.split(" ");if(s.length!==2)throw new Error("Invalid format in the BPE encoder file stream");let a=new Uint8Array(Buffer.from(s[0],"base64")),c=parseInt(s[1]);if(!isNaN(c))e.set(a,c);else throw new Error(`Can't parse ${s[1]} to integer`)}}}function g2r(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var ipe=class{constructor(e,r,n,o=8192){this.textEncoder=(0,p2r.makeTextEncoder)(),this.textDecoder=new TextDecoder("utf-8"),this.cache=new h2r.LRUCache(o);let s=typeof e=="string"?m2r(e):e;this.init(s,r,n)}init(e,r,n){this.encoder=new I$.BinaryMap;for(let[o,s]of e)this.encoder.set(o,s);this.regex=new RegExp(n,"gu"),this.specialTokensRegex=new RegExp(Array.from(r.keys()).map(o=>g2r(o)).join("|")),this.specialTokensEncoder=r,this.decoder=new Map;for(let[o,s]of e)this.decoder.set(s,o);if(e.size!==this.decoder.size)throw new Error("Encoder and decoder sizes do not match");this.specialTokensDecoder=new Map;for(let[o,s]of r)this.specialTokensDecoder.set(s,o)}findNextSpecialToken(e,r,n){let o=r,s=null;if(n&&this.specialTokensRegex)for(;s=e.slice(o).match(this.specialTokensRegex),!(!s||n&&n.includes(s[0]));)o+=s.index+1;let a=s?o+s.index:e.length;return[s,a]}encode(e,r){let n=[],o=0;for(;;){let s,a;if([s,a]=this.findNextSpecialToken(e,o,r),a>o&&this.encodeByIndex(e,n,o,a),s){if(o=o+this.encodeSpecialToken(n,s),o>=e.length)break}else break}return n}encodeSpecialToken(e,r){let n=this.specialTokensEncoder?.get(r[0]);return e.push(n),r.index+r[0].length}encodeByIndex(e,r,n,o){let s,a=e.substring(n,o);for(this.regex.lastIndex=0;s=this.regex.exec(a);){let c=this.cache.get(s[0]);if(c)for(let l of c)r.push(l);else{let l=this.textEncoder.encode(s[0]),u=this.encoder.get(l,0,this.textEncoder.length);if(u!==void 0)r.push(u),this.cache.set(s[0],[u]);else{let d=(0,I$.bytePairEncode)(l,this.encoder,this.textEncoder.length);for(let f of d)r.push(f);this.cache.set(s[0],d)}}}}encodeTrimSuffixByIndex(e,r,n,o,s,a,c){let l,u=e.substring(n,o);for(this.regex.lastIndex=0;l=this.regex.exec(u);){let d=l[0],f=this.cache.get(d);if(f)if(a+f.length<=s)a+=f.length,c+=d.length,r.push(...f);else{let p=s-a;a+=p,c+=d.length,r.push(...f.slice(0,p));break}else{let p=this.textEncoder.encode(d),h=this.encoder.get(p,0,p.length);if(h!==void 0)if(this.cache.set(d,[h]),a+1<=s)a++,c+=d.length,r.push(h);else break;else{let _=(0,I$.bytePairEncode)(p,this.encoder,this.textEncoder.length);if(this.cache.set(d,_),a+_.length<=s){a+=_.length,c+=d.length;for(let g of _)r.push(g)}else{let g=s-a;a+=g,c+=d.length;for(let v=0;v<g;v++)r.push(_[v]);break}}}if(a>=s)break}return{tokenCount:a,encodeLength:c}}encodeTrimSuffix(e,r,n){let o=[],s=0,a=0,c=0;for(;;){let u,d;if([u,d]=this.findNextSpecialToken(e,s,n),d>s){let{tokenCount:f,encodeLength:p}=this.encodeTrimSuffixByIndex(e,o,s,d,r,a,c);if(a=f,c=p,a>=r)break}if(u!==null){if(a++,a<=r&&(s=s+this.encodeSpecialToken(o,u),c+=u[0].length,s>=e.length)||a>=r)break}else break}let l=c===e.length?e:e.slice(0,c);return{tokenIds:o,text:l}}encodeTrimPrefix(e,r,n){let o=[],s=0,a=0,c=0,l=new Map;for(l.set(a,c);;){let p,h;if([p,h]=this.findNextSpecialToken(e,s,n),h>s){let _,g=e.substring(s,h);for(this.regex.lastIndex=0;_=this.regex.exec(g);){let v=_[0],E=this.cache.get(v);if(E)a+=E.length,c+=v.length,o.push(...E),l.set(a,c);else{let y=this.textEncoder.encode(v),S=this.encoder.get(y);if(S!==void 0)this.cache.set(v,[S]),a++,c+=v.length,o.push(S),l.set(a,c);else{let b=(0,I$.bytePairEncode)(y,this.encoder,this.textEncoder.length);this.cache.set(v,b),a+=b.length,c+=v.length;for(let w of b)o.push(w);l.set(a,c)}}}}if(p!==null){if(s=s+this.encodeSpecialToken(o,p),a++,c+=p[0].length,l.set(a,c),s>=e.length)break}else break}if(a<=r)return{tokenIds:o,text:e};let u=a-r,d=0,f=0;for(let[p,h]of l)if(p>=u){d=p,f=h;break}if(d>r){let p=this.encode(e,n),h=p.slice(p.length-r);return{tokenIds:h,text:this.decode(h)}}return{tokenIds:o.slice(d),text:e.slice(f)}}decode(e){let r=[];for(let n of e){let o=[],s=this.decoder?.get(n);if(s!==void 0)o=Array.from(s);else{let a=this.specialTokensDecoder?.get(n);if(a!==void 0){let c=this.textEncoder.encode(a);o=Array.from(c.subarray(0,this.textEncoder.length))}}r.push(...o)}return this.textDecoder.decode(new Uint8Array(r))}};P$.TikTokenizer=ipe});var fst=m(wo=>{"use strict";Object.defineProperty(wo,"__esModule",{value:!0});wo.createTokenizer=wo.createByEncoderName=wo.createByModelName=wo.getRegexByModel=wo.getRegexByEncoder=wo.getSpecialTokensByModel=wo.getSpecialTokensByEncoder=wo.MODEL_TO_ENCODING=void 0;var _2r=ope(),v2r=new Map([["gpt-4o-","o200k_base"],["gpt-4-","cl100k_base"],["gpt-3.5-turbo-","cl100k_base"],["gpt-35-turbo-","cl100k_base"]]);wo.MODEL_TO_ENCODING=new Map([["gpt-4o","o200k_base"],["gpt-4","cl100k_base"],["gpt-3.5-turbo","cl100k_base"],["text-davinci-003","p50k_base"],["text-davinci-002","p50k_base"],["text-davinci-001","r50k_base"],["text-curie-001","r50k_base"],["text-babbage-001","r50k_base"],["text-ada-001","r50k_base"],["davinci","r50k_base"],["curie","r50k_base"],["babbage","r50k_base"],["ada","r50k_base"],["code-davinci-002","p50k_base"],["code-davinci-001","p50k_base"],["code-cushman-002","p50k_base"],["code-cushman-001","p50k_base"],["davinci-codex","p50k_base"],["cushman-codex","p50k_base"],["text-davinci-edit-001","p50k_edit"],["code-davinci-edit-001","p50k_edit"],["text-embedding-ada-002","cl100k_base"],["text-similarity-davinci-001","r50k_base"],["text-similarity-curie-001","r50k_base"],["text-similarity-babbage-001","r50k_base"],["text-similarity-ada-001","r50k_base"],["text-search-davinci-doc-001","r50k_base"],["text-search-curie-doc-001","r50k_base"],["text-search-babbage-doc-001","r50k_base"],["text-search-ada-doc-001","r50k_base"],["code-search-babbage-code-001","r50k_base"],["code-search-ada-code-001","r50k_base"],["gpt2","gpt2"]]);var R$="<|endoftext|>",nst="<|fim_prefix|>",ist="<|fim_middle|>",ost="<|fim_suffix|>",sst="<|endofprompt|>",C4="'s|'t|'re|'ve|'m|'ll|'d| ?\\p{L}+| ?\\p{N}+| ?[^\\s\\p{L}\\p{N}]+|\\s+(?!\\S)|\\s+",ast="(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)|[^\\r\\n\\p{L}\\p{N}]?\\p{L}+|\\p{N}{1,3}| ?[^\\s\\p{L}\\p{N}]+[\\r\\n]*|\\s*[\\r\\n]+|\\s+(?!\\S)|\\s+",y2r=[`[^\r
\\p{L}\\p{N}]?[\\p{Lu}\\p{Lt}\\p{Lm}\\p{Lo}\\p{M}]*[\\p{Ll}\\p{Lm}\\p{Lo}\\p{M}]+(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)?`,`[^\r
\\p{L}\\p{N}]?[\\p{Lu}\\p{Lt}\\p{Lm}\\p{Lo}\\p{M}]+[\\p{Ll}\\p{Lm}\\p{Lo}\\p{M}]*(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)?`,"\\p{N}{1,3}"," ?[^\\s\\p{L}\\p{N}]+[\\r\\n/]*","\\s*[\\r\\n]+","\\s+(?!\\S)","\\s+"],cst=y2r.join("|");function spe(t){let e="";if(wo.MODEL_TO_ENCODING.has(t))e=wo.MODEL_TO_ENCODING.get(t);else for(let[r,n]of v2r)if(t.startsWith(r)){e=n;break}return e}async function E2r(t,e){let r=require("fs"),n=await fetch(t);if(!n.ok)throw new Error(`Failed to fetch file from ${t}. Status code: ${n.status}`);let o=await n.text();r.writeFileSync(e,o)}function ape(t){let e=new Map([[R$,50256]]);switch(t){case"o200k_base":e=new Map([[R$,199999],[sst,200018]]);break;case"cl100k_base":e=new Map([[R$,100257],[nst,100258],[ist,100259],[ost,100260],[sst,100276]]);break;case"p50k_edit":e=new Map([[R$,50256],[nst,50281],[ist,50282],[ost,50283]]);break;default:break}return e}wo.getSpecialTokensByEncoder=ape;function T2r(t){let e=spe(t);return ape(e)}wo.getSpecialTokensByModel=T2r;function lst(t){switch(t){case"o200k_base":return cst;case"cl100k_base":return ast;default:break}return C4}wo.getRegexByEncoder=lst;function S2r(t){let e=spe(t);return lst(e)}wo.getRegexByModel=S2r;async function b2r(t,e=null){return ust(spe(t),e)}wo.createByModelName=b2r;async function ust(t,e=null){let r,n,o=ape(t);switch(t){case"o200k_base":r=cst,n="https://openaipublic.blob.core.windows.net/encodings/o200k_base.tiktoken";break;case"cl100k_base":r=ast,n="https://openaipublic.blob.core.windows.net/encodings/cl100k_base.tiktoken";break;case"p50k_base":r=C4,n="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"p50k_edit":r=C4,n="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"r50k_base":r=C4,n="https://openaipublic.blob.core.windows.net/encodings/r50k_base.tiktoken";break;case"gpt2":r=C4,n="https://raw.githubusercontent.com/microsoft/Tokenizer/main/model/gpt2.tiktoken";break;default:throw new Error(`Doesn't support this encoder [${t}]`)}e!==null&&(o=new Map([...o,...e]));let s=require("fs"),a=require("path"),c=a.basename(n),l=a.resolve(__dirname,"..","model");s.existsSync(l)||s.mkdirSync(l,{recursive:!0});let u=a.resolve(l,c);return s.existsSync(u)||(console.log(`Downloading file from ${n}`),await E2r(n,u),console.log(`Saved file to ${u}`)),dst(u,o,r)}wo.createByEncoderName=ust;function dst(t,e,r,n=8192){return new _2r.TikTokenizer(t,e,r,n)}wo.createTokenizer=dst});var O$=m(Io=>{"use strict";Object.defineProperty(Io,"__esModule",{value:!0});Io.createTokenizer=Io.createByEncoderName=Io.createByModelName=Io.getSpecialTokensByModel=Io.getSpecialTokensByEncoder=Io.getRegexByModel=Io.getRegexByEncoder=Io.MODEL_TO_ENCODING=Io.TikTokenizer=void 0;var C2r=ope();Object.defineProperty(Io,"TikTokenizer",{enumerable:!0,get:function(){return C2r.TikTokenizer}});var B1=fst();Object.defineProperty(Io,"MODEL_TO_ENCODING",{enumerable:!0,get:function(){return B1.MODEL_TO_ENCODING}});Object.defineProperty(Io,"getRegexByEncoder",{enumerable:!0,get:function(){return B1.getRegexByEncoder}});Object.defineProperty(Io,"getRegexByModel",{enumerable:!0,get:function(){return B1.getRegexByModel}});Object.defineProperty(Io,"getSpecialTokensByEncoder",{enumerable:!0,get:function(){return B1.getSpecialTokensByEncoder}});Object.defineProperty(Io,"getSpecialTokensByModel",{enumerable:!0,get:function(){return B1.getSpecialTokensByModel}});Object.defineProperty(Io,"createByModelName",{enumerable:!0,get:function(){return B1.createByModelName}});Object.defineProperty(Io,"createByEncoderName",{enumerable:!0,get:function(){return B1.createByEncoderName}});Object.defineProperty(Io,"createTokenizer",{enumerable:!0,get:function(){return B1.createTokenizer}})});var hst=m(Ls=>{"use strict";Object.defineProperty(Ls,"__esModule",{value:!0});Ls.isReadable=x2r;Ls.isReadableStream=pst;Ls.isReadableBufferedStream=w2r;Ls.newWriteableStream=A4;Ls.consumeReadable=I2r;Ls.peekReadable=P2r;Ls.consumeStream=R2r;Ls.listenStream=N$;Ls.peekStream=O2r;Ls.toStream=M2r;Ls.emptyStream=N2r;Ls.toReadable=L2r;Ls.transform=k2r;Ls.prefixedReadable=D2r;Ls.prefixedStream=U2r;var A2r=Gr(),M$=Ar();function x2r(t){let e=t;return e?typeof e.read=="function":!1}function pst(t){let e=t;return e?[e.on,e.pause,e.resume,e.destroy].every(r=>typeof r=="function"):!1}function w2r(t){let e=t;return e?pst(e.stream)&&Array.isArray(e.buffer)&&typeof e.ended=="boolean":!1}function A4(t,e){return new cpe(t,e)}var cpe=class{constructor(e,r){this.reducer=e,this.options=r,this.state={flowing:!1,ended:!1,destroyed:!1},this.buffer={data:[],error:[]},this.listeners={data:[],error:[],end:[]},this.pendingWritePromises=[]}pause(){this.state.destroyed||(this.state.flowing=!1)}resume(){this.state.destroyed||this.state.flowing||(this.state.flowing=!0,this.flowData(),this.flowErrors(),this.flowEnd())}write(e){if(!this.state.destroyed){if(this.state.flowing)this.emitData(e);else if(this.buffer.data.push(e),typeof this.options?.highWaterMark=="number"&&this.buffer.data.length>this.options.highWaterMark)return new Promise(r=>this.pendingWritePromises.push(r))}}error(e){this.state.destroyed||(this.state.flowing?this.emitError(e):this.buffer.error.push(e))}end(e){this.state.destroyed||(typeof e<"u"&&this.write(e),this.state.flowing?(this.emitEnd(),this.destroy()):this.state.ended=!0)}emitData(e){this.listeners.data.slice(0).forEach(r=>r(e))}emitError(e){this.listeners.error.length===0?(0,A2r.onUnexpectedError)(e):this.listeners.error.slice(0).forEach(r=>r(e))}emitEnd(){this.listeners.end.slice(0).forEach(e=>e())}on(e,r){if(!this.state.destroyed)switch(e){case"data":this.listeners.data.push(r),this.resume();break;case"end":this.listeners.end.push(r),this.state.flowing&&this.flowEnd()&&this.destroy();break;case"error":this.listeners.error.push(r),this.state.flowing&&this.flowErrors();break}}removeListener(e,r){if(this.state.destroyed)return;let n;switch(e){case"data":n=this.listeners.data;break;case"end":n=this.listeners.end;break;case"error":n=this.listeners.error;break}if(n){let o=n.indexOf(r);o>=0&&n.splice(o,1)}}flowData(){if(this.buffer.data.length===0)return;if(typeof this.reducer=="function"){let r=this.reducer(this.buffer.data);this.emitData(r)}else for(let r of this.buffer.data)this.emitData(r);this.buffer.data.length=0;let e=[...this.pendingWritePromises];this.pendingWritePromises.length=0,e.forEach(r=>r())}flowErrors(){if(this.listeners.error.length>0){for(let e of this.buffer.error)this.emitError(e);this.buffer.error.length=0}}flowEnd(){return this.state.ended?(this.emitEnd(),this.listeners.end.length>0):!1}destroy(){this.state.destroyed||(this.state.destroyed=!0,this.state.ended=!0,this.buffer.data.length=0,this.buffer.error.length=0,this.listeners.data.length=0,this.listeners.error.length=0,this.listeners.end.length=0,this.pendingWritePromises.length=0)}};function I2r(t,e){let r=[],n;for(;(n=t.read())!==null;)r.push(n);return e(r)}function P2r(t,e,r){let n=[],o;for(;(o=t.read())!==null&&n.length<r;)n.push(o);return o===null&&n.length>0?e(n):{read:()=>{if(n.length>0)return n.shift();if(typeof o<"u"){let s=o;return o=void 0,s}return t.read()}}}function R2r(t,e){return new Promise((r,n)=>{let o=[];N$(t,{onData:s=>{e&&o.push(s)},onError:s=>{e?n(s):r(void 0)},onEnd:()=>{r(e?e(o):void 0)}})})}function N$(t,e,r){t.on("error",n=>{r?.isCancellationRequested||e.onError(n)}),t.on("end",()=>{r?.isCancellationRequested||e.onEnd()}),t.on("data",n=>{r?.isCancellationRequested||e.onData(n)})}function O2r(t,e){return new Promise((r,n)=>{let o=new M$.DisposableStore,s=[],a=u=>{if(s.push(u),s.length>e)return o.dispose(),t.pause(),r({stream:t,buffer:s,ended:!1})},c=u=>(o.dispose(),n(u)),l=()=>(o.dispose(),r({stream:t,buffer:s,ended:!0}));o.add((0,M$.toDisposable)(()=>t.removeListener("error",c))),t.on("error",c),o.add((0,M$.toDisposable)(()=>t.removeListener("end",l))),t.on("end",l),o.add((0,M$.toDisposable)(()=>t.removeListener("data",a))),t.on("data",a)})}function M2r(t,e){let r=A4(e);return r.end(t),r}function N2r(){let t=A4(()=>{throw new Error("not supported")});return t.end(),t}function L2r(t){let e=!1;return{read:()=>e?null:(e=!0,t)}}function k2r(t,e,r){let n=A4(r);return N$(t,{onData:o=>n.write(e.data(o)),onError:o=>n.error(e.error?e.error(o):o),onEnd:()=>n.end()}),n}function D2r(t,e,r){let n=!1;return{read:()=>{let o=e.read();return n?o:(n=!0,o!==null?r([t,o]):t)}}}function U2r(t,e,r){let n=!1,o=A4(r);return N$(e,{onData:s=>n?o.write(s):(n=!0,o.write(r([t,s]))),onError:s=>o.error(s),onEnd:()=>{n||(n=!0,o.write(t)),o.end()}}),o}});var V1=m(ln=>{"use strict";var q2r=ln&&ln.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),F2r=ln&&ln.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),j2r=ln&&ln.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),o=0;o<n.length;o++)n[o]!=="default"&&q2r(r,e,n[o]);return F2r(r,e),r}})();Object.defineProperty(ln,"__esModule",{value:!0});ln.VSBuffer=void 0;ln.binaryIndexOf=_st;ln.readUInt16LE=V2r;ln.writeUInt16LE=H2r;ln.readUInt32BE=vst;ln.writeUInt32BE=yst;ln.readUInt32LE=Est;ln.writeUInt32LE=Tst;ln.readUInt8=Sst;ln.writeUInt8=bst;ln.readableToBuffer=G2r;ln.bufferToReadable=z2r;ln.streamToBuffer=Cst;ln.bufferedStreamToBuffer=W2r;ln.bufferToStream=K2r;ln.streamToBufferReadableStream=Y2r;ln.newWriteableBufferStream=Q2r;ln.prefixedBufferReadable=Z2r;ln.prefixedBufferStream=J2r;ln.decodeBase64=X2r;ln.encodeBase64=r5r;ln.encodeHex=n5r;ln.decodeHex=i5r;var B2r=nE(),$1=j2r(hst()),x4=typeof Buffer<"u",$2r=new B2r.Lazy(()=>new Uint8Array(256)),lpe,upe,_a=class t{static alloc(e){return x4?new t(Buffer.allocUnsafe(e)):new t(new Uint8Array(e))}static wrap(e){return x4&&!Buffer.isBuffer(e)&&(e=Buffer.from(e.buffer,e.byteOffset,e.byteLength)),new t(e)}static fromString(e,r){return!(r?.dontUseNodeBuffer||!1)&&x4?new t(Buffer.from(e)):(lpe||(lpe=new TextEncoder),new t(lpe.encode(e)))}static fromByteArray(e){let r=t.alloc(e.length);for(let n=0,o=e.length;n<o;n++)r.buffer[n]=e[n];return r}static concat(e,r){if(typeof r>"u"){r=0;for(let s=0,a=e.length;s<a;s++)r+=e[s].byteLength}let n=t.alloc(r),o=0;for(let s=0,a=e.length;s<a;s++){let c=e[s];n.set(c,o),o+=c.byteLength}return n}static isNativeBuffer(e){return x4&&Buffer.isBuffer(e)}constructor(e){this.buffer=e,this.byteLength=this.buffer.byteLength}clone(){let e=t.alloc(this.byteLength);return e.set(this),e}toString(){return x4?this.buffer.toString():(upe||(upe=new TextDecoder),upe.decode(this.buffer))}slice(e,r){return new t(this.buffer.subarray(e,r))}set(e,r){if(e instanceof t)this.buffer.set(e.buffer,r);else if(e instanceof Uint8Array)this.buffer.set(e,r);else if(e instanceof ArrayBuffer)this.buffer.set(new Uint8Array(e),r);else if(ArrayBuffer.isView(e))this.buffer.set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),r);else throw new Error("Unknown argument 'array'")}readUInt32BE(e){return vst(this.buffer,e)}writeUInt32BE(e,r){yst(this.buffer,e,r)}readUInt32LE(e){return Est(this.buffer,e)}writeUInt32LE(e,r){Tst(this.buffer,e,r)}readUInt8(e){return Sst(this.buffer,e)}writeUInt8(e,r){bst(this.buffer,e,r)}indexOf(e,r=0){return _st(this.buffer,e instanceof t?e.buffer:e,r)}equals(e){return this===e?!0:this.byteLength!==e.byteLength?!1:this.buffer.every((r,n)=>r===e.buffer[n])}};ln.VSBuffer=_a;function _st(t,e,r=0){let n=e.byteLength,o=t.byteLength;if(n===0)return 0;if(n===1)return t.indexOf(e[0]);if(n>o-r)return-1;let s=$2r.value;s.fill(e.length);for(let u=0;u<e.length;u++)s[e[u]]=e.length-u-1;let a=r+e.length-1,c=a,l=-1;for(;a<o;)if(t[a]===e[c]){if(c===0){l=a;break}a--,c--}else a+=Math.max(e.length-c,s[t[a]]),c=e.length-1;return l}function V2r(t,e){return t[e+0]<<0>>>0|t[e+1]<<8>>>0}function H2r(t,e,r){t[r+0]=e&255,e=e>>>8,t[r+1]=e&255}function vst(t,e){return t[e]*2**24+t[e+1]*2**16+t[e+2]*2**8+t[e+3]}function yst(t,e,r){t[r+3]=e,e=e>>>8,t[r+2]=e,e=e>>>8,t[r+1]=e,e=e>>>8,t[r]=e}function Est(t,e){return t[e+0]<<0>>>0|t[e+1]<<8>>>0|t[e+2]<<16>>>0|t[e+3]<<24>>>0}function Tst(t,e,r){t[r+0]=e&255,e=e>>>8,t[r+1]=e&255,e=e>>>8,t[r+2]=e&255,e=e>>>8,t[r+3]=e&255}function Sst(t,e){return t[e]}function bst(t,e,r){t[r]=e}function G2r(t){return $1.consumeReadable(t,e=>_a.concat(e))}function z2r(t){return $1.toReadable(t)}function Cst(t){return $1.consumeStream(t,e=>_a.concat(e))}async function W2r(t){return t.ended?_a.concat(t.buffer):_a.concat([...t.buffer,await Cst(t.stream)])}function K2r(t){return $1.toStream(t,e=>_a.concat(e))}function Y2r(t){return $1.transform(t,{data:e=>typeof e=="string"?_a.fromString(e):_a.wrap(e)},e=>_a.concat(e))}function Q2r(t){return $1.newWriteableStream(e=>_a.concat(e),t)}function Z2r(t,e){return $1.prefixedReadable(t,e,r=>_a.concat(r))}function J2r(t,e){return $1.prefixedStream(t,e,r=>_a.concat(r))}function X2r(t){let e=0,r=0,n=0,o=new Uint8Array(Math.floor(t.length/4*3)),s=c=>{switch(r){case 3:o[n++]=e|c,r=0;break;case 2:o[n++]=e|c>>>2,e=c<<6,r=3;break;case 1:o[n++]=e|c>>>4,e=c<<4,r=2;break;default:e=c<<2,r=1}};for(let c=0;c<t.length;c++){let l=t.charCodeAt(c);if(l>=65&&l<=90)s(l-65);else if(l>=97&&l<=122)s(l-97+26);else if(l>=48&&l<=57)s(l-48+52);else if(l===43||l===45)s(62);else if(l===47||l===95)s(63);else{if(l===61)break;throw new SyntaxError(`Unexpected base64 character ${t[c]}`)}}let a=n;for(;r>0;)s(0);return _a.wrap(o).slice(0,a)}var e5r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t5r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";function r5r({buffer:t},e=!0,r=!1){let n=r?t5r:e5r,o="",s=t.byteLength%3,a=0;for(;a<t.byteLength-s;a+=3){let c=t[a+0],l=t[a+1],u=t[a+2];o+=n[c>>>2],o+=n[(c<<4|l>>>4)&63],o+=n[(l<<2|u>>>6)&63],o+=n[u&63]}if(s===1){let c=t[a+0];o+=n[c>>>2],o+=n[c<<4&63],e&&(o+="==")}else if(s===2){let c=t[a+0],l=t[a+1];o+=n[c>>>2],o+=n[(c<<4|l>>>4)&63],o+=n[l<<2&63],e&&(o+="=")}return o}var mst="0123456789abcdef";function n5r({buffer:t}){let e="";for(let r=0;r<t.length;r++){let n=t[r];e+=mst[n>>>4],e+=mst[n&15]}return e}function i5r(t){if(t.length%2!==0)throw new SyntaxError("Hex string must have an even length");let e=new Uint8Array(t.length>>1);for(let r=0;r<t.length;)e[r>>1]=gst(t,r++)<<4|gst(t,r++);return _a.wrap(e)}function gst(t,e){let r=t.charCodeAt(e);if(r>=48&&r<=57)return r-48;if(r>=97&&r<=102)return r-87;if(r>=65&&r<=70)return r-55;throw new SyntaxError(`Invalid hex character at position ${e}`)}});var Ast=m(L$=>{"use strict";Object.defineProperty(L$,"__esModule",{value:!0});L$.readVariableLengthQuantity=s5r;L$.writeVariableLengthQuantity=a5r;var o5r=V1();function s5r(t,e){let r=0,n=0,o;do o=t.readUInt8(e+n),r|=(o&127)<<n*7,n++;while(o&128);return{value:r,consumed:n}}function a5r(t){if(t!==(t|0))throw new Error(`${t} is not an int32.`);let e=[];do{let r=t&127;t>>>=7,t!==0&&(r|=128),e.push(r)}while(t!==0);return o5r.VSBuffer.fromByteArray(e)}});var dpe=m(k$=>{"use strict";Object.defineProperty(k$,"__esModule",{value:!0});k$.parseTikTokenBinary=void 0;var c5r=require("fs"),l5r=Ast(),u5r=V1(),d5r=t=>{let e=(0,c5r.readFileSync)(t),r=new Map;for(let n=0;n<e.length;){let o=(0,l5r.readVariableLengthQuantity)(u5r.VSBuffer.wrap(e),n);n+=o.consumed,r.set(e.subarray(n,n+o.value),r.size),n+=o.value}return r};k$.parseTikTokenBinary=d5r});var ppe=m(D$=>{"use strict";Object.defineProperty(D$,"__esModule",{value:!0});D$.CopilotPromptLoadFailure=void 0;var fpe=class extends Error{constructor(e,r){super(e,{cause:r}),this.code="CopilotPromptLoadFailure"}};D$.CopilotPromptLoadFailure=fpe});var hpe=m(od=>{"use strict";var f5r=od&&od.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),p5r=od&&od.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),h5r=od&&od.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),o=0;o<n.length;o++)n[o]!=="default"&&f5r(r,e,n[o]);return p5r(r,e),r}})(),m5r=od&&od.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(od,"__esModule",{value:!0});od.readFile=_5r;od.locateFile=wst;var g5r=h5r(require("node:fs/promises")),$S=m5r(require("node:path"));async function _5r(t){return await g5r.readFile(wst(t))}function wst(t){return $S.default.resolve($S.default.extname(__filename)===".ts"?$S.default.join(xst($S.default.dirname(__dirname),"src"),"..","dist"):xst(__dirname,"dist"),t)}function xst(t,e){let r=t;for(;$S.default.basename(r)!==e;){if($S.default.dirname(r)===r)return t;r=$S.default.dirname(r)}return r}});var Pst=m(mf=>{"use strict";Object.defineProperty(mf,"__esModule",{value:!0});mf.initializeTokenizers=mf.ApproximateTokenizer=mf.TTokenizer=mf.TokenizerName=void 0;mf.getTokenizer=T5r;var mpe=O$(),v5r=dpe(),y5r=ppe(),E5r=hpe(),Rp;(function(t){t.cl100k="cl100k_base",t.o200k="o200k_base",t.mock="mock"})(Rp||(mf.TokenizerName=Rp={}));var U$=new Map;function T5r(t=Rp.o200k){let e=U$.get(t);return e!==void 0||(e=U$.get(Rp.o200k),e!==void 0)?e:new F$}var q$=class t{constructor(e){this._tokenizer=e}static async create(e){try{let r=(0,mpe.createTokenizer)((0,v5r.parseTikTokenBinary)((0,E5r.locateFile)(`${e}.tiktoken`)),(0,mpe.getSpecialTokensByEncoder)(e),(0,mpe.getRegexByEncoder)(e),32768);return new t(r)}catch(r){throw r instanceof Error?new y5r.CopilotPromptLoadFailure("Could not load tokenizer",r):r}}tokenize(e){return this._tokenizer.encode(e)}detokenize(e){return this._tokenizer.decode(e)}tokenLength(e){return this.tokenize(e).length}tokenizeStrings(e){return this.tokenize(e).map(n=>this.detokenize([n]))}takeLastTokens(e,r){if(r<=0)return{text:"",tokens:[]};let n=4,o=1,s=Math.min(e.length,r*n),a=e.slice(-s),c=this.tokenize(a);for(;c.length<r+2&&s<e.length;)s=Math.min(e.length,s+r*o),a=e.slice(-s),c=this.tokenize(a);return c.length<r?{text:e,tokens:c}:(c=c.slice(-r),{text:this.detokenize(c),tokens:c})}takeFirstTokens(e,r){if(r<=0)return{text:"",tokens:[]};let n=4,o=1,s=Math.min(e.length,r*n),a=e.slice(0,s),c=this.tokenize(a);for(;c.length<r+2&&s<e.length;)s=Math.min(e.length,s+r*o),a=e.slice(0,s),c=this.tokenize(a);return c.length<r?{text:e,tokens:c}:(c=c.slice(0,r),{text:this.detokenize(c),tokens:c})}takeLastLinesTokens(e,r){let{text:n}=this.takeLastTokens(e,r);if(n.length===e.length||e[e.length-n.length-1]===`
`)return n;let o=n.indexOf(`
`);return n.substring(o+1)}};mf.TTokenizer=q$;var _pe=class{constructor(){this.hash=e=>{let r=0;for(let n=0;n<e.length;n++){let o=e.charCodeAt(n);r=(r<<5)-r+o,r&=r&65535}return r}}tokenize(e){return this.tokenizeStrings(e).map(this.hash)}detokenize(e){return e.map(r=>r.toString()).join(" ")}tokenizeStrings(e){return e.split(/\b/)}tokenLength(e){return this.tokenizeStrings(e).length}takeLastTokens(e,r){let n=this.tokenizeStrings(e).slice(-r);return{text:n.join(""),tokens:n.map(this.hash)}}takeFirstTokens(e,r){let n=this.tokenizeStrings(e).slice(0,r);return{text:n.join(""),tokens:n.map(this.hash)}}takeLastLinesTokens(e,r){let{text:n}=this.takeLastTokens(e,r);if(n.length===e.length||e[e.length-n.length-1]===`
`)return n;let o=n.indexOf(`
`);return n.substring(o+1)}},S5r={[Rp.cl100k]:{python:3.99,typescript:4.54,typescriptreact:4.58,javascript:4.76,csharp:5.13,java:4.86,cpp:3.85,php:4.1,html:4.57,vue:4.22,go:3.93,dart:5.66,javascriptreact:4.81,css:3.37},[Rp.o200k]:{python:4.05,typescript:4.12,typescriptreact:5.01,javascript:4.47,csharp:5.47,java:4.86,cpp:3.8,php:4.35,html:4.86,vue:4.3,go:4.21,dart:5.7,javascriptreact:4.83,css:3.33}},gpe=4,F$=class{constructor(e=Rp.o200k,r){this.languageId=r,this.tokenizerName=e}tokenize(e){return this.tokenizeStrings(e).map(r=>{let n=0;for(let o=0;o<r.length;o++)n=n*Math.pow(10,gpe)+r.charCodeAt(o);return n})}detokenize(e){return e.map(r=>{let n=[],o=r.toString();for(;o.length>0;){let s=o.slice(-gpe),a=String.fromCharCode(parseInt(s));n.unshift(a),o=o.slice(0,-gpe)}return n.join("")}).join("")}tokenizeStrings(e){return e.match(/.{1,4}/g)??[]}getEffectiveTokenLength(){return this.tokenizerName&&this.languageId?S5r[this.tokenizerName]?.[this.languageId]??4:4}tokenLength(e){return Math.ceil(e.length/this.getEffectiveTokenLength())}takeLastTokens(e,r){if(r<=0)return{text:"",tokens:[]};let n=e.slice(-Math.floor(r*this.getEffectiveTokenLength()));return{text:n,tokens:Array.from({length:this.tokenLength(n)},(o,s)=>s)}}takeFirstTokens(e,r){if(r<=0)return{text:"",tokens:[]};let n=e.slice(0,Math.floor(r*this.getEffectiveTokenLength()));return{text:n,tokens:Array.from({length:this.tokenLength(n)},(o,s)=>s)}}takeLastLinesTokens(e,r){let{text:n}=this.takeLastTokens(e,r);if(n.length===e.length||e[e.length-n.length-1]===`
`)return n;let o=n.indexOf(`
`);return n.substring(o+1)}};mf.ApproximateTokenizer=F$;async function Ist(t){try{let e=await q$.create(t);U$.set(t,e)}catch{}}mf.initializeTokenizers=(async()=>{U$.set(Rp.mock,new _pe),await Promise.all([Ist(Rp.cl100k),Ist(Rp.o200k)])})()});var FI=m(VS=>{"use strict";var b5r=VS&&VS.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),C5r=VS&&VS.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&b5r(e,t,r)};Object.defineProperty(VS,"__esModule",{value:!0});C5r(Pst(),VS)});var ype=m(gf=>{"use strict";var A5r=gf&&gf.__decorate||function(t,e,r,n){var o=arguments.length,s=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(o<3?a(s):o>3?a(e,r,s):a(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},j$=gf&&gf.__param||function(t,e){return function(r,n){e(r,n,t)}},w4;Object.defineProperty(gf,"__esModule",{value:!0});gf.AvailableModelsManager=gf.ICompletionsModelManagerService=void 0;var x5r=ha(),w5r=A$(),I5r=Qe(),P5r=Ar(),R5r=Nr(),O5r=FI(),M5r=Xj(),B$=Gl(),N5r=Wa();gf.ICompletionsModelManagerService=(0,I5r.createServiceIdentifier)("ICompletionsModelManagerService");var L5r="gpt-41-copilot",vpe=w4=class extends P5r.Disposable{constructor(e=!0,r,n,o,s){super(),this._instantiationService=r,this._featuresService=n,this._endpointProvider=o,this.fetchedModelData=[],this.customModels=[],this.editorPreviewFeaturesDisabled=!1,e&&this._register((0,M5r.onCopilotToken)(s,()=>this.refreshAvailableModels()))}async refreshAvailableModels(){await this.refreshModels()}getDefaultModelId(){if(this.fetchedModelData){let e=w4.filterCompletionModels(this.fetchedModelData,this.editorPreviewFeaturesDisabled)[0];if(e)return e.id}return L5r}async refreshModels(){let e=await this._endpointProvider.getAllCompletionModels(!0);e&&(this.fetchedModelData=e)}getGenericCompletionModels(){let e=w4.filterCompletionModels(this.fetchedModelData,this.editorPreviewFeaturesDisabled);return w4.mapCompletionModels(e)}getTokenizerForModel(e){let n=this.getGenericCompletionModels().find(o=>o.modelId===e);return n?n.tokenizer:O5r.TokenizerName.o200k}static filterCompletionModels(e,r){return e.filter(n=>n.capabilities.type==="completion").filter(n=>!r||n.preview===!1||n.preview===void 0)}static filterModelsWithEditorPreviewFeatures(e,r){return e.filter(n=>!r||n.preview===!1||n.preview===void 0)}static mapCompletionModels(e){return e.map(r=>({modelId:r.id,label:r.name,preview:!!r.preview,tokenizer:r.capabilities.tokenizer}))}getCurrentModelRequestInfo(e=void 0){let r=this.getDefaultModelId(),n=this._instantiationService.invokeFunction(B$.getConfig,B$.ConfigKey.DebugOverrideEngine)||this._instantiationService.invokeFunction(B$.getConfig,B$.ConfigKey.DebugOverrideEngineLegacy);if(n)return new jI(n,"override");let o=e?this._featuresService.customEngine(e):"";return o?new jI(o,"exp"):this.customModels.length>0?new jI(this.customModels[0],"custommodel"):new jI(r,"default")}};gf.AvailableModelsManager=vpe;gf.AvailableModelsManager=vpe=w4=A5r([j$(1,R5r.IInstantiationService),j$(2,N5r.ICompletionsFeaturesService),j$(3,w5r.IEndpointProvider),j$(4,x5r.IAuthenticationService)],vpe);var jI=class{constructor(e,r){this.modelId=e,this.modelChoiceSource=r}get headers(){return{}}}});var $$=m(Epe=>{"use strict";Object.defineProperty(Epe,"__esModule",{value:!0});Epe.getEngineRequestInfo=D5r;var k5r=ype();function D5r(t,e=void 0){let r=t.get(k5r.ICompletionsModelManagerService),n=r.getCurrentModelRequestInfo(e),o=r.getTokenizerForModel(n.modelId);return{headers:n.headers,modelId:n.modelId,engineChoiceSource:n.modelChoiceSource,tokenizer:o}}});var Nst=m(V$=>{"use strict";Object.defineProperty(V$,"__esModule",{value:!0});V$.setupCompletionsExperimentationService=B5r;V$.createCompletionsFilters=Mst;var U5r=ha(),q5r=Vo(),F5r=Nr(),Rst=Jot(),H1=Gl(),j5r=$$(),sd=$F();function B5r(t){let e=t.get(U5r.IAuthenticationService),r=t.get(F5r.IInstantiationService),n=e.onDidAccessTokenChange(()=>{e.getCopilotToken().then(o=>r.invokeFunction(Ost,o)).catch(o=>{})});return Ost(t,e.copilotToken),n}function $5r(t){return H1.BuildInfo.getBuildType()===H1.BuildType.NIGHTLY?sd.Release.Nightly:sd.Release.Stable}function Ost(t,e){let r=t.get(q5r.IExperimentationService),n=Mst(t,e);r.setCompletionsFilters(n)}function Mst(t,e){let r=new Map;if(r.set(sd.Filter.ExtensionRelease,$5r(t)),r.set(sd.Filter.CopilotOverrideEngine,(0,H1.getConfig)(t,H1.ConfigKey.DebugOverrideEngine)||(0,H1.getConfig)(t,H1.ConfigKey.DebugOverrideEngineLegacy)),r.set(sd.Filter.CopilotClientVersion,H1.BuildInfo.isProduction()?H1.BuildInfo.getVersion():"1.999.0"),e){let o=(0,Rst.getUserKind)(e),s=e.getTokenValue("ft")??"",a=e.getTokenValue("ol")??"",c=e.getTokenValue("cml")??"",l=e.getTokenValue("tid")??"";r.set(sd.Filter.CopilotUserKind,o),r.set(sd.Filter.CopilotCustomModel,s),r.set(sd.Filter.CopilotOrgs,a),r.set(sd.Filter.CopilotCustomModelNames,c),r.set(sd.Filter.CopilotTrackingId,l),r.set(sd.Filter.CopilotUserKind,(0,Rst.getUserKind)(e))}let n=(0,j5r.getEngineRequestInfo)(t).modelId;return r.set(sd.Filter.CopilotEngine,n),r}});var Lst=m(km=>{"use strict";var V5r=km&&km.__decorate||function(t,e,r,n){var o=arguments.length,s=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(o<3?a(s):o>3?a(e,r,s):a(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},Tpe=km&&km.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(km,"__esModule",{value:!0});km.Features=void 0;var H5r=pa(),G5r=Vo(),z5r=Nr(),BI=BS(),W5r=gI(),Spe=Ps(),K5r=Nst(),Qr=jF(),Y5r=$F(),bpe=class{constructor(e,r,n){this.instantiationService=e,this.experimentationService=r,this.copilotTokenManager=n}async updateExPValuesAndAssignments(e,r=Spe.TelemetryData.createAndMarkAsIssued()){if(r instanceof Spe.TelemetryWithExp)throw new Error("updateExPValuesAndAssignments should not be called with TelemetryWithExp");let n=this.copilotTokenManager.token??await this.copilotTokenManager.getToken(),{filters:o,exp:s}=this.createExpConfigAndFilters(n);return new Spe.TelemetryWithExp(r.properties,r.measurements,r.issuedTime,{filters:o,exp:s})}async fetchTokenAndUpdateExPValuesAndAssignments(e,r){return await this.updateExPValuesAndAssignments(e,r)}createExpConfigAndFilters(e){let r={};for(let l of Object.values(Qr.ExpTreatmentVariables)){let u=this.experimentationService.getTreatmentVariable(l);u!==void 0&&(r[l]=u)}let n=Object.entries(r).map(([l,u])=>l+(u?"":"cf")),o=new Qr.ExpConfig(r,n.join(";")),s=this.instantiationService.invokeFunction(K5r.createCompletionsFilters,e),a={};for(let[l,u]of s.entries())a[l]=u;return{filters:new Y5r.FilterSettings(a),exp:o}}async getFallbackExpAndFilters(){let e=this.copilotTokenManager.token??await this.copilotTokenManager.getToken();return this.createExpConfigAndFilters(e)}overrideBlockMode(e){return e.filtersAndExp.exp.variables[Qr.ExpTreatmentVariables.OverrideBlockMode]||void 0}customEngine(e){return e.filtersAndExp.exp.variables[Qr.ExpTreatmentVariables.CustomEngine]??""}customEngineTargetEngine(e){return e.filtersAndExp.exp.variables[Qr.ExpTreatmentVariables.CustomEngineTargetEngine]}suffixPercent(e){return e.filtersAndExp.exp.variables[Qr.ExpTreatmentVariables.SuffixPercent]??BI.DEFAULT_PROMPT_ALLOCATION_PERCENT.suffix}suffixMatchThreshold(e){return e.filtersAndExp.exp.variables[Qr.ExpTreatmentVariables.SuffixMatchThreshold]??BI.DEFAULT_SUFFIX_MATCH_THRESHOLD}cppHeadersEnableSwitch(e){return e.filtersAndExp.exp.variables[Qr.ExpTreatmentVariables.CppHeadersEnableSwitch]??!1}relatedFilesVSCodeCSharp(e){return e.filtersAndExp.exp.variables[Qr.ExpTreatmentVariables.RelatedFilesVSCodeCSharp]??!1}relatedFilesVSCodeTypeScript(e){return e.filtersAndExp.exp.variables[Qr.ExpTreatmentVariables.RelatedFilesVSCodeTypeScript]??!1}relatedFilesVSCode(e){return e.filtersAndExp.exp.variables[Qr.ExpTreatmentVariables.RelatedFilesVSCode]??!1}contextProviders(e){let r=e.filtersAndExp.exp.variables[Qr.ExpTreatmentVariables.ContextProviders]??"";return r?r.split(",").map(n=>n.trim()):[]}contextProviderTimeBudget(e,r){let n=r.filtersAndExp.exp.variables[Qr.ExpTreatmentVariables.ContextProviderTimeBudget]??150;return n||(this.getContextProviderExpSettings(e)?.timeBudget??150)}includeNeighboringFiles(e,r){return r.filtersAndExp.exp.variables[Qr.ExpTreatmentVariables.IncludeNeighboringFiles]??!1?!0:this.getContextProviderExpSettings(e)?.includeNeighboringFiles??!1}excludeRelatedFiles(e,r){return r.filtersAndExp.exp.variables[Qr.ExpTreatmentVariables.ExcludeRelatedFiles]??!1?!0:this.getContextProviderExpSettings(e)?.excludeRelatedFiles??!1}getContextProviderExpSettings(e){let r=this.experimentationService.getTreatmentVariable(`config.github.copilot.chat.contextprovider.${e}`);if(typeof r=="string")try{let n=JSON.parse(r),o=this.getProviderIDs(n);return delete n.id,delete n.ids,Object.assign({ids:o},{includeNeighboringFiles:!1,excludeRelatedFiles:!1,timeBudget:150},n)}catch{this.instantiationService.invokeFunction(o=>{o.get(H5r.ILogService).error(`Failed to parse context provider exp settings for language ${e}`)});return}else return}getProviderIDs(e){let r=[];if(typeof e.id=="string"&&e.id.length>0&&r.push(e.id),Array.isArray(e.ids))for(let n of e.ids)typeof n=="string"&&n.length>0&&r.push(n);return r}maxPromptCompletionTokens(e){return e.filtersAndExp.exp.variables[Qr.ExpTreatmentVariables.MaxPromptCompletionTokens]??BI.DEFAULT_MAX_PROMPT_LENGTH+BI.DEFAULT_MAX_COMPLETION_LENGTH}stableContextPercent(e){return e.filtersAndExp.exp.variables[Qr.ExpTreatmentVariables.StableContextPercent]??BI.DEFAULT_PROMPT_ALLOCATION_PERCENT.stableContext}volatileContextPercent(e){return e.filtersAndExp.exp.variables[Qr.ExpTreatmentVariables.VolatileContextPercent]??BI.DEFAULT_PROMPT_ALLOCATION_PERCENT.volatileContext}cppContextProviderParams(e){return e.filtersAndExp.exp.variables[Qr.ExpTreatmentVariables.CppContextProviderParams]}csharpContextProviderParams(e){return e.filtersAndExp.exp.variables[Qr.ExpTreatmentVariables.CSharpContextProviderParams]}javaContextProviderParams(e){return e.filtersAndExp.exp.variables[Qr.ExpTreatmentVariables.JavaContextProviderParams]}multiLanguageContextProviderParams(e){return e.filtersAndExp.exp.variables[Qr.ExpTreatmentVariables.MultiLanguageContextProviderParams]}tsContextProviderParams(e){return e.filtersAndExp.exp.variables[Qr.ExpTreatmentVariables.TsContextProviderParams]}completionsDebounce(e){return e.filtersAndExp.exp.variables[Qr.ExpTreatmentVariables.CompletionsDebounce]}enableElectronFetcher(e){return e.filtersAndExp.exp.variables[Qr.ExpTreatmentVariables.ElectronFetcher]??!1}enableFetchFetcher(e){return e.filtersAndExp.exp.variables[Qr.ExpTreatmentVariables.FetchFetcher]??!1}asyncCompletionsTimeout(e){return e.filtersAndExp.exp.variables[Qr.ExpTreatmentVariables.AsyncCompletionsTimeout]??200}enableProgressiveReveal(e){return e.filtersAndExp.exp.variables[Qr.ExpTreatmentVariables.ProgressiveReveal]??!1}modelAlwaysTerminatesSingleline(e){return e.filtersAndExp.exp.variables[Qr.ExpTreatmentVariables.ModelAlwaysTerminatesSingleline]??!0}longLookaheadSize(e){return e.filtersAndExp.exp.variables[Qr.ExpTreatmentVariables.ProgressiveRevealLongLookaheadSize]??9}shortLookaheadSize(e){return e.filtersAndExp.exp.variables[Qr.ExpTreatmentVariables.ProgressiveRevealShortLookaheadSize]??3}maxMultilineTokens(e){return e.filtersAndExp.exp.variables[Qr.ExpTreatmentVariables.MaxMultilineTokens]??200}multilineAfterAcceptLines(e){return e.filtersAndExp.exp.variables[Qr.ExpTreatmentVariables.MultilineAfterAcceptLines]??1}completionsDelay(e){return e.filtersAndExp.exp.variables[Qr.ExpTreatmentVariables.CompletionsDelay]??200}singleLineUnlessAccepted(e){return e.filtersAndExp.exp.variables[Qr.ExpTreatmentVariables.SingleLineUnlessAccepted]??!1}};km.Features=bpe;km.Features=bpe=V5r([Tpe(0,z5r.IInstantiationService),Tpe(1,G5r.IExperimentationService),Tpe(2,W5r.ICompletionsCopilotTokenManager)],bpe)});var G1=m($I=>{"use strict";Object.defineProperty($I,"__esModule",{value:!0});$I.ICompletionsFileSystemService=$I.FileType=void 0;var Q5r=Qe(),kst;(function(t){t[t.Unknown=0]="Unknown",t[t.File=1]="File",t[t.Directory=2]="Directory",t[t.SymbolicLink=64]="SymbolicLink"})(kst||($I.FileType=kst={}));$I.ICompletionsFileSystemService=(0,Q5r.createServiceIdentifier)("ICompletionsFileSystemService")});var Cpe=m(H$=>{"use strict";Object.defineProperty(H$,"__esModule",{value:!0});H$.knownLanguages=void 0;H$.knownLanguages={abap:{extensions:[".abap"]},aspdotnet:{extensions:[".asax",".ascx",".ashx",".asmx",".aspx",".axd"]},bat:{extensions:[".bat",".cmd"]},bibtex:{extensions:[".bib",".bibtex"]},blade:{extensions:[".blade",".blade.php"]},BluespecSystemVerilog:{extensions:[".bsv"]},c:{extensions:[".c",".cats",".h",".h.in",".idc"]},csharp:{extensions:[".cake",".cs",".cs.pp",".csx",".linq"]},cpp:{extensions:[".c++",".cc",".cp",".cpp",".cppm",".cxx",".h",".h++",".hh",".hpp",".hxx",".idl",".inc",".inl",".ino",".ipp",".ixx",".rc",".re",".tcc",".tpp",".txx",".i"]},cobol:{extensions:[".cbl",".ccp",".cob",".cobol",".cpy"]},css:{extensions:[".css",".wxss"]},clojure:{extensions:[".bb",".boot",".cl2",".clj",".cljc",".cljs",".cljs.hl",".cljscm",".cljx",".edn",".hic"],filenames:["riemann.config"]},ql:{extensions:[".ql",".qll"]},coffeescript:{extensions:["._coffee",".cake",".cjsx",".coffee",".iced"],filenames:["Cakefile"]},cuda:{extensions:[".cu",".cuh"]},dart:{extensions:[".dart"]},dockerfile:{extensions:[".containerfile",".dockerfile"],filenames:["Containerfile","Dockerfile"]},dotenv:{extensions:[".env"],filenames:[".env",".env.ci",".env.dev",".env.development",".env.development.local",".env.example",".env.local",".env.prod",".env.production",".env.sample",".env.staging",".env.test",".env.testing"]},html:{extensions:[".ect",".ejs",".ejs.t",".jst",".hta",".htm",".html",".html.hl",".html5",".inc",".jsp",".njk",".tpl",".twig",".wxml",".xht",".xhtml",".phtml",".liquid"]},elixir:{extensions:[".ex",".exs"],filenames:["mix.lock"]},erlang:{extensions:[".app",".app.src",".erl",".es",".escript",".hrl",".xrl",".yrl"],filenames:["Emakefile","rebar.config","rebar.config.lock","rebar.lock"]},fsharp:{extensions:[".fs",".fsi",".fsx"]},go:{extensions:[".go"]},groovy:{extensions:[".gradle",".groovy",".grt",".gtpl",".gvy",".jenkinsfile"],filenames:["Jenkinsfile","Jenkinsfile"]},graphql:{extensions:[".gql",".graphql",".graphqls"]},terraform:{extensions:[".hcl",".nomad",".tf",".tfvars",".workflow"]},hlsl:{extensions:[".cginc",".fx",".fxh",".hlsl",".hlsli"]},erb:{extensions:[".erb",".erb.deface",".rhtml"]},razor:{extensions:[".cshtml",".razor"]},haml:{extensions:[".haml",".haml.deface"]},handlebars:{extensions:[".handlebars",".hbs"]},haskell:{extensions:[".hs",".hs-boot",".hsc"]},ini:{extensions:[".cfg",".cnf",".dof",".ini",".lektorproject",".prefs",".pro",".properties",".url"],filenames:[".buckconfig",".coveragerc",".flake8",".pylintrc","HOSTS","buildozer.spec","hosts","pylintrc","vlcrc"]},json:{extensions:[".4DForm",".4DProject",".JSON-tmLanguage",".avsc",".geojson",".gltf",".har",".ice",".json",".json.example",".jsonl",".mcmeta",".sarif",".tact",".tfstate",".tfstate.backup",".topojson",".webapp",".webmanifest",".yy",".yyp"],filenames:[".all-contributorsrc",".arcconfig",".auto-changelog",".c8rc",".htmlhintrc",".imgbotconfig",".nycrc",".tern-config",".tern-project",".watchmanconfig","MODULE.bazel.lock","Package.resolved","Pipfile.lock","bun.lock","composer.lock","deno.lock","flake.lock","mcmod.info"]},jsonc:{extensions:[".code-snippets",".code-workspace",".jsonc",".sublime-build",".sublime-color-scheme",".sublime-commands",".sublime-completions",".sublime-keymap",".sublime-macro",".sublime-menu",".sublime-mousemap",".sublime-project",".sublime-settings",".sublime-theme",".sublime-workspace",".sublime_metrics",".sublime_session"],filenames:[".babelrc",".devcontainer.json",".eslintrc.json",".jscsrc",".jshintrc",".jslintrc",".swcrc","api-extractor.json","argv.json","devcontainer.json","extensions.json","jsconfig.json","keybindings.json","language-configuration.json","launch.json","profiles.json","settings.json","tasks.json","tsconfig.json","tslint.json"]},java:{extensions:[".jav",".java",".jsh"]},javascript:{extensions:["._js",".bones",".cjs",".es",".es6",".frag",".gs",".jake",".javascript",".js",".jsb",".jscad",".jsfl",".jslib",".jsm",".jspre",".jss",".mjs",".njs",".pac",".sjs",".ssjs",".xsjs",".xsjslib"],filenames:["Jakefile"]},julia:{extensions:[".jl"]},kotlin:{extensions:[".kt",".ktm",".kts"]},less:{extensions:[".less"]},lua:{extensions:[".fcgi",".lua",".luau",".nse",".p8",".pd_lua",".rbxs",".rockspec",".wlua"],filenames:[".luacheckrc"]},makefile:{extensions:[".d",".mak",".make",".makefile",".mk",".mkfile"],filenames:["BSDmakefile","GNUmakefile","Kbuild","Makefile","Makefile.am","Makefile.boot","Makefile.frag","Makefile.in","Makefile.inc","Makefile.wat","makefile","makefile.sco","mkfile"]},markdown:{extensions:[".livemd",".markdown",".md",".mdown",".mdwn",".mdx",".mkd",".mkdn",".mkdown",".ronn",".scd",".workbook"],filenames:["contents.lr"]},"objective-c":{extensions:[".h",".m"]},"objective-cpp":{extensions:[".mm"]},php:{extensions:[".aw",".ctp",".fcgi",".inc",".install",".module",".php",".php3",".php4",".php5",".phps",".phpt",".theme"],filenames:[".php",".php_cs",".php_cs.dist","Phakefile"]},perl:{extensions:[".al",".cgi",".fcgi",".perl",".ph",".pl",".plx",".pm",".psgi",".t"],filenames:[".latexmkrc","Makefile.PL","Rexfile","ack","cpanfile","latexmkrc"]},powershell:{extensions:[".ps1",".psd1",".psm1"]},pug:{extensions:[".jade",".pug"]},python:{extensions:[".cgi",".codon",".fcgi",".gyp",".gypi",".lmi",".py",".py3",".pyde",".pyi",".pyp",".pyt",".pyw",".rpy",".sage",".spec",".tac",".wsgi",".xpy"],filenames:[".gclient","DEPS","SConscript","SConstruct","wscript"]},r:{extensions:[".r",".rd",".rsx"],filenames:[".Rprofile","expr-dist"]},ruby:{extensions:[".builder",".eye",".fcgi",".gemspec",".god",".jbuilder",".mspec",".pluginspec",".podspec",".prawn",".rabl",".rake",".rb",".rbi",".rbuild",".rbw",".rbx",".ru",".ruby",".spec",".thor",".watchr"],filenames:[".irbrc",".pryrc",".simplecov","Appraisals","Berksfile","Brewfile","Buildfile","Capfile","Dangerfile","Deliverfile","Fastfile","Gemfile","Guardfile","Jarfile","Mavenfile","Podfile","Puppetfile","Rakefile","Snapfile","Steepfile","Thorfile","Vagrantfile","buildfile"]},rust:{extensions:[".rs",".rs.in"]},scss:{extensions:[".scss"]},sql:{extensions:[".cql",".ddl",".inc",".mysql",".prc",".sql",".tab",".udf",".viw"]},sass:{extensions:[".sass"]},scala:{extensions:[".kojo",".sbt",".sc",".scala"]},shellscript:{extensions:[".bash",".bats",".cgi",".command",".fcgi",".fish",".ksh",".sh",".sh.in",".tmux",".tool",".trigger",".zsh",".zsh-theme"],filenames:[".bash_aliases",".bash_functions",".bash_history",".bash_logout",".bash_profile",".bashrc",".cshrc",".envrc",".flaskenv",".kshrc",".login",".profile",".tmux.conf",".zlogin",".zlogout",".zprofile",".zshenv",".zshrc","9fs","PKGBUILD","bash_aliases","bash_logout","bash_profile","bashrc","cshrc","gradlew","kshrc","login","man","profile","tmux.conf","zlogin","zlogout","zprofile","zshenv","zshrc"]},slang:{extensions:[".fxc",".hlsl",".s",".slang",".slangh",".usf",".ush",".vfx"]},slim:{extensions:[".slim"]},solidity:{extensions:[".sol"]},stylus:{extensions:[".styl"]},svelte:{extensions:[".svelte"]},swift:{extensions:[".swift"]},systemverilog:{extensions:[".sv",".svh",".vh"]},typescriptreact:{extensions:[".tsx"]},latex:{extensions:[".aux",".bbx",".cbx",".cls",".dtx",".ins",".lbx",".ltx",".mkii",".mkiv",".mkvi",".sty",".tex",".toc"]},typescript:{extensions:[".cts",".mts",".ts"]},verilog:{extensions:[".v",".veo"]},vim:{extensions:[".vba",".vim",".vimrc",".vmb"],filenames:[".exrc",".gvimrc",".nvimrc",".vimrc","_vimrc","gvimrc","nvimrc","vimrc"]},vb:{extensions:[".vb",".vbhtml",".Dsr",".bas",".cls",".ctl",".frm",".vbs"]},vue:{extensions:[".nvue",".vue"]},xml:{extensions:[".adml",".admx",".ant",".axaml",".axml",".builds",".ccproj",".ccxml",".clixml",".cproject",".cscfg",".csdef",".csl",".csproj",".ct",".depproj",".dita",".ditamap",".ditaval",".dll.config",".dotsettings",".filters",".fsproj",".fxml",".glade",".gml",".gmx",".gpx",".grxml",".gst",".hzp",".iml",".ivy",".jelly",".jsproj",".kml",".launch",".mdpolicy",".mjml",".mod",".mojo",".mxml",".natvis",".ncl",".ndproj",".nproj",".nuspec",".odd",".osm",".pkgproj",".plist",".pluginspec",".proj",".props",".ps1xml",".psc1",".pt",".pubxml",".qhelp",".rdf",".res",".resx",".rss",".sch",".scxml",".sfproj",".shproj",".srdf",".storyboard",".sublime-snippet",".svg",".sw",".targets",".tml",".typ",".ui",".urdf",".ux",".vbproj",".vcxproj",".vsixmanifest",".vssettings",".vstemplate",".vxml",".wixproj",".workflow",".wsdl",".wsf",".wxi",".wxl",".wxs",".x3d",".xacro",".xaml",".xib",".xlf",".xliff",".xmi",".xml",".xml.dist",".xmp",".xproj",".xsd",".xspec",".xul",".zcml"],filenames:[".classpath",".cproject",".project","App.config","NuGet.config","Settings.StyleCop","Web.Debug.config","Web.Release.config","Web.config","packages.config"]},xsl:{extensions:[".xsl",".xslt"]},yaml:{extensions:[".mir",".reek",".rviz",".sublime-syntax",".syntax",".yaml",".yaml-tmlanguage",".yaml.sed",".yml",".yml.mysql"],filenames:[".clang-format",".clang-tidy",".clangd",".gemrc","CITATION.cff","glide.lock","pixi.lock","yarn.lock"]},javascriptreact:{extensions:[".jsx"]},legend:{extensions:[".pure"]}}});var Ust=m(z1=>{"use strict";Object.defineProperty(z1,"__esModule",{value:!0});z1.knownFileExtensions=z1.templateLanguageLimitations=z1.knownTemplateLanguageExtensions=void 0;var Dst=Cpe();z1.knownTemplateLanguageExtensions=[".ejs",".erb",".haml",".hbs",".j2",".jinja",".jinja2",".liquid",".mustache",".njk",".php",".pug",".slim",".webc"];z1.templateLanguageLimitations={".php":[".blade"]};z1.knownFileExtensions=Object.keys(Dst.knownLanguages).flatMap(t=>Dst.knownLanguages[t].extensions)});var W1=m(_f=>{"use strict";Object.defineProperty(_f,"__esModule",{value:!0});_f.makeFsUri=tMr;_f.validateUri=rMr;_f.normalizeUri=nMr;_f.fsPath=Bst;_f.getFsPath=$st;_f.getFsUri=iMr;_f.joinPath=oMr;_f.basename=cMr;_f.dirname=lMr;var Z5r=require("os"),J5r=require("path"),X5r=E_(),I4=Bi();function Fst(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substring(0,3)+Fst(t.substring(3)):t}}var qst=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function eMr(t){return t.match(qst)?t.replace(qst,e=>Fst(e)):t}function tMr(t){if(/^[A-Za-z][A-Za-z0-9+.-]+:/.test(t))throw new Error("Path must not contain a scheme");if(!t)throw new Error("Path must not be empty");return I4.URI.file(t).toString()}function P4(t){if(typeof t!="string"&&(t=t.uri),/^[A-Za-z]:\\/.test(t))throw new Error(`Could not parse <${t}>: Windows-style path`);try{let e=t.match(/^(?:([^:/?#]+?:)?\/\/)(\/\/.*)$/);return e?I4.URI.parse(e[1]+e[2],!0):I4.URI.parse(t,!0)}catch(e){throw new Error(`Could not parse <${t}>`,{cause:e})}}function rMr(t){return P4(t),t}function nMr(t){try{return P4(t).toString()}catch{return t}}var jst=new Set(["file","notebook","vscode-notebook","vscode-notebook-cell"]);function Bst(t){let e=P4(t);if(!jst.has(e.scheme))throw new Error(`Copilot currently does not support URI with scheme: ${e.scheme}`);if((0,Z5r.platform)()==="win32"){let r=e.path;return e.authority?r=`//${e.authority}${e.path}`:/^\/[A-Za-z]:/.test(r)&&(r=r.substring(1)),(0,J5r.normalize)(r)}else{if(e.authority)throw new Error("Unsupported remote file path");return e.path}}function $st(t){try{return Bst(t)}catch{return}}function iMr(t){let e=$st(t);if(e)return I4.URI.file(e).toString()}function oMr(t,...e){let r=I4.URI.joinPath(P4(t),...e.map(sMr)).toString();return typeof t=="string"?r:{uri:r}}function sMr(t){return aMr(t)?t.replaceAll("\\","/"):t}function aMr(t){return/^[^/\\]*\\/.test(t)}function cMr(t){return eMr((typeof t=="string"?t:t.uri).replace(/[#?].*$/,"").replace(/\/$/,"").replace(/^.*[/:]/,""))}function lMr(t){let e=(0,X5r.dirname)(P4(t)),r;return jst.has(e.scheme)&&e.scheme!=="file"?r=e.with({scheme:"file",fragment:""}).toString():r=e.toString(),typeof t=="string"?r:{uri:r}}});var Hst=m(va=>{"use strict";var uMr=va&&va.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),dMr=va&&va.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),fMr=va&&va.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),o=0;o<n.length;o++)n[o]!=="default"&&uMr(r,e,n[o]);return dMr(r,e),r}})();Object.defineProperty(va,"__esModule",{value:!0});va.languageDetection=va.LanguageDetection=va.Language=void 0;va.detectLanguage=mMr;var pMr=Cpe(),Ape=Ust(),hMr=W1(),Vst=fMr(require("node:path")),HS=class{constructor(e,r,n){this.languageId=e,this.isGuess=r,this.fileExtension=n}};va.Language=HS;var HI=class{};va.LanguageDetection=HI;var xpe=new Map,VI=new Map;for(let[t,{extensions:e,filenames:r}]of Object.entries(pMr.knownLanguages)){for(let n of e)xpe.set(n,[...xpe.get(n)??[],t]);for(let n of r??[])VI.set(n,[...VI.get(n)??[],t])}var wpe=class extends HI{detectLanguage(e){let r=(0,hMr.basename)(e.uri),n=Vst.extname(r).toLowerCase(),o=this.extensionWithoutTemplateLanguage(r,n),s=this.detectLanguageId(r,o),a=this.computeFullyQualifiedExtension(n,o);return s?new HS(s.languageId,s.isGuess,a):new HS(e.languageId,!0,a)}extensionWithoutTemplateLanguage(e,r){if(Ape.knownTemplateLanguageExtensions.includes(r)){let n=e.substring(0,e.lastIndexOf(".")),o=Vst.extname(n).toLowerCase();if(o.length>0&&Ape.knownFileExtensions.includes(o)&&this.isExtensionValidForTemplateLanguage(r,o))return o}return r}isExtensionValidForTemplateLanguage(e,r){let n=Ape.templateLanguageLimitations[e];return!n||n.includes(r)}detectLanguageId(e,r){if(VI.has(e))return{languageId:VI.get(e)[0],isGuess:!1};let n=xpe.get(r)??[];if(n.length>0)return{languageId:n[0],isGuess:n.length>1};for(;e.includes(".");)if(e=e.replace(/\.[^.]*$/,""),VI.has(e))return{languageId:VI.get(e)[0],isGuess:!1}}computeFullyQualifiedExtension(e,r){return e!==r?r+e:e}},Ipe=class extends HI{constructor(e){super(),this.delegate=e}detectLanguage(e){let r=this.delegate.detectLanguage(e),n=r.languageId;return n==="c"||n==="cpp"?new HS("cpp",r.isGuess,r.fileExtension):r}},Ppe=class extends HI{constructor(e){super(),this.delegate=e}detectLanguage(e){return e.uri.startsWith("untitled:")||e.uri.startsWith("vscode-notebook-cell:")?new HS(e.languageId,!0,""):this.delegate.detectLanguage(e)}};va.languageDetection=new Ipe(new Ppe(new wpe));function mMr({uri:t,languageId:e}){let r=va.languageDetection.detectLanguage({uri:t,languageId:"UNKNOWN"});return r.languageId==="UNKNOWN"?e:r.languageId}});var Kst={};Xs(Kst,{TextDocument:()=>Rpe});function Ope(t,e){if(t.length<=1)return t;let r=t.length/2|0,n=t.slice(0,r),o=t.slice(r);Ope(n,e),Ope(o,e);let s=0,a=0,c=0;for(;s<n.length&&a<o.length;)e(n[s],o[a])<=0?t[c++]=n[s++]:t[c++]=o[a++];for(;s<n.length;)t[c++]=n[s++];for(;a<o.length;)t[c++]=o[a++];return t}function Gst(t,e,r=0){let n=e?[r]:[];for(let o=0;o<t.length;o++){let s=t.charCodeAt(o);zst(s)&&(s===13&&o+1<t.length&&t.charCodeAt(o+1)===10&&o++,n.push(r+o+1))}return n}function zst(t){return t===13||t===10}function Wst(t){let e=t.start,r=t.end;return e.line>r.line||e.line===r.line&&e.character>r.character?{start:r,end:e}:t}function gMr(t){let e=Wst(t.range);return e!==t.range?{newText:t.newText,range:e}:t}var G$,Rpe,Yst=q(()=>{"use strict";G$=class t{constructor(e,r,n,o){this._uri=e,this._languageId=r,this._version=n,this._content=o,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let r=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(r,n)}return this._content}update(e,r){for(let n of e)if(t.isIncremental(n)){let o=Wst(n.range),s=this.offsetAt(o.start),a=this.offsetAt(o.end);this._content=this._content.substring(0,s)+n.text+this._content.substring(a,this._content.length);let c=Math.max(o.start.line,0),l=Math.max(o.end.line,0),u=this._lineOffsets,d=Gst(n.text,!1,s);if(l-c===d.length)for(let p=0,h=d.length;p<h;p++)u[p+c+1]=d[p];else d.length<1e4?u.splice(c+1,l-c,...d):this._lineOffsets=u=u.slice(0,c+1).concat(d,u.slice(l+1));let f=n.text.length-(a-s);if(f!==0)for(let p=c+1+d.length,h=u.length;p<h;p++)u[p]=u[p]+f}else if(t.isFull(n))this._content=n.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received");this._version=r}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=Gst(this._content,!0)),this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let r=this.getLineOffsets(),n=0,o=r.length;if(o===0)return{line:0,character:e};for(;n<o;){let a=Math.floor((n+o)/2);r[a]>e?o=a:n=a+1}let s=n-1;return e=this.ensureBeforeEOL(e,r[s]),{line:s,character:e-r[s]}}offsetAt(e){let r=this.getLineOffsets();if(e.line>=r.length)return this._content.length;if(e.line<0)return 0;let n=r[e.line];if(e.character<=0)return n;let o=e.line+1<r.length?r[e.line+1]:this._content.length,s=Math.min(n+e.character,o);return this.ensureBeforeEOL(s,n)}ensureBeforeEOL(e,r){for(;e>r&&zst(this._content.charCodeAt(e-1));)e--;return e}get lineCount(){return this.getLineOffsets().length}static isIncremental(e){let r=e;return r!=null&&typeof r.text=="string"&&r.range!==void 0&&(r.rangeLength===void 0||typeof r.rangeLength=="number")}static isFull(e){let r=e;return r!=null&&typeof r.text=="string"&&r.range===void 0&&r.rangeLength===void 0}};(function(t){function e(o,s,a,c){return new G$(o,s,a,c)}t.create=e;function r(o,s,a){if(o instanceof G$)return o.update(s,a),o;throw new Error("TextDocument.update: document must be created by TextDocument.create")}t.update=r;function n(o,s){let a=o.getText(),c=Ope(s.map(gMr),(d,f)=>{let p=d.range.start.line-f.range.start.line;return p===0?d.range.start.character-f.range.start.character:p}),l=0,u=[];for(let d of c){let f=o.offsetAt(d.range.start);if(f<l)throw new Error("Overlapping edit");f>l&&u.push(a.substring(l,f)),d.newText.length&&u.push(d.newText),l=o.offsetAt(d.range.end)}return u.push(a.substr(l)),u.join("")}t.applyEdits=n})(Rpe||(Rpe={}))});var zI=m(GI=>{"use strict";Object.defineProperty(GI,"__esModule",{value:!0});GI.CopilotTextDocument=GI.LocationFactory=void 0;var _Mr=Hst(),vMr=W1(),R4=(Yst(),cn(Kst)),K1=hN(),Mpe=class{static{this.range=K1.Range.create.bind(K1.Range)}static{this.position=K1.Position.create.bind(K1.Position)}};GI.LocationFactory=Mpe;var Npe=class t{constructor(e,r,n){this.uri=e,this._textDocument=r,this.detectedLanguageId=n}static withChanges(e,r,n){let o=R4.TextDocument.create(e.clientUri,e.clientLanguageId,n,e.getText());return R4.TextDocument.update(o,r,n),new t(e.uri,o,e.detectedLanguageId)}applyEdits(e){let r=R4.TextDocument.create(this.clientUri,this.clientLanguageId,this.version,this.getText());return R4.TextDocument.update(r,e.map(n=>({text:n.newText,range:n.range})),this.version),new t(this.uri,r,this.detectedLanguageId)}static create(e,r,n,o,s=(0,_Mr.detectLanguage)({uri:e,languageId:r})){return new t((0,vMr.normalizeUri)(e),R4.TextDocument.create(e,r,n,o),s)}get clientUri(){return this._textDocument.uri}get clientLanguageId(){return this._textDocument.languageId}get languageId(){return this._textDocument.languageId}get version(){return this._textDocument.version}get lineCount(){return this._textDocument.lineCount}getText(e){return this._textDocument.getText(e)}positionAt(e){return this._textDocument.positionAt(e)}offsetAt(e){return this._textDocument.offsetAt(e)}lineAt(e){let r=typeof e=="number"?e:e.line;if(r<0||r>=this.lineCount)throw new RangeError("Illegal value for lineNumber");let n=K1.Range.create(r,0,r+1,0),o=this.getText(n).replace(/\r\n$|\r$|\n$/g,""),s=K1.Range.create(K1.Position.create(r,0),K1.Position.create(r,o.length)),a=o.trim().length===0;return{text:o,range:s,isEmptyOrWhitespace:a}}};GI.CopilotTextDocument=Npe});var kpe=m((M7n,Xst)=>{"use strict";var Lpe=Object.defineProperty,yMr=Object.getOwnPropertyDescriptor,EMr=Object.getOwnPropertyNames,TMr=Object.prototype.hasOwnProperty,SMr=(t,e)=>{for(var r in e)Lpe(t,r,{get:e[r],enumerable:!0})},bMr=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of EMr(e))!TMr.call(t,o)&&o!==r&&Lpe(t,o,{get:()=>e[o],enumerable:!(n=yMr(e,o))||n.enumerable});return t},CMr=t=>bMr(Lpe({},"__esModule",{value:!0}),t),Zst={};SMr(Zst,{config:()=>PMr,t:()=>Jst});Xst.exports=CMr(Zst);var AMr=require("fs"),xMr=require("fs/promises");async function wMr(t){if(t.protocol==="file:")return await(0,xMr.readFile)(t,"utf8");if(t.protocol==="http:"||t.protocol==="https:"){let e=await fetch(t.toString(),{headers:{"Accept-Encoding":"gzip, deflate",Accept:"application/json"},redirect:"follow"});if(!e.ok){let n=`Unexpected ${e.status} response while trying to read ${t}`;try{n+=`: ${await e.text()}`}catch{}throw new Error(n)}return await e.text()}throw new Error("Unsupported protocol")}function IMr(t){return(0,AMr.readFileSync)(t,"utf8")}var O4;function PMr(t){if("contents"in t){typeof t.contents=="string"?O4=JSON.parse(t.contents):O4=t.contents;return}if("fsPath"in t){let e=IMr(t.fsPath),r=JSON.parse(e);O4=Qst(r)?r.contents.bundle:r;return}if(t.uri){let e=t.uri;return typeof t.uri=="string"&&(e=new URL(t.uri)),new Promise((r,n)=>{wMr(e).then(o=>{try{let s=JSON.parse(o);O4=Qst(s)?s.contents.bundle:s,r()}catch(s){n(s)}}).catch(o=>{n(o)})})}}function Jst(...t){let e=t[0],r,n,o;if(typeof e=="string")r=e,n=e,t.splice(0,1),o=!t||typeof t[0]!="object"?t:t[0];else if(e instanceof Array){let a=t.slice(1);if(e.length!==a.length+1)throw new Error("expected a string as the first argument to l10n.t");let c=e[0];for(let l=1;l<e.length;l++)c+=`{${l-1}}`+e[l];return Jst(c,...a)}else n=e.message,r=n,e.comment&&e.comment.length>0&&(r+=`/${Array.isArray(e.comment)?e.comment.join(""):e.comment}`),o=e.args??{};let s=O4?.[r];return s?typeof s=="string"?z$(s,o):s.comment?z$(s.message,o):z$(n,o):z$(n,o)}var RMr=/{([^}]+)}/g;function z$(t,e){return Object.keys(e).length===0?t:t.replace(RMr,(r,n)=>e[n]??r)}function Qst(t){return typeof t?.contents?.bundle=="object"&&typeof t?.version=="string"}});var GS=m(ic=>{"use strict";var OMr=ic&&ic.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),MMr=ic&&ic.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),NMr=ic&&ic.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),o=0;o<n.length;o++)n[o]!=="default"&&OMr(r,e,n[o]);return MMr(r,e),r}})();Object.defineProperty(ic,"__esModule",{value:!0});ic.NullIgnoreService=ic.IIgnoreService=ic.HAS_IGNORED_FILES_MESSAGE=void 0;ic.filterIngoredResources=DMr;var LMr=NMr(kpe()),kMr=Qe();ic.HAS_IGNORED_FILES_MESSAGE=LMr.t(`

**Note:** Some files were excluded from the context due to content exclusion rules. Click [here](https://docs.github.com/en/copilot/managing-github-copilot-in-your-organization/configuring-content-exclusions-for-github-copilot) to learn more.`);ic.IIgnoreService=(0,kMr.createServiceIdentifier)("IIgnoreService");var Dpe=class t{static{this.Instance=new t}dispose(){}get isEnabled(){return!1}get isRegexExclusionsEnabled(){return!1}async init(){}async isCopilotIgnored(e){return!1}async asMinimatchPattern(){}};ic.NullIgnoreService=Dpe;async function DMr(t,e){let r=[];for(let n of e)await t.isCopilotIgnored(n)||r.push(n);return r}});var qpe=m(Upe=>{"use strict";Object.defineProperty(Upe,"__esModule",{value:!0});Upe.isDocumentValid=FMr;var UMr=GS(),qMr=Bi();async function FMr(t,e){return await t.get(UMr.IIgnoreService).isCopilotIgnored(qMr.URI.parse(e.uri))?{status:"invalid",reason:"Document is blocked by repository policy"}:{status:"valid"}}});var Xl=m(vf=>{"use strict";var jMr=vf&&vf.__decorate||function(t,e,r,n){var o=arguments.length,s=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(o<3?a(s):o>3?a(e,r,s):a(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},eat=vf&&vf.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(vf,"__esModule",{value:!0});vf.TextDocumentManager=vf.ICompletionsTextDocumentManagerService=void 0;var BMr=Qe(),$Mr=Nr(),VMr=G1(),tat=qpe(),WI=W1();vf.ICompletionsTextDocumentManagerService=(0,BMr.createServiceIdentifier)("ICompletionsTextDocumentManagerService");var Fpe=class{constructor(e,r){this.instantiationService=e,this.fileSystem=r}async textDocuments(){let e=this.getTextDocumentsUnsafe(),r=[];for(let n of e)(await this.instantiationService.invokeFunction(tat.isDocumentValid,n)).status==="valid"&&r.push(n);return r}getTextDocumentUnsafe(e){let r=(0,WI.normalizeUri)(e.uri);return this.getTextDocumentsUnsafe().find(n=>n.uri===r)}async getTextDocument(e){return this.getTextDocumentWithValidation(e).then(r=>{if(r.status==="valid")return r.document})}async validateTextDocument(e){return await this.instantiationService.invokeFunction(tat.isDocumentValid,e)}async getTextDocumentValidation(e){try{return await this.validateTextDocument(e)}catch{return this.notFoundResult(e)}}async getTextDocumentWithValidation(e){let r=this.getTextDocumentUnsafe(e);if(!r)return this.notFoundResult(e);let n=await this.validateTextDocument(e);return n.status==="valid"?{status:"valid",document:r}:n}notFoundResult({uri:e}){return{status:"notfound",message:`Document for URI could not be found: ${e}`}}async readTextDocumentFromDisk(e){try{if((await this.fileSystem.stat(e)).size>5*1024*1024)return}catch{return}return await this.fileSystem.readFileString(e)}getWorkspaceFolder(e){let r=(0,WI.normalizeUri)(e.uri);return this.getWorkspaceFolders().find(n=>r.startsWith((0,WI.normalizeUri)(n.uri)))}getRelativePath(e){if(e.uri.startsWith("untitled:"))return;let r=(0,WI.normalizeUri)(e.uri);for(let n of this.getWorkspaceFolders()){let o=(0,WI.normalizeUri)(n.uri).replace(/[#?].*/,"").replace(/\/?$/,"/");if(r.startsWith(o))return r.slice(o.length)}return(0,WI.basename)(r)}};vf.TextDocumentManager=Fpe;vf.TextDocumentManager=Fpe=jMr([eat(0,$Mr.IInstantiationService),eat(1,VMr.ICompletionsFileSystemService)],Fpe)});var $pe=m(yf=>{"use strict";var HMr=yf&&yf.__decorate||function(t,e,r,n){var o=arguments.length,s=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(o<3?a(s):o>3?a(e,r,s):a(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},jpe=yf&&yf.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(yf,"__esModule",{value:!0});yf.FileReader=yf.ICompletionsFileReaderService=void 0;var GMr=Qe(),zMr=Nr(),WMr=G1(),KMr=zI(),YMr=Xl(),QMr=qpe(),ZMr=W1();yf.ICompletionsFileReaderService=(0,GMr.createServiceIdentifier)("ICompletionsFileReaderService");var Bpe=class{constructor(e,r,n){this.documentManagerService=e,this.instantiationService=r,this.fileSystemService=n}getRelativePath(e){return this.documentManagerService.getRelativePath(e)??(0,ZMr.basename)(e.uri)}getOrReadTextDocument(e){return this.readFile(e.uri)}getOrReadTextDocumentWithFakeClientProperties(e){return this.readFile(e.uri)}async readFile(e){let r=await this.documentManagerService.getTextDocumentWithValidation({uri:e});if(r.status!=="notfound")return r;try{if(await this.getFileSizeMB(e)>1)return{status:"notfound",message:"File too large"};let o=await this.doReadFile(e),s=await this.instantiationService.invokeFunction(QMr.isDocumentValid,{uri:e});return s.status==="valid"?{status:"valid",document:KMr.CopilotTextDocument.create(e,"UNKNOWN",-1,o)}:s}catch{return{status:"notfound",message:"File not found"}}}async doReadFile(e){return await this.fileSystemService.readFileString(e)}async getFileSizeMB(e){return(await this.fileSystemService.stat(e)).size/1024/1024}};yf.FileReader=Bpe;yf.FileReader=Bpe=HMr([jpe(0,YMr.ICompletionsTextDocumentManagerService),jpe(1,zMr.IInstantiationService),jpe(2,WMr.ICompletionsFileSystemService)],Bpe)});var Dm=m(W$=>{"use strict";Object.defineProperty(W$,"__esModule",{value:!0});W$.LRUCacheMap=void 0;var Vpe=class{constructor(e=10){if(this.valueMap=new Map,e<1)throw new Error("Size limit must be at least 1");this.sizeLimit=e}set(e,r){if(this.has(e))this.valueMap.delete(e);else if(this.valueMap.size>=this.sizeLimit){let n=this.valueMap.keys().next().value;this.delete(n)}return this.valueMap.set(e,r),this}get(e){if(this.valueMap.has(e)){let r=this.valueMap.get(e);return this.valueMap.delete(e),this.valueMap.set(e,r),r}}delete(e){return this.valueMap.delete(e)}clear(){this.valueMap.clear()}get size(){return this.valueMap.size}keys(){return new Map(this.valueMap).keys()}values(){return new Map(this.valueMap).values()}entries(){return new Map(this.valueMap).entries()}[Symbol.iterator](){return this.entries()}has(e){return this.valueMap.has(e)}forEach(e,r){new Map(this.valueMap).forEach(e,r)}get[Symbol.toStringTag](){return"LRUCacheMap"}peek(e){return this.valueMap.get(e)}};W$.LRUCacheMap=Vpe});var N4=m(M4=>{"use strict";Object.defineProperty(M4,"__esModule",{value:!0});M4.Deferred=void 0;M4.delay=JMr;var Hpe=class{constructor(){this.resolve=()=>{},this.reject=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}};M4.Deferred=Hpe;function JMr(t,e=void 0){return new Promise(r=>setTimeout(()=>r(e),t))}});var rat=m(KI=>{"use strict";Object.defineProperty(KI,"__esModule",{value:!0});KI.ReplaySubject=KI.Subject=void 0;var K$=class{constructor(){this.observers=new Set}subscribe(e){return this.observers.add(e),()=>this.observers.delete(e)}next(e){for(let r of this.observers)r.next(e)}error(e){for(let r of this.observers)r.error?.(e)}complete(){for(let e of this.observers)e.complete?.()}};KI.Subject=K$;var Gpe=class extends K${subscribe(e){let r=super.subscribe(e);return this._value!==void 0&&e.next(this._value),r}next(e){this._value=e,super.next(e)}};KI.ReplaySubject=Gpe});var Kpe=m(Ef=>{"use strict";var XMr=Ef&&Ef.__decorate||function(t,e,r,n){var o=arguments.length,s=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(o<3?a(s):o>3?a(e,r,s):a(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},nat=Ef&&Ef.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(Ef,"__esModule",{value:!0});Ef.AsyncCompletionManager=Ef.ICompletionsAsyncManagerService=void 0;var eNr=Qe(),tNr=Wa(),rNr=Dm(),iat=An(),nNr=N4(),iNr=rat(),zS;(function(t){t[t.Completed=0]="Completed",t[t.Error=1]="Error",t[t.Pending=2]="Pending"})(zS||(zS={}));Ef.ICompletionsAsyncManagerService=(0,eNr.createServiceIdentifier)("ICompletionsAsyncManagerService");var Wpe=class{#e;constructor(e,r){this.featuresService=e,this.logTarget=r,this.#e=new iat.Logger("AsyncCompletionManager"),this.requests=new rNr.LRUCacheMap(100),this.mostRecentRequestId=""}clear(){this.requests.clear()}shouldWaitForAsyncCompletions(e,r){for(let[n,o]of this.requests)if(zpe(e,r,o))return!0;return!1}updateCompletion(e,r){let n=this.requests.get(e);n!==void 0&&(n.partialCompletionText=r,n.subject.next(n))}queueCompletionRequest(e,r,n,o,s){this.#e.debug(this.logTarget,`[${e}] Queueing async completion request:`,r.substring(r.lastIndexOf(`
`)+1));let a=new iNr.ReplaySubject;return this.requests.set(e,{state:zS.Pending,cancellationTokenSource:o,headerRequestId:e,prefix:r,prompt:n,subject:a}),s.then(c=>{if(this.requests.delete(e),c.type!=="success"){this.#e.debug(this.logTarget,`[${e}] Request failed with`,c.reason),a.error(c.reason);return}let l={cancellationTokenSource:o,headerRequestId:e,prefix:r,prompt:n,subject:a,choice:c.value[0],result:c,state:zS.Completed,allChoicesPromise:c.value[1]};this.requests.set(e,l),a.next(l),a.complete()}).catch(c=>{this.#e.error(this.logTarget,`[${e}] Request errored with`,c),this.requests.delete(e),a.error(c)})}getFirstMatchingRequestWithTimeout(e,r,n,o,s){let a=this.featuresService.asyncCompletionsTimeout(s);return a<0?(this.#e.debug(this.logTarget,`[${e}] Waiting for completions without timeout`),this.getFirstMatchingRequest(e,r,n,o)):(this.#e.debug(this.logTarget,`[${e}] Waiting for completions with timeout of ${a}ms`),Promise.race([this.getFirstMatchingRequest(e,r,n,o),new Promise(c=>setTimeout(()=>c(null),a))]).then(c=>{if(c===null){this.#e.debug(this.logTarget,`[${e}] Timed out waiting for completion`);return}return c}))}async getFirstMatchingRequest(e,r,n,o){o||(this.mostRecentRequestId=e);let s=!1,a=new nNr.Deferred,c=new Map,l=d=>()=>{let f=c.get(d);f!==void 0&&(f(),c.delete(d),!s&&c.size===0&&(s=!0,this.#e.debug(this.logTarget,`[${e}] No matching completions found`),a.resolve(void 0)))},u=d=>{if(zpe(r,n,d)){if(d.state===zS.Completed){let f=r.substring(d.prefix.length),{completionText:p}=d.choice;if(!p.startsWith(f)||p.length<=f.length){l(d.headerRequestId)();return}p=p.substring(f.length),d.choice.telemetryData.measurements.foundOffset=f.length,this.#e.debug(this.logTarget,`[${e}] Found completion at offset ${f.length}: ${JSON.stringify(p)}`),a.resolve([{...d.choice,completionText:p},d.allChoicesPromise]),s=!0}}else this.cancelRequest(e,d),l(d.headerRequestId)()};for(let[d,f]of this.requests)zpe(r,n,f)?c.set(d,f.subject.subscribe({next:u,error:l(d),complete:l(d)})):this.cancelRequest(e,f);return a.promise.finally(()=>{for(let d of c.values())d()})}cancelRequest(e,r){e===this.mostRecentRequestId&&r.state!==zS.Completed&&(this.#e.debug(this.logTarget,`[${e}] Cancelling request: ${r.headerRequestId}`),r.cancellationTokenSource.cancel(),this.requests.delete(r.headerRequestId))}};Ef.AsyncCompletionManager=Wpe;Ef.AsyncCompletionManager=Wpe=XMr([nat(0,tNr.ICompletionsFeaturesService),nat(1,iat.ICompletionsLogTargetService)],Wpe);function zpe(t,e,r){if(r.prompt.suffix!==e.suffix||!t.startsWith(r.prefix))return!1;let n=t.substring(r.prefix.length);return r.state===zS.Completed?r.choice.completionText.startsWith(n)&&r.choice.completionText.trimEnd().length>n.length:r.partialCompletionText===void 0?!0:r.partialCompletionText.startsWith(n)}});var oat=m(Y$=>{"use strict";Object.defineProperty(Y$,"__esModule",{value:!0});Y$.LRURadixTrie=void 0;var Ype=class{constructor(e){this.maxSize=e,this.root=new L4,this.leafNodes=new Set}set(e,r){let{node:n,remainingKey:o}=this.findClosestNode(e);if(o.length>0){for(let[s,a]of n.children)if(s.startsWith(o)){let c=s.slice(0,o.length),l=new L4;n.removeChild(s),n.addChild(c,l),l.addChild(s.slice(c.length),a),n=l,o=o.slice(c.length);break}if(o.length>0){let s=new L4;n.addChild(o,s),n=s}}n.value=r,this.leafNodes.add(n),this.leafNodes.size>this.maxSize&&this.evictLeastRecentlyUsed()}findAll(e){return this.findClosestNode(e).stack.map(({node:r,remainingKey:n})=>r.value!==void 0?{remainingKey:n,value:r.value}:void 0).filter(r=>r!==void 0)}delete(e){let{node:r,remainingKey:n}=this.findClosestNode(e);n.length>0||this.deleteNode(r)}findClosestNode(e){let r=!0,n=this.root,o=[{node:n,remainingKey:e}];for(;e.length>0&&r;){r=!1;for(let[s,a]of n.children)if(e.startsWith(s)){e=e.slice(s.length),o.unshift({node:a,remainingKey:e}),n=a,r=!0;break}}return{node:n,remainingKey:e,stack:o}}deleteNode(e){if(e.value=void 0,this.leafNodes.delete(e),e.parent===void 0||e.childCount>1)return;let{node:r,edge:n}=e.parent;if(e.childCount===1){let[s,a]=Array.from(e.children)[0];e.removeChild(s),r.removeChild(n),r.addChild(n+s,a);return}if(r.removeChild(n),r.parent===void 0)return;let o=r.parent;if(r.value===void 0&&r.childCount===1){let[s,a]=Array.from(r.children)[0],c=o.edge+s;r.removeChild(s),o.node.removeChild(o.edge),o.node.addChild(c,a)}}evictLeastRecentlyUsed(){let e=this.findLeastRecentlyUsed();e&&this.deleteNode(e)}findLeastRecentlyUsed(){let e;for(let r of this.leafNodes)(e===void 0||r.touched<e.touched)&&(e=r);return e}};Y$.LRURadixTrie=Ype;var L4=class{constructor(){this._children=new Map,this._touched=performance.now()}get children(){return this._children.entries()}get childCount(){return this._children.size}addChild(e,r){this._children.set(e,r),r.parent={node:this,edge:e}}removeChild(e){let r=this._children.get(e);r&&(r.parent=void 0),this._children.delete(e)}get value(){return this.touch(),this._value}set value(e){this.touch(),this._value=e}get touched(){return this._touched}touch(){this._touched=performance.now()}}});var Zpe=m(YI=>{"use strict";Object.defineProperty(YI,"__esModule",{value:!0});YI.CompletionsCache=YI.ICompletionsCacheService=void 0;var oNr=Qe(),sat=oat();YI.ICompletionsCacheService=(0,oNr.createServiceIdentifier)("ICompletionsCacheService");var Qpe=class{constructor(){this.cache=new sat.LRURadixTrie(100)}findAll(e,r){return this.cache.findAll(e).flatMap(({remainingKey:n,value:o})=>o.content.filter(s=>s.suffix===r&&s.choice.completionText.startsWith(n)&&s.choice.completionText.length>n.length).map(s=>({...s.choice,completionText:s.choice.completionText.slice(n.length),telemetryData:s.choice.telemetryData.extendedBy({},{foundOffset:n.length})})))}append(e,r,n){let o=this.cache.findAll(e);if(o.length>0&&o[0].remainingKey===""){let s=o[0].value.content;this.cache.set(e,{content:[...s,{suffix:r,choice:n}]})}else this.cache.set(e,{content:[{suffix:r,choice:n}]})}clear(){this.cache=new sat.LRURadixTrie(100)}};YI.CompletionsCache=Qpe});var aat=m(QI=>{"use strict";Object.defineProperty(QI,"__esModule",{value:!0});QI.BlockMode=void 0;QI.shouldDoParsingTrimming=sNr;QI.shouldDoServerTrimming=aNr;var WS;(function(t){t.Parsing="parsing",t.Server="server",t.ParsingAndServer="parsingandserver",t.MoreMultiline="moremultiline"})(WS||(QI.BlockMode=WS={}));function sNr(t){return[WS.Parsing,WS.ParsingAndServer,WS.MoreMultiline].includes(t)}function aNr(t){return[WS.Server,WS.ParsingAndServer].includes(t)}});var cat=m((exports,module)=>{var Module=typeof Module<"u"?Module:{},ENVIRONMENT_IS_WEB=typeof window=="object",ENVIRONMENT_IS_WORKER=typeof importScripts=="function",ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",TreeSitter=(function(){var initPromise,document=typeof window=="object"?{currentScript:window.document.currentScript}:null;class Parser{constructor(){this.initialize()}initialize(){throw new Error("cannot construct a Parser before calling `init()`")}static init(moduleOptions){return initPromise||(Module=Object.assign({},Module,moduleOptions),initPromise=new Promise(resolveInitPromise=>{var moduleOverrides=Object.assign({},Module),arguments_=[],thisProgram="./this.program",quit_=(t,e)=>{throw e},scriptDirectory="";function locateFile(t){return Module.locateFile?Module.locateFile(t,scriptDirectory):scriptDirectory+t}var readAsync,readBinary;if(ENVIRONMENT_IS_NODE){var fs=require("fs"),nodePath=require("path");scriptDirectory=__dirname+"/",readBinary=t=>{t=isFileURI(t)?new URL(t):nodePath.normalize(t);var e=fs.readFileSync(t);return e},readAsync=(t,e=!0)=>(t=isFileURI(t)?new URL(t):nodePath.normalize(t),new Promise((r,n)=>{fs.readFile(t,e?void 0:"utf8",(o,s)=>{o?n(o):r(e?s.buffer:s)})})),!Module.thisProgram&&process.argv.length>1&&(thisProgram=process.argv[1].replace(/\\/g,"/")),arguments_=process.argv.slice(2),typeof module<"u"&&(module.exports=Module),quit_=(t,e)=>{throw process.exitCode=t,e}}else(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)&&(ENVIRONMENT_IS_WORKER?scriptDirectory=self.location.href:typeof document<"u"&&document.currentScript&&(scriptDirectory=document.currentScript.src),scriptDirectory.startsWith("blob:")?scriptDirectory="":scriptDirectory=scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,"").lastIndexOf("/")+1),ENVIRONMENT_IS_WORKER&&(readBinary=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),readAsync=t=>isFileURI(t)?new Promise((e,r)=>{var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.onload=()=>{(n.status==200||n.status==0&&n.response)&&r(n.response),e(n.status)},n.onerror=e,n.send(null)}):fetch(t,{credentials:"same-origin"}).then(e=>e.ok?e.arrayBuffer():Promise.reject(new Error(e.status+" : "+e.url))));var out=Module.print||console.log.bind(console),err=Module.printErr||console.error.bind(console);Object.assign(Module,moduleOverrides),moduleOverrides=null,Module.arguments&&(arguments_=Module.arguments),Module.thisProgram&&(thisProgram=Module.thisProgram),Module.quit&&(quit_=Module.quit);var dynamicLibraries=Module.dynamicLibraries||[],wasmBinary;Module.wasmBinary&&(wasmBinary=Module.wasmBinary);var wasmMemory,ABORT=!1,EXITSTATUS,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64,HEAP_DATA_VIEW;function updateMemoryViews(){var t=wasmMemory.buffer;Module.HEAP_DATA_VIEW=HEAP_DATA_VIEW=new DataView(t),Module.HEAP8=HEAP8=new Int8Array(t),Module.HEAP16=HEAP16=new Int16Array(t),Module.HEAPU8=HEAPU8=new Uint8Array(t),Module.HEAPU16=HEAPU16=new Uint16Array(t),Module.HEAP32=HEAP32=new Int32Array(t),Module.HEAPU32=HEAPU32=new Uint32Array(t),Module.HEAPF32=HEAPF32=new Float32Array(t),Module.HEAPF64=HEAPF64=new Float64Array(t)}if(Module.wasmMemory)wasmMemory=Module.wasmMemory;else{var INITIAL_MEMORY=Module.INITIAL_MEMORY||33554432;wasmMemory=new WebAssembly.Memory({initial:INITIAL_MEMORY/65536,maximum:2147483648/65536})}updateMemoryViews();var __ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATPOSTRUN__=[],__RELOC_FUNCS__=[],runtimeInitialized=!1;function preRun(){if(Module.preRun)for(typeof Module.preRun=="function"&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}function initRuntime(){runtimeInitialized=!0,callRuntimeCallbacks(__RELOC_FUNCS__),callRuntimeCallbacks(__ATINIT__)}function preMain(){callRuntimeCallbacks(__ATMAIN__)}function postRun(){if(Module.postRun)for(typeof Module.postRun=="function"&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(t){__ATPRERUN__.unshift(t)}function addOnInit(t){__ATINIT__.unshift(t)}function addOnPostRun(t){__ATPOSTRUN__.unshift(t)}var runDependencies=0,runDependencyWatcher=null,dependenciesFulfilled=null;function getUniqueRunDependency(t){return t}function addRunDependency(t){runDependencies++,Module.monitorRunDependencies?.(runDependencies)}function removeRunDependency(t){if(runDependencies--,Module.monitorRunDependencies?.(runDependencies),runDependencies==0&&(runDependencyWatcher!==null&&(clearInterval(runDependencyWatcher),runDependencyWatcher=null),dependenciesFulfilled)){var e=dependenciesFulfilled;dependenciesFulfilled=null,e()}}function abort(t){Module.onAbort?.(t),t="Aborted("+t+")",err(t),ABORT=!0,EXITSTATUS=1,t+=". Build with -sASSERTIONS for more info.";var e=new WebAssembly.RuntimeError(t);throw e}var dataURIPrefix="data:application/octet-stream;base64,",isDataURI=t=>t.startsWith(dataURIPrefix),isFileURI=t=>t.startsWith("file://");function findWasmBinary(){var t="tree-sitter.wasm";return isDataURI(t)?t:locateFile(t)}var wasmBinaryFile;function getBinarySync(t){if(t==wasmBinaryFile&&wasmBinary)return new Uint8Array(wasmBinary);if(readBinary)return readBinary(t);throw"both async and sync fetching of the wasm failed"}function getBinaryPromise(t){return wasmBinary?Promise.resolve().then(()=>getBinarySync(t)):readAsync(t).then(e=>new Uint8Array(e),()=>getBinarySync(t))}function instantiateArrayBuffer(t,e,r){return getBinaryPromise(t).then(n=>WebAssembly.instantiate(n,e)).then(r,n=>{err(`failed to asynchronously prepare wasm: ${n}`),abort(n)})}function instantiateAsync(t,e,r,n){return!t&&typeof WebAssembly.instantiateStreaming=="function"&&!isDataURI(e)&&!isFileURI(e)&&!ENVIRONMENT_IS_NODE&&typeof fetch=="function"?fetch(e,{credentials:"same-origin"}).then(o=>{var s=WebAssembly.instantiateStreaming(o,r);return s.then(n,function(a){return err(`wasm streaming compile failed: ${a}`),err("falling back to ArrayBuffer instantiation"),instantiateArrayBuffer(e,r,n)})}):instantiateArrayBuffer(e,r,n)}function getWasmImports(){return{env:wasmImports,wasi_snapshot_preview1:wasmImports,"GOT.mem":new Proxy(wasmImports,GOTHandler),"GOT.func":new Proxy(wasmImports,GOTHandler)}}function createWasm(){var t=getWasmImports();function e(n,o){wasmExports=n.exports,wasmExports=relocateExports(wasmExports,1024);var s=getDylinkMetadata(o);return s.neededDynlibs&&(dynamicLibraries=s.neededDynlibs.concat(dynamicLibraries)),mergeLibSymbols(wasmExports,"main"),LDSO.init(),loadDylibs(),addOnInit(wasmExports.__wasm_call_ctors),__RELOC_FUNCS__.push(wasmExports.__wasm_apply_data_relocs),removeRunDependency("wasm-instantiate"),wasmExports}addRunDependency("wasm-instantiate");function r(n){e(n.instance,n.module)}if(Module.instantiateWasm)try{return Module.instantiateWasm(t,e)}catch(n){return err(`Module.instantiateWasm callback failed with error: ${n}`),!1}return wasmBinaryFile||(wasmBinaryFile=findWasmBinary()),instantiateAsync(wasmBinary,wasmBinaryFile,t,r),{}}var ASM_CONSTS={};function ExitStatus(t){this.name="ExitStatus",this.message=`Program terminated with exit(${t})`,this.status=t}var GOT={},currentModuleWeakSymbols=new Set([]),GOTHandler={get(t,e){var r=GOT[e];return r||(r=GOT[e]=new WebAssembly.Global({value:"i32",mutable:!0})),currentModuleWeakSymbols.has(e)||(r.required=!0),r}},LE_HEAP_LOAD_F32=t=>HEAP_DATA_VIEW.getFloat32(t,!0),LE_HEAP_LOAD_F64=t=>HEAP_DATA_VIEW.getFloat64(t,!0),LE_HEAP_LOAD_I16=t=>HEAP_DATA_VIEW.getInt16(t,!0),LE_HEAP_LOAD_I32=t=>HEAP_DATA_VIEW.getInt32(t,!0),LE_HEAP_LOAD_U32=t=>HEAP_DATA_VIEW.getUint32(t,!0),LE_HEAP_STORE_F32=(t,e)=>HEAP_DATA_VIEW.setFloat32(t,e,!0),LE_HEAP_STORE_F64=(t,e)=>HEAP_DATA_VIEW.setFloat64(t,e,!0),LE_HEAP_STORE_I16=(t,e)=>HEAP_DATA_VIEW.setInt16(t,e,!0),LE_HEAP_STORE_I32=(t,e)=>HEAP_DATA_VIEW.setInt32(t,e,!0),LE_HEAP_STORE_U32=(t,e)=>HEAP_DATA_VIEW.setUint32(t,e,!0),callRuntimeCallbacks=t=>{for(;t.length>0;)t.shift()(Module)},UTF8Decoder=typeof TextDecoder<"u"?new TextDecoder:void 0,UTF8ArrayToString=(t,e,r)=>{for(var n=e+r,o=e;t[o]&&!(o>=n);)++o;if(o-e>16&&t.buffer&&UTF8Decoder)return UTF8Decoder.decode(t.subarray(e,o));for(var s="";e<o;){var a=t[e++];if(!(a&128)){s+=String.fromCharCode(a);continue}var c=t[e++]&63;if((a&224)==192){s+=String.fromCharCode((a&31)<<6|c);continue}var l=t[e++]&63;if((a&240)==224?a=(a&15)<<12|c<<6|l:a=(a&7)<<18|c<<12|l<<6|t[e++]&63,a<65536)s+=String.fromCharCode(a);else{var u=a-65536;s+=String.fromCharCode(55296|u>>10,56320|u&1023)}}return s},getDylinkMetadata=t=>{var e=0,r=0;function n(){return t[e++]}function o(){for(var K=0,N=1;;){var G=t[e++];if(K+=(G&127)*N,N*=128,!(G&128))break}return K}function s(){var K=o();return e+=K,UTF8ArrayToString(t,e-K,K)}function a(K,N){if(K)throw new Error(N)}var c="dylink.0";if(t instanceof WebAssembly.Module){var l=WebAssembly.Module.customSections(t,c);l.length===0&&(c="dylink",l=WebAssembly.Module.customSections(t,c)),a(l.length===0,"need dylink section"),t=new Uint8Array(l[0]),r=t.length}else{var u=new Uint32Array(new Uint8Array(t.subarray(0,24)).buffer),d=u[0]==1836278016||u[0]==6386541;a(!d,"need to see wasm magic number"),a(t[8]!==0,"need the dylink section to be first"),e=9;var f=o();r=e+f,c=s()}var p={neededDynlibs:[],tlsExports:new Set,weakImports:new Set};if(c=="dylink"){p.memorySize=o(),p.memoryAlign=o(),p.tableSize=o(),p.tableAlign=o();for(var h=o(),_=0;_<h;++_){var g=s();p.neededDynlibs.push(g)}}else{a(c!=="dylink.0");for(var v=1,E=2,y=3,S=4,b=256,w=3,P=1;e<r;){var A=n(),O=o();if(A===v)p.memorySize=o(),p.memoryAlign=o(),p.tableSize=o(),p.tableAlign=o();else if(A===E)for(var h=o(),_=0;_<h;++_)g=s(),p.neededDynlibs.push(g);else if(A===y)for(var L=o();L--;){var j=s(),$=o();$&b&&p.tlsExports.add(j)}else if(A===S)for(var L=o();L--;){var Q=s(),j=s(),$=o();($&w)==P&&p.weakImports.add(j)}else e+=O}}return p};function getValue(t,e="i8"){switch(e.endsWith("*")&&(e="*"),e){case"i1":return HEAP8[t];case"i8":return HEAP8[t];case"i16":return LE_HEAP_LOAD_I16((t>>1)*2);case"i32":return LE_HEAP_LOAD_I32((t>>2)*4);case"i64":abort("to do getValue(i64) use WASM_BIGINT");case"float":return LE_HEAP_LOAD_F32((t>>2)*4);case"double":return LE_HEAP_LOAD_F64((t>>3)*8);case"*":return LE_HEAP_LOAD_U32((t>>2)*4);default:abort(`invalid type for getValue: ${e}`)}}var newDSO=(t,e,r)=>{var n={refcount:1/0,name:t,exports:r,global:!0};return LDSO.loadedLibsByName[t]=n,e!=null&&(LDSO.loadedLibsByHandle[e]=n),n},LDSO={loadedLibsByName:{},loadedLibsByHandle:{},init(){newDSO("__main__",0,wasmImports)}},___heap_base=78112,zeroMemory=(t,e)=>(HEAPU8.fill(0,t,t+e),t),alignMemory=(t,e)=>Math.ceil(t/e)*e,getMemory=t=>{if(runtimeInitialized)return zeroMemory(_malloc(t),t);var e=___heap_base,r=e+alignMemory(t,16);return ___heap_base=r,GOT.__heap_base.value=r,e},isInternalSym=t=>["__cpp_exception","__c_longjmp","__wasm_apply_data_relocs","__dso_handle","__tls_size","__tls_align","__set_stack_limits","_emscripten_tls_init","__wasm_init_tls","__wasm_call_ctors","__start_em_asm","__stop_em_asm","__start_em_js","__stop_em_js"].includes(t)||t.startsWith("__em_js__"),uleb128Encode=(t,e)=>{t<128?e.push(t):e.push(t%128|128,t>>7)},sigToWasmTypes=t=>{for(var e={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},r={parameters:[],results:t[0]=="v"?[]:[e[t[0]]]},n=1;n<t.length;++n)r.parameters.push(e[t[n]]);return r},generateFuncType=(t,e)=>{var r=t.slice(0,1),n=t.slice(1),o={i:127,p:127,j:126,f:125,d:124,e:111};e.push(96),uleb128Encode(n.length,e);for(var s=0;s<n.length;++s)e.push(o[n[s]]);r=="v"?e.push(0):e.push(1,o[r])},convertJsFunctionToWasm=(t,e)=>{if(typeof WebAssembly.Function=="function")return new WebAssembly.Function(sigToWasmTypes(e),t);var r=[1];generateFuncType(e,r);var n=[0,97,115,109,1,0,0,0,1];uleb128Encode(r.length,n),n.push(...r),n.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var o=new WebAssembly.Module(new Uint8Array(n)),s=new WebAssembly.Instance(o,{e:{f:t}}),a=s.exports.f;return a},wasmTableMirror=[],wasmTable=new WebAssembly.Table({initial:28,element:"anyfunc"}),getWasmTableEntry=t=>{var e=wasmTableMirror[t];return e||(t>=wasmTableMirror.length&&(wasmTableMirror.length=t+1),wasmTableMirror[t]=e=wasmTable.get(t)),e},updateTableMap=(t,e)=>{if(functionsInTableMap)for(var r=t;r<t+e;r++){var n=getWasmTableEntry(r);n&&functionsInTableMap.set(n,r)}},functionsInTableMap,getFunctionAddress=t=>(functionsInTableMap||(functionsInTableMap=new WeakMap,updateTableMap(0,wasmTable.length)),functionsInTableMap.get(t)||0),freeTableIndexes=[],getEmptyTableSlot=()=>{if(freeTableIndexes.length)return freeTableIndexes.pop();try{wasmTable.grow(1)}catch(t){throw t instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":t}return wasmTable.length-1},setWasmTableEntry=(t,e)=>{wasmTable.set(t,e),wasmTableMirror[t]=wasmTable.get(t)},addFunction=(t,e)=>{var r=getFunctionAddress(t);if(r)return r;var n=getEmptyTableSlot();try{setWasmTableEntry(n,t)}catch(s){if(!(s instanceof TypeError))throw s;var o=convertJsFunctionToWasm(t,e);setWasmTableEntry(n,o)}return functionsInTableMap.set(t,n),n},updateGOT=(t,e)=>{for(var r in t)if(!isInternalSym(r)){var n=t[r];r.startsWith("orig$")&&(r=r.split("$")[1],e=!0),GOT[r]||=new WebAssembly.Global({value:"i32",mutable:!0}),(e||GOT[r].value==0)&&(typeof n=="function"?GOT[r].value=addFunction(n):typeof n=="number"?GOT[r].value=n:err(`unhandled export type for '${r}': ${typeof n}`))}},relocateExports=(t,e,r)=>{var n={};for(var o in t){var s=t[o];typeof s=="object"&&(s=s.value),typeof s=="number"&&(s+=e),n[o]=s}return updateGOT(n,r),n},isSymbolDefined=t=>{var e=wasmImports[t];return!(!e||e.stub)},dynCallLegacy=(t,e,r)=>{t=t.replace(/p/g,"i");var n=Module["dynCall_"+t];return n(e,...r)},dynCall=(t,e,r=[])=>{if(t.includes("j"))return dynCallLegacy(t,e,r);var n=getWasmTableEntry(e)(...r);return n},stackSave=()=>_emscripten_stack_get_current(),stackRestore=t=>__emscripten_stack_restore(t),createInvokeFunction=t=>(e,...r)=>{var n=stackSave();try{return dynCall(t,e,r)}catch(o){if(stackRestore(n),o!==o+0)throw o;_setThrew(1,0)}},resolveGlobalSymbol=(t,e=!1)=>{var r;return e&&"orig$"+t in wasmImports&&(t="orig$"+t),isSymbolDefined(t)?r=wasmImports[t]:t.startsWith("invoke_")&&(r=wasmImports[t]=createInvokeFunction(t.split("_")[1])),{sym:r,name:t}},UTF8ToString=(t,e)=>t?UTF8ArrayToString(HEAPU8,t,e):"",loadWebAssemblyModule=(binary,flags,libName,localScope,handle)=>{var metadata=getDylinkMetadata(binary);currentModuleWeakSymbols=metadata.weakImports;function loadModule(){var firstLoad=!handle||!HEAP8[handle+8];if(firstLoad){var memAlign=Math.pow(2,metadata.memoryAlign),memoryBase=metadata.memorySize?alignMemory(getMemory(metadata.memorySize+memAlign),memAlign):0,tableBase=metadata.tableSize?wasmTable.length:0;handle&&(HEAP8[handle+8]=1,LE_HEAP_STORE_U32((handle+12>>2)*4,memoryBase),LE_HEAP_STORE_I32((handle+16>>2)*4,metadata.memorySize),LE_HEAP_STORE_U32((handle+20>>2)*4,tableBase),LE_HEAP_STORE_I32((handle+24>>2)*4,metadata.tableSize))}else memoryBase=LE_HEAP_LOAD_U32((handle+12>>2)*4),tableBase=LE_HEAP_LOAD_U32((handle+20>>2)*4);var tableGrowthNeeded=tableBase+metadata.tableSize-wasmTable.length;tableGrowthNeeded>0&&wasmTable.grow(tableGrowthNeeded);var moduleExports;function resolveSymbol(t){var e=resolveGlobalSymbol(t).sym;return!e&&localScope&&(e=localScope[t]),e||(e=moduleExports[t]),e}var proxyHandler={get(t,e){switch(e){case"__memory_base":return memoryBase;case"__table_base":return tableBase}if(e in wasmImports&&!wasmImports[e].stub)return wasmImports[e];if(!(e in t)){var r;t[e]=(...n)=>(r||=resolveSymbol(e),r(...n))}return t[e]}},proxy=new Proxy({},proxyHandler),info={"GOT.mem":new Proxy({},GOTHandler),"GOT.func":new Proxy({},GOTHandler),env:proxy,wasi_snapshot_preview1:proxy};function postInstantiation(module,instance){updateTableMap(tableBase,metadata.tableSize),moduleExports=relocateExports(instance.exports,memoryBase),flags.allowUndefined||reportUndefinedSymbols();function addEmAsm(addr,body){for(var args=[],arity=0;arity<16&&body.indexOf("$"+arity)!=-1;arity++)args.push("$"+arity);args=args.join(",");var func=`(${args}) => { ${body} };`;ASM_CONSTS[start]=eval(func)}if("__start_em_asm"in moduleExports)for(var start=moduleExports.__start_em_asm,stop=moduleExports.__stop_em_asm;start<stop;){var jsString=UTF8ToString(start);addEmAsm(start,jsString),start=HEAPU8.indexOf(0,start)+1}function addEmJs(name,cSig,body){var jsArgs=[];if(cSig=cSig.slice(1,-1),cSig!="void"){cSig=cSig.split(",");for(var i in cSig){var jsArg=cSig[i].split(" ").pop();jsArgs.push(jsArg.replace("*",""))}}var func=`(${jsArgs}) => ${body};`;moduleExports[name]=eval(func)}for(var name in moduleExports)if(name.startsWith("__em_js__")){var start=moduleExports[name],jsString=UTF8ToString(start),parts=jsString.split("<::>");addEmJs(name.replace("__em_js__",""),parts[0],parts[1]),delete moduleExports[name]}var applyRelocs=moduleExports.__wasm_apply_data_relocs;applyRelocs&&(runtimeInitialized?applyRelocs():__RELOC_FUNCS__.push(applyRelocs));var init=moduleExports.__wasm_call_ctors;return init&&(runtimeInitialized?init():__ATINIT__.push(init)),moduleExports}if(flags.loadAsync){if(binary instanceof WebAssembly.Module){var instance=new WebAssembly.Instance(binary,info);return Promise.resolve(postInstantiation(binary,instance))}return WebAssembly.instantiate(binary,info).then(t=>postInstantiation(t.module,t.instance))}var module=binary instanceof WebAssembly.Module?binary:new WebAssembly.Module(binary),instance=new WebAssembly.Instance(module,info);return postInstantiation(module,instance)}return flags.loadAsync?metadata.neededDynlibs.reduce((t,e)=>t.then(()=>loadDynamicLibrary(e,flags,localScope)),Promise.resolve()).then(loadModule):(metadata.neededDynlibs.forEach(t=>loadDynamicLibrary(t,flags,localScope)),loadModule())},mergeLibSymbols=(t,e)=>{for(var[r,n]of Object.entries(t)){let o=a=>{isSymbolDefined(a)||(wasmImports[a]=n)};o(r);let s="__main_argc_argv";r=="main"&&o(s),r==s&&o("main"),r.startsWith("dynCall_")&&!Module.hasOwnProperty(r)&&(Module[r]=n)}},asyncLoad=(t,e,r,n)=>{var o=n?"":`al ${t}`;readAsync(t).then(s=>{e(new Uint8Array(s)),o&&removeRunDependency(o)},s=>{if(r)r();else throw`Loading data file "${t}" failed.`}),o&&addRunDependency(o)};function loadDynamicLibrary(t,e={global:!0,nodelete:!0},r,n){var o=LDSO.loadedLibsByName[t];if(o)return e.global?o.global||(o.global=!0,mergeLibSymbols(o.exports,t)):r&&Object.assign(r,o.exports),e.nodelete&&o.refcount!==1/0&&(o.refcount=1/0),o.refcount++,n&&(LDSO.loadedLibsByHandle[n]=o),e.loadAsync?Promise.resolve(!0):!0;o=newDSO(t,n,"loading"),o.refcount=e.nodelete?1/0:1,o.global=e.global;function s(){if(n){var l=LE_HEAP_LOAD_U32((n+28>>2)*4),u=LE_HEAP_LOAD_U32((n+32>>2)*4);if(l&&u){var d=HEAP8.slice(l,l+u);return e.loadAsync?Promise.resolve(d):d}}var f=locateFile(t);if(e.loadAsync)return new Promise(function(p,h){asyncLoad(f,p,h)});if(!readBinary)throw new Error(`${f}: file not found, and synchronous loading of external files is not available`);return readBinary(f)}function a(){return e.loadAsync?s().then(l=>loadWebAssemblyModule(l,e,t,r,n)):loadWebAssemblyModule(s(),e,t,r,n)}function c(l){o.global?mergeLibSymbols(l,t):r&&Object.assign(r,l),o.exports=l}return e.loadAsync?a().then(l=>(c(l),!0)):(c(a()),!0)}var reportUndefinedSymbols=()=>{for(var[t,e]of Object.entries(GOT))if(e.value==0){var r=resolveGlobalSymbol(t,!0).sym;if(!r&&!e.required)continue;if(typeof r=="function")e.value=addFunction(r,r.sig);else if(typeof r=="number")e.value=r;else throw new Error(`bad export type for '${t}': ${typeof r}`)}},loadDylibs=()=>{if(!dynamicLibraries.length){reportUndefinedSymbols();return}addRunDependency("loadDylibs"),dynamicLibraries.reduce((t,e)=>t.then(()=>loadDynamicLibrary(e,{loadAsync:!0,global:!0,nodelete:!0,allowUndefined:!0})),Promise.resolve()).then(()=>{reportUndefinedSymbols(),removeRunDependency("loadDylibs")})},noExitRuntime=Module.noExitRuntime||!0;function setValue(t,e,r="i8"){switch(r.endsWith("*")&&(r="*"),r){case"i1":HEAP8[t]=e;break;case"i8":HEAP8[t]=e;break;case"i16":LE_HEAP_STORE_I16((t>>1)*2,e);break;case"i32":LE_HEAP_STORE_I32((t>>2)*4,e);break;case"i64":abort("to do setValue(i64) use WASM_BIGINT");case"float":LE_HEAP_STORE_F32((t>>2)*4,e);break;case"double":LE_HEAP_STORE_F64((t>>3)*8,e);break;case"*":LE_HEAP_STORE_U32((t>>2)*4,e);break;default:abort(`invalid type for setValue: ${r}`)}}var ___memory_base=new WebAssembly.Global({value:"i32",mutable:!1},1024),___stack_pointer=new WebAssembly.Global({value:"i32",mutable:!0},78112),___table_base=new WebAssembly.Global({value:"i32",mutable:!1},1),__abort_js=()=>{abort("")};__abort_js.sig="v";var nowIsMonotonic=1,__emscripten_get_now_is_monotonic=()=>nowIsMonotonic;__emscripten_get_now_is_monotonic.sig="i";var __emscripten_memcpy_js=(t,e,r)=>HEAPU8.copyWithin(t,e,e+r);__emscripten_memcpy_js.sig="vppp";var _emscripten_date_now=()=>Date.now();_emscripten_date_now.sig="d";var _emscripten_get_now;_emscripten_get_now=()=>performance.now(),_emscripten_get_now.sig="d";var getHeapMax=()=>2147483648,growMemory=t=>{var e=wasmMemory.buffer,r=(t-e.byteLength+65535)/65536;try{return wasmMemory.grow(r),updateMemoryViews(),1}catch{}},_emscripten_resize_heap=t=>{var e=HEAPU8.length;t>>>=0;var r=getHeapMax();if(t>r)return!1;for(var n=(l,u)=>l+(u-l%u)%u,o=1;o<=4;o*=2){var s=e*(1+.2/o);s=Math.min(s,t+100663296);var a=Math.min(r,n(Math.max(t,s),65536)),c=growMemory(a);if(c)return!0}return!1};_emscripten_resize_heap.sig="ip";var _fd_close=t=>52;_fd_close.sig="ii";var convertI32PairToI53Checked=(t,e)=>e+2097152>>>0<4194305-!!t?(t>>>0)+e*4294967296:NaN;function _fd_seek(t,e,r,n,o){var s=convertI32PairToI53Checked(e,r);return 70}_fd_seek.sig="iiiiip";var printCharBuffers=[null,[],[]],printChar=(t,e)=>{var r=printCharBuffers[t];e===0||e===10?((t===1?out:err)(UTF8ArrayToString(r,0)),r.length=0):r.push(e)},_fd_write=(t,e,r,n)=>{for(var o=0,s=0;s<r;s++){var a=LE_HEAP_LOAD_U32((e>>2)*4),c=LE_HEAP_LOAD_U32((e+4>>2)*4);e+=8;for(var l=0;l<c;l++)printChar(t,HEAPU8[a+l]);o+=c}return LE_HEAP_STORE_U32((n>>2)*4,o),0};_fd_write.sig="iippp";function _tree_sitter_log_callback(t,e){if(currentLogCallback){let r=UTF8ToString(e);currentLogCallback(r,t!==0)}}function _tree_sitter_parse_callback(t,e,r,n,o){let a=currentParseCallback(e,{row:r,column:n});typeof a=="string"?(setValue(o,a.length,"i32"),stringToUTF16(a,t,10240)):setValue(o,0,"i32")}var runtimeKeepaliveCounter=0,keepRuntimeAlive=()=>noExitRuntime||runtimeKeepaliveCounter>0,_proc_exit=t=>{EXITSTATUS=t,keepRuntimeAlive()||(Module.onExit?.(t),ABORT=!0),quit_(t,new ExitStatus(t))};_proc_exit.sig="vi";var exitJS=(t,e)=>{EXITSTATUS=t,_proc_exit(t)},handleException=t=>{if(t instanceof ExitStatus||t=="unwind")return EXITSTATUS;quit_(1,t)},lengthBytesUTF8=t=>{for(var e=0,r=0;r<t.length;++r){var n=t.charCodeAt(r);n<=127?e++:n<=2047?e+=2:n>=55296&&n<=57343?(e+=4,++r):e+=3}return e},stringToUTF8Array=(t,e,r,n)=>{if(!(n>0))return 0;for(var o=r,s=r+n-1,a=0;a<t.length;++a){var c=t.charCodeAt(a);if(c>=55296&&c<=57343){var l=t.charCodeAt(++a);c=65536+((c&1023)<<10)|l&1023}if(c<=127){if(r>=s)break;e[r++]=c}else if(c<=2047){if(r+1>=s)break;e[r++]=192|c>>6,e[r++]=128|c&63}else if(c<=65535){if(r+2>=s)break;e[r++]=224|c>>12,e[r++]=128|c>>6&63,e[r++]=128|c&63}else{if(r+3>=s)break;e[r++]=240|c>>18,e[r++]=128|c>>12&63,e[r++]=128|c>>6&63,e[r++]=128|c&63}}return e[r]=0,r-o},stringToUTF8=(t,e,r)=>stringToUTF8Array(t,HEAPU8,e,r),stackAlloc=t=>__emscripten_stack_alloc(t),stringToUTF8OnStack=t=>{var e=lengthBytesUTF8(t)+1,r=stackAlloc(e);return stringToUTF8(t,r,e),r},stringToUTF16=(t,e,r)=>{if(r??=2147483647,r<2)return 0;r-=2;for(var n=e,o=r<t.length*2?r/2:t.length,s=0;s<o;++s){var a=t.charCodeAt(s);LE_HEAP_STORE_I16((e>>1)*2,a),e+=2}return LE_HEAP_STORE_I16((e>>1)*2,0),e-n},AsciiToString=t=>{for(var e="";;){var r=HEAPU8[t++];if(!r)return e;e+=String.fromCharCode(r)}},wasmImports={__heap_base:___heap_base,__indirect_function_table:wasmTable,__memory_base:___memory_base,__stack_pointer:___stack_pointer,__table_base:___table_base,_abort_js:__abort_js,_emscripten_get_now_is_monotonic:__emscripten_get_now_is_monotonic,_emscripten_memcpy_js:__emscripten_memcpy_js,emscripten_get_now:_emscripten_get_now,emscripten_resize_heap:_emscripten_resize_heap,fd_close:_fd_close,fd_seek:_fd_seek,fd_write:_fd_write,memory:wasmMemory,tree_sitter_log_callback:_tree_sitter_log_callback,tree_sitter_parse_callback:_tree_sitter_parse_callback},wasmExports=createWasm(),___wasm_call_ctors=()=>(___wasm_call_ctors=wasmExports.__wasm_call_ctors)(),___wasm_apply_data_relocs=()=>(___wasm_apply_data_relocs=wasmExports.__wasm_apply_data_relocs)(),_malloc=Module._malloc=t=>(_malloc=Module._malloc=wasmExports.malloc)(t),_calloc=Module._calloc=(t,e)=>(_calloc=Module._calloc=wasmExports.calloc)(t,e),_realloc=Module._realloc=(t,e)=>(_realloc=Module._realloc=wasmExports.realloc)(t,e),_free=Module._free=t=>(_free=Module._free=wasmExports.free)(t),_ts_language_symbol_count=Module._ts_language_symbol_count=t=>(_ts_language_symbol_count=Module._ts_language_symbol_count=wasmExports.ts_language_symbol_count)(t),_ts_language_state_count=Module._ts_language_state_count=t=>(_ts_language_state_count=Module._ts_language_state_count=wasmExports.ts_language_state_count)(t),_ts_language_version=Module._ts_language_version=t=>(_ts_language_version=Module._ts_language_version=wasmExports.ts_language_version)(t),_ts_language_field_count=Module._ts_language_field_count=t=>(_ts_language_field_count=Module._ts_language_field_count=wasmExports.ts_language_field_count)(t),_ts_language_next_state=Module._ts_language_next_state=(t,e,r)=>(_ts_language_next_state=Module._ts_language_next_state=wasmExports.ts_language_next_state)(t,e,r),_ts_language_symbol_name=Module._ts_language_symbol_name=(t,e)=>(_ts_language_symbol_name=Module._ts_language_symbol_name=wasmExports.ts_language_symbol_name)(t,e),_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=(t,e,r,n)=>(_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=wasmExports.ts_language_symbol_for_name)(t,e,r,n),_strncmp=Module._strncmp=(t,e,r)=>(_strncmp=Module._strncmp=wasmExports.strncmp)(t,e,r),_ts_language_symbol_type=Module._ts_language_symbol_type=(t,e)=>(_ts_language_symbol_type=Module._ts_language_symbol_type=wasmExports.ts_language_symbol_type)(t,e),_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=(t,e)=>(_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=wasmExports.ts_language_field_name_for_id)(t,e),_ts_lookahead_iterator_new=Module._ts_lookahead_iterator_new=(t,e)=>(_ts_lookahead_iterator_new=Module._ts_lookahead_iterator_new=wasmExports.ts_lookahead_iterator_new)(t,e),_ts_lookahead_iterator_delete=Module._ts_lookahead_iterator_delete=t=>(_ts_lookahead_iterator_delete=Module._ts_lookahead_iterator_delete=wasmExports.ts_lookahead_iterator_delete)(t),_ts_lookahead_iterator_reset_state=Module._ts_lookahead_iterator_reset_state=(t,e)=>(_ts_lookahead_iterator_reset_state=Module._ts_lookahead_iterator_reset_state=wasmExports.ts_lookahead_iterator_reset_state)(t,e),_ts_lookahead_iterator_reset=Module._ts_lookahead_iterator_reset=(t,e,r)=>(_ts_lookahead_iterator_reset=Module._ts_lookahead_iterator_reset=wasmExports.ts_lookahead_iterator_reset)(t,e,r),_ts_lookahead_iterator_next=Module._ts_lookahead_iterator_next=t=>(_ts_lookahead_iterator_next=Module._ts_lookahead_iterator_next=wasmExports.ts_lookahead_iterator_next)(t),_ts_lookahead_iterator_current_symbol=Module._ts_lookahead_iterator_current_symbol=t=>(_ts_lookahead_iterator_current_symbol=Module._ts_lookahead_iterator_current_symbol=wasmExports.ts_lookahead_iterator_current_symbol)(t),_memset=Module._memset=(t,e,r)=>(_memset=Module._memset=wasmExports.memset)(t,e,r),_memcpy=Module._memcpy=(t,e,r)=>(_memcpy=Module._memcpy=wasmExports.memcpy)(t,e,r),_ts_parser_delete=Module._ts_parser_delete=t=>(_ts_parser_delete=Module._ts_parser_delete=wasmExports.ts_parser_delete)(t),_ts_parser_reset=Module._ts_parser_reset=t=>(_ts_parser_reset=Module._ts_parser_reset=wasmExports.ts_parser_reset)(t),_ts_parser_set_language=Module._ts_parser_set_language=(t,e)=>(_ts_parser_set_language=Module._ts_parser_set_language=wasmExports.ts_parser_set_language)(t,e),_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=t=>(_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=wasmExports.ts_parser_timeout_micros)(t),_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=(t,e,r)=>(_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=wasmExports.ts_parser_set_timeout_micros)(t,e,r),_ts_parser_set_included_ranges=Module._ts_parser_set_included_ranges=(t,e,r)=>(_ts_parser_set_included_ranges=Module._ts_parser_set_included_ranges=wasmExports.ts_parser_set_included_ranges)(t,e,r),_memmove=Module._memmove=(t,e,r)=>(_memmove=Module._memmove=wasmExports.memmove)(t,e,r),_memcmp=Module._memcmp=(t,e,r)=>(_memcmp=Module._memcmp=wasmExports.memcmp)(t,e,r),_ts_query_new=Module._ts_query_new=(t,e,r,n,o)=>(_ts_query_new=Module._ts_query_new=wasmExports.ts_query_new)(t,e,r,n,o),_ts_query_delete=Module._ts_query_delete=t=>(_ts_query_delete=Module._ts_query_delete=wasmExports.ts_query_delete)(t),_iswspace=Module._iswspace=t=>(_iswspace=Module._iswspace=wasmExports.iswspace)(t),_iswalnum=Module._iswalnum=t=>(_iswalnum=Module._iswalnum=wasmExports.iswalnum)(t),_ts_query_pattern_count=Module._ts_query_pattern_count=t=>(_ts_query_pattern_count=Module._ts_query_pattern_count=wasmExports.ts_query_pattern_count)(t),_ts_query_capture_count=Module._ts_query_capture_count=t=>(_ts_query_capture_count=Module._ts_query_capture_count=wasmExports.ts_query_capture_count)(t),_ts_query_string_count=Module._ts_query_string_count=t=>(_ts_query_string_count=Module._ts_query_string_count=wasmExports.ts_query_string_count)(t),_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=(t,e,r)=>(_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=wasmExports.ts_query_capture_name_for_id)(t,e,r),_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=(t,e,r)=>(_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=wasmExports.ts_query_string_value_for_id)(t,e,r),_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=(t,e,r)=>(_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=wasmExports.ts_query_predicates_for_pattern)(t,e,r),_ts_query_disable_capture=Module._ts_query_disable_capture=(t,e,r)=>(_ts_query_disable_capture=Module._ts_query_disable_capture=wasmExports.ts_query_disable_capture)(t,e,r),_ts_tree_copy=Module._ts_tree_copy=t=>(_ts_tree_copy=Module._ts_tree_copy=wasmExports.ts_tree_copy)(t),_ts_tree_delete=Module._ts_tree_delete=t=>(_ts_tree_delete=Module._ts_tree_delete=wasmExports.ts_tree_delete)(t),_ts_init=Module._ts_init=()=>(_ts_init=Module._ts_init=wasmExports.ts_init)(),_ts_parser_new_wasm=Module._ts_parser_new_wasm=()=>(_ts_parser_new_wasm=Module._ts_parser_new_wasm=wasmExports.ts_parser_new_wasm)(),_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=(t,e)=>(_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=wasmExports.ts_parser_enable_logger_wasm)(t,e),_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=(t,e,r,n,o)=>(_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=wasmExports.ts_parser_parse_wasm)(t,e,r,n,o),_ts_parser_included_ranges_wasm=Module._ts_parser_included_ranges_wasm=t=>(_ts_parser_included_ranges_wasm=Module._ts_parser_included_ranges_wasm=wasmExports.ts_parser_included_ranges_wasm)(t),_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=(t,e)=>(_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=wasmExports.ts_language_type_is_named_wasm)(t,e),_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=(t,e)=>(_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=wasmExports.ts_language_type_is_visible_wasm)(t,e),_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=t=>(_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=wasmExports.ts_tree_root_node_wasm)(t),_ts_tree_root_node_with_offset_wasm=Module._ts_tree_root_node_with_offset_wasm=t=>(_ts_tree_root_node_with_offset_wasm=Module._ts_tree_root_node_with_offset_wasm=wasmExports.ts_tree_root_node_with_offset_wasm)(t),_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=t=>(_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=wasmExports.ts_tree_edit_wasm)(t),_ts_tree_included_ranges_wasm=Module._ts_tree_included_ranges_wasm=t=>(_ts_tree_included_ranges_wasm=Module._ts_tree_included_ranges_wasm=wasmExports.ts_tree_included_ranges_wasm)(t),_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=(t,e)=>(_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=wasmExports.ts_tree_get_changed_ranges_wasm)(t,e),_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=t=>(_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=wasmExports.ts_tree_cursor_new_wasm)(t),_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=t=>(_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=wasmExports.ts_tree_cursor_delete_wasm)(t),_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=t=>(_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=wasmExports.ts_tree_cursor_reset_wasm)(t),_ts_tree_cursor_reset_to_wasm=Module._ts_tree_cursor_reset_to_wasm=(t,e)=>(_ts_tree_cursor_reset_to_wasm=Module._ts_tree_cursor_reset_to_wasm=wasmExports.ts_tree_cursor_reset_to_wasm)(t,e),_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=t=>(_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=wasmExports.ts_tree_cursor_goto_first_child_wasm)(t),_ts_tree_cursor_goto_last_child_wasm=Module._ts_tree_cursor_goto_last_child_wasm=t=>(_ts_tree_cursor_goto_last_child_wasm=Module._ts_tree_cursor_goto_last_child_wasm=wasmExports.ts_tree_cursor_goto_last_child_wasm)(t),_ts_tree_cursor_goto_first_child_for_index_wasm=Module._ts_tree_cursor_goto_first_child_for_index_wasm=t=>(_ts_tree_cursor_goto_first_child_for_index_wasm=Module._ts_tree_cursor_goto_first_child_for_index_wasm=wasmExports.ts_tree_cursor_goto_first_child_for_index_wasm)(t),_ts_tree_cursor_goto_first_child_for_position_wasm=Module._ts_tree_cursor_goto_first_child_for_position_wasm=t=>(_ts_tree_cursor_goto_first_child_for_position_wasm=Module._ts_tree_cursor_goto_first_child_for_position_wasm=wasmExports.ts_tree_cursor_goto_first_child_for_position_wasm)(t),_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=t=>(_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=wasmExports.ts_tree_cursor_goto_next_sibling_wasm)(t),_ts_tree_cursor_goto_previous_sibling_wasm=Module._ts_tree_cursor_goto_previous_sibling_wasm=t=>(_ts_tree_cursor_goto_previous_sibling_wasm=Module._ts_tree_cursor_goto_previous_sibling_wasm=wasmExports.ts_tree_cursor_goto_previous_sibling_wasm)(t),_ts_tree_cursor_goto_descendant_wasm=Module._ts_tree_cursor_goto_descendant_wasm=(t,e)=>(_ts_tree_cursor_goto_descendant_wasm=Module._ts_tree_cursor_goto_descendant_wasm=wasmExports.ts_tree_cursor_goto_descendant_wasm)(t,e),_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=t=>(_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=wasmExports.ts_tree_cursor_goto_parent_wasm)(t),_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=t=>(_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=wasmExports.ts_tree_cursor_current_node_type_id_wasm)(t),_ts_tree_cursor_current_node_state_id_wasm=Module._ts_tree_cursor_current_node_state_id_wasm=t=>(_ts_tree_cursor_current_node_state_id_wasm=Module._ts_tree_cursor_current_node_state_id_wasm=wasmExports.ts_tree_cursor_current_node_state_id_wasm)(t),_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=t=>(_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=wasmExports.ts_tree_cursor_current_node_is_named_wasm)(t),_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=t=>(_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=wasmExports.ts_tree_cursor_current_node_is_missing_wasm)(t),_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=t=>(_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=wasmExports.ts_tree_cursor_current_node_id_wasm)(t),_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=t=>(_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=wasmExports.ts_tree_cursor_start_position_wasm)(t),_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=t=>(_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=wasmExports.ts_tree_cursor_end_position_wasm)(t),_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=t=>(_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=wasmExports.ts_tree_cursor_start_index_wasm)(t),_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=t=>(_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=wasmExports.ts_tree_cursor_end_index_wasm)(t),_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=t=>(_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=wasmExports.ts_tree_cursor_current_field_id_wasm)(t),_ts_tree_cursor_current_depth_wasm=Module._ts_tree_cursor_current_depth_wasm=t=>(_ts_tree_cursor_current_depth_wasm=Module._ts_tree_cursor_current_depth_wasm=wasmExports.ts_tree_cursor_current_depth_wasm)(t),_ts_tree_cursor_current_descendant_index_wasm=Module._ts_tree_cursor_current_descendant_index_wasm=t=>(_ts_tree_cursor_current_descendant_index_wasm=Module._ts_tree_cursor_current_descendant_index_wasm=wasmExports.ts_tree_cursor_current_descendant_index_wasm)(t),_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=t=>(_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=wasmExports.ts_tree_cursor_current_node_wasm)(t),_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=t=>(_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=wasmExports.ts_node_symbol_wasm)(t),_ts_node_field_name_for_child_wasm=Module._ts_node_field_name_for_child_wasm=(t,e)=>(_ts_node_field_name_for_child_wasm=Module._ts_node_field_name_for_child_wasm=wasmExports.ts_node_field_name_for_child_wasm)(t,e),_ts_node_children_by_field_id_wasm=Module._ts_node_children_by_field_id_wasm=(t,e)=>(_ts_node_children_by_field_id_wasm=Module._ts_node_children_by_field_id_wasm=wasmExports.ts_node_children_by_field_id_wasm)(t,e),_ts_node_first_child_for_byte_wasm=Module._ts_node_first_child_for_byte_wasm=t=>(_ts_node_first_child_for_byte_wasm=Module._ts_node_first_child_for_byte_wasm=wasmExports.ts_node_first_child_for_byte_wasm)(t),_ts_node_first_named_child_for_byte_wasm=Module._ts_node_first_named_child_for_byte_wasm=t=>(_ts_node_first_named_child_for_byte_wasm=Module._ts_node_first_named_child_for_byte_wasm=wasmExports.ts_node_first_named_child_for_byte_wasm)(t),_ts_node_grammar_symbol_wasm=Module._ts_node_grammar_symbol_wasm=t=>(_ts_node_grammar_symbol_wasm=Module._ts_node_grammar_symbol_wasm=wasmExports.ts_node_grammar_symbol_wasm)(t),_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=t=>(_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=wasmExports.ts_node_child_count_wasm)(t),_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=t=>(_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=wasmExports.ts_node_named_child_count_wasm)(t),_ts_node_child_wasm=Module._ts_node_child_wasm=(t,e)=>(_ts_node_child_wasm=Module._ts_node_child_wasm=wasmExports.ts_node_child_wasm)(t,e),_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=(t,e)=>(_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=wasmExports.ts_node_named_child_wasm)(t,e),_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=(t,e)=>(_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=wasmExports.ts_node_child_by_field_id_wasm)(t,e),_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=t=>(_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=wasmExports.ts_node_next_sibling_wasm)(t),_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=t=>(_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=wasmExports.ts_node_prev_sibling_wasm)(t),_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=t=>(_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=wasmExports.ts_node_next_named_sibling_wasm)(t),_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=t=>(_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=wasmExports.ts_node_prev_named_sibling_wasm)(t),_ts_node_descendant_count_wasm=Module._ts_node_descendant_count_wasm=t=>(_ts_node_descendant_count_wasm=Module._ts_node_descendant_count_wasm=wasmExports.ts_node_descendant_count_wasm)(t),_ts_node_parent_wasm=Module._ts_node_parent_wasm=t=>(_ts_node_parent_wasm=Module._ts_node_parent_wasm=wasmExports.ts_node_parent_wasm)(t),_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=t=>(_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=wasmExports.ts_node_descendant_for_index_wasm)(t),_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=t=>(_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=wasmExports.ts_node_named_descendant_for_index_wasm)(t),_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=t=>(_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=wasmExports.ts_node_descendant_for_position_wasm)(t),_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=t=>(_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=wasmExports.ts_node_named_descendant_for_position_wasm)(t),_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=t=>(_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=wasmExports.ts_node_start_point_wasm)(t),_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=t=>(_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=wasmExports.ts_node_end_point_wasm)(t),_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=t=>(_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=wasmExports.ts_node_start_index_wasm)(t),_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=t=>(_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=wasmExports.ts_node_end_index_wasm)(t),_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=t=>(_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=wasmExports.ts_node_to_string_wasm)(t),_ts_node_children_wasm=Module._ts_node_children_wasm=t=>(_ts_node_children_wasm=Module._ts_node_children_wasm=wasmExports.ts_node_children_wasm)(t),_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=t=>(_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=wasmExports.ts_node_named_children_wasm)(t),_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=(t,e,r,n,o,s,a)=>(_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=wasmExports.ts_node_descendants_of_type_wasm)(t,e,r,n,o,s,a),_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=t=>(_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=wasmExports.ts_node_is_named_wasm)(t),_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=t=>(_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=wasmExports.ts_node_has_changes_wasm)(t),_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=t=>(_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=wasmExports.ts_node_has_error_wasm)(t),_ts_node_is_error_wasm=Module._ts_node_is_error_wasm=t=>(_ts_node_is_error_wasm=Module._ts_node_is_error_wasm=wasmExports.ts_node_is_error_wasm)(t),_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=t=>(_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=wasmExports.ts_node_is_missing_wasm)(t),_ts_node_is_extra_wasm=Module._ts_node_is_extra_wasm=t=>(_ts_node_is_extra_wasm=Module._ts_node_is_extra_wasm=wasmExports.ts_node_is_extra_wasm)(t),_ts_node_parse_state_wasm=Module._ts_node_parse_state_wasm=t=>(_ts_node_parse_state_wasm=Module._ts_node_parse_state_wasm=wasmExports.ts_node_parse_state_wasm)(t),_ts_node_next_parse_state_wasm=Module._ts_node_next_parse_state_wasm=t=>(_ts_node_next_parse_state_wasm=Module._ts_node_next_parse_state_wasm=wasmExports.ts_node_next_parse_state_wasm)(t),_ts_query_matches_wasm=Module._ts_query_matches_wasm=(t,e,r,n,o,s,a,c,l,u)=>(_ts_query_matches_wasm=Module._ts_query_matches_wasm=wasmExports.ts_query_matches_wasm)(t,e,r,n,o,s,a,c,l,u),_ts_query_captures_wasm=Module._ts_query_captures_wasm=(t,e,r,n,o,s,a,c,l,u)=>(_ts_query_captures_wasm=Module._ts_query_captures_wasm=wasmExports.ts_query_captures_wasm)(t,e,r,n,o,s,a,c,l,u),_iswalpha=Module._iswalpha=t=>(_iswalpha=Module._iswalpha=wasmExports.iswalpha)(t),_iswblank=Module._iswblank=t=>(_iswblank=Module._iswblank=wasmExports.iswblank)(t),_iswdigit=Module._iswdigit=t=>(_iswdigit=Module._iswdigit=wasmExports.iswdigit)(t),_iswlower=Module._iswlower=t=>(_iswlower=Module._iswlower=wasmExports.iswlower)(t),_iswupper=Module._iswupper=t=>(_iswupper=Module._iswupper=wasmExports.iswupper)(t),_iswxdigit=Module._iswxdigit=t=>(_iswxdigit=Module._iswxdigit=wasmExports.iswxdigit)(t),_memchr=Module._memchr=(t,e,r)=>(_memchr=Module._memchr=wasmExports.memchr)(t,e,r),_strlen=Module._strlen=t=>(_strlen=Module._strlen=wasmExports.strlen)(t),_strcmp=Module._strcmp=(t,e)=>(_strcmp=Module._strcmp=wasmExports.strcmp)(t,e),_strncat=Module._strncat=(t,e,r)=>(_strncat=Module._strncat=wasmExports.strncat)(t,e,r),_strncpy=Module._strncpy=(t,e,r)=>(_strncpy=Module._strncpy=wasmExports.strncpy)(t,e,r),_towlower=Module._towlower=t=>(_towlower=Module._towlower=wasmExports.towlower)(t),_towupper=Module._towupper=t=>(_towupper=Module._towupper=wasmExports.towupper)(t),_setThrew=(t,e)=>(_setThrew=wasmExports.setThrew)(t,e),__emscripten_stack_restore=t=>(__emscripten_stack_restore=wasmExports._emscripten_stack_restore)(t),__emscripten_stack_alloc=t=>(__emscripten_stack_alloc=wasmExports._emscripten_stack_alloc)(t),_emscripten_stack_get_current=()=>(_emscripten_stack_get_current=wasmExports.emscripten_stack_get_current)(),dynCall_jiji=Module.dynCall_jiji=(t,e,r,n,o)=>(dynCall_jiji=Module.dynCall_jiji=wasmExports.dynCall_jiji)(t,e,r,n,o),_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=t=>(_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=wasmExports.orig$ts_parser_timeout_micros)(t),_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=(t,e)=>(_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=wasmExports.orig$ts_parser_set_timeout_micros)(t,e);Module.AsciiToString=AsciiToString,Module.stringToUTF16=stringToUTF16;var calledRun;dependenciesFulfilled=function t(){calledRun||run(),calledRun||(dependenciesFulfilled=t)};function callMain(t=[]){var e=resolveGlobalSymbol("main").sym;if(e){t.unshift(thisProgram);var r=t.length,n=stackAlloc((r+1)*4),o=n;t.forEach(a=>{LE_HEAP_STORE_U32((o>>2)*4,stringToUTF8OnStack(a)),o+=4}),LE_HEAP_STORE_U32((o>>2)*4,0);try{var s=e(r,n);return exitJS(s,!0),s}catch(a){return handleException(a)}}}function run(t=arguments_){if(runDependencies>0||(preRun(),runDependencies>0))return;function e(){calledRun||(calledRun=!0,Module.calledRun=!0,!ABORT&&(initRuntime(),preMain(),Module.onRuntimeInitialized?.(),shouldRunNow&&callMain(t),postRun()))}Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("")},1),e()},1)):e()}if(Module.preInit)for(typeof Module.preInit=="function"&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;Module.noInitialRun&&(shouldRunNow=!1),run();let C=Module,INTERNAL={},SIZE_OF_INT=4,SIZE_OF_CURSOR=4*SIZE_OF_INT,SIZE_OF_NODE=5*SIZE_OF_INT,SIZE_OF_POINT=2*SIZE_OF_INT,SIZE_OF_RANGE=2*SIZE_OF_INT+2*SIZE_OF_POINT,ZERO_POINT={row:0,column:0},QUERY_WORD_REGEX=/[\w-.]*/g,PREDICATE_STEP_TYPE_CAPTURE=1,PREDICATE_STEP_TYPE_STRING=2,LANGUAGE_FUNCTION_REGEX=/^_?tree_sitter_\w+/,VERSION,MIN_COMPATIBLE_VERSION,TRANSFER_BUFFER,currentParseCallback,currentLogCallback;class ParserImpl{static init(){TRANSFER_BUFFER=C._ts_init(),VERSION=getValue(TRANSFER_BUFFER,"i32"),MIN_COMPATIBLE_VERSION=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}initialize(){C._ts_parser_new_wasm(),this[0]=getValue(TRANSFER_BUFFER,"i32"),this[1]=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}delete(){C._ts_parser_delete(this[0]),C._free(this[1]),this[0]=0,this[1]=0}setLanguage(e){let r;if(!e)r=0,e=null;else if(e.constructor===Language){r=e[0];let n=C._ts_language_version(r);if(n<MIN_COMPATIBLE_VERSION||VERSION<n)throw new Error(`Incompatible language version ${n}. Compatibility range ${MIN_COMPATIBLE_VERSION} through ${VERSION}.`)}else throw new Error("Argument must be a Language");return this.language=e,C._ts_parser_set_language(this[0],r),this}getLanguage(){return this.language}parse(e,r,n){if(typeof e=="string")currentParseCallback=(l,u)=>e.slice(l);else if(typeof e=="function")currentParseCallback=e;else throw new Error("Argument must be a string or a function");this.logCallback?(currentLogCallback=this.logCallback,C._ts_parser_enable_logger_wasm(this[0],1)):(currentLogCallback=null,C._ts_parser_enable_logger_wasm(this[0],0));let o=0,s=0;if(n?.includedRanges){o=n.includedRanges.length,s=C._calloc(o,SIZE_OF_RANGE);let l=s;for(let u=0;u<o;u++)marshalRange(l,n.includedRanges[u]),l+=SIZE_OF_RANGE}let a=C._ts_parser_parse_wasm(this[0],this[1],r?r[0]:0,s,o);if(!a)throw currentParseCallback=null,currentLogCallback=null,new Error("Parsing failed");let c=new Tree(INTERNAL,a,this.language,currentParseCallback);return currentParseCallback=null,currentLogCallback=null,c}reset(){C._ts_parser_reset(this[0])}getIncludedRanges(){C._ts_parser_included_ranges_wasm(this[0]);let e=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),n=new Array(e);if(e>0){let o=r;for(let s=0;s<e;s++)n[s]=unmarshalRange(o),o+=SIZE_OF_RANGE;C._free(r)}return n}getTimeoutMicros(){return C._ts_parser_timeout_micros(this[0])}setTimeoutMicros(e){C._ts_parser_set_timeout_micros(this[0],e)}setLogger(e){if(!e)e=null;else if(typeof e!="function")throw new Error("Logger callback must be a function");return this.logCallback=e,this}getLogger(){return this.logCallback}}class Tree{constructor(e,r,n,o){assertInternal(e),this[0]=r,this.language=n,this.textCallback=o}copy(){let e=C._ts_tree_copy(this[0]);return new Tree(INTERNAL,e,this.language,this.textCallback)}delete(){C._ts_tree_delete(this[0]),this[0]=0}edit(e){marshalEdit(e),C._ts_tree_edit_wasm(this[0])}get rootNode(){return C._ts_tree_root_node_wasm(this[0]),unmarshalNode(this)}rootNodeWithOffset(e,r){let n=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(n,e,"i32"),marshalPoint(n+SIZE_OF_INT,r),C._ts_tree_root_node_with_offset_wasm(this[0]),unmarshalNode(this)}getLanguage(){return this.language}walk(){return this.rootNode.walk()}getChangedRanges(e){if(e.constructor!==Tree)throw new TypeError("Argument must be a Tree");C._ts_tree_get_changed_ranges_wasm(this[0],e[0]);let r=getValue(TRANSFER_BUFFER,"i32"),n=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),o=new Array(r);if(r>0){let s=n;for(let a=0;a<r;a++)o[a]=unmarshalRange(s),s+=SIZE_OF_RANGE;C._free(n)}return o}getIncludedRanges(){C._ts_tree_included_ranges_wasm(this[0]);let e=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),n=new Array(e);if(e>0){let o=r;for(let s=0;s<e;s++)n[s]=unmarshalRange(o),o+=SIZE_OF_RANGE;C._free(r)}return n}}class Node{constructor(e,r){assertInternal(e),this.tree=r}get typeId(){return marshalNode(this),C._ts_node_symbol_wasm(this.tree[0])}get grammarId(){return marshalNode(this),C._ts_node_grammar_symbol_wasm(this.tree[0])}get type(){return this.tree.language.types[this.typeId]||"ERROR"}get grammarType(){return this.tree.language.types[this.grammarId]||"ERROR"}get endPosition(){return marshalNode(this),C._ts_node_end_point_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endIndex(){return marshalNode(this),C._ts_node_end_index_wasm(this.tree[0])}get text(){return getText(this.tree,this.startIndex,this.endIndex)}get parseState(){return marshalNode(this),C._ts_node_parse_state_wasm(this.tree[0])}get nextParseState(){return marshalNode(this),C._ts_node_next_parse_state_wasm(this.tree[0])}get isNamed(){return marshalNode(this),C._ts_node_is_named_wasm(this.tree[0])===1}get hasError(){return marshalNode(this),C._ts_node_has_error_wasm(this.tree[0])===1}get hasChanges(){return marshalNode(this),C._ts_node_has_changes_wasm(this.tree[0])===1}get isError(){return marshalNode(this),C._ts_node_is_error_wasm(this.tree[0])===1}get isMissing(){return marshalNode(this),C._ts_node_is_missing_wasm(this.tree[0])===1}get isExtra(){return marshalNode(this),C._ts_node_is_extra_wasm(this.tree[0])===1}equals(e){return this.id===e.id}child(e){return marshalNode(this),C._ts_node_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}namedChild(e){return marshalNode(this),C._ts_node_named_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldId(e){return marshalNode(this),C._ts_node_child_by_field_id_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldName(e){let r=this.tree.language.fields.indexOf(e);return r!==-1?this.childForFieldId(r):null}fieldNameForChild(e){marshalNode(this);let r=C._ts_node_field_name_for_child_wasm(this.tree[0],e);return r?AsciiToString(r):null}childrenForFieldName(e){let r=this.tree.language.fields.indexOf(e);return r!==-1&&r!==0?this.childrenForFieldId(r):[]}childrenForFieldId(e){marshalNode(this),C._ts_node_children_by_field_id_wasm(this.tree[0],e);let r=getValue(TRANSFER_BUFFER,"i32"),n=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),o=new Array(r);if(r>0){let s=n;for(let a=0;a<r;a++)o[a]=unmarshalNode(this.tree,s),s+=SIZE_OF_NODE;C._free(n)}return o}firstChildForIndex(e){marshalNode(this);let r=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(r,e,"i32"),C._ts_node_first_child_for_byte_wasm(this.tree[0]),unmarshalNode(this.tree)}firstNamedChildForIndex(e){marshalNode(this);let r=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(r,e,"i32"),C._ts_node_first_named_child_for_byte_wasm(this.tree[0]),unmarshalNode(this.tree)}get childCount(){return marshalNode(this),C._ts_node_child_count_wasm(this.tree[0])}get namedChildCount(){return marshalNode(this),C._ts_node_named_child_count_wasm(this.tree[0])}get firstChild(){return this.child(0)}get firstNamedChild(){return this.namedChild(0)}get lastChild(){return this.child(this.childCount-1)}get lastNamedChild(){return this.namedChild(this.namedChildCount-1)}get children(){if(!this._children){marshalNode(this),C._ts_node_children_wasm(this.tree[0]);let e=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._children=new Array(e),e>0){let n=r;for(let o=0;o<e;o++)this._children[o]=unmarshalNode(this.tree,n),n+=SIZE_OF_NODE;C._free(r)}}return this._children}get namedChildren(){if(!this._namedChildren){marshalNode(this),C._ts_node_named_children_wasm(this.tree[0]);let e=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._namedChildren=new Array(e),e>0){let n=r;for(let o=0;o<e;o++)this._namedChildren[o]=unmarshalNode(this.tree,n),n+=SIZE_OF_NODE;C._free(r)}}return this._namedChildren}descendantsOfType(e,r,n){Array.isArray(e)||(e=[e]),r||(r=ZERO_POINT),n||(n=ZERO_POINT);let o=[],s=this.tree.language.types;for(let d=0,f=s.length;d<f;d++)e.includes(s[d])&&o.push(d);let a=C._malloc(SIZE_OF_INT*o.length);for(let d=0,f=o.length;d<f;d++)setValue(a+d*SIZE_OF_INT,o[d],"i32");marshalNode(this),C._ts_node_descendants_of_type_wasm(this.tree[0],a,o.length,r.row,r.column,n.row,n.column);let c=getValue(TRANSFER_BUFFER,"i32"),l=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),u=new Array(c);if(c>0){let d=l;for(let f=0;f<c;f++)u[f]=unmarshalNode(this.tree,d),d+=SIZE_OF_NODE}return C._free(l),C._free(a),u}get nextSibling(){return marshalNode(this),C._ts_node_next_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousSibling(){return marshalNode(this),C._ts_node_prev_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get nextNamedSibling(){return marshalNode(this),C._ts_node_next_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousNamedSibling(){return marshalNode(this),C._ts_node_prev_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get descendantCount(){return marshalNode(this),C._ts_node_descendant_count_wasm(this.tree[0])}get parent(){return marshalNode(this),C._ts_node_parent_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForIndex(e,r=e){if(typeof e!="number"||typeof r!="number")throw new Error("Arguments must be numbers");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(n,e,"i32"),setValue(n+SIZE_OF_INT,r,"i32"),C._ts_node_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForIndex(e,r=e){if(typeof e!="number"||typeof r!="number")throw new Error("Arguments must be numbers");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(n,e,"i32"),setValue(n+SIZE_OF_INT,r,"i32"),C._ts_node_named_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForPosition(e,r=e){if(!isPoint(e)||!isPoint(r))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(n,e),marshalPoint(n+SIZE_OF_POINT,r),C._ts_node_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForPosition(e,r=e){if(!isPoint(e)||!isPoint(r))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(n,e),marshalPoint(n+SIZE_OF_POINT,r),C._ts_node_named_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}walk(){return marshalNode(this),C._ts_tree_cursor_new_wasm(this.tree[0]),new TreeCursor(INTERNAL,this.tree)}toString(){marshalNode(this);let e=C._ts_node_to_string_wasm(this.tree[0]),r=AsciiToString(e);return C._free(e),r}}class TreeCursor{constructor(e,r){assertInternal(e),this.tree=r,unmarshalTreeCursor(this)}delete(){marshalTreeCursor(this),C._ts_tree_cursor_delete_wasm(this.tree[0]),this[0]=this[1]=this[2]=0}reset(e){marshalNode(e),marshalTreeCursor(this,TRANSFER_BUFFER+SIZE_OF_NODE),C._ts_tree_cursor_reset_wasm(this.tree[0]),unmarshalTreeCursor(this)}resetTo(e){marshalTreeCursor(this,TRANSFER_BUFFER),marshalTreeCursor(e,TRANSFER_BUFFER+SIZE_OF_CURSOR),C._ts_tree_cursor_reset_to_wasm(this.tree[0],e.tree[0]),unmarshalTreeCursor(this)}get nodeType(){return this.tree.language.types[this.nodeTypeId]||"ERROR"}get nodeTypeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_type_id_wasm(this.tree[0])}get nodeStateId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_state_id_wasm(this.tree[0])}get nodeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_id_wasm(this.tree[0])}get nodeIsNamed(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_named_wasm(this.tree[0])===1}get nodeIsMissing(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_missing_wasm(this.tree[0])===1}get nodeText(){marshalTreeCursor(this);let e=C._ts_tree_cursor_start_index_wasm(this.tree[0]),r=C._ts_tree_cursor_end_index_wasm(this.tree[0]);return getText(this.tree,e,r)}get startPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_start_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_end_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get startIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_start_index_wasm(this.tree[0])}get endIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_end_index_wasm(this.tree[0])}get currentNode(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_wasm(this.tree[0]),unmarshalNode(this.tree)}get currentFieldId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_field_id_wasm(this.tree[0])}get currentFieldName(){return this.tree.language.fields[this.currentFieldId]}get currentDepth(){return marshalTreeCursor(this),C._ts_tree_cursor_current_depth_wasm(this.tree[0])}get currentDescendantIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_current_descendant_index_wasm(this.tree[0])}gotoFirstChild(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_first_child_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoLastChild(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_last_child_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoFirstChildForIndex(e){marshalTreeCursor(this),setValue(TRANSFER_BUFFER+SIZE_OF_CURSOR,e,"i32");let r=C._ts_tree_cursor_goto_first_child_for_index_wasm(this.tree[0]);return unmarshalTreeCursor(this),r===1}gotoFirstChildForPosition(e){marshalTreeCursor(this),marshalPoint(TRANSFER_BUFFER+SIZE_OF_CURSOR,e);let r=C._ts_tree_cursor_goto_first_child_for_position_wasm(this.tree[0]);return unmarshalTreeCursor(this),r===1}gotoNextSibling(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_next_sibling_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoPreviousSibling(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_previous_sibling_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoDescendant(e){marshalTreeCursor(this),C._ts_tree_cursor_goto_descendant_wasm(this.tree[0],e),unmarshalTreeCursor(this)}gotoParent(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_parent_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}}class Language{constructor(e,r){assertInternal(e),this[0]=r,this.types=new Array(C._ts_language_symbol_count(this[0]));for(let n=0,o=this.types.length;n<o;n++)C._ts_language_symbol_type(this[0],n)<2&&(this.types[n]=UTF8ToString(C._ts_language_symbol_name(this[0],n)));this.fields=new Array(C._ts_language_field_count(this[0])+1);for(let n=0,o=this.fields.length;n<o;n++){let s=C._ts_language_field_name_for_id(this[0],n);s!==0?this.fields[n]=UTF8ToString(s):this.fields[n]=null}}get version(){return C._ts_language_version(this[0])}get fieldCount(){return this.fields.length-1}get stateCount(){return C._ts_language_state_count(this[0])}fieldIdForName(e){let r=this.fields.indexOf(e);return r!==-1?r:null}fieldNameForId(e){return this.fields[e]||null}idForNodeType(e,r){let n=lengthBytesUTF8(e),o=C._malloc(n+1);stringToUTF8(e,o,n+1);let s=C._ts_language_symbol_for_name(this[0],o,n,r);return C._free(o),s||null}get nodeTypeCount(){return C._ts_language_symbol_count(this[0])}nodeTypeForId(e){let r=C._ts_language_symbol_name(this[0],e);return r?UTF8ToString(r):null}nodeTypeIsNamed(e){return!!C._ts_language_type_is_named_wasm(this[0],e)}nodeTypeIsVisible(e){return!!C._ts_language_type_is_visible_wasm(this[0],e)}nextState(e,r){return C._ts_language_next_state(this[0],e,r)}lookaheadIterator(e){let r=C._ts_lookahead_iterator_new(this[0],e);return r?new LookaheadIterable(INTERNAL,r,this):null}query(e){let r=lengthBytesUTF8(e),n=C._malloc(r+1);stringToUTF8(e,n,r+1);let o=C._ts_query_new(this[0],n,r,TRANSFER_BUFFER,TRANSFER_BUFFER+SIZE_OF_INT);if(!o){let g=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),v=getValue(TRANSFER_BUFFER,"i32"),E=UTF8ToString(n,v).length,y=e.substr(E,100).split(`
`)[0],S=y.match(QUERY_WORD_REGEX)[0],b;switch(g){case 2:b=new RangeError(`Bad node name '${S}'`);break;case 3:b=new RangeError(`Bad field name '${S}'`);break;case 4:b=new RangeError(`Bad capture name @${S}`);break;case 5:b=new TypeError(`Bad pattern structure at offset ${E}: '${y}'...`),S="";break;default:b=new SyntaxError(`Bad syntax at offset ${E}: '${y}'...`),S="";break}throw b.index=E,b.length=S.length,C._free(n),b}let s=C._ts_query_string_count(o),a=C._ts_query_capture_count(o),c=C._ts_query_pattern_count(o),l=new Array(a),u=new Array(s);for(let g=0;g<a;g++){let v=C._ts_query_capture_name_for_id(o,g,TRANSFER_BUFFER),E=getValue(TRANSFER_BUFFER,"i32");l[g]=UTF8ToString(v,E)}for(let g=0;g<s;g++){let v=C._ts_query_string_value_for_id(o,g,TRANSFER_BUFFER),E=getValue(TRANSFER_BUFFER,"i32");u[g]=UTF8ToString(v,E)}let d=new Array(c),f=new Array(c),p=new Array(c),h=new Array(c),_=new Array(c);for(let g=0;g<c;g++){let v=C._ts_query_predicates_for_pattern(o,g,TRANSFER_BUFFER),E=getValue(TRANSFER_BUFFER,"i32");h[g]=[],_[g]=[];let y=[],S=v;for(let b=0;b<E;b++){let w=getValue(S,"i32");S+=SIZE_OF_INT;let P=getValue(S,"i32");if(S+=SIZE_OF_INT,w===PREDICATE_STEP_TYPE_CAPTURE)y.push({type:"capture",name:l[P]});else if(w===PREDICATE_STEP_TYPE_STRING)y.push({type:"string",value:u[P]});else if(y.length>0){if(y[0].type!=="string")throw new Error("Predicates must begin with a literal value");let A=y[0].value,O=!0,L=!0,j;switch(A){case"any-not-eq?":case"not-eq?":O=!1;case"any-eq?":case"eq?":if(y.length!==3)throw new Error(`Wrong number of arguments to \`#${A}\` predicate. Expected 2, got ${y.length-1}`);if(y[1].type!=="capture")throw new Error(`First argument of \`#${A}\` predicate must be a capture. Got "${y[1].value}"`);if(L=!A.startsWith("any-"),y[2].type==="capture"){let N=y[1].name,G=y[2].name;_[g].push(Y=>{let J=[],ie=[];for(let ne of Y)ne.name===N&&J.push(ne.node),ne.name===G&&ie.push(ne.node);let oe=(ne,de,Ee)=>Ee?ne.text===de.text:ne.text!==de.text;return L?J.every(ne=>ie.some(de=>oe(ne,de,O))):J.some(ne=>ie.some(de=>oe(ne,de,O)))})}else{j=y[1].name;let N=y[2].value,G=J=>J.text===N,Y=J=>J.text!==N;_[g].push(J=>{let ie=[];for(let ne of J)ne.name===j&&ie.push(ne.node);let oe=O?G:Y;return L?ie.every(oe):ie.some(oe)})}break;case"any-not-match?":case"not-match?":O=!1;case"any-match?":case"match?":if(y.length!==3)throw new Error(`Wrong number of arguments to \`#${A}\` predicate. Expected 2, got ${y.length-1}.`);if(y[1].type!=="capture")throw new Error(`First argument of \`#${A}\` predicate must be a capture. Got "${y[1].value}".`);if(y[2].type!=="string")throw new Error(`Second argument of \`#${A}\` predicate must be a string. Got @${y[2].value}.`);j=y[1].name;let $=new RegExp(y[2].value);L=!A.startsWith("any-"),_[g].push(N=>{let G=[];for(let J of N)J.name===j&&G.push(J.node.text);let Y=(J,ie)=>ie?$.test(J):!$.test(J);return G.length===0?!O:L?G.every(J=>Y(J,O)):G.some(J=>Y(J,O))});break;case"set!":if(y.length<2||y.length>3)throw new Error(`Wrong number of arguments to \`#set!\` predicate. Expected 1 or 2. Got ${y.length-1}.`);if(y.some(N=>N.type!=="string"))throw new Error('Arguments to `#set!` predicate must be a strings.".');d[g]||(d[g]={}),d[g][y[1].value]=y[2]?y[2].value:null;break;case"is?":case"is-not?":if(y.length<2||y.length>3)throw new Error(`Wrong number of arguments to \`#${A}\` predicate. Expected 1 or 2. Got ${y.length-1}.`);if(y.some(N=>N.type!=="string"))throw new Error(`Arguments to \`#${A}\` predicate must be a strings.".`);let Q=A==="is?"?f:p;Q[g]||(Q[g]={}),Q[g][y[1].value]=y[2]?y[2].value:null;break;case"not-any-of?":O=!1;case"any-of?":if(y.length<2)throw new Error(`Wrong number of arguments to \`#${A}\` predicate. Expected at least 1. Got ${y.length-1}.`);if(y[1].type!=="capture")throw new Error(`First argument of \`#${A}\` predicate must be a capture. Got "${y[1].value}".`);for(let N=2;N<y.length;N++)if(y[N].type!=="string")throw new Error(`Arguments to \`#${A}\` predicate must be a strings.".`);j=y[1].name;let K=y.slice(2).map(N=>N.value);_[g].push(N=>{let G=[];for(let Y of N)Y.name===j&&G.push(Y.node.text);return G.length===0?!O:G.every(Y=>K.includes(Y))===O});break;default:h[g].push({operator:A,operands:y.slice(1)})}y.length=0}}Object.freeze(d[g]),Object.freeze(f[g]),Object.freeze(p[g])}return C._free(n),new Query(INTERNAL,o,l,_,h,Object.freeze(d),Object.freeze(f),Object.freeze(p))}static load(e){let r;if(e instanceof Uint8Array)r=Promise.resolve(e);else{let n=e;if(typeof process<"u"&&process.versions&&process.versions.node){let o=require("fs");r=Promise.resolve(o.readFileSync(n))}else r=fetch(n).then(o=>o.arrayBuffer().then(s=>{if(o.ok)return new Uint8Array(s);{let a=new TextDecoder("utf-8").decode(s);throw new Error(`Language.load failed with status ${o.status}.

${a}`)}}))}return r.then(n=>loadWebAssemblyModule(n,{loadAsync:!0})).then(n=>{let o=Object.keys(n),s=o.find(c=>LANGUAGE_FUNCTION_REGEX.test(c)&&!c.includes("external_scanner_"));s||console.log(`Couldn't find language function in WASM file. Symbols:
${JSON.stringify(o,null,2)}`);let a=n[s]();return new Language(INTERNAL,a)})}}class LookaheadIterable{constructor(e,r,n){assertInternal(e),this[0]=r,this.language=n}get currentTypeId(){return C._ts_lookahead_iterator_current_symbol(this[0])}get currentType(){return this.language.types[this.currentTypeId]||"ERROR"}delete(){C._ts_lookahead_iterator_delete(this[0]),this[0]=0}resetState(e){return C._ts_lookahead_iterator_reset_state(this[0],e)}reset(e,r){return C._ts_lookahead_iterator_reset(this[0],e[0],r)?(this.language=e,!0):!1}[Symbol.iterator](){let e=this;return{next(){return C._ts_lookahead_iterator_next(e[0])?{done:!1,value:e.currentType}:{done:!0,value:""}}}}}class Query{constructor(e,r,n,o,s,a,c,l){assertInternal(e),this[0]=r,this.captureNames=n,this.textPredicates=o,this.predicates=s,this.setProperties=a,this.assertedProperties=c,this.refutedProperties=l,this.exceededMatchLimit=!1}delete(){C._ts_query_delete(this[0]),this[0]=0}matches(e,{startPosition:r=ZERO_POINT,endPosition:n=ZERO_POINT,startIndex:o=0,endIndex:s=0,matchLimit:a=4294967295,maxStartDepth:c=4294967295}={}){if(typeof a!="number")throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_matches_wasm(this[0],e.tree[0],r.row,r.column,n.row,n.column,o,s,a,c);let l=getValue(TRANSFER_BUFFER,"i32"),u=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),d=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),f=new Array(l);this.exceededMatchLimit=!!d;let p=0,h=u;for(let _=0;_<l;_++){let g=getValue(h,"i32");h+=SIZE_OF_INT;let v=getValue(h,"i32");h+=SIZE_OF_INT;let E=new Array(v);if(h=unmarshalCaptures(this,e.tree,h,E),this.textPredicates[g].every(y=>y(E))){f[p]={pattern:g,captures:E};let y=this.setProperties[g];y&&(f[p].setProperties=y);let S=this.assertedProperties[g];S&&(f[p].assertedProperties=S);let b=this.refutedProperties[g];b&&(f[p].refutedProperties=b),p++}}return f.length=p,C._free(u),f}captures(e,{startPosition:r=ZERO_POINT,endPosition:n=ZERO_POINT,startIndex:o=0,endIndex:s=0,matchLimit:a=4294967295,maxStartDepth:c=4294967295}={}){if(typeof a!="number")throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_captures_wasm(this[0],e.tree[0],r.row,r.column,n.row,n.column,o,s,a,c);let l=getValue(TRANSFER_BUFFER,"i32"),u=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),d=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),f=[];this.exceededMatchLimit=!!d;let p=[],h=u;for(let _=0;_<l;_++){let g=getValue(h,"i32");h+=SIZE_OF_INT;let v=getValue(h,"i32");h+=SIZE_OF_INT;let E=getValue(h,"i32");if(h+=SIZE_OF_INT,p.length=v,h=unmarshalCaptures(this,e.tree,h,p),this.textPredicates[g].every(y=>y(p))){let y=p[E],S=this.setProperties[g];S&&(y.setProperties=S);let b=this.assertedProperties[g];b&&(y.assertedProperties=b);let w=this.refutedProperties[g];w&&(y.refutedProperties=w),f.push(y)}}return C._free(u),f}predicatesForPattern(e){return this.predicates[e]}disableCapture(e){let r=lengthBytesUTF8(e),n=C._malloc(r+1);stringToUTF8(e,n,r+1),C._ts_query_disable_capture(this[0],n,r),C._free(n)}didExceedMatchLimit(){return this.exceededMatchLimit}}function getText(t,e,r){let n=r-e,o=t.textCallback(e,null,r);for(e+=o.length;e<r;){let s=t.textCallback(e,null,r);if(s&&s.length>0)e+=s.length,o+=s;else break}return e>r&&(o=o.slice(0,n)),o}function unmarshalCaptures(t,e,r,n){for(let o=0,s=n.length;o<s;o++){let a=getValue(r,"i32");r+=SIZE_OF_INT;let c=unmarshalNode(e,r);r+=SIZE_OF_NODE,n[o]={name:t.captureNames[a],node:c}}return r}function assertInternal(t){if(t!==INTERNAL)throw new Error("Illegal constructor")}function isPoint(t){return t&&typeof t.row=="number"&&typeof t.column=="number"}function marshalNode(t){let e=TRANSFER_BUFFER;setValue(e,t.id,"i32"),e+=SIZE_OF_INT,setValue(e,t.startIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.startPosition.row,"i32"),e+=SIZE_OF_INT,setValue(e,t.startPosition.column,"i32"),e+=SIZE_OF_INT,setValue(e,t[0],"i32")}function unmarshalNode(t,e=TRANSFER_BUFFER){let r=getValue(e,"i32");if(e+=SIZE_OF_INT,r===0)return null;let n=getValue(e,"i32");e+=SIZE_OF_INT;let o=getValue(e,"i32");e+=SIZE_OF_INT;let s=getValue(e,"i32");e+=SIZE_OF_INT;let a=getValue(e,"i32"),c=new Node(INTERNAL,t);return c.id=r,c.startIndex=n,c.startPosition={row:o,column:s},c[0]=a,c}function marshalTreeCursor(t,e=TRANSFER_BUFFER){setValue(e+0*SIZE_OF_INT,t[0],"i32"),setValue(e+1*SIZE_OF_INT,t[1],"i32"),setValue(e+2*SIZE_OF_INT,t[2],"i32"),setValue(e+3*SIZE_OF_INT,t[3],"i32")}function unmarshalTreeCursor(t){t[0]=getValue(TRANSFER_BUFFER+0*SIZE_OF_INT,"i32"),t[1]=getValue(TRANSFER_BUFFER+1*SIZE_OF_INT,"i32"),t[2]=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),t[3]=getValue(TRANSFER_BUFFER+3*SIZE_OF_INT,"i32")}function marshalPoint(t,e){setValue(t,e.row,"i32"),setValue(t+SIZE_OF_INT,e.column,"i32")}function unmarshalPoint(t){return{row:getValue(t,"i32")>>>0,column:getValue(t+SIZE_OF_INT,"i32")>>>0}}function marshalRange(t,e){marshalPoint(t,e.startPosition),t+=SIZE_OF_POINT,marshalPoint(t,e.endPosition),t+=SIZE_OF_POINT,setValue(t,e.startIndex,"i32"),t+=SIZE_OF_INT,setValue(t,e.endIndex,"i32"),t+=SIZE_OF_INT}function unmarshalRange(t){let e={};return e.startPosition=unmarshalPoint(t),t+=SIZE_OF_POINT,e.endPosition=unmarshalPoint(t),t+=SIZE_OF_POINT,e.startIndex=getValue(t,"i32")>>>0,t+=SIZE_OF_INT,e.endIndex=getValue(t,"i32")>>>0,e}function marshalEdit(t){let e=TRANSFER_BUFFER;marshalPoint(e,t.startPosition),e+=SIZE_OF_POINT,marshalPoint(e,t.oldEndPosition),e+=SIZE_OF_POINT,marshalPoint(e,t.newEndPosition),e+=SIZE_OF_POINT,setValue(e,t.startIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.oldEndIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.newEndIndex,"i32"),e+=SIZE_OF_INT}for(let t of Object.getOwnPropertyNames(ParserImpl.prototype))Object.defineProperty(Parser.prototype,t,{value:ParserImpl.prototype[t],enumerable:!1,writable:!1});Parser.Language=Language,Module.onRuntimeInitialized=()=>{ParserImpl.init(),resolveInitPromise()}}))}}return Parser})();typeof exports=="object"&&(module.exports=TreeSitter)});var KS=m(eu=>{"use strict";var cNr=eu&&eu.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(eu,"__esModule",{value:!0});eu.WASMLanguage=void 0;eu.isSupportedLanguageId=uNr;eu.languageIdToWasmLanguage=rhe;eu.getLanguage=uat;eu.parseTreeSitter=fNr;eu.parseTreeSitterIncludingVersion=dat;eu.getBlockCloseToken=pNr;eu.queryPythonIsDocstring=gNr;var Xpe=cNr(cat()),lNr=ppe(),lat=hpe(),ci;(function(t){t.Python="python",t.JavaScript="javascript",t.TypeScript="typescript",t.TSX="tsx",t.Go="go",t.Ruby="ruby",t.CSharp="c-sharp",t.Java="java",t.Php="php",t.Cpp="cpp"})(ci||(eu.WASMLanguage=ci={}));var ehe={python:ci.Python,javascript:ci.JavaScript,javascriptreact:ci.JavaScript,jsx:ci.JavaScript,typescript:ci.TypeScript,typescriptreact:ci.TSX,go:ci.Go,ruby:ci.Ruby,csharp:ci.CSharp,java:ci.Java,php:ci.Php,c:ci.Cpp,cpp:ci.Cpp};function uNr(t){return t in ehe&&t!=="csharp"&&t!=="java"&&t!=="php"&&t!=="c"&&t!=="cpp"}function rhe(t){if(!(t in ehe))throw new Error(`Unrecognized language: ${t}`);return ehe[t]}var Jpe=new Map;async function dNr(t){let e;try{e=await(0,lat.readFile)(`tree-sitter-${t}.wasm`)}catch(r){throw r instanceof Error&&"code"in r&&typeof r.code=="string"&&r.name==="Error"?new lNr.CopilotPromptLoadFailure(`Could not load tree-sitter-${t}.wasm`,r):r}return Xpe.default.Language.load(e)}function uat(t){let e=rhe(t);if(!Jpe.has(e)){let r=dNr(e);Jpe.set(e,r)}return Jpe.get(e)}var the=class extends Error{constructor(e,r){super(e,{cause:r})}};async function fNr(t,e){return(await dat(t,e))[0]}async function dat(t,e){await Xpe.default.init({locateFile:s=>(0,lat.locateFile)(s)});let r;try{r=new Xpe.default}catch(s){throw s&&typeof s=="object"&&"message"in s&&typeof s.message=="string"&&s.message.includes("table index is out of bounds")?new the(`Could not init Parse for language <${t}>`,s):s}let n=await uat(t);r.setLanguage(n);let o=r.parse(e);return r.delete(),[o,n.version]}function pNr(t){switch(rhe(t)){case ci.Python:return null;case ci.JavaScript:case ci.TypeScript:case ci.TSX:case ci.Go:case ci.CSharp:case ci.Java:case ci.Php:case ci.Cpp:return"}";case ci.Ruby:return"end"}}function hNr(t,e){let r=[];for(let n of t){if(!n[1]){let o=e.tree.getLanguage();n[1]=o.query(n[0])}r.push(...n[1].matches(e))}return r}var mNr=[`[
	(class_definition (block (expression_statement (string))))
	(function_definition (block (expression_statement (string))))
]`];function gNr(t){return hNr([mNr],t).length===1}});var uhe=m(eP=>{"use strict";Object.defineProperty(eP,"__esModule",{value:!0});eP.StatementTree=eP.StatementNode=void 0;var _Nr=KS(),Tf=class{constructor(e){this.node=e,this.children=[],this.collapsed=!1}addChild(e){e.parent=this,e.nextSibling=void 0,this.children.length>0&&(this.children[this.children.length-1].nextSibling=e),this.children.push(e)}childrenFinished(){}containsStatement(e){return this.node.startIndex<=e.node.startIndex&&this.node.endIndex>=e.node.endIndex}statementAt(e){if(this.node.startIndex>e||this.node.endIndex<e)return;let r;return this.children.find(n=>(r=n.statementAt(e),r!==void 0)),r??this}collapse(){this.children.length=0,this.collapsed=!0}get description(){return`${this.node.type} ([${this.node.startPosition.row},${this.node.startPosition.column}]..[${this.node.endPosition.row},${this.node.endPosition.column}]): ${JSON.stringify(this.node.text.length>33?this.node.text.substring(0,15)+"..."+this.node.text.slice(-15):this.node.text)}`}dump(e="",r=""){let n=[`${e}${this.description}`];return this.children.forEach(o=>{n.push(o.dump(`${r}+- `,o.nextSibling===void 0?`${r}   `:`${r}|  `))}),n.join(`
`)}dumpPath(e="",r="",n=!1){if(this.parent){let o=this.parent.dumpPath(e,r,!0),s=o.length-o.lastIndexOf(`
`)-1-r.length,a=" ".repeat(s),c=n?`
${r}${a}+- `:"";return o+this.description+c}else{let o=n?`
${r}+- `:"";return e+this.description+o}}};eP.StatementNode=Tf;var ad=class{static isSupported(e){return ZI.languageIds.has(e)||JI.languageIds.has(e)||k4.languageIds.has(e)||XI.languageIds.has(e)||D4.languageIds.has(e)||U4.languageIds.has(e)||q4.languageIds.has(e)||F4.languageIds.has(e)||j4.languageIds.has(e)}static isTrimmedByDefault(e){return ZI.languageIds.has(e)||JI.languageIds.has(e)||XI.languageIds.has(e)}static create(e,r,n,o){if(ZI.languageIds.has(e))return new ZI(e,r,n,o);if(JI.languageIds.has(e))return new JI(e,r,n,o);if(k4.languageIds.has(e))return new k4(e,r,n,o);if(XI.languageIds.has(e))return new XI(e,r,n,o);if(q4.languageIds.has(e))return new q4(e,r,n,o);if(D4.languageIds.has(e))return new D4(e,r,n,o);if(U4.languageIds.has(e))return new U4(e,r,n,o);if(F4.languageIds.has(e))return new F4(e,r,n,o);if(j4.languageIds.has(e))return new j4(e,r,n,o);throw new Error(`Unsupported languageId: ${e}`)}constructor(e,r,n,o){this.languageId=e,this.text=r,this.startOffset=n,this.endOffset=o,this.statements=[]}[Symbol.dispose](){this.tree&&(this.tree.delete(),this.tree=void 0)}clear(){this.statements.length=0}statementAt(e){let r;return this.statements.find(n=>(r=n.statementAt(e),r!==void 0)),r}async build(){let e=[];this.clear();let r=await this.parse();this.getStatementQuery(r).captures(r.rootNode,{startPosition:this.offsetToPosition(this.startOffset),endPosition:this.offsetToPosition(this.endOffset)}).forEach(o=>{let s=this.createNode(o.node);for(;e.length>0&&!e[0].containsStatement(s);)e.shift()?.childrenFinished();e.length>0?e[0].addChild(s):this.addStatement(s),e.unshift(s)}),e.forEach(o=>o.childrenFinished())}addStatement(e){e.parent=void 0,e.nextSibling=void 0,this.statements.length>0&&(this.statements[this.statements.length-1].nextSibling=e),this.statements.push(e)}async parse(){return this.tree||(this.tree=await(0,_Nr.parseTreeSitter)(this.languageId,this.text)),this.tree}getStatementQuery(e){return this.getQuery(e.getLanguage(),this.getStatementQueryText())}getQuery(e,r){return e.query(r)}offsetToPosition(e){let r=this.text.slice(0,e).split(`
`),n=r.length-1,o=r[r.length-1].length;return{row:n,column:o}}dump(e=""){let r=[];return this.statements.forEach((n,o)=>{let s=`[${o}]`,a=" ".repeat(s.length);r.push(n.dump(`${e} ${s} `,`${e} ${a} `))}),r.join(`
`)}};eP.StatementTree=ad;var Q$=class t extends Tf{static{this.compoundTypeNames=new Set(["function_declaration","generator_function_declaration","class_declaration","statement_block","if_statement","switch_statement","for_statement","for_in_statement","while_statement","do_statement","try_statement","with_statement","labeled_statement","method_definition","interface_declaration"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"||this.node.startPosition.row!==this.node.endPosition.row?!1:this.children.length===1&&this.children[0].node.type!=="statement_block"||this.children.length===2&&this.node.childForFieldName("alternative")!==null&&this.children[0].node.type!=="statement_block"&&this.children[1].node.type!=="statement_block"}},ZI=class extends ad{static{this.languageIds=new Set(["javascript","javascriptreact","jsx"])}createNode(e){return new Q$(e)}getStatementQueryText(){return`[
			(export_statement)
			(import_statement)
			(debugger_statement)
			(expression_statement)
			(declaration)
			(statement_block)
			(if_statement)
			(switch_statement)
			(for_statement)
			(for_in_statement)
			(while_statement)
			(do_statement)
			(try_statement)
			(with_statement)
			(break_statement)
			(continue_statement)
			(return_statement)
			(throw_statement)
			(empty_statement)
			(labeled_statement)
			(method_definition)
			(field_definition)
		] @statement`}},JI=class extends ad{static{this.languageIds=new Set(["typescript","typescriptreact"])}createNode(e){return new Q$(e)}getStatementQueryText(){return`[
			(export_statement)
			(import_statement)
			(debugger_statement)
			(expression_statement)
			(declaration)
			(statement_block)
			(if_statement)
			(switch_statement)
			(for_statement)
			(for_in_statement)
			(while_statement)
			(do_statement)
			(try_statement)
			(with_statement)
			(break_statement)
			(continue_statement)
			(return_statement)
			(throw_statement)
			(empty_statement)
			(labeled_statement)
			(method_definition)
			(public_field_definition)
		] @statement`}},nhe=class t extends Tf{static{this.compoundTypeNames=new Set(["if_statement","for_statement","while_statement","try_statement","with_statement","function_definition","class_definition","decorated_definition","match_statement","block"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"?!1:this.node.startPosition.row===this.node.endPosition.row}},k4=class extends ad{static{this.languageIds=new Set(["python"])}createNode(e){return new nhe(e)}getStatementQueryText(){return`[
			(future_import_statement)
			(import_statement)
			(import_from_statement)
			(print_statement)
			(assert_statement)
			(expression_statement)
			(return_statement)
			(delete_statement)
			(raise_statement)
			(pass_statement)
			(break_statement)
			(continue_statement)
			(global_statement)
			(nonlocal_statement)
			(exec_statement)
			(if_statement)
			(for_statement)
			(while_statement)
			(try_statement)
			(with_statement)
			(function_definition)
			(class_definition)
			(decorated_definition)
			(match_statement)
			(block)
		] @statement`}},ihe=class t extends Tf{static{this.compoundTypeNames=new Set(["function_declaration","method_declaration","if_statement","for_statement","expression_switch_statement","type_switch_statement","select_statement","block"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}},XI=class extends ad{static{this.languageIds=new Set(["go"])}createNode(e){return new ihe(e)}getStatementQueryText(){return`[
			(package_clause)
			(function_declaration)
			(method_declaration)
			(import_declaration)
			(_statement)
			(block)
		] @statement`}},ohe=class t extends Tf{static{this.compoundTypeNames=new Set(["if_statement","else_clause","else_if_clause","for_statement","foreach_statement","while_statement","do_statement","switch_statement","try_statement","catch_clause","finally_clause","anonymous_function","compound_statement"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}},D4=class extends ad{static{this.languageIds=new Set(["php"])}createNode(e){return new ohe(e)}getStatementQueryText(){return`[
			(statement)
			(compound_statement)
			(method_declaration)
			(property_declaration)
			(const_declaration)
			(use_declaration)
		] @statement`}},she=class t extends Tf{static{this.compoundTypeNames=new Set(["if","case","while","until","for","begin","module","class","method"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}},U4=class extends ad{static{this.languageIds=new Set(["ruby"])}createNode(e){return new she(e)}getStatementQueryText(){return`[
			(_statement)
			(when)
		] @statement`}},ahe=class t extends Tf{static{this.compoundTypeNames=new Set(["block","do_statement","enhanced_for_statement","for_statement","if_statement","labeled_statement","switch_expression","synchronized_statement","try_statement","try_with_resources_statement","while_statement","interface_declaration","method_declaration","constructor_declaration","compact_constructor_declaration","class_declaration","annotation_type_declaration","static_initializer"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"||this.node.startPosition.row!==this.node.endPosition.row?!1:this.children.length===1&&this.children[0].node.type!=="block"}},q4=class extends ad{static{this.languageIds=new Set(["java"])}createNode(e){return new ahe(e)}getStatementQueryText(){return`[
			(statement)
			(field_declaration)
			(record_declaration)
			(method_declaration)
			(compact_constructor_declaration)
			(class_declaration)
			(interface_declaration)
			(annotation_type_declaration)
			(enum_declaration)
			(block)
			(static_initializer)
			(constructor_declaration)
			] @statement`}},che=class t extends Tf{static{this.compoundTypeNames=new Set(["block","checked_statement","class_declaration","constructor_declaration","destructor_declaration","do_statement","fixed_statement","for_statement","foreach_statement","if_statement","interface_declaration","lock_statement","method_declaration","struct_declaration","switch_statement","try_statement","unsafe_statement","while_statement"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"||this.node.startPosition.row!==this.node.endPosition.row?!1:this.children.length===1&&this.children[0].node.type!=="block"}},F4=class extends ad{static{this.languageIds=new Set(["csharp"])}createNode(e){return new che(e)}getStatementQueryText(){return`[
			(extern_alias_directive)
			(using_directive)
			(global_attribute)
			(preproc_if)
			(namespace_declaration)
			(file_scoped_namespace_declaration)
			(statement)
			(type_declaration)
			(declaration)
			(accessor_declaration)
			(block)
		] @statement`}},lhe=class t extends Tf{static{this.compoundTypeNames=new Set(["declaration","function_definition","enum_specifier","field_declaration_list","type_definition","compound_statement","if_statement","switch_statement","while_statement","for_statement","do_statement","preproc_if","preproc_ifdef","namespace_definition","class_specifier","field_declaration_list","concept_definition","template_declaration"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){(this.isSingleLineDeclarationStatement()||this.isSingleLineConceptDefinition())&&this.collapse()}isSingleLineDeclarationStatement(){return!(this.node.type!=="declaration"||this.node.startPosition.row!==this.node.endPosition.row)}isSingleLineConceptDefinition(){return!(this.node.type!=="concept_definition"||this.node.startPosition.row!==this.node.endPosition.row)}},j4=class extends ad{static{this.languageIds=new Set(["c","cpp"])}createNode(e){return new lhe(e)}getStatementQueryText(){return`[
			(declaration)
			(function_definition)
			(type_definition)
			(field_declaration)
			(enum_specifier)
			(return_statement)
			(compound_statement)
			(if_statement)
			(expression_statement)
			(switch_statement)
			(break_statement)
			(case_statement)
			(while_statement)
			(for_statement)
			(do_statement)
			(goto_statement)
			(labeled_statement)
			(preproc_if)
			(preproc_def)
			(preproc_ifdef)
			(preproc_include)
			(preproc_call)
			(preproc_function_def)
			(continue_statement)

			;C++ specific:
			(namespace_definition)
			(class_specifier)
			(field_declaration_list)
			(field_declaration)
			(concept_definition)
			(compound_requirement)
			(template_declaration)
			(using_declaration)
			(alias_declaration)
			(static_assert_declaration)
		] @statement`}}});var J$=m(Sf=>{"use strict";Object.defineProperty(Sf,"__esModule",{value:!0});Sf.BlockPositionType=Sf.TerseBlockTrimmer=Sf.VerboseBlockTrimmer=Sf.BlockTrimmer=void 0;Sf.getBlockPositionType=vNr;var Z$=uhe(),B4=class{static isSupported(e){return Z$.StatementTree.isSupported(e)}static isTrimmedByDefault(e){return Z$.StatementTree.isTrimmedByDefault(e)}constructor(e,r,n){this.languageId=e,this.prefix=r,this.completion=n}async withParsedStatementTree(e){let r=Z$.StatementTree.create(this.languageId,this.prefix+this.completion,this.prefix.length,this.prefix.length+this.completion.length);await r.build();try{return await e(r)}finally{r[Symbol.dispose]()}}trimmedCompletion(e){return e===void 0?this.completion:this.completion.substring(0,e)}getStatementAtCursor(e){return e.statementAt(Math.max(this.prefix.length-1,0))??e.statements[0]}getContainingBlockOffset(e){let r;if(e&&this.isCompoundStatement(e))r=e;else if(e){let n=e.parent;for(;n&&!this.isCompoundStatement(n);)n=n.parent;r=n}if(r){let n=this.asCompletionOffset(r.node.endIndex);if(n&&this.completion.substring(n).trim()!=="")return n}}hasNonStatementContentAfter(e){if(!e||!e.nextSibling)return!1;let r=this.asCompletionOffset(e.node.endIndex),n=this.asCompletionOffset(e.nextSibling.node.startIndex);return this.completion.substring(Math.max(0,r??0),Math.max(0,n??0)).trim()!==""}asCompletionOffset(e){return e===void 0?void 0:e-this.prefix.length}isCompoundStatement(e){return e.isCompoundStatementType||e.children.length>0}};Sf.BlockTrimmer=B4;var dhe=class extends B4{constructor(e,r,n,o=10){super(e,r,n),this.lineLimit=o;let s=[...this.completion.matchAll(/\n/g)];s.length>=this.lineLimit&&this.lineLimit>0?this.offsetLimit=s[this.lineLimit-1].index:this.offsetLimit=void 0}async getCompletionTrimOffset(){return await this.withParsedStatementTree(e=>{let r=this.getStatementAtCursor(e),n=this.getContainingBlockOffset(r);return this.isWithinLimit(n)||(n=this.trimToBlankLine(n)),this.isWithinLimit(n)||(n=this.trimToStatement(r,n)),n})}isWithinLimit(e){return this.offsetLimit===void 0||e!==void 0&&e<=this.offsetLimit}trimToBlankLine(e){let r=[...this.trimmedCompletion(e).matchAll(/\r?\n\s*\r?\n/g)].reverse();for(;r.length>0&&!this.isWithinLimit(e);)e=r.pop().index;return e}trimToStatement(e,r){let n=this.prefix.length,o=this.prefix.length+(this.offsetLimit??this.completion.length),s=e,a=e?.nextSibling;for(;a&&a.node.endIndex<=o&&!this.hasNonStatementContentAfter(s);)s=a,a=a.nextSibling;return s&&s===e&&s.node.endIndex<=n&&(s=a),s&&s.node.endIndex>o?this.trimToStatement(s.children[0],this.asCompletionOffset(s.node.endIndex)):this.asCompletionOffset(s?.node?.endIndex)??r}};Sf.VerboseBlockTrimmer=dhe;var fhe=class extends B4{constructor(e,r,n,o=3,s=7){super(e,r,n),this.lineLimit=o,this.lookAhead=s;let a=[...this.completion.matchAll(/\n/g)],c=this.lineLimit+this.lookAhead;a.length>=this.lineLimit&&this.lineLimit>0&&(this.limitOffset=a[this.lineLimit-1].index),a.length>=c&&c>0&&(this.lookAheadOffset=a[c-1].index)}async getCompletionTrimOffset(){return await this.withParsedStatementTree(e=>{let r=e.statementAt(this.stmtStartPos()),n=this.getContainingBlockOffset(r);return n=this.trimAtFirstBlankLine(n),r&&(n=this.trimAtStatementChange(r,n)),this.limitOffset&&this.lookAheadOffset&&(n===void 0||n>this.lookAheadOffset)?this.limitOffset:n})}stmtStartPos(){let e=this.completion.match(/\S/);return e&&e.index!==void 0?this.prefix.length+e.index:Math.max(this.prefix.length-1,0)}trimAtFirstBlankLine(e){let r=[...this.trimmedCompletion(e).matchAll(/\r?\n\s*\r?\n/g)];for(;r.length>0&&(e===void 0||e>r[0].index);){let n=r.shift();if(this.completion.substring(0,n.index).trim()!=="")return n.index}return e}trimAtStatementChange(e,r){let n=this.prefix.length,o=this.prefix.length+(r??this.completion.length);if(e.node.endIndex>n&&this.isCompoundStatement(e))return e.nextSibling&&e.node.endIndex<o?this.asCompletionOffset(e.node.endIndex):r;let s=e,a=e.nextSibling;for(;a&&a.node.endIndex<=o&&!this.hasNonStatementContentAfter(s)&&!this.isCompoundStatement(a);)s=a,a=a.nextSibling;return a&&s.node.endIndex>n&&s.node.endIndex<o?this.asCompletionOffset(s.node.endIndex):r}};Sf.TerseBlockTrimmer=fhe;var Um;(function(t){t.NonBlock="non-block",t.EmptyBlock="empty-block",t.BlockEnd="block-end",t.MidBlock="mid-block"})(Um||(Sf.BlockPositionType=Um={}));async function vNr(t,e){let r=t.getText(),n=t.offsetAt(e),o=Z$.StatementTree.create(t.detectedLanguageId,r,0,r.length);try{await o.build();let s=o.statementAt(n);if(!s)return Um.NonBlock;if(!s.isCompoundStatementType&&s.children.length===0)return s.parent&&!s.nextSibling&&s.node.endPosition.row<=e.line?Um.BlockEnd:s.parent?Um.MidBlock:Um.NonBlock;if(s.children.length===0)return Um.EmptyBlock;let a=s.children[s.children.length-1];return n<a.node.startIndex?Um.MidBlock:Um.BlockEnd}finally{o[Symbol.dispose]()}}});var mhe=m(bf=>{"use strict";var yNr=bf&&bf.__decorate||function(t,e,r,n){var o=arguments.length,s=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(o<3?a(s):o>3?a(e,r,s):a(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},fat=bf&&bf.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(bf,"__esModule",{value:!0});bf.ConfigBlockModeConfig=bf.ICompletionsBlockModeConfig=void 0;var ENr=Qe(),TNr=Nr(),Op=aat(),hat=KS(),pat=Gl(),SNr=Wa(),bNr=J$(),CNr=uhe();bf.ICompletionsBlockModeConfig=(0,ENr.createServiceIdentifier)("ICompletionsBlockModeConfig");var hhe=class{constructor(e,r){this.instantiationService=e,this.featuresService=r}forLanguage(e,r){let n=this.featuresService.overrideBlockMode(r);if(n)return phe(n,e);let o=this.featuresService.enableProgressiveReveal(r);return(this.instantiationService.invokeFunction(pat.getConfig,pat.ConfigKey.AlwaysRequestMultiline)??o)||bNr.BlockTrimmer.isTrimmedByDefault(e)?phe(Op.BlockMode.MoreMultiline,e):e==="ruby"?Op.BlockMode.Parsing:(0,hat.isSupportedLanguageId)(e)?Op.BlockMode.ParsingAndServer:Op.BlockMode.Server}};bf.ConfigBlockModeConfig=hhe;bf.ConfigBlockModeConfig=hhe=yNr([fat(0,TNr.IInstantiationService),fat(1,SNr.ICompletionsFeaturesService)],hhe);function ANr(t){return[Op.BlockMode.Parsing,Op.BlockMode.ParsingAndServer,Op.BlockMode.MoreMultiline].includes(t)}function phe(t,e){return t===Op.BlockMode.MoreMultiline&&CNr.StatementTree.isSupported(e)?t:ANr(t)&&!(0,hat.isSupportedLanguageId)(e)?Op.BlockMode.Server:t}});var $4=m(Cf=>{"use strict";var xNr=Cf&&Cf.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),wNr=Cf&&Cf.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),INr=Cf&&Cf.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),o=0;o<n.length;o++)n[o]!=="default"&&xNr(r,e,n[o]);return wNr(r,e),r}})();Object.defineProperty(Cf,"__esModule",{value:!0});Cf.createRequestHMAC=PNr;Cf.createSha256Hash=RNr;Cf.getCachedSha256Hash=ONr;var mat=V1(),X$=INr(Fo());async function PNr(t){if(!t)return;let e=await crypto.subtle.importKey("raw",new TextEncoder().encode(t),{name:"HMAC",hash:"SHA-256"},!1,["sign"]),r=Math.floor(Date.now()/1e3).toString(),o=new TextEncoder().encode(r),s=await crypto.subtle.sign("HMAC",e,o),c=Array.from(new Uint8Array(s)).map(l=>l.toString(16).padStart(2,"0")).join("");return`${r}.${c}`}async function RNr(t){let e=typeof t=="string"?new TextEncoder().encode(t):t,r=await crypto.subtle.digest("SHA-256",e),n=new Uint8Array(r),o="";for(let s of n)o+=s.toString(16).padStart(2,"0");return o}var ghe=new Map;function ONr(t){if(ghe.has(t))return ghe.get(t);let e=MNr(t);return ghe.set(t,e),e}function MNr(t){let e=new _he;return e.update(t),e.digest()}function Y1(t,e=32){return t instanceof ArrayBuffer?(0,mat.encodeHex)(mat.VSBuffer.wrap(new Uint8Array(t))):(t>>>0).toString(16).padStart(e/4,"0")}function Mp(t,e){return(t>>>e|t<<32-e)>>>0}var _he=class t{static{this._k=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]}static{this._bigBlock32=new DataView(new ArrayBuffer(256))}constructor(){this._h0=1779033703,this._h1=3144134277,this._h2=1013904242,this._h3=2773480762,this._h4=1359893119,this._h5=2600822924,this._h6=528734635,this._h7=1541459225,this._buff=new Uint8Array(67),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(e){let r=e.length;if(r===0)return;let n=this._buff,o=this._buffLen,s=this._leftoverHighSurrogate,a,c;for(s!==0?(a=s,c=-1,s=0):(a=e.charCodeAt(0),c=0);;){let l=a;if(X$.isHighSurrogate(a))if(c+1<r){let u=e.charCodeAt(c+1);X$.isLowSurrogate(u)?(c++,l=X$.computeCodePoint(a,u)):l=65533}else{s=a;break}else X$.isLowSurrogate(a)&&(l=65533);if(o=this._push(n,o,l),c++,c<r)a=e.charCodeAt(c);else break}this._buffLen=o,this._leftoverHighSurrogate=s}_push(e,r,n){return n<128?e[r++]=n:n<2048?(e[r++]=192|(n&1984)>>>6,e[r++]=128|(n&63)>>>0):n<65536?(e[r++]=224|(n&61440)>>>12,e[r++]=128|(n&4032)>>>6,e[r++]=128|(n&63)>>>0):(e[r++]=240|(n&1835008)>>>18,e[r++]=128|(n&258048)>>>12,e[r++]=128|(n&4032)>>>6,e[r++]=128|(n&63)>>>0),r>=64&&(this._step(),r-=64,this._totalLen+=64,e[0]=e[64],e[1]=e[65],e[2]=e[66]),r}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),Y1(this._h0)+Y1(this._h1)+Y1(this._h2)+Y1(this._h3)+Y1(this._h4)+Y1(this._h5)+Y1(this._h6)+Y1(this._h7)}_wrapUp(){this._buff[this._buffLen++]=128,this._buff.subarray(this._buffLen).fill(0),this._buffLen>56&&(this._step(),this._buff.fill(0));let e=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(e/4294967296),!1),this._buffDV.setUint32(60,e%4294967296,!1),this._step()}_step(){let e=t._bigBlock32,r=this._buffDV,n=t._k;for(let p=0;p<64;p+=4)e.setUint32(p,r.getUint32(p,!1),!1);for(let p=16;p<64;p++){let h=p*4,_=e.getUint32((p-15)*4,!1),g=e.getUint32((p-2)*4,!1),v=Mp(_,7)^Mp(_,18)^_>>>3,E=Mp(g,17)^Mp(g,19)^g>>>10,y=e.getUint32((p-16)*4,!1),S=e.getUint32((p-7)*4,!1);e.setUint32(h,y+v+S+E>>>0,!1)}let o=this._h0,s=this._h1,a=this._h2,c=this._h3,l=this._h4,u=this._h5,d=this._h6,f=this._h7;for(let p=0;p<64;p++){let h=Mp(l,6)^Mp(l,11)^Mp(l,25),_=l&u^~l&d,g=f+h+_+n[p]+e.getUint32(p*4,!1)>>>0,v=Mp(o,2)^Mp(o,13)^Mp(o,22),E=o&s^o&a^s&a,y=v+E>>>0;f=d,d=u,u=l,l=c+g>>>0,c=a,a=s,s=o,o=g+y>>>0}this._h0=this._h0+o>>>0,this._h1=this._h1+s>>>0,this._h2=this._h2+a>>>0,this._h3=this._h3+c>>>0,this._h4=this._h4+l>>>0,this._h5=this._h5+u>>>0,this._h6=this._h6+d>>>0,this._h7=this._h7+f>>>0}}});var tu=m(YS=>{"use strict";Object.defineProperty(YS,"__esModule",{value:!0});YS.Response=YS.IFetcherService=void 0;YS.jsonVerboseError=LNr;var NNr=Qe();YS.IFetcherService=(0,NNr.createServiceIdentifier)("IFetcherService");var vhe=class{constructor(e,r,n,o,s,a,c){this.status=e,this.statusText=r,this.headers=n,this.getText=o,this.getJson=s,this.getBody=a,this.fetcher=c,this.ok=this.status>=200&&this.status<300}async text(){return this.getText()}async json(){return this.getJson()}async body(){return this.getBody()}};YS.Response=vhe;async function LNr(t){let e=await t.text();try{return JSON.parse(e)}catch(r){let n=e.split(`
`),o=n.length>50?[...n.slice(0,25),"[...]",...n.slice(n.length-25)].join(`
`):e;throw r.message=`${r.message}. Response: ${o}`,r}}});var gat=m(V4=>{"use strict";Object.defineProperty(V4,"__esModule",{value:!0});V4.Response=void 0;V4.isAbortError=DNr;var kNr=tu();Object.defineProperty(V4,"Response",{enumerable:!0,get:function(){return kNr.Response}});var yhe=class extends Error{constructor(e,r){super(e,{cause:r}),this.name="HttpTimeoutError"}};function DNr(t){return!t||typeof t!="object"?!1:t instanceof yhe||"name"in t&&t.name==="AbortError"||"code"in t&&t.code==="ABORT_ERR"}});var tP=m(Po=>{"use strict";var UNr=Po&&Po.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),qNr=Po&&Po.__decorate||function(t,e,r,n){var o=arguments.length,s=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(o<3?a(s):o>3?a(e,r,s):a(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},FNr=Po&&Po.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&UNr(e,t,r)},Ehe=Po&&Po.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(Po,"__esModule",{value:!0});Po.Fetcher=Po.CompletionsFetcher=Po.ICompletionsFetcherService=void 0;Po.postRequest=HNr;var _at=Gl(),The=Ps();FNr(gat(),Po);var yat=Ni(),vat=Q0(),jNr=tu(),BNr=Vo(),$Nr=Qe(),VNr=Nr();Po.ICompletionsFetcherService=(0,$Nr.createServiceIdentifier)("ICompletionsFetcherService");var She=class{constructor(e,r,n){this.configurationService=e,this.fetcherService=r,this.experimentationService=n}getImplementation(){return this}fetch(e,r){let n=this.configurationService.getExperimentBasedConfig(yat.ConfigKey.CompletionsFetcher,this.experimentationService)||void 0;return this.fetcherService.fetch(e,n?{...r,useFetcher:n}:r)}disconnectAll(){return this.fetcherService.disconnectAll()}};Po.CompletionsFetcher=She;Po.CompletionsFetcher=She=qNr([Ehe(0,yat.IConfigurationService),Ehe(1,jNr.IFetcherService),Ehe(2,BNr.IExperimentationService)],She);var bhe=class{getImplementation(){return this}};Po.Fetcher=bhe;function HNr(t,e,r,n,o,s,a,c,l,u){let d=t.get(Po.ICompletionsFetcherService),f=t.get(VNr.IInstantiationService),p={...c,Authorization:`Bearer ${r}`,...f.invokeFunction(_at.editorVersionHeaders)};u===void 0&&(p["Openai-Organization"]="github-copilot",p["X-Request-Id"]=o,p["VScode-SessionId"]=t.get(vat.IEnvService).sessionId,p["VScode-MachineId"]=t.get(vat.IEnvService).machineId,p["X-GitHub-Api-Version"]=_at.apiVersion),n&&(p["OpenAI-Intent"]=n);let h={method:"POST",headers:p,json:s,timeout:l};if(a){let g=new AbortController;a.onCancellationRequested(()=>{f.invokeFunction(The.telemetry,"networking.cancelRequest",The.TelemetryData.createAndMarkAsIssued({headerRequestId:o})),g.abort()}),h.signal=g.signal}return d.fetch(e,h).catch(g=>{if(GNr(g))return f.invokeFunction(The.telemetry,"networking.disconnectAll"),d.disconnectAll().then(()=>d.fetch(e,h));throw g})}function GNr(t){return t instanceof Error?t.message==="ERR_HTTP2_GOAWAY_SESSION"?!0:"code"in t?t.code==="ECONNRESET"||t.code==="ETIMEDOUT"||t.code==="ERR_HTTP2_INVALID_SESSION":!1:!1}});var Eat=m(Af=>{"use strict";Object.defineProperty(Af,"__esModule",{value:!0});Af.asyncIterableMap=zNr;Af.asyncIterableFilter=WNr;Af.asyncIterableMapFilter=KNr;Af.asyncIterableFromArray=YNr;Af.asyncIterableToArray=QNr;Af.asyncIterableConcat=ZNr;Af.asyncIterableCount=JNr;Af.iterableMap=XNr;Af.iterableMapFilter=e4r;async function*zNr(t,e){for await(let r of t)yield e(r)}async function*WNr(t,e){for await(let r of t)await e(r)&&(yield r)}async function*KNr(t,e){for await(let r of t){let n=await e(r);n!==void 0&&(yield n)}}async function*YNr(t){for(let e of t)yield Promise.resolve(e)}async function QNr(t){let e=[];for await(let r of t)e.push(r);return e}async function*ZNr(...t){for(let e of t)yield*e}async function JNr(t){let e=0;for await(let r of t)e++;return e}function*XNr(t,e){for(let r of t)yield e(r)}function*e4r(t,e){for(let r of t){let n=e(r);n!==void 0&&(yield n)}}});var rP={};Xs(rP,{CAPIClient:()=>s4r,RequestType:()=>Sat});async function i4r(t){if(!t)return;let e=await crypto.subtle.importKey("raw",new TextEncoder().encode(t),{name:"HMAC",hash:"SHA-256"},!1,["sign"]),r=Math.floor(Date.now()/1e3).toString(),n=new TextEncoder().encode(r),o=await crypto.subtle.sign("HMAC",e,n),s=Array.from(new Uint8Array(o)).map(a=>a.toString(16).padStart(2,"0")).join("");return`${r}.${s}`}function o4r(t){return new Set(["ChatCompletions","ChatResponses","ChatMessages","CAPIEmbeddings","Models","RemoteAgent","CodeReviewAgent","RemoteAgentChat","ListSkills","SearchSkill","ModelPolicy","ListModel","AutoModels","CopilotSessionLogs","CopilotSessionDetails","CopilotSessions","CopilotAgentJob","CopilotCustomAgents"]).has(t)}var t4r,Che,H4,r4r,n4r,Sat,s4r,nP=q(()=>{t4r=class{async fetch(t,e){let r={method:e.method||"GET",headers:e.headers,signal:e.signal};e.json?(r.body=JSON.stringify(e.json),r.headers={"Content-Type":"application/json",...r.headers}):e.body&&(r.body=e.body);let n,o;e.timeout&&!e.signal&&(o=new AbortController,r.signal=o.signal,n=setTimeout(()=>{o.abort()},e.timeout));try{let s=await fetch(t,r);return n&&clearTimeout(n),s}catch(s){throw n&&clearTimeout(n),s}}async fetchWithPagination(t,e){let r=[],n=e.pageSize??20,o=e.startPage??1,s=!1;do{let a=e.buildUrl(t,n,o),c=await this.fetch(a,e);if(!c.ok)return r;let l=await c.json(),u=e.getItemsFromResponse(l);r.push(...u),s=u.length===n,o++}while(s);return r}},Che=class Tat{constructor(){this._telemetryBaseUrl="https://copilot-telemetry.githubusercontent.com",this._originTrackerUrl="https://origin-tracker.githubusercontent.com",this._dotcomAPIUrl=this._getDotComAPIUrl(),this._proxyBaseUrl=this._getProxyUrl(void 0),this._capiBaseUrl=this._getCAPIUrl(void 0)}updateDomains(e,r){let n=this._dotcomAPIUrl,o=this._capiBaseUrl,s=this._telemetryBaseUrl,a=this._proxyBaseUrl;return this._enterpriseUrlConfig!==r&&(this._enterpriseUrlConfig=r,this._dotcomAPIUrl=this._getDotComAPIUrl()),e?(this._proxyBaseUrl=this._getProxyUrl(e),this._capiBaseUrl=this._getCAPIUrl(e),this._telemetryBaseUrl=e.endpoints.telemetry||"https://copilot-telemetry.githubusercontent.com",e.endpoints["origin-tracker"]&&(this._originTrackerUrl=e.endpoints["origin-tracker"])):(this._capiBaseUrl="https://api.githubcopilot.com",this._telemetryBaseUrl="https://copilot-telemetry.githubusercontent.com"),{dotcomUrlChanged:n!==this._dotcomAPIUrl,capiUrlChanged:o!==this._capiBaseUrl,telemetryUrlChanged:s!==this._telemetryBaseUrl,proxyUrlChanged:a!==this._proxyBaseUrl}}_getDotComAPIUrl(){if(this._enterpriseUrlConfig)try{let e=new URL(this._enterpriseUrlConfig);return`${e.protocol}//api.${e.hostname}${e.port?":"+e.port:""}`}catch(e){return console.warn("Failed to parse enterprise URL config:",this._enterpriseUrlConfig,e),"https://api.github.com"}return"https://api.github.com"}_getCAPIUrl(e){return e&&e.endpoints.api||"https://api.githubcopilot.com"}_getProxyUrl(e){return e&&e.endpoints.proxy||Tat.DEFAULT_PROXY_BASE_URL}get proxyBaseURL(){return this._proxyBaseUrl}get capiBaseURL(){return this._capiBaseUrl}get capiChatURL(){return`${this._capiBaseUrl}/chat/completions`}get capiResponsesURL(){return`${this._capiBaseUrl}/responses`}get capiMessagesURL(){return`${this._capiBaseUrl}/v1/messages`}get capiEmbeddingsURL(){return`${this._capiBaseUrl}/embeddings`}get capiModelsURL(){return`${this._capiBaseUrl}/models`}get capiAutoModelURL(){return`${this.capiModelsURL}/session`}get embeddingsModelURL(){return`${this.embeddingsURL}/models`}get chunksURL(){return`${this.dotComAPIURL}/chunks`}get embeddingsURL(){return`${this.dotComAPIURL}/embeddings`}get embeddingsCodeSearchURL(){return`${this.dotComAPIURL}/embeddings/code/search`}get telemetryURL(){return`${this._telemetryBaseUrl}/telemetry`}get remoteAgentsURL(){return`${this._capiBaseUrl}/agents`}get listSkillsURL(){return`${this._capiBaseUrl}/skills`}get searchSkillURL(){return`${this._capiBaseUrl}/search`}get contentExclusionURL(){return`${this._dotcomAPIUrl}/copilot_internal/content_exclusion`}get copilotUserInfoURL(){return`${this._dotcomAPIUrl}/copilot_internal/user`}get tokenURL(){return this._dotcomAPIUrl+"/copilot_internal/v2/token"}get tokenNoAuthURL(){return`${this._dotcomAPIUrl}/copilot_internal/v2/nltoken`}get dotComAPIURL(){return this._dotcomAPIUrl}get originTrackerURL(){return this._originTrackerUrl}get chatAttachmentUploadURL(){return"https://uploads.github.com/copilot/chat/attachments"}get copilotAgentSessionsURL(){return`${this._capiBaseUrl}/agents/sessions`}get copilotAgentJobsURL(){return`${this._capiBaseUrl}/agents/swe`}get copilotCustomAgentsURL(){return`${this._capiBaseUrl}/agents/swe/custom-agents`}};Che.DEFAULT_PROXY_BASE_URL="https://copilot-proxy.githubusercontent.com",Che.CAPI_MODEL_LAB_URL="https://api-model-lab.githubcopilot.com";H4=Che,r4r=`The \u201C@vscode/copilot-api\u201D npm Module Terms and Conditions ("Terms") are a legal agreement between you (either as an individual or on behalf of an entity) and GitHub, Inc. regarding your use of \u201C@vscode/copilot-api\u201D npm library and associated documentation (collectively, the "Software"). By using the Software, you accept these Terms. Please read all of these Terms; in many cases, provisions set forth later in the Terms limit and qualify provisions set forth earlier in the Terms. If you do not accept these Terms, do not download, install, use, or copy the Software.

IF YOU COMPLY WITH THESE LICENSE TERMS, YOU HAVE THE RIGHTS BELOW.

1. INSTALLATION AND USE RIGHTS. You may install and use any number of copies of the software only with the Visual Studio Code or Code-OSS and successor Microsoft products and services for use with GitHub Copilot. The use with Code-OSS is allowed for development purposes only. No other use is permitted. 

2. TERMS FOR SPECIFIC COMPONENTS. The software may include third party components with separate legal notices or governed by other agreements, as may be described in the notices file(s) accompanying the software.

3. SCOPE OF LICENSE. The software is licensed, not sold. This agreement only gives you some rights to use the software. GitHub reserves all other rights. Unless applicable law gives you more rights despite this limitation, you may use the software only as expressly permitted in this agreement. In doing so, you must comply with any technical limitations in the software that only allow you to use it in certain ways. You may not: 
  a) work around any technical limitations in the software;
  b) reverse engineer, decompile or disassemble the software, or otherwise attempt to derive the source code for the software except, and only to the extent required by third party licensing terms governing the use of certain open source components that may be included in the software;
  c) remove, minimize, block or modify any notices of GitHub or its suppliers in the software; 
  d) use the Software to create or propagate malware, or in any other way that is prohibited by law; 
  e) share, publish, rent or lease the software, except in combining the software with GitHub applications; or 
  f) provide the software as a stand-alone offering or combined with any of your applications for others to use, or transfer the software or this agreement to any third party, except in combining the software with GitHub applications. 

4. EXPORT RESTRICTIONS. You must comply with all domestic and international export laws and regulations that apply to the software, which include restrictions on destinations, end users, and end use.

5. SUPPORT SERVICES. Because this software is "as is," we may not provide support services for it.

6. FEEDBACK.  If you give feedback about the software to GitHub, you give to GitHub the right to use, share, and commercialize your feedback in any way and for any purpose, without payment to you. You agree that you will not give feedback that is subject to any license that would require GitHub to license its software or documentation to third parties if we included your feedback in them.

7. ENTIRE AGREEMENT. This agreement, and the terms for supplements, updates, Internet-based services and support services that you use, are the entire agreement for this Software and support services. These Terms may only be modified by a written amendment signed by an authorized representative of GitHub, or by the posting by GitHub of a revised version.

8. APPLICABLE LAW. If you acquired the software in the United States, California law applies to interpretation of and claims for breach of this agreement, and the laws of the state where you live apply to all other claims. If you acquired the software in any other country, its laws apply.

9. CONSUMER RIGHTS; REGIONAL VARIATIONS. This agreement describes certain legal rights. You may have other rights, including consumer rights, under the laws of your state or country. Separate and apart from your relationship with GitHub, you may also have rights with respect to the party from which you acquired the software. This agreement does not change those other rights if the laws of your state or country do not permit it to do so. For example, if you acquired the software in one of the below regions, or mandatory country law applies, then the following provisions apply to you:
a. Australia. You have statutory guarantees under the Australian Consumer Law and nothing in this agreement is intended to affect those rights.

b. Canada. If you acquired this software in Canada, you may stop receiving updates by turning off the automatic update feature, disconnecting your device from the Internet (if and when you re-connect to the Internet, however, the software will resume checking for and installing updates), or uninstalling the software. The product documentation, if any, may also specify how to turn off updates for your specific device or software.

c. Germany and Austria.
(i)	Warranty. The properly licensed software will perform substantially as described in any GitHub materials that accompany the software. However, GitHub gives no contractual guarantee in relation to the licensed software.
(ii)	Limitation of Liability. In case of intentional conduct, gross negligence, claims based on the Product Liability Act, as well as, in case of death or personal or physical injury, GitHub is liable according to the statutory law.
Subject to the foregoing clause (ii), GitHub will only be liable for slight negligence if GitHub is in breach of such material contractual obligations, the fulfillment of which facilitate the due performance of this agreement, the breach of which would endanger the purpose of this agreement and the compliance with which a party may constantly trust in (so-called "cardinal obligations"). In other cases of slight negligence, GitHub will not be liable for slight negligence.

10. DISCLAIMER OF WARRANTY. THE SOFTWARE IS LICENSED "AS-IS." YOU BEAR THE RISK OF USING IT. GITHUB GIVES NO EXPRESS WARRANTIES, GUARANTEES OR CONDITIONS. TO THE EXTENT PERMITTED UNDER YOUR LOCAL LAWS, GITHUB EXCLUDES THE IMPLIED WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT.

11. LIMITATION ON AND EXCLUSION OF DAMAGES. YOU CAN RECOVER FROM GITHUB AND ITS SUPPLIERS ONLY DIRECT DAMAGES UP TO U.S. $50.00. YOU CANNOT RECOVER ANY OTHER DAMAGES, INCLUDING CONSEQUENTIAL, LOST PROFITS, SPECIAL, INDIRECT OR INCIDENTAL DAMAGES.

This limitation applies to (a) anything related to the software, services, content (including code) on third party Internet sites, or third party applications; and (b) claims for breach of contract, breach of warranty, guarantee or condition, strict liability, negligence, or other tort to the extent permitted by applicable law.

It also applies even if GitHub knew or should have known about the possibility of the damages. The above limitation or exclusion may not apply to you because your country may not allow the exclusion or limitation of incidental, consequential or other damages.`,n4r=`I have read and agree to the following license terms:

${r4r}
`,Sat=(t=>(t.CopilotToken="CopilotToken",t.CopilotNLToken="CopilotNLToken",t.ChatCompletions="ChatCompletions",t.ChatResponses="ChatResponses",t.ChatMessages="ChatMessages",t.ProxyCompletions="ProxyCompletions",t.ProxyChatCompletions="ProxyChatCompletions",t.RemoteAgent="RemoteAgent",t.RemoteAgentChat="RemoteAgentChat",t.CodeReviewAgent="CodeReviewAgent",t.CAPIEmbeddings="CAPIEmbeddings",t.DotcomEmbeddings="DotcomEmbeddings",t.EmbeddingsModels="EmbeddingsModels",t.Models="Models",t.AutoModels="AutoModels",t.Chunks="Chunks",t.EmbeddingsCodeSearch="EmbeddingsCodeSearch",t.ListSkills="ListSkills",t.SearchSkill="SearchSkill",t.ContentExclusion="ContentExclusion",t.Telemetry="Telemetry",t.CopilotUserInfo="CopilotUserInfo",t.ModelPolicy="ModelPolicy",t.ListModel="ListModel",t.SnippyMatch="SnippyMatch",t.SnippyFilesForMatch="SnippyFlesForMatch",t.CodingGuidelines="CodingGuidelines",t.EmbeddingsIndex="EmbedingsIndex",t.ChatAttachmentUpload="ChatAttachmentUpload",t.CopilotSessionLogs="CopilotSessionLogs",t.CopilotSessionDetails="CopilotSessionDetails",t.CopilotSessions="CopilotSessions",t.CopilotAgentJob="CopilotAgentJob",t.CopilotCustomAgents="CopilotCustomAgents",t.CopilotCustomAgentsDetail="CopilotCustomAgentsDetail",t.OrgCustomInstructions="OrgCustomInstructions",t))(Sat||{});s4r=class{constructor(t,e,r,n,o){if(this._extensionInfo=t,this._integrationId=o,this._licenseCheckSucceeded=!1,e&&e===n4r&&(this._licenseCheckSucceeded=!0),this._domainService=new H4,this._fetcherService=r??new t4r,this._hmacSecret=n,this._integrationId==="vscode-chat"||this._integrationId==="code-oss")throw new Error(`Integration ID ${this._integrationId} is reserved and cannot be used.`)}updateDomains(t,e){return t&&t.sku&&(this._copilotSku=t.sku),this._domainService.updateDomains(t,e)}async makeRequest(t,e){let{type:r}=e;switch(await this._mixinHeaders(t,e),r){case"CopilotToken":return this._fetcherService.fetch(this._domainService.tokenURL,t);case"CopilotNLToken":return this._fetcherService.fetch(this._domainService.tokenNoAuthURL,t);case"ProxyCompletions":return this._fetcherService.fetch(`${this._domainService.proxyBaseURL}/v1/engines/gpt-4o-copilot/completions`,t);case"ProxyChatCompletions":return this._fetcherService.fetch(`${this._domainService.proxyBaseURL}/chat/completions`,t);case"RemoteAgent":return this._fetcherService.fetch(this._domainService.remoteAgentsURL,t);case"CodeReviewAgent":return this._fetcherService.fetch(`${this._domainService.remoteAgentsURL}/github-code-review`,t);case"CAPIEmbeddings":return this._fetcherService.fetch(this._domainService.capiEmbeddingsURL,t);case"DotcomEmbeddings":return this._fetcherService.fetch(this._domainService.embeddingsURL,t);case"EmbeddingsModels":return this._fetcherService.fetch(this._domainService.embeddingsModelURL,t);case"Chunks":return this._fetcherService.fetch(this._domainService.chunksURL,t);case"EmbeddingsCodeSearch":return this._fetcherService.fetch(this._domainService.embeddingsCodeSearchURL,t);case"ListSkills":return this._fetcherService.fetch(this._domainService.listSkillsURL,t);case"Telemetry":return this._fetcherService.fetch(this._domainService.telemetryURL,t);case"CopilotUserInfo":return this._fetcherService.fetch(this._domainService.copilotUserInfoURL,t);case"SnippyMatch":return this._fetcherService.fetch(`${this._domainService.originTrackerURL}/twirp/github.snippy.v1.SnippyAPI/Match`,t);case"SnippyFlesForMatch":return this._fetcherService.fetch(`${this._domainService.originTrackerURL}/twirp/github.snippy.v1.SnippyAPI/FilesForMatch`,t);case"EmbedingsIndex":if(!("repoWithOwner"in e))throw new Error("repoWithOwner is required for EmbeddingsIndex request");return this._fetcherService.fetch(`${this._domainService.dotComAPIURL}/repos/${e.repoWithOwner}/copilot_internal/embeddings_index`,t);case"CodingGuidelines":if(!("repoWithOwner"in e))throw new Error("repoWithOwner is required for CodingGuidelines request");return this._fetcherService.fetch(`${this._domainService.dotComAPIURL}/repos/${e.repoWithOwner}/copilot_internal/coding_guidelines`,t);case"EmbeddingsModels":return this._fetcherService.fetch(this._domainService.embeddingsModelURL,t);case"AutoModels":return this._fetcherService.fetch(this._domainService.capiAutoModelURL,t);case"Models":return"isModelLab"in e&&e.isModelLab?this._fetcherService.fetch(`${H4.CAPI_MODEL_LAB_URL}/models`,t):this._fetcherService.fetch(this._domainService.capiModelsURL,t);case"ChatCompletions":return"isModelLab"in e&&e.isModelLab?this._fetcherService.fetch(`${H4.CAPI_MODEL_LAB_URL}/chat/completions`,t):this._fetcherService.fetch(this._domainService.capiChatURL,t);case"ChatResponses":return"isModelLab"in e&&e.isModelLab?this._fetcherService.fetch(`${H4.CAPI_MODEL_LAB_URL}/responses`,t):this._fetcherService.fetch(this._domainService.capiResponsesURL,t);case"ChatMessages":return"isModelLab"in e&&e.isModelLab?this._fetcherService.fetch(`${H4.CAPI_MODEL_LAB_URL}/v1/messages`,t):this._fetcherService.fetch(this._domainService.capiMessagesURL,t);case"ContentExclusion":if(!("repos"in e))throw new Error("Repos are required for ContentExclusion request");return this._fetcherService.fetch(this._prepareContentExclusionUrl(e.repos),t);case"RemoteAgentChat":return"slug"in e&&e.slug?this._fetcherService.fetch(`${this._domainService.remoteAgentsURL}/${e.slug}?chat`,t):this._fetcherService.fetch(`${this._domainService.remoteAgentsURL}/chat`,t);case"SearchSkill":if(!("slug"in e))throw new Error("Skill slug is required for SearchSkill request");return this._fetcherService.fetch(`${this._domainService.searchSkillURL}/${e.slug}`,t);case"ModelPolicy":if(!("modelId"in e))throw new Error("Model ID is required for ModelPolicy request");return this._fetcherService.fetch(`${this._domainService.capiModelsURL}/${e.modelId}/policy`,t);case"ListModel":if(!("modelId"in e))throw new Error("Model ID is required for ListModel request");return this._fetcherService.fetch(`${this._domainService.capiModelsURL}/${e.modelId}`,t);case"ChatAttachmentUpload":if(!("uploadName"in e)||!("mimeType"in e))throw new Error("uploadName and mimeType are required for ChatAttachmentUpload request");return this._fetcherService.fetch(`${this._domainService.chatAttachmentUploadURL}?name=${e.uploadName}&content_type=${e.mimeType}`,t);case"CopilotSessionLogs":if(!("sessionId"in e))throw new Error("sessionId is required for CopilotSessionLogs request");return this._fetcherService.fetch(`${this._domainService.copilotAgentSessionsURL}/${e.sessionId}/logs`,t);case"CopilotSessionDetails":if(!("sessionId"in e))throw new Error("sessionId is required for CopilotSessionDetails request");return this._fetcherService.fetch(`${this._domainService.copilotAgentSessionsURL}/${e.sessionId}`,t);case"CopilotSessions":let n={...t,getItemsFromResponse:o=>{let s=o;return s&&Array.isArray(s.sessions)?s.sessions:[]},buildUrl:(o,s,a)=>{let c=new URL(o);return c.searchParams.set("page_size",s.toString()),c.searchParams.set("page_number",a.toString()),"resourceState"in e&&e.resourceState&&c.searchParams.set("resource_state",e.resourceState),"nwo"in e&&e.nwo&&c.searchParams.set("repo_nwo",e.nwo),c.toString()}};return"prId"in e&&e.prId?this._fetcherService.fetch(`${this._domainService.copilotAgentSessionsURL}/resource/pull/${e.prId}`,t):this._fetcherService.fetchWithPagination(this._domainService.copilotAgentSessionsURL,n);case"CopilotAgentJob":if(!("owner"in e)||!("repo"in e))throw new Error("owner and repo are required for CopilotAgentJob request");if("jobId"in e&&e.jobId){let o="apiVersion"in e&&e.apiVersion||"v1";return this._fetcherService.fetch(`${this._domainService.copilotAgentJobsURL}/${o}/jobs/${e.owner}/${e.repo}/${e.jobId}`,t)}if("sessionId"in e&&e.sessionId){let o="apiVersion"in e&&e.apiVersion||"v1";return this._fetcherService.fetch(`${this._domainService.copilotAgentJobsURL}/${o}/jobs/${e.owner}/${e.repo}/session/${e.sessionId}`,t)}if("payload"in e&&e.payload){let o="apiVersion"in e&&e.apiVersion||"v1";return this._fetcherService.fetch(`${this._domainService.copilotAgentJobsURL}/${o}/jobs/${e.owner}/${e.repo}`,t)}throw new Error("jobId or sessionId is required for CopilotAgentJob request");case"CopilotCustomAgents":{if(!("owner"in e)||!("repo"in e))throw new Error("owner and repo are required for CopilotCustomAgents request");let o=new URL(`${this._domainService.copilotCustomAgentsURL}/${e.owner}/${e.repo}`);return"target"in e&&e.target&&o.searchParams.set("target",e.target),"exclude_invalid_config"in e&&e.exclude_invalid_config!==void 0&&o.searchParams.set("exclude_invalid_config",e.exclude_invalid_config.toString()),"dedupe"in e&&e.dedupe!==void 0&&o.searchParams.set("dedupe",e.dedupe.toString()),"include_sources"in e&&e.include_sources&&o.searchParams.set("include_sources",e.include_sources.join(",")),this._fetcherService.fetch(o.toString(),t)}case"CopilotCustomAgentsDetail":{if(!("owner"in e)||!("repo"in e)||!("customAgentName"in e))throw new Error("owner, repo and customAgentName are required for CopilotCustomAgents request");let o=new URL(`${this._domainService.copilotCustomAgentsURL}/${e.owner}/${e.repo}/${e.customAgentName}`);return"version"in e&&e.version&&o.searchParams.set("version",e.version),this._fetcherService.fetch(o.toString(),t)}case"OrgCustomInstructions":if(!("orgLogin"in e))throw new Error("orgLogin is required for OrgCustomInstructions request");return this._fetcherService.fetch(`${this._domainService.dotComAPIURL}/copilot_internal/org_custom_instructions/${e.orgLogin}`,t);default:throw new Error(`Unsupported request type: ${r}`)}}_prepareContentExclusionUrl(t){let e=t.join(","),r=new URL(this._domainService.contentExclusionURL);return t.length!==0&&r.searchParams.set("repos",e),r.searchParams.set("scope","repo"),r.toString()}async _mixinHeaders(t,e){if(!o4r(e.type))return;let r=t.headers||{};r["X-GitHub-Api-Version"]="2025-10-01",r["VScode-SessionId"]=this._extensionInfo.sessionId,r["VScode-MachineId"]=this._extensionInfo.machineId,r["Editor-Plugin-Version"]=`copilot-chat/${this._extensionInfo.version}`,r["Editor-Version"]=`vscode/${this._extensionInfo.vscodeVersion}`;let n="";t.suppressIntegrationId||(n="code-oss",this._integrationId&&this._hmacSecret?n=this._integrationId:this._copilotSku==="no_auth_limited_copilot"?n="vscode-nl":this._licenseCheckSucceeded&&this._extensionInfo.buildType==="prod"?n="vscode-chat":this._extensionInfo.buildType==="dev"&&this._hmacSecret&&(n="vscode-chat-dev"),r["Copilot-Integration-Id"]=n),n==="vscode-chat-dev"&&(r["Request-Hmac"]=await i4r(this._hmacSecret)),t.headers=r}get copilotTelemetryURL(){return this._domainService.telemetryURL}get dotcomAPIURL(){return this._domainService.dotComAPIURL}get capiPingURL(){return`${this._domainService.capiBaseURL}/_ping`}get proxyBaseURL(){return this._domainService.proxyBaseURL}get originTrackerURL(){return this._domainService.originTrackerURL}get snippyMatchPath(){return"twirp/github.snippy.v1.SnippyAPI/Match"}get snippyFilesForMatchPath(){return"twirp/github.snippy.v1.SnippyAPI/FilesForMatch"}}});var bat=m(eV=>{"use strict";Object.defineProperty(eV,"__esModule",{value:!0});eV.LICENSE_AGREEMENT=void 0;eV.LICENSE_AGREEMENT=void 0});var tl=m(iP=>{"use strict";Object.defineProperty(iP,"__esModule",{value:!0});iP.ICAPIClientService=iP.BaseCAPIClientService=void 0;var a4r=(nP(),cn(rP)),c4r=Qe(),l4r=bat(),Ahe=class extends a4r.CAPIClient{constructor(e,r,n,o){super({machineId:o.machineId,sessionId:o.sessionId,vscodeVersion:o.vscodeVersion,buildType:o.getBuildType(),name:o.getName(),version:o.getVersion()},l4r.LICENSE_AGREEMENT,n,e,r)}makeRequest(e,r){return this.abExpContext&&(e.headers||(e.headers={}),e.headers["VScode-ABExpContext"]=this.abExpContext),super.makeRequest(e,r)}};iP.BaseCAPIClientService=Ahe;iP.ICAPIClientService=(0,c4r.createServiceIdentifier)("ICAPIClientService")});var QS=m(oP=>{"use strict";Object.defineProperty(oP,"__esModule",{value:!0});oP.RuntimeMode=oP.ICompletionsRuntimeModeService=void 0;var u4r=Qe();oP.ICompletionsRuntimeModeService=(0,u4r.createServiceIdentifier)("completionsRuntimeModeService");var xhe=class t{constructor(e){this.flags=e}static fromEnvironment(e,r=process.argv,n=process.env){return new t({debug:Cat(r,n),verboseLogging:f4r(r,n),testMode:e,simulation:d4r(n)})}isRunningInTest(){return this.flags.testMode}shouldFailForDebugPurposes(){return this.isRunningInTest()}isDebugEnabled(){return this.flags.debug}isVerboseLoggingEnabled(){return this.flags.verboseLogging}isRunningInSimulation(){return this.flags.simulation}};oP.RuntimeMode=xhe;function Cat(t,e){return t.includes("--debug")||whe(e,"DEBUG")}function d4r(t){return whe(t,"SIMULATION")}function f4r(t,e){return e.COPILOT_AGENT_VERBOSE==="1"||e.COPILOT_AGENT_VERBOSE?.toLowerCase()==="true"||whe(e,"VERBOSE")||Cat(t,e)}function whe(t,e){for(let r of["GH_COPILOT_","GITHUB_COPILOT_"]){let n=t[`${r}${e}`];if(n)return n==="1"||n?.toLowerCase()==="true"}return!1}});var rV=m(tV=>{"use strict";Object.defineProperty(tV,"__esModule",{value:!0});tV.getEndpointUrl=v4r;tV.getLastKnownEndpoints=y4r;var p4r=ha(),h4r=tl(),Q1=Gl(),m4r=QS(),g4r=W1();function xat(t){let e=t.get(h4r.ICAPIClientService);return{proxy:e.proxyBaseURL,"origin-tracker":e.originTrackerURL}}function Aat(t,e,r){if(r!==void 0&&t.get(m4r.ICompletionsRuntimeModeService).isRunningInTest()){for(let n of r){let o=(0,Q1.getConfig)(t,n);if(o)return o}return}for(let n of e){let o=(0,Q1.getConfig)(t,n);if(o)return o}}function _4r(t,e){switch(e){case"proxy":return Aat(t,[Q1.ConfigKey.DebugOverrideProxyUrl,Q1.ConfigKey.DebugOverrideProxyUrlLegacy],[Q1.ConfigKey.DebugTestOverrideProxyUrl,Q1.ConfigKey.DebugTestOverrideProxyUrlLegacy]);case"origin-tracker":if(!Q1.BuildInfo.isProduction())return Aat(t,[Q1.ConfigKey.DebugSnippyOverrideUrl])}}function v4r(t,e,r,...n){let o=_4r(t,r)??(e.endpoints?e.endpoints[r]:void 0)??xat(t)[r];return(0,g4r.joinPath)(o,...n)}function y4r(t){return t.get(p4r.IAuthenticationService).copilotToken?.endpoints??xat(t)}});var iV=m(Z1=>{"use strict";Object.defineProperty(Z1,"__esModule",{value:!0});Z1.NoOpStatusReporter=Z1.StatusReporter=Z1.ICompletionsStatusReporter=void 0;var E4r=Qe();Z1.ICompletionsStatusReporter=(0,E4r.createServiceIdentifier)("ICompletionsStatusReporter");var nV=class{#e=0;#t="Normal";#r;#n;#o=!0;get busy(){return this.#e>0}withProgress(e){return this.#t==="Warning"&&this.forceNormal(),this.#e++===0&&this.#i(),e().finally(()=>{--this.#e===0&&this.#i()})}forceStatus(e,r,n){this.#t===e&&this.#r===r&&!n&&!this.#n&&!this.#o||(this.#t=e,this.#r=r,this.#n=n,this.#o=!1,this.#i())}forceNormal(){this.#t!=="Inactive"&&this.forceStatus("Normal")}setError(e,r){this.forceStatus("Error",e,r)}setWarning(e){this.#t!=="Error"&&this.forceStatus("Warning",e)}setInactive(e){this.#t==="Error"||this.#t==="Warning"||this.forceStatus("Inactive",e)}clearInactive(){this.#t==="Inactive"&&this.forceStatus("Normal")}#i(){let e={kind:this.#t,message:this.#r,busy:this.busy,command:this.#n};this.didChange(e)}};Z1.StatusReporter=nV;var Ihe=class extends nV{didChange(){}};Z1.NoOpStatusReporter=Ihe});var Pat=m(ya=>{"use strict";Object.defineProperty(ya,"__esModule",{value:!0});ya.AdoRepoId=ya.GithubRepoId=ya.IGitService=void 0;ya.getGitHubRepoInfoFromContext=b4r;ya.getOrderedRepoInfosFromContext=C4r;ya.getOrderedRemoteUrlsFromContext=Rhe;ya.parseRemoteUrl=Ohe;ya.toGithubNwo=wat;ya.getGithubRepoIdFromFetchUrl=Mhe;ya.getAdoRepoIdFromFetchUrl=Iat;ya.normalizeFetchUrl=A4r;var T4r=Qe(),Phe=Fo(),S4r=Bi();ya.IGitService=(0,T4r.createServiceIdentifier)("IGitService");function b4r(t){for(let e of Rhe(t))if(e){let r=Mhe(e);if(r)return{id:r,remoteUrl:e}}}function*C4r(t){for(let e of Rhe(t)){let r=Mhe(e)??Iat(e);r&&(yield{repoId:r,fetchUrl:e})}}function Rhe(t){let e=new Set;if(t.remoteFetchUrls?.length===1)return e.add(t.remoteFetchUrls[0]),e;let r=t.remotes.findIndex(o=>o===t.upstreamRemote);if(r!==-1){let o=t.remoteFetchUrls?.[r];o&&e.add(o)}let n=t.remotes.findIndex(o=>o==="origin");if(n!==-1){let o=t.remoteFetchUrls?.[n];o&&e.add(o)}for(let o of t.remoteFetchUrls??[])o&&e.add(o);return e}function Ohe(t){t=t.trim();try{if(/^[\w\d\-]+@/i.test(t)){let c=t.split(":");if(c.length!==2)return;t="ssh://"+c[0]+"/"+c[1]}let e=S4r.URI.parse(t),r=e.authority,n=e.path;if(!((0,Phe.equalsIgnoreCase)(e.scheme,"ssh")||(0,Phe.equalsIgnoreCase)(e.scheme,"https")||(0,Phe.equalsIgnoreCase)(e.scheme,"http")))return;let o=r.split("@");if(o.length>2)return;let s=o.at(-1);return s?{host:s.toLowerCase().replace(/:\d+$/,"").replace(/^[\w\-]+-/,"").replace(/-[\w\-]+$/,""),path:n}:void 0}catch{return}}var oV=class t{static parse(e){let r=e.split("/");if(r.length===2)return new t(r[0],r[1])}constructor(e,r){this.org=e,this.repo=r,this.type="github"}toString(){return wat(this)}};ya.GithubRepoId=oV;function wat(t){return`${t.org}/${t.repo}`.toLowerCase()}function Mhe(t){let e=Ohe(t);if(!e||!["github.com","ghe.com"].find(s=>e.host===s||e.host.endsWith("."+s)))return;let o=e.path.match(/^\/?([^/]+)\/([^/]+?)(\/|\.git\/?)?$/i);return o?new oV(o[1],o[2]):void 0}var sP=class{constructor(e,r,n){this.org=e,this.project=r,this.repo=n,this.type="ado"}toString(){return`${this.org}/${this.project}/${this.repo}`.toLowerCase()}};ya.AdoRepoId=sP;function Iat(t){let e=Ohe(t);if(e){if(e.host==="dev.azure.com"){let r=e.path.match(/^\/?(?<org>[^/]+)\/(?<project>[^/]+?)\/_git\/(?:_(?:optimized|full)\/)?(?<repo>[^/]+?)(\.git|\/)?$/i);return r?.groups?new sP(r.groups.org,r.groups.project,r.groups.repo):void 0}if(e.host==="ssh.dev.azure.com"){let r=e.path.match(/^\/?v3\/(?<org>[^/]+)\/(?<project>[^/]+?)\/(?:_(?:optimized|full)\/)?(?<repo>[^/]+?)(\.git|\/)?$/i);return r?.groups?new sP(r.groups.org,r.groups.project,r.groups.repo):void 0}if(e.host.endsWith(".visualstudio.com")){let r=e.host.match(/^(?<org>[^\.]+)\.visualstudio\.com$/i);if(!r?.groups)return;let n=e.path.match(/^\/(v3\/)(?<org>[^/]+?)\/(?<project>[^/]+?)\/(?:_(?:optimized|full)\/)?(?<repo>[^/]+?)(\.git|\/)?$/i)??e.path.match(/^\/?((?<collection>[^/]+?)\/)?(?<project>[^/]+?)\/_git\/(?:_(?:optimized|full)\/)?(?<repo>[^/]+?)(\.git|\/)?$/i);return n?.groups?new sP(r.groups.org,n.groups.project,n.groups.repo):void 0}}}function A4r(t){if(/^[\w\d\-]+@[\w\d\.\-]+:/.test(t))return t=t.replace(/([\w\d\-]+)@([\w\d\.\-]+):(.+)/,"https://$2/$3"),t;let e;try{e=new URL(t)}catch{return t}let r=e.pathname.match(/^\/scm\/scm\.git/),n=new URL("https://"+e.hostname+e.pathname);return!r&&/^\/scm\/[^/]/.test(n.pathname)&&(n.pathname=n.pathname.replace(/^\/scm\//,"/")),n.toString()}});var khe=m(ZS=>{"use strict";Object.defineProperty(ZS,"__esModule",{value:!0});ZS.ComputationStatus=void 0;ZS.tryGetGitHubNWO=I4r;ZS.extractRepoInfoInBackground=P4r;ZS.extractRepoInfo=Rat;var Nhe=Pat(),x4r=G1(),w4r=Dm(),G4=W1();function I4r(t){if(t!==void 0&&t!==z4.PENDING&&t.repoId?.type==="github")return(t.repoId.org+"/"+t.repoId.repo).toLowerCase()}function P4r(t,e){let r=(0,G4.dirname)(e);return R4r(t,r)}var R4r=L4r(Rat,1e4);async function Rat(t,e){let r=t.get(x4r.ICompletionsFileSystemService),n=(0,G4.getFsUri)(e);if(!n)return;let o=await M4r(r,n);if(!o)return;let s=(0,G4.joinPath)(o,".git","config"),a;try{a=await r.readFileString(s)}catch{return}let c=N4r(a)??"",l=O4r(c),u={uri:o};return l===void 0?{baseFolder:u,url:c,hostname:"",pathname:"",repoId:void 0}:{baseFolder:u,url:c,hostname:l.host,pathname:l.path,repoId:l.repoId}}function O4r(t){let e=(0,Nhe.parseRemoteUrl)(t);if(!e)return;let r=(0,Nhe.getGithubRepoIdFromFetchUrl)(t)??(0,Nhe.getAdoRepoIdFromFetchUrl)(t);return{...e,repoId:r}}async function M4r(t,e){let r=e+"_add_to_make_longer";for(;e!=="file:///"&&e.length<r.length;){let n=(0,G4.joinPath)(e,".git","config"),o=!1;try{await t.stat(n),o=!0}catch{o=!1}if(o)return e;r=e,e=(0,G4.dirname)(e)}}function N4r(t){let e=/^\s*\[\s*remote\s+"((\\\\|\\"|[^\\"])+)"/,r=/^\s*\[remote.([^"\s]+)/,n=/^\s*url\s*=\s*([^\s#;]+)/,o=/^\s*\[/,s,a,c=!1;for(let l of t.split(`
`))if(c&&s!==void 0){if(s+=l,l.endsWith("\\"))s=s.substring(0,s.length-1);else if(c=!1,a==="origin")return s}else{let u=l.match(e)??l.match(r);if(u)a=u[1];else if(l.match(o))a=void 0;else{if(s&&a!=="origin")continue;{let d=l.match(n);if(d){if(s=d[1],s.endsWith("\\"))s=s.substring(0,s.length-1),c=!0;else if(a==="origin")return s}}}}return s}var z4;(function(t){t[t.PENDING=0]="PENDING"})(z4||(ZS.ComputationStatus=z4={}));var Lhe=class{constructor(e){this.result=e}};function L4r(t,e){let r=new w4r.LRUCacheMap(e),n=new Set;return(o,...s)=>{let a=JSON.stringify(s),c=r.get(a);if(c)return c.result;if(n.has(a))return z4.PENDING;let l=t(o,...s);return n.add(a),l.then(u=>{r.set(a,new Lhe(u)),n.delete(a)}),z4.PENDING}}});var Oat=m(Dhe=>{"use strict";Object.defineProperty(Dhe,"__esModule",{value:!0});Dhe.getKey=D4r;function k4r(t,e){return t!==null&&typeof t=="object"&&e in t}function D4r(t,e){return k4r(t,e)?t[e]:void 0}});var aP=m(qm=>{"use strict";Object.defineProperty(qm,"__esModule",{value:!0});qm.getRequestId=void 0;qm.convertToAPIChoice=B4r;qm.getTemperatureForSamples=H4r;qm.getStops=z4r;qm.getTopP=W4r;qm.getMaxSolutionTokens=K4r;var U4r=ws(),q4r=BS(),Mat=An(),F4r=Ps(),j4r=sV();Object.defineProperty(qm,"getRequestId",{enumerable:!0,get:function(){return j4r.getRequestId}});function B4r(t,e,r,n,o,s,a){return(0,F4r.logEngineCompletion)(t,e,r,o,n),{completionText:e,meanLogProb:$4r(t,r),meanAlternativeLogProb:V4r(t,r),choiceIndex:n,requestId:o,blockFinished:s,tokens:r.tokens,numTokens:r.tokens.length,telemetryData:a,copilotAnnotations:r.copilot_annotations,clientCompletionId:(0,U4r.generateUuid)(),finishReason:r.finish_reason}}function $4r(t,e){if(e?.logprobs?.token_logprobs)try{let r=0,n=0,o=50;for(let s=0;s<e.logprobs.token_logprobs.length-1&&o>0;s++,o--)r+=e.logprobs.token_logprobs[s],n+=1;return n>0?r/n:void 0}catch(r){Mat.logger.exception(t,r,"Error calculating mean prob")}}function V4r(t,e){if(e?.logprobs?.top_logprobs)try{let r=0,n=0,o=50;for(let s=0;s<e.logprobs.token_logprobs.length-1&&o>0;s++,o--){let a={...e.logprobs.top_logprobs[s]};delete a[e.logprobs.tokens[s]],r+=Math.max(...Object.values(a)),n+=1}return n>0?r/n:void 0}catch(r){Mat.logger.exception(t,r,"Error calculating mean prob")}}function H4r(t,e){return t.isRunningInTest()||e<=1?0:e<10?.2:e<20?.4:.8}var G4r={markdown:[`


`],python:[`
def `,`
class `,`
if `,`

#`]};function z4r(t){return G4r[t??""]??[`


`,"\n```"]}function W4r(){return 1}function K4r(){return q4r.DEFAULT_MAX_COMPLETION_LENGTH}});var Uat=m(ru=>{"use strict";var Y4r=ru&&ru.__decorate||function(t,e,r,n){var o=arguments.length,s=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(o<3?a(s):o>3?a(e,r,s):a(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},Nat=ru&&ru.__param||function(t,e){return function(r,n){e(r,n,t)}},Uhe;Object.defineProperty(ru,"__esModule",{value:!0});ru.SSEProcessor=ru.StreamCopilotAnnotations=void 0;ru.splitChunk=Dat;ru.prepareSolutionForReturn=Z4r;var Lat=Nr(),cV=An(),Q4r=$$(),kat=aP(),Ea=new cV.Logger("streamChoices"),qhe=class{constructor(){this.logprobs=[],this.top_logprobs=[],this.text=[],this.tokens=[],this.text_offset=[],this.copilot_annotations=new aV,this.tool_calls=new jhe,this.function_call=new Bhe,this.copilot_references=[],this.yielded=!1}append(e){e.text&&this.text.push(e.text),e.delta?.content&&e.delta.role!=="function"&&this.text.push(e.delta.content),e.logprobs&&(this.tokens.push(e.logprobs.tokens??[]),this.text_offset.push(e.logprobs.text_offset??[]),this.logprobs.push(e.logprobs.token_logprobs??[]),this.top_logprobs.push(e.logprobs.top_logprobs??[])),e.copilot_annotations&&this.copilot_annotations.update(e.copilot_annotations),e.delta?.copilot_annotations&&this.copilot_annotations.update(e.delta.copilot_annotations),e.delta?.tool_calls&&e.delta.tool_calls.length>0&&this.tool_calls.update(e.delta.tool_calls),e.delta?.function_call&&this.function_call.update(e.delta.function_call),e?.finish_reason&&(this.finish_reason=e.finish_reason)}};function Dat(t){let e=t.split(`
`),r=e.pop();return[e.filter(n=>n!==""),r]}var Fhe=class{constructor(){this.arguments=[]}update(e){e.id&&(this.id=e.id),e.function.name&&(this.name=e.function.name),this.arguments.push(e.function.arguments)}},jhe=class{constructor(){this.toolCalls=[]}update(e){e.forEach(r=>{let n=this.toolCalls.length>0?this.toolCalls[this.toolCalls.length-1]:void 0;(!n||r.id&&n.id!==r.id)&&(n=new Fhe,this.toolCalls.push(n)),n.update(r)})}getToolCalls(){return this.toolCalls}},Bhe=class{constructor(){this.arguments=[]}update(e){e.name&&(this.name=e.name),this.arguments.push(e.arguments)}},aV=class{constructor(){this.current={}}update(e){Object.entries(e).forEach(([r,n])=>{n.forEach(o=>this.update_namespace(r,o))})}update_namespace(e,r){this.current[e]||(this.current[e]=[]);let n=this.current[e],o=n.findIndex(s=>s.id===r.id);o>=0?n[o]=r:n.push(r)}for(e){return this.current[e]??[]}};ru.StreamCopilotAnnotations=aV;var $he=Uhe=class{constructor(e,r,n,o,s,a=void 0,c,l){this.expectedNumChoices=e,this.response=r,this.body=n,this.telemetryData=o,this.dropCompletionReasons=s,this.cancellationToken=a,this.instantiationService=c,this.logTarget=l,this.requestId=(0,kat.getRequestId)(this.response),this.stats=new Hhe,this.solutions={}}static async create(e,r,n,o,s,a){let c=e.get(Lat.IInstantiationService),l=e.get(cV.ICompletionsLogTargetService),u=n.body();if(u===null)throw new Error("No response body available");return u=await u,u.setEncoding("utf8"),new Uhe(r,n,u,o,s??[],a,c,l)}async*processSSE(e=()=>{}){try{yield*this.processSSEInner(e)}finally{this.cancel(),Ea.debug(this.logTarget,`request done: headerRequestId: [${this.requestId.headerRequestId}] model deployment ID: [${this.requestId.deploymentId}]`),Ea.debug(this.logTarget,"request stats:",this.stats)}}async*processSSEInner(e){let r="",n=null,o,s;e:for await(let a of this.body){if(this.maybeCancel("after awaiting body chunk"))return;Ea.debug(this.logTarget,"chunk",a.toString());let[c,l]=Dat(r+a.toString());r=l;for(let u of c){let d=u.slice(5).trim();if(d==="[DONE]"){yield*this.finishSolutions(n,o,s,e);return}n=null;let f;try{f=JSON.parse(d)}catch{Ea.error(this.logTarget,"Error parsing JSON stream data",u);continue}if(f.copilot_confirmation&&J4r(f.copilot_confirmation)&&await e("",{text:"",requestId:this.requestId,copilotConfirmation:f.copilot_confirmation}),f.copilot_references&&await e("",{text:"",requestId:this.requestId,copilotReferences:f.copilot_references}),f.choices===void 0){!f.copilot_references&&!f.copilot_confirmation&&(f.error!==void 0?Ea.error(this.logTarget,"Error in response:",f.error.message):Ea.error(this.logTarget,"Unexpected response with no choices or error: "+d)),f.copilot_errors&&await e("",{text:"",requestId:this.requestId,copilotErrors:f.copilot_errors});continue}if(o===void 0&&f.model&&(o=f.model),s===void 0&&f.usage&&(s=f.usage),this.allSolutionsDone()){r="";break e}for(let p=0;p<f.choices?.length;p++){let h=f.choices[p];Ea.debug(this.logTarget,"choice",h),this.stats.add(h.index),h.index in this.solutions||(this.solutions[h.index]=new qhe);let _=this.solutions[h.index];if(_===null)continue;_.append(h);let g=this.asSolutionDecision(),v=h.text?.indexOf(`
`)>-1||h.delta?.content?.indexOf(`
`)>-1;if(h.finish_reason||v){let y=_.text.join("");if(g=this.asSolutionDecision(await e(y,{text:y,index:h.index,requestId:this.requestId,annotations:_.copilot_annotations,copilotReferences:_.copilot_references,getAPIJsonData:()=>Vhe(_),finished:!!h.finish_reason,telemetryData:this.telemetryData})),this.maybeCancel("after awaiting finishedCb"))return}if(h.finish_reason&&_.function_call.name!==void 0){n=h.finish_reason;continue}if(h.finish_reason&&(g.yieldSolution=!0,g.continueStreaming=!1),!g.yieldSolution)continue;let E=h.finish_reason??"client-trimmed";if(Ea.debug(this.logTarget,"completion.finishReason",this.telemetryData.extendedBy({completionChoiceFinishReason:E,engineName:o??"",engineChoiceSource:this.instantiationService.invokeFunction(Q4r.getEngineRequestInfo,this.telemetryData).engineChoiceSource})),this.dropCompletionReasons.includes(h.finish_reason)?this.solutions[h.index]=null:_.yielded||(this.stats.markYielded(h.index),yield{solution:_,finishOffset:g.finishOffset,reason:h.finish_reason,requestId:this.requestId,index:h.index,model:o,usage:s},_.yielded=!0),this.maybeCancel("after yielding finished choice"))return;g.continueStreaming||(this.solutions[h.index]=null)}}}for(let[a,c]of Object.entries(this.solutions)){let l=Number(a);if(c!==null&&(Ea.debug(this.logTarget,"completion.finishReason",this.telemetryData.extendedBy({completionChoiceFinishReason:"Iteration Done",engineName:o??""})),this.stats.markYielded(l),yield{solution:c,finishOffset:void 0,reason:"Iteration Done",requestId:this.requestId,index:l,model:o,usage:s},this.maybeCancel("after yielding after iteration done")))return}if(r.length>0)try{let a=JSON.parse(r);a.error!==void 0&&Ea.error(this.logTarget,`Error in response: ${a.error.message}`,a.error)}catch{Ea.error(this.logTarget,`Error parsing extraData: ${r}`)}}asSolutionDecision(e){return e===void 0?{yieldSolution:!1,continueStreaming:!0}:typeof e=="number"?{yieldSolution:!0,continueStreaming:!1,finishOffset:e}:e}async*finishSolutions(e,r,n,o){for(let[s,a]of Object.entries(this.solutions)){let c=Number(s);if(a===null)continue;let l=a.text.join("");if(await o(l,{text:l,index:c,requestId:this.requestId,annotations:a.copilot_annotations,copilotReferences:a.copilot_references,getAPIJsonData:()=>Vhe(a),finished:!0,telemetryData:this.telemetryData}),!a.yielded&&(this.stats.markYielded(c),Ea.debug(this.logTarget,"completion.finishReason",this.telemetryData.extendedBy({completionChoiceFinishReason:e??"DONE",engineName:r??""})),yield{solution:a,finishOffset:void 0,reason:e??"DONE",requestId:this.requestId,index:c,model:r,usage:n},this.maybeCancel("after yielding on DONE")))return}}maybeCancel(e){return this.cancellationToken?.isCancellationRequested?(Ea.debug(this.logTarget,"Cancelled: "+e),this.cancel(),!0):!1}cancel(){this.body&&"destroy"in this.body&&typeof this.body.destroy=="function"?this.body.destroy():this.body instanceof ReadableStream&&this.body.cancel()}allSolutionsDone(){let e=Object.values(this.solutions);return e.length===this.expectedNumChoices&&e.every(r=>r===null)}};ru.SSEProcessor=$he;ru.SSEProcessor=$he=Uhe=Y4r([Nat(6,Lat.IInstantiationService),Nat(7,cV.ICompletionsLogTargetService)],$he);function Z4r(t,e,r){let n=t.get(cV.ICompletionsLogTargetService),o=e.solution.text.join(""),s=!1;e.finishOffset!==void 0&&(Ea.debug(n,`solution ${e.index}: early finish at offset ${e.finishOffset}`),o=o.substring(0,e.finishOffset),s=!0),Ea.info(n,`solution ${e.index} returned. finish reason: [${e.reason}]`),Ea.debug(n,`solution ${e.index} details: finishOffset: [${e.finishOffset}]`);let a=Vhe(e.solution);return(0,kat.convertToAPIChoice)(t,o,a,e.index,e.requestId,s,r)}function Vhe(t){let e=t.text.join(""),r=t.copilot_annotations.current,n={text:e,tokens:t.text,copilot_annotations:r,finish_reason:t.finish_reason??"stop"};if(t.logprobs.length===0)return n;let o=t.logprobs.reduce((l,u)=>l.concat(u),[]),s=t.top_logprobs.reduce((l,u)=>l.concat(u),[]),a=t.text_offset.reduce((l,u)=>l.concat(u),[]),c=t.tokens.reduce((l,u)=>l.concat(u),[]);return{...n,logprobs:{token_logprobs:o,top_logprobs:s,text_offset:a,tokens:c}}}function J4r(t){return typeof t.title=="string"&&typeof t.message=="string"&&!!t.confirmation}var Hhe=class{constructor(){this.choices=new Map}getChoiceStats(e){let r=this.choices.get(e);return r||(r=new Ghe,this.choices.set(e,r)),r}add(e){this.getChoiceStats(e).increment()}markYielded(e){this.getChoiceStats(e).markYielded()}toString(){return Array.from(this.choices.entries()).map(([e,r])=>`${e}: ${r.yieldedTokens} -> ${r.seenTokens}`).join(", ")}},Ghe=class{constructor(){this.yieldedTokens=-1,this.seenTokens=0}increment(){this.seenTokens++}markYielded(){this.yieldedTokens=this.seenTokens}}});var sV=m(so=>{"use strict";var X4r=so&&so.__decorate||function(t,e,r,n){var o=arguments.length,s=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(o<3?a(s):o>3?a(e,r,s):a(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},cP=so&&so.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(so,"__esModule",{value:!0});so.LiveOpenAIFetcher=so.CMDQuotaExceeded=so.OpenAIFetcher=so.ICompletionsOpenAIFetcherService=so.CopilotUiKind=void 0;so.getRequestId=Hat;so.sanitizeRequestOptionTelemetry=Gat;so.postProcessChoices=zat;var e3r=ha(),t3r=Qe(),Bat=Nr(),r3r=gI(),n3r=Xj(),$at=Eat(),Whe=An(),i3r=rV(),qat=tP(),Vat=iV(),o3r=khe(),cd=Ps(),s3r=N4(),a3r=QS(),W4=Oat(),lV=aP(),Fat=Uat(),rl=new Whe.Logger("fetchCompletions"),uV;(function(t){t.GhostText="ghostText",t.Panel="synthesize"})(uV||(so.CopilotUiKind=uV={}));function Hat(t){return{headerRequestId:t.headers.get("x-request-id")||"",serverExperiments:t.headers.get("X-Copilot-Experiment")||"",deploymentId:t.headers.get("azureml-model-deployment")||""}}function c3r(t){let e=t.headers.get("openai-processing-ms");return e?parseInt(e,10):0}function l3r(t){switch(t){case uV.GhostText:return"copilot-ghost";case uV.Panel:return"copilot-panel"}}so.ICompletionsOpenAIFetcherService=(0,t3r.createServiceIdentifier)("ICompletionsOpenAIFetcherService");var dV=class{};so.OpenAIFetcher=dV;function u3r(t,e,r,n){return(0,i3r.getEndpointUrl)(t,e,"proxy","v1/engines",r,n)}function Gat(t,e,r,n){for(let[o,s]of Object.entries(t)){if(r.includes(o))continue;let a=s;if(o==="extra"&&n){let c={...a};for(let l of n)delete c[l];a=c}e.properties[`request.option.${o}`]=JSON.stringify(a)??"undefined"}}async function d3r(t,e,r,n,o,s,a,c,l,u,d){let f=t.get(Bat.IInstantiationService),p=t.get(Whe.ICompletionsLogTargetService),h=t.get(Vat.ICompletionsStatusReporter),_=f.invokeFunction(u3r,a,r,n),g=l.extendedBy({endpoint:n,engineName:r,uiKind:c},(0,cd.telemetrizePromptLength)(e));Gat(s,g,["prompt","suffix"],["context"]),g.properties.headerRequestId=o,f.invokeFunction(cd.telemetry,"request.sent",g);let v=(0,cd.now)(),E=l3r(c);return f.invokeFunction(qat.postRequest,_,a.token,E,o,s,u,d).then(y=>{let S=Hat(y);g.extendWithRequestId(S);let b=(0,cd.now)()-v;return g.measurements.totalTimeMs=b,rl.info(p,`Request ${o} at <${_}> finished with ${y.status} status after ${b}ms`),g.properties.status=String(y.status),rl.debug(p,"request.response properties",g.properties),rl.debug(p,"request.response measurements",g.measurements),rl.debug(p,"prompt:",e),f.invokeFunction(cd.telemetry,"request.response",g),y}).catch(y=>{if((0,qat.isAbortError)(y))throw f.invokeFunction(cd.telemetry,"request.cancel",g),y;h.setWarning((0,W4.getKey)(y,"message")??"");let S=g.extendedBy({error:"Network exception"});f.invokeFunction(cd.telemetry,"request.shownWarning",S),g.properties.message=String((0,W4.getKey)(y,"name")??""),g.properties.code=String((0,W4.getKey)(y,"code")??""),g.properties.errno=String((0,W4.getKey)(y,"errno")??""),g.properties.type=String((0,W4.getKey)(y,"type")??"");let b=(0,cd.now)()-v;throw g.measurements.totalTimeMs=b,rl.info(p,`Request ${o} at <${_}> rejected with ${String(y)} after ${b}ms`),rl.debug(p,"request.error properties",g.properties),rl.debug(p,"request.error measurements",g.measurements),f.invokeFunction(cd.telemetry,"request.error",g),y}).finally(()=>{f.invokeFunction(cd.logEnginePrompt,e,g)})}function zat(t){return(0,$at.asyncIterableFilter)(t,e=>e.completionText.trim().length>0)}so.CMDQuotaExceeded="github.copilot.completions.quotaExceeded";var zhe=class extends dV{#e;constructor(e,r,n,o,s,a){super(),this.instantiationService=e,this.runtimeModeService=r,this.logTargetService=n,this.copilotTokenManager=o,this.statusReporter=s,this.authenticationService=a}async fetchAndStreamCompletions(e,r,n,o){if(this.#e)return{type:"canceled",reason:this.#e};let s="completions",a=this.copilotTokenManager.token??await this.copilotTokenManager.getToken(),c=await this.fetchWithParameters(s,e,a,r,o);if(c==="not-sent")return{type:"canceled",reason:"before fetch request"};if(o?.isCancellationRequested){let f=c.body();try{f&&"destroy"in f&&typeof f.destroy=="function"?f.destroy():f instanceof ReadableStream&&f.cancel()}catch(p){this.instantiationService.invokeFunction(h=>rl.exception(h,p,"Error destroying stream"))}return{type:"canceled",reason:"after fetch request"}}if(c.status!==200){let f=this.createTelemetryData(s,e);return this.handleError(this.statusReporter,f,c,a)}let u=(await this.instantiationService.invokeFunction(Fat.SSEProcessor.create,e.count,c,r,[],o)).processSSE(n),d=(0,$at.asyncIterableMap)(u,f=>this.instantiationService.invokeFunction(Fat.prepareSolutionForReturn,f,r));return{type:"success",choices:zat(d),getProcessingTime:()=>c3r(c)}}createTelemetryData(e,r){return cd.TelemetryData.createAndMarkAsIssued({endpoint:e,engineName:r.engineModelId,uiKind:r.uiKind,headerRequestId:r.ourRequestId})}async fetchWithParameters(e,r,n,o,s){let a={prompt:r.prompt.prefix,suffix:r.prompt.suffix,max_tokens:(0,lV.getMaxSolutionTokens)(),temperature:(0,lV.getTemperatureForSamples)(this.runtimeModeService,r.count),top_p:(0,lV.getTopP)(),n:r.count,stop:(0,lV.getStops)(r.languageId),stream:!0,extra:r.extra};r.requestLogProbs&&(a.logprobs=2);let c=(0,o3r.tryGetGitHubNWO)(r.repoInfo);return c!==void 0&&(a.nwo=c),r.postOptions&&Object.assign(a,r.postOptions),r.prompt.context&&r.prompt.context.length>0&&(a.extra.context=r.prompt.context),await(0,s3r.delay)(0),s?.isCancellationRequested?"not-sent":await this.instantiationService.invokeFunction(d3r,r.prompt,r.engineModelId,e,r.ourRequestId,a,n,r.uiKind,o,s,r.headers)}async handleError(e,r,n,o){let s=await n.text();if(n.status===402){this.#e="monthly free code completions exhausted",e.setError("Completions limit reached",{command:so.CMDQuotaExceeded,title:"Learn More"});let c=(0,n3r.onCopilotToken)(this.authenticationService,l=>{this.#e=void 0,l.isCompletionsQuotaExceeded||(e.forceNormal(),c.dispose())});return{type:"failed",reason:this.#e}}if(n.status===466)return e.setError(s),rl.info(this.logTargetService,s),{type:"failed",reason:`client not supported: ${s}`};if(jat(n)&&!n.headers.get("x-github-request-id")){let a=`Last response was a ${n.status} error and does not appear to originate from GitHub. Is a proxy or firewall intercepting this request? https://gh.io/copilot-firewall`;rl.error(this.logTargetService,a),e.setWarning(a),r.properties.error=`Response status was ${n.status} with no x-github-request-id header`}else jat(n)?(rl.warn(this.logTargetService,`Response status was ${n.status}:`,s),e.setWarning(`Last response was a ${n.status} error: ${s}`),r.properties.error=`Response status was ${n.status}: ${s}`):(e.setWarning(`Last response was a ${n.status} error`),r.properties.error=`Response status was ${n.status}`);return r.properties.status=String(n.status),this.instantiationService.invokeFunction(cd.telemetry,"request.shownWarning",r),n.status===401||n.status===403?(this.copilotTokenManager.resetToken(n.status),{type:"failed",reason:`token expired or invalid: ${n.status}`}):n.status===429?(setTimeout(()=>{this.#e=void 0},10*1e3),this.#e="rate limited",rl.warn(this.logTargetService,"Rate limited by server. Denying completions for the next 10 seconds."),{type:"failed",reason:this.#e}):n.status===499?(rl.info(this.logTargetService,"Cancelled by server"),{type:"failed",reason:"canceled by server"}):(rl.error(this.logTargetService,"Unhandled status from server:",n.status,s),{type:"failed",reason:`unhandled status from server: ${n.status} ${s}`})}};so.LiveOpenAIFetcher=zhe;so.LiveOpenAIFetcher=zhe=X4r([cP(0,Bat.IInstantiationService),cP(1,a3r.ICompletionsRuntimeModeService),cP(2,Whe.ICompletionsLogTargetService),cP(3,r3r.ICompletionsCopilotTokenManager),cP(4,Vat.ICompletionsStatusReporter),cP(5,e3r.IAuthenticationService)],zhe);function jat(t){return t.status>=400&&t.status<500}});var fV=m(lP=>{"use strict";Object.defineProperty(lP,"__esModule",{value:!0});lP.ILanguageContextProviderService=lP.ProviderTarget=void 0;var f3r=Qe(),Wat;(function(t){t.NES="nes",t.Completions="completions"})(Wat||(lP.ProviderTarget=Wat={}));lP.ILanguageContextProviderService=(0,f3r.createServiceIdentifier)("ILanguageContextProviderService")});var Zat=m(K4=>{"use strict";Object.defineProperty(K4,"__esModule",{value:!0});K4.eventToPromise=p3r;K4.isArrayOfT=Qat;K4.resolveAll=m3r;var Kat=N4();async function p3r(t){let e=new Kat.Deferred,r=t(n=>{e.resolve(n),r.dispose()});return e.promise}async function h3r(t){if(t.isCancellationRequested)return;let e=new Kat.Deferred,r=t.onCancellationRequested(()=>{e.resolve(),r.dispose()});await e.promise}async function Yat(t,e){if(e){let r=h3r(e);await Promise.race([t,r])}else await t}function Qat(t){return Array.isArray(t)}async function m3r(t,e){let r=new Map,n=[];for(let[o,s]of t.entries()){let a=(async()=>{let c=await g3r(s,e);r.set(o,c)})();n.push(a)}return await Promise.allSettled(n.values()),r}async function g3r(t,e){let r;return t instanceof Promise?r=await _3r(t,e):r=await v3r(t,e),r}async function _3r(t,e){let r=performance.now(),n={status:"none",resolutionTime:0,value:null},o=(async()=>{try{let s=await t;if(e?.isCancellationRequested)return;n={status:"full",resolutionTime:0,value:Qat(s)?[...s]:[s]}}catch(s){if(e?.isCancellationRequested)return;n={status:"error",resolutionTime:0,reason:s}}})();return await Yat(o,e),n.resolutionTime=performance.now()-r,n}async function v3r(t,e){let r=performance.now(),n={status:"none",resolutionTime:0,value:null},o=(async()=>{try{for await(let s of t){if(e?.isCancellationRequested)return;n.status!=="partial"&&(n={status:"partial",resolutionTime:0,value:[]}),n.value.push(s)}e?.isCancellationRequested||(n.status!=="partial"?n={status:"full",resolutionTime:0,value:[]}:n.status="full")}catch(s){if(e?.isCancellationRequested)return;n={status:"error",resolutionTime:0,reason:s}}})();return await Yat(o,e),n.resolutionTime=performance.now()-r,n}});var Jat=m(Yhe=>{"use strict";Object.defineProperty(Yhe,"__esModule",{value:!0});Yhe.fillInCppVSCodeActiveExperiments=S3r;var y3r=Wa(),Khe=An(),E3r={maxSnippetLength:3e3,maxSnippetCount:7,enabledFeatures:"Deferred",timeBudgetMs:7,doAggregateSnippets:!0},T3r="ms-vscode.cpptools";function S3r(t,e,r,n){(e.length===1&&e[0]==="*"||e.includes(T3r))&&b3r(t,r,n)}function b3r(t,e,r){try{let n=t.get(y3r.ICompletionsFeaturesService),o=t.get(Khe.ICompletionsLogTargetService),s=E3r,a=n.cppContextProviderParams(r);if(a)try{s=JSON.parse(a)}catch(c){Khe.logger.error(o,"Failed to parse cppContextProviderParams",c)}else{let c=n.getContextProviderExpSettings("cpp")?.params;c&&(s={...c})}for(let[c,l]of Object.entries(s))e.set(c,l)}catch(n){Khe.logger.exception(t,n,"fillInCppActiveExperiments")}}});var ect=m(Qhe=>{"use strict";Object.defineProperty(Qhe,"__esModule",{value:!0});Qhe.fillInCSharpActiveExperiments=A3r;var C3r=Wa(),Xat=An();function A3r(t,e,r){let n=t.get(C3r.ICompletionsFeaturesService),o=t.get(Xat.ICompletionsLogTargetService);try{let s=n.csharpContextProviderParams(r);if(s){let a=JSON.parse(s);for(let[c,l]of Object.entries(a))e.set(c,l)}else{let a=n.getContextProviderExpSettings("csharp")?.params;if(a)for(let[c,l]of Object.entries(a))e.set(c,l)}}catch(s){return Xat.logger.debug(o,"Failed to get the active C# experiments for the Context Provider API",s),!1}return!0}});var tct=m(J1=>{"use strict";Object.defineProperty(J1,"__esModule",{value:!0});J1.multiLanguageContextProviderParamsDefault=void 0;J1.fillInMultiLanguageActiveExperiments=I3r;J1.getMultiLanguageContextProviderParamsFromActiveExperiments=O3r;var x3r=Wa(),Zhe=An(),w3r="fallbackContextProvider";J1.multiLanguageContextProviderParamsDefault={mlcpMaxContextItems:20,mlcpMaxSymbolMatches:20,mlcpEnableImports:!1};function I3r(t,e,r,n){(e.length===1&&e[0]==="*"||e.includes(w3r))&&P3r(t,r,n)}function P3r(t,e,r){try{let n=R3r(t,r);for(let[o,s]of Object.entries(n))e.set(o,s)}catch(n){Zhe.logger.exception(t,n,"fillInMultiLanguageActiveExperiments")}}function R3r(t,e){let r=J1.multiLanguageContextProviderParamsDefault,n=t.get(Zhe.ICompletionsLogTargetService),s=t.get(x3r.ICompletionsFeaturesService).multiLanguageContextProviderParams(e);if(s)try{r=JSON.parse(s)}catch(a){Zhe.logger.error(n,"Failed to parse multiLanguageContextProviderParams",a)}return r}function O3r(t){let e={...J1.multiLanguageContextProviderParamsDefault};return t.has("mlcpMaxContextItems")&&(e.mlcpMaxContextItems=Number(t.get("mlcpMaxContextItems"))),t.has("mlcpMaxSymbolMatches")&&(e.mlcpMaxSymbolMatches=Number(t.get("mlcpMaxSymbolMatches"))),t.has("mlcpEnableImports")&&(e.mlcpEnableImports=String(t.get("mlcpEnableImports"))==="true"),e}});var nct=m(uP=>{"use strict";Object.defineProperty(uP,"__esModule",{value:!0});uP.TS_CONTEXT_PROVIDER_ID=void 0;uP.fillInTsActiveExperiments=N3r;var M3r=Wa(),rct=An();uP.TS_CONTEXT_PROVIDER_ID="typescript-ai-context-provider";function N3r(t,e,r,n){if(!(e.length===1&&e[0]==="*"||e.includes(uP.TS_CONTEXT_PROVIDER_ID)))return!1;let o=t.get(rct.ICompletionsLogTargetService),s=t.get(M3r.ICompletionsFeaturesService);try{let a=s.tsContextProviderParams(n);if(a){let c=JSON.parse(a);for(let[l,u]of Object.entries(c))r.set(l,u)}else{let c=s.getContextProviderExpSettings("typescript")?.params;if(c)for(let[l,u]of Object.entries(c))r.set(l,u)}}catch(a){return rct.logger.debug(o,"Failed to get the active TypeScript experiments for the Context Provider API",a),!1}return!0}});var sct=m(X1=>{"use strict";Object.defineProperty(X1,"__esModule",{value:!0});X1.TypeSystem=X1.TypeSystemDuplicateFormat=X1.TypeSystemDuplicateTypeKind=void 0;var pV=qT(),L3r=T4(),k3r=Ze(),oct=vi(),hV=class extends oct.TypeBoxError{constructor(e){super(`Duplicate type kind '${e}' detected`)}};X1.TypeSystemDuplicateTypeKind=hV;var mV=class extends oct.TypeBoxError{constructor(e){super(`Duplicate string format '${e}' detected`)}};X1.TypeSystemDuplicateFormat=mV;var ict;(function(t){function e(n,o){if(pV.TypeRegistry.Has(n))throw new hV(n);return pV.TypeRegistry.Set(n,o),(s={})=>(0,L3r.Unsafe)({...s,[k3r.Kind]:n})}t.Type=e;function r(n,o){if(pV.FormatRegistry.Has(n))throw new mV(n);return pV.FormatRegistry.Set(n,o),n}t.Format=r})(ict||(X1.TypeSystem=ict={}))});var gV=m(ev=>{"use strict";var D3r=ev&&ev.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),act=ev&&ev.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&D3r(e,t,r)};Object.defineProperty(ev,"__esModule",{value:!0});act(VN(),ev);act(sct(),ev)});var Jhe=m(Y4=>{"use strict";Object.defineProperty(Y4,"__esModule",{value:!0});Y4.DefaultErrorFunction=cct;Y4.SetErrorFunction=q3r;Y4.GetErrorFunction=F3r;var U3r=Ze(),at=Xhe();function cct(t){switch(t.errorType){case at.ValueErrorType.ArrayContains:return"Expected array to contain at least one matching value";case at.ValueErrorType.ArrayMaxContains:return`Expected array to contain no more than ${t.schema.maxContains} matching values`;case at.ValueErrorType.ArrayMinContains:return`Expected array to contain at least ${t.schema.minContains} matching values`;case at.ValueErrorType.ArrayMaxItems:return`Expected array length to be less or equal to ${t.schema.maxItems}`;case at.ValueErrorType.ArrayMinItems:return`Expected array length to be greater or equal to ${t.schema.minItems}`;case at.ValueErrorType.ArrayUniqueItems:return"Expected array elements to be unique";case at.ValueErrorType.Array:return"Expected array";case at.ValueErrorType.AsyncIterator:return"Expected AsyncIterator";case at.ValueErrorType.BigIntExclusiveMaximum:return`Expected bigint to be less than ${t.schema.exclusiveMaximum}`;case at.ValueErrorType.BigIntExclusiveMinimum:return`Expected bigint to be greater than ${t.schema.exclusiveMinimum}`;case at.ValueErrorType.BigIntMaximum:return`Expected bigint to be less or equal to ${t.schema.maximum}`;case at.ValueErrorType.BigIntMinimum:return`Expected bigint to be greater or equal to ${t.schema.minimum}`;case at.ValueErrorType.BigIntMultipleOf:return`Expected bigint to be a multiple of ${t.schema.multipleOf}`;case at.ValueErrorType.BigInt:return"Expected bigint";case at.ValueErrorType.Boolean:return"Expected boolean";case at.ValueErrorType.DateExclusiveMinimumTimestamp:return`Expected Date timestamp to be greater than ${t.schema.exclusiveMinimumTimestamp}`;case at.ValueErrorType.DateExclusiveMaximumTimestamp:return`Expected Date timestamp to be less than ${t.schema.exclusiveMaximumTimestamp}`;case at.ValueErrorType.DateMinimumTimestamp:return`Expected Date timestamp to be greater or equal to ${t.schema.minimumTimestamp}`;case at.ValueErrorType.DateMaximumTimestamp:return`Expected Date timestamp to be less or equal to ${t.schema.maximumTimestamp}`;case at.ValueErrorType.DateMultipleOfTimestamp:return`Expected Date timestamp to be a multiple of ${t.schema.multipleOfTimestamp}`;case at.ValueErrorType.Date:return"Expected Date";case at.ValueErrorType.Function:return"Expected function";case at.ValueErrorType.IntegerExclusiveMaximum:return`Expected integer to be less than ${t.schema.exclusiveMaximum}`;case at.ValueErrorType.IntegerExclusiveMinimum:return`Expected integer to be greater than ${t.schema.exclusiveMinimum}`;case at.ValueErrorType.IntegerMaximum:return`Expected integer to be less or equal to ${t.schema.maximum}`;case at.ValueErrorType.IntegerMinimum:return`Expected integer to be greater or equal to ${t.schema.minimum}`;case at.ValueErrorType.IntegerMultipleOf:return`Expected integer to be a multiple of ${t.schema.multipleOf}`;case at.ValueErrorType.Integer:return"Expected integer";case at.ValueErrorType.IntersectUnevaluatedProperties:return"Unexpected property";case at.ValueErrorType.Intersect:return"Expected all values to match";case at.ValueErrorType.Iterator:return"Expected Iterator";case at.ValueErrorType.Literal:return`Expected ${typeof t.schema.const=="string"?`'${t.schema.const}'`:t.schema.const}`;case at.ValueErrorType.Never:return"Never";case at.ValueErrorType.Not:return"Value should not match";case at.ValueErrorType.Null:return"Expected null";case at.ValueErrorType.NumberExclusiveMaximum:return`Expected number to be less than ${t.schema.exclusiveMaximum}`;case at.ValueErrorType.NumberExclusiveMinimum:return`Expected number to be greater than ${t.schema.exclusiveMinimum}`;case at.ValueErrorType.NumberMaximum:return`Expected number to be less or equal to ${t.schema.maximum}`;case at.ValueErrorType.NumberMinimum:return`Expected number to be greater or equal to ${t.schema.minimum}`;case at.ValueErrorType.NumberMultipleOf:return`Expected number to be a multiple of ${t.schema.multipleOf}`;case at.ValueErrorType.Number:return"Expected number";case at.ValueErrorType.Object:return"Expected object";case at.ValueErrorType.ObjectAdditionalProperties:return"Unexpected property";case at.ValueErrorType.ObjectMaxProperties:return`Expected object to have no more than ${t.schema.maxProperties} properties`;case at.ValueErrorType.ObjectMinProperties:return`Expected object to have at least ${t.schema.minProperties} properties`;case at.ValueErrorType.ObjectRequiredProperty:return"Expected required property";case at.ValueErrorType.Promise:return"Expected Promise";case at.ValueErrorType.RegExp:return"Expected string to match regular expression";case at.ValueErrorType.StringFormatUnknown:return`Unknown format '${t.schema.format}'`;case at.ValueErrorType.StringFormat:return`Expected string to match '${t.schema.format}' format`;case at.ValueErrorType.StringMaxLength:return`Expected string length less or equal to ${t.schema.maxLength}`;case at.ValueErrorType.StringMinLength:return`Expected string length greater or equal to ${t.schema.minLength}`;case at.ValueErrorType.StringPattern:return`Expected string to match '${t.schema.pattern}'`;case at.ValueErrorType.String:return"Expected string";case at.ValueErrorType.Symbol:return"Expected symbol";case at.ValueErrorType.TupleLength:return`Expected tuple to have ${t.schema.maxItems||0} elements`;case at.ValueErrorType.Tuple:return"Expected tuple";case at.ValueErrorType.Uint8ArrayMaxByteLength:return`Expected byte length less or equal to ${t.schema.maxByteLength}`;case at.ValueErrorType.Uint8ArrayMinByteLength:return`Expected byte length greater or equal to ${t.schema.minByteLength}`;case at.ValueErrorType.Uint8Array:return"Expected Uint8Array";case at.ValueErrorType.Undefined:return"Expected undefined";case at.ValueErrorType.Union:return"Expected union value";case at.ValueErrorType.Void:return"Expected void";case at.ValueErrorType.Kind:return`Expected kind '${t.schema[U3r.Kind]}'`;default:return"Unknown error type"}}var lct=cct;function q3r(t){lct=t}function F3r(){return lct}});var fct=m(dP=>{"use strict";Object.defineProperty(dP,"__esModule",{value:!0});dP.TypeDereferenceError=void 0;dP.Pushref=V3r;dP.Deref=dct;var j3r=vi(),uct=Ze(),B3r=sB(),_V=class extends j3r.TypeBoxError{constructor(e){super(`Unable to dereference schema with $id '${e.$ref}'`),this.schema=e}};dP.TypeDereferenceError=_V;function $3r(t,e){let r=e.find(n=>n.$id===t.$ref);if(r===void 0)throw new _V(t);return dct(r,e)}function V3r(t,e){return!(0,B3r.IsString)(t.$id)||e.some(r=>r.$id===t.$id)||e.push(t),e}function dct(t,e){return t[uct.Kind]==="This"||t[uct.Kind]==="Ref"?$3r(t,e):t}});var ld=m(JS=>{"use strict";var H3r=JS&&JS.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),G3r=JS&&JS.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&H3r(e,t,r)};Object.defineProperty(JS,"__esModule",{value:!0});G3r(fct(),JS)});var gct=m(Q4=>{"use strict";Object.defineProperty(Q4,"__esModule",{value:!0});Q4.ValueHashError=void 0;Q4.Hash=cLr;var xf=bo(),z3r=vi(),vV=class extends z3r.TypeBoxError{constructor(e){super("Unable to hash value"),this.value=e}};Q4.ValueHashError=vV;var nu;(function(t){t[t.Undefined=0]="Undefined",t[t.Null=1]="Null",t[t.Boolean=2]="Boolean",t[t.Number=3]="Number",t[t.String=4]="String",t[t.Object=5]="Object",t[t.Array=6]="Array",t[t.Date=7]="Date",t[t.Uint8Array=8]="Uint8Array",t[t.Symbol=9]="Symbol",t[t.BigInt=10]="BigInt"})(nu||(nu={}));var fP=BigInt("14695981039346656037"),[W3r,K3r]=[BigInt("1099511628211"),BigInt("18446744073709551616")],Y3r=Array.from({length:256}).map((t,e)=>BigInt(e)),pct=new Float64Array(1),hct=new DataView(pct.buffer),mct=new Uint8Array(pct.buffer);function*Q3r(t){let e=t===0?1:Math.ceil(Math.floor(Math.log2(t)+1)/8);for(let r=0;r<e;r++)yield t>>8*(e-1-r)&255}function Z3r(t){Ta(nu.Array);for(let e of t)pP(e)}function J3r(t){Ta(nu.Boolean),Ta(t?1:0)}function X3r(t){Ta(nu.BigInt),hct.setBigInt64(0,t);for(let e of mct)Ta(e)}function eLr(t){Ta(nu.Date),pP(t.getTime())}function tLr(t){Ta(nu.Null)}function rLr(t){Ta(nu.Number),hct.setFloat64(0,t);for(let e of mct)Ta(e)}function nLr(t){Ta(nu.Object);for(let e of globalThis.Object.getOwnPropertyNames(t).sort())pP(e),pP(t[e])}function iLr(t){Ta(nu.String);for(let e=0;e<t.length;e++)for(let r of Q3r(t.charCodeAt(e)))Ta(r)}function oLr(t){Ta(nu.Symbol),pP(t.description)}function sLr(t){Ta(nu.Uint8Array);for(let e=0;e<t.length;e++)Ta(t[e])}function aLr(t){return Ta(nu.Undefined)}function pP(t){if((0,xf.IsArray)(t))return Z3r(t);if((0,xf.IsBoolean)(t))return J3r(t);if((0,xf.IsBigInt)(t))return X3r(t);if((0,xf.IsDate)(t))return eLr(t);if((0,xf.IsNull)(t))return tLr(t);if((0,xf.IsNumber)(t))return rLr(t);if((0,xf.IsObject)(t))return nLr(t);if((0,xf.IsString)(t))return iLr(t);if((0,xf.IsSymbol)(t))return oLr(t);if((0,xf.IsUint8Array)(t))return sLr(t);if((0,xf.IsUndefined)(t))return aLr(t);throw new vV(t)}function Ta(t){fP=fP^Y3r[t],fP=fP*W3r%K3r}function cLr(t){return fP=BigInt("14695981039346656037"),pP(t),fP}});var hP=m(XS=>{"use strict";var lLr=XS&&XS.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),uLr=XS&&XS.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&lLr(e,t,r)};Object.defineProperty(XS,"__esModule",{value:!0});uLr(gct(),XS)});var tme=m(X4=>{"use strict";Object.defineProperty(X4,"__esModule",{value:!0});X4.ValueCheckUnknownTypeError=void 0;X4.Check=ZLr;var Z4=gV(),eme=ld(),dLr=hP(),mP=Ze(),_ct=ed(),fLr=yS(),J4=qT(),pLr=vi(),hLr=oo(),Ro=bo(),mLr=Er(),yV=class extends pLr.TypeBoxError{constructor(e){super("Unknown type"),this.schema=e}};X4.ValueCheckUnknownTypeError=yV;function gLr(t){return t[mP.Kind]==="Any"||t[mP.Kind]==="Unknown"}function Rr(t){return t!==void 0}function _Lr(t,e,r){return!0}function vLr(t,e,r){return!0}function yLr(t,e,r){if(!(0,Ro.IsArray)(r)||Rr(t.minItems)&&!(r.length>=t.minItems)||Rr(t.maxItems)&&!(r.length<=t.maxItems)||!r.every(s=>ls(t.items,e,s))||t.uniqueItems===!0&&!(function(){let s=new Set;for(let a of r){let c=(0,dLr.Hash)(a);if(s.has(c))return!1;s.add(c)}return!0})())return!1;if(!(Rr(t.contains)||(0,Ro.IsNumber)(t.minContains)||(0,Ro.IsNumber)(t.maxContains)))return!0;let n=Rr(t.contains)?t.contains:(0,hLr.Never)(),o=r.reduce((s,a)=>ls(n,e,a)?s+1:s,0);return!(o===0||(0,Ro.IsNumber)(t.minContains)&&o<t.minContains||(0,Ro.IsNumber)(t.maxContains)&&o>t.maxContains)}function ELr(t,e,r){return(0,Ro.IsAsyncIterator)(r)}function TLr(t,e,r){return!(!(0,Ro.IsBigInt)(r)||Rr(t.exclusiveMaximum)&&!(r<t.exclusiveMaximum)||Rr(t.exclusiveMinimum)&&!(r>t.exclusiveMinimum)||Rr(t.maximum)&&!(r<=t.maximum)||Rr(t.minimum)&&!(r>=t.minimum)||Rr(t.multipleOf)&&r%t.multipleOf!==BigInt(0))}function SLr(t,e,r){return(0,Ro.IsBoolean)(r)}function bLr(t,e,r){return ls(t.returns,e,r.prototype)}function CLr(t,e,r){return!(!(0,Ro.IsDate)(r)||Rr(t.exclusiveMaximumTimestamp)&&!(r.getTime()<t.exclusiveMaximumTimestamp)||Rr(t.exclusiveMinimumTimestamp)&&!(r.getTime()>t.exclusiveMinimumTimestamp)||Rr(t.maximumTimestamp)&&!(r.getTime()<=t.maximumTimestamp)||Rr(t.minimumTimestamp)&&!(r.getTime()>=t.minimumTimestamp)||Rr(t.multipleOfTimestamp)&&r.getTime()%t.multipleOfTimestamp!==0)}function ALr(t,e,r){return(0,Ro.IsFunction)(r)}function xLr(t,e,r){let n=globalThis.Object.values(t.$defs),o=t.$defs[t.$ref];return ls(o,[...e,...n],r)}function wLr(t,e,r){return!(!(0,Ro.IsInteger)(r)||Rr(t.exclusiveMaximum)&&!(r<t.exclusiveMaximum)||Rr(t.exclusiveMinimum)&&!(r>t.exclusiveMinimum)||Rr(t.maximum)&&!(r<=t.maximum)||Rr(t.minimum)&&!(r>=t.minimum)||Rr(t.multipleOf)&&r%t.multipleOf!==0)}function ILr(t,e,r){let n=t.allOf.every(o=>ls(o,e,r));if(t.unevaluatedProperties===!1){let o=new RegExp((0,_ct.KeyOfPattern)(t)),s=Object.getOwnPropertyNames(r).every(a=>o.test(a));return n&&s}else if((0,mLr.IsSchema)(t.unevaluatedProperties)){let o=new RegExp((0,_ct.KeyOfPattern)(t)),s=Object.getOwnPropertyNames(r).every(a=>o.test(a)||ls(t.unevaluatedProperties,e,r[a]));return n&&s}else return n}function PLr(t,e,r){return(0,Ro.IsIterator)(r)}function RLr(t,e,r){return r===t.const}function OLr(t,e,r){return!1}function MLr(t,e,r){return!ls(t.not,e,r)}function NLr(t,e,r){return(0,Ro.IsNull)(r)}function LLr(t,e,r){return!(!Z4.TypeSystemPolicy.IsNumberLike(r)||Rr(t.exclusiveMaximum)&&!(r<t.exclusiveMaximum)||Rr(t.exclusiveMinimum)&&!(r>t.exclusiveMinimum)||Rr(t.minimum)&&!(r>=t.minimum)||Rr(t.maximum)&&!(r<=t.maximum)||Rr(t.multipleOf)&&r%t.multipleOf!==0)}function kLr(t,e,r){if(!Z4.TypeSystemPolicy.IsObjectLike(r)||Rr(t.minProperties)&&!(Object.getOwnPropertyNames(r).length>=t.minProperties)||Rr(t.maxProperties)&&!(Object.getOwnPropertyNames(r).length<=t.maxProperties))return!1;let n=Object.getOwnPropertyNames(t.properties);for(let o of n){let s=t.properties[o];if(t.required&&t.required.includes(o)){if(!ls(s,e,r[o])||((0,fLr.ExtendsUndefinedCheck)(s)||gLr(s))&&!(o in r))return!1}else if(Z4.TypeSystemPolicy.IsExactOptionalProperty(r,o)&&!ls(s,e,r[o]))return!1}if(t.additionalProperties===!1){let o=Object.getOwnPropertyNames(r);return t.required&&t.required.length===n.length&&o.length===n.length?!0:o.every(s=>n.includes(s))}else return typeof t.additionalProperties=="object"?Object.getOwnPropertyNames(r).every(s=>n.includes(s)||ls(t.additionalProperties,e,r[s])):!0}function DLr(t,e,r){return(0,Ro.IsPromise)(r)}function ULr(t,e,r){if(!Z4.TypeSystemPolicy.IsRecordLike(r)||Rr(t.minProperties)&&!(Object.getOwnPropertyNames(r).length>=t.minProperties)||Rr(t.maxProperties)&&!(Object.getOwnPropertyNames(r).length<=t.maxProperties))return!1;let[n,o]=Object.entries(t.patternProperties)[0],s=new RegExp(n),a=Object.entries(r).every(([u,d])=>s.test(u)?ls(o,e,d):!0),c=typeof t.additionalProperties=="object"?Object.entries(r).every(([u,d])=>s.test(u)?!0:ls(t.additionalProperties,e,d)):!0,l=t.additionalProperties===!1?Object.getOwnPropertyNames(r).every(u=>s.test(u)):!0;return a&&c&&l}function qLr(t,e,r){return ls((0,eme.Deref)(t,e),e,r)}function FLr(t,e,r){let n=new RegExp(t.source,t.flags);return Rr(t.minLength)&&!(r.length>=t.minLength)||Rr(t.maxLength)&&!(r.length<=t.maxLength)?!1:n.test(r)}function jLr(t,e,r){return!(0,Ro.IsString)(r)||Rr(t.minLength)&&!(r.length>=t.minLength)||Rr(t.maxLength)&&!(r.length<=t.maxLength)||Rr(t.pattern)&&!new RegExp(t.pattern).test(r)?!1:Rr(t.format)?J4.FormatRegistry.Has(t.format)?J4.FormatRegistry.Get(t.format)(r):!1:!0}function BLr(t,e,r){return(0,Ro.IsSymbol)(r)}function $Lr(t,e,r){return(0,Ro.IsString)(r)&&new RegExp(t.pattern).test(r)}function VLr(t,e,r){return ls((0,eme.Deref)(t,e),e,r)}function HLr(t,e,r){if(!(0,Ro.IsArray)(r)||t.items===void 0&&r.length!==0||r.length!==t.maxItems)return!1;if(!t.items)return!0;for(let n=0;n<t.items.length;n++)if(!ls(t.items[n],e,r[n]))return!1;return!0}function GLr(t,e,r){return(0,Ro.IsUndefined)(r)}function zLr(t,e,r){return t.anyOf.some(n=>ls(n,e,r))}function WLr(t,e,r){return!(!(0,Ro.IsUint8Array)(r)||Rr(t.maxByteLength)&&!(r.length<=t.maxByteLength)||Rr(t.minByteLength)&&!(r.length>=t.minByteLength))}function KLr(t,e,r){return!0}function YLr(t,e,r){return Z4.TypeSystemPolicy.IsVoidLike(r)}function QLr(t,e,r){return J4.TypeRegistry.Has(t[mP.Kind])?J4.TypeRegistry.Get(t[mP.Kind])(t,r):!1}function ls(t,e,r){let n=Rr(t.$id)?(0,eme.Pushref)(t,e):e,o=t;switch(o[mP.Kind]){case"Any":return _Lr(o,n,r);case"Argument":return vLr(o,n,r);case"Array":return yLr(o,n,r);case"AsyncIterator":return ELr(o,n,r);case"BigInt":return TLr(o,n,r);case"Boolean":return SLr(o,n,r);case"Constructor":return bLr(o,n,r);case"Date":return CLr(o,n,r);case"Function":return ALr(o,n,r);case"Import":return xLr(o,n,r);case"Integer":return wLr(o,n,r);case"Intersect":return ILr(o,n,r);case"Iterator":return PLr(o,n,r);case"Literal":return RLr(o,n,r);case"Never":return OLr(o,n,r);case"Not":return MLr(o,n,r);case"Null":return NLr(o,n,r);case"Number":return LLr(o,n,r);case"Object":return kLr(o,n,r);case"Promise":return DLr(o,n,r);case"Record":return ULr(o,n,r);case"Ref":return qLr(o,n,r);case"RegExp":return FLr(o,n,r);case"String":return jLr(o,n,r);case"Symbol":return BLr(o,n,r);case"TemplateLiteral":return $Lr(o,n,r);case"This":return VLr(o,n,r);case"Tuple":return HLr(o,n,r);case"Undefined":return GLr(o,n,r);case"Union":return zLr(o,n,r);case"Uint8Array":return WLr(o,n,r);case"Unknown":return KLr(o,n,r);case"Void":return YLr(o,n,r);default:if(!J4.TypeRegistry.Has(o[mP.Kind]))throw new yV(o);return QLr(o,n,r)}}function ZLr(...t){return t.length===3?ls(t[0],t[1],t[2]):ls(t[0],[],t[1])}});var iu=m(eb=>{"use strict";var JLr=eb&&eb.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),XLr=eb&&eb.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&JLr(e,t,r)};Object.defineProperty(eb,"__esModule",{value:!0});XLr(tme(),eb)});var Xhe=m(jm=>{"use strict";Object.defineProperty(jm,"__esModule",{value:!0});jm.ValueErrorIterator=jm.ValueErrorsUnknownTypeError=jm.ValueErrorType=void 0;jm.Errors=jkr;var e3=gV(),vct=ed(),EV=qT(),ekr=BB(),tkr=Jhe(),rkr=vi(),yct=ld(),nkr=hP(),ikr=iu(),rme=Ze(),okr=oo(),ao=bo(),je;(function(t){t[t.ArrayContains=0]="ArrayContains",t[t.ArrayMaxContains=1]="ArrayMaxContains",t[t.ArrayMaxItems=2]="ArrayMaxItems",t[t.ArrayMinContains=3]="ArrayMinContains",t[t.ArrayMinItems=4]="ArrayMinItems",t[t.ArrayUniqueItems=5]="ArrayUniqueItems",t[t.Array=6]="Array",t[t.AsyncIterator=7]="AsyncIterator",t[t.BigIntExclusiveMaximum=8]="BigIntExclusiveMaximum",t[t.BigIntExclusiveMinimum=9]="BigIntExclusiveMinimum",t[t.BigIntMaximum=10]="BigIntMaximum",t[t.BigIntMinimum=11]="BigIntMinimum",t[t.BigIntMultipleOf=12]="BigIntMultipleOf",t[t.BigInt=13]="BigInt",t[t.Boolean=14]="Boolean",t[t.DateExclusiveMaximumTimestamp=15]="DateExclusiveMaximumTimestamp",t[t.DateExclusiveMinimumTimestamp=16]="DateExclusiveMinimumTimestamp",t[t.DateMaximumTimestamp=17]="DateMaximumTimestamp",t[t.DateMinimumTimestamp=18]="DateMinimumTimestamp",t[t.DateMultipleOfTimestamp=19]="DateMultipleOfTimestamp",t[t.Date=20]="Date",t[t.Function=21]="Function",t[t.IntegerExclusiveMaximum=22]="IntegerExclusiveMaximum",t[t.IntegerExclusiveMinimum=23]="IntegerExclusiveMinimum",t[t.IntegerMaximum=24]="IntegerMaximum",t[t.IntegerMinimum=25]="IntegerMinimum",t[t.IntegerMultipleOf=26]="IntegerMultipleOf",t[t.Integer=27]="Integer",t[t.IntersectUnevaluatedProperties=28]="IntersectUnevaluatedProperties",t[t.Intersect=29]="Intersect",t[t.Iterator=30]="Iterator",t[t.Kind=31]="Kind",t[t.Literal=32]="Literal",t[t.Never=33]="Never",t[t.Not=34]="Not",t[t.Null=35]="Null",t[t.NumberExclusiveMaximum=36]="NumberExclusiveMaximum",t[t.NumberExclusiveMinimum=37]="NumberExclusiveMinimum",t[t.NumberMaximum=38]="NumberMaximum",t[t.NumberMinimum=39]="NumberMinimum",t[t.NumberMultipleOf=40]="NumberMultipleOf",t[t.Number=41]="Number",t[t.ObjectAdditionalProperties=42]="ObjectAdditionalProperties",t[t.ObjectMaxProperties=43]="ObjectMaxProperties",t[t.ObjectMinProperties=44]="ObjectMinProperties",t[t.ObjectRequiredProperty=45]="ObjectRequiredProperty",t[t.Object=46]="Object",t[t.Promise=47]="Promise",t[t.RegExp=48]="RegExp",t[t.StringFormatUnknown=49]="StringFormatUnknown",t[t.StringFormat=50]="StringFormat",t[t.StringMaxLength=51]="StringMaxLength",t[t.StringMinLength=52]="StringMinLength",t[t.StringPattern=53]="StringPattern",t[t.String=54]="String",t[t.Symbol=55]="Symbol",t[t.TupleLength=56]="TupleLength",t[t.Tuple=57]="Tuple",t[t.Uint8ArrayMaxByteLength=58]="Uint8ArrayMaxByteLength",t[t.Uint8ArrayMinByteLength=59]="Uint8ArrayMinByteLength",t[t.Uint8Array=60]="Uint8Array",t[t.Undefined=61]="Undefined",t[t.Union=62]="Union",t[t.Void=63]="Void"})(je||(jm.ValueErrorType=je={}));var TV=class extends rkr.TypeBoxError{constructor(e){super("Unknown type"),this.schema=e}};jm.ValueErrorsUnknownTypeError=TV;function Fm(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}function Or(t){return t!==void 0}var t3=class{constructor(e){this.iterator=e}[Symbol.iterator](){return this.iterator}First(){let e=this.iterator.next();return e.done?void 0:e.value}};jm.ValueErrorIterator=t3;function Ve(t,e,r,n,o=[]){return{type:t,schema:e,path:r,value:n,message:(0,tkr.GetErrorFunction)()({errorType:t,path:r,schema:e,value:n,errors:o}),errors:o}}function*skr(t,e,r,n){}function*akr(t,e,r,n){}function*ckr(t,e,r,n){if(!(0,ao.IsArray)(n))return yield Ve(je.Array,t,r,n);Or(t.minItems)&&!(n.length>=t.minItems)&&(yield Ve(je.ArrayMinItems,t,r,n)),Or(t.maxItems)&&!(n.length<=t.maxItems)&&(yield Ve(je.ArrayMaxItems,t,r,n));for(let a=0;a<n.length;a++)yield*us(t.items,e,`${r}/${a}`,n[a]);if(t.uniqueItems===!0&&!(function(){let a=new Set;for(let c of n){let l=(0,nkr.Hash)(c);if(a.has(l))return!1;a.add(l)}return!0})()&&(yield Ve(je.ArrayUniqueItems,t,r,n)),!(Or(t.contains)||Or(t.minContains)||Or(t.maxContains)))return;let o=Or(t.contains)?t.contains:(0,okr.Never)(),s=n.reduce((a,c,l)=>us(o,e,`${r}${l}`,c).next().done===!0?a+1:a,0);s===0&&(yield Ve(je.ArrayContains,t,r,n)),(0,ao.IsNumber)(t.minContains)&&s<t.minContains&&(yield Ve(je.ArrayMinContains,t,r,n)),(0,ao.IsNumber)(t.maxContains)&&s>t.maxContains&&(yield Ve(je.ArrayMaxContains,t,r,n))}function*lkr(t,e,r,n){(0,ao.IsAsyncIterator)(n)||(yield Ve(je.AsyncIterator,t,r,n))}function*ukr(t,e,r,n){if(!(0,ao.IsBigInt)(n))return yield Ve(je.BigInt,t,r,n);Or(t.exclusiveMaximum)&&!(n<t.exclusiveMaximum)&&(yield Ve(je.BigIntExclusiveMaximum,t,r,n)),Or(t.exclusiveMinimum)&&!(n>t.exclusiveMinimum)&&(yield Ve(je.BigIntExclusiveMinimum,t,r,n)),Or(t.maximum)&&!(n<=t.maximum)&&(yield Ve(je.BigIntMaximum,t,r,n)),Or(t.minimum)&&!(n>=t.minimum)&&(yield Ve(je.BigIntMinimum,t,r,n)),Or(t.multipleOf)&&n%t.multipleOf!==BigInt(0)&&(yield Ve(je.BigIntMultipleOf,t,r,n))}function*dkr(t,e,r,n){(0,ao.IsBoolean)(n)||(yield Ve(je.Boolean,t,r,n))}function*fkr(t,e,r,n){yield*us(t.returns,e,r,n.prototype)}function*pkr(t,e,r,n){if(!(0,ao.IsDate)(n))return yield Ve(je.Date,t,r,n);Or(t.exclusiveMaximumTimestamp)&&!(n.getTime()<t.exclusiveMaximumTimestamp)&&(yield Ve(je.DateExclusiveMaximumTimestamp,t,r,n)),Or(t.exclusiveMinimumTimestamp)&&!(n.getTime()>t.exclusiveMinimumTimestamp)&&(yield Ve(je.DateExclusiveMinimumTimestamp,t,r,n)),Or(t.maximumTimestamp)&&!(n.getTime()<=t.maximumTimestamp)&&(yield Ve(je.DateMaximumTimestamp,t,r,n)),Or(t.minimumTimestamp)&&!(n.getTime()>=t.minimumTimestamp)&&(yield Ve(je.DateMinimumTimestamp,t,r,n)),Or(t.multipleOfTimestamp)&&n.getTime()%t.multipleOfTimestamp!==0&&(yield Ve(je.DateMultipleOfTimestamp,t,r,n))}function*hkr(t,e,r,n){(0,ao.IsFunction)(n)||(yield Ve(je.Function,t,r,n))}function*mkr(t,e,r,n){let o=globalThis.Object.values(t.$defs),s=t.$defs[t.$ref];yield*us(s,[...e,...o],r,n)}function*gkr(t,e,r,n){if(!(0,ao.IsInteger)(n))return yield Ve(je.Integer,t,r,n);Or(t.exclusiveMaximum)&&!(n<t.exclusiveMaximum)&&(yield Ve(je.IntegerExclusiveMaximum,t,r,n)),Or(t.exclusiveMinimum)&&!(n>t.exclusiveMinimum)&&(yield Ve(je.IntegerExclusiveMinimum,t,r,n)),Or(t.maximum)&&!(n<=t.maximum)&&(yield Ve(je.IntegerMaximum,t,r,n)),Or(t.minimum)&&!(n>=t.minimum)&&(yield Ve(je.IntegerMinimum,t,r,n)),Or(t.multipleOf)&&n%t.multipleOf!==0&&(yield Ve(je.IntegerMultipleOf,t,r,n))}function*_kr(t,e,r,n){let o=!1;for(let s of t.allOf)for(let a of us(s,e,r,n))o=!0,yield a;if(o)return yield Ve(je.Intersect,t,r,n);if(t.unevaluatedProperties===!1){let s=new RegExp((0,vct.KeyOfPattern)(t));for(let a of Object.getOwnPropertyNames(n))s.test(a)||(yield Ve(je.IntersectUnevaluatedProperties,t,`${r}/${a}`,n))}if(typeof t.unevaluatedProperties=="object"){let s=new RegExp((0,vct.KeyOfPattern)(t));for(let a of Object.getOwnPropertyNames(n))if(!s.test(a)){let c=us(t.unevaluatedProperties,e,`${r}/${a}`,n[a]).next();c.done||(yield c.value)}}}function*vkr(t,e,r,n){(0,ao.IsIterator)(n)||(yield Ve(je.Iterator,t,r,n))}function*ykr(t,e,r,n){n!==t.const&&(yield Ve(je.Literal,t,r,n))}function*Ekr(t,e,r,n){yield Ve(je.Never,t,r,n)}function*Tkr(t,e,r,n){us(t.not,e,r,n).next().done===!0&&(yield Ve(je.Not,t,r,n))}function*Skr(t,e,r,n){(0,ao.IsNull)(n)||(yield Ve(je.Null,t,r,n))}function*bkr(t,e,r,n){if(!e3.TypeSystemPolicy.IsNumberLike(n))return yield Ve(je.Number,t,r,n);Or(t.exclusiveMaximum)&&!(n<t.exclusiveMaximum)&&(yield Ve(je.NumberExclusiveMaximum,t,r,n)),Or(t.exclusiveMinimum)&&!(n>t.exclusiveMinimum)&&(yield Ve(je.NumberExclusiveMinimum,t,r,n)),Or(t.maximum)&&!(n<=t.maximum)&&(yield Ve(je.NumberMaximum,t,r,n)),Or(t.minimum)&&!(n>=t.minimum)&&(yield Ve(je.NumberMinimum,t,r,n)),Or(t.multipleOf)&&n%t.multipleOf!==0&&(yield Ve(je.NumberMultipleOf,t,r,n))}function*Ckr(t,e,r,n){if(!e3.TypeSystemPolicy.IsObjectLike(n))return yield Ve(je.Object,t,r,n);Or(t.minProperties)&&!(Object.getOwnPropertyNames(n).length>=t.minProperties)&&(yield Ve(je.ObjectMinProperties,t,r,n)),Or(t.maxProperties)&&!(Object.getOwnPropertyNames(n).length<=t.maxProperties)&&(yield Ve(je.ObjectMaxProperties,t,r,n));let o=Array.isArray(t.required)?t.required:[],s=Object.getOwnPropertyNames(t.properties),a=Object.getOwnPropertyNames(n);for(let c of o)a.includes(c)||(yield Ve(je.ObjectRequiredProperty,t.properties[c],`${r}/${Fm(c)}`,void 0));if(t.additionalProperties===!1)for(let c of a)s.includes(c)||(yield Ve(je.ObjectAdditionalProperties,t,`${r}/${Fm(c)}`,n[c]));if(typeof t.additionalProperties=="object")for(let c of a)s.includes(c)||(yield*us(t.additionalProperties,e,`${r}/${Fm(c)}`,n[c]));for(let c of s){let l=t.properties[c];t.required&&t.required.includes(c)?(yield*us(l,e,`${r}/${Fm(c)}`,n[c]),(0,ekr.ExtendsUndefinedCheck)(t)&&!(c in n)&&(yield Ve(je.ObjectRequiredProperty,l,`${r}/${Fm(c)}`,void 0))):e3.TypeSystemPolicy.IsExactOptionalProperty(n,c)&&(yield*us(l,e,`${r}/${Fm(c)}`,n[c]))}}function*Akr(t,e,r,n){(0,ao.IsPromise)(n)||(yield Ve(je.Promise,t,r,n))}function*xkr(t,e,r,n){if(!e3.TypeSystemPolicy.IsRecordLike(n))return yield Ve(je.Object,t,r,n);Or(t.minProperties)&&!(Object.getOwnPropertyNames(n).length>=t.minProperties)&&(yield Ve(je.ObjectMinProperties,t,r,n)),Or(t.maxProperties)&&!(Object.getOwnPropertyNames(n).length<=t.maxProperties)&&(yield Ve(je.ObjectMaxProperties,t,r,n));let[o,s]=Object.entries(t.patternProperties)[0],a=new RegExp(o);for(let[c,l]of Object.entries(n))a.test(c)&&(yield*us(s,e,`${r}/${Fm(c)}`,l));if(typeof t.additionalProperties=="object")for(let[c,l]of Object.entries(n))a.test(c)||(yield*us(t.additionalProperties,e,`${r}/${Fm(c)}`,l));if(t.additionalProperties===!1){for(let[c,l]of Object.entries(n))if(!a.test(c))return yield Ve(je.ObjectAdditionalProperties,t,`${r}/${Fm(c)}`,l)}}function*wkr(t,e,r,n){yield*us((0,yct.Deref)(t,e),e,r,n)}function*Ikr(t,e,r,n){if(!(0,ao.IsString)(n))return yield Ve(je.String,t,r,n);if(Or(t.minLength)&&!(n.length>=t.minLength)&&(yield Ve(je.StringMinLength,t,r,n)),Or(t.maxLength)&&!(n.length<=t.maxLength)&&(yield Ve(je.StringMaxLength,t,r,n)),!new RegExp(t.source,t.flags).test(n))return yield Ve(je.RegExp,t,r,n)}function*Pkr(t,e,r,n){if(!(0,ao.IsString)(n))return yield Ve(je.String,t,r,n);Or(t.minLength)&&!(n.length>=t.minLength)&&(yield Ve(je.StringMinLength,t,r,n)),Or(t.maxLength)&&!(n.length<=t.maxLength)&&(yield Ve(je.StringMaxLength,t,r,n)),(0,ao.IsString)(t.pattern)&&(new RegExp(t.pattern).test(n)||(yield Ve(je.StringPattern,t,r,n))),(0,ao.IsString)(t.format)&&(EV.FormatRegistry.Has(t.format)?EV.FormatRegistry.Get(t.format)(n)||(yield Ve(je.StringFormat,t,r,n)):yield Ve(je.StringFormatUnknown,t,r,n))}function*Rkr(t,e,r,n){(0,ao.IsSymbol)(n)||(yield Ve(je.Symbol,t,r,n))}function*Okr(t,e,r,n){if(!(0,ao.IsString)(n))return yield Ve(je.String,t,r,n);new RegExp(t.pattern).test(n)||(yield Ve(je.StringPattern,t,r,n))}function*Mkr(t,e,r,n){yield*us((0,yct.Deref)(t,e),e,r,n)}function*Nkr(t,e,r,n){if(!(0,ao.IsArray)(n))return yield Ve(je.Tuple,t,r,n);if(t.items===void 0&&n.length!==0)return yield Ve(je.TupleLength,t,r,n);if(n.length!==t.maxItems)return yield Ve(je.TupleLength,t,r,n);if(t.items)for(let o=0;o<t.items.length;o++)yield*us(t.items[o],e,`${r}/${o}`,n[o])}function*Lkr(t,e,r,n){(0,ao.IsUndefined)(n)||(yield Ve(je.Undefined,t,r,n))}function*kkr(t,e,r,n){if((0,ikr.Check)(t,e,n))return;let o=t.anyOf.map(s=>new t3(us(s,e,r,n)));yield Ve(je.Union,t,r,n,o)}function*Dkr(t,e,r,n){if(!(0,ao.IsUint8Array)(n))return yield Ve(je.Uint8Array,t,r,n);Or(t.maxByteLength)&&!(n.length<=t.maxByteLength)&&(yield Ve(je.Uint8ArrayMaxByteLength,t,r,n)),Or(t.minByteLength)&&!(n.length>=t.minByteLength)&&(yield Ve(je.Uint8ArrayMinByteLength,t,r,n))}function*Ukr(t,e,r,n){}function*qkr(t,e,r,n){e3.TypeSystemPolicy.IsVoidLike(n)||(yield Ve(je.Void,t,r,n))}function*Fkr(t,e,r,n){EV.TypeRegistry.Get(t[rme.Kind])(t,n)||(yield Ve(je.Kind,t,r,n))}function*us(t,e,r,n){let o=Or(t.$id)?[...e,t]:e,s=t;switch(s[rme.Kind]){case"Any":return yield*skr(s,o,r,n);case"Argument":return yield*akr(s,o,r,n);case"Array":return yield*ckr(s,o,r,n);case"AsyncIterator":return yield*lkr(s,o,r,n);case"BigInt":return yield*ukr(s,o,r,n);case"Boolean":return yield*dkr(s,o,r,n);case"Constructor":return yield*fkr(s,o,r,n);case"Date":return yield*pkr(s,o,r,n);case"Function":return yield*hkr(s,o,r,n);case"Import":return yield*mkr(s,o,r,n);case"Integer":return yield*gkr(s,o,r,n);case"Intersect":return yield*_kr(s,o,r,n);case"Iterator":return yield*vkr(s,o,r,n);case"Literal":return yield*ykr(s,o,r,n);case"Never":return yield*Ekr(s,o,r,n);case"Not":return yield*Tkr(s,o,r,n);case"Null":return yield*Skr(s,o,r,n);case"Number":return yield*bkr(s,o,r,n);case"Object":return yield*Ckr(s,o,r,n);case"Promise":return yield*Akr(s,o,r,n);case"Record":return yield*xkr(s,o,r,n);case"Ref":return yield*wkr(s,o,r,n);case"RegExp":return yield*Ikr(s,o,r,n);case"String":return yield*Pkr(s,o,r,n);case"Symbol":return yield*Rkr(s,o,r,n);case"TemplateLiteral":return yield*Okr(s,o,r,n);case"This":return yield*Mkr(s,o,r,n);case"Tuple":return yield*Nkr(s,o,r,n);case"Undefined":return yield*Lkr(s,o,r,n);case"Union":return yield*kkr(s,o,r,n);case"Uint8Array":return yield*Dkr(s,o,r,n);case"Unknown":return yield*Ukr(s,o,r,n);case"Void":return yield*qkr(s,o,r,n);default:if(!EV.TypeRegistry.Has(s[rme.Kind]))throw new TV(t);return yield*Fkr(s,o,r,n)}}function jkr(...t){let e=t.length===3?us(t[0],t[1],"",t[2]):us(t[0],[],"",t[1]);return new t3(e)}});var rv=m(tv=>{"use strict";var Bkr=tv&&tv.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),Ect=tv&&tv.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Bkr(e,t,r)};Object.defineProperty(tv,"__esModule",{value:!0});Ect(Xhe(),tv);Ect(Jhe(),tv)});var Cct=m(tb=>{"use strict";Object.defineProperty(tb,"__esModule",{value:!0});tb.TransformDecodeError=tb.TransformDecodeCheckError=void 0;tb.TransformDecode=eDr;var $kr=VN(),Tct=Ze(),Sct=vi(),bct=ed(),ime=ld(),Vkr=iu(),Bm=bo(),r3=Er(),nme=class extends Sct.TypeBoxError{constructor(e,r,n){super("Unable to decode value as it does not match the expected schema"),this.schema=e,this.value=r,this.error=n}};tb.TransformDecodeCheckError=nme;var SV=class extends Sct.TypeBoxError{constructor(e,r,n,o){super(o instanceof Error?o.message:"Unknown error"),this.schema=e,this.path=r,this.value=n,this.error=o}};tb.TransformDecodeError=SV;function yi(t,e,r){try{return(0,r3.IsTransform)(t)?t[Tct.TransformKind].Decode(r):r}catch(n){throw new SV(t,e,r,n)}}function Hkr(t,e,r,n){return(0,Bm.IsArray)(n)?yi(t,r,n.map((o,s)=>wf(t.items,e,`${r}/${s}`,o))):yi(t,r,n)}function Gkr(t,e,r,n){if(!(0,Bm.IsObject)(n)||(0,Bm.IsValueType)(n))return yi(t,r,n);let o=(0,bct.KeyOfPropertyEntries)(t),s=o.map(d=>d[0]),a={...n};for(let[d,f]of o)d in a&&(a[d]=wf(f,e,`${r}/${d}`,a[d]));if(!(0,r3.IsTransform)(t.unevaluatedProperties))return yi(t,r,a);let c=Object.getOwnPropertyNames(a),l=t.unevaluatedProperties,u={...a};for(let d of c)s.includes(d)||(u[d]=yi(l,`${r}/${d}`,u[d]));return yi(t,r,u)}function zkr(t,e,r,n){let o=globalThis.Object.values(t.$defs),s=t.$defs[t.$ref],a=wf(s,[...e,...o],r,n);return yi(t,r,a)}function Wkr(t,e,r,n){return yi(t,r,wf(t.not,e,r,n))}function Kkr(t,e,r,n){if(!(0,Bm.IsObject)(n))return yi(t,r,n);let o=(0,bct.KeyOfPropertyKeys)(t),s={...n};for(let u of o)(0,Bm.HasPropertyKey)(s,u)&&((0,Bm.IsUndefined)(s[u])&&(!(0,r3.IsUndefined)(t.properties[u])||$kr.TypeSystemPolicy.IsExactOptionalProperty(s,u))||(s[u]=wf(t.properties[u],e,`${r}/${u}`,s[u])));if(!(0,r3.IsSchema)(t.additionalProperties))return yi(t,r,s);let a=Object.getOwnPropertyNames(s),c=t.additionalProperties,l={...s};for(let u of a)o.includes(u)||(l[u]=yi(c,`${r}/${u}`,l[u]));return yi(t,r,l)}function Ykr(t,e,r,n){if(!(0,Bm.IsObject)(n))return yi(t,r,n);let o=Object.getOwnPropertyNames(t.patternProperties)[0],s=new RegExp(o),a={...n};for(let d of Object.getOwnPropertyNames(n))s.test(d)&&(a[d]=wf(t.patternProperties[o],e,`${r}/${d}`,a[d]));if(!(0,r3.IsSchema)(t.additionalProperties))return yi(t,r,a);let c=Object.getOwnPropertyNames(a),l=t.additionalProperties,u={...a};for(let d of c)s.test(d)||(u[d]=yi(l,`${r}/${d}`,u[d]));return yi(t,r,u)}function Qkr(t,e,r,n){let o=(0,ime.Deref)(t,e);return yi(t,r,wf(o,e,r,n))}function Zkr(t,e,r,n){let o=(0,ime.Deref)(t,e);return yi(t,r,wf(o,e,r,n))}function Jkr(t,e,r,n){return(0,Bm.IsArray)(n)&&(0,Bm.IsArray)(t.items)?yi(t,r,t.items.map((o,s)=>wf(o,e,`${r}/${s}`,n[s]))):yi(t,r,n)}function Xkr(t,e,r,n){for(let o of t.anyOf){if(!(0,Vkr.Check)(o,e,n))continue;let s=wf(o,e,r,n);return yi(t,r,s)}return yi(t,r,n)}function wf(t,e,r,n){let o=(0,ime.Pushref)(t,e),s=t;switch(t[Tct.Kind]){case"Array":return Hkr(s,o,r,n);case"Import":return zkr(s,o,r,n);case"Intersect":return Gkr(s,o,r,n);case"Not":return Wkr(s,o,r,n);case"Object":return Kkr(s,o,r,n);case"Record":return Ykr(s,o,r,n);case"Ref":return Qkr(s,o,r,n);case"Symbol":return yi(s,r,n);case"This":return Zkr(s,o,r,n);case"Tuple":return Jkr(s,o,r,n);case"Union":return Xkr(s,o,r,n);default:return yi(s,r,n)}}function eDr(t,e,r){return wf(t,e,"",r)}});var Pct=m(rb=>{"use strict";Object.defineProperty(rb,"__esModule",{value:!0});rb.TransformEncodeError=rb.TransformEncodeCheckError=void 0;rb.TransformEncode=fDr;var tDr=VN(),xct=Ze(),wct=vi(),Ict=ed(),sme=ld(),Act=iu(),nv=bo(),n3=Er(),ome=class extends wct.TypeBoxError{constructor(e,r,n){super("The encoded value does not match the expected schema"),this.schema=e,this.value=r,this.error=n}};rb.TransformEncodeCheckError=ome;var bV=class extends wct.TypeBoxError{constructor(e,r,n,o){super(`${o instanceof Error?o.message:"Unknown error"}`),this.schema=e,this.path=r,this.value=n,this.error=o}};rb.TransformEncodeError=bV;function ks(t,e,r){try{return(0,n3.IsTransform)(t)?t[xct.TransformKind].Encode(r):r}catch(n){throw new bV(t,e,r,n)}}function rDr(t,e,r,n){let o=ks(t,r,n);return(0,nv.IsArray)(o)?o.map((s,a)=>If(t.items,e,`${r}/${a}`,s)):o}function nDr(t,e,r,n){let o=globalThis.Object.values(t.$defs),s=t.$defs[t.$ref],a=ks(t,r,n);return If(s,[...e,...o],r,a)}function iDr(t,e,r,n){let o=ks(t,r,n);if(!(0,nv.IsObject)(n)||(0,nv.IsValueType)(n))return o;let s=(0,Ict.KeyOfPropertyEntries)(t),a=s.map(f=>f[0]),c={...o};for(let[f,p]of s)f in c&&(c[f]=If(p,e,`${r}/${f}`,c[f]));if(!(0,n3.IsTransform)(t.unevaluatedProperties))return c;let l=Object.getOwnPropertyNames(c),u=t.unevaluatedProperties,d={...c};for(let f of l)a.includes(f)||(d[f]=ks(u,`${r}/${f}`,d[f]));return d}function oDr(t,e,r,n){return ks(t.not,r,ks(t,r,n))}function sDr(t,e,r,n){let o=ks(t,r,n);if(!(0,nv.IsObject)(o))return o;let s=(0,Ict.KeyOfPropertyKeys)(t),a={...o};for(let d of s)(0,nv.HasPropertyKey)(a,d)&&((0,nv.IsUndefined)(a[d])&&(!(0,n3.IsUndefined)(t.properties[d])||tDr.TypeSystemPolicy.IsExactOptionalProperty(a,d))||(a[d]=If(t.properties[d],e,`${r}/${d}`,a[d])));if(!(0,n3.IsSchema)(t.additionalProperties))return a;let c=Object.getOwnPropertyNames(a),l=t.additionalProperties,u={...a};for(let d of c)s.includes(d)||(u[d]=ks(l,`${r}/${d}`,u[d]));return u}function aDr(t,e,r,n){let o=ks(t,r,n);if(!(0,nv.IsObject)(n))return o;let s=Object.getOwnPropertyNames(t.patternProperties)[0],a=new RegExp(s),c={...o};for(let f of Object.getOwnPropertyNames(n))a.test(f)&&(c[f]=If(t.patternProperties[s],e,`${r}/${f}`,c[f]));if(!(0,n3.IsSchema)(t.additionalProperties))return c;let l=Object.getOwnPropertyNames(c),u=t.additionalProperties,d={...c};for(let f of l)a.test(f)||(d[f]=ks(u,`${r}/${f}`,d[f]));return d}function cDr(t,e,r,n){let o=(0,sme.Deref)(t,e),s=If(o,e,r,n);return ks(t,r,s)}function lDr(t,e,r,n){let o=(0,sme.Deref)(t,e),s=If(o,e,r,n);return ks(t,r,s)}function uDr(t,e,r,n){let o=ks(t,r,n);return(0,nv.IsArray)(t.items)?t.items.map((s,a)=>If(s,e,`${r}/${a}`,o[a])):[]}function dDr(t,e,r,n){for(let o of t.anyOf){if(!(0,Act.Check)(o,e,n))continue;let s=If(o,e,r,n);return ks(t,r,s)}for(let o of t.anyOf){let s=If(o,e,r,n);if((0,Act.Check)(t,e,s))return ks(t,r,s)}return ks(t,r,n)}function If(t,e,r,n){let o=(0,sme.Pushref)(t,e),s=t;switch(t[xct.Kind]){case"Array":return rDr(s,o,r,n);case"Import":return nDr(s,o,r,n);case"Intersect":return iDr(s,o,r,n);case"Not":return oDr(s,o,r,n);case"Object":return sDr(s,o,r,n);case"Record":return aDr(s,o,r,n);case"Ref":return cDr(s,o,r,n);case"This":return lDr(s,o,r,n);case"Tuple":return uDr(s,o,r,n);case"Union":return dDr(s,o,r,n);default:return ks(s,r,n)}}function fDr(t,e,r){return If(t,e,"",r)}});var Rct=m(lme=>{"use strict";Object.defineProperty(lme,"__esModule",{value:!0});lme.HasTransform=RDr;var cme=ld(),pDr=Ze(),Oo=Er(),hDr=bo();function mDr(t,e){return(0,Oo.IsTransform)(t)||Ho(t.items,e)}function gDr(t,e){return(0,Oo.IsTransform)(t)||Ho(t.items,e)}function _Dr(t,e){return(0,Oo.IsTransform)(t)||Ho(t.returns,e)||t.parameters.some(r=>Ho(r,e))}function vDr(t,e){return(0,Oo.IsTransform)(t)||Ho(t.returns,e)||t.parameters.some(r=>Ho(r,e))}function yDr(t,e){return(0,Oo.IsTransform)(t)||(0,Oo.IsTransform)(t.unevaluatedProperties)||t.allOf.some(r=>Ho(r,e))}function EDr(t,e){let r=globalThis.Object.getOwnPropertyNames(t.$defs).reduce((o,s)=>[...o,t.$defs[s]],[]),n=t.$defs[t.$ref];return(0,Oo.IsTransform)(t)||Ho(n,[...r,...e])}function TDr(t,e){return(0,Oo.IsTransform)(t)||Ho(t.items,e)}function SDr(t,e){return(0,Oo.IsTransform)(t)||Ho(t.not,e)}function bDr(t,e){return(0,Oo.IsTransform)(t)||Object.values(t.properties).some(r=>Ho(r,e))||(0,Oo.IsSchema)(t.additionalProperties)&&Ho(t.additionalProperties,e)}function CDr(t,e){return(0,Oo.IsTransform)(t)||Ho(t.item,e)}function ADr(t,e){let r=Object.getOwnPropertyNames(t.patternProperties)[0],n=t.patternProperties[r];return(0,Oo.IsTransform)(t)||Ho(n,e)||(0,Oo.IsSchema)(t.additionalProperties)&&(0,Oo.IsTransform)(t.additionalProperties)}function xDr(t,e){return(0,Oo.IsTransform)(t)?!0:Ho((0,cme.Deref)(t,e),e)}function wDr(t,e){return(0,Oo.IsTransform)(t)?!0:Ho((0,cme.Deref)(t,e),e)}function IDr(t,e){return(0,Oo.IsTransform)(t)||!(0,hDr.IsUndefined)(t.items)&&t.items.some(r=>Ho(r,e))}function PDr(t,e){return(0,Oo.IsTransform)(t)||t.anyOf.some(r=>Ho(r,e))}function Ho(t,e){let r=(0,cme.Pushref)(t,e),n=t;if(t.$id&&ame.has(t.$id))return!1;switch(t.$id&&ame.add(t.$id),t[pDr.Kind]){case"Array":return mDr(n,r);case"AsyncIterator":return gDr(n,r);case"Constructor":return _Dr(n,r);case"Function":return vDr(n,r);case"Import":return EDr(n,r);case"Intersect":return yDr(n,r);case"Iterator":return TDr(n,r);case"Not":return SDr(n,r);case"Object":return bDr(n,r);case"Promise":return CDr(n,r);case"Record":return ADr(n,r);case"Ref":return xDr(n,r);case"This":return wDr(n,r);case"Tuple":return IDr(n,r);case"Union":return PDr(n,r);default:return(0,Oo.IsTransform)(t)}}var ame=new Set;function RDr(t,e){return ame.clear(),Ho(t,e)}});var gP=m($m=>{"use strict";var ODr=$m&&$m.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),ume=$m&&$m.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&ODr(e,t,r)};Object.defineProperty($m,"__esModule",{value:!0});ume(Cct(),$m);ume(Pct(),$m);ume(Rct(),$m)});var Lct=m(ud=>{"use strict";Object.defineProperty(ud,"__esModule",{value:!0});ud.TypeCompiler=ud.Policy=ud.TypeCompilerTypeGuardError=ud.TypeCompilerUnknownTypeError=ud.TypeCheck=void 0;var i3=gP(),MDr=rv(),o3=gV(),Nct=vi(),NDr=ld(),LDr=hP(),s3=Ze(),a3=qT(),Oct=ed(),kDr=BB(),DDr=oo(),UDr=Sm(),fr=bo(),_P=Fue(),CV=class{constructor(e,r,n,o){this.schema=e,this.references=r,this.checkFunc=n,this.code=o,this.hasTransform=(0,i3.HasTransform)(e,r)}Code(){return this.code}Schema(){return this.schema}References(){return this.references}Errors(e){return(0,MDr.Errors)(this.schema,this.references,e)}Check(e){return this.checkFunc(e)}Decode(e){if(!this.checkFunc(e))throw new i3.TransformDecodeCheckError(this.schema,e,this.Errors(e).First());return this.hasTransform?(0,i3.TransformDecode)(this.schema,this.references,e):e}Encode(e){let r=this.hasTransform?(0,i3.TransformEncode)(this.schema,this.references,e):e;if(!this.checkFunc(r))throw new i3.TransformEncodeCheckError(this.schema,e,this.Errors(e).First());return r}};ud.TypeCheck=CV;var Vm;(function(t){function e(s){return s===36}t.DollarSign=e;function r(s){return s===95}t.IsUnderscore=r;function n(s){return s>=65&&s<=90||s>=97&&s<=122}t.IsAlpha=n;function o(s){return s>=48&&s<=57}t.IsNumeric=o})(Vm||(Vm={}));var AV;(function(t){function e(s){return s.length===0?!1:Vm.IsNumeric(s.charCodeAt(0))}function r(s){if(e(s))return!1;for(let a=0;a<s.length;a++){let c=s.charCodeAt(a);if(!(Vm.IsAlpha(c)||Vm.IsNumeric(c)||Vm.DollarSign(c)||Vm.IsUnderscore(c)))return!1}return!0}function n(s){return s.replace(/'/g,"\\'")}function o(s,a){return r(a)?`${s}.${a}`:`${s}['${n(a)}']`}t.Encode=o})(AV||(AV={}));var dme;(function(t){function e(r){let n=[];for(let o=0;o<r.length;o++){let s=r.charCodeAt(o);Vm.IsNumeric(s)||Vm.IsAlpha(s)?n.push(r.charAt(o)):n.push(`_${s}_`)}return n.join("").replace(/__/g,"_")}t.Encode=e})(dme||(dme={}));var fme;(function(t){function e(r){return r.replace(/'/g,"\\'")}t.Escape=e})(fme||(fme={}));var xV=class extends Nct.TypeBoxError{constructor(e){super("Unknown type"),this.schema=e}};ud.TypeCompilerUnknownTypeError=xV;var c3=class extends Nct.TypeBoxError{constructor(e){super("Preflight validation check failed to guard for the given schema"),this.schema=e}};ud.TypeCompilerTypeGuardError=c3;var nb;(function(t){function e(a,c,l){return o3.TypeSystemPolicy.ExactOptionalPropertyTypes?`('${c}' in ${a} ? ${l} : true)`:`(${AV.Encode(a,c)} !== undefined ? ${l} : true)`}t.IsExactOptionalProperty=e;function r(a){return o3.TypeSystemPolicy.AllowArrayObject?`(typeof ${a} === 'object' && ${a} !== null)`:`(typeof ${a} === 'object' && ${a} !== null && !Array.isArray(${a}))`}t.IsObjectLike=r;function n(a){return o3.TypeSystemPolicy.AllowArrayObject?`(typeof ${a} === 'object' && ${a} !== null && !(${a} instanceof Date) && !(${a} instanceof Uint8Array))`:`(typeof ${a} === 'object' && ${a} !== null && !Array.isArray(${a}) && !(${a} instanceof Date) && !(${a} instanceof Uint8Array))`}t.IsRecordLike=n;function o(a){return o3.TypeSystemPolicy.AllowNaN?`typeof ${a} === 'number'`:`Number.isFinite(${a})`}t.IsNumberLike=o;function s(a){return o3.TypeSystemPolicy.AllowNullVoid?`(${a} === undefined || ${a} === null)`:`${a} === undefined`}t.IsVoidLike=s})(nb||(ud.Policy=nb={}));var Mct;(function(t){function e(D){return D[s3.Kind]==="Any"||D[s3.Kind]==="Unknown"}function*r(D,fe,B){yield"true"}function*n(D,fe,B){yield"true"}function*o(D,fe,B){yield`Array.isArray(${B})`;let[Oe,me]=[lt("value","any"),lt("acc","number")];(0,fr.IsNumber)(D.maxItems)&&(yield`${B}.length <= ${D.maxItems}`),(0,fr.IsNumber)(D.minItems)&&(yield`${B}.length >= ${D.minItems}`);let ye=Ee(D.items,fe,"value");if(yield`${B}.every((${Oe}) => ${ye})`,(0,_P.IsSchema)(D.contains)||(0,fr.IsNumber)(D.minContains)||(0,fr.IsNumber)(D.maxContains)){let et=(0,_P.IsSchema)(D.contains)?D.contains:(0,DDr.Never)(),Rt=Ee(et,fe,"value"),Ot=(0,fr.IsNumber)(D.minContains)?[`(count >= ${D.minContains})`]:[],xt=(0,fr.IsNumber)(D.maxContains)?[`(count <= ${D.maxContains})`]:[],Ut=`const count = value.reduce((${me}, ${Oe}) => ${Rt} ? acc + 1 : acc, 0)`,Jt=["(count > 0)",...Ot,...xt].join(" && ");yield`((${Oe}) => { ${Ut}; return ${Jt}})(${B})`}D.uniqueItems===!0&&(yield`((${Oe}) => { const set = new Set(); for(const element of value) { const hashed = hash(element); if(set.has(hashed)) { return false } else { set.add(hashed) } } return true } )(${B})`)}function*s(D,fe,B){yield`(typeof value === 'object' && Symbol.asyncIterator in ${B})`}function*a(D,fe,B){yield`(typeof ${B} === 'bigint')`,(0,fr.IsBigInt)(D.exclusiveMaximum)&&(yield`${B} < BigInt(${D.exclusiveMaximum})`),(0,fr.IsBigInt)(D.exclusiveMinimum)&&(yield`${B} > BigInt(${D.exclusiveMinimum})`),(0,fr.IsBigInt)(D.maximum)&&(yield`${B} <= BigInt(${D.maximum})`),(0,fr.IsBigInt)(D.minimum)&&(yield`${B} >= BigInt(${D.minimum})`),(0,fr.IsBigInt)(D.multipleOf)&&(yield`(${B} % BigInt(${D.multipleOf})) === 0`)}function*c(D,fe,B){yield`(typeof ${B} === 'boolean')`}function*l(D,fe,B){yield*ne(D.returns,fe,`${B}.prototype`)}function*u(D,fe,B){yield`(${B} instanceof Date) && Number.isFinite(${B}.getTime())`,(0,fr.IsNumber)(D.exclusiveMaximumTimestamp)&&(yield`${B}.getTime() < ${D.exclusiveMaximumTimestamp}`),(0,fr.IsNumber)(D.exclusiveMinimumTimestamp)&&(yield`${B}.getTime() > ${D.exclusiveMinimumTimestamp}`),(0,fr.IsNumber)(D.maximumTimestamp)&&(yield`${B}.getTime() <= ${D.maximumTimestamp}`),(0,fr.IsNumber)(D.minimumTimestamp)&&(yield`${B}.getTime() >= ${D.minimumTimestamp}`),(0,fr.IsNumber)(D.multipleOfTimestamp)&&(yield`(${B}.getTime() % ${D.multipleOfTimestamp}) === 0`)}function*d(D,fe,B){yield`(typeof ${B} === 'function')`}function*f(D,fe,B){let Oe=globalThis.Object.getOwnPropertyNames(D.$defs).reduce((me,ye)=>[...me,D.$defs[ye]],[]);yield*ne((0,UDr.Ref)(D.$ref),[...fe,...Oe],B)}function*p(D,fe,B){yield`Number.isInteger(${B})`,(0,fr.IsNumber)(D.exclusiveMaximum)&&(yield`${B} < ${D.exclusiveMaximum}`),(0,fr.IsNumber)(D.exclusiveMinimum)&&(yield`${B} > ${D.exclusiveMinimum}`),(0,fr.IsNumber)(D.maximum)&&(yield`${B} <= ${D.maximum}`),(0,fr.IsNumber)(D.minimum)&&(yield`${B} >= ${D.minimum}`),(0,fr.IsNumber)(D.multipleOf)&&(yield`(${B} % ${D.multipleOf}) === 0`)}function*h(D,fe,B){let Oe=D.allOf.map(me=>Ee(me,fe,B)).join(" && ");if(D.unevaluatedProperties===!1){let me=He(`${new RegExp((0,Oct.KeyOfPattern)(D))};`),ye=`Object.getOwnPropertyNames(${B}).every(key => ${me}.test(key))`;yield`(${Oe} && ${ye})`}else if((0,_P.IsSchema)(D.unevaluatedProperties)){let me=He(`${new RegExp((0,Oct.KeyOfPattern)(D))};`),ye=`Object.getOwnPropertyNames(${B}).every(key => ${me}.test(key) || ${Ee(D.unevaluatedProperties,fe,`${B}[key]`)})`;yield`(${Oe} && ${ye})`}else yield`(${Oe})`}function*_(D,fe,B){yield`(typeof value === 'object' && Symbol.iterator in ${B})`}function*g(D,fe,B){typeof D.const=="number"||typeof D.const=="boolean"?yield`(${B} === ${D.const})`:yield`(${B} === '${fme.Escape(D.const)}')`}function*v(D,fe,B){yield"false"}function*E(D,fe,B){yield`(!${Ee(D.not,fe,B)})`}function*y(D,fe,B){yield`(${B} === null)`}function*S(D,fe,B){yield nb.IsNumberLike(B),(0,fr.IsNumber)(D.exclusiveMaximum)&&(yield`${B} < ${D.exclusiveMaximum}`),(0,fr.IsNumber)(D.exclusiveMinimum)&&(yield`${B} > ${D.exclusiveMinimum}`),(0,fr.IsNumber)(D.maximum)&&(yield`${B} <= ${D.maximum}`),(0,fr.IsNumber)(D.minimum)&&(yield`${B} >= ${D.minimum}`),(0,fr.IsNumber)(D.multipleOf)&&(yield`(${B} % ${D.multipleOf}) === 0`)}function*b(D,fe,B){yield nb.IsObjectLike(B),(0,fr.IsNumber)(D.minProperties)&&(yield`Object.getOwnPropertyNames(${B}).length >= ${D.minProperties}`),(0,fr.IsNumber)(D.maxProperties)&&(yield`Object.getOwnPropertyNames(${B}).length <= ${D.maxProperties}`);let Oe=Object.getOwnPropertyNames(D.properties);for(let me of Oe){let ye=AV.Encode(B,me),et=D.properties[me];if(D.required&&D.required.includes(me))yield*ne(et,fe,ye),((0,kDr.ExtendsUndefinedCheck)(et)||e(et))&&(yield`('${me}' in ${B})`);else{let Rt=Ee(et,fe,ye);yield nb.IsExactOptionalProperty(B,me,Rt)}}if(D.additionalProperties===!1)if(D.required&&D.required.length===Oe.length)yield`Object.getOwnPropertyNames(${B}).length === ${Oe.length}`;else{let me=`[${Oe.map(ye=>`'${ye}'`).join(", ")}]`;yield`Object.getOwnPropertyNames(${B}).every(key => ${me}.includes(key))`}if(typeof D.additionalProperties=="object"){let me=Ee(D.additionalProperties,fe,`${B}[key]`),ye=`[${Oe.map(et=>`'${et}'`).join(", ")}]`;yield`(Object.getOwnPropertyNames(${B}).every(key => ${ye}.includes(key) || ${me}))`}}function*w(D,fe,B){yield`${B} instanceof Promise`}function*P(D,fe,B){yield nb.IsRecordLike(B),(0,fr.IsNumber)(D.minProperties)&&(yield`Object.getOwnPropertyNames(${B}).length >= ${D.minProperties}`),(0,fr.IsNumber)(D.maxProperties)&&(yield`Object.getOwnPropertyNames(${B}).length <= ${D.maxProperties}`);let[Oe,me]=Object.entries(D.patternProperties)[0],ye=He(`${new RegExp(Oe)}`),et=Ee(me,fe,"value"),Rt=(0,_P.IsSchema)(D.additionalProperties)?Ee(D.additionalProperties,fe,B):D.additionalProperties===!1?"false":"true",Ot=`(${ye}.test(key) ? ${et} : ${Rt})`;yield`(Object.entries(${B}).every(([key, value]) => ${Ot}))`}function*A(D,fe,B){let Oe=(0,NDr.Deref)(D,fe);if(de.functions.has(D.$ref))return yield`${Me(D.$ref)}(${B})`;yield*ne(Oe,fe,B)}function*O(D,fe,B){let Oe=He(`${new RegExp(D.source,D.flags)};`);yield`(typeof ${B} === 'string')`,(0,fr.IsNumber)(D.maxLength)&&(yield`${B}.length <= ${D.maxLength}`),(0,fr.IsNumber)(D.minLength)&&(yield`${B}.length >= ${D.minLength}`),yield`${Oe}.test(${B})`}function*L(D,fe,B){yield`(typeof ${B} === 'string')`,(0,fr.IsNumber)(D.maxLength)&&(yield`${B}.length <= ${D.maxLength}`),(0,fr.IsNumber)(D.minLength)&&(yield`${B}.length >= ${D.minLength}`),D.pattern!==void 0&&(yield`${He(`${new RegExp(D.pattern)};`)}.test(${B})`),D.format!==void 0&&(yield`format('${D.format}', ${B})`)}function*j(D,fe,B){yield`(typeof ${B} === 'symbol')`}function*$(D,fe,B){yield`(typeof ${B} === 'string')`,yield`${He(`${new RegExp(D.pattern)};`)}.test(${B})`}function*Q(D,fe,B){yield`${Me(D.$ref)}(${B})`}function*K(D,fe,B){if(yield`Array.isArray(${B})`,D.items===void 0)return yield`${B}.length === 0`;yield`(${B}.length === ${D.maxItems})`;for(let Oe=0;Oe<D.items.length;Oe++)yield`${Ee(D.items[Oe],fe,`${B}[${Oe}]`)}`}function*N(D,fe,B){yield`${B} === undefined`}function*G(D,fe,B){yield`(${D.anyOf.map(me=>Ee(me,fe,B)).join(" || ")})`}function*Y(D,fe,B){yield`${B} instanceof Uint8Array`,(0,fr.IsNumber)(D.maxByteLength)&&(yield`(${B}.length <= ${D.maxByteLength})`),(0,fr.IsNumber)(D.minByteLength)&&(yield`(${B}.length >= ${D.minByteLength})`)}function*J(D,fe,B){yield"true"}function*ie(D,fe,B){yield nb.IsVoidLike(B)}function*oe(D,fe,B){let Oe=de.instances.size;de.instances.set(Oe,D),yield`kind('${D[s3.Kind]}', ${Oe}, ${B})`}function*ne(D,fe,B,Oe=!0){let me=(0,fr.IsString)(D.$id)?[...fe,D]:fe,ye=D;if(Oe&&(0,fr.IsString)(D.$id)){let et=Me(D.$id);if(de.functions.has(et))return yield`${et}(${B})`;{de.functions.set(et,"<deferred>");let Rt=Je(et,D,fe,"value",!1);return de.functions.set(et,Rt),yield`${et}(${B})`}}switch(ye[s3.Kind]){case"Any":return yield*r(ye,me,B);case"Argument":return yield*n(ye,me,B);case"Array":return yield*o(ye,me,B);case"AsyncIterator":return yield*s(ye,me,B);case"BigInt":return yield*a(ye,me,B);case"Boolean":return yield*c(ye,me,B);case"Constructor":return yield*l(ye,me,B);case"Date":return yield*u(ye,me,B);case"Function":return yield*d(ye,me,B);case"Import":return yield*f(ye,me,B);case"Integer":return yield*p(ye,me,B);case"Intersect":return yield*h(ye,me,B);case"Iterator":return yield*_(ye,me,B);case"Literal":return yield*g(ye,me,B);case"Never":return yield*v(ye,me,B);case"Not":return yield*E(ye,me,B);case"Null":return yield*y(ye,me,B);case"Number":return yield*S(ye,me,B);case"Object":return yield*b(ye,me,B);case"Promise":return yield*w(ye,me,B);case"Record":return yield*P(ye,me,B);case"Ref":return yield*A(ye,me,B);case"RegExp":return yield*O(ye,me,B);case"String":return yield*L(ye,me,B);case"Symbol":return yield*j(ye,me,B);case"TemplateLiteral":return yield*$(ye,me,B);case"This":return yield*Q(ye,me,B);case"Tuple":return yield*K(ye,me,B);case"Undefined":return yield*N(ye,me,B);case"Union":return yield*G(ye,me,B);case"Uint8Array":return yield*Y(ye,me,B);case"Unknown":return yield*J(ye,me,B);case"Void":return yield*ie(ye,me,B);default:if(!a3.TypeRegistry.Has(ye[s3.Kind]))throw new xV(D);return yield*oe(ye,me,B)}}let de={language:"javascript",functions:new Map,variables:new Map,instances:new Map};function Ee(D,fe,B,Oe=!0){return`(${[...ne(D,fe,B,Oe)].join(" && ")})`}function Me(D){return`check_${dme.Encode(D)}`}function He(D){let fe=`local_${de.variables.size}`;return de.variables.set(fe,`const ${fe} = ${D}`),fe}function Je(D,fe,B,Oe,me=!0){let[ye,et]=[`
`,Ut=>"".padStart(Ut," ")],Rt=lt("value","any"),Ot=St("boolean"),xt=[...ne(fe,B,Oe,me)].map(Ut=>`${et(4)}${Ut}`).join(` &&${ye}`);return`function ${D}(${Rt})${Ot} {${ye}${et(2)}return (${ye}${xt}${ye}${et(2)})
}`}function lt(D,fe){let B=de.language==="typescript"?`: ${fe}`:"";return`${D}${B}`}function St(D){return de.language==="typescript"?`: ${D}`:""}function Dt(D,fe,B){let Oe=Je("check",D,fe,"value"),me=lt("value","any"),ye=St("boolean"),et=[...de.functions.values()],Rt=[...de.variables.values()],Ot=(0,fr.IsString)(D.$id)?`return function check(${me})${ye} {
  return ${Me(D.$id)}(value)
}`:`return ${Oe}`;return[...Rt,...et,Ot].join(`
`)}function qt(...D){let fe={language:"javascript"},[B,Oe,me]=D.length===2&&(0,fr.IsArray)(D[1])?[D[0],D[1],fe]:D.length===2&&!(0,fr.IsArray)(D[1])?[D[0],[],D[1]]:D.length===3?[D[0],D[1],D[2]]:D.length===1?[D[0],[],fe]:[null,[],fe];if(de.language=me.language,de.variables.clear(),de.functions.clear(),de.instances.clear(),!(0,_P.IsSchema)(B))throw new c3(B);for(let ye of Oe)if(!(0,_P.IsSchema)(ye))throw new c3(ye);return Dt(B,Oe,me)}t.Code=qt;function Nt(D,fe=[]){let B=qt(D,fe,{language:"javascript"}),Oe=globalThis.Function("kind","format","hash",B),me=new Map(de.instances);function ye(xt,Ut,Jt){if(!a3.TypeRegistry.Has(xt)||!me.has(Ut))return!1;let $t=a3.TypeRegistry.Get(xt),ar=me.get(Ut);return $t(ar,Jt)}function et(xt,Ut){return a3.FormatRegistry.Has(xt)?a3.FormatRegistry.Get(xt)(Ut):!1}function Rt(xt){return(0,LDr.Hash)(xt)}let Ot=Oe(ye,et,Rt);return new CV(D,fe,Ot,B)}t.Compile=Nt})(Mct||(ud.TypeCompiler=Mct={}))});var Dct=m(Pf=>{"use strict";var qDr=Pf&&Pf.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),FDr=Pf&&Pf.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&qDr(e,t,r)};Object.defineProperty(Pf,"__esModule",{value:!0});Pf.ValueErrorIterator=Pf.ValueErrorType=void 0;var kct=rv();Object.defineProperty(Pf,"ValueErrorType",{enumerable:!0,get:function(){return kct.ValueErrorType}});Object.defineProperty(Pf,"ValueErrorIterator",{enumerable:!0,get:function(){return kct.ValueErrorIterator}});FDr(Lct(),Pf)});var wV=m(l3=>{"use strict";Object.defineProperty(l3,"__esModule",{value:!0});l3.filterContextItemsByType=$Dr;l3.filterSupportedContextItems=VDr;l3.addOrValidateContextItemsIDs=GDr;var co=S4(),Uct=Dct(),pme=ws(),hme=An(),qct=co.Type.Object({importance:co.Type.Optional(co.Type.Integer({minimum:0,maximum:100})),id:co.Type.Optional(co.Type.String()),origin:co.Type.Optional(co.Type.Union([co.Type.Literal("request"),co.Type.Literal("update")]))}),Fct=co.Type.Intersect([co.Type.Object({name:co.Type.String(),value:co.Type.String()}),qct]),jct=co.Type.Intersect([co.Type.Object({uri:co.Type.String(),value:co.Type.String(),additionalUris:co.Type.Optional(co.Type.Array(co.Type.String()))}),qct]),jDr=[Fct,jct],$Un=co.Type.Union(jDr),BDr=new Map([["Trait",Uct.TypeCompiler.Compile(Fct)],["CodeSnippet",Uct.TypeCompiler.Compile(jct)]]);function $Dr(t,e){return t.map(r=>{let n=r.data.filter(o=>o.type===e);return n.length>0?{...r,data:n}:void 0}).filter(r=>r!==void 0)}function VDr(t){let e=[],r=0;return t.forEach(n=>{let o=!1;for(let[s,a]of BDr.entries())if(a.Check(n)){e.push({...n,type:s}),o=!0;break}o||r++}),[e,r]}function HDr(t){return t.length>0&&t.replaceAll(/[^a-zA-Z0-9-]/g,"").length===t.length}function GDr(t,e){let r=new Set,n=t.get(hme.ICompletionsLogTargetService),o=[];for(let s of e){let a=s.id??(0,pme.generateUuid)();if(!HDr(a)){let c=(0,pme.generateUuid)();hme.logger.error(n,`Invalid context item ID ${a}, replacing with ${c}`),a=c}if(r.has(a)){let c=(0,pme.generateUuid)();hme.logger.error(n,`Duplicate context item ID ${a}, replacing with ${c}`),a=c}r.add(a),o.push({...s,id:a})}return o}});var ib=m(Hm=>{"use strict";Object.defineProperty(Hm,"__esModule",{value:!0});Hm.PerCompletionContextProviderStatistics=Hm.ContextProviderStatistics=Hm.ICompletionsContextProviderService=void 0;Hm.componentStatisticsToPromptMatcher=KDr;var zDr=Qe(),WDr=Dm();Hm.ICompletionsContextProviderService=(0,zDr.createServiceIdentifier)("ICompletionsContextProviderService");var mme=class{constructor(e=()=>new IV){this.createStatistics=e,this.statistics=new WDr.LRUCacheMap(25)}getStatisticsForCompletion(e){let r=this.statistics.get(e);if(r)return r;let n=this.createStatistics();return this.statistics.set(e,n),n}getPreviousStatisticsForCompletion(e){let r=Array.from(this.statistics.keys());for(let n=r.length-1;n>=0;n--){let o=r[n];if(o!==e)return this.statistics.peek(o)}}};Hm.ContextProviderStatistics=mme;var IV=class{constructor(){this._expectations=new Map,this._lastResolution=new Map,this._statistics=new Map,this.opportunityId=void 0}addExpectations(e,r){let n=this._expectations.get(e)??[];this._expectations.set(e,[...n,...r])}clearExpectations(){this._expectations.clear()}setLastResolution(e,r){this._lastResolution.set(e,r)}setOpportunityId(e){this.opportunityId=e}get(e){return this._statistics.get(e)}getAllUsageStatistics(){return this._statistics.entries()}computeMatch(e){try{for(let[r,n]of this._expectations){if(n.length===0)continue;let o=this._lastResolution.get(r)??"none";if(o==="none"||o==="error"){this._statistics.set(r,{usage:"none",resolution:o});continue}let s=[];for(let[u,d]of n){let f={id:u.id,type:u.type};if(u.origin&&(f.origin=u.origin),d==="content_excluded"){s.push({...f,usage:"none_content_excluded"});continue}let p=e.find(h=>h.source===u);p===void 0?s.push({...f,usage:"error"}):s.push({...f,usage:p.expectedTokens>0&&p.expectedTokens===p.actualTokens?"full":p.actualTokens>0?"partial":"none",expectedTokens:p.expectedTokens,actualTokens:p.actualTokens})}let c=s.reduce((u,d)=>d.usage==="full"?u+1:d.usage==="partial"?u+.5:u,0)/n.length,l=c===1?"full":c===0?"none":"partial";this._statistics.set(r,{resolution:o,usage:l,usageDetails:s})}}finally{this.clearExpectations(),this._lastResolution.clear()}}};Hm.PerCompletionContextProviderStatistics=IV;function KDr(t){return t.map(e=>{if(!(e.source===void 0||e.expectedTokens===void 0||e.actualTokens===void 0))return{source:e.source,expectedTokens:e.expectedTokens,actualTokens:e.actualTokens}}).filter(e=>e!==void 0)}});var OV=m(li=>{"use strict";var yme=li&&li.__decorate||function(t,e,r,n){var o=arguments.length,s=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(o<3?a(s):o>3?a(e,r,s):a(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},Rf=li&&li.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(li,"__esModule",{value:!0});li.CachedContextProviderRegistry=li.MutableContextProviderRegistry=li.CoreContextProviderRegistry=li.DefaultContextProvidersContainer=li.ICompletionsDefaultContextProviders=li.ICompletionsContextProviderRegistryService=void 0;li.telemetrizeContextItems=r6r;li.matchContextItems=n6r;li.useContextProviderAPI=o6r;var YDr=cm(),Eme=fV(),Vct=Qe(),QDr=Gr(),Tme=Nr(),PV=Gl(),Hct=Wa(),ZDr=Dm(),Gm=An(),Sme=QS(),Bct=Zat(),JDr=Jat(),XDr=ect(),e6r=tct(),t6r=nct(),$ct=wV(),Gct=ib();li.ICompletionsContextProviderRegistryService=(0,Vct.createServiceIdentifier)("ICompletionsContextProviderRegistryService");li.ICompletionsDefaultContextProviders=(0,Vct.createServiceIdentifier)("ICompletionsDefaultContextProviders");var gme=class{constructor(){this.ids=[]}add(e){this.ids.push(e)}getIds(){return this.ids}};li.DefaultContextProvidersContainer=gme;var RV=class{constructor(e,r,n,o,s,a){this.match=e,this.registryService=r,this.runtimeMode=n,this.instantiationService=o,this.logTarget=s,this.contextProviderStatistics=a}registerContextProvider(e){throw new Error("Should not be call. Use ILanguageContextProviderService")}unregisterContextProvider(e){throw new Error("Should not be call. Use ILanguageContextProviderService")}get providers(){return this.registryService.getAllProviders([Eme.ProviderTarget.Completions]).slice()}async resolveAllProviders(e,r,n,o,s,a){if(s?.isCancellationRequested)return Gm.logger.debug(this.logTarget,"Resolving context providers cancelled"),[];let c=new Map;this.instantiationService.invokeFunction(XDr.fillInCSharpActiveExperiments,c,o);let l=[],u=this.providers;if(u.length===0)return l;let d=await this.matchProviders(u,n,o),f=d.filter(w=>w[1]>0);if(d.filter(w=>w[1]<=0).forEach(([w,P])=>{let A={providerId:w.id,matchScore:P,resolution:"none",resolutionTimeMs:0,data:[]};l.push(A)}),f.length===0)return l;if(s?.isCancellationRequested)return Gm.logger.debug(this.logTarget,"Resolving context providers cancelled"),[];this.instantiationService.invokeFunction(JDr.fillInCppVSCodeActiveExperiments,f.map(w=>w[0].id),c,o),this.instantiationService.invokeFunction(e6r.fillInMultiLanguageActiveExperiments,f.map(w=>w[0].id),c,o),this.instantiationService.invokeFunction(t6r.fillInTsActiveExperiments,f.map(w=>w[0].id),c,o);let h=new YDr.CancellationTokenSource;if(s){let w=s.onCancellationRequested(P=>{h.cancel(),w.dispose()})}let _=this.runtimeMode.isDebugEnabled()&&!this.runtimeMode.isRunningInSimulation()?0:this.instantiationService.invokeFunction(s6r,n.languageId,o),g=_>0?Date.now()+_:Number.MAX_SAFE_INTEGER,v;_>0&&(v=setTimeout(()=>{h.cancel(),h.dispose()},_));let E=new Map,y={completionId:e,opportunityId:r,documentContext:n,activeExperiments:c,timeBudget:_,timeoutEnd:g,data:a};for(let[w]of f){let P=this.contextProviderStatistics.getPreviousStatisticsForCompletion(e)?.get(w.id);P&&(y.previousUsageStatistics=P);let A=w.resolver.resolve(y,h.token);E.set(w.id,A)}let S=this.contextProviderStatistics.getStatisticsForCompletion(e);S.setOpportunityId(r);let b=await(0,Bct.resolveAll)(E,h.token);v&&clearTimeout(v);for(let[w,P]of f){let A=b.get(w.id);if(A){if(A.status==="error")(0,QDr.isCancellationError)(A.reason)||Gm.logger.error(this.logTarget,`Error resolving context from ${w.id}: `,A.reason),l.push({providerId:w.id,matchScore:P,resolution:A.status,resolutionTimeMs:A.resolutionTime,data:[]});else{let O=[...A.value??[]];if((A.status==="none"||A.status==="partial")&&(Gm.logger.info(this.logTarget,`Context provider ${w.id} exceeded time budget of ${_}ms`),w.resolver.resolveOnTimeout))try{let K=w.resolver.resolveOnTimeout(y);(0,Bct.isArrayOfT)(K)?O.push(...K):K&&O.push(K),O.length>0&&(A.status="partial")}catch(K){Gm.logger.error(this.logTarget,`Error in fallback logic for context provider ${w.id}: `,K)}let[L,j]=(0,$ct.filterSupportedContextItems)(O);j&&Gm.logger.error(this.logTarget,`Dropped ${j} context items from ${w.id} due to invalid schema`);let $=this.instantiationService.invokeFunction($ct.addOrValidateContextItemsIDs,L),Q={providerId:w.id,matchScore:P,resolution:A.status,resolutionTimeMs:A.resolutionTime,data:$};l.push(Q)}S.setLastResolution(w.id,A.status)}else Gm.logger.error(this.logTarget,`Context provider ${w.id} not found in results`)}return l.sort((w,P)=>P.matchScore-w.matchScore)}async matchProviders(e,r,n){let o=this.instantiationService.invokeFunction(zct,r.languageId,n),s=o.length===1&&o[0]==="*";return await Promise.all(e.map(async c=>{if(!s&&!o.includes(c.id))return[c,0];let l=await this.match(this.instantiationService,c.selector,r);return[c,l]}))}};li.CoreContextProviderRegistry=RV;li.CoreContextProviderRegistry=RV=yme([Rf(1,Eme.ILanguageContextProviderService),Rf(2,Sme.ICompletionsRuntimeModeService),Rf(3,Tme.IInstantiationService),Rf(4,Gm.ICompletionsLogTargetService),Rf(5,Gct.ICompletionsContextProviderService)],RV);var _me=class extends RV{constructor(e,r,n,o,s,a){super(e,r,n,o,s,a),this._providers=[]}registerContextProvider(e){if(e.id.includes(",")||e.id.includes("*"))throw new Error(`A context provider id cannot contain a comma or an asterisk. The id ${e.id} is invalid.`);if(this._providers.find(r=>r.id===e.id))throw new Error(`A context provider with id ${e.id} has already been registered`);this._providers.push(e)}unregisterContextProvider(e){this._providers=this._providers.filter(r=>r.id!==e)}get providers(){return this._providers.slice().concat(super.providers)}};li.MutableContextProviderRegistry=_me;li.MutableContextProviderRegistry=_me=yme([Rf(1,Eme.ILanguageContextProviderService),Rf(2,Sme.ICompletionsRuntimeModeService),Rf(3,Tme.IInstantiationService),Rf(4,Gm.ICompletionsLogTargetService),Rf(5,Gct.ICompletionsContextProviderService)],_me);var vme=class{constructor(e,r,n){this._cachedContextItems=new ZDr.LRUCacheMap(5),this.delegate=n.createInstance(e,r)}registerContextProvider(e){this.delegate.registerContextProvider(e)}unregisterContextProvider(e){this.delegate.unregisterContextProvider(e)}get providers(){return this.delegate.providers}async resolveAllProviders(e,r,n,o,s,a){let c=this._cachedContextItems.get(e);if(e&&c&&c.length>0)return c;let l=await this.delegate.resolveAllProviders(e,r,n,o,s,a);return l.length>0&&e&&this._cachedContextItems.set(e,l),l}};li.CachedContextProviderRegistry=vme;li.CachedContextProviderRegistry=vme=yme([Rf(2,Tme.IInstantiationService)],vme);function r6r(t,e,r){let n=t.getStatisticsForCompletion(e);return r.map(s=>{let{providerId:a,resolution:c,resolutionTimeMs:l,matchScore:u,data:d}=s,f=n.get(a),p=f?.usage??"none";(u<=0||c==="none"||c==="error")&&(p="none");let h={providerId:a,resolution:c,resolutionTimeMs:l,usage:p,usageDetails:f?.usageDetails,matched:u>0,numResolvedItems:d.length},_=f?.usageDetails!==void 0?f?.usageDetails.filter(v=>v.usage==="full"||v.usage==="partial"||v.usage==="partial_content_excluded").length:void 0,g=f?.usageDetails!==void 0?f?.usageDetails.filter(v=>v.usage==="partial"||v.usage==="partial_content_excluded").length:void 0;return _!==void 0&&(h.numUsedItems=_),g!==void 0&&(h.numPartiallyUsedItems=g),h})}function n6r(t){return t.matchScore>0&&t.resolution!=="error"}function zct(t,e,r){let n=i6r(t,e,r),o=(0,PV.getConfig)(t,PV.ConfigKey.ContextProviders)??[];if(n.length===1&&n[0]==="*"||o.length===1&&o[0]==="*")return["*"];let s=t.get(li.ICompletionsDefaultContextProviders).getIds();return Array.from(new Set([...s,...n,...o]))}function i6r(t,e,r){if(t.get(Sme.ICompletionsRuntimeModeService).isDebugEnabled())return["*"];let n=t.get(Hct.ICompletionsFeaturesService),o=n.contextProviders(r),s=n.getContextProviderExpSettings(e);if(s!==void 0)for(let a of s.ids)o.includes(a)||o.push(a);return o}function o6r(t,e,r){return zct(t,e,r).length>0}function s6r(t,e,r){let n=(0,PV.getConfig)(t,PV.ConfigKey.ContextProviderTimeBudget);return n!==void 0&&typeof n=="number"?n:t.get(Hct.ICompletionsFeaturesService).contextProviderTimeBudget(e,r)}});var MV=m(Of=>{"use strict";var a6r=Of&&Of.__decorate||function(t,e,r,n){var o=arguments.length,s=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(o<3?a(s):o>3?a(e,r,s):a(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},c6r=Of&&Of.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(Of,"__esModule",{value:!0});Of.ContextProviderBridge=Of.ICompletionsContextProviderBridgeService=void 0;var l6r=Qe(),u6r=Dm(),d6r=OV();Of.ICompletionsContextProviderBridgeService=(0,l6r.createServiceIdentifier)("ICompletionsContextProviderBridgeService");var bme=class{constructor(e){this.contextProviderRegistry=e,this.scheduledResolutions=new u6r.LRUCacheMap(25)}schedule(e,r,n,o,s,a){let{textDocument:c,originalPosition:l,originalOffset:u,originalVersion:d,editsWithPosition:f}=e,p=this.contextProviderRegistry.resolveAllProviders(r,n,{uri:c.uri,languageId:c.detectedLanguageId,version:d,offset:u,position:l,proposedEdits:f.length>0?f:void 0},o,s,a?.data);this.scheduledResolutions.set(r,p)}async resolution(e){let r=this.scheduledResolutions.get(e);return r?await r:[]}};Of.ContextProviderBridge=bme;Of.ContextProviderBridge=bme=a6r([c6r(0,d6r.ICompletionsContextProviderRegistryService)],bme)});var Yct=m(vP=>{"use strict";Object.defineProperty(vP,"__esModule",{value:!0});vP.getBlockParser=kV;vP.isEmptyBlockStart=m6r;vP.isBlockBodyFinished=g6r;vP.getNodeStart=_6r;var iv=KS(),NV=class{constructor(e,r,n){this.languageId=e,this.nodeMatch=r,this.nodeTypesWithBlockOrStmtChild=n}async getNodeMatchAtPosition(e,r,n){let o=await(0,iv.parseTreeSitter)(this.languageId,e);try{let a=o.rootNode.descendantForIndex(r);for(;a;){let c=this.nodeMatch[a.type];if(c){if(!this.nodeTypesWithBlockOrStmtChild.has(a.type))break;let l=this.nodeTypesWithBlockOrStmtChild.get(a.type);if((l===""?a.namedChildren[0]:a.childForFieldName(l))?.type===c)break}a=a.parent}return a?n(a):void 0}finally{o.delete()}}getNextBlockAtPosition(e,r,n){return this.getNodeMatchAtPosition(e,r,o=>{let s=o.children.reverse().find(a=>a.type===this.nodeMatch[o.type]);if(s){if(this.languageId==="python"&&s.parent){let a=s.parent.type===":"?s.parent.parent:s.parent,c=a?.nextSibling;for(;c&&c.type==="comment";){let l=c.startPosition.row===s.endPosition.row&&c.startPosition.column>=s.endPosition.column,u=c.startPosition.row>a.endPosition.row&&c.startPosition.column>a.startPosition.column;if(l||u)s=c,c=c.nextSibling;else break}}if(!(s.endIndex>=s.tree.rootNode.endIndex-1&&(s.hasError||s.parent.hasError)))return n(s)}})}async isBlockBodyFinished(e,r,n){let o=(e+r).trimEnd(),s=await this.getNextBlockAtPosition(o,n,a=>a.endIndex);if(s!==void 0&&s<o.length){let a=s-e.length;return a>0?a:void 0}}getNodeStart(e,r){let n=e.trimEnd();return this.getNodeMatchAtPosition(n,r,o=>o.startIndex)}},LV=class extends NV{constructor(e,r,n,o,s){super(e,o,s),this.blockEmptyMatch=r,this.lineMatch=n}isBlockStart(e){return this.lineMatch.test(e.trimStart())}async isBlockBodyEmpty(e,r){let n=await this.getNextBlockAtPosition(e,r,o=>{o.startIndex<r&&(r=o.startIndex);let s=e.substring(r,o.endIndex).trim();return s===""||s.replace(/\s/g,"")===this.blockEmptyMatch});return n===void 0||n}async isEmptyBlockStart(e,r){return r=Kct(e,r),this.isBlockStart(f6r(e,r))&&this.isBlockBodyEmpty(e,r)}};function f6r(t,e){let r=t.lastIndexOf(`
`,e-1),n=t.indexOf(`
`,e);return n<0&&(n=t.length),t.slice(r+1,n)}function Kct(t,e){let r=e;for(;r>0&&/\s/.test(t.charAt(r-1));)r--;return r}function Wct(t,e){let r=t.startIndex,n=t.startIndex-t.startPosition.column,o=e.substring(n,r);if(/^\s*$/.test(o))return o}function p6r(t,e,r){if(e.startPosition.row<=t.startPosition.row)return!1;let n=Wct(t,r),o=Wct(e,r);return n!==void 0&&o!==void 0&&n.startsWith(o)}var Np=class extends NV{constructor(e,r,n,o,s,a,c){super(e,r,n),this.startKeywords=o,this.blockNodeType=s,this.emptyStatementType=a,this.curlyBraceLanguage=c}isBlockEmpty(e,r){let n=e.text.trim();return this.curlyBraceLanguage&&(n.startsWith("{")&&(n=n.slice(1)),n.endsWith("}")&&(n=n.slice(0,-1)),n=n.trim()),!!(n.length===0||this.languageId==="python"&&(e.parent?.type==="class_definition"||e.parent?.type==="function_definition")&&e.children.length===1&&(0,iv.queryPythonIsDocstring)(e.parent))}async isEmptyBlockStart(e,r){if(r>e.length)throw new RangeError("Invalid offset");for(let s=r;s<e.length&&e.charAt(s)!==`
`;s++)if(/\S/.test(e.charAt(s)))return!1;r=Kct(e,r);let[n,o]=await(0,iv.parseTreeSitterIncludingVersion)(this.languageId,e);try{let s=n.rootNode.descendantForIndex(r-1);if(s===null||this.curlyBraceLanguage&&s.type==="}")return!1;if((this.languageId==="javascript"||this.languageId==="typescript")&&s.parent&&s.parent.type==="object"&&s.parent.text.trim()==="{")return!0;if(this.languageId==="typescript"){let d=s;for(;d.parent;){if(d.type==="function_signature"||d.type==="method_signature"){let f=s.nextSibling;return f&&d.hasError&&p6r(d,f,e)?!0:!d.children.find(h=>h.type===";")&&d.endIndex<=r}d=d.parent}}let a=null,c=null,l=null,u=s;for(;u!==null;){if(u.type===this.blockNodeType){c=u;break}if(this.nodeMatch[u.type]){l=u;break}if(u.type==="ERROR"){a=u;break}u=u.parent}if(c!==null){if(!c.parent||!this.nodeMatch[c.parent.type])return!1;if(this.languageId==="python"){let d=c.previousSibling;if(d!==null&&d.hasError&&(d.text.startsWith('"""')||d.text.startsWith("'''")))return!0}return this.isBlockEmpty(c,r)}if(a!==null){if(a.previousSibling?.type==="module"||a.previousSibling?.type==="internal_module"||a.previousSibling?.type==="def")return!0;if(this.languageId==="python"&&o>=14&&a.hasError&&(a.text.startsWith('"')||a.text.startsWith("'"))){let h=a.parent?.type;if(h==="function_definition"||h==="class_definition"||h==="module")return!0}let d=[...a.children].reverse(),f=d.find(h=>this.startKeywords.includes(h.type)),p=d.find(h=>h.type===this.blockNodeType);if(f){switch(this.languageId){case"python":{f.type==="try"&&s.type==="identifier"&&s.text.length>4&&(p=d.find(g=>g.hasError)?.children.find(g=>g.type==="block"));let h,_=0;for(let g of a.children){if(g.type===":"&&_===0){h=g;break}g.type==="("&&(_+=1),g.type===")"&&(_-=1)}if(h&&f.endIndex<=h.startIndex&&h.nextSibling){if(f.type==="def"){let g=h.nextSibling;if(g.type==='"'||g.type==="'"||g.type==="ERROR"&&(g.text==='"""'||g.text==="'''"))return!0}return!1}break}case"javascript":{if(f.type==="class")if(o<=13){if(d.find(v=>v.type==="formal_parameters"))return!0}else{let g=a.children;for(let v=0;v<g.length;v++)if(g[v].type==="formal_parameters")return v+1===g.length||g[v+1]?.type==="{"&&v+2===g.length}let h=d.find(g=>g.type==="{");if(h&&h.startIndex>f.endIndex&&h.nextSibling!==null||d.find(g=>g.type==="do")&&f.type==="while"||f.type==="=>"&&f.nextSibling&&f.nextSibling.type!=="{")return!1;break}case"typescript":{let h=d.find(g=>g.type==="{");if(h&&h.startIndex>f.endIndex&&h.nextSibling!==null||d.find(g=>g.type==="do")&&f.type==="while"||f.type==="=>"&&f.nextSibling&&f.nextSibling.type!=="{")return!1;break}}return p&&p.startIndex>f.endIndex?this.isBlockEmpty(p,r):!0}}if(l!==null){let d=this.nodeMatch[l.type],f=l.children.slice().reverse().find(p=>p.type===d);if(f)return this.isBlockEmpty(f,r);if(this.nodeTypesWithBlockOrStmtChild.has(l.type)){let p=this.nodeTypesWithBlockOrStmtChild.get(l.type),h=p===""?l.children[0]:l.childForFieldName(p);if(h&&h.type!==this.blockNodeType&&h.type!==this.emptyStatementType)return!1}return!0}return!1}finally{n.delete()}}},h6r={python:new Np("python",{class_definition:"block",elif_clause:"block",else_clause:"block",except_clause:"block",finally_clause:"block",for_statement:"block",function_definition:"block",if_statement:"block",try_statement:"block",while_statement:"block",with_statement:"block"},new Map,["def","class","if","elif","else","for","while","try","except","finally","with"],"block",null,!1),javascript:new Np("javascript",{arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_expression:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",method_definition:"statement_block",try_statement:"statement_block",while_statement:"statement_block",with_statement:"statement_block",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),typescript:new Np("typescript",{ambient_declaration:"statement_block",arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_expression:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",internal_module:"statement_block",method_definition:"statement_block",module:"statement_block",try_statement:"statement_block",while_statement:"statement_block",abstract_class_declaration:"class_body",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["declare","=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),tsx:new Np("typescriptreact",{ambient_declaration:"statement_block",arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_expression:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",internal_module:"statement_block",method_definition:"statement_block",module:"statement_block",try_statement:"statement_block",while_statement:"statement_block",abstract_class_declaration:"class_body",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["declare","=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),go:new LV("go","{}",/\b(func|if|else|for)\b/,{communication_case:"block",default_case:"block",expression_case:"block",for_statement:"block",func_literal:"block",function_declaration:"block",if_statement:"block",labeled_statement:"block",method_declaration:"block",type_case:"block"},new Map),ruby:new LV("ruby","end",/\b(BEGIN|END|case|class|def|do|else|elsif|for|if|module|unless|until|while)\b|->/,{begin_block:"}",block:"}",end_block:"}",lambda:"block",for:"do",until:"do",while:"do",case:"end",do:"end",if:"end",method:"end",module:"end",unless:"end",do_block:"end"},new Map),"c-sharp":new Np("csharp",{},new Map([]),[],"block",null,!0),java:new Np("java",{},new Map([]),[],"block",null,!0),php:new Np("php",{},new Map([]),[],"block",null,!0),cpp:new Np("cpp",{},new Map([]),[],"block",null,!0)};function kV(t){if(!(0,iv.isSupportedLanguageId)(t))throw new Error(`Language ${t} is not supported`);return h6r[(0,iv.languageIdToWasmLanguage)(t)]}async function m6r(t,e,r){return(0,iv.isSupportedLanguageId)(t)?kV(t).isEmptyBlockStart(e,r):!1}async function g6r(t,e,r,n){if((0,iv.isSupportedLanguageId)(t))return kV(t).isBlockBodyFinished(e,r,n)}async function _6r(t,e,r){if((0,iv.isSupportedLanguageId)(t))return kV(t).getNodeStart(e,r)}});var Ame=m(ov=>{"use strict";Object.defineProperty(ov,"__esModule",{value:!0});ov.parsingBlockFinished=v6r;ov.isEmptyBlockStartUtil=y6r;ov.getNodeStartUtil=E6r;ov.contextIndentation=C6r;ov.contextIndentationFromText=Qct;ov.indentationBlockFinished=w6r;var Cme=Yct(),UV=zI();function v6r(t,e){let r=t.getText(UV.LocationFactory.range(UV.LocationFactory.position(0,0),e)),n=t.offsetAt(e),o=t.detectedLanguageId;return s=>(0,Cme.isBlockBodyFinished)(o,r,s,n)}function y6r(t,e){return(0,Cme.isEmptyBlockStart)(t.detectedLanguageId,t.getText(),t.offsetAt(e))}async function E6r(t,e,r){let o=t.getText(UV.LocationFactory.range(UV.LocationFactory.position(0,0),e))+r,s=await(0,Cme.getNodeStart)(t.detectedLanguageId,o,t.offsetAt(e));if(s)return t.positionAt(s)}var T6r=["\\{","\\}","\\[","\\]","\\(","\\)"].concat(["then","else","elseif","elif","catch","finally","fi","done","end","loop","until","where","when"].map(t=>t+"\\b")),S6r=new RegExp(`^(${T6r.join("|")})`);function b6r(t){return S6r.test(t.trimLeft().toLowerCase())}function DV(t){let e=/^(\s*)([^]*)$/.exec(t);if(e&&e[2]&&e[2].length>0)return e[1].length}function C6r(t,e){let r=t.getText(),n=t.offsetAt(e);return Qct(r,n,t.detectedLanguageId)}function Qct(t,e,r){let n=t.slice(0,e).split(`
`),o=t.slice(e).split(`
`);function s(d,f,p){let h=f,_,g;for(;_===void 0&&h>=0&&h<d.length;)_=DV(d[h]),g=h,h+=p;if(r==="python"&&p===-1){h++;let v=d[h].trim();if(v.endsWith('"""')){if(!(v.startsWith('"""')&&v!=='"""'))for(h--;h>=0&&!d[h].trim().startsWith('"""');)h--;if(h>=0)for(_=void 0,h--;_===void 0&&h>=0;)_=DV(d[h]),g=h,h--}}return[_,g]}let[a,c]=s(n,n.length-1,-1),l=(()=>{if(!(a===void 0||c===void 0))for(let d=c-1;d>=0;d--){let f=DV(n[d]);if(f!==void 0&&f<a)return f}})(),[u]=s(o,1,1);return{prev:l,current:a??0,next:u}}var A6r=!1;function x6r(t,e,r){let n=t.split(`
`),o=r!==void 0,s=r?.split(`
`).pop(),a=0;if(o&&s?.trim()!==""&&n[0].trim()!==""&&a++,!o&&A6r&&n[0].trim()===""&&a++,o||a++,n.length===a)return"continue";let c=Math.max(e.current,e.next??0);for(let l=a;l<n.length;l++){let u=n[l];l===0&&s!==void 0&&(u=s+u);let d=DV(u);if(d!==void 0&&(d<c||d===c&&!b6r(u)))return n.slice(0,l).join(`
`).length}return"continue"}function w6r(t,e){return r=>{let n=x6r(r,t,e);return n==="continue"?void 0:n}}});var u3=m(ds=>{"use strict";Object.defineProperty(ds,"__esModule",{value:!0});ds.languageMarkers=void 0;ds.mdCodeBlockLangToLanguageId=I6r;ds.isShebangLine=O6r;ds.hasLanguageMarker=Jct;ds.comment=Xct;ds.commentBlockAsSingles=M6r;ds.getLanguageMarker=N6r;ds.getPathMarker=L6r;ds.newLineEnded=k6r;ds.getLanguage=D6r;ds.languageMarkers={abap:{lineComment:{start:'"',end:""},markdownLanguageIds:["abap","sap-abap"]},aspdotnet:{lineComment:{start:"<%--",end:"--%>"}},bat:{lineComment:{start:"REM",end:""}},bibtex:{lineComment:{start:"%",end:""},markdownLanguageIds:["bibtex"]},blade:{lineComment:{start:"#",end:""}},BluespecSystemVerilog:{lineComment:{start:"//",end:""}},c:{lineComment:{start:"//",end:""},markdownLanguageIds:["c","h"]},clojure:{lineComment:{start:";",end:""},markdownLanguageIds:["clojure","clj"]},coffeescript:{lineComment:{start:"//",end:""},markdownLanguageIds:["coffeescript","coffee","cson","iced"]},cpp:{lineComment:{start:"//",end:""},markdownLanguageIds:["cpp","hpp","cc","hh","c++","h++","cxx","hxx"]},csharp:{lineComment:{start:"//",end:""},markdownLanguageIds:["csharp","cs"]},css:{lineComment:{start:"/*",end:"*/"}},cuda:{lineComment:{start:"//",end:""}},dart:{lineComment:{start:"//",end:""}},dockerfile:{lineComment:{start:"#",end:""},markdownLanguageIds:["dockerfile","docker"]},dotenv:{lineComment:{start:"#",end:""}},elixir:{lineComment:{start:"#",end:""}},erb:{lineComment:{start:"<%#",end:"%>"}},erlang:{lineComment:{start:"%",end:""},markdownLanguageIds:["erlang","erl"]},fsharp:{lineComment:{start:"//",end:""},markdownLanguageIds:["fsharp","fs","fsx","fsi","fsscript"]},go:{lineComment:{start:"//",end:""},markdownLanguageIds:["go","golang"]},graphql:{lineComment:{start:"#",end:""}},groovy:{lineComment:{start:"//",end:""}},haml:{lineComment:{start:"-#",end:""}},handlebars:{lineComment:{start:"{{!",end:"}}"},markdownLanguageIds:["handlebars","hbs","html.hbs","html.handlebars"]},haskell:{lineComment:{start:"--",end:""},markdownLanguageIds:["haskell","hs"]},hlsl:{lineComment:{start:"//",end:""}},html:{lineComment:{start:"<!--",end:"-->"},markdownLanguageIds:["html","xhtml"]},ini:{lineComment:{start:";",end:""}},java:{lineComment:{start:"//",end:""},markdownLanguageIds:["java","jsp"]},javascript:{lineComment:{start:"//",end:""},markdownLanguageIds:["javascript","js"]},javascriptreact:{lineComment:{start:"//",end:""},markdownLanguageIds:["jsx"]},jsonc:{lineComment:{start:"//",end:""}},jsx:{lineComment:{start:"//",end:""},markdownLanguageIds:["jsx"]},julia:{lineComment:{start:"#",end:""},markdownLanguageIds:["julia","jl"]},kotlin:{lineComment:{start:"//",end:""},markdownLanguageIds:["kotlin","kt"]},latex:{lineComment:{start:"%",end:""},markdownLanguageIds:["tex"]},legend:{lineComment:{start:"//",end:""}},less:{lineComment:{start:"//",end:""}},lua:{lineComment:{start:"--",end:""},markdownLanguageIds:["lua","pluto"]},makefile:{lineComment:{start:"#",end:""},markdownLanguageIds:["makefile","mk","mak","make"]},markdown:{lineComment:{start:"[]: #",end:""},markdownLanguageIds:["markdown","md","mkdown","mkd"]},"objective-c":{lineComment:{start:"//",end:""},markdownLanguageIds:["objectivec","mm","objc","obj-c"]},"objective-cpp":{lineComment:{start:"//",end:""},markdownLanguageIds:["objectivec++","objc+"]},perl:{lineComment:{start:"#",end:""},markdownLanguageIds:["perl","pl","pm"]},php:{lineComment:{start:"//",end:""}},powershell:{lineComment:{start:"#",end:""},markdownLanguageIds:["powershell","ps","ps1"]},pug:{lineComment:{start:"//",end:""}},python:{lineComment:{start:"#",end:""},markdownLanguageIds:["python","py","gyp"]},ql:{lineComment:{start:"//",end:""}},r:{lineComment:{start:"#",end:""}},razor:{lineComment:{start:"<!--",end:"-->"},markdownLanguageIds:["cshtml","razor","razor-cshtml"]},ruby:{lineComment:{start:"#",end:""},markdownLanguageIds:["ruby","rb","gemspec","podspec","thor","irb"]},rust:{lineComment:{start:"//",end:""},markdownLanguageIds:["rust","rs"]},sass:{lineComment:{start:"//",end:""}},scala:{lineComment:{start:"//",end:""}},scss:{lineComment:{start:"//",end:""}},shellscript:{lineComment:{start:"#",end:""},markdownLanguageIds:["bash","sh","zsh"]},slang:{lineComment:{start:"//",end:""}},slim:{lineComment:{start:"/",end:""}},solidity:{lineComment:{start:"//",end:""},markdownLanguageIds:["solidity","sol"]},sql:{lineComment:{start:"--",end:""}},stylus:{lineComment:{start:"//",end:""}},svelte:{lineComment:{start:"<!--",end:"-->"}},swift:{lineComment:{start:"//",end:""}},systemverilog:{lineComment:{start:"//",end:""}},terraform:{lineComment:{start:"#",end:""}},tex:{lineComment:{start:"%",end:""}},typescript:{lineComment:{start:"//",end:""},markdownLanguageIds:["typescript","ts"]},typescriptreact:{lineComment:{start:"//",end:""},markdownLanguageIds:["tsx"]},vb:{lineComment:{start:"'",end:""},markdownLanguageIds:["vb","vbscript"]},verilog:{lineComment:{start:"//",end:""}},"vue-html":{lineComment:{start:"<!--",end:"-->"}},vue:{lineComment:{start:"//",end:""}},xml:{lineComment:{start:"<!--",end:"-->"}},xsl:{lineComment:{start:"<!--",end:"-->"}},yaml:{lineComment:{start:"#",end:""},markdownLanguageIds:["yaml","yml"]}};var xme={};for(let[t,e]of Object.entries(ds.languageMarkers))if(e.markdownLanguageIds)for(let r of e.markdownLanguageIds)xme[r]=t;else xme[t]=t;function I6r(t){return xme[t]}var P6r={start:"//",end:""},R6r=["php","plaintext"],wme={html:"<!DOCTYPE html>",python:"#!/usr/bin/env python3",ruby:"#!/usr/bin/env ruby",shellscript:"#!/bin/sh",yaml:"# YAML data"};function O6r(t){return Object.values(wme).includes(t.trim())}function Jct({source:t}){return t.startsWith("#!")||t.startsWith("<!DOCTYPE")}function Xct(t,e){let r=ds.languageMarkers[e]?ds.languageMarkers[e].lineComment:P6r;if(r){let n=r.end===""?"":" "+r.end;return`${r.start} ${t}${n}`}return""}function M6r(t,e){if(t==="")return"";let r=t.endsWith(`
`),o=(r?t.slice(0,-1):t).split(`
`).map(s=>Xct(s,e)).join(`
`);return r?o+`
`:o}function N6r(t){let{languageId:e}=t;return R6r.indexOf(e)===-1&&!Jct(t)?e in wme?wme[e]:`Language: ${e}`:""}function L6r(t){return t.relativePath?`Path: ${t.relativePath}`:""}function k6r(t){return t===""||t.endsWith(`
`)?t:t+`
`}function D6r(t){return Zct(typeof t=="string"?t:"plaintext")}function Zct(t){return ds.languageMarkers[t]!==void 0?{languageId:t,...ds.languageMarkers[t]}:{languageId:t,lineComment:{start:"//",end:""}}}});var Pme=m(Ime=>{"use strict";Object.defineProperty(Ime,"__esModule",{value:!0});Ime.getCursorContext=F6r;var elt=FI(),U6r={tokenizerName:elt.TokenizerName.o200k};function q6r(t){return{...U6r,...t}}function F6r(t,e={}){let r=q6r(e),n=(0,elt.getTokenizer)(r.tokenizerName);if(r.maxLineCount!==void 0&&r.maxLineCount<0)throw new Error("maxLineCount must be non-negative if defined");if(r.maxTokenLength!==void 0&&r.maxTokenLength<0)throw new Error("maxTokenLength must be non-negative if defined");if(r.maxLineCount===0||r.maxTokenLength===0)return{context:"",lineCount:0,tokenLength:0,tokenizerName:r.tokenizerName};let o=t.source.slice(0,t.offset);return r.maxLineCount!==void 0&&(o=o.split(`
`).slice(-r.maxLineCount).join(`
`)),r.maxTokenLength!==void 0&&(o=n.takeLastLinesTokens(o,r.maxTokenLength)),{context:o,lineCount:o.split(`
`).length,tokenLength:n.tokenLength(o),tokenizerName:r.tokenizerName}}});var Rme=m(ob=>{"use strict";Object.defineProperty(ob,"__esModule",{value:!0});ob.SnippetSemantics=ob.SnippetProviderType=void 0;ob.announceSnippet=B6r;var tlt;(function(t){t.SimilarFiles="similar-files",t.Path="path"})(tlt||(ob.SnippetProviderType=tlt={}));var nl;(function(t){t.Function="function",t.Snippet="snippet",t.Snippets="snippets",t.Variable="variable",t.Parameter="parameter",t.Method="method",t.Class="class",t.Module="module",t.Alias="alias",t.Enum="enum member",t.Interface="interface"})(nl||(ob.SnippetSemantics=nl={}));var j6r={[nl.Function]:"function",[nl.Snippet]:"snippet",[nl.Snippets]:"snippets",[nl.Variable]:"variable",[nl.Parameter]:"parameter",[nl.Method]:"method",[nl.Class]:"class",[nl.Module]:"module",[nl.Alias]:"alias",[nl.Enum]:"enum member",[nl.Interface]:"interface"};function B6r(t){let e=j6r[t.semantics],r=[nl.Snippets].includes(t.semantics)?"these":"this";return{headline:t.relativePath?`Compare ${r} ${e} from ${t.relativePath}:`:`Compare ${r} ${e}:`,snippet:t.snippet}}});var Lme=m(ab=>{"use strict";Object.defineProperty(ab,"__esModule",{value:!0});ab.WindowedMatcher=ab.SortOptions=void 0;ab.splitIntoWords=ilt;var rlt=Rme(),Ome=class{constructor(e){this.keys=[],this.cache={},this.size=e}put(e,r){if(this.cache[e]=r,this.keys.length>this.size){this.keys.push(e);let n=this.keys.shift()??"";delete this.cache[n]}}get(e){return this.cache[e]}},sb;(function(t){t.Ascending="ascending",t.Descending="descending",t.None="none"})(sb||(ab.SortOptions=sb={}));var Mme=class{constructor(e){this.stopsForLanguage=H6r.get(e.languageId)??V6r}tokenize(e){return new Set(ilt(e).filter(r=>!this.stopsForLanguage.has(r)))}},nlt=new Ome(20),Nme=class{constructor(e){this.referenceDoc=e,this.tokenizer=new Mme(e)}get referenceTokens(){return Promise.resolve(this.createReferenceTokens())}createReferenceTokens(){return this.referenceTokensCache??=this.tokenizer.tokenize(this._getCursorContextInfo(this.referenceDoc).context)}sortScoredSnippets(e,r=sb.Descending){return r===sb.Ascending?e.sort((n,o)=>n.score>o.score?1:-1):r===sb.Descending?e.sort((n,o)=>n.score>o.score?-1:1):e}async retrieveAllSnippets(e,r=sb.Descending){let n=[];if(e.source.length===0||(await this.referenceTokens).size===0)return n;let o=e.source.split(`
`),s=this.id()+":"+e.source,a=nlt.get(s)??[],c=a.length===0,l=c?o.map(u=>this.tokenizer.tokenize(u),this.tokenizer):[];for(let[u,[d,f]]of this.getWindowsDelineations(o).entries()){if(c){let _=new Set;l.slice(d,f).forEach(g=>g.forEach(v=>_.add(v),_)),a.push(_)}let p=a[u],h=this.similarityScore(p,await this.referenceTokens);if(n.length&&d>0&&n[n.length-1].endLine>d){n[n.length-1].score<h&&(n[n.length-1].score=h,n[n.length-1].startLine=d,n[n.length-1].endLine=f);continue}n.push({score:h,startLine:d,endLine:f})}return c&&nlt.put(s,a),this.sortScoredSnippets(n,r)}findMatches(e,r){return this.findBestMatch(e,r)}async findBestMatch(e,r){if(e.source.length===0||(await this.referenceTokens).size===0)return[];let n=e.source.split(`
`),o=await this.retrieveAllSnippets(e,sb.Descending);if(o.length===0)return[];let s=[];for(let a=0;a<o.length&&a<r;a++)if(o[a].score!==0){let c=n.slice(o[a].startLine,o[a].endLine).join(`
`);s.push({snippet:c,semantics:rlt.SnippetSemantics.Snippet,provider:rlt.SnippetProviderType.SimilarFiles,...o[a]})}return s}};ab.WindowedMatcher=Nme;function ilt(t){return t.split(/[^a-zA-Z0-9]/).filter(e=>e.length>0)}var $6r=new Set(["we","our","you","it","its","they","them","their","this","that","these","those","is","are","was","were","be","been","being","have","has","had","having","do","does","did","doing","can","don","t","s","will","would","should","what","which","who","when","where","why","how","a","an","the","and","or","not","no","but","because","as","until","again","further","then","once","here","there","all","any","both","each","few","more","most","other","some","such","above","below","to","during","before","after","of","at","by","about","between","into","through","from","up","down","in","out","on","off","over","under","only","own","same","so","than","too","very","just","now"]),V6r=new Set(["if","then","else","for","while","with","def","function","return","TODO","import","try","catch","raise","finally","repeat","switch","case","match","assert","continue","break","const","class","enum","struct","static","new","super","this","var",...$6r]),H6r=new Map([])});var kme=m(dd=>{"use strict";Object.defineProperty(dd,"__esModule",{value:!0});dd.virtualNode=G6r;dd.lineNode=z6r;dd.blankNode=W6r;dd.topNode=K6r;dd.isBlank=Y6r;dd.isLine=Q6r;dd.isVirtual=olt;dd.isTop=slt;dd.cutTreeAfterLine=Z6r;dd.duplicateTree=J6r;function G6r(t,e,r){return{type:"virtual",indentation:t,subs:e,label:r}}function z6r(t,e,r,n,o){if(r==="")throw new Error("Cannot create a line node with an empty source line");return{type:"line",indentation:t,lineNumber:e,sourceLine:r,subs:n,label:o}}function W6r(t){return{type:"blank",lineNumber:t,subs:[]}}function K6r(t){return{type:"top",indentation:-1,subs:t??[]}}function Y6r(t){return t.type==="blank"}function Q6r(t){return t.type==="line"}function olt(t){return t.type==="virtual"}function slt(t){return t.type==="top"}function Z6r(t,e){function r(n){if(!olt(n)&&!slt(n)&&n.lineNumber===e)return n.subs=[],!0;for(let o=0;o<n.subs.length;o++)if(r(n.subs[o]))return n.subs=n.subs.slice(0,o+1),!0;return!1}r(t)}function J6r(t){return JSON.parse(JSON.stringify(t))}});var qme=m(Lp=>{"use strict";Object.defineProperty(Lp,"__esModule",{value:!0});Lp.clearLabels=X6r;Lp.clearLabelsIf=e8r;Lp.mapLabels=Ume;Lp.resetLineNumbers=t8r;Lp.visitTree=d3;Lp.visitTreeConditionally=r8r;Lp.foldTree=n8r;Lp.rebuildTree=i8r;var Dme=kme();function X6r(t){return d3(t,e=>{e.label=void 0},"bottomUp"),t}function e8r(t,e){return d3(t,r=>{r.label=r.label?e(r.label)?void 0:r.label:void 0},"bottomUp"),t}function Ume(t,e){switch(t.type){case"line":case"virtual":{let r=t.subs.map(n=>Ume(n,e));return{...t,subs:r,label:t.label?e(t.label):void 0}}case"blank":return{...t,label:t.label?e(t.label):void 0};case"top":return{...t,subs:t.subs.map(r=>Ume(r,e)),label:t.label?e(t.label):void 0}}}function t8r(t){let e=0;function r(n){!(0,Dme.isVirtual)(n)&&!(0,Dme.isTop)(n)&&(n.lineNumber=e,e++)}d3(t,r,"topDown")}function d3(t,e,r){function n(o){r==="topDown"&&e(o),o.subs.forEach(s=>{n(s)}),r==="bottomUp"&&e(o)}n(t)}function r8r(t,e,r){function n(o){if(r==="topDown"&&!e(o))return!1;let s=!0;return o.subs.forEach(a=>{s=s&&n(a)}),r==="bottomUp"&&(s=s&&e(o)),s}n(t)}function n8r(t,e,r,n){let o=e;function s(a){o=r(a,o)}return d3(t,s,n),o}function i8r(t,e,r){let n=s=>{if(r!==void 0&&r(s))return s;{let a=s.subs.map(n).filter(c=>c!==void 0);return s.subs=a,e(s)}},o=n(t);return o!==void 0?o:(0,Dme.topNode)()}});var flt=m(Mf=>{"use strict";Object.defineProperty(Mf,"__esModule",{value:!0});Mf.parseRaw=alt;Mf.labelLines=clt;Mf.labelVirtualInherited=o8r;Mf.buildLabelRules=llt;Mf.combineClosersAndOpeners=ult;Mf.groupBlocks=s8r;Mf.flattenVirtual=a8r;Mf.registerLanguageSpecificParser=u8r;Mf.parseTree=d8r;var ps=kme(),yP=qme();function alt(t){let e=t.split(`
`),r=e.map(u=>u.match(/^\s*/)[0].length),n=e.map(u=>u.trimLeft());function o(u){let[d,f]=s(u+1,r[u]);return[(0,ps.lineNode)(r[u],u,n[u],d),f]}function s(u,d){let f,p=[],h=u,_;for(;h<n.length&&(n[h]===""||r[h]>d);)if(n[h]==="")_===void 0&&(_=h),h+=1;else{if(_!==void 0){for(let g=_;g<h;g++)p.push((0,ps.blankNode)(g));_=void 0}[f,h]=o(h),p.push(f)}return _!==void 0&&(h=_),[p,h]}let[a,c]=s(0,-1),l=c;for(;l<n.length&&n[l]==="";)a.push((0,ps.blankNode)(l)),l+=1;if(l<n.length)throw new Error(`Parsing did not go to end of file. Ended at ${l} out of ${n.length}`);return(0,ps.topNode)(a)}function clt(t,e){function r(n){if((0,ps.isLine)(n)){let o=e.find(s=>s.matches(n.sourceLine));o&&(n.label=o.label)}}(0,yP.visitTree)(t,r,"bottomUp")}function o8r(t){function e(r){if((0,ps.isVirtual)(r)&&r.label===void 0){let n=r.subs.filter(o=>!(0,ps.isBlank)(o));n.length===1&&(r.label=n[0].label)}}(0,yP.visitTree)(t,e,"bottomUp")}function llt(t){return Object.keys(t).map(e=>{let r;return t[e].test?r=n=>t[e].test(n):r=t[e],{matches:r,label:e}})}function ult(t){let e=function(n){if(n.subs.length===0||n.subs.findIndex(a=>a.label==="closer"||a.label==="opener")===-1)return n;let o=[],s;for(let a=0;a<n.subs.length;a++){let c=n.subs[a],l=n.subs[a-1];if(c.label==="opener"&&l!==void 0&&(0,ps.isLine)(l))l.subs.push(c),c.subs.forEach(u=>l.subs.push(u)),c.subs=[];else if(c.label==="closer"&&s!==void 0&&((0,ps.isLine)(c)||(0,ps.isVirtual)(c))&&c.indentation>=s.indentation){let u=o.length-1;for(;u>0&&(0,ps.isBlank)(o[u]);)u-=1;if(s.subs.push(...o.splice(u+1)),c.subs.length>0){let d=s.subs.findIndex(_=>_.label!=="newVirtual"),f=s.subs.slice(0,d),p=s.subs.slice(d),h=p.length>0?[(0,ps.virtualNode)(c.indentation,p,"newVirtual")]:[];s.subs=[...f,...h,c]}else s.subs.push(c)}else o.push(c),(0,ps.isBlank)(c)||(s=c)}return n.subs=o,n},r=(0,yP.rebuildTree)(t,e);return(0,yP.clearLabelsIf)(t,n=>n==="newVirtual"),r}function s8r(t,e=ps.isBlank,r){let n=function(o){if(o.subs.length<=1)return o;let s=[],a=[],c,l=!1;function u(d=!1){if(c!==void 0&&(s.length>0||!d)){let f=(0,ps.virtualNode)(c,a,r);s.push(f)}else a.forEach(f=>s.push(f))}for(let d=0;d<o.subs.length;d++){let f=o.subs[d],p=e(f);!p&&l&&(u(),a=[]),l=p,a.push(f),(0,ps.isBlank)(f)||(c=c??f.indentation)}return u(!0),o.subs=s,o};return(0,yP.rebuildTree)(t,n)}function a8r(t){let e=function(r){return(0,ps.isVirtual)(r)&&r.label===void 0&&r.subs.length<=1?r.subs.length===0?void 0:r.subs[0]:(r.subs.length===1&&(0,ps.isVirtual)(r.subs[0])&&r.subs[0].label===void 0&&(r.subs=r.subs[0].subs),r)};return(0,yP.rebuildTree)(t,e)}var c8r={opener:/^[[({]/,closer:/^[\])}]/},l8r=llt(c8r),dlt={};function u8r(t,e){dlt[t]=e}function d8r(t,e){let r=alt(t),n=dlt[e??""];return n?n(r):(clt(r,l8r),ult(r))}});var Fme=m(qV=>{"use strict";Object.defineProperty(qV,"__esModule",{value:!0});qV.getBasicWindowDelineations=p8r;qV.getIndentationWindowsDelineations=h8r;var plt=qme(),f8r=flt();function p8r(t,e){let r=[],n=e.length;if(n===0)return[];if(n<t)return[[0,n]];for(let o=0;o<n-t+1;o++)r.push([o,o+t]);return r}function h8r(t,e,r,n){if(t.length<r||n===0)return[];let o=[],s=(0,plt.clearLabels)((0,f8r.parseTree)(t.join(`
`),e));return(0,plt.visitTree)(s,a=>{if(a.type==="blank"){a.label={totalLength:1,firstLineAfter:a.lineNumber+1};return}let c=a.type==="line"?1:0,l=a.type==="line"?a.lineNumber+1:NaN;function u(_){return _===-1?l-c:a.subs[_].label.firstLineAfter-a.subs[_].label.totalLength}function d(_,g){return _===0?g+1:a.subs[_-1].label.firstLineAfter}let f=a.type==="line"?-1:0,p=a.type==="line"?1:0,h=0;for(let _=0;_<a.subs.length;_++){for(;f>=0&&f<a.subs.length&&a.subs[f].type==="blank";)p-=a.subs[f].label.totalLength,f++;if(a.subs[_].type!=="blank"&&(h=_),l=a.subs[_].label.firstLineAfter,c+=a.subs[_].label.totalLength,p+=a.subs[_].label.totalLength,p>n){let g=u(f),v=d(_,g),E=h===_?v:d(h,g);for(r<=v-g&&o.push([g,E]);p>n;)p-=f===-1?a.type==="line"?1:0:a.subs[f].label.totalLength,f++}}if(f<a.subs.length){let _=u(f),g=l,v=f===-1?g:a.subs[h].label.firstLineAfter;r<=g-_&&o.push([_,v])}a.label={totalLength:c,firstLineAfter:l}},"bottomUp"),o.sort((a,c)=>a[0]-c[0]||a[1]-c[1]).filter((a,c,l)=>c===0||a[0]!==l[c-1][0]||a[1]!==l[c-1][1])}});var mlt=m(f3=>{"use strict";Object.defineProperty(f3,"__esModule",{value:!0});f3.FixedWindowSizeJaccardMatcher=void 0;f3.computeScore=hlt;var m8r=Pme(),g8r=Lme(),_8r=Fme(),jme=class t extends g8r.WindowedMatcher{constructor(e,r){super(e),this.windowLength=r}static{this.FACTORY=e=>({to:r=>new t(r,e)})}id(){return"fixed:"+this.windowLength}getWindowsDelineations(e){return(0,_8r.getBasicWindowDelineations)(this.windowLength,e)}_getCursorContextInfo(e){return(0,m8r.getCursorContext)(e,{maxLineCount:this.windowLength})}similarityScore(e,r){return hlt(e,r)}};f3.FixedWindowSizeJaccardMatcher=jme;function hlt(t,e){let r=new Set;return t.forEach(n=>{e.has(n)&&r.add(n)}),r.size/(t.size+e.size-r.size)}});var _lt=m(FV=>{"use strict";Object.defineProperty(FV,"__esModule",{value:!0});FV.BlockTokenSubsetMatcher=void 0;var v8r=KS(),glt=Pme(),y8r=Lme(),E8r=Fme(),Bme=class t extends y8r.WindowedMatcher{constructor(e,r){super(e),this.windowLength=r}static{this.FACTORY=e=>({to:r=>new t(r,e)})}id(){return"fixed:"+this.windowLength}getWindowsDelineations(e){return(0,E8r.getBasicWindowDelineations)(this.windowLength,e)}_getCursorContextInfo(e){return(0,glt.getCursorContext)(e,{maxLineCount:this.windowLength})}get referenceTokens(){return this.createReferenceTokensForLanguage()}async createReferenceTokensForLanguage(){return this.referenceTokensCache?this.referenceTokensCache:(this.referenceTokensCache=t.syntaxAwareSupportsLanguage(this.referenceDoc.languageId)?await this.syntaxAwareReferenceTokens():await super.referenceTokens,this.referenceTokensCache)}async syntaxAwareReferenceTokens(){let e=(await this.getEnclosingMemberStart(this.referenceDoc.source,this.referenceDoc.offset))?.startIndex,r=this.referenceDoc.offset,n=e?this.referenceDoc.source.slice(e,r):(0,glt.getCursorContext)(this.referenceDoc,{maxLineCount:this.windowLength}).context;return this.tokenizer.tokenize(n)}static syntaxAwareSupportsLanguage(e){switch(e){case"csharp":return!0;default:return!1}}similarityScore(e,r){return T8r(e,r)}async getEnclosingMemberStart(e,r){let n;try{n=await(0,v8r.parseTreeSitter)(this.referenceDoc.languageId,e);let o=n.rootNode.namedDescendantForIndex(r);for(;o&&!(t.isMember(o)||t.isBlock(o));)o=o.parent??void 0;return o}finally{n?.delete()}}static isMember(e){switch(e?.type){case"method_declaration":case"property_declaration":case"field_declaration":case"constructor_declaration":return!0;default:return!1}}static isBlock(e){switch(e?.type){case"class_declaration":case"struct_declaration":case"record_declaration":case"enum_declaration":case"interface_declaration":return!0;default:return!1}}};FV.BlockTokenSubsetMatcher=Bme;function T8r(t,e){let r=new Set;return e.forEach(n=>{t.has(n)&&r.add(n)}),r.size}});var jV=m(Nf=>{"use strict";Object.defineProperty(Nf,"__esModule",{value:!0});Nf.defaultCppSimilarFilesOptions=Nf.nullSimilarFilesOptions=Nf.conservativeFilesOptions=Nf.defaultSimilarFilesOptions=void 0;Nf.getSimilarSnippets=P8r;var S8r=mlt(),b8r=_lt(),C8r=0,A8r=60,x8r=4,w8r=1,vlt=20,ylt=1e4;Nf.defaultSimilarFilesOptions={snippetLength:A8r,threshold:C8r,maxTopSnippets:x8r,maxCharPerFile:ylt,maxNumberOfFiles:vlt,maxSnippetsPerFile:w8r,useSubsetMatching:!1};Nf.conservativeFilesOptions={snippetLength:10,threshold:.3,maxTopSnippets:1,maxCharPerFile:ylt,maxNumberOfFiles:vlt,maxSnippetsPerFile:1};Nf.nullSimilarFilesOptions={snippetLength:0,threshold:1,maxTopSnippets:0,maxCharPerFile:0,maxNumberOfFiles:0,maxSnippetsPerFile:0};Nf.defaultCppSimilarFilesOptions={snippetLength:60,threshold:0,maxTopSnippets:16,maxCharPerFile:1e5,maxNumberOfFiles:200,maxSnippetsPerFile:4};function I8r(t,e){return(e.useSubsetMatching?b8r.BlockTokenSubsetMatcher.FACTORY(e.snippetLength):S8r.FixedWindowSizeJaccardMatcher.FACTORY(e.snippetLength)).to(t)}async function P8r(t,e,r){let n=I8r(t,r);return r.maxTopSnippets===0?[]:(await e.filter(s=>s.source.length<r.maxCharPerFile&&s.source.length>0).slice(0,r.maxNumberOfFiles).reduce(async(s,a)=>(await s).concat((await n.findMatches(a,r.maxSnippetsPerFile)).map(c=>({relativePath:a.relativePath,...c}))),Promise.resolve([]))).filter(s=>s.score&&s.snippet&&s.score>r.threshold).sort((s,a)=>s.score-a.score).slice(-r.maxTopSnippets)}});var Tlt=m(BV=>{"use strict";Object.defineProperty(BV,"__esModule",{value:!0});BV.getCppSimilarFilesOptions=O8r;BV.getCppNumberOfSnippets=M8r;var Elt=jV(),R8r=$V();function O8r(t,e){return{...Elt.defaultCppSimilarFilesOptions,useSubsetMatching:(0,R8r.useSubsetMatching)(t,e)}}function M8r(t){return Elt.defaultCppSimilarFilesOptions.maxTopSnippets}});var $V=m(p3=>{"use strict";Object.defineProperty(p3,"__esModule",{value:!0});p3.getSimilarFilesOptions=U8r;p3.getNumberOfSnippets=F8r;p3.useSubsetMatching=Clt;var N8r=BS(),L8r=jV(),Slt=Gl(),k8r=jF(),blt=Tlt(),D8r=new Map([["cpp",blt.getCppSimilarFilesOptions]]);function U8r(t,e,r){let n=D8r.get(r);return n?n(t,e):{...L8r.defaultSimilarFilesOptions,useSubsetMatching:Clt(t,e)}}var q8r=new Map([["cpp",blt.getCppNumberOfSnippets]]);function F8r(t,e){let r=q8r.get(e);return r?r(t):N8r.DEFAULT_NUM_SNIPPETS}function Clt(t,e){return(e.filtersAndExp.exp.variables[k8r.ExpTreatmentVariables.UseSubsetMatching]||(0,Slt.getConfig)(t,Slt.ConfigKey.UseSubsetMatching))??!1}});var zm=m(h3=>{"use strict";Object.defineProperty(h3,"__esModule",{value:!0});h3.Fragment=xlt;h3.jsx=Alt;h3.jsxs=Alt;function Alt(t,e,r){let n=[];Array.isArray(e.children)?n=e.children:e.children&&(n=[e.children]);let o={...e,children:n};return r&&(o.key=r),{type:t,props:o}}function xlt(t){return{type:"f",children:t}}xlt.isFragmentFunction=!0});var wlt=m(EP=>{"use strict";Object.defineProperty(EP,"__esModule",{value:!0});EP.UseData=EP.UseState=void 0;var $me=class{constructor(e){this.states=e,this.currentIndex=0,this.stateChanged=!1}useState(e){let r=this.currentIndex;if(this.states[r]===void 0){let o=typeof e=="function"?e():e;this.states[r]=o}let n=o=>{let s=typeof o=="function"?o(this.states[r]):o;this.states[r]=s,this.stateChanged=!0};return this.currentIndex++,[this.states[r],n]}hasChanged(){return this.stateChanged}};EP.UseState=$me;var Vme=class{constructor(e){this.measureUpdateTime=e,this.consumers=[]}useData(e,r){this.consumers.push(n=>{if(e(n))return r(n)})}async updateData(e){if(this.consumers.length>0){let r=performance.now();for(let n of this.consumers)await n(e);this.measureUpdateTime(performance.now()-r)}}};EP.UseData=Vme});var Plt=m(VV=>{"use strict";Object.defineProperty(VV,"__esModule",{value:!0});VV.VirtualPromptReconciler=void 0;var Ilt=wlt(),Hme=class{constructor(e){this.lifecycleData=new Map,this.vTree=this.virtualizeElement(e,"$",0)}reconcile(e){if(!this.vTree)throw new Error("No tree to reconcile, make sure to pass a valid prompt");return e?.isCancellationRequested?this.vTree:(this.vTree=this.reconcileNode(this.vTree,"$",0,e),this.vTree)}reconcileNode(e,r,n,o){if(!e.children&&!e.lifecycle)return e;let s=e;if(e.lifecycle?.isRemountRequired()){let c=this.collectChildPaths(e);s=this.virtualizeElement(e.component,r,n);let l=this.collectChildPaths(s);this.cleanupState(c,l)}else if(e.children){let c=[];for(let l=0;l<e.children.length;l++){let u=e.children[l];if(u){let d=this.reconcileNode(u,e.path,l,o);d!==void 0&&c.push(d)}}s.children=c}return s}virtualizeElement(e,r,n){if(!(typeof e>"u")){if(typeof e=="string"||typeof e=="number")return{name:typeof e,path:`${r}[${n}]`,props:{value:e},component:e};if(j8r(e.type)){let o=e.type(e.props.children),s=r!=="$"?`[${n}]`:"",a=`${r}${s}.${o.type}`,c=o.children.map((l,u)=>this.virtualizeElement(l,a,u));return this.ensureUniqueKeys(c),{name:o.type,path:a,children:c.flat().filter(l=>l!==void 0),component:e}}return this.virtualizeFunctionComponent(r,n,e,e.type)}}virtualizeFunctionComponent(e,r,n,o){let s=n.props.key?`["${n.props.key}"]`:`[${r}]`,a=`${e}${s}.${o.name}`,c=new zme(this.getOrCreateLifecycleData(a)),l=o(n.props,c),f=(Array.isArray(l)?l:[l]).map((p,h)=>this.virtualizeElement(p,a,h)).flat().filter(p=>p!==void 0);return this.ensureUniqueKeys(f),{name:o.name,path:a,props:n.props,children:f,component:n,lifecycle:c}}ensureUniqueKeys(e){let r=new Map;for(let o of e){if(!o)continue;let s=o.props?.key;s&&r.set(s,(r.get(s)||0)+1)}let n=Array.from(r.entries()).filter(([o,s])=>s>1).map(([o])=>o);if(n.length>0)throw new Error(`Duplicate keys found: ${n.join(", ")}`)}collectChildPaths(e){let r=[];if(e?.children)for(let n of e.children)n&&(r.push(n.path),r.push(...this.collectChildPaths(n)));return r}cleanupState(e,r){for(let n of e)r.includes(n)||this.lifecycleData.delete(n)}getOrCreateLifecycleData(e){return this.lifecycleData.has(e)||this.lifecycleData.set(e,new Gme([])),this.lifecycleData.get(e)}createPipe(){return{pump:async e=>{await this.pumpData(e)}}}async pumpData(e){if(!this.vTree)throw new Error("No tree to pump data into. Pumping data before initializing?");await this.recursivelyPumpData(e,this.vTree)}async recursivelyPumpData(e,r){if(!r)throw new Error("Can't pump data into undefined node.");await r.lifecycle?.dataHook.updateData(e);for(let n of r.children||[])await this.recursivelyPumpData(e,n)}};VV.VirtualPromptReconciler=Hme;var Gme=class{constructor(e){this.state=e,this._updateTimeMs=0}getUpdateTimeMsAndReset(){let e=this._updateTimeMs;return this._updateTimeMs=0,e}},zme=class{constructor(e){this.lifecycleData=e,this.stateHook=new Ilt.UseState(e.state),this.dataHook=new Ilt.UseData(r=>{e._updateTimeMs=r})}useState(e){return this.stateHook.useState(e)}useData(e,r){this.dataHook.useData(e,r)}isRemountRequired(){return this.stateHook.hasChanged()}};function j8r(t){return typeof t=="function"&&"isFragmentFunction"in t}});var Rlt=m(HV=>{"use strict";Object.defineProperty(HV,"__esModule",{value:!0});HV.VirtualPrompt=void 0;var B8r=Plt(),Wme=class{constructor(e){this.reconciler=new B8r.VirtualPromptReconciler(e)}snapshotNode(e,r){if(!e)return;if(r?.isCancellationRequested)return"cancelled";let n=[];for(let o of e.children??[]){let s=this.snapshotNode(o,r);if(s==="cancelled")return"cancelled";s!==void 0&&n.push(s)}return{value:e.props?.value?.toString(),name:e.name,path:e.path,props:e.props,children:n,statistics:{updateDataTimeMs:e.lifecycle?.lifecycleData.getUpdateTimeMsAndReset()}}}snapshot(e){try{let r=this.reconciler.reconcile(e);if(e?.isCancellationRequested)return{snapshot:void 0,status:"cancelled"};if(!r)throw new Error("Invalid virtual prompt tree");let n=this.snapshotNode(r,e);return n==="cancelled"||e?.isCancellationRequested?{snapshot:void 0,status:"cancelled"}:{snapshot:n,status:"ok"}}catch(r){return{snapshot:void 0,status:"error",error:r}}}createPipe(){return this.reconciler.createPipe()}};HV.VirtualPrompt=Wme});var sv=m(GV=>{"use strict";Object.defineProperty(GV,"__esModule",{value:!0});GV.Text=$8r;GV.Chunk=V8r;function $8r(t){if(t.children)return Array.isArray(t.children)?t.children.join(""):t.children}function V8r(t){return t.children}});var Kme=m(zV=>{"use strict";Object.defineProperty(zV,"__esModule",{value:!0});zV.getCodeSnippetsFromContextItems=K8r;zV.addRelativePathToCodeSnippets=Y8r;var H8r=Xl(),G8r=ib(),z8r=wV(),W8r="content_excluded";async function K8r(t,e,r,n){let o=(0,z8r.filterContextItemsByType)(r,"CodeSnippet");if(o.length===0)return[];let s=new Set,a=o.flatMap(f=>f.data.map(p=>(s.add(p.uri),p.additionalUris?.forEach(h=>s.add(h)),{providerId:f.providerId,data:p}))),c=t.get(G8r.ICompletionsContextProviderService),l=t.get(H8r.ICompletionsTextDocumentManagerService),u=new Map;await Promise.all(Array.from(s).map(async f=>{u.set(f,await l.getTextDocumentValidation({uri:f}))}));let d=c.getStatisticsForCompletion(e);return a.filter(f=>{let h=[f.data.uri,...f.data.additionalUris??[]].every(_=>u.get(_)?.status==="valid");return h?d.addExpectations(f.providerId,[[f.data,"included"]]):d.addExpectations(f.providerId,[[f.data,W8r]]),h}).map(f=>f.data)}function Y8r(t,e){return e.map(r=>({snippet:r,relativePath:t.getRelativePath(r)}))}});var Yme=m(YV=>{"use strict";Object.defineProperty(YV,"__esModule",{value:!0});YV.CodeSnippets=void 0;var WV=zm(),KV=sv(),Q8r=av(),Z8r=Kme(),J8r=(t,e)=>{let[r,n]=e.useState(),[o,s]=e.useState();if(e.useData(Q8r.isCompletionRequestData,u=>{u.codeSnippets!==r&&n(u.codeSnippets),u.document.uri!==o?.uri&&s(u.document)}),!r||r.length===0||!o)return;let a=(0,Z8r.addRelativePathToCodeSnippets)(t.tdms,r),c=new Map;for(let u of a){let d=u.relativePath??u.snippet.uri,f=c.get(d);f===void 0&&(f=[],c.set(d,f)),f.push(u)}let l=[];for(let[u,d]of c.entries()){let f=d.filter(p=>p.snippet.value.length>0);f.length>0&&l.push({chunkElements:f.map(p=>p.snippet),importance:Math.max(...f.map(p=>p.snippet.importance??0)),uri:u})}if(l.length!==0)return l.sort((u,d)=>d.importance-u.importance),l.reverse(),l.map(u=>{let d=[];return d.push((0,WV.jsx)(KV.Text,{children:`Compare ${u.chunkElements.length>1?"these snippets":"this snippet"} from ${u.uri}:`})),u.chunkElements.forEach((f,p)=>{d.push((0,WV.jsx)(KV.Text,{source:f,children:f.value},f.id)),u.chunkElements.length>1&&p<u.chunkElements.length-1&&d.push((0,WV.jsx)(KV.Text,{children:"---"}))}),(0,WV.jsx)(KV.Chunk,{children:d})})};YV.CodeSnippets=J8r});var m3=m(TP=>{"use strict";Object.defineProperty(TP,"__esModule",{value:!0});TP.CompletionsContext=Olt;TP.StableCompletionsContext=Mlt;TP.AdditionalCompletionsContext=Nlt;TP.isContextNode=X8r;function Olt(t){return t.children}function Mlt(t){return t.children}function Nlt(t){return t.children}function X8r(t){return t.name===Olt.name||t.name===Mlt.name||t.name===Nlt.name}});var Zme=m(g3=>{"use strict";Object.defineProperty(g3,"__esModule",{value:!0});g3.SnapshotWalker=void 0;g3.defaultTransformers=Llt;var e9r=sv(),Qme=class{constructor(e,r=Llt()){this.snapshot=e,this.transformers=r}walkSnapshot(e){this.walkSnapshotNode(this.snapshot,void 0,e,{})}walkSnapshotNode(e,r,n,o){let s=this.transformers.reduce((c,l)=>l(e,r,c),{...o});if(n(e,r,s))for(let c of e.children??[])this.walkSnapshotNode(c,e,n,s)}};g3.SnapshotWalker=Qme;function Llt(){return[(t,e,r)=>{r.weight===void 0&&(r.weight=1);let n=t.props?.weight??1,o=typeof n=="number"?Math.max(0,Math.min(1,n)):1;return{...r,weight:o*r.weight}},(t,e,r)=>{if(t.name===e9r.Chunk.name){let n=r.chunks?new Set(r.chunks):new Set;return n.add(t.path),{...r,chunks:n}}return r},(t,e,r)=>t.props?.source!==void 0?{...r,source:t.props.source}:r]}});var klt=m(Jme=>{"use strict";Object.defineProperty(Jme,"__esModule",{value:!0});Jme.findEditDistanceScore=t9r;function t9r(t,e){if(t.length===0||e.length===0)return{score:t.length+e.length};let r=Array.from({length:t.length}).map(()=>Array.from({length:e.length}).map(()=>0));for(let n=0;n<t.length;n++)r[n][0]=n;for(let n=0;n<e.length;n++)r[0][n]=n;for(let n=0;n<e.length;n++)for(let o=0;o<t.length;o++)r[o][n]=Math.min((o===0?n:r[o-1][n])+1,(n===0?o:r[o][n-1])+1,(o===0||n===0?Math.max(o,n):r[o-1][n-1])+(t[o]===e[n]?0:1));return{score:r[t.length-1][e.length-1]}}});var _3=m(Lf=>{"use strict";Object.defineProperty(Lf,"__esModule",{value:!0});Lf.MAX_EDIT_DISTANCE_LENGTH=void 0;Lf.CurrentFile=o9r;Lf.BeforeCursor=tge;Lf.AfterCursor=rge;Lf.DocumentPrefix=s9r;Lf.DocumentSuffix=a9r;var fd=zm(),SP=sv(),r9r=BS(),n9r=klt(),i9r=FI(),Xme=av();Lf.MAX_EDIT_DISTANCE_LENGTH=50;function ege(t){let e=t*4,r=t*.1;return Math.floor(e+r)}function o9r(t,e){let[r,n]=e.useState(),[o,s]=e.useState(),[a,c]=e.useState(0),[l,u]=e.useState(),[d,f]=e.useState();e.useData(Xme.isCompletionRequestData,h=>{let _=h.document;(h.document.uri!==r?.uri||_.getText()!==r?.getText())&&n(_),h.position!==o&&s(h.position),h.suffixMatchThreshold!==l&&u(h.suffixMatchThreshold),h.maxPromptTokens!==a&&c(h.maxPromptTokens),h.tokenizer!==d&&f(h.tokenizer)});let p=ege(a);return(0,fd.jsxs)(fd.Fragment,{children:[(0,fd.jsx)(tge,{document:r,position:o,maxCharacters:p}),(0,fd.jsx)(rge,{document:r,position:o,suffixMatchThreshold:l,maxCharacters:p,tokenizer:d})]})}function tge(t){if(t.document===void 0||t.position===void 0)return(0,fd.jsx)(SP.Text,{});let e=t.document.getText({start:{line:0,character:0},end:t.position});return e.length>t.maxCharacters&&(e=e.slice(-t.maxCharacters)),(0,fd.jsx)(SP.Text,{children:e})}function rge(t,e){let[r,n]=e.useState("");if(t.document===void 0||t.position===void 0)return(0,fd.jsx)(SP.Text,{});let o=t.document.getText({start:t.position,end:{line:Number.MAX_VALUE,character:Number.MAX_VALUE}});o.length>t.maxCharacters&&(o=o.slice(0,t.maxCharacters));let s=o.replace(/^.*/,"").trimStart();if(s==="")return(0,fd.jsx)(SP.Text,{});if(r===s)return(0,fd.jsx)(SP.Text,{children:r});let a=s;if(r!==""){let c=(0,i9r.getTokenizer)(t.tokenizer),l=c.takeFirstTokens(s,Lf.MAX_EDIT_DISTANCE_LENGTH);l.tokens.length>0&&100*(0,n9r.findEditDistanceScore)(l.tokens,c.takeFirstTokens(r,Lf.MAX_EDIT_DISTANCE_LENGTH).tokens)?.score<(t.suffixMatchThreshold??r9r.DEFAULT_SUFFIX_MATCH_THRESHOLD)*l.tokens.length&&(a=r)}return a!==r&&n(a),(0,fd.jsx)(SP.Text,{children:a})}function s9r(t,e){let[r,n]=e.useState(),[o,s]=e.useState(),[a,c]=e.useState(0);e.useData(Xme.isCompletionRequestData,u=>{let d=u.document;(u.document.uri!==r?.uri||d.getText()!==r?.getText())&&n(d),u.position!==o&&s(u.position),u.maxPromptTokens!==a&&c(u.maxPromptTokens)});let l=ege(a);return(0,fd.jsx)(tge,{document:r,position:o,maxCharacters:l})}function a9r(t,e){let[r,n]=e.useState(),[o,s]=e.useState(),[a,c]=e.useState(0),[l,u]=e.useState(),[d,f]=e.useState();e.useData(Xme.isCompletionRequestData,h=>{let _=h.document;(h.document.uri!==r?.uri||_.getText()!==r?.getText())&&n(_),h.position!==o&&s(h.position),h.suffixMatchThreshold!==l&&u(h.suffixMatchThreshold),h.maxPromptTokens!==a&&c(h.maxPromptTokens),h.tokenizer!==d&&f(h.tokenizer)});let p=ege(a);return(0,fd.jsx)(rge,{document:r,position:o,suffixMatchThreshold:l,maxCharacters:p,tokenizer:d})}});var ige=m(cb=>{"use strict";Object.defineProperty(cb,"__esModule",{value:!0});cb.WishlistElision=void 0;cb.makePrompt=c9r;cb.makePrefixPrompt=l9r;cb.makeContextPrompt=u9r;var nge=class{elide(e,r,n,o,s){if(r<=0)throw new Error("Prefix limit must be greater than 0");let[a,c]=this.preparePrefixBlocks(e,s),{elidedSuffix:l,adjustedPrefixTokenLimit:u}=this.elideSuffix(n,o,r,c,s),d=this.elidePrefix(a,u,c,s);return{blocks:[l,...d],cycles:1}}preparePrefixBlocks(e,r){let n=0,o=new Set;return[e.map((a,c)=>{let l=0,d=a.value.split(/([^\n]*\n+)/).filter(p=>p!=="").map(p=>{let h=r.tokenLength(p);return l+=h,n+=h,{line:p,componentPath:a.componentPath,tokens:h}}),f=a.componentPath;if(o.has(f))throw new Error(`Duplicate component path in prefix blocks: ${f}`);return o.add(f),{...a,tokens:l,markedForRemoval:!1,originalIndex:c,lines:d}}),n]}elideSuffix(e,r,n,o,s){let a=e.value;if(a.length===0||r<=0)return{elidedSuffix:{...e,tokens:0,elidedValue:"",elidedTokens:0},adjustedPrefixTokenLimit:n+Math.max(0,r)};o<n&&(r=r+(n-o),n=o);let c=s.takeFirstTokens(a,r);return{elidedSuffix:{...e,value:a,tokens:s.tokenLength(a),elidedValue:c.text,elidedTokens:c.tokens.length},adjustedPrefixTokenLimit:n+Math.max(0,r-c.tokens.length)}}elidePrefix(e,r,n,o){let s=this.removeLowWeightPrefixBlocks(e,r,n),a=s.filter(d=>!d.markedForRemoval).flatMap(d=>d.lines);if(a.length===0)return[];let[c,l]=this.trimPrefixLinesToFit(a,r,o),u=l;return s.map(d=>{if(d.markedForRemoval)return u+d.tokens<=r&&!d.chunks?(u+=d.tokens,{...d,elidedValue:d.value,elidedTokens:d.tokens}):{...d,elidedValue:"",elidedTokens:0};let f=c.filter(h=>h.componentPath===d.componentPath&&h.line!=="").map(h=>h.line).join(""),p=d.tokens;return f!==d.value&&(p=f!==""?o.tokenLength(f):0),{...d,elidedValue:f,elidedTokens:p}})}removeLowWeightPrefixBlocks(e,r,n){let o=n;e.sort((s,a)=>s.weight-a.weight);for(let s of e){if(o<=r)break;if(s.weight!==1&&!(s.chunks&&s.markedForRemoval))if(s.chunks&&s.chunks.size>0)for(let a of e)!a.markedForRemoval&&a.chunks&&[...s.chunks].every(c=>a.chunks?.has(c))&&(a.markedForRemoval=!0,o-=a.tokens);else s.markedForRemoval=!0,o-=s.tokens}return e.sort((s,a)=>s.originalIndex-a.originalIndex)}trimPrefixLinesToFit(e,r,n){let o=0,s=[];for(let a=e.length-1;a>=0;a--){let c=e[a],l=c.tokens;if(o+l<=r)s.unshift(c),o+=l;else break}if(s.length===0){let a=e[e.length-1];if(a&&a.line.length>0){let l=n.takeLastTokens(a.line,r);return s.push({line:l.text,componentPath:a.componentPath,tokens:l.tokens.length}),[s,l.tokens.length]}let c=`Cannot fit prefix within limit of ${r} tokens`;throw new Error(c)}return[s,o]}};cb.WishlistElision=nge;function c9r(t){return t.map(e=>e.elidedValue).join("")}function l9r(t){return t.filter(e=>e.type==="prefix").map(e=>e.elidedValue).join("")}function u9r(t){if(t.length===0)return[];let e=new Map;for(let o of t)if(o.type==="context"&&o.index!==void 0){e.has(o.index)||e.set(o.index,[]);let s=o.elidedValue.trim();s.length>0&&e.get(o.index).push(s)}let r=Math.max(...Array.from(e.keys()),-1),n=[];for(let o=0;o<=r;o++){let s=e.get(o);if(s&&s.length>0){let a=s.join(`
`).trim();n.push(a)}else n.push("")}return n}});var age=m(cv=>{"use strict";Object.defineProperty(cv,"__esModule",{value:!0});cv.transformers=cv.CompletionsPromptRenderer=void 0;cv.normalizeLineEndings=sge;var Flt=Zme(),Dlt=u3(),Ult=FI(),d9r=m3(),QV=_3(),qlt=ige(),f9r=5,oge=class{constructor(){this.renderId=0,this.formatPrefix=qlt.makePrompt}render(e,r,n){let o=this.renderId++,s=performance.now();try{if(n?.isCancellationRequested)return{status:"cancelled"};let a=r.delimiter??"",c=r.tokenizer??Ult.TokenizerName.o200k,{prefixBlocks:l,suffixBlock:u,componentStatistics:d}=this.processSnapshot(e,a,r.languageId),{prefixTokenLimit:f,suffixTokenLimit:p}=this.getPromptLimits(u,r),h=performance.now(),_=new qlt.WishlistElision,{blocks:[g,...v]}=_.elide(l,f,u,p,(0,Ult.getTokenizer)(c)),E=performance.now(),y=this.formatPrefix(v),S=this.formatContext?this.formatContext(v):void 0,b=g.elidedValue,w=v.reduce((P,A)=>P+A.elidedTokens,0);return d.push(...p9r([...v,g])),{prefix:y,prefixTokens:w,suffix:b,suffixTokens:g.elidedTokens,context:S,status:"ok",metadata:{renderId:o,rendererName:"c",tokenizer:c,elisionTimeMs:E-h,renderTimeMs:performance.now()-s,componentStatistics:d,updateDataTimeMs:d.reduce((P,A)=>P+(A.updateDataTimeMs??0),0)}}}catch(a){return{status:"error",error:a}}}getPromptLimits(e,r){let n=e?.value??"",o=r.promptTokenLimit,s=r.suffixPercent;if(n.length===0||s===0)return{prefixTokenLimit:o,suffixTokenLimit:0};o=n.length>0?o-f9r:o;let a=Math.ceil(o*(s/100));return{prefixTokenLimit:o-a,suffixTokenLimit:a}}processSnapshot(e,r,n){let o=[],s=[],a=[],c=!1;if(new Flt.SnapshotWalker(e,cv.transformers).walkSnapshot((d,f,p)=>{if(d===e||(d.name===QV.CurrentFile.name&&(c=!0),d.statistics.updateDataTimeMs&&d.statistics.updateDataTimeMs>0&&a.push({componentPath:d.path,updateDataTimeMs:d.statistics.updateDataTimeMs}),d.value===void 0||d.value===""))return!0;let h=p.chunks;if(p.type==="suffix")s.push({value:sge(d.value),type:"suffix",weight:p.weight,componentPath:d.path,nodeStatistics:d.statistics,chunks:h,source:p.source});else{let _=d.value.endsWith(r)?d.value:d.value+r,g=_;p.type==="prefix"?g=d.value:(0,Dlt.isShebangLine)(d.value)?g=_:g=(0,Dlt.commentBlockAsSingles)(_,n),o.push({type:p.type==="prefix"?"prefix":"context",value:sge(g),weight:p.weight,componentPath:d.path,nodeStatistics:d.statistics,chunks:h,source:p.source})}return!0}),!c)throw new Error(`Node of type ${QV.CurrentFile.name} not found`);if(s.length>1)throw new Error("Only one suffix is allowed");let u=s.length===1?s[0]:{componentPath:"",value:"",weight:1,nodeStatistics:{},type:"suffix"};return{prefixBlocks:o,suffixBlock:u,componentStatistics:a}}};cv.CompletionsPromptRenderer=oge;cv.transformers=[...(0,Flt.defaultTransformers)(),(t,e,r)=>(0,d9r.isContextNode)(t)?{...r,type:"context"}:r,(t,e,r)=>t.name===QV.BeforeCursor.name?{...r,type:"prefix"}:r,(t,e,r)=>t.name===QV.AfterCursor.name?{...r,type:"suffix"}:r];function p9r(t){return t.map(e=>{let r={componentPath:e.componentPath};return e.tokens!==0&&(r.expectedTokens=e.tokens,r.actualTokens=e.elidedTokens),e.nodeStatistics.updateDataTimeMs!==void 0&&(r.updateDataTimeMs=e.nodeStatistics.updateDataTimeMs),e.source&&(r.source=e.source),r})}function sge(t){return t.replace(/\r\n?/g,`
`)}});var cge=m(JV=>{"use strict";Object.defineProperty(JV,"__esModule",{value:!0});JV.DocumentMarker=void 0;var ZV=zm(),jlt=sv(),Blt=u3(),h9r=av(),m9r=(t,e)=>{let[r,n]=e.useState();if(e.useData(h9r.isCompletionRequestData,o=>{o.document.uri!==r?.uri&&n(o.document)}),r){let o=t.tdms.getRelativePath(r),s={uri:r.uri,source:r.getText(),relativePath:o,languageId:r.detectedLanguageId},a=t.tdms.findNotebook(r);return s.relativePath&&!a?(0,ZV.jsx)(g9r,{docInfo:s}):(0,ZV.jsx)(_9r,{docInfo:s})}};JV.DocumentMarker=m9r;var g9r=t=>(0,ZV.jsx)(jlt.Text,{children:(0,Blt.getPathMarker)(t.docInfo)}),_9r=t=>(0,ZV.jsx)(jlt.Text,{children:(0,Blt.getLanguageMarker)(t.docInfo)})});var lge=m(v3=>{"use strict";Object.defineProperty(v3,"__esModule",{value:!0});v3.RecentEdits=void 0;v3.editIsTooCloseToCursor=Hlt;var $lt=zm(),Vlt=sv(),XV=u3(),v9r=av();function Hlt(t,e=!1,r=void 0,n){if(e&&(r===void 0||n===void 0))throw new Error("cursorLine and activeDocDistanceLimitFromCursor are required when filterByCursorLine is true");let o=t.startLine-1,s=t.endLine-1;return!!(e&&(Math.abs(o-r)<=n||Math.abs(s-r)<=n))}var y9r=(t,e)=>{let[r,n]=e.useState();return e.useData(v9r.isCompletionRequestData,async o=>{if(!o.document)return;let s=t.recentEditsProvider;if(s.isEnabled())s.start();else return;let a=s.config,c=s.getRecentEdits(),l=new Set,u=t.tdms,d=[];for(let p=c.length-1;p>=0&&!(d.length>=a.maxEdits);p--){let h=c[p];if(!await u.getTextDocument({uri:h.file}))continue;let _=!l.has(h.file);if(l.size+(_?1:0)>a.maxFiles)break;let v=h.file===o.document?.uri,E=v?o.position.line:void 0;if(Hlt(h,v,E,a.activeDocDistanceLimitFromCursor))continue;let S=s.getEditSummary(h);if(S){l.add(h.file);let b=u.getRelativePath({uri:h.file});d.unshift((0,XV.newLineEnded)(`File: ${b}`)+(0,XV.newLineEnded)(S))}}if(d.length===0){n(void 0);return}let f=(0,XV.newLineEnded)("These are recently edited files. Do not suggest code that has been deleted.")+d.join("")+(0,XV.newLineEnded)("End of recent edits");n(f)}),r?(0,$lt.jsx)(Vlt.Chunk,{children:(0,$lt.jsx)(Vlt.Text,{children:r})}):void 0};v3.RecentEdits=y9r});var Glt=m(kp=>{"use strict";Object.defineProperty(kp,"__esModule",{value:!0});kp.registerDocumentTracker=kp.accessTimes=void 0;kp.sortByAccessTimes=S9r;var E9r=Dm(),T9r=Xl();kp.accessTimes=new E9r.LRUCacheMap;function S9r(t){return[...t].sort((e,r)=>{let n=kp.accessTimes.get(e.uri)??0;return(kp.accessTimes.get(r.uri)??0)-n})}var b9r=t=>t.get(T9r.ICompletionsTextDocumentManagerService).onDidFocusTextDocument(e=>{e.document&&kp.accessTimes.set(e.document.uri.toString(),Date.now())});kp.registerDocumentTracker=b9r});var zlt=m(Wm=>{"use strict";var C9r=Wm&&Wm.__decorate||function(t,e,r,n){var o=arguments.length,s=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(o<3?a(s):o>3?a(e,r,s):a(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},A9r=Wm&&Wm.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(Wm,"__esModule",{value:!0});Wm.OpenTabFiles=void 0;var x9r=Glt(),w9r=Xl(),uge=bP(),dge=class{constructor(e){this.docManager=e}truncateDocs(e,r,n,o){let s=new Map,a=0;for(let c of e)if(!(a+c.getText().length>uge.NeighborSource.MAX_NEIGHBOR_AGGREGATE_LENGTH)&&(c.uri.startsWith("file:")&&r.startsWith("file:")&&c.uri!==r&&(0,uge.considerNeighborFile)(n,c.detectedLanguageId)&&(s.set(c.uri.toString(),{uri:c.uri.toString(),relativePath:this.docManager.getRelativePath(c),source:c.getText()}),a+=c.getText().length),s.size>=o))break;return s}async getNeighborFiles(e,r,n){let o=new Map,s=new Map;return o=this.truncateDocs((0,x9r.sortByAccessTimes)(await this.docManager.textDocuments()),e,r,n),s.set(uge.NeighboringFileType.OpenTabs,Array.from(o.keys()).map(a=>a.toString())),{docs:o,neighborSource:s}}};Wm.OpenTabFiles=dge;Wm.OpenTabFiles=dge=C9r([A9r(0,w9r.ICompletionsTextDocumentManagerService)],dge)});var Wlt=m(fge=>{"use strict";Object.defineProperty(fge,"__esModule",{value:!0});fge.shortCircuit=I9r;function I9r(t,e,r){return async function(...n){return await Promise.race([t.apply(this,n),new Promise(o=>{setTimeout(o,e,r)})])}}});var oH=m(xn=>{"use strict";var P9r=xn&&xn.__decorate||function(t,e,r,n){var o=arguments.length,s=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(o<3?a(s):o>3?a(e,r,s):a(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},eH=xn&&xn.__param||function(t,e){return function(r,n){e(r,n,t)}},pge;Object.defineProperty(xn,"__esModule",{value:!0});xn.RelatedFilesProvider=xn.ICompletionsRelatedFilesProviderService=xn.relatedFilesLogger=xn.PromiseExpirationCacheMap=xn.EmptyRelatedFilesResponse=void 0;xn.getRelatedFilesAndTraits=F9r;var R9r=GS(),O9r=Qe(),M9r=Bi(),gge=Nr(),N9r=G1(),L9r=Dm(),iH=An(),k9r=Ps(),D9r=Wlt();xn.EmptyRelatedFilesResponse={entries:[],traits:[]};var tH={entries:new Map,traits:[]},rH=class extends L9r.LRUCacheMap{constructor(e,r=120*1e3){super(e),this.defaultEvictionTimeMs=r,this._cacheTimestamps=new Map}bumpRetryCount(e){let r=this._cacheTimestamps.get(e);return r?++r.retryCount:(this._cacheTimestamps.set(e,{timestamp:Date.now(),retryCount:0}),0)}has(e){return this.isValid(e)?super.has(e):(this.deleteExpiredEntry(e),!1)}get(e){let r=super.get(e);if(this.isValid(e))return r;this.deleteExpiredEntry(e)}set(e,r){let n=super.set(e,r);return this.isValid(e)||this._cacheTimestamps.set(e,{timestamp:Date.now(),retryCount:0}),n}clear(){super.clear(),this._cacheTimestamps.clear()}isValid(e){let r=this._cacheTimestamps.get(e);return r!==void 0&&Date.now()-r.timestamp<this.defaultEvictionTimeMs}deleteExpiredEntry(e){this._cacheTimestamps.has(e)&&this._cacheTimestamps.delete(e),super.delete(e)}};xn.PromiseExpirationCacheMap=rH;xn.relatedFilesLogger=new iH.Logger("relatedFiles");var U9r=1e3,nH=class extends Error{constructor(){super("The provider failed providing the list of relatedFiles")}};xn.ICompletionsRelatedFilesProviderService=(0,O9r.createServiceIdentifier)("ICompletionsRelatedFilesProviderService");var hge=pge=class{constructor(e,r,n,o){this.instantiationService=e,this.ignoreService=r,this.logTarget=n,this.fileSystemService=o}async getRelatedFiles(e,r,n){let o=await this.getRelatedFilesResponse(e,r,n);if(o===void 0)return;let s={entries:new Map,traits:o.traits??[]};for(let a of o.entries){let c=s.entries.get(a.type);c||(c=new Map,s.entries.set(a.type,c));for(let l of a.uris)try{xn.relatedFilesLogger.debug(this.logTarget,`Processing ${l}`);let u=await this.getFileContent(l);if(!u||u.length===0){xn.relatedFilesLogger.debug(this.logTarget,`Skip ${l} due to empty content or loading issue.`);continue}if(await this.isContentExcluded(l,u)){xn.relatedFilesLogger.debug(this.logTarget,`Skip ${l} due content exclusion.`);continue}u=pge.dropBOM(u),c.set(l,u)}catch(u){xn.relatedFilesLogger.warn(this.logTarget,u)}}return s}async getFileContent(e){try{return this.fileSystemService.readFileString(e)}catch(r){xn.relatedFilesLogger.debug(this.logTarget,r)}}async isContentExcluded(e,r){try{return this.ignoreService.isCopilotIgnored(M9r.URI.parse(e))}catch(n){this.instantiationService.invokeFunction(o=>xn.relatedFilesLogger.exception(o,n,"isContentExcluded"))}return!0}static dropBOM(e){return e.charCodeAt(0)===65279?e.slice(1):e}};xn.RelatedFilesProvider=hge;xn.RelatedFilesProvider=hge=pge=P9r([eH(0,gge.IInstantiationService),eH(1,R9r.IIgnoreService),eH(2,iH.ICompletionsLogTargetService),eH(3,N9r.ICompletionsFileSystemService)],hge);var q9r=3,y3=new rH(U9r);async function Klt(t,e,r,n,o){let s=t.get(gge.IInstantiationService),a=t.get(iH.ICompletionsLogTargetService),c=performance.now(),l;try{l=await o.getRelatedFiles(e,r,n)}catch(d){s.invokeFunction(f=>xn.relatedFilesLogger.exception(f,d,".getRelatedFiles")),l=void 0}l===void 0&&(y3.bumpRetryCount(e.uri)>=q9r?l=tH:l=void 0);let u=performance.now()-c;if(xn.relatedFilesLogger.debug(a,l!==void 0?`Fetched ${[...l.entries.values()].map(d=>d.size).reduce((d,f)=>d+f,0)} related files for '${e.uri}' in ${u}ms.`:`Failing fetching files for '${e.uri}' in ${u}ms.`),l===void 0)throw new nH;return l}var mge=function(t,e,r,n,o){let s=`${e.uri}`;if(y3.has(s))return y3.get(s);let a=Klt(t,e,r,n,o);return a instanceof Promise&&(a=a.catch(c=>{throw y3.delete(s),c})),y3.set(s,a),a};mge=(0,D9r.shortCircuit)(mge,200,tH);async function F9r(t,e,r,n,o,s=!1){let a=t.get(gge.IInstantiationService),c=t.get(iH.ICompletionsLogTargetService),l=t.get(xn.ICompletionsRelatedFilesProviderService),u=tH;try{let d={uri:e.uri,clientLanguageId:e.clientLanguageId,data:o};u=s?await a.invokeFunction(Klt,d,r,n,l):await a.invokeFunction(mge,d,r,n,l)}catch(d){u=tH,d instanceof nH&&a.invokeFunction(k9r.telemetry,"getRelatedFilesList",r)}return xn.relatedFilesLogger.debug(c,u!=null?`Fetched following traits ${u.traits.map(d=>`{${d.name} : ${d.value}}`).join("")} for '${e.uri}'`:`Failing fecthing traits for '${e.uri}'.`),u}});var bP=m(lv=>{"use strict";Object.defineProperty(lv,"__esModule",{value:!0});lv.NeighborSource=lv.NeighboringFileType=void 0;lv.considerNeighborFile=H9r;lv.isIncludeNeighborFilesActive=G9r;var j9r=Nr(),Ylt=BS(),Zlt=Wa(),B9r=An(),$9r=Xl(),V9r=zlt(),sH=oH(),Qlt;(function(t){t.None="none",t.OpenTabs="opentabs",t.CursorMostRecent="cursormostrecent",t.CursorMostCount="cursormostcount",t.WorkspaceSharingSameFolder="workspacesharingsamefolder",t.WorkspaceSmallestPathDist="workspacesmallestpathdist",t.OpenTabsAndCocommitted="opentabsandcocommitted",t.RelatedCSharp="related/csharp",t.RelatedCSharpRoslyn="related/csharproslyn",t.RelatedCpp="related/cpp",t.RelatedTypeScript="related/typescript",t.RelatedCppSemanticCodeContext="related/cppsemanticcodecontext",t.RelatedOther="related/other"})(Qlt||(lv.NeighboringFileType=Qlt={}));function H9r(t,e){return(0,Ylt.normalizeLanguageId)(t)===(0,Ylt.normalizeLanguageId)(e)}var _ge=class t{static{this.MAX_NEIGHBOR_AGGREGATE_LENGTH=2e5}static{this.MAX_NEIGHBOR_FILES=20}static{this.EXCLUDED_NEIGHBORS=["node_modules","dist","site-packages"]}static defaultEmptyResult(){return{docs:new Map,neighborSource:new Map,traits:[]}}static reset(){t.instance=void 0}static async getNeighborFilesAndTraits(e,r,n,o,s,a,c){let l=e.get(Zlt.ICompletionsFeaturesService),u=e.get(B9r.ICompletionsLogTargetService),d=e.get(j9r.IInstantiationService),f=e.get($9r.ICompletionsTextDocumentManagerService);t.instance===void 0&&(t.instance=d.createInstance(V9r.OpenTabFiles));let p={...await t.instance.getNeighborFiles(r,n,t.MAX_NEIGHBOR_FILES),traits:[]};if(l.excludeRelatedFiles(n,o))return p;let h=await f.getTextDocument({uri:r});if(!h)return sH.relatedFilesLogger.debug(u,"neighborFiles.getNeighborFilesAndTraits",`Failed to get the related files: failed to get the document ${r}`),p;let _=f.getWorkspaceFolder(h);if(!_)return sH.relatedFilesLogger.debug(u,"neighborFiles.getNeighborFilesAndTraits",`Failed to get the related files: ${r} is not under the workspace folder`),p;let g=await d.invokeFunction(sH.getRelatedFilesAndTraits,h,o,s,a,c);return g.entries.size===0?(sH.relatedFilesLogger.debug(u,"neighborFiles.getNeighborFilesAndTraits",`0 related files found for ${r}`),p.traits.push(...g.traits),p):(g.entries.forEach((v,E)=>{let y=[];v.forEach((S,b)=>{let w=t.getRelativePath(b,_.uri);if(!w||p.docs.has(b))return;let P={relativePath:w,uri:b,source:S};y.unshift(P),p.docs.set(b,P)}),y.length>0&&p.neighborSource.set(E,y.map(S=>S.uri.toString()))}),p.traits.push(...g.traits),p)}static basename(e){return decodeURIComponent(e.replace(/[#?].*$/,"").replace(/^.*[/:]/,""))}static getRelativePath(e,r){let n=r.toString().replace(/[#?].*/,"").replace(/\/?$/,"/");return e.toString().startsWith(n)?e.toString().slice(n.length):t.basename(e)}};lv.NeighborSource=_ge;function G9r(t,e,r){return t.get(Zlt.ICompletionsFeaturesService).includeNeighboringFiles(e,r)}});var yge=m(aH=>{"use strict";Object.defineProperty(aH,"__esModule",{value:!0});aH.SimilarFiles=void 0;var CP=zm(),vge=sv(),z9r=jV(),W9r=Rme(),K9r=$V(),Y9r=av(),Q9r=AP(),Jlt=bP(),Z9r=(t,e)=>{let[r,n]=e.useState(),[o,s]=e.useState([]);e.useData(Y9r.isCompletionRequestData,async l=>{l.document.uri!==r?.uri&&s([]),n(l.document);let u=Jlt.NeighborSource.defaultEmptyResult();l.turnOffSimilarFiles||(u=await t.instantiationService.invokeFunction(async f=>await Jlt.NeighborSource.getNeighborFilesAndTraits(f,l.document.uri,l.document.detectedLanguageId,l.telemetryData,l.cancellationToken,l.data)));let d=await a(l.telemetryData,l.document,l,u);s(d)});async function a(l,u,d,f){let p=t.instantiationService.invokeFunction(Q9r.getPromptOptions,l,u.detectedLanguageId);return(await c(p,l,u,d,f)).filter(_=>_.snippet.length>0).sort((_,g)=>_.score-g.score).map(_=>({...(0,W9r.announceSnippet)(_),score:_.score}))}async function c(l,u,d,f,p){let h=l.similarFilesOptions||t.instantiationService.invokeFunction(K9r.getSimilarFilesOptions,u,d.detectedLanguageId),g=t.tdms.getRelativePath(d),v={uri:d.uri,source:d.getText(),offset:d.offsetAt(f.position),relativePath:g,languageId:d.detectedLanguageId};return await(0,z9r.getSimilarSnippets)(v,Array.from(p.docs.values()),h)}return(0,CP.jsxs)(CP.Fragment,{children:[...o.map((l,u)=>(0,CP.jsx)(J9r,{snippet:l}))]})};aH.SimilarFiles=Z9r;var J9r=(t,e)=>(0,CP.jsxs)(vge.Chunk,{children:[(0,CP.jsx)(vge.Text,{children:t.snippet.headline}),(0,CP.jsx)(vge.Text,{children:t.snippet.snippet})]})});var Km=m(Ege=>{"use strict";Object.defineProperty(Ege,"__esModule",{value:!0});Ege.autorunWithChanges=e7r;var X9r=cp();function e7r(t,e,r){let n=new Map(Object.entries(e).map(([s,a])=>[a,s])),o=new Map(Object.keys(e).map(s=>[s,void 0]));return(0,X9r.autorunHandleChanges)({owner:t,changeTracker:{createChangeSummary:()=>({}),handleChange:(s,a)=>{let c=n.get(s.changedObservable);return a[c]===void 0&&(a[c]={value:void 0,changes:[]}),a[c].changes.push(s.change),!0}}},(s,a)=>{for(let[c,l]of Object.entries(e)){let u=l.read(s);a[c]===void 0&&(a[c]={value:u,changes:[],previous:o.get(c)}),a[c].value=u,a[c].previous=o.get(c)===void 0?void 0:o.get(c),o.set(c,u)}r(a)})}});var aut=m(ou=>{"use strict";Object.defineProperty(ou,"__esModule",{value:!0});ou.getAllRecentEditsByTimestamp=t7r;ou.findChangeSpan=Tge;ou.getDiff=eut;ou.unifiedDiff=tut;ou.findReplaceDiff=rut;ou.editsOverlap=nut;ou.updateEdits=iut;ou.buildIncomingEdit=Sge;ou.trimOldFilesFromState=sut;ou.recentEditsReducer=i7r;ou.summarizeEdit=o7r;function t7r(t){return Object.values(t).flatMap(e=>e.edits).sort((e,r)=>e.timestamp-r.timestamp)}function Tge(t,e){let r=0;for(;r<t.length&&r<e.length&&t[r]===e[r];)r++;let n=t.length-1,o=e.length-1;for(;n>=r&&o>=r&&t[n]===e[o];)n--,o--;return r>n&&r>o?null:{start:r,endPrev:n,endNew:o}}function eut(t,e,r,n,o,s,a){let c=Math.max(0,n-a),l=Math.min(r.length,s+a+1);return{file:t,pre:c,post:l,before:e.slice(c,n),removed:e.slice(n,o+1),added:r.slice(n,s+1),after:r.slice(s+1,l)}}function r7r(t){return[...t.before,...t.removed,...t.added,...t.after].reduce((r,n)=>r+n.length+1,0)}function tut(t,e=!1,r=!1,n=!1){let o=[];o.push(`--- a/${t.file}`),o.push(`+++ b/${t.file}`);let s=t.before.length+t.removed.length+t.after.length,a=t.before.length+t.added.length+t.after.length;o.push(`@@ -${t.pre+1},${s} +${t.pre+1},${a} @@`);for(let c of t.before)o.push(" "+c);if(r)for(let c of t.added)o.push("+"+c);if(!e){let c=n?" --- IGNORE ---":"";for(let l of t.removed)o.push("-"+l+c)}if(!r)for(let c of t.added)o.push("+"+c);for(let c of t.after)o.push(" "+c);return o.join(`
`)+`
`}function n7r(t,e=!1){let{before:r,removed:n,added:o,after:s}=t,a=[];return a.push(">>>>>>> SEARCH"),a.push(...r),e?a.push("..."):a.push(...n),a.push(...s),a.push("======="),a.push(...r),a.push(...o),a.push(...s),a.push("<<<<<<<<< REPLACE"),a.join(`
`)}function rut(t,e=!1){let{before:r,removed:n,added:o,after:s}=t,a=e?["..."]:n.map(d=>`${d} --- DO NOT REPLY WITH CODE FROM THIS LINE ---`),c=[...r,...a,...s],l=[...r,...o,...s],u=[];return u.push("--- User edited code: ---"),u.push(...c),a.length===0?u.push(`--- and added ${o.length} line${o.length===1?"":"s"} to make: ---`):o.length===0?u.push(`--- and deleted ${a.length} line${a.length===1?"":"s"} to make: ---`):u.push("--- and replaced it with: ---"),u.push(...l),u.push("--- End of edit ---"),u.join(`
`)}function Xlt(t,e){for(let r of e){let n=t.slice(0,r.startLine),o=t.slice(r.endLine+1),s=r.diff.added?r.diff.added:[];t=[...n,...s,...o]}return t}function nut(t,e,r){let{added:n}=e.diff,o=e.startLine,s=e.startLine+n.length,a=t.startLine,c=t.endLine+1;return a<=s+r&&c>=o-r}function iut(t,e,r,n,o){let s=[...e];if(s.length>0){let a=s[s.length-1];if(nut(r,a,o.editMergeLineDistance)){let l=Xlt(t.split(`
`),s.slice(0,-1)),u=Tge(l,n);u&&(r=Sge(r.file,l,n,u,o),s=[...s.slice(0,-1),r])}else s.push(r)}else s.push(r);if(s.length>o.maxEdits){let a=s.slice(0,s.length-o.maxEdits);s=s.slice(s.length-o.maxEdits,s.length),t=Xlt(t.split(`
`),a).join(`
`)}return{originalContent:t,edits:s}}function Sge(t,e,r,n,o){let{start:s,endPrev:a,endNew:c}=n;if(!o||typeof o.diffContextLines!="number")throw new Error("Invalid configuration passed to buildIncomingEdit");let l=eut(t,e,r,s,a,c,o.diffContextLines);return{file:t,startLine:s,endLine:a,diff:l,timestamp:performance.now()}}function sut(t,e){let r={...t},n=Object.entries(t).filter(([s])=>t[s].edits.length).sort(([s,a],[c,l])=>a.edits[a.edits.length-1].timestamp-l.edits[l.edits.length-1].timestamp),o=Math.max(0,n.length-e);if(o)for(let s=0;s<o;s++){let a=n[s][0];delete r[a]}return r}function i7r(t={},e,r,n){if(r.length>2*1024*1024)return t;let o=t[e];if(!o)return{...t,[e]:{originalContent:r,currentContent:r,edits:[]}};if(o.currentContent===r)return t;let s=o.currentContent.split(`
`),a=r.split(`
`),c=Tge(s,a);if(!c)return{...t,[e]:{...o,currentContent:r}};let l=Sge(e,s,a,c,n);if(r7r(l.diff)>n.maxCharsPerEdit)return{...t,[e]:{originalContent:r,currentContent:r,edits:[]}};let{originalContent:u,edits:d}=iut(o.originalContent,o.edits,l,a,n),f={...t,[e]:{originalContent:u,currentContent:r,edits:d}};return sut(f,n.maxFiles)}function o7r(t,e){let r=t.diff.removed.filter(s=>s.trim().length>0),n=t.diff.added.filter(s=>s.trim().length>0),o;if(e.removeDeletedLines&&n.length===0)o=null;else if(r.length===0&&n.length===0)o=null;else if(r.join("").trim()===n.join("").trim())o=null;else if(t.diff.added.length>e.maxLinesPerEdit||t.diff.removed.length>e.maxLinesPerEdit)o=null;else if(e.summarizationFormat==="aiders-diff")o=n7r(t.diff);else if(e.summarizationFormat==="diff")o=tut(t.diff,e.removeDeletedLines,e.insertionsBeforeDeletions,e.appendNoReplyMarker);else if(e.summarizationFormat==="find-replace")o=rut(t.diff);else throw new Error(`Unknown summarization format: ${e.summarizationFormat}`);return o}});var cH=m(kf=>{"use strict";var s7r=kf&&kf.__decorate||function(t,e,r,n){var o=arguments.length,s=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(o<3?a(s):o>3?a(e,r,s):a(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},a7r=kf&&kf.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(kf,"__esModule",{value:!0});kf.FullRecentEditsProvider=kf.ICompletionsRecentEditsProviderService=void 0;var c7r=Km(),l7r=Qe(),u7r=Ar(),d7r=bT(),f7r=H0e(),bge=aut();kf.ICompletionsRecentEditsProviderService=(0,l7r.createServiceIdentifier)("ICompletionsRecentEditsProviderService");var p7r=Object.freeze({maxFiles:20,maxEdits:8,diffContextLines:3,editMergeLineDistance:1,maxCharsPerEdit:2e3,debounceTimeout:500,summarizationFormat:"diff",removeDeletedLines:!1,insertionsBeforeDeletions:!0,appendNoReplyMarker:!0,activeDocDistanceLimitFromCursor:100,maxLinesPerEdit:10}),Cge=class extends u7r.Disposable{constructor(e,r){super(),this.observableWorkspace=r,this._started=!1,this.recentEditMap={},this.recentEdits=[],this.recentEditSummaries=new WeakMap,this.debounceTimeouts={},this._config=e??Object.assign({},p7r)}get config(){return this._config}isEnabled(){return!0}getRecentEdits(){return this.recentEdits}getEditSummary(e){return this.recentEditSummaries.get(e)??null}updateRecentEdits(e,r){this.recentEditMap=(0,bge.recentEditsReducer)(this.recentEditMap,e,r,this._config),this.recentEdits=(0,bge.getAllRecentEditsByTimestamp)(this.recentEditMap),this.recentEdits.forEach(n=>{if(!this.recentEditSummaries.has(n)){let o=(0,bge.summarizeEdit)(n,this._config);this.recentEditSummaries.set(n,o)}})}start(){this._started||(this._started=!0,(0,d7r.mapObservableArrayCached)(this,this.observableWorkspace.openDocuments,(e,r)=>{r.add((0,c7r.autorunWithChanges)(this,{value:e.value,selection:e.selection,languageId:e.languageId},n=>{if(n.value.changes.length>0){let o=n.value.previous?.value,s=n.value.value.value,a=e.id.toString();clearTimeout(this.debounceTimeouts[a]),!this.recentEditMap[a]&&o?this.updateRecentEdits(a,o):this._config.debounceTimeout===0?this.updateRecentEdits(a,s):this.debounceTimeouts[a]=setTimeout(()=>{this.updateRecentEdits(a,s)},this._config.debounceTimeout??500)}}))},e=>e.id).recomputeInitiallyAndOnChange(this._store))}};kf.FullRecentEditsProvider=Cge;kf.FullRecentEditsProvider=Cge=s7r([a7r(1,f7r.ICompletionsObservableWorkspace)],Cge)});var Age=m(uH=>{"use strict";Object.defineProperty(uH,"__esModule",{value:!0});uH.Traits=void 0;var lH=zm(),cut=sv(),h7r=BS(),m7r=av(),g7r=(t,e)=>{let[r,n]=e.useState(),[o,s]=e.useState();if(e.useData(m7r.isCompletionRequestData,a=>{a.traits!==r&&n(a.traits);let c=(0,h7r.normalizeLanguageId)(a.document.detectedLanguageId);c!==o&&s(c)}),!(!r||r.length===0||!o))return(0,lH.jsxs)(lH.Fragment,{children:[(0,lH.jsx)(cut.Text,{children:`Consider this related information:
`}),...r.map(a=>(0,lH.jsx)(cut.Text,{source:a,children:`${a.name}: ${a.value}`},a.id))]})};uH.Traits=g7r});var dut=m(xge=>{"use strict";Object.defineProperty(xge,"__esModule",{value:!0});xge.splitContextCompletionsPrompt=A7r;var Df=zm(),_7r=Nr(),v7r=Xl(),y7r=cH(),E7r=Yme(),lut=m3(),uut=_3(),T7r=cge(),S7r=lge(),b7r=yge(),C7r=Age();function A7r(t){let e=t.get(_7r.IInstantiationService),r=t.get(v7r.ICompletionsTextDocumentManagerService),n=t.get(y7r.ICompletionsRecentEditsProviderService);return(0,Df.jsxs)(Df.Fragment,{children:[(0,Df.jsxs)(lut.StableCompletionsContext,{children:[(0,Df.jsx)(T7r.DocumentMarker,{tdms:r,weight:.7}),(0,Df.jsx)(C7r.Traits,{weight:.6}),(0,Df.jsx)(E7r.CodeSnippets,{tdms:r,weight:.9}),(0,Df.jsx)(b7r.SimilarFiles,{tdms:r,instantiationService:e,weight:.8})]}),(0,Df.jsx)(uut.DocumentSuffix,{weight:1}),(0,Df.jsx)(lut.AdditionalCompletionsContext,{children:(0,Df.jsx)(S7r.RecentEdits,{tdms:r,recentEditsProvider:n,weight:.99})}),(0,Df.jsx)(uut.DocumentPrefix,{weight:1})]})}});var mut=m(fH=>{"use strict";Object.defineProperty(fH,"__esModule",{value:!0});fH.SplitContextPromptRenderer=void 0;var x7r=Zme(),w7r=m3(),dH=age(),fut=_3(),put=ige(),hut=0;function I7r(){hut=0}function P7r(){return hut++}var wge=class extends dH.CompletionsPromptRenderer{constructor(){super(...arguments),this.formatPrefix=put.makePrefixPrompt,this.formatContext=put.makeContextPrompt}processSnapshot(e,r){let n=[],o=[],s=[],a=!1;if(I7r(),new x7r.SnapshotWalker(e,R7r).walkSnapshot((u,d,f)=>{if(u===e||(u.statistics.updateDataTimeMs&&u.statistics.updateDataTimeMs>0&&s.push({componentPath:u.path,updateDataTimeMs:u.statistics.updateDataTimeMs}),u.name===fut.BeforeCursor.name&&(a=!0),u.value===void 0||u.value===""))return!0;let p=f.chunks,h=f.type;if(h==="suffix")o.push({value:(0,dH.normalizeLineEndings)(u.value),type:"suffix",weight:f.weight,componentPath:u.path,nodeStatistics:u.statistics,chunks:p,source:f.source});else{let _=h==="prefix",g=_||u.value.endsWith(r)?u.value:u.value+r;n.push({type:_?"prefix":"context",value:(0,dH.normalizeLineEndings)(g),weight:f.weight,componentPath:u.path,nodeStatistics:u.statistics,chunks:p,source:f.source,index:_?void 0:f.index})}return!0}),!a)throw new Error(`Node of type ${fut.BeforeCursor.name} not found`);if(o.length>1)throw new Error("Only one suffix is allowed");let l=o.length===1?o[0]:{componentPath:"",value:"",weight:1,nodeStatistics:{},type:"suffix"};return{prefixBlocks:n,suffixBlock:l,componentStatistics:s}}};fH.SplitContextPromptRenderer=wge;var R7r=[...dH.transformers,(t,e,r)=>(0,w7r.isContextNode)(t)?{...r,index:P7r()}:r]});var gut=m(pH=>{"use strict";Object.defineProperty(pH,"__esModule",{value:!0});pH.getTraitsFromContextItems=L7r;pH.ReportTraitsTelemetry=U7r;var O7r=Ps(),M7r=ib(),N7r=wV();function L7r(t,e,r){let n=(0,N7r.filterContextItemsByType)(r,"Trait");for(let s of n)k7r(t,e,s.data,s.providerId);return n.flatMap(s=>s.data).sort((s,a)=>(s.importance??0)-(a.importance??0))}function k7r(t,e,r,n){let o=t.get(M7r.ICompletionsContextProviderService).getStatisticsForCompletion(e);r.forEach(s=>{o.addExpectations(n,[[s,"included"]])})}var D7r=new Map([["TargetFrameworks","targetFrameworks"],["LanguageVersion","languageVersion"]]);function U7r(t,e,r,n,o,s){if(r.length>0){let a={};a.detectedLanguageId=n,a.languageId=o;for(let l of r){let u=D7r.get(l.name);u&&(a[u]=l.value)}let c=s.extendedBy(a,{});return(0,O7r.telemetry)(t,e,c)}}});var av=m(il=>{"use strict";var yut=il&&il.__decorate||function(t,e,r,n){var o=arguments.length,s=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(o<3?a(s):o>3?a(e,r,s):a(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},pd=il&&il.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(il,"__esModule",{value:!0});il.TestComponentsCompletionsPromptFactory=il.ComponentsCompletionsPromptFactory=il.PromptOrdering=void 0;il.isCompletionRequestData=eUr;var Ym=zm(),Oge=An(),Eut=GS(),q7r=Bi(),Mge=Nr(),Tut=RT(),_ut=Rlt(),F7r=Ps(),j7r=Xl(),B7r=Yme(),$7r=m3(),V7r=age(),Sut=MV(),H7r=_3(),G7r=cge(),z7r=lge(),W7r=yge(),K7r=dut(),Y7r=mut(),Q7r=Age(),hH=OV(),Z7r=Kme(),vut=gut(),Nge=ib(),Dp=AP(),J7r=cH(),X7r=bP();function eUr(t){if(!t||typeof t!="object")return!1;let e=t;return!(!e.document||!e.position||e.position.line===void 0||e.position.character===void 0||!e.telemetryData)}var uv;(function(t){t.Default="default",t.SplitContext="splitContext"})(uv||(il.PromptOrdering=uv={}));var Ige={[uv.Default]:{promptFunction:but,renderer:V7r.CompletionsPromptRenderer},[uv.SplitContext]:{promptFunction:K7r.splitContextCompletionsPrompt,renderer:Y7r.SplitContextPromptRenderer}};function but(t){let e=t.get(j7r.ICompletionsTextDocumentManagerService),r=t.get(Mge.IInstantiationService),n=t.get(J7r.ICompletionsRecentEditsProviderService);return(0,Ym.jsxs)(Ym.Fragment,{children:[(0,Ym.jsxs)($7r.CompletionsContext,{children:[(0,Ym.jsx)(G7r.DocumentMarker,{tdms:e,weight:.7}),(0,Ym.jsx)(Q7r.Traits,{weight:.6}),(0,Ym.jsx)(B7r.CodeSnippets,{tdms:e,weight:.9}),(0,Ym.jsx)(W7r.SimilarFiles,{tdms:e,instantiationService:r,weight:.8}),(0,Ym.jsx)(z7r.RecentEdits,{tdms:e,recentEditsProvider:n,weight:.99})]}),(0,Ym.jsx)(H7r.CurrentFile,{weight:1})]})}var mH=class{constructor(e,r,n,o,s,a,c,l){this.instantiationService=n,this.completionsTelemetryService=o,this.ignoreService=s,this.contextProviderBridge=a,this.logTarget=c,this.contextProviderStatistics=l,this.promptOrdering=r??uv.Default,this.virtualPrompt=e??new _ut.VirtualPrompt(this.completionsPrompt()),this.pipe=this.virtualPrompt.createPipe(),this.renderer=this.getRenderer()}async prompt(e,r){try{return await this.createPromptUnsafe(e,r)}catch(n){return this.errorPrompt(n)}}async createPromptUnsafe({completionId:e,completionState:r,telemetryData:n,promptOpts:o},s){let{maxPromptLength:a,suffixPercent:c,suffixMatchThreshold:l}=this.instantiationService.invokeFunction(Dp.getPromptOptions,n,r.textDocument.detectedLanguageId),u=await this.failFastPrompt(r.textDocument,r.position,c,s);if(u)return u;let d=o?.separateContext?uv.SplitContext:uv.Default;this.setPromptOrdering(d);let f=performance.now(),{traits:p,codeSnippets:h,turnOffSimilarFiles:_,resolvedContextItems:g}=await this.resolveContext(e,r,n,s,o);if(await this.updateComponentData(r.textDocument,r.position,p,h,n,_,a,s,o,l,o?.tokenizer),s?.isCancellationRequested)return Dp._promptCancelled;let v=this.virtualPrompt.snapshot(s),E=v.status;if(E==="cancelled")return Dp._promptCancelled;if(E==="error")return this.errorPrompt(v.error);let y=this.renderer.render(v.snapshot,{delimiter:`
`,tokenizer:o?.tokenizer,promptTokenLimit:a,suffixPercent:c,languageId:r.textDocument.detectedLanguageId},s);if(y.status==="cancelled")return Dp._promptCancelled;if(y.status==="error")return this.errorPrompt(y.error);let[S,b]=(0,Dp.trimLastLine)(y.prefix),w={...y,prefix:S},P,A=r.textDocument.detectedLanguageId;if(this.instantiationService.invokeFunction(hH.useContextProviderAPI,A,n)){let L=(0,Nge.componentStatisticsToPromptMatcher)(y.metadata.componentStatistics);this.contextProviderStatistics.getStatisticsForCompletion(e).computeMatch(L),P=(0,hH.telemetrizeContextItems)(this.contextProviderStatistics,e,g),Oge.logger.debug(this.logTarget,`Context providers telemetry: '${JSON.stringify(P)}'`)}let O=performance.now();return this.resetIfEmpty(y),this.successPrompt(w,O,f,b,P)}async updateComponentData(e,r,n,o,s,a,c,l,u={},d,f){let p=this.createRequestData(e,r,s,l,u,c,n,o,a,d,f);await this.pipe.pump(p)}async resolveContext(e,r,n,o,s={}){let a=[],c,l,u=!1;if(this.instantiationService.invokeFunction(hH.useContextProviderAPI,r.textDocument.detectedLanguageId,n)){a=await this.contextProviderBridge.resolution(e);let{textDocument:d}=r,f=a.filter(hH.matchContextItems);this.instantiationService.invokeFunction(tUr,d.detectedLanguageId,f,n)||(u=!0),c=await this.instantiationService.invokeFunction(vut.getTraitsFromContextItems,e,f),this.instantiationService.invokeFunction(vut.ReportTraitsTelemetry,"contextProvider.traits",c,d.detectedLanguageId,d.detectedLanguageId,n),l=await this.instantiationService.invokeFunction(Z7r.getCodeSnippetsFromContextItems,e,f,d.detectedLanguageId)}return{traits:c,codeSnippets:l,turnOffSimilarFiles:u,resolvedContextItems:a}}async failFastPrompt(e,r,n,o){if(o?.isCancellationRequested)return Dp._promptCancelled;if(await this.ignoreService.isCopilotIgnored(q7r.URI.parse(e.uri)))return Dp._copilotContentExclusion;if((n>0?e.getText().length:e.offsetAt(r))<Dp.MIN_PROMPT_CHARS)return Dp._contextTooShort}createRequestData(e,r,n,o,s,a,c,l,u,d,f){return{document:e,position:r,telemetryData:n,cancellationToken:o,data:s.data,traits:c,codeSnippets:l,turnOffSimilarFiles:u,suffixMatchThreshold:d,maxPromptTokens:a,tokenizer:f}}resetIfEmpty(e){e.prefix.length===0&&e.suffix.length===0&&this.reset()}successPrompt(e,r,n,o,s){return{type:"prompt",prompt:{prefix:e.prefix,prefixTokens:e.prefixTokens,suffix:e.suffix,suffixTokens:e.suffixTokens,context:e.context,isFimEnabled:e.suffix.length>0},computeTimeMs:r-n,trailingWs:o,neighborSource:new Map,metadata:e.metadata,contextProvidersTelemetry:s}}errorPrompt(e){return(0,F7r.telemetryException)(this.completionsTelemetryService,e,"PromptComponents.CompletionsPromptFactory"),this.reset(),Dp._promptError}reset(){this.renderer=this.getRenderer(),this.virtualPrompt=new _ut.VirtualPrompt(this.completionsPrompt()),this.pipe=this.virtualPrompt.createPipe()}setPromptOrdering(e){this.promptOrdering!==e&&(this.promptOrdering=e,this.reset())}completionsPrompt(){let e=Ige[this.promptOrdering]?.promptFunction??but;return this.instantiationService.invokeFunction(e)}getRenderer(){let e=Ige[this.promptOrdering]??Ige[uv.Default];return new e.renderer}};mH=yut([pd(2,Mge.IInstantiationService),pd(3,Tut.ICompletionsTelemetryService),pd(4,Eut.IIgnoreService),pd(5,Sut.ICompletionsContextProviderBridgeService),pd(6,Oge.ICompletionsLogTargetService),pd(7,Nge.ICompletionsContextProviderService)],mH);var Pge=class extends mH{constructor(e,r,n,o,s,a){super(void 0,void 0,e,r,n,o,s,a)}};il.ComponentsCompletionsPromptFactory=Pge;il.ComponentsCompletionsPromptFactory=Pge=yut([pd(0,Mge.IInstantiationService),pd(1,Tut.ICompletionsTelemetryService),pd(2,Eut.IIgnoreService),pd(3,Sut.ICompletionsContextProviderBridgeService),pd(4,Oge.ICompletionsLogTargetService),pd(5,Nge.ICompletionsContextProviderService)],Pge);var Rge=class extends mH{};il.TestComponentsCompletionsPromptFactory=Rge;function tUr(t,e,r,n){let o=["cpp","c"];return(0,X7r.isIncludeNeighborFilesActive)(t,e,n)||o.includes(e)||!r.some(a=>a.data.some(c=>c.type==="CodeSnippet"))}});var Fge=m(Sa=>{"use strict";var Cut=Sa&&Sa.__decorate||function(t,e,r,n){var o=arguments.length,s=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(o<3?a(s):o>3?a(e,r,s):a(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},Aut=Sa&&Sa.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(Sa,"__esModule",{value:!0});Sa.TestCompletionsPromptFactory=Sa.CompletionsPromptFactory=Sa.DEFAULT_PROMPT_TIMEOUT=Sa.ICompletionsPromptFactoryService=void 0;var rUr=cm(),xut=Nr(),Lge=AP(),nUr=av(),iUr=Qe();Sa.ICompletionsPromptFactoryService=(0,iUr.createServiceIdentifier)("ICompletionsPromptFactoryService");var kge=class{constructor(e){this.delegate=e}async prompt(e,r){return this.lastPromise=this.promptAsync(e,r),this.lastPromise}async promptAsync(e,r){if(await this.lastPromise,r?.isCancellationRequested)return Lge._promptCancelled;try{return await this.delegate.prompt(e,r)}catch{return Lge._promptError}}};Sa.DEFAULT_PROMPT_TIMEOUT=1200;var Dge=class{constructor(e){this.delegate=e}async prompt(e,r){let n=new rUr.CancellationTokenSource,o=n.token;return r?.onCancellationRequested(()=>{n.cancel()}),await Promise.race([this.delegate.prompt(e,o),new Promise(s=>{setTimeout(()=>{n.cancel(),s(Lge._promptTimeout)},Sa.DEFAULT_PROMPT_TIMEOUT)})])}},gH=class{constructor(e,r,n){this.delegate=new kge(new Dge(n.createInstance(nUr.TestComponentsCompletionsPromptFactory,e,r)))}prompt(e,r){return this.delegate.prompt(e,r)}};gH=Cut([Aut(2,xut.IInstantiationService)],gH);var Uge=class extends gH{constructor(e){super(void 0,void 0,e)}};Sa.CompletionsPromptFactory=Uge;Sa.CompletionsPromptFactory=Uge=Cut([Aut(0,xut.IInstantiationService)],Uge);var qge=class extends gH{};Sa.TestCompletionsPromptFactory=qge});var AP=m(Ds=>{"use strict";Object.defineProperty(Ds,"__esModule",{value:!0});Ds._promptTimeout=Ds._promptCancelled=Ds._promptError=Ds._copilotContentExclusion=Ds._contextTooShort=Ds.MIN_PROMPT_CHARS=void 0;Ds.trimLastLine=dUr;Ds.extractPrompt=fUr;Ds.getPromptOptions=mUr;var oUr=u3(),sUr=Wa(),wut=$V(),aUr=aP(),cUr=Xl(),lUr=Fge(),uUr=bP();Ds.MIN_PROMPT_CHARS=10;Ds._contextTooShort={type:"contextTooShort"};Ds._copilotContentExclusion={type:"copilotContentExclusion"};Ds._promptError={type:"promptError"};Ds._promptCancelled={type:"promptCancelled"};Ds._promptTimeout={type:"promptTimeout"};function dUr(t){let e=t.split(`
`),r=e[e.length-1],n=r.length-r.trimEnd().length,o=t.slice(0,t.length-n),s=t.slice(o.length);return[r.length===n?o:t,s]}function fUr(t,e,r,n,o,s={}){let c=t.get(cUr.ICompletionsTextDocumentManagerService).findNotebook(r.textDocument),l=c?.getCellFor(r.textDocument);return c&&l&&(r=hUr(r,c,l)),n.extendWithConfigProperties(t),n.sanitizeKeys(),t.get(lUr.ICompletionsPromptFactoryService).prompt({completionId:e,completionState:r,telemetryData:n,promptOpts:{...s,separateContext:!0}},o)}function pUr(t,e){let r=t.document.detectedLanguageId,n=t.document.getText();return r===e?n:(0,oUr.commentBlockAsSingles)(n,e)}function hUr(t,e,r){let o=e.getCells().filter(c=>c.index<r.index&&(0,uUr.considerNeighborFile)(r.document.detectedLanguageId,c.document.detectedLanguageId)),s=o.length>0?o.map(c=>pUr(c,r.document.detectedLanguageId)).join(`

`)+`

`:"",a={line:0,character:0};return t.applyEdits([{newText:s,range:{start:a,end:a}}])}function mUr(t,e,r){let n=t.get(sUr.ICompletionsFeaturesService),s=n.maxPromptCompletionTokens(e)-(0,aUr.getMaxSolutionTokens)(),a=(0,wut.getNumberOfSnippets)(e,r),c=(0,wut.getSimilarFilesOptions)(t,e,r),l=n.suffixPercent(e),u=n.suffixMatchThreshold(e);if(l<0||l>100)throw new Error(`suffixPercent must be between 0 and 100, but was ${l}`);if(u<0||u>100)throw new Error(`suffixMatchThreshold must be between 0 and 100, but was ${u}`);return{maxPromptLength:s,similarFilesOptions:c,numberOfSnippets:a,suffixPercent:l,suffixMatchThreshold:u}}});var Put=m(jge=>{"use strict";Object.defineProperty(jge,"__esModule",{value:!0});jge.isRepetitive=_Ur;var gUr=[{max_token_sequence_length:1,last_tokens_to_consider:10},{max_token_sequence_length:10,last_tokens_to_consider:30},{max_token_sequence_length:20,last_tokens_to_consider:45},{max_token_sequence_length:30,last_tokens_to_consider:60}];function _Ur(t){let e=t.slice();return e.reverse(),Iut(e)||Iut(e.filter(r=>r.trim().length>0))}function Iut(t){let e=vUr(t);for(let r of gUr){if(t.length<r.last_tokens_to_consider)continue;if(r.last_tokens_to_consider-1-e[r.last_tokens_to_consider-1]<=r.max_token_sequence_length)return!0}return!1}function vUr(t){let e=Array(t.length).fill(0);e[0]=-1;let r=-1;for(let n=1;n<t.length;n++){for(;r>=0&&t[r+1]!==t[n];)r=e[r];t[r+1]===t[n]&&r++,e[n]=r}return e}});var Out=m(E3=>{"use strict";Object.defineProperty(E3,"__esModule",{value:!0});E3.maybeSnipCompletionImpl=Rut;E3.postProcessChoiceInContext=AUr;E3.checkSuffix=xUr;var yUr=KS(),EUr=An(),lb=Ps(),TUr=Put();function SUr(t,e,r,n){let o="}";try{o=(0,yUr.getBlockCloseToken)(e.detectedLanguageId)??"}"}catch{}return Rut({getLineText:s=>e.lineAt(s).text,getLineCount:()=>e.lineCount},r,n,o)}function Rut(t,e,r,n){let o=bUr(r),s=o.lines;if(s.length===1)return r;for(let a=1;a<s.length;a++){let c=!0,l=0,u=0;for(let d=0;d+a+u<s.length;d++){let f;for(;;){let g=e.line+1+d+l;if(f=g>=t.getLineCount()?void 0:t.getLineText(g),f!==void 0&&f.trim()==="")l++;else break}let p,h;for(;p=a+d+u,h=p>=s.length?void 0:s[p],h!==void 0&&h.trim()==="";)u++;let _=p===s.length-1;if(!h||!(f&&(_?f.startsWith(h)||h.startsWith(f):f===h&&h.trim()===n))){c=!1;break}}if(c)return s.slice(0,a).join(o.newLineCharacter)}return r}function bUr(t){let e=t.includes(`\r
`)?`\r
`:`
`;return{lines:t.split(e),newLineCharacter:e}}function CUr(t,e,r,n){let o="",s=e.line+1,a=n?r.trim():r;for(;o===""&&s<t.lineCount;){if(o=t.lineAt(s).text,n&&(o=o.trim()),o===a)return!0;s++}return!1}function AUr(t,e,r,n,o,s){let a=t.get(EUr.ICompletionsLogTargetService);if((0,TUr.isRepetitive)(n.tokens)){let l=lb.TelemetryData.createAndMarkAsIssued();l.extendWithRequestId(n.requestId),(0,lb.telemetry)(t,"repetition.detected",l,lb.TelemetryStore.Enhanced),s.info(a,"Filtered out repetitive solution");return}let c={...n};if(CUr(e,r,c.completionText,!o)){let l=lb.TelemetryData.createAndMarkAsIssued();l.extendWithRequestId(n.requestId),(0,lb.telemetry)(t,"completion.alreadyInDocument",l),(0,lb.telemetry)(t,"completion.alreadyInDocument",l.extendedBy({completionTextJson:JSON.stringify(c.completionText)}),lb.TelemetryStore.Enhanced),s.info(a,"Filtered out solution matching next line");return}return c.completionText=SUr(t,e,r,c.completionText),c.completionText?c:void 0}function xUr(t,e,r){let o=t.lineAt(e.line).text.substring(e.character);if(o.length>0){if(r.completionText.indexOf(o)!==-1)return o.length;{let s=-1,a=0;for(let c of o){let l=r.completionText.indexOf(c,s+1);if(l>s)a++,s=l;else break}return a}}return 0}});var Mut=m(_H=>{"use strict";Object.defineProperty(_H,"__esModule",{value:!0});_H.contextualFilterCharacterMap=void 0;_H.contextualFilterCharacterMap={" ":1,"!":2,'"':3,"#":4,$:5,"%":6,"&":7,"'":8,"(":9,")":10,"*":11,"+":12,",":13,"-":14,".":15,"/":16,0:17,1:18,2:19,3:20,4:21,5:22,6:23,7:24,8:25,9:26,":":27,";":28,"<":29,"=":30,">":31,"?":32,"@":33,A:34,B:35,C:36,D:37,E:38,F:39,G:40,H:41,I:42,J:43,K:44,L:45,M:46,N:47,O:48,P:49,Q:50,R:51,S:52,T:53,U:54,V:55,W:56,X:57,Y:58,Z:59,"[":60,"\\":61,"]":62,"^":63,_:64,"`":65,a:66,b:67,c:68,d:69,e:70,f:71,g:72,h:73,i:74,j:75,k:76,l:77,m:78,n:79,o:80,p:81,q:82,r:83,s:84,t:85,u:86,v:87,w:88,x:89,y:90,z:91,"{":92,"|":93,"}":94,"~":95}});var Nut=m(Bge=>{"use strict";Object.defineProperty(Bge,"__esModule",{value:!0});Bge.multilineModelPredict=wUr;function wUr(t){let e;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>427.50000000000006?t[9]>13.500000000000002?t[121]>1e-35?e=-.3793786744885956:t[149]>1e-35?e=-.34717430705356905:e=-.26126834451035963:e=-.2431318366096852:t[5]>888.5000000000001?e=-.20600463586387135:e=-.2568037008471491:t[308]>1e-35?e=-.2363064824497454:t[8]>370.50000000000006?e=-.37470755210284723:e=-.321978453730494:t[3]>24.500000000000004?t[23]>1e-35?t[131]>1e-35?e=-.26259136509758885:e=-.3096719634039438:t[4]>30.500000000000004?t[9]>18.500000000000004?e=-.34254903852890883:t[2]>98.50000000000001?e=-.41585250791146294:e=-.3673574858887241:t[9]>6.500000000000001?e=-.31688079287876225:t[31]>1e-35?e=-.29110977864003823:t[308]>1e-35?e=-.3201411739040839:e=-.36874023066055506:t[8]>691.5000000000001?t[82]>1e-35?e=-.41318393149040566:t[133]>1e-35?e=-.3741272613525161:t[32]>1e-35?e=-.4112378041027121:t[227]>1e-35?e=-.37726615155719356:t[10]>3.5000000000000004?e=-.3164502293560397:e=-.2930071546509045:t[9]>13.500000000000002?e=-.277366858539218:t[308]>1e-35?t[4]>10.500000000000002?e=-.30975610686807187:t[4]>1.5000000000000002?e=-.2549142136728043:e=-.3271325650785176:t[127]>1e-35?t[0]>1937.5000000000002?e=-.2533046188098832:e=-.325520883579:e=-.331628896481776;let r;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>546.5000000000001?t[9]>13.500000000000002?r=.031231253521808708:r=.05380836288014532:t[5]>423.00000000000006?t[8]>114.50000000000001?r=.06751619128429062:r=.09625089153176467:r=.027268163053989804:t[308]>1e-35?r=.060174483556283756:r=-.049062854038919135:t[3]>24.500000000000004?t[23]>1e-35?t[4]>63.50000000000001?r=-.03969241799174589:r=.01086816842550381:t[31]>1e-35?r=-.003284694817583201:t[9]>6.500000000000001?t[4]>30.500000000000004?r=-.04224490699947552:r=-.011834162944360616:t[308]>1e-35?t[32]>1e-35?r=-.13448447971850278:r=-.019569456707046823:t[19]>1e-35?t[9]>1.5000000000000002?r=-.07256260662659254:t[4]>60.50000000000001?r=-.08227503453609311:r=-.020596416747563847:r=-.07396549241564149:t[8]>691.5000000000001?t[82]>1e-35?r=-.10046536995362734:t[133]>1e-35?r=-.06407649822752297:t[225]>1e-35?r=.08035785003303324:t[92]>1e-35?r=.018901360933204676:t[20]>1e-35?r=.05252546973665552:t[8]>2592.5000000000005?r=-.040543705016462955:r=-.011236043818320725:t[9]>17.500000000000004?r=.025560632674895334:t[308]>1e-35?t[0]>1847.5000000000002?r=.03527165701669741:r=-.0071847350825815035:t[127]>1e-35?r=.024373016379595405:t[9]>2.5000000000000004?r=-.0035090719709448288:r=-.03514829488063766;let n;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>546.5000000000001?n=.03848674861536988:t[5]>423.00000000000006?t[8]>114.50000000000001?t[9]>56.50000000000001?n=-.003764520033319488:n=.06570817919969299:t[4]>61.50000000000001?n=.028346156293069538:n=.0908154644362606:n=.02445594243234816:t[308]>1e-35?t[8]>65.50000000000001?n=.0019305229020073053:n=.09279357295883772:n=-.04458984161917124:t[3]>24.500000000000004?t[23]>1e-35?n=.0027405390271277013:t[4]>29.500000000000004?t[52]>1e-35?n=.044727478132905285:t[115]>1e-35?n=.10245804828855934:t[9]>17.500000000000004?n=-.03353173647469207:t[2]>98.50000000000001?n=-.10048106638102179:n=-.05484231104348874:t[31]>1e-35?n=.016807537467116516:t[9]>6.500000000000001?n=-.012113620535295137:t[4]>8.500000000000002?t[308]>1e-35?n=-.01882594250504289:n=-.05585658862796076:n=.04279591277938338:t[8]>691.5000000000001?t[82]>1e-35?n=-.09262278043707878:t[133]>1e-35?n=-.058454257768893625:t[32]>1e-35?n=-.09769348447126434:t[25]>1e-35?n=-.0725430043727677:t[122]>1e-35?n=-.10047841601578077:n=-.00580671054458958:t[9]>13.500000000000002?n=.021399199032818294:t[308]>1e-35?t[4]>10.500000000000002?n=-.0076376731757173515:n=.03394923033036848:t[127]>1e-35?n=.02070489091204209:n=-.02290162726126496;let o;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>892.5000000000001?t[9]>21.500000000000004?o=.010230295672324606:o=.038540509248742805:t[8]>125.50000000000001?t[1]>49.50000000000001?o=.03086356292895467:o=.057128750867458604:t[5]>888.5000000000001?o=.07861602941396924:o=.030523262699070908:t[308]>1e-35?o=.048236117667577356:t[8]>370.50000000000006?o=-.05642125069212264:o=-.007232836777168195:t[3]>24.500000000000004?t[23]>1e-35?t[131]>1e-35?o=.03640661467213915:o=-.005889820723907028:t[31]>1e-35?o=-.0009007166998276938:t[9]>6.500000000000001?o=-.022590340093882378:t[308]>1e-35?t[32]>1e-35?o=-.1215445089091064:o=-.01435612266219722:t[19]>1e-35?t[9]>1.5000000000000002?o=-.061555513040777825:t[4]>60.50000000000001?o=-.07053475504569347:o=-.013733369453963092:o=-.06302097189114152:t[227]>1e-35?o=-.05820440333190048:t[8]>683.5000000000001?t[82]>1e-35?o=-.08466979526809346:t[10]>24.500000000000004?o=-.017092159721119944:t[92]>1e-35?o=.03592901452463749:o=-.00359310519524756:t[5]>1809.5000000000002?t[243]>1e-35?o=-.03963116207386097:t[118]>1e-35?o=-.09483996283536394:t[217]>1e-35?o=-.03394542089519989:t[242]>1e-35?o=-.07985899422287938:o=.019706602160656964:t[9]>12.500000000000002?o=.014072998937735146:o=-.021156294523894684;let s;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>892.5000000000001?t[9]>21.500000000000004?s=.009197756540516563:s=.03458896869535166:t[5]>5082.500000000001?s=.08265545468131008:t[131]>1e-35?s=.0740738432473315:s=.045159136632942756:t[8]>319.50000000000006?s=-.04653401534465376:t[7]>3.5000000000000004?t[0]>1230.5000000000002?t[0]>2579.5000000000005?s=-.011400839766681709:s=.11149800187510031:s=-.08683250977599462:s=.08355310136724753:t[4]>23.500000000000004?t[23]>1e-35?t[131]>1e-35?s=.040389083779932555:s=-.009887614274108602:t[52]>1e-35?s=.03705353499757327:t[9]>6.500000000000001?s=-.025401260429257562:t[2]>98.50000000000001?s=-.09237673187534504:s=-.04298556869281803:t[222]>1e-35?s=-.045221965895986184:t[8]>691.5000000000001?t[133]>1e-35?s=-.05435318330148897:t[128]>1e-35?s=-.08672907303184191:t[227]>1e-35?s=-.05568304584186561:t[122]>1e-35?s=-.09623059693538563:t[225]>1e-35?s=.07558331642202279:t[82]>1e-35?s=-.07360566227233566:s=-.005646164647395919:t[242]>1e-35?s=-.08203758341228108:t[9]>13.500000000000002?s=.018726123829696042:t[308]>1e-35?t[4]>10.500000000000002?s=-.011153942154062704:s=.03132858912391067:t[127]>1e-35?s=.021455228822345174:t[23]>1e-35?s=.01959966745346997:s=-.021764790177579325;let a;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>284.50000000000006?t[121]>1e-35?t[18]>1e-35?a=.07547602514276922:a=-.08529678832140396:a=.030314822344598043:t[5]>888.5000000000001?t[4]>61.50000000000001?a=.011143589009415464:a=.0654700456802118:a=.021794712646632755:t[308]>1e-35?a=.04231872551095028:a=-.034381999950549455:t[4]>23.500000000000004?t[23]>1e-35?t[4]>63.50000000000001?a=-.03678981254332261:a=.010518160384496255:t[8]>825.5000000000001?a=-.04506534842082387:t[9]>38.50000000000001?a=.01004983052203438:a=-.030580958620701027:t[39]>1e-35?a=-.12802435021505382:t[8]>691.5000000000001?t[23]>1e-35?t[203]>1e-35?t[4]>6.500000000000001?a=.030426957004611704:a=-.0726407693060581:a=.017395521646964375:t[4]>7.500000000000001?t[0]>93.50000000000001?t[9]>7.500000000000001?a=-.008024349629981291:t[31]>1e-35?a=.01296539930850471:t[308]>1e-35?a=-.012855016509024084:a=-.04564527976851505:a=-.15681420504058596:t[10]>4.500000000000001?t[243]>1e-35?a=-.1012064426380198:a=-.0062808850924854194:a=.030706323726162416:t[9]>13.500000000000002?a=.017081636133736405:t[308]>1e-35?t[4]>10.500000000000002?a=-.009306613091760644:t[4]>1.5000000000000002?a=.03655523200850989:a=-.02671654212893341:t[127]>1e-35?a=.019261510468604387:a=-.017627818570628936;let c;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>892.5000000000001?t[308]>1e-35?c=.036100405995889276:c=.011709313297015793:t[0]>119.50000000000001?t[8]>125.50000000000001?c=.03622542297472574:c=.05595579157301536:c=-.02234751038146796:t[8]>319.50000000000006?c=-.040132029478400735:t[7]>3.5000000000000004?t[0]>1230.5000000000002?t[0]>2579.5000000000005?c=-.009306153573847916:c=.10058509567064988:c=-.0785668890966017:t[9]>28.500000000000004?c=-.04781977604130416:c=.09753292614937459:t[4]>23.500000000000004?t[131]>1e-35?c=.02372493254975127:t[148]>1e-35?c=.028103095989516644:t[4]>58.50000000000001?t[10]>1e-35?c=-.05000852203469597:c=.02922366846119705:t[23]>1e-35?c=-.0026335076988151292:c=-.03073993752935585:t[222]>1e-35?c=-.03867374428185713:t[32]>1e-35?c=-.07220729365053084:t[39]>1e-35?c=-.11624524614351733:t[8]>691.5000000000001?t[133]>1e-35?c=-.04836360271198036:t[8]>4968.500000000001?c=-.10873681915578029:t[149]>1e-35?c=-.11847484033769298:t[122]>1e-35?c=-.08916172460307559:t[82]>1e-35?c=-.06774726602152634:c=-.0033469147714351327:t[126]>1e-35?c=-.09474445392080015:t[8]>131.50000000000003?t[118]>1e-35?c=-.09002547031023511:c=.015475385187009489:t[25]>1e-35?c=-.08175501232759151:c=-.000429679055394914;let l;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>546.5000000000001?l=.021942996005324917:l=.042349138084484074:t[308]>1e-35?l=.036507270845732874:l=-.028981850556764995:t[3]>24.500000000000004?t[23]>1e-35?l=.00210930790963475:t[31]>1e-35?l=.006825358293027163:t[9]>6.500000000000001?l=-.013772084269062394:t[308]>1e-35?l=-.008307929099892574:t[19]>1e-35?l=-.027706313312904487:l=-.04891108984170914:t[134]>1e-35?l=-.0605730733844732:t[25]>1e-35?l=-.05347926493253117:t[227]>1e-35?l=-.049415829249003666:t[32]>1e-35?l=-.06807799662179595:t[308]>1e-35?t[4]>10.500000000000002?t[2]>13.500000000000002?l=-.00016302718260794637:l=-.10247095758122947:t[210]>1e-35?l=-.022149002072787024:t[95]>1e-35?l=.15222631630626304:l=.027393884520465712:t[9]>7.500000000000001?t[225]>1e-35?l=.13483346577752245:t[3]>9.500000000000002?t[243]>1e-35?l=-.045352728133789516:t[8]>683.5000000000001?l=.00474372227519902:l=.02635476098707525:t[92]>1e-35?l=.05659380819933452:t[105]>1e-35?l=.07431443210341222:t[186]>1e-35?l=.0915821133384904:l=-.016414750130401053:t[127]>1e-35?l=.011824693641866162:t[23]>1e-35?l=.0228468674288774:t[284]>1e-35?l=.06606936863302432:l=-.02872463273902358;let u;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>125.50000000000001?t[288]>1e-35?u=-.019844363904157558:t[1]>50.50000000000001?t[131]>1e-35?u=.044961338592245194:u=.003659599513761676:t[121]>1e-35?u=-.04057103630479994:u=.03158560697078578:t[0]>421.50000000000006?t[4]>61.50000000000001?u=-.0003708603406529278:u=.05331312264472391:u=.0006575958601218936:t[8]>319.50000000000006?u=-.034654694051901545:t[7]>3.5000000000000004?t[0]>1230.5000000000002?t[0]>2579.5000000000005?u=-.0076053515916517005:u=.09116695486305336:u=-.07137458699162028:u=.06633130654035282:t[4]>29.500000000000004?t[23]>1e-35?t[4]>63.50000000000001?u=-.0308520802187302:u=.013156423968295541:t[115]>1e-35?u=.11581171687488252:t[52]>1e-35?t[10]>22.500000000000004?u=.12264179915175587:u=-.021905727233873535:t[8]>799.5000000000001?u=-.04181869575935412:u=-.023695901673350575:t[222]>1e-35?u=-.034612899265371776:t[8]>691.5000000000001?t[9]>98.50000000000001?u=-.06892116536821917:t[149]>1e-35?u=-.11194586444154514:t[133]>1e-35?u=-.04269583234000504:t[128]>1e-35?u=-.0644631966969502:t[8]>4968.500000000001?u=-.09650726096330133:u=-.004219129180139438:t[126]>1e-35?u=-.08038306745347751:t[5]>1809.5000000000002?u=.009265335288169993:t[9]>2.5000000000000004?u=.006447645462117438:u=-.021047132609551503;let d;t[13]>1e-35?t[3]>1.5000000000000002?t[9]>21.500000000000004?t[121]>1e-35?d=-.08436540015142402:t[8]>1861.5000000000002?d=-.01621425699342421:d=.01878613821895428:d=.031052879158242532:t[8]>319.50000000000006?d=-.031536619360997865:t[7]>3.5000000000000004?d=-.004510586962343298:d=.0596524941011746:t[4]>18.500000000000004?t[23]>1e-35?d=.004757490541310808:t[9]>6.500000000000001?d=-.008842393772207996:t[31]>1e-35?d=.0010536183837006993:t[308]>1e-35?d=-.008145882815435419:t[2]>98.50000000000001?d=-.08404937622173021:t[276]>1e-35?d=.0020072791321856663:t[19]>1e-35?d=-.023031820639490178:d=-.04553314326377875:t[8]>2134.5000000000005?d=-.02244583113572251:t[134]>1e-35?d=-.05592137394753121:t[308]>1e-35?t[49]>1e-35?d=.09989109704064947:t[4]>10.500000000000002?t[2]>13.500000000000002?d=-.00447733056482096:d=-.10191061664873849:d=.021765308380331864:t[9]>7.500000000000001?t[118]>1e-35?d=-.07570059131536411:t[243]>1e-35?d=-.040983393346598646:t[3]>9.500000000000002?d=.014763759061483812:t[92]>1e-35?d=.05136368898963024:d=-.008162398981149495:t[127]>1e-35?d=.013999119696708346:t[23]>1e-35?t[20]>1e-35?d=.14138985500120907:d=.008668274102844162:t[284]>1e-35?d=.06356484011042893:d=-.024781304572706303;let f;t[13]>1e-35?t[3]>8.500000000000002?t[8]>892.5000000000001?t[0]>384.50000000000006?f=.014387526569215037:t[8]>2266.5000000000005?f=-.1397298649743087:f=.007953931014097788:t[0]>119.50000000000001?t[4]>61.50000000000001?f=.0029819092211896296:t[218]>1e-35?f=.08450459375645737:f=.031646488019280654:f=-.03544960151460596:t[9]>9.500000000000002?f=-.026002317735915183:t[7]>1.5000000000000002?f=.005074258810794793:f=.0745247650477651:t[4]>29.500000000000004?t[131]>1e-35?f=.023269218675640847:t[148]>1e-35?f=.03812942399144545:t[115]>1e-35?f=.10512283476967227:f=-.02607307479736138:t[227]>1e-35?f=-.036576708299046294:t[101]>1e-35?f=.027948683650881864:t[149]>1e-35?f=-.08195628451594297:t[50]>1e-35?f=-.16997544922278504:t[8]>691.5000000000001?t[9]>101.50000000000001?f=-.06860333850762075:t[225]>1e-35?f=.06066641950951723:t[10]>22.500000000000004?t[1]>29.500000000000004?t[127]>1e-35?f=.028599705845427533:f=-.010746719511640914:t[0]>4877.500000000001?f=-.07251187886096228:f=-.021299712241446785:t[118]>1e-35?f=-.11902023760964736:f=15874469526809387e-21:t[8]>267.50000000000006?f=.01317292185402293:t[148]>1e-35?t[9]>20.500000000000004?f=.09614842415142123:f=.006049073167176467:t[189]>1e-35?f=.05562696451900713:f=-.006257541923837303;let p;t[13]>1e-35?t[9]>14.500000000000002?t[2]>11.500000000000002?t[1]>71.50000000000001?t[8]>1252.5000000000002?p=-.10069846585436666:p=-.010577995535809317:t[146]>1e-35?p=-.008877238274428668:t[280]>1e-35?p=.10076055897012692:t[6]>70.50000000000001?p=-.020603523042565547:t[7]>1.5000000000000002?p=.02819095420813202:p=-.1223354167911277:p=-.025073583348334844:t[8]>416.50000000000006?p=.01718560189149466:t[230]>1e-35?p=.12281803224342265:p=.03281276971308565:t[4]>14.500000000000002?t[23]>1e-35?t[21]>1e-35?p=-.13070568109867683:t[4]>63.50000000000001?p=-.027221825262496814:p=.01530862490082352:t[9]>6.500000000000001?t[5]>4320.500000000001?t[2]>31.500000000000004?p=-.00605574271293711:p=.04739407327741249:p=-.012537528620315956:t[31]>1e-35?t[20]>1e-35?p=.1252215087035768:p=.003905888677601057:t[52]>1e-35?p=.045466299731038815:t[2]>100.50000000000001?p=-.07815624550168065:t[308]>1e-35?p=-.007715815250508057:t[276]>1e-35?t[9]>1.5000000000000002?p=-.03538265083203445:t[18]>1e-35?p=.1591211669800727:p=.015151475408241136:t[8]>557.5000000000001?p=-.04225569725456342:p=-.022455546324243267:t[308]>1e-35?p=.01325441736085826:t[197]>1e-35?p=.03752194600682512:t[225]>1e-35?p=.06583712394533976:p=-.005205289866839043;let h;t[13]>1e-35?t[9]>21.500000000000004?t[2]>12.500000000000002?h=.010264022580774884:h=-.02335958814489217:t[8]>416.50000000000006?t[3]>4.500000000000001?t[295]>1e-35?h=-.0936747137352166:t[0]>384.50000000000006?h=.019846244507320695:h=-.0751102554077272:h=-.026885329334203723:t[0]>966.5000000000001?t[10]>48.50000000000001?h=.11654906890054273:h=.0346250587613322:t[4]>39.50000000000001?h=-.08568002378645614:t[9]>16.500000000000004?h=-.12010535752923689:h=.021321923389033808:t[4]>14.500000000000002?t[23]>1e-35?t[21]>1e-35?h=-.12056431231412057:t[131]>1e-35?h=.03652965550568472:h=.002563006128791669:t[9]>6.500000000000001?t[30]>1e-35?h=-.10141481732178981:h=-.003936457893178248:t[31]>1e-35?h=.008215898756249477:t[52]>1e-35?t[0]>4188.500000000001?h=.12972828769588213:h=-.003137412232297087:t[2]>100.50000000000001?h=-.0730872929087944:t[308]>1e-35?h=-.006958622747243333:t[35]>1e-35?t[0]>3707.5000000000005?h=.07934620723812878:h=-.018598568353702116:h=-.030635505446410763:t[128]>1e-35?h=-.06962290453843294:t[84]>1e-35?h=-.15290337844960322:t[308]>1e-35?t[8]>2543.5000000000005?h=-.034938657503885584:h=.016339322898966915:t[197]>1e-35?h=.03358907965870046:t[18]>1e-35?h=-.01754013791515288:h=-.0004944586067698557;let _;t[13]>1e-35?t[308]>1e-35?t[210]>1e-35?_=.005888790687820524:_=.0429676533834978:t[2]>7.500000000000001?t[0]>119.50000000000001?t[6]>79.50000000000001?_=-.0224319889201976:t[212]>1e-35?_=.06249587051783863:t[8]>963.5000000000001?t[8]>1156.5000000000002?_=.010357273289123324:_=-.029749145161304082:t[218]>1e-35?_=.06449336340743606:_=.018047654539345502:_=-.07350502390293116:_=-.019594829995832414:t[4]>39.50000000000001?_=-.019338083179859314:t[39]>1e-35?_=-.10427066919173111:t[222]>1e-35?t[0]>612.5000000000001?_=-.019197415255018464:_=-.0836562507048181:t[149]>1e-35?_=-.07679624472577429:t[32]>1e-35?_=-.05097506748590604:t[191]>1e-35?_=.04670476485250936:t[30]>1e-35?_=-.05313073892148652:t[8]>691.5000000000001?t[23]>1e-35?t[203]>1e-35?t[4]>8.500000000000002?_=.03930363008271334:_=-.06029171685615689:_=.016203086182431294:t[4]>7.500000000000001?_=-.013824248237085224:t[10]>4.500000000000001?t[94]>1e-35?_=-.09817668643367765:t[10]>40.50000000000001?_=-.023558078753593125:_=.0065113494780482326:t[8]>809.5000000000001?t[297]>1e-35?_=-.1352063548573715:_=.058203900441270634:_=-.035243959159285736:t[10]>59.50000000000001?t[1]>43.50000000000001?_=-.012552876807800442:_=.05991247777734298:_=.0035893102109330177;let g;t[13]>1e-35?t[9]>21.500000000000004?t[145]>1e-35?g=.03507251990078782:t[2]>14.500000000000002?g=.004905698363309292:t[8]>2421.5000000000005?g=-.10306119951984316:g=-.018951037816654928:t[8]>416.50000000000006?t[3]>4.500000000000001?t[295]>1e-35?g=-.08503171085833393:g=.015130974593044409:g=-.024425267075198206:g=.02624054905103126:t[4]>19.500000000000004?t[131]>1e-35?g=.02100191580704534:t[32]>1e-35?t[8]>2302.5000000000005?g=.09908783187786288:g=-.06920877329925636:t[8]>241.50000000000003?g=-.016756131804203496:t[9]>33.50000000000001?g=.04903179955263626:t[217]>1e-35?g=-.047416847619291644:g=-.0017200891991431119:t[39]>1e-35?g=-.10389927604977028:t[134]>1e-35?g=-.050480365434872866:t[178]>1e-35?g=-.05167855791556937:t[8]>2134.5000000000005?g=-.01663197335585307:t[242]>1e-35?g=-.05361323756615453:t[118]>1e-35?g=-.05299780866211368:t[10]>24.500000000000004?t[10]>55.50000000000001?t[8]>764.5000000000001?g=-.0016544848369620534:g=.04494144460483587:g=-.009283616456736156:t[121]>1e-35?t[0]>4463.500000000001?g=.051166688553608355:g=-.06623908820705383:t[84]>1e-35?g=-.12990936092409747:t[306]>1e-35?g=-.07020596855118943:t[49]>1e-35?g=.06272964802556856:t[192]>1e-35?g=.06540204627162581:g=.008277910531592885;let v;t[13]>1e-35?t[308]>1e-35?t[210]>1e-35?v=.003325460510319164:v=.037153108286272905:t[2]>12.500000000000002?t[1]>124.50000000000001?v=-.09880713344892134:t[7]>60.50000000000001?t[10]>71.50000000000001?v=.0697359767152808:t[230]>1e-35?v=.06513506845651572:v=-.02826625276613455:t[5]>246.50000000000003?t[8]>95.50000000000001?v=.013616385013146277:v=.04171540100223404:v=-.04360396575094823:t[212]>1e-35?v=.025945477945627522:v=-.019793208261535442:t[4]>39.50000000000001?t[25]>1e-35?v=-.07856453318384411:v=-.014803893522351739:t[39]>1e-35?v=-.09185452630751932:t[149]>1e-35?v=-.07122426086157027:t[134]>1e-35?v=-.04231052091434186:t[227]>1e-35?v=-.029815824273994197:t[50]>1e-35?v=-.15736496271211153:t[222]>1e-35?v=-.02360285356956629:t[128]>1e-35?v=-.03922080193836443:t[136]>1e-35?v=-.07219685327698587:t[10]>24.500000000000004?t[1]>8.500000000000002?v=-.0029736170756835783:v=-.06482902102259112:t[84]>1e-35?v=-.11340924635708383:t[94]>1e-35?v=-.03635703457792193:t[118]>1e-35?v=-.058181913914186034:t[126]>1e-35?v=-.062030576241517366:t[116]>1e-35?v=-.045086301850604006:t[25]>1e-35?v=-.031665223656767286:t[203]>1e-35?v=-.009444685731407691:v=.0112265153772187;let E;t[13]>1e-35?t[1]>64.50000000000001?t[9]>14.500000000000002?t[9]>54.50000000000001?E=.022717227245241684:E=-.049700413274686266:E=.007175776918589741:t[5]>50.50000000000001?t[8]>61.50000000000001?t[21]>1e-35?E=-.07927556792063156:t[3]>8.500000000000002?t[4]>23.500000000000004?t[281]>1e-35?E=-.12263724050601095:E=.0070743478891288035:t[288]>1e-35?E=-.050439138582109:E=.0255701593657891:E=-.005812703740580558:t[6]>49.50000000000001?E=-.008542694147899113:E=.035147383686665:E=-.0960461939274094:t[32]>1e-35?E=-.04555453745517765:t[222]>1e-35?t[0]>612.5000000000001?E=-.01800870272656664:E=-.07817304234604389:t[30]>1e-35?E=-.05227061750368981:t[25]>1e-35?t[0]>4449.500000000001?t[217]>1e-35?E=.08778416018479411:E=-.026563982720830256:E=-.05296139548112329:t[50]>1e-35?E=-.14926464875852247:t[8]>779.5000000000001?t[133]>1e-35?E=-.036572140520852024:t[183]>1e-35?E=-.10766853736801459:E=-.003966794968701808:t[217]>1e-35?t[5]>5237.500000000001?E=.09513215942486053:E=-.03641865277445567:t[10]>59.50000000000001?E=.03177172388687933:t[39]>1e-35?E=-.10234241303898953:t[243]>1e-35?E=-.02966738115984321:t[190]>1e-35?E=-.04312785336449181:t[118]>1e-35?E=-.05808521194081524:E=.006720381600740378;let y;t[308]>1e-35?t[5]>423.00000000000006?t[133]>1e-35?y=-.046284053681928526:t[210]>1e-35?y=49778070699847876e-21:t[13]>1e-35?y=.03328070054739309:t[128]>1e-35?y=-.054790214922938896:t[126]>1e-35?y=-.08524792218532945:y=.014414055975542446:t[1]>38.50000000000001?y=-.07287851335872973:y=.005263371501687163:t[9]>7.500000000000001?t[21]>1e-35?t[10]>4.500000000000001?y=-.12459748864088374:y=-.004626323021331593:t[298]>1e-35?t[4]>64.50000000000001?y=.13044981041138526:t[9]>71.50000000000001?y=-.056068402282406865:t[9]>12.500000000000002?y=.038957722962512764:y=-.04598815982492169:t[8]>691.5000000000001?t[126]>1e-35?y=-.0852126122372075:t[225]>1e-35?y=.10082066771689505:t[1]>161.50000000000003?y=-.11609832500613824:t[3]>8.500000000000002?t[8]>1685.5000000000002?y=-.010835400874777133:y=.004607419973807752:y=-.016989075258564062:y=.009205417251698097:t[23]>1e-35?t[20]>1e-35?y=.10184317139657878:t[0]>5724.500000000001?y=-.1163666496650542:t[1]>106.50000000000001?y=.1303850608190687:t[129]>1e-35?y=.10745031509534769:y=.006166901738036226:t[31]>1e-35?y=.010177092833155127:t[13]>1e-35?t[0]>213.50000000000003?y=.005004582564506611:y=-.10481581731668346:t[19]>1e-35?y=-.009850706427306281:y=-.02608226348051303;let S;t[13]>1e-35?t[1]>64.50000000000001?t[2]>4.500000000000001?S=-.0024117174588695603:S=-.058339700513831916:t[212]>1e-35?t[0]>2215.5000000000005?t[8]>847.5000000000001?t[10]>21.500000000000004?t[1]>39.50000000000001?S=.04575380761203418:S=-.10025595041353463:t[15]>1e-35?S=.17705790384964004:S=.0073813837628615014:S=.07676373681392407:S=-.027167992693885996:t[3]>11.500000000000002?t[280]>1e-35?S=.07078572910026419:t[4]>23.500000000000004?S=.005513918674164821:S=.0206586476926392:t[0]>5269.500000000001?S=.07706773525822633:S=-.010233826953776122:t[148]>1e-35?t[8]>1622.5000000000002?S=-.03204783603215824:S=.027405418223981973:t[4]>14.500000000000002?t[131]>1e-35?t[9]>1.5000000000000002?t[0]>5026.500000000001?S=-.0930246911392012:S=.011173087289703683:t[3]>24.500000000000004?S=.03281421918878597:S=.12449335091369843:t[204]>1e-35?S=.06634531187326123:S=-.011522999669353388:t[92]>1e-35?t[10]>42.50000000000001?S=-.041196758517013515:t[4]>7.500000000000001?S=-2942718111029724e-20:t[4]>6.500000000000001?S=.11953909558532852:S=.03188615019450534:t[122]>1e-35?S=-.0616037324662157:t[101]>1e-35?S=.027230889593349412:t[8]>4968.500000000001?S=-.1113986516540856:t[3]>2.5000000000000004?S=-.002045140426885727:t[129]>1e-35?S=.12641163374304432:S=.014909826232873194;let b;t[308]>1e-35?t[0]>7277.500000000001?b=-.09337446795435:t[5]>423.00000000000006?t[133]>1e-35?b=-.040884836258675006:t[210]>1e-35?b=-.0003719413278428804:t[13]>1e-35?b=.030287610160818174:b=.011174130013595384:t[1]>38.50000000000001?b=-.0662442170185784:b=.004332185707008564:t[9]>7.500000000000001?t[145]>1e-35?t[285]>1e-35?b=-.08092286307197555:b=.029866363328584986:t[21]>1e-35?t[10]>4.500000000000001?b=-.1155211149523894:b=-.0032903546638958538:t[149]>1e-35?b=-.03632198993199768:t[3]>9.500000000000002?t[8]>999.5000000000001?b=-.003507023626534306:t[128]>1e-35?t[4]>13.500000000000002?t[0]>3459.5000000000005?b=-.025416927789760076:b=.02777568919793122:b=-.10310351509769732:b=.013549608903688785:t[186]>1e-35?b=.08513865847420551:b=-.009306721292510369:t[31]>1e-35?b=.009780833952582307:t[23]>1e-35?b=.011143773934157629:t[210]>1e-35?b=.025354797285173356:t[17]>1e-35?t[10]>3.5000000000000004?b=-.04846287537743046:b=-.014647271080376757:t[2]>5.500000000000001?t[7]>57.50000000000001?b=-.034224938681445764:t[8]>1641.5000000000002?b=-.027298372075800673:t[191]>1e-35?t[10]>18.500000000000004?b=-.027950103994861836:b=.14575930827829034:b=-.007124740389354946:t[10]>22.500000000000004?b=.013173304107866726:b=-.11119620042551365;let w;t[131]>1e-35?w=.01892225243240137:t[308]>1e-35?t[5]>691.5000000000001?t[133]>1e-35?w=-.037118314390013646:t[1]>51.50000000000001?t[5]>3749.5000000000005?t[8]>58.50000000000001?w=-.022305242912035072:w=.024792895826340516:w=.013666137278072166:t[88]>1e-35?t[10]>27.500000000000004?w=.2080083584805785:w=.04247197078083379:t[10]>40.50000000000001?t[18]>1e-35?t[1]>27.500000000000004?w=.060783227455868206:w=-.056904865557409035:w=-.03278952553107572:t[192]>1e-35?w=.13117402617043625:w=.01647119888257836:w=-.01825870445636398:t[9]>6.500000000000001?t[298]>1e-35?w=.026536210945939682:t[8]>691.5000000000001?t[126]>1e-35?w=-.07927319604548912:t[10]>3.5000000000000004?t[21]>1e-35?w=-.11083976837572328:t[146]>1e-35?w=-.03359294484446772:w=-.0042815953591236475:t[190]>1e-35?w=-.09264239592903775:t[10]>1e-35?w=.022282638485105657:w=-.0205994057928458:t[5]>4918.500000000001?w=.03430715695199153:t[243]>1e-35?t[2]>57.50000000000001?w=.08935072241972036:w=-.03781647876237494:w=.0062655753179671515:t[31]>1e-35?w=.008603500300349887:t[230]>1e-35?w=.03350056932774173:t[23]>1e-35?t[241]>1e-35?w=.10277555508503314:w=.0017901817172993888:t[2]>98.50000000000001?w=-.05920081229672715:w=-.015722173275739208;let P;t[13]>1e-35?t[118]>1e-35?P=.07957905150112207:t[1]>125.50000000000001?P=-.0662620579858685:t[145]>1e-35?P=.029682040828779843:t[19]>1e-35?t[6]>15.500000000000002?P=-.0009597832580977798:P=-.081474760755753:t[212]>1e-35?P=.03637001492325179:P=.006912305498963309:t[32]>1e-35?P=-.03919900630910754:t[134]>1e-35?P=-.036225295529777886:t[4]>4.500000000000001?t[5]>384.50000000000006?t[204]>1e-35?P=.06671440854602108:t[136]>1e-35?P=-.07577364230133474:t[148]>1e-35?t[4]>7.500000000000001?P=.026430947016830915:P=-.04075501264495112:t[9]>93.50000000000001?P=-.04353169430417609:t[50]>1e-35?P=-.1411224537622882:t[17]>1e-35?t[49]>1e-35?P=.068392679163672:t[10]>1.5000000000000002?P=-.0209659792007492:P=-.0004393235559249831:t[133]>1e-35?t[9]>64.50000000000001?P=.07254524592323175:P=-.0319087835282534:P=.00037444813327793425:P=-.025138768151370408:t[243]>1e-35?P=-.050010891710502096:t[94]>1e-35?P=-.0817513550778599:t[122]>1e-35?P=-.061038875809822285:t[19]>1e-35?t[8]>1085.5000000000002?P=-.008408408775061623:t[2]>5.500000000000001?t[218]>1e-35?P=.1454877641381946:P=.053787998331240316:t[9]>33.50000000000001?P=.08602629796680285:P=-.03895127455803038:P=.008830878042315722;let A;t[131]>1e-35?A=.01687979707990516:t[8]>2915.5000000000005?t[297]>1e-35?A=.07473600489975568:t[0]>93.50000000000001?A=-.021596848506011502:A=-.13840802327735696:t[230]>1e-35?t[4]>6.500000000000001?t[0]>4977.500000000001?A=.10264284346448256:A=.031042487183181262:A=-.016653982936827776:t[4]>60.50000000000001?t[10]>75.50000000000001?A=.04226403420647408:t[10]>1e-35?t[0]>4733.500000000001?A=.006271403149804702:A=-.030013637555715046:t[0]>4449.500000000001?A=-.06556876058654929:A=.06437994816903034:t[32]>1e-35?A=-.043814577251655815:t[308]>1e-35?t[0]>7277.500000000001?A=-.09349726304052086:t[210]>1e-35?A=-.0035960132209098003:t[5]>691.5000000000001?t[133]>1e-35?A=-.029188394315052574:A=.017219308333820193:A=-.017378928852189585:t[9]>6.500000000000001?t[0]>2653.5000000000005?t[149]>1e-35?A=-.04428555753857688:A=.0001456106867817353:t[5]>213.50000000000003?A=.01740292726636365:A=-.011361718115556464:t[7]>4.500000000000001?t[0]>316.50000000000006?t[19]>1e-35?t[10]>54.50000000000001?A=.03410288911259329:t[121]>1e-35?A=-.06056527462120627:t[8]>2592.5000000000005?A=.12166808844363577:t[191]>1e-35?A=.11669879218998758:A=-.001664858391716235:A=-.01262927450503166:A=-.04506589951879664:t[227]>1e-35?A=-.08548904959752329:A=.02156080776537726;let O;t[306]>1e-35?t[149]>1e-35?O=-.1389218965136736:O=-.032218642644416894:t[13]>1e-35?O=.006465035217331847:t[50]>1e-35?O=-.1381687930130022:t[179]>1e-35?O=-.13112784985951215:t[148]>1e-35?t[8]>1726.5000000000002?O=-.03262719498763048:O=.023342916702125613:t[191]>1e-35?O=.030005484947580197:t[4]>4.500000000000001?t[204]>1e-35?O=.047767773119269434:t[136]>1e-35?t[0]>1937.5000000000002?O=-.09989343595668776:O=.06533942033334243:t[15]>1e-35?t[9]>86.50000000000001?O=-.10577989354150097:t[8]>668.5000000000001?t[126]>1e-35?O=-.09165257825246746:t[9]>32.50000000000001?O=.02484870392366004:O=-.008499493096971395:t[8]>24.500000000000004?O=.02459679192828244:O=-.010527978013140512:t[25]>1e-35?t[217]>1e-35?O=.0015644546318714849:O=-.06579524865022705:O=-.0060233890975120614:t[122]>1e-35?t[1]>36.50000000000001?O=.03331853632960164:O=-.09482264761126993:t[19]>1e-35?t[8]>1430.5000000000002?O=-.019091477207111116:O=.037878468575478504:t[94]>1e-35?O=-.08013082284576584:t[4]>2.5000000000000004?t[186]>1e-35?O=.16919658785098224:t[243]>1e-35?O=-.06580584936754524:O=.01567555159935563:t[129]>1e-35?O=.06721746994993226:t[10]>32.50000000000001?O=-.046394462507797975:O=-.006436180519584767;let L;t[131]>1e-35?L=.015039096856208693:t[8]>779.5000000000001?t[145]>1e-35?L=.019122095523977856:t[298]>1e-35?L=.023828936462317443:t[1]>23.500000000000004?t[5]>384.50000000000006?t[7]>59.50000000000001?L=-.026094309429557913:t[204]>1e-35?L=.09163404305658318:t[1]>27.500000000000004?t[149]>1e-35?t[6]>34.50000000000001?L=.012643810980689466:L=-.07884161741497837:L=-.0025267379810891104:t[2]>43.50000000000001?t[0]>2860.5000000000005?L=.04493082949897325:L=.18046359750455776:t[7]>18.500000000000004?L=-.018667348656891496:L=.02584325784698236:L=-.045696524897545915:t[0]>3321.5000000000005?t[201]>1e-35?L=.04749240016989375:L=-.0333334578246718:t[5]>3276.5000000000005?L=.11330554740098908:t[7]>94.50000000000001?L=.1296600395033268:L=-.003576436308940934:t[15]>1e-35?t[183]>1e-35?L=-.13787130789142835:t[0]>1847.5000000000002?L=.017915229729920556:t[10]>23.500000000000004?t[10]>31.500000000000004?t[6]>7.500000000000001?L=.028856848462727104:L=-.11197632885851168:L=.08169801342016791:t[1]>22.500000000000004?L=-.021052888644970163:L=.019048604298876753:t[7]>4.500000000000001?L=-.002603328695276418:t[7]>1.5000000000000002?t[2]>5.500000000000001?L=.03432638833359197:L=-.0036767863082454973:t[1]>48.50000000000001?L=.03087375270128195:t[2]>3.5000000000000004?L=-.04219917149740248:L=.018818493993207935;let j;t[306]>1e-35?j=-.04076858123502297:t[13]>1e-35?t[1]>67.50000000000001?t[9]>14.500000000000002?t[9]>53.50000000000001?t[8]>1971.5000000000002?j=-.09091897542577475:j=.04042943082645558:t[218]>1e-35?j=.056254985867151:j=-.053848117950183044:j=.003881630017086845:t[5]>5152.500000000001?t[8]>857.5000000000001?t[6]>28.500000000000004?j=.021581808008986944:j=-.05639286496176611:j=.052838875036198954:t[5]>50.50000000000001?t[5]>4082.5000000000005?t[17]>1e-35?j=.023061479860228728:t[145]>1e-35?t[9]>10.500000000000002?j=.023885302967553288:j=.1617794086125622:t[212]>1e-35?j=.04504545345658806:t[3]>17.500000000000004?t[4]>45.50000000000001?j=-.03948072448245435:t[1]>47.50000000000001?t[9]>18.500000000000004?j=.01894935813286188:j=-.06449356357429188:j=.012297239104320094:t[1]>26.500000000000004?t[8]>33.50000000000001?j=-.034718828212885515:j=.0898976288814321:t[1]>17.500000000000004?j=-.15440137451988326:j=-.03864183216821465:j=.009988507307006308:j=-.08540311947043305:t[50]>1e-35?j=-.13323659732101975:t[134]>1e-35?j=-.031820386486894385:t[32]>1e-35?t[8]>2302.5000000000005?j=.08082476177379844:j=-.041665761903645876:t[179]>1e-35?j=-.12405023987936657:t[39]>1e-35?j=-.06247416524997478:t[138]>1e-35?j=-.10724031753676487:j=-.0005423122305122404;let $;t[308]>1e-35?$=.006160742906729798:t[190]>1e-35?t[0]>2461.5000000000005?t[10]>22.500000000000004?$=.023223358334607133:$=-.04383410185346742:$=-.08542395045055405:t[297]>1e-35?t[8]>51.50000000000001?t[1]>13.500000000000002?$=.023406489302867494:$=-.085521220804058:$=-.02921899554854833:t[298]>1e-35?t[9]>12.500000000000002?$=.028120059780969632:$=-.04211009474298743:t[294]>1e-35?$=-.05040415676618239:t[86]>1e-35?t[1]>36.50000000000001?$=-.0993035220737934:$=-.0005384930611060366:t[230]>1e-35?t[4]>6.500000000000001?$=.029770210551187937:$=-.016272917551655715:t[4]>60.50000000000001?t[280]>1e-35?$=.06421359317599738:$=-.01963732469244167:t[218]>1e-35?t[3]>3.5000000000000004?$=.024368404612215164:$=-.04045232374803373:t[131]>1e-35?$=.017372701982485795:t[120]>1e-35?$=.08812710275150198:t[18]>1e-35?t[90]>1e-35?$=.18451364351180236:t[7]>33.50000000000001?$=-.03850813130183531:t[195]>1e-35?$=.06966114053446336:t[3]>16.500000000000004?$=-.0012869181693341211:t[0]>4242.500000000001?$=-.054625548611291035:$=-.014431095117473881:t[5]>4558.500000000001?t[8]>1.5000000000000002?$=.006302103427145562:$=.13967622319898698:t[121]>1e-35?$=-.038798585213145644:t[5]>4544.500000000001?$=-.08050498033009466:$=-.002986974112681435;let Q;t[0]>384.50000000000006?t[2]>101.50000000000001?t[1]>16.500000000000004?Q=-.03461119351456781:Q=.05659026566680352:t[306]>1e-35?t[2]>14.500000000000002?t[149]>1e-35?Q=-.12404435523286539:Q=-.0034376913880382956:Q=-.09821622245095822:t[131]>1e-35?t[9]>1.5000000000000002?Q=.0037507103585310234:Q=.03610387965829944:t[8]>999.5000000000001?t[9]>137.50000000000003?Q=-.11985021663179699:t[0]>1847.5000000000002?t[126]>1e-35?Q=-.04832024079663151:t[37]>1e-35?Q=-.037103393468366934:Q=-.004248086592531705:t[8]>3084.0000000000005?t[9]>43.50000000000001?Q=.032539071163832034:t[5]>1643.5000000000002?Q=.036408625378035665:t[0]>1500.5000000000002?Q=-.1346358322854993:Q=-.027586559522081014:t[3]>1e-35?t[190]>1e-35?Q=-.1133991164577881:t[9]>52.50000000000001?Q=-.024478640359723122:Q=.03673777861098756:Q=-.1037451237591819:t[230]>1e-35?t[9]>48.50000000000001?t[10]>20.500000000000004?Q=.002583438691776944:Q=.10773520810108106:t[9]>12.500000000000002?t[1]>16.500000000000004?Q=-.02141222346712401:Q=.06392462314316179:t[4]>12.500000000000002?Q=.08700122294434816:t[8]>267.50000000000006?Q=.056923170082743224:Q=-.07716309825583327:t[32]>1e-35?Q=-.03961343943752142:Q=.002674914122888783:t[1]>42.50000000000001?Q=-.05217539654421676:t[145]>1e-35?Q=.09553630282946368:Q=-.009424791262477729;let K;t[183]>1e-35?K=-.05753337139158443:t[308]>1e-35?K=.00562436671450989:t[9]>7.500000000000001?t[21]>1e-35?t[10]>8.500000000000002?K=-.10477869875380448:K=-.0070301869937306055:t[3]>9.500000000000002?t[8]>1765.5000000000002?t[0]>4571.500000000001?K=-.12526505173232894:t[10]>1e-35?t[9]>71.50000000000001?K=-.04442302951713574:K=.00012409888451734224:K=-.092199119633697:t[225]>1e-35?K=.13773072450201831:t[0]>2882.5000000000005?K=.0028540012229920533:t[298]>1e-35?K=.07134486044361629:K=.014297412329837425:t[145]>1e-35?K=.05608385321902638:t[92]>1e-35?K=.038298413603926135:t[107]>1e-35?t[2]>6.500000000000001?K=-.0039957800609801315:K=.0776927564241081:t[203]>1e-35?K=-.05502900859432093:t[105]>1e-35?K=.06062892720841595:K=-.009574839629252128:t[31]>1e-35?K=.009488858841144216:t[23]>1e-35?t[20]>1e-35?K=.08818126313644752:t[8]>161.50000000000003?K=.014353968957885408:K=-.022240738532827903:t[210]>1e-35?K=.024648862719806694:t[2]>5.500000000000001?t[4]>4.500000000000001?t[17]>1e-35?t[10]>16.500000000000004?K=-.043902062079383485:K=-.014741559220396223:K=-.00934935734853194:t[6]>32.50000000000001?K=.1514593126307404:K=.010771222510801532:t[10]>22.500000000000004?K=.01412495209334078:K=-.08576940379502533;let N;t[0]>384.50000000000006?t[84]>1e-35?N=-.06647690967306838:t[2]>101.50000000000001?N=-.024451334501552457:t[306]>1e-35?N=-.034517188927733505:t[131]>1e-35?t[9]>1.5000000000000002?N=.0031858381443673127:N=.032574927024450646:t[204]>1e-35?t[1]>62.50000000000001?N=-.08601340441214533:t[1]>29.500000000000004?N=.10487598629539963:t[8]>597.5000000000001?N=-.0786529133673238:N=.08689436600511559:t[8]>779.5000000000001?t[10]>2.5000000000000004?t[9]>100.50000000000001?N=-.04883600353740688:t[126]>1e-35?N=-.03794042763348827:N=-.003358871967539988:t[210]>1e-35?N=.054991356498447566:t[6]>19.500000000000004?N=-.007418396981635549:N=.018032606049498613:t[18]>1e-35?t[7]>35.50000000000001?t[2]>44.50000000000001?N=-.02143003429501711:N=-.09016000554055564:t[1]>19.500000000000004?t[1]>42.50000000000001?t[8]>17.500000000000004?N=-.006636355416244082:N=-.06483095743431454:t[4]>21.500000000000004?N=-.028975965946833545:N=.022012264796522657:N=-.06653648243193663:t[5]>4593.500000000001?N=.01753551428088607:t[217]>1e-35?N=-.028864824937700297:t[94]>1e-35?N=-.04885192273020658:t[279]>1e-35?N=.08105715462329498:t[121]>1e-35?N=-.04576676034750651:N=.004795141324949362:t[1]>42.50000000000001?N=-.047446619702809195:t[145]>1e-35?N=.08400495571952321:N=-.00854528836489364;let G;t[294]>1e-35?G=-.042529778074638265:t[266]>1e-35?G=-.1180276669679798:t[134]>1e-35?G=-.026818144353279623:t[183]>1e-35?G=-.05120747503479363:t[227]>1e-35?t[8]>1641.5000000000002?G=-.07265906898294434:t[4]>12.500000000000002?t[17]>1e-35?G=-.027516137530797014:t[0]>4331.500000000001?t[1]>64.50000000000001?G=-.03049646619610203:t[1]>50.50000000000001?G=.20634590755061122:G=.06956378103625731:t[0]>3770.5000000000005?G=-.07946414366134913:t[19]>1e-35?G=.17083312065604694:t[2]>21.500000000000004?G=-.02327981978127724:G=.129717297518715:t[145]>1e-35?G=.006891245076133524:G=-.0789123467863741:t[3]>99.50000000000001?G=-.02022281202803071:t[302]>1e-35?t[10]>47.50000000000001?G=.06447639919732716:G=-.05457561977645972:t[306]>1e-35?G=-.029995903305383882:t[191]>1e-35?G=.030596508110850414:t[242]>1e-35?G=-.024085578702020216:t[8]>3198.5000000000005?t[297]>1e-35?G=.09518584795377832:G=-.018197744600833596:t[13]>1e-35?G=.006751790086127549:t[148]>1e-35?G=.01904174573618417:t[99]>1e-35?G=.025287735102561926:t[4]>14.500000000000002?G=-.004364337681643273:t[1]>15.500000000000002?t[35]>1e-35?G=-.09467943982430241:t[243]>1e-35?G=-.02521824751996268:G=.005437570718352172:G=-.022476214821960674;let Y;t[0]>384.50000000000006?t[84]>1e-35?Y=-.06088131453064195:t[147]>1e-35?Y=-.05332792965930566:t[135]>1e-35?t[9]>32.50000000000001?Y=.04219361472548491:Y=-.07227529211725771:t[10]>4.500000000000001?t[21]>1e-35?Y=-.0787279848043689:t[17]>1e-35?t[3]>18.500000000000004?t[188]>1e-35?Y=-.054347604504400286:t[0]>3544.5000000000005?t[0]>5850.500000000001?Y=-.11431764534511478:Y=.013549717238356157:Y=-.020987333767091276:t[6]>2.5000000000000004?Y=-.02914877855133127:Y=.08483464900160231:t[8]>58.50000000000001?t[183]>1e-35?Y=-.10087072787978416:t[37]>1e-35?Y=-.030467397753331196:t[229]>1e-35?Y=-.1017559811057469:t[4]>20.500000000000004?Y=-.00413177742240167:t[20]>1e-35?Y=.05213315982685969:Y=.0037921635866823133:t[8]>51.50000000000001?Y=.07327913092421544:t[6]>49.50000000000001?Y=-.03457694284156811:t[6]>18.500000000000004?t[7]>17.500000000000004?Y=.02744420891894289:Y=.11288946357194463:Y=.003482908820966248:t[18]>1e-35?t[1]>20.500000000000004?t[7]>4.500000000000001?Y=-.012329314369909049:Y=.026816658655600168:Y=-.0872405354618811:Y=.007872673500247845:t[1]>42.50000000000001?Y=-.04309044198258254:t[145]>1e-35?Y=.07572529147860785:t[7]>5.500000000000001?Y=-.013837187093264945:t[1]>17.500000000000004?Y=.04208698439539668:Y=-.06284346769019863;let J;t[294]>1e-35?J=-.0384794324818203:t[266]>1e-35?J=-.1087205883821061:t[32]>1e-35?t[8]>2302.5000000000005?J=.07432960094940501:J=-.035248735855751855:t[134]>1e-35?J=-.02456191365284949:t[121]>1e-35?t[0]>4720.500000000001?t[1]>39.50000000000001?J=-.01706896375068821:J=.08212247914968074:t[2]>59.50000000000001?J=-.09546478958824225:t[6]>53.50000000000001?J=.12317082897575611:t[1]>56.50000000000001?t[4]>7.500000000000001?t[0]>3560.5000000000005?J=.02816463285971267:J=.15449139016588445:J=-.10199787406123524:J=-.038068684323297096:t[223]>1e-35?t[8]>668.5000000000001?J=-.13924786681478077:J=-.0072772442570213335:t[39]>1e-35?J=-.05392786531177836:t[0]>93.50000000000001?t[40]>1e-35?J=-.054059371343144036:t[306]>1e-35?t[2]>14.500000000000002?t[149]>1e-35?J=-.11174465335620831:J=.00013144040097180107:J=-.08493919336681105:t[42]>1e-35?J=-.11078582572836196:t[84]>1e-35?t[4]>17.500000000000004?J=-.015540659878839153:J=-.14442609417300142:t[21]>1e-35?J=-.025251979447574083:J=.0023698372645272847:t[18]>1e-35?J=.07269739695712212:t[8]>2592.5000000000005?J=-.1460388776448558:t[9]>30.500000000000004?t[1]>23.500000000000004?J=-.01835130329646532:t[9]>45.50000000000001?J=.02023047454629885:J=.16469378262221102:J=-.042975030085836426;let ie;t[8]>2915.5000000000005?t[297]>1e-35?ie=.06257393915394144:t[0]>93.50000000000001?t[4]>1.5000000000000002?ie=-.01034964686484714:ie=-.07357437440667927:ie=-.11987794734779106:t[298]>1e-35?t[8]>81.50000000000001?t[0]>3370.5000000000005?t[8]>155.50000000000003?t[8]>660.5000000000001?t[8]>2134.5000000000005?ie=-.09476398869062203:t[9]>72.50000000000001?ie=-.0757383854264379:ie=.02806542779508718:ie=-.05147742568418084:ie=.10212721564444344:ie=.0518263760642861:ie=-.08743405377022222:t[189]>1e-35?t[0]>5269.500000000001?ie=-.10669213185972036:ie=.027050434286384796:t[302]>1e-35?ie=-.0407832394672723:t[116]>1e-35?t[10]>38.50000000000001?ie=.06354599160071946:t[1]>67.50000000000001?ie=.05317447949011187:ie=-.059138165935307165:t[212]>1e-35?t[19]>1e-35?ie=-.09369289448773599:t[0]>2215.5000000000005?ie=.04077965380363924:t[0]>807.5000000000001?ie=-.0591771776458298:ie=.057315736906679376:t[308]>1e-35?t[1]>52.50000000000001?t[5]>3749.5000000000005?ie=-.016323380219241672:ie=.007291062979527741:t[210]>1e-35?t[8]>1641.5000000000002?ie=.03720704290087811:ie=-.008730548158766654:t[4]>80.50000000000001?ie=-.05346644687473197:ie=.014596824736762107:t[218]>1e-35?t[3]>3.5000000000000004?ie=.019984510398089086:ie=-.03917825025861855:t[9]>170.50000000000003?ie=-.09759719821334525:ie=-.0023586682752856298;let oe;t[183]>1e-35?t[17]>1e-35?oe=.030100940443356424:t[10]>1.5000000000000002?oe=-.10861112216742408:oe=.017680668976453255:t[227]>1e-35?t[17]>1e-35?t[2]>16.500000000000004?oe=-.032062878390325456:oe=-.10808232631806887:t[8]>1641.5000000000002?oe=-.06147013392655731:t[4]>12.500000000000002?oe=.03324767551088266:t[145]>1e-35?oe=.028851633810612017:oe=-.054871239091792784:t[134]>1e-35?oe=-.023813968121342108:t[266]>1e-35?oe=-.10037039667146351:t[222]>1e-35?t[0]>612.5000000000001?t[10]>1e-35?t[8]>1939.5000000000002?oe=-.055566877553100726:t[2]>24.500000000000004?t[8]>182.50000000000003?t[10]>43.50000000000001?t[10]>55.50000000000001?oe=-.025350325484720576:oe=.1579024598549572:t[9]>2.5000000000000004?t[0]>3746.5000000000005?oe=.056817276537534815:oe=-.07674158463557636:oe=-.06335553143454145:t[1]>56.50000000000001?oe=.16390494217299284:oe=-.0027330160430847177:t[10]>36.50000000000001?t[8]>1067.5000000000002?oe=.041717597065890205:oe=-.10357913492269129:t[10]>29.500000000000004?oe=.1365512866715726:oe=.020600048310575665:oe=.09708785634773187:oe=-.060427658852305666:t[126]>1e-35?t[10]>32.50000000000001?t[6]>24.500000000000004?t[8]>1146.5000000000002?oe=-.03146213719547347:oe=.11784024316238083:oe=-.050940520532045355:oe=-.047988344143075616:t[191]>1e-35?oe=.028764654731460032:oe=.0011911575567860023;let ne;t[294]>1e-35?t[10]>50.50000000000001?ne=-.11630092297244568:t[0]>2432.5000000000005?t[0]>4199.500000000001?ne=-.05103908560370243:ne=.05002066201169583:ne=-.09976646725732496:t[32]>1e-35?t[0]>4242.500000000001?ne=-.0648838712201258:t[5]>3721.5000000000005?t[9]>4.500000000000001?ne=.127983140816313:ne=-.05436534163636867:ne=-.024514536544596455:t[121]>1e-35?t[0]>4449.500000000001?t[4]>9.500000000000002?ne=-.009504203657088933:t[8]>819.5000000000001?ne=.18689664822602375:ne=.03635576744011826:ne=-.029862411809998525:t[223]>1e-35?ne=-.06474496692999487:t[86]>1e-35?t[8]>65.50000000000001?t[1]>46.50000000000001?ne=-.09405026597863717:t[0]>4153.500000000001?ne=.053577663326799765:ne=-.05062127873995668:ne=.06512222894425874:t[39]>1e-35?ne=-.04985311717827547:t[51]>1e-35?ne=-.04541229517934797:t[178]>1e-35?t[2]>25.500000000000004?t[2]>30.500000000000004?t[0]>2151.5000000000005?ne=-.02860634573675884:ne=.08863753005590103:ne=.11158892111063744:t[0]>655.5000000000001?ne=-.031005736641654926:ne=-.1439827004505974:t[222]>1e-35?t[1]>11.500000000000002?t[0]>612.5000000000001?ne=-.00843386136334982:ne=-.05273594615999777:ne=.1060183822015004:t[126]>1e-35?t[10]>32.50000000000001?t[8]>719.5000000000001?ne=-.015774115523598486:ne=.10147367091236065:ne=-.048307000563071016:ne=.002118376117677254;let de;t[8]>1014.5000000000001?t[9]>137.50000000000003?de=-.10279096288817871:t[0]>93.50000000000001?t[8]>1067.5000000000002?t[227]>1e-35?de=-.03544332389470493:t[285]>1e-35?t[9]>64.50000000000001?de=.07211107542565391:de=-.041556776020476104:t[145]>1e-35?t[1]>66.50000000000001?de=-.0751486415451188:t[1]>59.50000000000001?de=.13459005084554104:de=.024184371850147466:t[0]>3072.5000000000005?t[95]>1e-35?de=.06715575425741895:de=-.005895690393702183:t[8]>2915.5000000000005?de=-.010205039411753762:t[9]>33.50000000000001?t[9]>47.50000000000001?de=-.00029068886245881074:de=.0613467393188786:t[148]>1e-35?de=-.06074463294936236:t[3]>1.5000000000000002?t[5]>1849.5000000000002?t[1]>15.500000000000002?de=.003887223773199377:de=-.08553893131979015:de=.025654192706396767:de=-.05651733979610658:de=-.02039913645229667:t[2]>7.500000000000001?de=-.1058450646728524:de=.02267192191610376:t[1]>120.50000000000001?t[2]>60.50000000000001?de=-.12304707569000428:t[1]>132.50000000000003?t[6]>41.50000000000001?de=.1283258201586378:de=-.01718135372229775:de=-.07702452408491414:t[125]>1e-35?de=-.0804612900572707:t[178]>1e-35?t[0]>4533.500000000001?de=.04273051857848212:de=-.04533122948101463:t[2]>196.50000000000003?de=-.10543331044088727:t[94]>1e-35?t[5]>4532.500000000001?de=.0231032972703664:de=-.04807386814498683:de=.002729435991332102;let Ee;t[179]>1e-35?Ee=-.08065315471211375:t[183]>1e-35?t[17]>1e-35?Ee=.026484626664041125:t[10]>1.5000000000000002?Ee=-.10187000872941615:Ee=.015274190652133752:t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?Ee=.09574540795390041:Ee=-.06454986703691233:Ee=-.11411849349353141:t[266]>1e-35?Ee=-.09281838517322076:t[32]>1e-35?t[8]>2302.5000000000005?Ee=.06685250330182936:t[4]>67.50000000000001?t[2]>97.50000000000001?Ee=-.04403391373512386:Ee=.1132928075412222:t[2]>47.50000000000001?Ee=-.09700191391838056:Ee=-.02147184357182825:t[10]>4.500000000000001?t[21]>1e-35?Ee=-.0735617817957859:t[17]>1e-35?t[3]>18.500000000000004?Ee=-.001668912999010927:Ee=-.02363511102970245:t[8]>58.50000000000001?Ee=-.00035213368294640616:t[3]>17.500000000000004?t[2]>28.500000000000004?t[10]>23.500000000000004?t[1]>38.50000000000001?Ee=.0911011436534449:t[1]>28.500000000000004?Ee=-.07192390493729035:Ee=.06913818091291246:Ee=-.012312625373699222:Ee=.06784496312307986:Ee=-167756936027735e-19:t[18]>1e-35?t[8]>302.50000000000006?Ee=.0026564453057705273:Ee=-.025425772389361445:t[122]>1e-35?Ee=-.12046786388602149:t[0]>3183.5000000000005?Ee=.01162092842804907:t[91]>1e-35?Ee=.07000265526928563:t[1]>22.500000000000004?t[0]>576.5000000000001?Ee=-.0001647792543020228:Ee=-.023664538532907665:Ee=.01609078206180752;let Me;t[294]>1e-35?t[1]>26.500000000000004?t[0]>4141.500000000001?Me=-.051473645433684705:t[0]>3030.5000000000005?t[1]>51.50000000000001?Me=-.017696526862422682:Me=.1450050954613223:Me=-.05406930069823832:Me=-.08308700260259043:t[120]>1e-35?Me=.058316269489189415:t[297]>1e-35?t[94]>1e-35?Me=-.07425512495167255:t[8]>51.50000000000001?t[1]>13.500000000000002?t[1]>33.50000000000001?t[19]>1e-35?t[0]>4498.500000000001?Me=.038431826961746934:Me=-.05937462906539856:t[9]>65.50000000000001?Me=.10814845712507865:t[4]>9.500000000000002?t[2]>22.500000000000004?t[1]>39.50000000000001?t[1]>44.50000000000001?t[10]>44.50000000000001?Me=.12297945639231944:t[0]>3796.5000000000005?t[4]>26.500000000000004?Me=-.09579030954062734:Me=.025064711572811746:Me=.02579440518821548:Me=.1044440128091862:Me=-.058348633139536844:Me=.07766788227934436:Me=-.01021229539092708:t[2]>2.5000000000000004?t[10]>29.500000000000004?t[0]>3770.5000000000005?t[0]>4438.500000000001?Me=.07463684068207214:Me=.18244269035484484:t[6]>39.50000000000001?Me=-.06050050067471004:Me=.05787759066913493:Me=.010783225857972171:Me=.1674891243602606:t[4]>9.500000000000002?Me=-.004814132027475892:Me=-.14543299413454813:Me=-.02935093398687923:t[116]>1e-35?t[9]>2.5000000000000004?t[8]>1218.5000000000002?Me=-.07634466313617769:Me=.0287825335169114:Me=-.06894721943300268:Me=-.00023988459059521937;let He;t[131]>1e-35?t[1]>93.50000000000001?He=-.05706887458825395:t[2]>1.5000000000000002?He=.011446637886629108:He=-.10616119878749211:t[230]>1e-35?t[4]>6.500000000000001?t[0]>4977.500000000001?He=.08424281276381033:t[3]>17.500000000000004?t[20]>1e-35?He=.11146885439601915:t[8]>61.50000000000001?t[0]>3530.5000000000005?t[9]>48.50000000000001?t[9]>61.50000000000001?He=.026278724448495064:He=.17053138400480508:t[0]>4463.500000000001?He=-.06482289890096041:He=.03026516489536295:He=-.031785170717683144:He=.1312690622980455:t[13]>1e-35?He=.14336922540461444:He=.03523850945454039:He=-.015407465968975714:t[39]>1e-35?He=-.054809635385158186:t[32]>1e-35?t[0]>4242.500000000001?He=-.0659975068798723:He=-.008386582621403979:t[4]>60.50000000000001?t[10]>75.50000000000001?t[3]>107.50000000000001?He=-.04225314193574262:t[3]>70.50000000000001?t[1]>29.500000000000004?He=.057409156184759516:He=.2024322059866388:He=-.030670938454461245:t[10]>1e-35?t[0]>4733.500000000001?He=.010648654146284154:t[308]>1e-35?He=.008728141696325391:t[4]>64.50000000000001?t[298]>1e-35?He=.12364025998551711:He=-.02247495081065243:t[1]>22.500000000000004?He=-.0726295464624251:He=.03481895086048152:t[0]>4331.500000000001?He=-.04775443357020673:He=.07172377425057568:t[2]>89.50000000000001?He=-.11782645274716962:He=.00010092665257989378;let Je;t[147]>1e-35?Je=-.041560228567115574:t[302]>1e-35?t[10]>47.50000000000001?Je=.062292114082780084:t[10]>5.500000000000001?t[7]>22.500000000000004?Je=-.016101990375700172:t[0]>2579.5000000000005?Je=-.13045089661551845:Je=-.02874367814784938:Je=.025835149631944995:t[167]>1e-35?t[0]>3928.5000000000005?Je=.17084176915326055:Je=-.019195947948312853:t[222]>1e-35?t[30]>1e-35?t[1]>36.50000000000001?t[8]>45.50000000000001?t[8]>578.5000000000001?t[1]>67.50000000000001?Je=.10591712319944074:Je=-.024082167264285:Je=.16497698867036126:Je=-.04985066326861431:t[0]>1937.5000000000002?t[2]>16.500000000000004?Je=-.021012910475524206:Je=-.13058422554298485:t[0]>1102.5000000000002?Je=.10955864175201457:Je=-.03566689354348996:t[1]>11.500000000000002?Je=-.02093884208606101:Je=.09107244766183857:t[126]>1e-35?t[10]>32.50000000000001?t[8]>719.5000000000001?Je=-.013861861436128482:Je=.09756849802202777:t[224]>1e-35?t[1]>51.50000000000001?Je=.10163873449625677:Je=-.02779270277623805:t[1]>26.500000000000004?Je=-.08035058228527389:Je=.0005719695099064484:t[191]>1e-35?t[9]>9.500000000000002?Je=-.007028075523033826:Je=.0489470913925288:t[1]>61.50000000000001?t[132]>1e-35?Je=.11230846723576784:t[0]>350.50000000000006?t[2]>1.5000000000000002?Je=-.0032075580718124892:Je=-.04442829143298883:Je=-.06597073245775804:Je=.0015594090939337751;let lt;t[223]>1e-35?t[8]>668.5000000000001?lt=-.12803889879260094:lt=.002171373740016862:t[121]>1e-35?t[0]>4720.500000000001?t[217]>1e-35?lt=.08967966612917375:t[1]>39.50000000000001?lt=-.059791671514498074:lt=.05648934961902822:t[2]>59.50000000000001?lt=-.08633234097449628:t[6]>53.50000000000001?lt=.11140345067444689:t[1]>56.50000000000001?t[4]>7.500000000000001?t[0]>3560.5000000000005?lt=.025606129643140924:lt=.13835395886271978:lt=-.09361630641448024:t[4]>7.500000000000001?t[1]>26.500000000000004?t[1]>49.50000000000001?lt=-.09975506556937946:t[10]>36.50000000000001?lt=-.09427724661655643:t[10]>24.500000000000004?lt=.07329330653410447:lt=-.02271182965807972:lt=-.09767874967639482:t[6]>13.500000000000002?t[10]>23.500000000000004?lt=-.05082091374050816:lt=.1687114435254966:t[0]>2314.5000000000005?lt=-.06422664016383926:lt=.0636688376664789:t[298]>1e-35?t[9]>12.500000000000002?t[133]>1e-35?lt=-.06857762517406195:t[9]>71.50000000000001?t[0]>4188.500000000001?lt=-.1274167728754332:lt=.01308079126447365:t[4]>73.50000000000001?lt=.13854015371106546:t[4]>48.50000000000001?lt=-.03684255740123261:t[6]>45.50000000000001?lt=.10329912215813097:t[10]>77.50000000000001?lt=-.08630788656925215:lt=.031022006843800853:t[1]>25.500000000000004?lt=-.08278381528048026:lt=.06664374548141594:t[84]>1e-35?lt=-.05624227409079396:lt=.00012184182357340415;let St;t[179]>1e-35?St=-.07443348719246982:t[40]>1e-35?t[0]>1937.5000000000002?St=-.07595415373151816:St=.054065040429292326:t[134]>1e-35?t[11]>1e-35?t[2]>13.500000000000002?t[0]>1187.5000000000002?St=.022822510448266862:St=.17491569312933697:St=-.058362287133533565:t[2]>2.5000000000000004?St=-.03633895806364428:St=.06397808186120692:t[8]>4968.500000000001?t[1]>31.500000000000004?St=-.07294848747514579:St=.025053613105805606:t[230]>1e-35?t[4]>6.500000000000001?t[107]>1e-35?St=-.07009535282685533:t[8]>2640.0000000000005?St=-.051761240111316276:t[131]>1e-35?St=-.06245774419231631:St=.03495606662854905:St=-.013863522184803188:t[131]>1e-35?t[1]>93.50000000000001?t[1]>105.50000000000001?St=.0015036626973581122:St=-.12505706794835883:t[1]>48.50000000000001?t[276]>1e-35?St=.10435171369790015:t[0]>5026.500000000001?t[0]>5308.500000000001?St=.022343994371919224:St=-.14087991797693533:t[8]>1323.5000000000002?t[10]>49.50000000000001?St=.07724450228328664:t[0]>3853.5000000000005?St=-.15671707454435677:t[10]>28.500000000000004?St=-.10179090671841723:St=.014878216919760927:St=.03967665658164865:t[8]>2696.5000000000005?t[15]>1e-35?St=.14054154485273487:St=.01821247272493051:t[2]>5.500000000000001?t[2]>100.50000000000001?St=-.08632985141410315:St=.005524157938954954:St=-.08802502622523681:St=-.0004649168897260341;let Dt;t[86]>1e-35?t[8]>65.50000000000001?t[1]>32.50000000000001?t[4]>16.500000000000004?Dt=-.007458687464321174:Dt=-.09444966249102484:t[1]>23.500000000000004?Dt=.08564129697360716:Dt=-.07105002902845851:Dt=.05688756955238231:t[294]>1e-35?t[10]>50.50000000000001?Dt=-.10326216566705966:t[1]>26.500000000000004?Dt=.0050539832484585365:Dt=-.07080395606126953:t[306]>1e-35?t[149]>1e-35?Dt=-.10399433201474328:t[2]>14.500000000000002?t[9]>6.500000000000001?Dt=.05783632021087773:t[10]>17.500000000000004?Dt=-.06720598671764105:t[1]>47.50000000000001?Dt=.097495825172558:Dt=-.013372242800584872:Dt=-.06463226787713715:t[42]>1e-35?Dt=-.0885725817597767:t[204]>1e-35?t[1]>62.50000000000001?Dt=-.07496598696848249:t[1]>29.500000000000004?t[8]>446.50000000000006?Dt=.11051270080118503:Dt=.027719462817590454:t[8]>597.5000000000001?Dt=-.08441503592016869:Dt=.05534229430302502:t[223]>1e-35?t[8]>668.5000000000001?Dt=-.12190088985091102:Dt=-.0067442838156576345:t[148]>1e-35?t[9]>79.50000000000001?Dt=.09225972475904022:t[2]>10.500000000000002?t[1]>102.50000000000001?Dt=.11805676536334647:t[8]>1726.5000000000002?t[9]>10.500000000000002?Dt=.016585157185448045:Dt=-.11032043771149425:Dt=.01586986028570486:t[8]>388.50000000000006?Dt=-.10592413013261853:Dt=.04930703248769364:t[13]>1e-35?Dt=.003621937787920821:Dt=-.0013786331198611841;let qt;t[145]>1e-35?t[1]>32.50000000000001?t[1]>38.50000000000001?t[10]>55.50000000000001?t[1]>54.50000000000001?qt=.009769895322846493:qt=-.10620052926943656:t[9]>19.500000000000004?qt=.03781202525403449:t[9]>14.500000000000002?qt=-.11485785321365344:t[9]>6.500000000000001?qt=.07677177833073881:t[0]>4342.500000000001?qt=-.07079285609687631:t[49]>1e-35?qt=.06156814809246001:qt=-.014788509042554625:qt=-.032659201618470655:t[5]>5207.500000000001?qt=-.09013500825185713:t[3]>10.500000000000002?t[8]>1787.5000000000002?qt=-.03094160322187924:t[1]>29.500000000000004?qt=.09474646043921069:qt=.023445783928231618:qt=.09342846694174194:t[0]>533.5000000000001?t[204]>1e-35?t[1]>62.50000000000001?qt=-.07164443768784848:t[1]>29.500000000000004?qt=.089473622509272:t[8]>597.5000000000001?qt=-.08155349903101317:qt=.07098423265024251:t[8]>691.5000000000001?t[5]>2252.5000000000005?qt=-.004003900679358653:t[190]>1e-35?qt=-.09236113461485262:t[8]>3198.5000000000005?qt=-.0124130160451179:qt=.018453070064009328:t[15]>1e-35?qt=.012013209112857824:t[7]>4.500000000000001?t[7]>5.500000000000001?qt=-.0009580759587680961:qt=-.03227283036698222:qt=.01369287669536875:t[1]>50.50000000000001?qt=-.04213060332500437:t[35]>1e-35?qt=-.11508095777767471:t[190]>1e-35?qt=-.08611884672400155:t[297]>1e-35?qt=.05723551879433584:qt=-.004829340082311461;let Nt;t[183]>1e-35?Nt=-.037994150023203555:t[227]>1e-35?t[17]>1e-35?t[3]>20.500000000000004?t[10]>36.50000000000001?Nt=-.11753465135886734:Nt=-.007515490299047085:Nt=-.08576941990777916:t[8]>1641.5000000000002?t[10]>37.50000000000001?Nt=-.12371142493530439:t[1]>36.50000000000001?Nt=.032189417575190435:Nt=-.10339125953022954:t[3]>32.50000000000001?t[4]>27.500000000000004?t[1]>59.50000000000001?Nt=-.0784518658439288:t[2]>54.50000000000001?Nt=.12477882322370665:Nt=.000313468482399738:Nt=.12261955132611434:t[8]>81.50000000000001?t[23]>1e-35?Nt=.04969252946760318:t[8]>511.50000000000006?t[8]>1146.5000000000002?Nt=.0353146070135579:Nt=-.06327619611098285:Nt=.02813577701641991:Nt=-.12354390728506215:t[34]>1e-35?Nt=-.07664408516055397:t[3]>99.50000000000001?t[1]>16.500000000000004?t[1]>26.500000000000004?Nt=-.01245803535276381:Nt=-.07169472553475001:t[1]>11.500000000000002?Nt=.12989984824561698:Nt=-.01201544398886606:t[6]>91.50000000000001?t[1]>22.500000000000004?Nt=.010390226893521422:t[10]>14.500000000000002?Nt=.16790888126487719:Nt=.010614982228955577:t[4]>79.50000000000001?t[9]>44.50000000000001?t[0]>3853.5000000000005?Nt=-.043398307129729134:Nt=.09963544907820426:t[9]>30.500000000000004?Nt=-.13540713124984502:t[9]>17.500000000000004?Nt=.0509435850590757:Nt=-.04761897852404613:t[4]>78.50000000000001?Nt=.09197086656470652:Nt=.0006771050176682337;let D;t[122]>1e-35?t[6]>36.50000000000001?D=.05686884451670743:D=-.05334759543084309:t[266]>1e-35?D=-.08603579519816038:t[157]>1e-35?D=-.06736746113382097:t[302]>1e-35?t[0]>2579.5000000000005?D=-.0499592651503952:t[0]>725.5000000000001?D=.11780353905132664:D=-.05232097173108943:t[147]>1e-35?t[1]>53.50000000000001?D=-.11398297342629615:t[0]>2604.5000000000005?t[0]>3629.5000000000005?D=-.03190157229022304:D=.07985197845805492:D=-.0763078988943886:t[4]>41.50000000000001?t[280]>1e-35?D=.05162933940904835:t[11]>1e-35?t[0]>460.50000000000006?D=-.027174047777029083:D=.057117284879796476:t[3]>43.50000000000001?D=-.0016147040913107311:D=-.05856597304613519:t[2]>45.50000000000001?t[0]>4663.500000000001?t[18]>1e-35?D=-.04779247091640426:t[10]>25.500000000000004?t[9]>22.500000000000004?t[22]>1e-35?D=-.01466076988151239:D=.13375695925484857:D=-.04885873081899647:t[0]>5566.500000000001?D=.11086813028591343:t[8]>992.5000000000001?D=-.07622304217072383:D=.04316019272026325:t[10]>12.500000000000002?t[9]>36.50000000000001?t[9]>45.50000000000001?D=.03285858361708423:D=-.12354858211764992:D=.0672788301823281:t[15]>1e-35?D=.08658836986585006:D=-.02741484278509758:t[290]>1e-35?D=-.08161310335133287:t[135]>1e-35?D=-.04824156054814152:D=.0009156904299554183;let fe;t[3]>7.500000000000001?fe=.0006791852818377787:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?fe=.03642374718166293:fe=.16379973756366603:fe=-.03946685266127979:t[186]>1e-35?fe=.07618896623420895:t[96]>1e-35?fe=.0680272261319657:t[107]>1e-35?t[1]>48.50000000000001?fe=-.022822371600847505:fe=.0501405836324949:t[203]>1e-35?t[1]>77.50000000000001?fe=.044416424920571296:fe=-.0648450593196238:t[5]>3921.5000000000005?t[1]>110.50000000000001?fe=-.11110466767595227:t[9]>5.500000000000001?t[9]>52.50000000000001?t[1]>50.50000000000001?fe=.1061937286809567:t[7]>54.50000000000001?fe=.11487507743121311:t[8]>819.5000000000001?fe=-.07181278009001418:t[10]>25.500000000000004?fe=.13499019430369633:t[1]>31.500000000000004?fe=.09032979489780704:fe=-.12754166393372374:t[9]>37.50000000000001?fe=-.05093963635361407:fe=-.005026651151683848:t[9]>2.5000000000000004?fe=.07619735785573735:fe=.012363301341532136:t[26]>1e-35?fe=-.10685800454968203:t[8]>125.50000000000001?t[8]>446.50000000000006?t[0]>3842.5000000000005?fe=-.08783796894105043:t[282]>1e-35?t[1]>47.50000000000001?t[9]>40.50000000000001?fe=-.10764172927882483:fe=.01890760098464703:fe=.06573095405846417:t[8]>634.5000000000001?fe=-.00783575973273707:fe=-.050612689680229306:t[1]>22.500000000000004?fe=-.0016842490401359626:fe=.0738227088444087:fe=-.02663970950432175;let B;t[31]>1e-35?t[8]>17.500000000000004?B=.013678038624884814:t[1]>35.50000000000001?t[1]>51.50000000000001?B=.007191286124908192:B=-.09347881647636902:t[10]>1.5000000000000002?B=.07938758708008091:B=-.008702935600305113:t[224]>1e-35?t[149]>1e-35?t[13]>1e-35?B=.12321804057595996:B=-.018281109320672437:t[23]>1e-35?t[4]>62.50000000000001?B=-.04644244754790671:B=.024546310702263208:t[8]>862.5000000000001?t[0]>3429.5000000000005?t[4]>9.500000000000002?t[52]>1e-35?B=.0706108609273337:t[2]>40.50000000000001?B=-.028046629962303716:B=-.06497613993109329:B=.01076489668586676:t[1]>33.50000000000001?t[0]>966.5000000000001?t[2]>14.500000000000002?t[1]>38.50000000000001?B=-.03056331974267756:B=-.11886389712497057:B=.053364962175658184:t[8]>2233.5000000000005?B=-.0448152521157682:B=.1508651602190868:t[2]>33.50000000000001?t[0]>2882.5000000000005?t[0]>3183.5000000000005?B=.03818796510453344:B=.23673992112982362:B=.02858814226507374:t[10]>44.50000000000001?B=-.1125863771551199:B=.009129996952394916:t[1]>7.500000000000001?B=-.004374525302461639:B=-.07858519434925451:t[149]>1e-35?t[6]>23.500000000000004?B=.0005231594491642136:t[0]>4053.5000000000005?t[8]>660.5000000000001?B=-.13677189943034931:t[10]>2.5000000000000004?B=.039591891437078086:B=-.09312596849507347:B=-.02423172142089822:B=.0009836986075266283;let Oe;t[189]>1e-35?t[0]>5269.500000000001?Oe=-.103183298350443:t[2]>51.50000000000001?Oe=.09784373530929913:t[10]>26.500000000000004?t[8]>764.5000000000001?Oe=-.05186168947388339:Oe=.0496996365539082:t[10]>23.500000000000004?Oe=.1404445738719:t[93]>1e-35?Oe=.0027146310074558505:t[5]>3821.5000000000005?Oe=.002153033152069652:t[4]>2.5000000000000004?Oe=.007663539551317215:Oe=.13902616832015402:t[298]>1e-35?t[8]>81.50000000000001?t[4]>64.50000000000001?Oe=.11498405722487515:t[2]>23.500000000000004?t[0]>2815.5000000000005?t[2]>44.50000000000001?t[4]>42.50000000000001?Oe=-.021479467709980358:Oe=.09336868994327292:t[1]>22.500000000000004?t[15]>1e-35?Oe=.021660293256233334:Oe=-.0927396152303864:Oe=.0665074081601698:t[0]>1550.5000000000002?Oe=.08972407105958534:Oe=-.0380796411182682:t[6]>13.500000000000002?t[10]>2.5000000000000004?Oe=.06761927942466854:Oe=-.015762168112653286:t[17]>1e-35?Oe=.10311304131145381:Oe=-.017672785252336027:Oe=-.08629805732772755:t[1]>24.500000000000004?t[138]>1e-35?Oe=-.10638321435298535:Oe=.0007073011744385905:t[18]>1e-35?Oe=-.027056185501334325:t[145]>1e-35?Oe=.023191199677450886:t[9]>33.50000000000001?t[201]>1e-35?Oe=.09762140519655171:t[9]>110.50000000000001?Oe=-.06581942957595835:t[6]>54.50000000000001?Oe=.04959634035251596:Oe=.0022616298654554207:Oe=-.007437620924990854;let me;t[179]>1e-35?me=-.06961998209988884:t[167]>1e-35?t[0]>3928.5000000000005?me=.1470294450403005:me=-.01671476793947083:t[187]>1e-35?t[6]>13.500000000000002?t[4]>30.500000000000004?t[13]>1e-35?me=.07448480853603114:t[0]>1012.5000000000001?t[5]>2883.5000000000005?t[0]>3682.5000000000005?t[5]>4031.5000000000005?t[23]>1e-35?me=.07965955447707423:t[10]>10.500000000000002?me=-.09236156404262426:me=.03396273196231458:me=-.13246465021467432:me=.07092822261735353:me=-.08753829085942:me=.09409024840640956:t[1]>40.50000000000001?t[8]>984.5000000000001?t[8]>1514.5000000000002?t[8]>2134.5000000000005?me=.004705878789890202:me=.13775378964952867:me=-.04770928980587811:t[10]>29.500000000000004?me=.011221519891071544:t[0]>3853.5000000000005?me=.06365381191628273:me=.15506252245336827:t[1]>37.50000000000001?me=-.07254777021042061:me=.026514587757252385:t[308]>1e-35?me=.04115804816617256:t[10]>26.500000000000004?me=.02077721353011946:t[5]>3548.5000000000005?me=-.1280907116663952:me=-.021974774274438:t[306]>1e-35?me=-.02700446558079895:t[297]>1e-35?t[212]>1e-35?me=.07794139136748461:t[7]>5.500000000000001?t[19]>1e-35?me=-.005710865560475598:t[94]>1e-35?me=-.06751507982853555:me=.027250040757588703:t[9]>52.50000000000001?me=.07060357924595577:me=-.030297760713011795:me=-.0006005400085266517;let ye;t[113]>1e-35?ye=-.07311041707507712:t[40]>1e-35?t[0]>1937.5000000000002?ye=-.06996356565314456:ye=.04780211300352931:t[10]>52.50000000000001?t[49]>1e-35?ye=-.08317707559926495:t[21]>1e-35?ye=-.0817284654645976:t[15]>1e-35?t[2]>3.5000000000000004?ye=-.010538203005984922:ye=.08454819465349446:t[9]>124.50000000000001?ye=.09015659250299132:t[7]>15.500000000000002?t[5]>5732.500000000001?ye=-.08542251249346582:t[9]>50.50000000000001?ye=-.023428882537657472:ye=.010042500833979073:ye=.020697210754240154:t[10]>28.500000000000004?t[5]>423.00000000000006?t[148]>1e-35?ye=.03006025206979096:t[9]>108.50000000000001?ye=-.09153851322499747:t[145]>1e-35?t[5]>4814.500000000001?t[2]>38.50000000000001?ye=.04222035773042132:ye=-.09078149053947535:t[8]>568.5000000000001?t[1]>64.50000000000001?ye=-.07209095448054853:ye=.028065954981903313:ye=.08714651929917122:ye=-.006678820669279169:t[10]>40.50000000000001?ye=.006982396294941626:ye=-.07889649792011418:t[94]>1e-35?t[4]>30.500000000000004?ye=-.09351114982645548:t[4]>3.5000000000000004?ye=-.004837550129223451:ye=-.08324141237464677:t[303]>1e-35?ye=.10703037493990825:t[9]>156.50000000000003?ye=-.10803018621648303:t[116]>1e-35?ye=-.03208302566598311:t[212]>1e-35?t[243]>1e-35?ye=.10261721665006701:ye=.018994509090668264:ye=.0011244262442038839;let et;t[86]>1e-35?t[8]>65.50000000000001?t[1]>46.50000000000001?et=-.08404263465005328:t[0]>3682.5000000000005?et=.041259223920298876:t[1]>29.500000000000004?et=-.09541257493441671:et=.001482192721625409:et=.051541427372951004:t[3]>7.500000000000001?t[157]>1e-35?et=-.08268996098437432:t[230]>1e-35?et=.015749498159959817:t[4]>7.500000000000001?t[3]>11.500000000000002?et=-913218977737457e-19:t[4]>10.500000000000002?et=-.056334165674005156:t[127]>1e-35?et=-.0784634021824036:t[2]>9.500000000000002?t[1]>62.50000000000001?et=-.04231200150318989:t[10]>42.50000000000001?et=.10182973257894812:et=.015934763950068445:et=-.03130938805859397:t[92]>1e-35?t[4]>6.500000000000001?t[1]>51.50000000000001?t[9]>19.500000000000004?et=-.041117068322885315:et=.1167767830037126:et=.13611206992387337:t[10]>41.50000000000001?et=-.07120286010564107:et=.022032788063345417:t[8]>1.5000000000000002?t[1]>51.50000000000001?t[9]>72.50000000000001?et=-.07702290997669524:t[198]>1e-35?et=.08776558554437136:et=-.008290740324975692:t[2]>32.50000000000001?et=.07198457624219955:et=.005463113714361629:et=.09414099512900526:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?et=.03295785445437507:et=.15140250150674536:et=-.035613213948910254:t[186]>1e-35?et=.06849425535860769:t[96]>1e-35?et=.06028225812727254:et=-.007582543288662308;let Rt;t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?Rt=.08396556264106572:Rt=-.0562516995099192:Rt=-.10593011018789432:t[183]>1e-35?t[15]>1e-35?Rt=-.09705176473553752:t[7]>18.500000000000004?t[2]>37.50000000000001?Rt=.0052017514017035915:Rt=-.11194119432743639:Rt=.03724337696163019:t[227]>1e-35?t[17]>1e-35?t[2]>16.500000000000004?Rt=-.025692451287403446:Rt=-.09511862672123193:t[8]>1661.5000000000002?t[10]>37.50000000000001?Rt=-.11892250746801664:t[10]>22.500000000000004?Rt=.07548493166973796:Rt=-.05973048107712209:t[4]>12.500000000000002?t[0]>4319.500000000001?t[10]>4.500000000000001?t[10]>37.50000000000001?Rt=.13750699058082427:t[18]>1e-35?Rt=.06535408879552801:Rt=-.054118179035040674:Rt=.1344282838979622:t[0]>3982.5000000000005?Rt=-.10409582202467015:t[19]>1e-35?Rt=.12672850705810795:t[8]>587.5000000000001?t[1]>35.50000000000001?Rt=.012705935670766466:Rt=.14149359442527545:Rt=-.047977876173706004:t[20]>1e-35?Rt=.057945228080337946:t[0]>3642.5000000000005?Rt=-.008726535792122467:Rt=-.08424769891378858:t[34]>1e-35?Rt=-.0699329538228602:t[134]>1e-35?t[11]>1e-35?t[4]>15.500000000000002?t[0]>1187.5000000000002?Rt=.01196849566739346:Rt=.1614642278429876:Rt=-.043022338150701625:t[3]>5.500000000000001?Rt=-.03907848255033881:Rt=.018280601026175593:Rt=.0006654540402589085;let Ot;t[31]>1e-35?t[2]>58.50000000000001?t[9]>1.5000000000000002?Ot=-.01386103677247845:Ot=.11386694333005128:t[4]>27.500000000000004?Ot=-.021862617610091336:t[2]>31.500000000000004?Ot=.0828858469030438:Ot=.006483353475830127:t[224]>1e-35?t[149]>1e-35?t[13]>1e-35?Ot=.11303635767048735:Ot=-.01645525128352694:t[23]>1e-35?t[4]>62.50000000000001?Ot=-.04238798044549342:Ot=.022091190130494303:t[5]>5082.500000000001?Ot=-.04287166152163786:t[8]>862.5000000000001?t[19]>1e-35?Ot=.000660344696244351:t[4]>9.500000000000002?t[0]>1277.5000000000002?Ot=-.04291104140431434:t[17]>1e-35?Ot=.11256797532342613:Ot=-.017206916368289193:Ot=.026482035265709743:t[1]>8.500000000000002?t[11]>1e-35?Ot=.04060606971664621:t[0]>4733.500000000001?t[8]>214.50000000000003?t[5]>4814.500000000001?Ot=.03581712466863222:Ot=.14770264307668884:t[8]>73.50000000000001?Ot=-.13093289429740068:Ot=.042461737442702936:t[52]>1e-35?Ot=.0501831919044939:Ot=-.010450249720465756:Ot=-.0753365425372656:t[149]>1e-35?t[6]>23.500000000000004?Ot=.0005381332165438493:Ot=-.04549431717503909:t[133]>1e-35?t[2]>5.500000000000001?t[8]>698.5000000000001?t[282]>1e-35?Ot=.04849637311285226:Ot=-.036671377119808564:t[0]>421.50000000000006?Ot=.00020968499911058945:Ot=.11636422423182405:Ot=-.12687837788222575:Ot=.0012774367867215346;let xt;t[120]>1e-35?xt=.04776057572434719:t[229]>1e-35?t[0]>2952.5000000000005?t[0]>3904.5000000000005?xt=-.042799574885345304:xt=.07412430171193245:xt=-.11248270469336048:t[193]>1e-35?xt=-.060694220820603384:t[121]>1e-35?t[217]>1e-35?t[0]>4449.500000000001?t[4]>8.500000000000002?xt=.028911612178122104:xt=.12326369727728437:t[0]>4091.5000000000005?xt=-.09370267064141052:t[0]>3519.5000000000005?t[8]>668.5000000000001?xt=.1159839898100149:xt=-.01924880886585737:t[8]>501.50000000000006?t[10]>16.500000000000004?xt=-.0216343737351583:xt=-.1220272260878369:t[2]>18.500000000000004?xt=.09152924475072398:t[8]>55.50000000000001?xt=.039508716651005665:xt=-.11714436880423203:t[18]>1e-35?t[9]>2.5000000000000004?xt=.06793009902674053:xt=-.024060578029812988:t[4]>2.5000000000000004?t[2]>16.500000000000004?t[4]>11.500000000000002?xt=-.04391068849624096:xt=.04009967593394672:t[8]>1085.5000000000002?xt=-.024773826356034825:xt=-.13919707884246582:xt=.06659278075192335:t[223]>1e-35?t[8]>668.5000000000001?xt=-.11567917501901476:xt=-.006813640337684114:t[3]>7.500000000000001?xt=.0010671269682548076:t[7]>3.5000000000000004?t[1]>33.50000000000001?t[0]>1597.5000000000002?t[10]>1.5000000000000002?xt=-.001754586408351048:xt=-.055422422450722056:xt=-.06090032532532226:t[0]>5269.500000000001?xt=.11787981735983527:xt=-.00198119768540783:xt=.00210412924303036;let Ut;t[294]>1e-35?t[10]>50.50000000000001?Ut=-.09738558653332406:t[0]>2432.5000000000005?t[0]>4533.500000000001?Ut=-.06063239096209816:Ut=.03317022411417386:Ut=-.08607562321324262:t[120]>1e-35?t[4]>18.500000000000004?Ut=-.013608609329298802:Ut=.09078000157330264:t[99]>1e-35?Ut=.014828708581964632:t[10]>52.50000000000001?t[49]>1e-35?Ut=-.07536137260189814:Ut=.006253266595455118:t[10]>28.500000000000004?Ut=-.006106041147592768:t[9]>156.50000000000003?Ut=-.11828932797811101:t[94]>1e-35?Ut=-.02566078479505714:t[303]>1e-35?Ut=.09544850289775349:t[15]>1e-35?t[224]>1e-35?t[4]>56.50000000000001?Ut=-.08401252789168523:t[5]>4244.500000000001?Ut=.026372887658499107:t[1]>16.500000000000004?Ut=-.027836756345634026:Ut=.09205362097909099:Ut=.00934612788718244:t[203]>1e-35?Ut=-.016371658366767253:t[7]>26.500000000000004?t[0]>966.5000000000001?t[1]>38.50000000000001?t[146]>1e-35?t[9]>21.500000000000004?Ut=-.09580979052540028:t[1]>50.50000000000001?Ut=-.06402211827281554:Ut=.08342858760095972:t[2]>36.50000000000001?Ut=.008114897658204584:t[92]>1e-35?Ut=.09541587072672864:Ut=-.022342147210555434:Ut=-.01660492519175128:Ut=.014721622240945446:t[4]>25.500000000000004?t[11]>1e-35?Ut=.15846731118501817:Ut=.039498507912023195:t[245]>1e-35?Ut=.07008718676813333:Ut=.0019806389728814727;let Jt;t[32]>1e-35?t[8]>90.50000000000001?t[4]>67.50000000000001?t[0]>4188.500000000001?Jt=-.01192072916082109:Jt=.13888590840802637:t[1]>16.500000000000004?t[8]>2302.5000000000005?Jt=.06874032717466054:t[4]>40.50000000000001?Jt=-.07752510020707537:t[1]>76.50000000000001?Jt=-.09944032260703917:t[8]>1381.5000000000002?Jt=-.054466635810800745:t[1]>32.50000000000001?Jt=.05974084520839573:Jt=-.0384718740755954:Jt=-.11374190719134032:t[0]>2151.5000000000005?Jt=-.13703645155803298:Jt=.004833344758654556:t[297]>1e-35?t[212]>1e-35?Jt=.06954747264544993:t[7]>9.500000000000002?t[19]>1e-35?t[1]>30.500000000000004?t[0]>4242.500000000001?Jt=.013539805885738608:Jt=-.0692740641801559:t[0]>2653.5000000000005?t[10]>57.50000000000001?Jt=.09941880179344399:Jt=-.01608127391210995:Jt=.08025226531247417:t[9]>67.50000000000001?Jt=.13525448212444113:t[6]>61.50000000000001?Jt=-.05511099182158894:t[94]>1e-35?Jt=-.06821509831783572:t[128]>1e-35?Jt=.11361314817714643:Jt=.030160785008575566:t[1]>13.500000000000002?t[8]>17.500000000000004?t[16]>1e-35?Jt=-.09954181329804547:t[197]>1e-35?Jt=.10102833149755386:t[188]>1e-35?Jt=.05584490988313965:t[9]>49.50000000000001?t[4]>5.500000000000001?Jt=-.03781554214742005:Jt=.09927933385592314:Jt=-.020006000056720083:Jt=-.10520473615957895:Jt=-.12006990846253787:Jt=-.00026111570975317574;let $t;t[8]>2830.5000000000005?t[1]>31.500000000000004?t[9]>32.50000000000001?t[5]>1234.5000000000002?t[0]>1725.5000000000002?t[7]>14.500000000000002?t[2]>38.50000000000001?$t=-.019188245509744628:$t=-.13354864350075848:t[0]>2461.5000000000005?$t=.051885477468354396:$t=-.0833581968852119:$t=.08233441701532287:$t=-.10865584951212362:t[8]>2992.5000000000005?t[10]>49.50000000000001?t[10]>56.50000000000001?t[1]>45.50000000000001?t[0]>2041.5000000000002?$t=.09926337893072812:$t=-.027753610497327715:t[0]>1972.5000000000002?$t=-.09780045823152517:$t=.032380915168504935:$t=.11502632261226381:t[17]>1e-35?$t=-.06094965899579662:t[10]>40.50000000000001?$t=-.07500475582440802:$t=.006499832113084677:t[10]>4.500000000000001?t[4]>10.500000000000002?$t=-.09584538995220808:$t=-.00908705814304442:$t=.03203281520813893:t[10]>49.50000000000001?$t=-.03146271513986384:t[2]>63.50000000000001?$t=.13172001315536286:t[224]>1e-35?$t=.08945777550527927:t[0]>2282.5000000000005?t[4]>4.500000000000001?$t=.09521549382082259:$t=-.04414925613522197:t[0]>1847.5000000000002?$t=-.09118580379557353:$t=.009206744918282364:t[178]>1e-35?t[2]>25.500000000000004?t[1]>31.500000000000004?$t=.03525144509943896:$t=-.053340750721609057:t[0]>1057.5000000000002?t[10]>2.5000000000000004?$t=-.04766112322938157:t[2]>10.500000000000002?$t=.0728516504357201:$t=-.05049625965272536:$t=-.10868663055825774:$t=.0005382613419948969;let ar;t[147]>1e-35?t[1]>53.50000000000001?ar=-.10615739288764095:t[0]>2604.5000000000005?t[0]>3629.5000000000005?ar=-.030504020655417463:ar=.07102458639110094:ar=-.07058131985243714:t[302]>1e-35?t[10]>47.50000000000001?ar=.055304563442710876:t[1]>53.50000000000001?ar=.033723409577443623:t[8]>175.50000000000003?t[0]>2628.5000000000005?t[9]>40.50000000000001?ar=-.1568835288372895:ar=-.0279829124400056:ar=.04493843959601833:ar=-.11637042729644327:t[191]>1e-35?t[282]>1e-35?ar=-.054133834303687026:t[9]>48.50000000000001?ar=.11263810289007213:t[9]>9.500000000000002?ar=-.02202034562838259:t[4]>45.50000000000001?ar=-.03410927569045158:ar=.04381615166534081:t[242]>1e-35?t[0]>3615.5000000000005?t[3]>19.500000000000004?t[1]>56.50000000000001?t[4]>28.500000000000004?ar=-.029687297407295893:ar=.10673602850001934:t[4]>42.50000000000001?ar=.0036275562945108117:ar=-.0760789221330622:ar=-.10385623431741903:t[2]>34.50000000000001?t[2]>44.50000000000001?t[4]>51.50000000000001?ar=.08274426793676076:ar=-.07076234425516396:ar=.13890177606150175:ar=-.019863286503635686:t[53]>1e-35?t[18]>1e-35?ar=-.09250637750836187:ar=-.0031531727902009026:t[2]>107.50000000000001?t[4]>91.50000000000001?t[1]>16.500000000000004?ar=-.01897867921812603:ar=.04890781705365262:ar=-.11569892307597907:t[2]>106.50000000000001?ar=.09032697440623969:ar=.00047935919155035045;let _r;t[115]>1e-35?_r=.05338335681275557:t[242]>1e-35?t[0]>3615.5000000000005?t[4]>42.50000000000001?t[4]>75.50000000000001?_r=-.10131179514695865:t[8]>938.5000000000001?_r=.10203729808015481:_r=-.015357944186835289:t[1]>56.50000000000001?t[2]>22.500000000000004?_r=.03574015165562999:_r=-.07763042506449493:_r=-.0813323116215548:t[2]>34.50000000000001?t[2]>44.50000000000001?t[4]>51.50000000000001?_r=.0665706259130275:_r=-.06586817559309924:_r=.11925564412287476:_r=-.014170019267143326:t[1]>124.50000000000001?t[2]>30.500000000000004?t[8]>533.5000000000001?t[4]>41.50000000000001?t[8]>977.5000000000001?_r=.046017146627455346:_r=-.08623321630086885:t[8]>1765.5000000000002?_r=-.017990564319859934:t[10]>25.500000000000004?t[10]>48.50000000000001?_r=.11143827902215087:_r=-.01817808730473413:_r=.16980985030210127:_r=-.09357806298740017:t[10]>7.500000000000001?t[10]>54.50000000000001?_r=.010168994879727824:_r=-.09099594488792513:t[9]>1.5000000000000002?_r=.0533459678147928:_r=-.06886854808370108:t[99]>1e-35?t[17]>1e-35?t[9]>22.500000000000004?_r=-.062346959148773695:t[1]>47.50000000000001?_r=-.0021578343835599316:t[2]>27.500000000000004?_r=.19567373210166172:_r=.07851555379116423:t[18]>1e-35?_r=.03711549097804649:t[8]>359.50000000000006?_r=.012492346746905587:t[4]>20.500000000000004?_r=.047511695735697544:_r=-.07999269063948773:_r=6802045404471004e-20;let ur;t[222]>1e-35?t[0]>612.5000000000001?t[10]>1e-35?t[8]>2167.5000000000005?t[4]>25.500000000000004?ur=.0011484728213539738:ur=-.0936582904650763:t[2]>25.500000000000004?t[8]>182.50000000000003?t[10]>22.500000000000004?t[0]>5026.500000000001?ur=-.09828874964938798:t[8]>1586.5000000000002?ur=.13726397438080162:t[4]>48.50000000000001?t[2]>63.50000000000001?ur=.011938269926919522:ur=.17541983715953954:t[19]>1e-35?ur=.023002786011088672:ur=-.06221461272461431:t[9]>2.5000000000000004?t[0]>3818.5000000000005?ur=.06508934844183291:ur=-.10168553534835639:ur=-.07755626499024171:t[2]>51.50000000000001?t[4]>65.50000000000001?ur=.021140806225203937:ur=-.1167833342453639:t[2]>33.50000000000001?ur=.13163585734056618:ur=-.00203273890889717:t[10]>36.50000000000001?t[8]>1067.5000000000002?ur=.06314479201263888:ur=-.09639088327091713:t[10]>29.500000000000004?ur=.09225469303582386:t[0]>3129.5000000000005?t[0]>4091.5000000000005?t[0]>4354.500000000001?ur=40577156464836036e-21:ur=.12322387121810757:ur=-.03697224045046014:t[1]>22.500000000000004?ur=.016474835887320276:ur=.16919298733903063:ur=.07633203630214054:ur=-.047438037934250644:t[30]>1e-35?t[224]>1e-35?t[1]>52.50000000000001?ur=.14150493354700563:ur=-.01831155354975749:t[1]>28.500000000000004?ur=-.07952557178685365:t[10]>28.500000000000004?ur=.0665695554984927:ur=-.053640139319277094:ur=.0004754840665898665;let zt;t[76]>1e-35?zt=-.06814884255939921:t[179]>1e-35?zt=-.06325743795510681:t[122]>1e-35?t[6]>36.50000000000001?zt=.05052338063261613:t[8]>626.5000000000001?t[1]>38.50000000000001?zt=.004193658608848433:zt=-.1066968975983452:t[8]>302.50000000000006?zt=.05476730110440451:zt=-.06382970920394895:t[218]>1e-35?t[2]>3.5000000000000004?t[6]>13.500000000000002?t[2]>19.500000000000004?t[0]>3200.5000000000005?t[4]>91.50000000000001?zt=-.12156071809840739:t[9]>21.500000000000004?t[5]>3883.5000000000005?t[8]>919.5000000000001?t[8]>1085.5000000000002?zt=.013555772109446666:zt=-.09856116699770784:zt=.0284329611813383:t[2]>52.50000000000001?zt=.04008708444763762:t[9]>29.500000000000004?zt=-.1289599546008197:zt=-.018566534248335896:t[8]>747.5000000000001?zt=.02236484980076122:zt=.1148871655157582:t[8]>3084.0000000000005?zt=-.05573875952902531:t[10]>17.500000000000004?t[2]>51.50000000000001?zt=.03164751204281298:zt=.11752140436184891:t[9]>42.50000000000001?zt=-.07180559595410106:t[22]>1e-35?zt=.09325040416256854:zt=-.016041122807939914:zt=-.02765708954618808:t[1]>30.500000000000004?t[1]>66.50000000000001?zt=-.010718250133458515:zt=.09818827994853763:zt=.010180038981174032:zt=-.039472162599295535:t[9]>170.50000000000003?zt=-.08536729235976731:t[189]>1e-35?t[0]>5269.500000000001?zt=-.08674788057474031:zt=.02077653508548371:zt=-.0003536561382007414;let Wt;t[86]>1e-35?t[10]>6.500000000000001?t[0]>4376.500000000001?Wt=.018337297491457794:Wt=-.05926206443180149:Wt=.024026520855881126:t[288]>1e-35?t[184]>1e-35?Wt=.10747078482128616:t[126]>1e-35?Wt=-.10550625192391357:t[7]>71.50000000000001?Wt=-.07698346027863572:t[8]>302.50000000000006?t[6]>49.50000000000001?t[4]>47.50000000000001?t[1]>38.50000000000001?t[15]>1e-35?Wt=.1317396472229434:Wt=-.025035791351328947:Wt=-.0728334305864372:t[8]>963.5000000000001?Wt=.023642201723096064:Wt=.183010326734258:t[128]>1e-35?Wt=.04228920135648387:t[2]>34.50000000000001?t[15]>1e-35?Wt=.002801782941492993:t[3]>40.50000000000001?t[4]>39.50000000000001?Wt=-.1088876900335281:Wt=.02758317023002635:Wt=-.11886771300807207:t[9]>59.50000000000001?t[1]>33.50000000000001?Wt=-.01928020117446408:Wt=.10193718474139135:t[1]>48.50000000000001?t[4]>9.500000000000002?t[8]>932.5000000000001?Wt=.07893723375925096:Wt=-.009878929627026153:t[10]>2.5000000000000004?t[9]>20.500000000000004?Wt=-.10301657587280551:Wt=.005787463140224318:Wt=.07421364314695046:t[0]>2840.5000000000005?t[10]>29.500000000000004?Wt=-.019296977889522397:Wt=-.07274529751752634:t[1]>30.500000000000004?Wt=-.050368901143148286:Wt=.029630869489466655:t[2]>6.500000000000001?t[4]>9.500000000000002?Wt=.0015332402792773946:Wt=.09930153676749967:Wt=-.06370844564357069:Wt=.00042272155209927616;let M;t[71]>1e-35?t[4]>17.500000000000004?M=.12586844370423247:M=-.006791999603126354:t[222]>1e-35?t[1]>10.500000000000002?t[30]>1e-35?t[1]>36.50000000000001?t[9]>1.5000000000000002?t[10]>25.500000000000004?M=-.08474891624263797:t[8]>125.50000000000001?M=.08125086980439704:M=-.04082085238068532:t[0]>3863.5000000000005?M=.020481535807469208:M=.14810819386202126:t[0]>1937.5000000000002?t[2]>16.500000000000004?M=-.019110200161573936:M=-.12387719685855114:t[0]>1102.5000000000002?M=.08376595701957407:M=-.031821919580524834:t[9]>4.500000000000001?M=-.08116383486497568:t[7]>8.500000000000002?t[2]>24.500000000000004?M=-.02154820850475448:t[0]>3863.5000000000005?t[8]>902.5000000000001?M=.1349841206807871:M=.011864053595560297:t[1]>41.50000000000001?M=-.08203662486612544:t[2]>18.500000000000004?M=-.009541865642346947:M=.08345043168501759:t[2]>10.500000000000002?M=-.09585031818030947:M=.019432330487099865:M=.08399259524715129:t[30]>1e-35?t[224]>1e-35?t[1]>52.50000000000001?M=.11951517733981365:M=-.016651014735738538:t[1]>28.500000000000004?M=-.07410922545030711:t[10]>28.500000000000004?M=.05886430683844788:M=-.04929626605117184:t[191]>1e-35?t[9]>9.500000000000002?t[9]>48.50000000000001?M=.04802269879144705:M=-.026208212831796737:t[4]>45.50000000000001?M=-.03227476944664786:M=.05124575625622705:M=.00020506696916003137;let ee;t[116]>1e-35?t[9]>2.5000000000000004?t[9]>17.500000000000004?ee=-.03042091758483443:t[10]>14.500000000000002?ee=.09816619204768777:ee=.01332124067720947:t[8]>8.500000000000002?t[4]>15.500000000000002?ee=-.02381165060401718:ee=-.10950361804974783:ee=.03538211665111128:t[212]>1e-35?t[19]>1e-35?ee=-.09940014650006174:t[0]>2215.5000000000005?t[5]>5056.500000000001?t[3]>5.500000000000001?t[10]>25.500000000000004?ee=-.06371052144380579:ee=.0835500621252692:ee=-.10408255929333915:t[1]>74.50000000000001?ee=.13208968122712403:t[1]>64.50000000000001?ee=-.04778844603644965:t[8]>51.50000000000001?t[8]>201.50000000000003?t[8]>660.5000000000001?t[6]>4.500000000000001?t[9]>5.500000000000001?t[1]>29.500000000000004?t[0]>3830.5000000000005?ee=.09922816902423433:ee=.016366955328796718:ee=.1592412560903584:t[1]>39.50000000000001?ee=.05409467990258923:ee=-.08260633210459611:ee=-.06307205775247567:t[9]>36.50000000000001?ee=.040253940015648144:ee=.14202568969471283:ee=-.028761848341594044:ee=.08994073058773508:t[0]>807.5000000000001?ee=-.043427848826323195:ee=.04573516446846493:t[20]>1e-35?t[188]>1e-35?ee=-.0758877731600639:t[23]>1e-35?ee=.05913923322043199:t[8]>155.50000000000003?t[128]>1e-35?ee=.08124700978741987:ee=.013296063087086852:t[7]>5.500000000000001?ee=-.01640196088612987:ee=-.12685498840146067:ee=-.0004940792382459551;let pe;t[1]>24.500000000000004?t[103]>1e-35?t[8]>61.50000000000001?t[17]>1e-35?pe=-.05584993681929434:t[9]>27.500000000000004?t[0]>3916.5000000000005?pe=.08513773825688947:pe=-.1184664832315282:pe=.05676963535893477:pe=.14263843210340613:pe=.0005795003292924202:t[18]>1e-35?t[0]>5453.500000000001?t[1]>11.500000000000002?pe=-.10669720555606924:pe=.029016613003137307:t[2]>46.50000000000001?t[10]>9.500000000000002?pe=.0664744575868955:pe=-.08469256188890871:pe=-.026746678040592144:t[281]>1e-35?pe=-.07408427239006925:t[145]>1e-35?t[4]>6.500000000000001?t[9]>16.500000000000004?t[4]>18.500000000000004?pe=.012131807587207655:pe=-.12776015795398743:pe=.04320472481083551:pe=.08390980661550446:t[10]>227.50000000000003?pe=-.09771783809101153:t[10]>130.50000000000003?pe=.11175201938704937:t[8]>779.5000000000001?t[5]>3325.5000000000005?t[128]>1e-35?pe=-.07610698254064358:t[8]>902.5000000000001?pe=-.03136381213599649:t[131]>1e-35?pe=.0704821739127936:t[224]>1e-35?pe=-.056961477774953785:t[10]>30.500000000000004?t[9]>43.50000000000001?pe=.10431473040024908:t[8]>841.5000000000001?pe=.07304745320500514:pe=-.038011541882439825:pe=-.01679746695007364:t[0]>3129.5000000000005?pe=.05589952587431965:t[210]>1e-35?pe=.06227198085800842:pe=-.0011341890997947812:t[8]>740.5000000000001?pe=.04817300084412584:pe=-.000577001010789238;let be;t[187]>1e-35?t[6]>12.500000000000002?t[10]>8.500000000000002?t[10]>16.500000000000004?t[8]>234.50000000000003?t[4]>43.50000000000001?t[0]>4476.500000000001?be=-.10504730480402079:t[5]>3341.5000000000005?be=.11087894671081754:be=-.0406668834674614:be=.03308382165616109:t[8]>104.50000000000001?be=-.10431436764549162:be=.0073928337244891455:t[4]>34.50000000000001?be=-.10571751512748416:be=-.006081128814142983:t[13]>1e-35?be=.1299673566095023:t[4]>60.50000000000001?be=-.06587492443829139:t[0]>2604.5000000000005?t[3]>19.500000000000004?be=.04857126072645073:be=-.03431365358104773:t[4]>16.500000000000004?be=.04101865986596709:be=.16480274980378218:t[10]>26.500000000000004?be=.03673978504199255:t[10]>9.500000000000002?be=-.10996402743800027:t[308]>1e-35?be=.0553693735082498:be=-.041600136235644125:t[306]>1e-35?t[8]>1156.5000000000002?t[4]>14.500000000000002?t[10]>21.500000000000004?be=.010902983761213922:be=.1325118659895645:be=-.064362945508595:t[1]>66.50000000000001?be=.033416767779331176:be=-.054080316225040496:t[42]>1e-35?be=-.07762364337810815:t[10]>1089.5000000000002?be=-.08465599849125216:t[31]>1e-35?t[8]>30.500000000000004?be=.012788520036013586:t[1]>32.50000000000001?t[1]>51.50000000000001?be=.0220102041325908:be=-.06516708740003069:be=.012833498905748267:t[224]>1e-35?be=-.007038418272997865:be=.00037666304316290967;let ct;t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?ct=.07554189644995735:ct=-.052089349455904946:ct=-.10148206848169845:t[113]>1e-35?ct=-.06666678653225779:t[39]>1e-35?t[9]>3.5000000000000004?t[0]>3670.5000000000005?ct=.07172653627995676:ct=-.07602959317610998:ct=-.08790686271287523:t[229]>1e-35?t[0]>2952.5000000000005?t[0]>3904.5000000000005?ct=-.0399322883690891:ct=.06523495517476098:ct=-.10358715295743802:t[193]>1e-35?ct=-.05551414334329124:t[134]>1e-35?t[11]>1e-35?t[2]>13.500000000000002?t[10]>1.5000000000000002?ct=.015928764772252406:ct=.1341513061552287:ct=-.04975001987586173:t[10]>2.5000000000000004?t[3]>5.500000000000001?t[9]>2.5000000000000004?t[8]>310.50000000000006?ct=-.033592997607280156:ct=-.12432458028446665:t[1]>32.50000000000001?t[217]>1e-35?ct=-.08402551858097379:ct=.017401984506038796:t[1]>25.500000000000004?ct=.13337205393591278:ct=-.01160208350090984:ct=.06708317942315471:t[8]>227.50000000000003?ct=-.08486943882418681:ct=-.013970104864235007:t[8]>4968.500000000001?t[1]>31.500000000000004?t[9]>4.500000000000001?ct=-.10496268177586783:ct=-.020921489532370493:ct=.02629915927247642:t[7]>20.500000000000004?t[8]>251.50000000000003?t[115]>1e-35?ct=.11639296062157028:ct=-.004275784356569115:t[32]>1e-35?ct=-.07297384970166025:ct=.006026841626381599:ct=.002034611134960428;let ot;t[248]>1e-35?ot=.06091438745093315:t[0]>384.50000000000006?t[204]>1e-35?t[1]>62.50000000000001?ot=-.06455513326540585:t[1]>29.500000000000004?ot=.07718474591552532:t[4]>7.500000000000001?ot=.040139336931404826:ot=-.09685734690563386:ot=.00015327283570347363:t[9]>88.50000000000001?ot=.10079017954199324:t[1]>47.50000000000001?t[2]>20.500000000000004?t[2]>27.500000000000004?ot=-.04077257804338707:ot=.0739963982640615:t[9]>1.5000000000000002?t[17]>1e-35?ot=.03778141591008941:ot=-.06459919920634845:ot=-.11193190957880604:t[7]>6.500000000000001?t[11]>1e-35?t[18]>1e-35?ot=.14063930759326346:t[0]>179.50000000000003?ot=.07287482250668585:t[8]>1180.5000000000002?ot=-.14419393112726253:t[10]>28.500000000000004?ot=-.07993142770099469:t[17]>1e-35?ot=-.04702595410391655:t[7]>21.500000000000004?t[2]>26.500000000000004?ot=.05527969663610186:ot=-.10824385941441346:t[3]>11.500000000000002?ot=.12358502961047915:ot=-.017509147119622873:t[0]>74.50000000000001?ot=-.014907705458730486:t[8]>95.50000000000001?ot=-.02225118168342062:ot=-.1222374623708485:t[8]>1.5000000000000002?t[8]>950.5000000000001?ot=.06946188930925638:t[3]>6.500000000000001?t[10]>2.5000000000000004?t[19]>1e-35?ot=.04962819555610421:ot=-.07213577821855309:ot=.09139529824708481:t[19]>1e-35?ot=.013439401088345224:ot=-.049274647207292056:ot=.10531673719686951;let mt;t[40]>1e-35?t[0]>1937.5000000000002?mt=-.06421671152073961:mt=.04235421241226177:t[294]>1e-35?t[10]>50.50000000000001?mt=-.09100102290316286:t[0]>3030.5000000000005?t[0]>4177.500000000001?mt=-.03520420769287065:t[8]>1085.5000000000002?mt=-.019817352506127633:mt=.11444439424520964:mt=-.06854631664538167:t[120]>1e-35?t[4]>18.500000000000004?mt=-.010490117519863269:mt=.08104430117757461:t[121]>1e-35?t[243]>1e-35?mt=.16408304891242204:t[217]>1e-35?t[0]>4449.500000000001?mt=.06619344145920268:t[0]>4091.5000000000005?mt=-.08813353450871053:t[0]>3519.5000000000005?t[8]>668.5000000000001?mt=.10016091391222309:mt=-.017407607199427293:t[8]>501.50000000000006?t[10]>16.500000000000004?mt=-.019511460451434884:mt=-.11643672465055221:t[2]>18.500000000000004?mt=.07848228087333317:t[8]>55.50000000000001?mt=.032583027899956235:mt=-.11209832692153521:t[11]>1e-35?mt=.027482174104412567:t[10]>1.5000000000000002?t[6]>26.500000000000004?t[4]>19.500000000000004?t[9]>31.500000000000004?mt=-.09996887746328006:t[9]>2.5000000000000004?mt=.02157682011863397:mt=-.05247727848991843:mt=.07409150201483244:t[1]>38.50000000000001?mt=-.11378466075449625:t[224]>1e-35?mt=-.10741749127732923:t[1]>26.500000000000004?mt=.07343136534146562:mt=-.07013573628594773:t[25]>1e-35?mt=-.04626669734164317:mt=.05518333197956482:mt=.00032434010867555516;let vt;t[183]>1e-35?t[10]>1.5000000000000002?t[17]>1e-35?vt=.026313251010808853:vt=-.08997339150292381:vt=.025062509535227952:t[227]>1e-35?t[1]>6.500000000000001?t[2]>9.500000000000002?t[210]>1e-35?vt=.08071107515789745:t[23]>1e-35?t[1]>75.50000000000001?vt=.0905155504503746:t[8]>1049.5000000000002?vt=-.062312558183394054:t[8]>719.5000000000001?vt=.09583836191410239:t[0]>3719.5000000000005?vt=-.0778097309430818:vt=.04012012419054895:t[4]>12.500000000000002?t[8]>1496.5000000000002?t[10]>42.50000000000001?vt=-.12920865648544927:t[0]>2699.5000000000005?vt=-.07086587879041864:vt=.022614182502461846:t[4]>15.500000000000002?t[8]>55.50000000000001?t[1]>60.50000000000001?t[8]>652.5000000000001?vt=-.11377786322600797:vt=-.009486325820117998:t[1]>55.50000000000001?vt=.12430248795958142:t[0]>2952.5000000000005?t[0]>4331.500000000001?t[1]>38.50000000000001?vt=-.07938291201004219:t[2]>36.50000000000001?vt=.01520046732530246:vt=.13649854049662832:vt=-.07145015938528873:t[8]>407.50000000000006?vt=-.00350257360822279:vt=.11332047082193297:vt=-.10060624458629897:vt=.05429496612497562:t[8]>1446.5000000000002?vt=.006073419197482838:vt=-.08718676350883998:vt=-.11532497988252638:vt=.10766270463068293:t[34]>1e-35?vt=-.06345912440611544:t[131]>1e-35?t[9]>1.5000000000000002?vt=-.0004109812623829506:vt=.021601073497455662:vt=-7343540098965853e-20;let Ye;t[298]>1e-35?t[9]>12.500000000000002?t[133]>1e-35?Ye=-.06107663265515864:t[9]>70.50000000000001?t[10]>37.50000000000001?Ye=.05995640200798119:t[0]>3443.5000000000005?Ye=-.14698883458733583:Ye=-.030039164579240187:t[189]>1e-35?Ye=-.06086763220538141:t[1]>86.50000000000001?Ye=-.05096727866142538:t[4]>64.50000000000001?Ye=.11240554253834577:t[4]>45.50000000000001?Ye=-.030279760168394117:t[6]>45.50000000000001?Ye=.10161088917815142:t[10]>77.50000000000001?Ye=-.0792333078055653:t[7]>23.500000000000004?t[0]>2882.5000000000005?Ye=-.06672020005240323:Ye=.08831457502630258:t[8]>2592.5000000000005?Ye=-.052617701047376654:t[10]>29.500000000000004?Ye=.08499327690298047:t[2]>12.500000000000002?t[9]>41.50000000000001?Ye=.12880460816709416:t[9]>25.500000000000004?t[4]>11.500000000000002?Ye=-.064099222705728:Ye=.044332487521538365:t[0]>2882.5000000000005?Ye=.031099546885005065:Ye=.12938467051623853:t[0]>4221.500000000001?Ye=-.0928676413498701:t[9]>30.500000000000004?Ye=-.05781824812803708:Ye=.07561268901778094:t[8]>711.5000000000001?t[2]>22.500000000000004?Ye=-.06648105454098469:Ye=.05985487552383097:Ye=-.13070190291919334:t[116]>1e-35?t[10]>38.50000000000001?Ye=.05282385499619401:t[1]>66.50000000000001?Ye=.048802929108006314:t[2]>4.500000000000001?t[0]>4593.500000000001?Ye=.027885690791379255:Ye=-.08407126408362446:Ye=.014432924125571093:Ye=-9903435845205118e-20;let ut;t[76]>1e-35?ut=-.06307875292162934:t[21]>1e-35?t[7]>10.500000000000002?t[10]>4.500000000000001?t[8]>944.5000000000001?t[0]>3655.5000000000005?ut=.013633653464240465:ut=-.10164319411983509:ut=-.1228424374328996:t[1]>26.500000000000004?t[2]>28.500000000000004?ut=.00632864847804078:ut=-.08393000368134668:ut=.07870508617440916:t[284]>1e-35?ut=.1092302727710421:ut=-.0025505047582483234:t[248]>1e-35?ut=.07101822393621864:t[274]>1e-35?ut=-.06621099406425579:t[1]>26.500000000000004?t[1]>28.500000000000004?ut=.0003077044909372931:t[10]>2.5000000000000004?t[0]>3770.5000000000005?ut=.025081789181021243:ut=-.014813325803582618:t[9]>33.50000000000001?ut=-.033466921233840194:t[3]>12.500000000000002?t[23]>1e-35?ut=.11926990418060353:ut=.01852125513565268:ut=.0975367595927343:t[5]>3325.5000000000005?t[8]>892.5000000000001?t[133]>1e-35?ut=-.1178464984373743:t[283]>1e-35?ut=.043370859226927405:t[5]>4320.500000000001?ut=-.01103141226366587:t[8]>1104.5000000000002?ut=-.023053423988095886:ut=-.0734238953804657:t[6]>18.500000000000004?t[8]>85.50000000000001?ut=.000579145585864887:ut=.03389152834202143:t[128]>1e-35?ut=-.14527722052568462:t[210]>1e-35?ut=-.08915971541902741:t[7]>9.500000000000002?ut=-.03307314577076116:t[18]>1e-35?ut=-.05521712302023565:ut=.009315605032770029:ut=.0036332551852289933;let st;t[0]>689.5000000000001?t[5]>768.5000000000001?t[20]>1e-35?t[5]>4368.500000000001?st=-.07583539600416284:t[188]>1e-35?st=-.07042659515500142:t[23]>1e-35?t[0]>3807.5000000000005?st=-.011038193049597113:st=.08154028164397753:t[1]>85.50000000000001?st=.10259361975201933:st=.011640408330521594:st=-.00023319159023748508:t[92]>1e-35?st=.13771692859530546:st=.022860029819654806:t[1]>22.500000000000004?t[1]>24.500000000000004?t[2]>96.50000000000001?st=.09967230141007705:t[30]>1e-35?st=-.08888529037551285:st=-.008615931385397808:t[10]>5.500000000000001?t[4]>36.50000000000001?st=.08284665960761373:st=-.029292565021289504:t[7]>7.500000000000001?st=-.09945093355204493:st=-.008381393701708593:t[20]>1e-35?st=-.04218678460370465:t[10]>6.500000000000001?t[9]>2.5000000000000004?t[1]>13.500000000000002?t[8]>143.50000000000003?t[4]>7.500000000000001?t[2]>36.50000000000001?st=.07585582641438211:t[8]>284.50000000000006?st=-.029387993239886723:st=.07716738177321587:t[1]>18.500000000000004?st=.026745348497993746:st=.1427429617069753:t[9]>16.500000000000004?t[9]>33.50000000000001?st=.02337306890530338:st=-.10390355904767366:st=.07390521199638532:st=-.06788247515155237:st=-.04201446383470994:t[2]>25.500000000000004?t[2]>29.500000000000004?t[8]>227.50000000000003?st=-.06360325615644084:st=.04342192339836601:st=-.10598779152030145:st=.05253384605768211;let wt;t[3]>7.500000000000001?t[157]>1e-35?wt=-.07514182877923786:wt=.000636205502279271:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?wt=.028692053800951845:wt=.14081686716133598:wt=-.03316566526940354:t[186]>1e-35?t[0]>2653.5000000000005?wt=.0037139292567243084:wt=.12662311031652707:t[107]>1e-35?t[0]>612.5000000000001?wt=.01202688580305612:wt=.0993509141454483:t[203]>1e-35?t[1]>77.50000000000001?wt=.043935495082738626:wt=-.05639305759669704:t[247]>1e-35?wt=-.06770766046891649:t[105]>1e-35?t[19]>1e-35?wt=.10331836202616368:wt=.0006926658459781341:t[96]>1e-35?wt=.05361846065599475:t[127]>1e-35?t[0]>2723.5000000000005?t[1]>54.50000000000001?wt=-.0741403257305367:wt=.022900127535540854:t[7]>3.5000000000000004?wt=.038110741403836294:wt=.14618649985842758:t[5]>3921.5000000000005?t[1]>110.50000000000001?wt=-.09552842289807008:t[1]>27.500000000000004?wt=.012505935885798007:wt=-.020509603428689526:t[282]>1e-35?t[9]>45.50000000000001?t[6]>5.500000000000001?wt=-.1046104767723845:wt=.031388606992301074:t[8]>114.50000000000001?t[9]>17.500000000000004?t[9]>22.500000000000004?t[1]>32.50000000000001?wt=.023466328488582572:wt=.11730925774586994:wt=-.04771965631104874:wt=.17059689880751394:wt=-.08181850955999449:t[26]>1e-35?wt=-.12727482696678769:wt=-.014343123272734182;let kt;t[147]>1e-35?t[1]>53.50000000000001?kt=-.0993064321015924:t[0]>2604.5000000000005?t[0]>3629.5000000000005?kt=-.02763546051134888:kt=.06423344777499343:kt=-.064606430904295:t[302]>1e-35?t[10]>2.5000000000000004?t[10]>47.50000000000001?kt=.049825139823021586:t[7]>22.500000000000004?kt=-.01131680751379858:t[0]>2579.5000000000005?kt=-.10673674485369694:kt=-.015387212937189957:kt=.04347325151148724:t[179]>1e-35?kt=-.05788885608624092:t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?kt=.0650355590939066:kt=-.0473332870892226:kt=-.09699315983340703:t[288]>1e-35?t[88]>1e-35?kt=.11139543329789044:t[126]>1e-35?kt=-.09726928633696198:t[8]>149.50000000000003?t[9]>46.50000000000001?t[4]>1.5000000000000002?t[8]>1861.5000000000002?kt=.06370903833231022:t[10]>29.500000000000004?kt=.03415223859607161:t[10]>3.5000000000000004?kt=-.07415518117873297:kt=-.0014119203473324082:kt=.12617652343819508:t[9]>41.50000000000001?kt=-.10311145857176976:t[8]>2757.5000000000005?kt=-.08106484219011428:t[7]>71.50000000000001?kt=-.09783384432091176:t[1]>88.50000000000001?kt=.06249739709782831:t[3]>9.500000000000002?t[5]>1601.5000000000002?kt=-.008884084501608536:kt=.061339437777743616:kt=-.042490992675121846:t[2]>6.500000000000001?t[3]>10.500000000000002?kt=.01526664064166223:kt=.13534828515415498:kt=-.06985484465894776:kt=.0005758961943178744;let Vt;t[86]>1e-35?t[1]>23.500000000000004?t[1]>29.500000000000004?t[4]>16.500000000000004?t[2]>31.500000000000004?Vt=-.029152732370514342:Vt=.07173628916139178:t[1]>36.50000000000001?Vt=-.08859111297255318:Vt=.0018030071815630785:Vt=.13652461563759322:Vt=-.07550137680349367:t[10]>52.50000000000001?t[49]>1e-35?Vt=-.07145140450454163:t[21]>1e-35?Vt=-.07422841663493233:Vt=.006289319702780104:t[10]>40.50000000000001?t[9]>59.50000000000001?t[19]>1e-35?t[13]>1e-35?Vt=.11864240653986852:t[3]>33.50000000000001?Vt=-.08821209591953476:Vt=.05706392280054726:Vt=-.03600088051578915:t[18]>1e-35?t[1]>24.500000000000004?Vt=.01953613016837112:Vt=-.059781039130025006:t[148]>1e-35?Vt=.052668447861325476:t[3]>30.500000000000004?t[9]>49.50000000000001?Vt=.07207826841738371:t[202]>1e-35?Vt=.08163917539410503:Vt=-.01319846363832958:t[9]>35.50000000000001?t[5]>4134.500000000001?t[10]>44.50000000000001?Vt=-.06858280496900336:Vt=-.1781828899516648:Vt=-.04024620133969553:t[9]>10.500000000000002?t[1]>22.500000000000004?t[1]>37.50000000000001?Vt=.018232649414147116:Vt=-.04419781124222661:Vt=.05145485182416554:t[1]>23.500000000000004?t[0]>655.5000000000001?t[5]>4901.500000000001?t[10]>45.50000000000001?Vt=.11452368095776105:Vt=-.036496437259924026:Vt=-.040445338739465486:Vt=.0816572651001145:Vt=-.08968914517368663:Vt=.0002826343082585516;let Pr;t[189]>1e-35?t[0]>5269.500000000001?Pr=-.08839493050459957:t[10]>85.50000000000001?Pr=.10046908365702462:t[8]>2592.5000000000005?Pr=-.09632233975926387:t[8]>2000.5000000000002?Pr=.10282992953871627:t[8]>1266.5000000000002?t[9]>34.50000000000001?Pr=.035504970430426296:t[1]>31.500000000000004?Pr=-.1133764813142531:Pr=-.01138280942244812:t[8]>1125.5000000000002?Pr=.09800530246229806:Pr=.016170419267589393:t[218]>1e-35?t[9]>99.50000000000001?t[9]>101.50000000000001?t[9]>124.50000000000001?Pr=.07316772160107896:Pr=-.059095014819051765:Pr=.17859437315769733:t[2]>1.5000000000000002?t[9]>86.50000000000001?Pr=-.09150209066166894:t[8]>3084.0000000000005?Pr=-.05443972593168094:t[1]>65.50000000000001?t[10]>11.500000000000002?t[9]>33.50000000000001?Pr=-.04449234460408263:Pr=.05568837973347338:Pr=-.12362324875024472:t[1]>41.50000000000001?t[10]>12.500000000000002?t[8]>1336.5000000000002?Pr=.12741077850267066:Pr=.007372371864985329:t[2]>39.50000000000001?Pr=.02295917234617787:Pr=.14966532083907075:t[1]>39.50000000000001?Pr=-.06685557815340279:t[10]>22.500000000000004?t[2]>52.50000000000001?Pr=-.02511861881285652:t[1]>27.500000000000004?Pr=.08683660011672288:Pr=.02956214835267301:t[9]>15.500000000000002?Pr=-.016538805462996232:Pr=.04352738094981517:Pr=-.05561856645643868:t[9]>170.50000000000003?Pr=-.07996752635874248:t[179]>1e-35?Pr=-.09065975936933919:Pr=-.00042817975060427177;let Br;t[39]>1e-35?t[4]>25.500000000000004?Br=.03443173196222934:Br=-.06554248341270724:t[32]>1e-35?t[8]>90.50000000000001?t[4]>67.50000000000001?t[4]>86.50000000000001?Br=-.0013415395759330318:Br=.12950978489563347:t[1]>22.500000000000004?t[10]>19.500000000000004?t[4]>30.500000000000004?t[9]>41.50000000000001?Br=.002297618040307216:Br=-.12522800128774994:t[4]>8.500000000000002?t[8]>1075.5000000000002?Br=-.015297257305397608:Br=.09651828834062742:Br=-.06636003334371929:t[10]>11.500000000000002?Br=.17631616138309397:t[0]>1639.5000000000002?Br=3804386478092585e-20:Br=-.09099296398683193:Br=-.06874415876172972:t[0]>2151.5000000000005?Br=-.1311264883406766:Br=.00809052010141122:t[253]>1e-35?Br=-.06338558211939296:t[178]>1e-35?t[2]>25.500000000000004?t[2]>30.500000000000004?t[0]>2151.5000000000005?t[10]>10.500000000000002?t[0]>3615.5000000000005?Br=.045038497754638605:Br=-.07770167665661752:Br=-.08596294280650517:Br=.08538655727027213:Br=.09829076418590559:t[1]>39.50000000000001?t[9]>1.5000000000000002?Br=.054627956617973275:t[1]>61.50000000000001?Br=-.11994465088415499:t[4]>8.500000000000002?Br=.06676200239406452:Br=-.027503148069376867:t[8]>676.5000000000001?Br=-.10363964928357075:t[4]>8.500000000000002?Br=-.07589816227175682:Br=.034664436544646814:t[1]>159.50000000000003?t[6]>25.500000000000004?Br=.009093153189012338:Br=-.06119765876605404:Br=.0004668642103528348;let $r;t[223]>1e-35?t[1]>31.500000000000004?t[8]>711.5000000000001?$r=-.10100794502567233:$r=.08000205636470442:$r=-.11945419826856896:t[113]>1e-35?$r=-.06105445938688056:t[167]>1e-35?t[0]>3928.5000000000005?$r=.1224302423880318:$r=-.01875566982911468:t[222]>1e-35?t[1]>8.500000000000002?t[1]>24.500000000000004?t[4]>3.5000000000000004?t[0]>725.5000000000001?t[0]>1682.5000000000002?t[0]>2860.5000000000005?$r=.0019277012166729114:t[1]>28.500000000000004?$r=-.054445821715687494:$r=.045645722976713245:t[30]>1e-35?$r=.13402660155331655:$r=.008921176001777645:$r=-.058547426505451076:$r=.08841202222426625:t[1]>22.500000000000004?t[10]>9.500000000000002?$r=-.13526418192218206:$r=-.03266013432583145:t[1]>20.500000000000004?t[4]>27.500000000000004?$r=.0007263224246135398:$r=.12450043268647056:t[1]>17.500000000000004?t[9]>1.5000000000000002?$r=-.11575657261278308:$r=-.01530376565862095:t[4]>13.500000000000002?t[4]>22.500000000000004?$r=-.01995960178292952:$r=.11216586049153021:$r=-.10050961087149474:$r=.08848063368485726:t[30]>1e-35?t[224]>1e-35?t[1]>52.50000000000001?$r=.10303451081526649:$r=-.01375730267020699:t[1]>28.500000000000004?t[2]>20.500000000000004?$r=-.043799548968209395:$r=-.12451444314954115:t[4]>12.500000000000002?$r=-.03838117361958468:$r=.06504990789767144:t[57]>1e-35?$r=.06890006938293915:$r=.0003914274695562949;let Vr;t[53]>1e-35?t[4]>11.500000000000002?t[8]>617.5000000000001?t[2]>41.50000000000001?Vr=.004271749009686975:Vr=-.10523878297127605:Vr=.04633982158107851:Vr=-.10349713975483057:t[183]>1e-35?t[15]>1e-35?Vr=-.08655730561951676:t[8]>919.5000000000001?Vr=-.0676453705610183:t[7]>18.500000000000004?Vr=-.027787974193650575:Vr=.08012784576991301:t[227]>1e-35?t[1]>6.500000000000001?t[3]>8.500000000000002?t[210]>1e-35?Vr=.07185850683316512:t[8]>201.50000000000003?t[8]>348.50000000000006?t[23]>1e-35?t[8]>1049.5000000000002?Vr=-.03473877164537313:t[8]>719.5000000000001?Vr=.10471053866934404:Vr=.008236107678382981:t[4]>57.50000000000001?Vr=.09412219478825269:t[10]>66.50000000000001?Vr=-.13884338641811986:t[10]>19.500000000000004?t[10]>22.500000000000004?t[0]>2490.5000000000005?Vr=-.040681323751002293:Vr=.06374650297561021:Vr=.12884615227401788:t[10]>5.500000000000001?Vr=-.0887517295786972:t[8]>597.5000000000001?t[18]>1e-35?Vr=-.05474068967150784:Vr=.03744700650806603:Vr=-.07846396348680855:t[1]>42.50000000000001?Vr=.018972315810821302:Vr=.10953621007604744:t[5]>4439.500000000001?Vr=.010999776705494586:t[1]>40.50000000000001?Vr=-.12394200059775967:t[10]>2.5000000000000004?Vr=.013528093962849453:Vr=-.09222088417048682:Vr=-.12662967149701485:Vr=.09327296405849603:t[3]>99.50000000000001?Vr=-.013581954439986752:Vr=.0005526498251862075;let Hr;t[187]>1e-35?t[243]>1e-35?Hr=-.08392792551692502:t[10]>68.50000000000001?Hr=.07871769409454053:t[10]>8.500000000000002?t[10]>16.500000000000004?t[2]>17.500000000000004?t[3]>31.500000000000004?t[91]>1e-35?t[10]>21.500000000000004?t[10]>33.50000000000001?t[10]>48.50000000000001?Hr=-.0825306209711224:Hr=.049559996084532945:Hr=-.1064938580886302:Hr=.03353240732240275:Hr=.045985370399163464:t[1]>42.50000000000001?t[4]>20.500000000000004?Hr=.16966001471529374:t[1]>57.50000000000001?Hr=-.005772777673676247:Hr=.09383677041525058:t[8]>747.5000000000001?Hr=.054068175469351235:Hr=-.049968216310277036:t[8]>753.5000000000001?Hr=-.0679383555784074:t[4]>8.500000000000002?Hr=-.059757341189735386:Hr=.05701083682780414:Hr=-.052497281448921164:t[6]>12.500000000000002?t[8]>969.5000000000001?t[4]>23.500000000000004?Hr=.05820296128730006:Hr=-.1063042385102475:t[1]>49.50000000000001?t[8]>302.50000000000006?Hr=.15340611616954566:Hr=.04385036188666874:t[0]>4449.500000000001?Hr=-.02110897605541555:t[1]>24.500000000000004?t[2]>17.500000000000004?Hr=.004840354641006495:Hr=.09967827580276283:Hr=.11605363537391578:t[9]>19.500000000000004?Hr=-.0735831692725717:Hr=.019973331823355176:t[306]>1e-35?t[149]>1e-35?Hr=-.08968948874343531:t[8]>1094.5000000000002?t[10]>15.500000000000002?Hr=-.02442182361342386:Hr=.10334853004243093:Hr=-.030431948680167104:Hr=-956078595250818e-19;let en;t[294]>1e-35?t[1]>26.500000000000004?t[0]>4078.5000000000005?en=-.040232505718244854:t[0]>3030.5000000000005?en=.0634109586813073:en=-.04043617034245621:en=-.06385323610738443:t[120]>1e-35?t[4]>18.500000000000004?en=-.007859096946435131:en=.07282728486115758:t[229]>1e-35?t[0]>2952.5000000000005?t[17]>1e-35?en=.05515771679628051:en=-.04214471312668263:en=-.09589322222261765:t[193]>1e-35?en=-.05056345906812831:t[121]>1e-35?t[243]>1e-35?en=.14857706653119385:t[4]>9.500000000000002?t[1]>26.500000000000004?t[2]>59.50000000000001?en=-.08152604001147906:t[11]>1e-35?en=.09132936522356462:t[15]>1e-35?t[4]>23.500000000000004?en=.13100930780107503:t[10]>25.500000000000004?en=.05921074710011526:en=-.07226005736695183:t[0]>3304.5000000000005?t[0]>3707.5000000000005?t[0]>4053.5000000000005?en=.0009447118243153454:en=-.09820565036865991:en=.057146909749745546:t[0]>2115.5000000000005?en=-.12331216726611678:en=.007281983677694285:t[2]>56.50000000000001?en=.012310154675612615:en=-.08873665774670461:t[6]>25.500000000000004?en=.134708740821879:t[9]>5.500000000000001?en=-.0805901581148979:t[224]>1e-35?en=-.063684477784257:t[7]>2.5000000000000004?t[19]>1e-35?en=.10842593386554122:t[2]>13.500000000000002?en=.06466798320378395:en=-.08578130788886655:en=-.03590892078300114:en=.0003499894043880708;let W;t[134]>1e-35?t[6]>50.50000000000001?t[0]>3601.5000000000005?W=.10839808814624702:W=-.028043875308180352:t[7]>30.500000000000004?t[8]>932.5000000000001?W=-.007478368069393829:W=-.09066751344326617:t[0]>3588.5000000000005?t[5]>4748.500000000001?W=.04035247751736232:t[0]>4255.500000000001?W=-.1310865624507367:t[0]>4004.5000000000005?W=.06647367311982634:W=-.08339693352955757:t[4]>10.500000000000002?t[1]>34.50000000000001?W=-.011618902907510411:W=.1114646660406691:t[10]>2.5000000000000004?t[0]>3072.5000000000005?W=.09356028223727986:W=-.03811765057032162:W=-.09456215497345526:t[280]>1e-35?t[7]>70.50000000000001?W=.10322956436499003:t[2]>22.500000000000004?t[1]>83.50000000000001?W=.1146142460964847:t[1]>62.50000000000001?W=-.09679869865322362:t[9]>71.50000000000001?W=-.07377580769927583:t[4]>19.500000000000004?t[0]>4571.500000000001?W=-.039046426387852974:W=.04558778688367152:W=.11220830937352602:t[7]>5.500000000000001?t[9]>17.500000000000004?t[8]>1067.5000000000002?W=.03261697816211156:t[15]>1e-35?W=.02586252542264368:t[2]>14.500000000000002?W=-.016420452667484604:W=-.1011799626006976:W=-.13787471318963773:t[6]>4.500000000000001?t[8]>427.50000000000006?t[10]>36.50000000000001?W=.010193588102560583:W=.11748729525930773:W=-.04468162226743652:W=-.028365274393617957:t[71]>1e-35?W=.05115139346588793:W=-.0001510425316936658;let I;t[298]>1e-35?t[8]>81.50000000000001?t[8]>119.50000000000001?t[4]>64.50000000000001?I=.09072192054181037:t[9]>72.50000000000001?t[8]>1094.5000000000002?I=.020637047900190317:I=-.1017300802134141:t[1]>23.500000000000004?t[9]>12.500000000000002?t[0]>2815.5000000000005?t[0]>3183.5000000000005?t[3]>23.500000000000004?t[3]>45.50000000000001?t[4]>48.50000000000001?I=-.04632587527094407:I=.08603684785510396:I=-.05101401015448496:I=.025466432054358498:I=-.07897811963329214:t[6]>13.500000000000002?t[10]>26.500000000000004?I=.020385355430046367:I=.12032592051335252:I=-.012387370292173013:t[2]>23.500000000000004?I=-.12568545484492677:I=-.022261190943521976:t[8]>634.5000000000001?t[8]>857.5000000000001?I=.043528764484784536:I=.14352071657196003:I=-.009332833816977268:I=.11186782227735846:I=-.0737365712425554:t[136]>1e-35?t[0]>1937.5000000000002?I=-.05649104643152564:I=.03884200719305747:t[42]>1e-35?I=-.07191700385792335:t[116]>1e-35?t[9]>2.5000000000000004?t[9]>17.500000000000004?I=-.04103416502526736:I=.04881823954656287:t[4]>15.500000000000002?I=.009342724662897898:t[0]>3969.5000000000005?I=-.025637309961309498:I=-.12574492012987865:t[212]>1e-35?t[19]>1e-35?I=-.08185697075265091:t[0]>2215.5000000000005?I=.030063975892297354:t[0]>807.5000000000001?I=-.03924325550733229:I=.0415330999189793:I=-.00024374664461674863;let U;t[3]>7.500000000000001?U=.0005117490419655908:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?U=.025798416259686565:U=.13251610353146012:U=-.029900559552677654:t[1]>81.50000000000001?t[1]>110.50000000000001?t[0]>4242.500000000001?U=-.11098564237775424:U=25960925309712775e-21:t[0]>4177.500000000001?t[9]>35.50000000000001?U=.15347826616466054:t[3]>4.500000000000001?U=.10379320730958941:U=-.008896303020010654:t[0]>3415.5000000000005?t[0]>3830.5000000000005?U=.03159791088468647:U=-.10612873364104258:U=.05059856107348746:t[133]>1e-35?t[2]>5.500000000000001?U=-.02335760775001469:U=-.1379386577903324:t[1]>62.50000000000001?t[3]>2.5000000000000004?U=-.011164334474672973:U=-.06594044410501655:t[207]>1e-35?U=-.1014214372326535:t[8]>3.5000000000000004?t[107]>1e-35?t[2]>6.500000000000001?U=-.01725821503981916:U=.05594086838700241:t[203]>1e-35?t[1]>44.50000000000001?t[1]>51.50000000000001?U=-.04226531631656534:U=-.14409800530171432:U=-.03245576341206398:t[8]>4214.500000000001?U=.0895409165534886:t[247]>1e-35?U=-.06506383629143335:t[118]>1e-35?U=-.07214270121257443:t[8]>546.5000000000001?U=-.004385020865473831:U=.009321812545248529:t[0]>1639.5000000000002?t[13]>1e-35?U=.046278501133958524:U=-.030835570926968044:t[0]>493.50000000000006?U=-.12794504651610425:U=.009415039807550776;let F;t[304]>1e-35?F=-.04717777269217453:t[76]>1e-35?F=-.05813439142128324:t[1]>59.50000000000001?t[0]>350.50000000000006?t[53]>1e-35?F=-.09648224457374217:t[132]>1e-35?F=.07089308107910267:t[0]>2248.5000000000005?t[5]>2525.5000000000005?t[9]>1.5000000000000002?t[114]>1e-35?F=-.08595213071749083:t[9]>14.500000000000002?t[9]>33.50000000000001?t[285]>1e-35?F=.10838431695638147:t[230]>1e-35?F=.06458713915750626:t[0]>3219.5000000000005?t[3]>23.500000000000004?t[9]>69.50000000000001?F=.050071316251979:F=-.006356941111525215:t[6]>8.500000000000002?F=-.0384814076434817:t[1]>73.50000000000001?t[0]>3746.5000000000005?F=.10217402850540398:F=-.048840949025349197:F=-.03668313197909846:t[7]>39.50000000000001?F=-.0562642841496003:t[10]>2.5000000000000004?F=.09749777369987417:F=-.04848223121417616:t[0]>5453.500000000001?F=.08316648226133942:F=-.0261979698267618:t[212]>1e-35?F=.09565573198318654:t[5]>4814.500000000001?t[8]>963.5000000000001?t[8]>1514.5000000000002?F=.04837009746506856:F=-.09184360565631328:F=.0032411047845613606:t[0]>4733.500000000001?F=.0977378556864798:F=.010776545559325588:F=-.012483310473120218:F=-.049284121449103935:F=.011962641341789565:t[1]>67.50000000000001?t[1]>77.50000000000001?F=-.08380361910948711:F=.07375088778585813:F=-.1084864186071348:F=.0007819503469605476;let R;t[7]>17.500000000000004?t[115]>1e-35?R=.08741852531696623:t[167]>1e-35?R=.10078975495600809:R=-.0018324767784017562:t[290]>1e-35?R=-.0850089851255888:t[74]>1e-35?t[10]>16.500000000000004?R=.1379733311640402:R=-.0038500648529631075:t[6]>29.500000000000004?t[8]>876.5000000000001?t[0]>3129.5000000000005?t[9]>5.500000000000001?t[8]>1765.5000000000002?R=-.09360083033774169:R=.061471353193188374:t[10]>11.500000000000002?t[10]>31.500000000000004?R=-.015599362579530679:t[0]>4593.500000000001?R=-.12029549262691491:R=-.018917032256501397:R=.04632831686576592:R=.06892347785444271:t[4]>8.500000000000002?t[10]>33.50000000000001?R=-.05894883236412263:R=.05213944998315824:R=.12621779223564986:t[243]>1e-35?t[6]>16.500000000000004?t[0]>4141.500000000001?t[0]>5850.500000000001?R=.07577412405680808:R=-.053144737214742235:t[1]>29.500000000000004?t[9]>16.500000000000004?R=-.0277076900736147:t[1]>65.50000000000001?R=-.023587471585763506:R=.10184896592433082:R=-.057699270527916825:R=-.041191811945739454:t[114]>1e-35?t[2]>23.500000000000004?R=.06566902102799584:t[10]>25.500000000000004?R=-.07033633753181047:R=-.01599120398351932:t[242]>1e-35?t[0]>2402.5000000000005?R=-.08108035861059537:R=.04184690010531078:t[35]>1e-35?t[0]>2904.5000000000005?R=-.12431182772561139:R=.01886235886984271:R=.0025579594894418116;let x;t[8]>2915.5000000000005?t[101]>1e-35?x=.08648323956719083:t[0]>93.50000000000001?t[196]>1e-35?x=-.09509320772734361:t[4]>1.5000000000000002?t[5]>1106.5000000000002?t[5]>1191.5000000000002?t[283]>1e-35?x=-.11268313808648661:t[10]>12.500000000000002?t[131]>1e-35?x=.0687641681341721:t[10]>102.50000000000001?x=-.09667920080214842:t[4]>15.500000000000002?t[8]>2992.5000000000005?t[1]>24.500000000000004?t[1]>71.50000000000001?x=-.06762578396473291:t[10]>65.50000000000001?x=-.05226727783610509:t[282]>1e-35?x=.09911438410640917:t[19]>1e-35?x=.06915156336429933:x=-.006565637886508241:x=-.08344300251849307:x=-.0928863907927501:t[1]>60.50000000000001?t[2]>17.500000000000004?x=.19428463865406298:x=.016073883020956765:t[13]>1e-35?x=.06864077097923665:x=-.01388867527034731:t[0]>1847.5000000000002?x=.004655280608161356:t[1]>40.50000000000001?x=.031406054057765996:x=.12798062439212832:x=.09859670536264255:t[10]>2.5000000000000004?t[9]>68.50000000000001?x=.08821759640665892:t[9]>32.50000000000001?t[8]>3960.0000000000005?t[1]>31.500000000000004?x=-.0706095614785733:x=.04227164041372561:x=-.1056906923176064:t[2]>8.500000000000002?t[19]>1e-35?x=-.07139533369873902:x=.008952586782921625:x=.06086212582180936:x=-.0816938490403437:x=-.051224901945956025:x=-.10525399124186095:x=.000270924147208224;let z;t[122]>1e-35?t[0]>2461.5000000000005?t[2]>36.50000000000001?z=.029186512383291244:t[7]>1.5000000000000002?z=-.14984127276725573:t[1]>40.50000000000001?z=.032757060730648144:z=-.07675575422749602:t[6]>8.500000000000002?z=.10599766037117893:z=-.0541423394552156:t[1]>24.500000000000004?t[103]>1e-35?t[8]>61.50000000000001?t[17]>1e-35?z=-.051394622947855385:z=.03237141302699347:z=.12526173027943244:z=.000579473126472788:t[18]>1e-35?t[3]>4.500000000000001?t[3]>6.500000000000001?t[0]>5453.500000000001?z=-.07383912482657777:t[0]>5147.500000000001?z=.07008813937042091:t[10]>38.50000000000001?z=-.06779203808365307:z=-.013782769999524498:z=.0880038869117715:z=-.12846294176070952:t[281]>1e-35?z=-.06810806903850834:t[10]>227.50000000000003?z=-.08937977001661111:t[10]>130.50000000000003?z=.10538920632708033:t[145]>1e-35?t[4]>6.500000000000001?t[9]>16.500000000000004?t[4]>18.500000000000004?z=.011036530162093841:z=-.11500797478569702:z=.03702229366129399:z=.07242026683784307:t[189]>1e-35?z=.03331407112090286:t[9]>33.50000000000001?t[201]>1e-35?z=.08979610115743614:t[7]>57.50000000000001?t[1]>20.500000000000004?z=-.02608892716555304:z=.09609599320761308:t[9]>105.50000000000001?z=-.06848127135991534:z=.0023675721254089715:t[86]>1e-35?z=-.11049635625500497:z=-.004847764219432233;let te;t[125]>1e-35?t[0]>3969.5000000000005?te=-.09462233499115416:te=.05235324508465096:t[17]>1e-35?t[49]>1e-35?t[10]>19.500000000000004?te=-.030700661288166148:te=.0870883677166864:t[10]>3.5000000000000004?t[3]>18.500000000000004?t[0]>3544.5000000000005?t[188]>1e-35?t[9]>7.500000000000001?te=.03149547314036763:te=-.08166208257451366:t[0]>5850.500000000001?te=-.10228136324773157:t[102]>1e-35?te=-.10572585290676295:t[8]>726.5000000000001?t[5]>3657.5000000000005?te=.01782894842128785:t[13]>1e-35?te=.002680190260979968:te=.1773965720476949:t[2]>72.50000000000001?te=.09090831938627947:t[1]>59.50000000000001?te=-.12297206702816128:t[0]>4977.500000000001?te=.09899015653118268:te=-.022207141540838887:t[4]>32.50000000000001?t[1]>34.50000000000001?te=-.0675900954187773:te=.012336403425364092:te=-.0017002325391924573:t[6]>7.500000000000001?t[1]>17.500000000000004?te=-.02671721777458802:te=-.09242452991958029:t[284]>1e-35?te=-.08585691288582491:te=.013332890564324447:t[4]>14.500000000000002?te=-.005245022074799553:t[23]>1e-35?te=-.020036720167235768:t[1]>29.500000000000004?t[114]>1e-35?te=-.09289852307936758:t[116]>1e-35?te=-.09686573010015055:t[8]>804.5000000000001?te=.03812547148215318:te=.005162744968176633:t[9]>43.50000000000001?te=-.059246106396159376:te=.050370113808135275:te=.000794041852811028;let $e;t[3]>7.500000000000001?$e=.0004981426543104341:t[9]>114.50000000000001?$e=.05666010099424601:t[129]>1e-35?t[6]>3.5000000000000004?$e=-.019061766497948867:$e=.07193491146561211:t[186]>1e-35?t[0]>2653.5000000000005?$e=-.006044199577160493:$e=.1147136801028133:t[6]>85.50000000000001?t[8]>847.5000000000001?$e=.11486607015912494:t[9]>16.500000000000004?$e=-.08686820858087294:$e=.06119632492911875:t[127]>1e-35?t[0]>2723.5000000000005?t[0]>3682.5000000000005?t[1]>38.50000000000001?$e=-.022230207980026437:$e=.1056683690528792:$e=-.05859530800943035:$e=.06970608927597141:t[7]>3.5000000000000004?t[105]>1e-35?$e=.08073568184886762:t[107]>1e-35?t[2]>6.500000000000001?$e=-.05177544573528314:$e=.05370469772149028:t[1]>35.50000000000001?t[0]>4106.500000000001?t[9]>46.50000000000001?t[0]>4633.500000000001?$e=.15159657923771555:$e=-.0060542654587671055:t[9]>5.500000000000001?$e=-.042808028205051786:t[1]>48.50000000000001?$e=-.010449538258110742:$e=.10026907521968294:$e=-.04249349329714756:t[9]>42.50000000000001?t[1]>19.500000000000004?t[8]>852.5000000000001?$e=-.02272452389409874:$e=-.11202691218244319:t[5]>1809.5000000000002?$e=-.04460413584255906:$e=.08196329474205256:t[10]>69.50000000000001?$e=.10221481166238167:$e=.0004063052701699382:t[243]>1e-35?$e=-.07563941678849846:t[18]>1e-35?$e=.02563513231103432:$e=-.004740081147303786;let It;t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?It=.057446442918106:It=-.04404018270156349:It=-.09282976714550464:t[0]>384.50000000000006?t[204]>1e-35?t[1]>62.50000000000001?It=-.05930486238817954:t[1]>29.500000000000004?It=.06955866121256543:t[8]>597.5000000000001?It=-.06538593556505168:It=.06212512595497445:It=.00021102929959182257:t[9]>90.50000000000001?It=.0958061289119631:t[102]>1e-35?It=.07172059675638813:t[1]>47.50000000000001?It=-.03879798603977766:t[297]>1e-35?It=.054948234271956144:t[282]>1e-35?t[2]>6.500000000000001?It=.003805910996312012:It=.09304295674749524:t[11]>1e-35?t[18]>1e-35?It=.11252376801858695:t[288]>1e-35?It=-.10293901912180432:It=.014669268837893872:t[1]>42.50000000000001?It=-.05988274123836837:t[145]>1e-35?It=.06142784665288495:t[3]>1.5000000000000002?t[4]>4.500000000000001?t[1]>21.500000000000004?t[1]>27.500000000000004?t[9]>24.500000000000004?It=.038791154988529926:t[10]>22.500000000000004?t[2]>19.500000000000004?It=-.03366718308159971:It=.11936550608549797:t[1]>31.500000000000004?It=-.07454716789539667:It=.027859650621164217:t[10]>10.500000000000002?It=-.11806374092321247:It=-.03506042229223101:It=-.0007080765837654515:t[10]>6.500000000000001?It=-.028077713664996503:t[2]>7.500000000000001?It=.15803724124216814:It=.0351381284833169:It=-.07877953381054767;let pt;t[131]>1e-35?t[282]>1e-35?t[4]>23.500000000000004?pt=.14144941521975005:pt=.0007727806714190652:t[9]>1.5000000000000002?t[8]>2134.5000000000005?t[2]>34.50000000000001?pt=.10514088112381886:t[7]>18.500000000000004?pt=-.10370643555956745:pt=.04093594315421388:t[6]>15.500000000000002?t[4]>9.500000000000002?t[10]>27.500000000000004?t[10]>71.50000000000001?pt=-.0508129468802936:t[224]>1e-35?pt=-.037816066368733595:t[10]>43.50000000000001?pt=.07793408602607932:pt=.017646166646099453:t[9]>3.5000000000000004?t[9]>29.500000000000004?t[17]>1e-35?pt=.036972453794202324:pt=-.08727431092411866:t[8]>427.50000000000006?t[8]>1278.5000000000002?pt=.09475302525132188:pt=-.03580104945898193:pt=.08349488283861875:t[10]>3.5000000000000004?t[0]>1847.5000000000002?t[0]>4280.500000000001?t[2]>27.500000000000004?pt=-.1282448778804823:pt=-.014395808269207212:pt=-.008940927190750592:pt=-.1459118815453748:t[0]>4897.500000000001?pt=-.09733068457286576:t[1]>57.50000000000001?pt=.06575271409540207:pt=-.019556422817450115:pt=-.10623959222984136:t[18]>1e-35?pt=.11280940901275241:t[8]>319.50000000000006?t[2]>6.500000000000001?pt=.008125645893104896:pt=-.11084368630465868:pt=.0584398731508786:t[0]>350.50000000000006?t[3]>83.50000000000001?pt=-.05854904579626861:t[4]>5.500000000000001?pt=.02985784951394175:pt=-.03247600140149334:pt=-.11152899295304973:pt=-.00035424577714215764;let Xt;t[32]>1e-35?t[17]>1e-35?t[8]>359.50000000000006?t[8]>804.5000000000001?Xt=-.06563670567578264:Xt=.067656954313663:Xt=-.10388217548685377:t[8]>2302.5000000000005?Xt=.07190621943790435:t[4]>67.50000000000001?Xt=.060020507643618604:t[4]>38.50000000000001?Xt=-.08707253184321638:t[2]>11.500000000000002?t[2]>16.500000000000004?t[1]>31.500000000000004?t[1]>59.50000000000001?Xt=-.06568134366461277:t[8]>1075.5000000000002?Xt=-.004768057709758692:Xt=.11785959165999467:Xt=-.05080221682879267:Xt=.14814206127494542:Xt=-.07241946332311736:t[253]>1e-35?Xt=-.058893562861261274:t[4]>61.50000000000001?t[283]>1e-35?t[10]>23.500000000000004?Xt=-.02471195342450034:Xt=.11866056464409412:t[10]>44.50000000000001?t[1]>16.500000000000004?t[8]>2640.0000000000005?Xt=-.10741850739482771:Xt=.010051635824944:Xt=.12502069436017124:t[8]>1971.5000000000002?t[1]>23.500000000000004?t[308]>1e-35?Xt=.10511236013756364:t[10]>10.500000000000002?t[1]>53.50000000000001?Xt=-.08992396138178163:Xt=.010944365997007212:Xt=.06221307021813793:Xt=.1286024087559141:t[127]>1e-35?Xt=.06568148624531012:t[10]>40.50000000000001?Xt=-.07567979134643352:t[5]>5647.500000000001?Xt=.07594672895572069:Xt=-.018158016446439187:t[6]>55.50000000000001?Xt=.009293422430111872:t[4]>45.50000000000001?Xt=-.017749818406964022:t[2]>46.50000000000001?Xt=.01714136511113982:Xt=-724762291423549e-19;let er;t[1]>24.500000000000004?t[103]>1e-35?t[8]>48.50000000000001?t[17]>1e-35?er=-.048689215588703864:t[9]>27.500000000000004?t[0]>3916.5000000000005?er=.07084726276890757:er=-.11232323677722932:er=.04812773089510436:er=.11757502216780046:t[5]>1464.5000000000002?t[5]>1505.5000000000002?t[167]>1e-35?er=.07470606002425358:t[1]>53.50000000000001?t[132]>1e-35?er=.0879462816013881:er=-.002966662093626573:t[306]>1e-35?er=-.04588085188342676:er=.0031910005157084823:t[3]>10.500000000000002?t[10]>20.500000000000004?er=-.006600332774461143:er=.1272481351557754:er=-.09030973597154808:t[284]>1e-35?t[1]>38.50000000000001?t[10]>2.5000000000000004?er=.011884312066620044:er=.11678751052403374:t[4]>8.500000000000002?er=.03627129613273813:er=-.12132783497902287:er=-.006784372643244717:t[18]>1e-35?t[3]>4.500000000000001?t[3]>6.500000000000001?t[0]>5453.500000000001?er=-.06830131718398992:t[0]>5147.500000000001?er=.062360406249609306:t[4]>4.500000000000001?er=-.013162203864592055:er=-.07153029184927609:er=.07628618062271557:er=-.12085065687320373:t[190]>1e-35?er=-.045816889524231186:t[137]>1e-35?er=-.07956001795911584:t[199]>1e-35?t[0]>3853.5000000000005?er=.025895337822752502:er=-.06503949350616421:t[10]>227.50000000000003?er=-.09989456525790491:t[10]>130.50000000000003?er=.08616651057030683:er=.0001234981796706021;let cr;t[8]>1014.5000000000001?t[9]>137.50000000000003?cr=-.08778879924617534:t[8]>1022.5000000000001?t[285]>1e-35?t[9]>64.50000000000001?cr=.04955806187281689:t[0]>3670.5000000000005?t[10]>32.50000000000001?cr=-.141732381961068:cr=-.0317152307496497:cr=-.02074638849097191:t[0]>93.50000000000001?t[0]>3072.5000000000005?t[10]>100.50000000000001?t[4]>24.500000000000004?t[8]>1336.5000000000002?cr=.12191801556691254:cr=-.0003444689085397977:cr=.005739668504631604:t[146]>1e-35?t[308]>1e-35?cr=.015237524791728777:t[6]>61.50000000000001?t[4]>63.50000000000001?cr=-.05676033995381961:cr=.10933961076803381:t[4]>26.500000000000004?cr=-.11667582544549814:t[8]>1765.5000000000002?cr=.032174455312047705:cr=-.0755016390126608:t[293]>1e-35?cr=-.08234885407658332:t[9]>41.50000000000001?t[0]>3830.5000000000005?cr=.026571311956824436:t[15]>1e-35?cr=.06175459479851121:cr=-.018778084411148754:t[9]>40.50000000000001?cr=-.09420232889965811:cr=-.004578248021263184:t[2]>1.5000000000000002?cr=.005453714644971445:cr=-.03907138175699279:cr=-.055296364182154736:t[23]>1e-35?cr=.036555134842143476:t[0]>4188.500000000001?t[6]>29.500000000000004?cr=-.09358146510580179:cr=.060524657996178094:cr=-.11245101144669545:t[125]>1e-35?t[9]>1.5000000000000002?cr=-.12698331085931538:cr=.006059605604079918:t[2]>196.50000000000003?cr=-.09451315810804783:cr=.0011390147031687425;let tt;t[8]>2830.5000000000005?t[1]>31.500000000000004?t[9]>32.50000000000001?t[5]>1234.5000000000002?t[8]>3794.5000000000005?tt=.05517359070460923:tt=-.04758751221404857:tt=-.09482078194138792:t[8]>2992.5000000000005?t[1]>101.50000000000001?tt=.1040436595565776:t[9]>21.500000000000004?tt=.04032250517675179:t[107]>1e-35?tt=.05978752253058374:t[210]>1e-35?t[4]>37.50000000000001?tt=.1192453009230486:t[1]>51.50000000000001?tt=.0443376336292195:tt=-.07967674833321865:t[5]>2117.5000000000005?t[9]>10.500000000000002?tt=-.10025078607591283:t[0]>2882.5000000000005?t[18]>1e-35?tt=-.08999822408398037:tt=.017533219253893447:t[9]>1.5000000000000002?t[4]>12.500000000000002?tt=-.061850439226075:tt=.08849196353361093:tt=.10536348167793089:t[92]>1e-35?tt=.04894947712119185:t[9]>16.500000000000004?tt=.05900227903883853:t[9]>5.500000000000001?tt=-.11946594348916476:tt=-.03652096348071964:t[1]>41.50000000000001?tt=-.07411603110840567:tt=-.00021033247574340914:t[10]>22.500000000000004?t[9]>68.50000000000001?tt=.08493634342741495:t[11]>1e-35?tt=-.10899097825564363:tt=-.006156708838964173:t[8]>3198.5000000000005?t[2]>41.50000000000001?tt=.08356655906359918:t[7]>25.500000000000004?tt=-.09475076526194888:t[10]>5.500000000000001?tt=-.01999406228763778:tt=.06696212545889428:t[6]>20.500000000000004?tt=.14713592661393468:tt=.0459917279002218:tt=.00027445928493734093;let br;t[223]>1e-35?t[1]>31.500000000000004?t[8]>634.5000000000001?br=-.06904501553217077:br=.05696231672035904:br=-.1124703178077813:t[99]>1e-35?t[1]>89.50000000000001?br=-.05074261170009721:t[1]>57.50000000000001?t[8]>969.5000000000001?br=-.011419256378538392:t[0]>3830.5000000000005?br=.140315841503076:br=.02403434913963024:t[1]>31.500000000000004?t[8]>65.50000000000001?t[2]>10.500000000000002?br=-.04027822909411164:br=.03176085103667189:br=.06779515865838849:t[4]>15.500000000000002?br=.0762878389015175:t[8]>175.50000000000003?t[0]>3030.5000000000005?t[8]>1041.5000000000002?br=.06124039747298539:br=-.04312732764434027:br=.09161522761808062:br=-.09663512235460074:t[280]>1e-35?t[6]>45.50000000000001?t[1]>46.50000000000001?br=.11211681010488772:t[13]>1e-35?br=.06725735814960367:br=-.046744031455827846:t[10]>44.50000000000001?t[0]>3400.5000000000005?t[0]>4004.5000000000005?t[2]>22.500000000000004?br=.11743605068905603:br=-.011309033539148687:br=-.07896094707523052:br=.12862714793172117:t[10]>1.5000000000000002?t[8]>455.50000000000006?t[0]>4706.500000000001?br=-.09218756798869711:t[10]>19.500000000000004?t[0]>1894.5000000000002?t[0]>3719.5000000000005?br=.02836295848998302:br=.12210680366745175:br=-.058302317470509096:t[5]>4144.500000000001?br=.06123341960495106:br=-.03840046906926525:br=-.05221474543453495:br=.03988215485860711:br=-.00033074684693083496;let Zy=IUr(e+r+n+o+s+a+c+l+u+d+f+p+h+_+g+v+E+y+S+b+w+P+A+O+L+j+$+Q+K+N+G+Y+J+ie+oe+ne+de+Ee+Me+He+Je+lt+St+Dt+qt+Nt+D+fe+B+Oe+me+ye+et+Rt+Ot+xt+Ut+Jt+$t+ar+_r+ur+zt+Wt+M+ee+pe+be+ct+ot+mt+vt+Ye+ut+st+wt+kt+Vt+Pr+Br+$r+Vr+Hr+en+W+I+U+F+R+x+z+te+$e+It+pt+Xt+er+cr+tt+br);return[1-Zy,Zy]}function IUr(t){if(t<0){let e=Math.exp(t);return e/(1+e)}return 1/(1+Math.exp(-t))}});var kut=m(fv=>{"use strict";Object.defineProperty(fv,"__esModule",{value:!0});fv.MultilineModelFeatures=fv.PromptFeatures=void 0;fv.hasComment=$ge;fv.requestMultilineScore=MUr;var dv=Mut(),PUr=Nut(),RUr={javascript:["//"],typescript:["//"],typescriptreact:["//"],javascriptreact:["//"],vue:["//","-->"],php:["//","#"],dart:["//"],go:["//"],cpp:["//"],scss:["//"],csharp:["//"],java:["//"],c:["//"],rust:["//"],python:["#"],markdown:["#","-->"],css:["*/"]},Lut={javascript:1,javascriptreact:2,typescript:3,typescriptreact:4,python:5,go:6,ruby:7};function $ge(t,e,r,n=!0){let o=t.split(`
`);if(n&&(o=o.filter(c=>c.trim().length>0)),Math.abs(e)>o.length||e>=o.length)return!1;e<0&&(e=o.length+e);let s=o[e];return(RUr[r]??[]).some(c=>s.includes(c))}var T3=class{constructor(e,r){let[n,o]=this.firstAndLast(e),s=this.firstAndLast(e.trimEnd());this.language=r,this.length=e.length,this.firstLineLength=n.length,this.lastLineLength=o.length,this.lastLineRstripLength=o.trimEnd().length,this.lastLineStripLength=o.trim().length,this.rstripLength=e.trimEnd().length,this.stripLength=e.trim().length,this.rstripLastLineLength=s[1].length,this.rstripLastLineStripLength=s[1].trim().length,this.secondToLastLineHasComment=$ge(e,-2,r),this.rstripSecondToLastLineHasComment=$ge(e.trimEnd(),-2,r),this.prefixEndsWithNewline=e.endsWith(`
`),this.lastChar=e.slice(-1),this.rstripLastChar=e.trimEnd().slice(-1),this.firstChar=e[0],this.lstripFirstChar=e.trimStart().slice(0,1)}firstAndLast(e){let r=e.split(`
`),n=r.length,o=r[0],s=r[n-1];return s===""&&n>1&&(s=r[n-2]),[o,s]}};fv.PromptFeatures=T3;var vH=class{constructor(e,r,n){this.language=n,this.prefixFeatures=new T3(e,n),this.suffixFeatures=new T3(r,n)}constructFeatures(){let e=new Array(14).fill(0);e[0]=this.prefixFeatures.length,e[1]=this.prefixFeatures.firstLineLength,e[2]=this.prefixFeatures.lastLineLength,e[3]=this.prefixFeatures.lastLineRstripLength,e[4]=this.prefixFeatures.lastLineStripLength,e[5]=this.prefixFeatures.rstripLength,e[6]=this.prefixFeatures.rstripLastLineLength,e[7]=this.prefixFeatures.rstripLastLineStripLength,e[8]=this.suffixFeatures.length,e[9]=this.suffixFeatures.firstLineLength,e[10]=this.suffixFeatures.lastLineLength,e[11]=this.prefixFeatures.secondToLastLineHasComment?1:0,e[12]=this.prefixFeatures.rstripSecondToLastLineHasComment?1:0,e[13]=this.prefixFeatures.prefixEndsWithNewline?1:0;let r=new Array(Object.keys(Lut).length+1).fill(0);r[Lut[this.language]??0]=1;let n=new Array(Object.keys(dv.contextualFilterCharacterMap).length+1).fill(0);n[dv.contextualFilterCharacterMap[this.prefixFeatures.lastChar]??0]=1;let o=new Array(Object.keys(dv.contextualFilterCharacterMap).length+1).fill(0);o[dv.contextualFilterCharacterMap[this.prefixFeatures.rstripLastChar]??0]=1;let s=new Array(Object.keys(dv.contextualFilterCharacterMap).length+1).fill(0);s[dv.contextualFilterCharacterMap[this.suffixFeatures.firstChar]??0]=1;let a=new Array(Object.keys(dv.contextualFilterCharacterMap).length+1).fill(0);return a[dv.contextualFilterCharacterMap[this.suffixFeatures.lstripFirstChar]??0]=1,e.concat(r,n,o,s,a)}};fv.MultilineModelFeatures=vH;function OUr(t,e){return new vH(t.prefix,t.suffix,e)}function MUr(t,e){let r=OUr(t,e).constructFeatures();return(0,PUr.multilineModelPredict)(r)[1]}});var Dut=m(Qm=>{"use strict";var NUr=Qm&&Qm.__decorate||function(t,e,r,n){var o=arguments.length,s=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(o<3?a(s):o>3?a(e,r,s):a(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},LUr=Qm&&Qm.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(Qm,"__esModule",{value:!0});Qm.StreamedCompletionSplitter=void 0;var kUr=Nr(),DUr=aP(),UUr=J$(),Vge=class t{constructor(e,r){this.index=e,this.documentPrefix=r,this.startOffset=0,this.text="",this.trimCount=0}updateText(e){this.text=e}get addedToPrefix(){return this.text.substring(0,this.startOffset)}get effectivePrefix(){return this.documentPrefix+this.addedToPrefix}get effectiveText(){return this.text.substring(this.startOffset)}get isFirstCompletion(){return this.trimCount===0}get firstNewlineOffset(){let e=[...this.text.matchAll(/\r?\n/g)];return e.length>0&&e[0].index===0&&e.shift(),e.length>0?e[0].index:-1}trimAt(e){let r=new t(this.index,this.documentPrefix);return r.startOffset=this.startOffset,r.text=this.text.substring(0,this.startOffset+e),r.trimCount=this.trimCount,this.startOffset+=e,this.trimCount++,r}},Hge=class{constructor(e,r,n,o,s,a){this.prefix=e,this.languageId=r,this.initialSingleLine=n,this.trimmerLookahead=o,this.cacheFunction=s,this.instantiationService=a,this.lineLimit=3,this.completions=new Map}getFinishedCallback(){return async(e,r)=>{let n=r.index??0,o=this.getCompletion(n,e);if(o.isFirstCompletion&&this.initialSingleLine&&o.firstNewlineOffset>=0){let s={yieldSolution:!0,continueStreaming:!0,finishOffset:o.firstNewlineOffset};return o.trimAt(s.finishOffset),r.finished&&await this.trimAll(r,o),s}return r.finished?await this.trimAll(r,o):await this.trimOnce(r,o)}}getCompletion(e,r){let n=this.completions.get(e);return n||(n=new Vge(e,this.prefix),this.completions.set(e,n)),n.updateText(r),n}async trimOnce(e,r){let n=await this.trim(r);return n===void 0?{yieldSolution:!1,continueStreaming:!0}:r.isFirstCompletion?(r.trimAt(n),{yieldSolution:!0,continueStreaming:!0,finishOffset:n}):(this.cacheCompletion(e,r,n),{yieldSolution:!1,continueStreaming:!0})}async trimAll(e,r){let n,o;do n=await this.trim(r),r.isFirstCompletion?(o=n,r.trimAt(n??r.effectiveText.length)):this.cacheCompletion(e,r,n);while(n!==void 0);return o!==void 0?{yieldSolution:!0,continueStreaming:!0,finishOffset:o}:{yieldSolution:!1,continueStreaming:!0}}async trim(e){return await new UUr.TerseBlockTrimmer(this.languageId,e.effectivePrefix,e.effectiveText,this.lineLimit,this.trimmerLookahead).getCompletionTrimOffset()}cacheCompletion(e,r,n){let o=r.trimAt(n??r.effectiveText.length);if(o.effectiveText.trim()==="")return;let s=this.instantiationService.invokeFunction(DUr.convertToAPIChoice,o.effectiveText.trimEnd(),e.getAPIJsonData(),o.index,e.requestId,n!==void 0,e.telemetryData);s.copilotAnnotations=this.adjustedAnnotations(s,r,o),s.generatedChoiceIndex=o.trimCount,this.cacheFunction(o.addedToPrefix,s)}adjustedAnnotations(e,r,n){if(e.copilotAnnotations===void 0)return;let o=n.addedToPrefix.length,a=o+e.completionText.length>=r.text.length,c={};for(let[l,u]of Object.entries(e.copilotAnnotations)){let d=u.filter(f=>f.start_offset-o<e.completionText.length&&f.stop_offset-o>0).map(f=>{let p={...f};return p.start_offset-=o,p.stop_offset-=o,a||(p.stop_offset=Math.min(p.stop_offset,e.completionText.length)),p});d.length>0&&(c[l]=d)}return Object.keys(c).length>0?c:void 0}};Qm.StreamedCompletionSplitter=Hge;Qm.StreamedCompletionSplitter=Hge=NUr([LUr(5,kUr.IInstantiationService)],Hge)});var yH=m(xP=>{"use strict";Object.defineProperty(xP,"__esModule",{value:!0});xP.SpeculativeRequestCache=xP.ICompletionsSpeculativeRequestCache=void 0;var qUr=Qe(),FUr=Dm();xP.ICompletionsSpeculativeRequestCache=(0,qUr.createServiceIdentifier)("ICompletionsSpeculativeRequestCache");var Gge=class{constructor(){this.cache=new FUr.LRUCacheMap(100)}set(e,r){this.cache.set(e,r)}async request(e){let r=this.cache.get(e);r!==void 0&&(this.cache.delete(e),await r())}};xP.SpeculativeRequestCache=Gge});var b3=m(su=>{"use strict";Object.defineProperty(su,"__esModule",{value:!0});su.logger=void 0;su.telemetryShown=BUr;su.telemetryAccepted=$Ur;su.telemetryRejected=VUr;su.mkCanceledResultTelemetry=HUr;su.mkBasicResultTelemetry=GUr;su.handleGhostTextResultTelemetry=zUr;su.resultTypeToString=zge;var Uut=An(),ub=Ps(),S3=wP(),jUr=yH();su.logger=new Uut.Logger("getCompletions");function BUr(t,e,r){t.get(jUr.ICompletionsSpeculativeRequestCache).request(r.clientCompletionId),r.telemetry.markAsDisplayed(),r.telemetry.properties.reason=zge(r.resultType),(0,ub.telemetry)(t,`${e}.shown`,r.telemetry)}function $Ur(t,e,r){let n=e+".accepted";(0,ub.telemetry)(t,n,r)}function VUr(t,e,r){let n=e+".rejected";(0,ub.telemetry)(t,n,r)}function HUr(t,e={}){return{...e,telemetryBlob:t}}function GUr(t){let e={headerRequestId:t.properties.headerRequestId,copilot_trackingId:t.properties.copilot_trackingId};return t.properties.sku!==void 0&&(e.sku=t.properties.sku),t.properties.opportunityId!==void 0&&(e.opportunityId=t.properties.opportunityId),t.properties.organizations_list!==void 0&&(e.organizations_list=t.properties.organizations_list),t.properties.enterprise_list!==void 0&&(e.enterprise_list=t.properties.enterprise_list),t.properties.clientCompletionId!==void 0&&(e.clientCompletionId=t.properties.clientCompletionId),e}function zUr(t,e){let r=t.get(Uut.ICompletionsLogTargetService);if(e.type!=="promptOnly"){if(e.type==="success"){let n=(0,ub.now)()-e.telemetryBlob.issuedTime,o=zge(e.resultType),s=JSON.stringify(e.performanceMetrics),a={...e.telemetryData,reason:o,performanceMetrics:s},{foundOffset:c}=e.telemetryBlob.measurements,l=e.performanceMetrics?.map(([u,d])=>`
${d.toFixed(2)}	${u}`).join("")??"";return su.logger.debug(r,`ghostText produced from ${o} in ${Math.round(n)}ms with foundOffset ${c}${l}`),(0,ub.telemetryRaw)(t,"ghostText.produced",a,{timeToProduceMs:n,foundOffset:c}),e.value}if(su.logger.debug(r,"No ghostText produced -- "+e.type+": "+e.reason),e.type==="canceled"){(0,ub.telemetry)(t,"ghostText.canceled",e.telemetryData.telemetryBlob.extendedBy({reason:e.reason,cancelledNetworkRequest:e.telemetryData.cancelledNetworkRequest?"true":"false"}));return}(0,ub.telemetryRaw)(t,`ghostText.${e.type}`,{...e.telemetryData,reason:e.reason},{})}}function zge(t){switch(t){case S3.ResultType.Network:return"network";case S3.ResultType.Cache:return"cache";case S3.ResultType.Cycling:return"cycling";case S3.ResultType.TypingAsSuggested:return"typingAsSuggested";case S3.ResultType.Async:return"async"}}});var wP=m(fb=>{"use strict";Object.defineProperty(fb,"__esModule",{value:!0});fb.ForceMultiLine=fb.ResultType=void 0;fb.getGhostText=mqr;var WUr=qa(),KUr=$4(),YUr=ws(),pb=Nr(),qut=KS(),QUr=FI(),ZUr=T$(),JUr=V0e(),hs=Gl(),XUr=Q0e(),IP=Wa(),PP=An(),Hut=tP(),eqr=$$(),Wge=sV(),tqr=aP(),rqr=iV(),nqr=MV(),iqr=ib(),A3=Ame(),Fut=AP(),Yge=khe(),Kge=Out(),Zm=Ps(),x3=zI(),jut=N4(),Gut=QS(),oqr=Kpe(),db=J$(),zut=Zpe(),sqr=mhe(),Jge=e_e(),aqr=kut(),cqr=Dut(),gn=b3(),wn=new PP.Logger("ghostText"),Up;(function(t){t[t.Network=0]="Network",t[t.Cache=1]="Cache",t[t.TypingAsSuggested=2]="TypingAsSuggested",t[t.Cycling=3]="Cycling",t[t.Async=4]="Async"})(Up||(fb.ResultType=Up={}));var But=20;async function Wut(t,e,r,n,o,s,a){let c=t.get(IP.ICompletionsFeaturesService),l=t.get(Wge.ICompletionsOpenAIFetcherService),u=t.get(Gut.ICompletionsRuntimeModeService),d=t.get(pb.IInstantiationService),f=t.get(PP.ICompletionsLogTargetService),p=t.get(XUr.ICompletionsUserErrorNotifierService);wn.debug(f,`Getting ${s} from network`),r=r.extendedBy();let h=e.isCycling?3:1,_=(0,tqr.getTemperatureForSamples)(u,h),g={language:e.languageId,next_indent:e.indentation.next??0,trim_by_indentation:(0,hs.shouldDoServerTrimming)(e.blockMode),prompt_tokens:e.prompt.prefixTokens??0,suffix_tokens:e.prompt.suffixTokens??0},v={n:h,temperature:_,code_annotations:!1},E=c.modelAlwaysTerminatesSingleline(r),y=e.blockMode===hs.BlockMode.MoreMultiline&&db.BlockTrimmer.isSupported(e.languageId)&&!E;!e.multiline&&!y?v.stop=[`
`]:e.stop&&(v.stop=e.stop),e.maxTokens!==void 0&&(v.max_tokens=e.maxTokens);let S=Date.now(),b={endpoint:"completions",uiKind:Wge.CopilotUiKind.GhostText,temperature:JSON.stringify(_),n:JSON.stringify(h),stop:JSON.stringify(v.stop)??"unset",logit_bias:JSON.stringify(null)};Object.assign(r.properties,b);try{let w={prompt:e.prompt,languageId:e.languageId,repoInfo:e.repoInfo,ourRequestId:e.ourRequestId,engineModelId:e.engineModelId,count:h,uiKind:Wge.CopilotUiKind.GhostText,postOptions:v,headers:e.headers,extra:g},P=await l.fetchAndStreamCompletions(w,r,o,n);return P.type==="failed"?{type:"failed",reason:P.reason,telemetryData:(0,gn.mkBasicResultTelemetry)(r)}:P.type==="canceled"?(wn.debug(f,"Cancelled after awaiting fetchCompletions"),{type:"canceled",reason:P.reason,telemetryData:(0,gn.mkCanceledResultTelemetry)(r)}):a(S,P.getProcessingTime(),P.choices)}catch(w){if((0,Hut.isAbortError)(w))return{type:"canceled",reason:"network request aborted",telemetryData:(0,gn.mkCanceledResultTelemetry)(r,{cancelledNetworkRequest:!0})};if(d.invokeFunction(P=>wn.exception(P,w,"Error on ghost text request")),p.notifyUser(w),u.shouldFailForDebugPurposes())throw w;return{type:"failed",reason:"non-abort error on ghost text request",telemetryData:(0,gn.mkBasicResultTelemetry)(r)}}}function Qge(t,e,r){if(r||(r=[]),t.completionText=t.completionText.trimEnd(),!!t.completionText&&r.findIndex(n=>n.completionText.trim()===t.completionText.trim())===-1)return t}async function lqr(t,e,r,n,o){let s=t.get(pb.IInstantiationService),a=t.get(PP.ICompletionsLogTargetService),c=t.get(Gut.ICompletionsRuntimeModeService);return Wut(t,e,r,n,o,"completions",async(l,u,d)=>{let p=await d[Symbol.asyncIterator]().next();if(p.done)return wn.debug(a,"All choices redacted"),{type:"empty",reason:"all choices redacted",telemetryData:(0,gn.mkBasicResultTelemetry)(r)};if(n?.isCancellationRequested)return wn.debug(a,"Cancelled after awaiting redactedChoices iterator"),{type:"canceled",reason:"after awaiting redactedChoices iterator",telemetryData:(0,gn.mkCanceledResultTelemetry)(r)};let h=p.value;if(h===void 0)return wn.debug(a,"Got undefined choice from redactedChoices iterator"),{type:"empty",reason:"got undefined choice from redactedChoices iterator",telemetryData:(0,gn.mkBasicResultTelemetry)(r)};s.invokeFunction(Yut,"performance",h,l,u),wn.debug(a,`Awaited first result, id:  ${h.choiceIndex}`);let _=Qge(h,e);_&&(s.invokeFunction(EH,e,_),wn.debug(a,`GhostText first completion (index ${_?.choiceIndex}): ${JSON.stringify(_?.completionText)}`));let g=(async()=>{let v=_!==void 0?[_]:[];for await(let E of d){if(E===void 0)continue;wn.debug(a,`GhostText later completion (index ${E?.choiceIndex}): ${JSON.stringify(E.completionText)}`);let y=Qge(E,e,v);y&&(v.push(y),s.invokeFunction(EH,e,y))}})();return c.isRunningInTest()&&await g,_?{type:"success",value:[Xge(_,{forceSingleLine:!1}),g],telemetryData:(0,gn.mkBasicResultTelemetry)(r),telemetryBlob:r,resultType:Up.Network}:{type:"empty",reason:"got undefined processedFirstChoice",telemetryData:(0,gn.mkBasicResultTelemetry)(r)}})}async function uqr(t,e,r,n,o){let s=t.get(PP.ICompletionsLogTargetService),a=t.get(pb.IInstantiationService);return Wut(t,e,r,n,o,"all completions",async(c,l,u)=>{let d=[];for await(let f of u){if(n?.isCancellationRequested)return wn.debug(s,"Cancelled after awaiting choices iterator"),{type:"canceled",reason:"after awaiting choices iterator",telemetryData:(0,gn.mkCanceledResultTelemetry)(r)};let p=Qge(f,e,d);p&&d.push(p)}if(d.length>0){for(let f of d)a.invokeFunction(EH,e,f);a.invokeFunction(Yut,"cyclingPerformance",d[0],c,l)}return{type:"success",value:[d,Promise.resolve()],telemetryData:(0,gn.mkBasicResultTelemetry)(r),telemetryBlob:r,resultType:Up.Cycling}})}function Xge(t,e){let r={...t};if(e.forceSingleLine){let{completionText:n}=r,o=n.match(/^\r?\n/);o?r.completionText=o[0]+n.split(`
`)[1]:r.completionText=n.split(`
`)[0]}return r}function $ut(t){return e=>{let r=e?.split(`
`)??[];if(r.length>t+1)return r.slice(0,t+1).join(`
`).length}}async function dqr(t,e,r,n,o,s,a,c){let l=t.get(pb.IInstantiationService),u=t.get(IP.ICompletionsFeaturesService),d=t.get(sqr.ICompletionsBlockModeConfig),f=u.multilineAfterAcceptLines(c),p=d.forLanguage(e.textDocument.detectedLanguageId,c);switch(p){case hs.BlockMode.Server:return a?{blockMode:hs.BlockMode.Parsing,requestMultiline:!0,finishedCb:$ut(f),stop:[`

`],maxTokens:But*f}:{blockMode:hs.BlockMode.Server,requestMultiline:!0,finishedCb:h=>{}};case hs.BlockMode.Parsing:case hs.BlockMode.ParsingAndServer:case hs.BlockMode.MoreMultiline:default:{let h;try{h=await l.invokeFunction(Tqr,p,e.textDocument,e.position,s,a,n)}catch{h={requestMultiline:!1}}if(!a&&h.requestMultiline&&u.singleLineUnlessAccepted(c)&&(h.requestMultiline=!1),h.requestMultiline){let _;return n.trailingWs.length>0&&!n.prompt.prefix.endsWith(n.trailingWs)?_=x3.LocationFactory.position(e.position.line,Math.max(e.position.character-n.trailingWs.length,0)):_=e.position,{blockMode:p,requestMultiline:!0,...l.invokeFunction(Vut,p,e.textDocument,_,h.blockPosition,r,!0,n.prompt,c)}}if(a){let _={blockMode:hs.BlockMode.Parsing,requestMultiline:!0,finishedCb:$ut(f),stop:[`

`],maxTokens:But*f};return p===hs.BlockMode.MoreMultiline&&(_.blockMode=hs.BlockMode.MoreMultiline),_}return{blockMode:p,requestMultiline:!1,...l.invokeFunction(Vut,p,e.textDocument,e.position,h.blockPosition,r,!1,n.prompt,c)}}}}function Vut(t,e,r,n,o,s,a,c,l){let u=t.get(IP.ICompletionsFeaturesService),d=t.get(pb.IInstantiationService);if(a&&e===hs.BlockMode.MoreMultiline&&db.BlockTrimmer.isSupported(r.detectedLanguageId)){let f=o===db.BlockPositionType.EmptyBlock||o===db.BlockPositionType.BlockEnd?u.longLookaheadSize(l):u.shortLookaheadSize(l);return{finishedCb:d.createInstance(cqr.StreamedCompletionSplitter,s,r.detectedLanguageId,!1,f,(h,_)=>{let g={prefix:s+h,prompt:{...c,prefix:c.prefix+h}};d.invokeFunction(EH,g,_)}).getFinishedCallback(),maxTokens:u.maxMultilineTokens(l)}}return{finishedCb:a?(0,A3.parsingBlockFinished)(r,n):f=>{}}}var fqr={isCycling:!1,promptOnly:!1,isSpeculative:!1};function pqr(t,e,r){let n=t.get(IP.ICompletionsFeaturesService),o=(0,hs.getConfig)(t,hs.ConfigKey.CompletionsDebounce)??n.completionsDebounce(r)??e.debounceMs;if(o===void 0)return 0;let s=(0,Zm.now)()-r.issuedTime;return Math.max(0,o-s)}function C3(t,e,r){return r?.isCancellationRequested||e!==t.currentRequestId}async function hqr(t,e,r,n,o,s){let a=n.issuedTime,c=[];function l(b){let w=(0,Zm.now)();c.push([b,w-a]),a=w}l("telemetry");let u=t.get(pb.IInstantiationService),d=t.get(IP.ICompletionsFeaturesService),f=t.get(oqr.ICompletionsAsyncManagerService),p=t.get(PP.ICompletionsLogTargetService),h=t.get(Jge.ICompletionsCurrentGhostText),_=t.get(rqr.ICompletionsStatusReporter);if(C3(h,r,o))return{type:"abortedBeforeIssued",reason:"cancelled before extractPrompt",telemetryData:(0,gn.mkBasicResultTelemetry)(n)};let g=_qr(e.textDocument,e.position);if(g===void 0)return wn.debug(p,"Breaking, invalid middle of the line"),{type:"abortedBeforeIssued",reason:"Invalid middle of the line",telemetryData:(0,gn.mkBasicResultTelemetry)(n)};let v=u.invokeFunction(eqr.getEngineRequestInfo,n),E={...fqr,...s,tokenizer:v.tokenizer},y=await u.invokeFunction(Fut.extractPrompt,r,e,n,void 0,E);if(l("prompt"),y.type==="copilotContentExclusion")return wn.debug(p,"Copilot not available, due to content exclusion"),{type:"abortedBeforeIssued",reason:"Copilot not available due to content exclusion",telemetryData:(0,gn.mkBasicResultTelemetry)(n)};if(y.type==="contextTooShort")return wn.debug(p,"Breaking, not enough context"),{type:"abortedBeforeIssued",reason:"Not enough context",telemetryData:(0,gn.mkBasicResultTelemetry)(n)};if(y.type==="promptError")return wn.debug(p,"Error while building the prompt"),{type:"abortedBeforeIssued",reason:"Error while building the prompt",telemetryData:(0,gn.mkBasicResultTelemetry)(n)};if(E.promptOnly)return{type:"promptOnly",reason:"Breaking, promptOnly set to true",prompt:y};if(y.type==="promptCancelled")return wn.debug(p,"Cancelled during extractPrompt"),{type:"abortedBeforeIssued",reason:"Cancelled during extractPrompt",telemetryData:(0,gn.mkBasicResultTelemetry)(n)};if(y.type==="promptTimeout")return wn.debug(p,"Timeout during extractPrompt"),{type:"abortedBeforeIssued",reason:"Timeout",telemetryData:(0,gn.mkBasicResultTelemetry)(n)};if(y.prompt.prefix.length===0&&y.prompt.suffix.length===0)return wn.debug(p,"Error empty prompt"),{type:"abortedBeforeIssued",reason:"Empty prompt",telemetryData:(0,gn.mkBasicResultTelemetry)(n)};let S=u.invokeFunction(pqr,E,n);return S>0&&(wn.debug(p,`Debouncing ghost text request for ${S}ms`),await(0,jut.delay)(S),C3(h,r,o))?{type:"abortedBeforeIssued",reason:"cancelled after debounce",telemetryData:(0,gn.mkBasicResultTelemetry)(n)}:_.withProgress(async()=>{let[b]=(0,Fut.trimLastLine)(e.textDocument.getText(x3.LocationFactory.range(x3.LocationFactory.position(0,0),e.position))),w=h.hasAcceptedCurrentCompletion(b,y.prompt.suffix),P=y.prompt,A=await u.invokeFunction(dqr,e,b,y,E.isCycling,g,w,n);l("strategy");let O=u.invokeFunction(gqr,b,P,A.requestMultiline);l("cache");let L=u.invokeFunction(Yge.extractRepoInfoInBackground,e.textDocument.uri),j={blockMode:A.blockMode,languageId:e.textDocument.detectedLanguageId,repoInfo:L,engineModelId:v.modelId,ourRequestId:r,prefix:b,prompt:y.prompt,multiline:A.requestMultiline,indentation:(0,A3.contextIndentation)(e.textDocument,e.position),isCycling:E.isCycling,headers:v.headers,stop:A.stop,maxTokens:A.maxTokens,afterAccept:w};j.headers={...j.headers,"X-Copilot-Async":"true","X-Copilot-Speculative":E.isSpeculative?"true":"false"};let $=u.invokeFunction(xqr,e.textDocument,j,e.position,y,n,v,E);if(O===void 0&&!E.isCycling&&f.shouldWaitForAsyncCompletions(b,y.prompt)){let ne=await f.getFirstMatchingRequestWithTimeout(r,b,y.prompt,E.isSpeculative,$);if(l("asyncWait"),ne){let de=!A.requestMultiline;O=[[Xge(ne[0],{forceSingleLine:de})],Up.Async]}if(C3(h,r,o))return wn.debug(p,"Cancelled before requesting a new completion"),{type:"abortedBeforeIssued",reason:"Cancelled after waiting for async completion",telemetryData:(0,gn.mkBasicResultTelemetry)($)}}let Q=A.blockMode===hs.BlockMode.MoreMultiline&&db.BlockTrimmer.isSupported(e.textDocument.detectedLanguageId);if(O!==void 0&&(O[0]=O[0].map(ne=>u.invokeFunction(Kge.postProcessChoiceInContext,e.textDocument,e.position,ne,Q,wn)).filter(ne=>ne!==void 0)),O!==void 0&&O[0].length===0)return wn.debug(p,`Found empty inline suggestions locally via ${(0,gn.resultTypeToString)(O[1])}`),{type:"empty",reason:"cached results empty after post-processing",telemetryData:(0,gn.mkBasicResultTelemetry)($)};if(O!==void 0&&O[0].length>0&&(!E.isCycling||O[0].length>1))wn.debug(p,`Found inline suggestions locally via ${(0,gn.resultTypeToString)(O[1])}`);else{if(E.isCycling){let ne=await u.invokeFunction(uqr,j,$,o,A.finishedCb);if(ne.type==="success"){let de=O?.[0]??[];ne.value[0].forEach(Ee=>{de.findIndex(Me=>Me.completionText.trim()===Ee.completionText.trim())===-1&&de.push(Ee)}),O=[de,Up.Cycling]}else if(O===void 0)return ne}else{let ne=(He,Je)=>(f.updateCompletion(r,He),A.finishedCb(He,Je)),de=new ZUr.CancellationTokenSource,Ee=u.invokeFunction(lqr,j,$,de.token,ne);f.queueCompletionRequest(r,b,y.prompt,de,Ee);let Me=await f.getFirstMatchingRequest(r,b,y.prompt,E.isSpeculative);if(Me===void 0)return{type:"empty",reason:"received no results from async completions",telemetryData:(0,gn.mkBasicResultTelemetry)($)};O=[[Me[0]],Up.Async]}l("network")}if(O===void 0)return{type:"failed",reason:"internal error: choices should be defined after network call",telemetryData:(0,gn.mkBasicResultTelemetry)($)};let[K,N]=O,G=K.map(ne=>u.invokeFunction(Kge.postProcessChoiceInContext,e.textDocument,e.position,ne,Q,wn)).filter(ne=>ne!==void 0),Y=u.invokeFunction(hs.getConfig,hs.ConfigKey.CompletionsDelay)??d.completionsDelay(n),J=(0,Zm.now)()-n.issuedTime,ie=Math.max(Y-J,0);if(N!==Up.TypingAsSuggested&&!E.isCycling&&ie>0&&(wn.debug(p,`Waiting ${ie}ms before returning completion`),await(0,jut.delay)(ie),C3(h,r,o)))return wn.debug(p,"Cancelled after completions delay"),{type:"canceled",reason:"after completions delay",telemetryData:(0,gn.mkCanceledResultTelemetry)($)};let oe=[];for(let ne of G){let de=Aqr(e.textDocument,j,ne,$),Ee=g?(0,Kge.checkSuffix)(e.textDocument,e.position,ne):0,He={completion:Sqr(ne.choiceIndex,ne.completionText,y.trailingWs),telemetry:de,isMiddleOfTheLine:g,suffixCoverage:Ee,copilotAnnotations:ne.copilotAnnotations,clientCompletionId:ne.clientCompletionId};oe.push(He)}return $.properties.clientCompletionId=oe[0]?.clientCompletionId,$.measurements.foundOffset=oe?.[0]?.telemetry?.measurements?.foundOffset??-1,wn.debug(p,`Produced ${oe.length} results from ${(0,gn.resultTypeToString)(N)} at ${$.measurements.foundOffset} offset`),C3(h,r,o)?{type:"canceled",reason:"after post processing completions",telemetryData:(0,gn.mkCanceledResultTelemetry)($)}:(E.isSpeculative||h.setGhostText(b,y.prompt.suffix,G,N),l("complete"),{type:"success",value:[oe,N],telemetryData:(0,gn.mkBasicResultTelemetry)($),telemetryBlob:$,resultType:N,performanceMetrics:c})})}async function mqr(t,e,r,n){let o=(0,YUr.generateUuid)(),s=t.get(pb.IInstantiationService),a=t.get(WUr.ITelemetryService),c=t.get(JUr.ICompletionsNotifierService),l=t.get(nqr.ICompletionsContextProviderBridgeService),u=t.get(Jge.ICompletionsCurrentGhostText),d=t.get(iqr.ICompletionsContextProviderService);u.currentRequestId=o;let f=await Cqr(t,e.textDocument,o,n);await QUr.initializeTokenizers.catch(()=>{});try{l.schedule(e,o,n?.opportunityId??"",f,r,n),c.notifyRequest(e,o,f,r,n);let p=await s.invokeFunction(hqr,e,o,f,r,n),h=d.getStatisticsForCompletion(o),_=n?.opportunityId??"unknown";for(let[g,v]of h.getAllUsageStatistics())a.sendMSFTTelemetryEvent("context-provider.completion-stats",{requestId:o,opportunityId:_,providerId:g,resolution:v.resolution,usage:v.usage,usageDetails:JSON.stringify(v.usageDetails)},{});return p}catch(p){if((0,Hut.isAbortError)(p))return{type:"canceled",reason:"aborted at unknown location",telemetryData:(0,gn.mkCanceledResultTelemetry)(f,{cancelledNetworkRequest:!0})};throw p}}function gqr(t,e,r,n){let s=t.get(Jge.ICompletionsCurrentGhostText).getCompletionsForUserTyping(e,r.suffix),a=bqr(t,e,r.suffix,n);if(s&&s.length>0){let c=(a??[]).filter(l=>!s.some(u=>u.completionText===l.completionText));return[s.concat(c),Up.TypingAsSuggested]}if(a&&a.length>0)return[a,Up.Cache]}function _qr(t,e){let r=vqr(e,t),n=yqr(e,t);return r&&!n?void 0:r&&n}function vqr(t,e){return e.lineAt(t).text.substr(t.character).trim().length!==0}function yqr(t,e){let n=e.lineAt(t).text.substr(t.character).trim();return/^\s*[)>}\]"'`]*\s*[:{;,]?\s*$/.test(n)}function Eqr(t,e){return e.lineAt(t).text.trim().length===0}var Zge=class t{static{this.default=new t}constructor(e=!1){this.requestMultilineOverride=e}};fb.ForceMultiLine=Zge;async function Tqr(t,e,r,n,o,s,a){if(r.lineCount>=8e3)(0,Zm.telemetry)(t,"ghostText.longFileMultilineSkip",Zm.TelemetryData.createAndMarkAsIssued({languageId:r.detectedLanguageId,lineCount:String(r.lineCount),currentLine:String(n.line)}));else{if(e===hs.BlockMode.MoreMultiline&&db.BlockTrimmer.isSupported(r.detectedLanguageId))return s?{requestMultiline:!0,blockPosition:await(0,db.getBlockPositionType)(r,n)}:{requestMultiline:!1};if(["typescript","typescriptreact"].includes(r.detectedLanguageId)&&Eqr(n,r))return{requestMultiline:!0};let l=!1;return!o&&(0,qut.isSupportedLanguageId)(r.detectedLanguageId)?l=await(0,A3.isEmptyBlockStartUtil)(r,n):o&&(0,qut.isSupportedLanguageId)(r.detectedLanguageId)&&(l=await(0,A3.isEmptyBlockStartUtil)(r,n)||await(0,A3.isEmptyBlockStartUtil)(r,r.lineAt(n).range.end)),l||["javascript","javascriptreact","python"].includes(r.detectedLanguageId)&&(l=(0,aqr.requestMultilineScore)(a.prompt,r.detectedLanguageId)>.5),{requestMultiline:l}}return{requestMultiline:!1}}function EH(t,e,r){t.get(zut.ICompletionsCacheService).append(e.prefix,e.prompt.suffix,r)}function Sqr(t,e,r){if(r.length>0){if(e.startsWith(r))return{completionIndex:t,completionText:e,displayText:e.substring(r.length),displayNeedsWsOffset:!1};{let n=e.substring(0,e.length-e.trimStart().length);return r.startsWith(n)?{completionIndex:t,completionText:e,displayText:e.trimStart(),displayNeedsWsOffset:!0}:{completionIndex:t,completionText:e,displayText:e,displayNeedsWsOffset:!1}}}else return{completionIndex:t,completionText:e,displayText:e,displayNeedsWsOffset:!1}}function bqr(t,e,r,n){let o=t.get(PP.ICompletionsLogTargetService),s=t.get(zut.ICompletionsCacheService).findAll(e,r);return s.length===0?(wn.debug(o,"Found no completions in cache"),[]):(wn.debug(o,`Found ${s.length} completions in cache`),s.map(a=>Xge(a,{forceSingleLine:!n})))}async function Cqr(t,e,r,n){let o=t.get(IP.ICompletionsFeaturesService),s={headerRequestId:r};n?.opportunityId&&(s.opportunityId=n.opportunityId),n?.selectedCompletionInfo?.text&&(s.completionsActive="true"),n?.isSpeculative&&(s.reason="speculative");let a=Zm.TelemetryData.createAndMarkAsIssued(s);return await o.updateExPValuesAndAssignments({uri:e.uri,languageId:e.detectedLanguageId},a)}function Aqr(t,e,r,n){let o=r.requestId,s={choiceIndex:r.choiceIndex.toString(),clientCompletionId:r.clientCompletionId};r.generatedChoiceIndex!==void 0&&(s.originalChoiceIndex=s.choiceIndex,s.choiceIndex=(1e4*(r.generatedChoiceIndex+1)+r.choiceIndex).toString());let a={compCharLen:r.completionText.length,numLines:r.completionText.trim().split(`
`).length};r.meanLogProb&&(a.meanLogProb=r.meanLogProb),r.meanAlternativeLogProb&&(a.meanAlternativeLogProb=r.meanAlternativeLogProb);let c=r.telemetryData.extendedBy(s,a);return c.issuedTime=n.issuedTime,c.measurements.timeToProduceMs=performance.now()-n.issuedTime,Kut(c,t),c.extendWithRequestId(o),c}function xqr(t,e,r,n,o,s,a,c){let l={languageId:e.detectedLanguageId};l.afterAccept=r.afterAccept.toString(),l.isSpeculative=c.isSpeculative.toString();let u=s.extendedBy(l);Kut(u,e);let d=r.repoInfo;u.properties.gitRepoInformation=d===void 0?"unavailable":d===Yge.ComputationStatus.PENDING?"pending":"available",d!==void 0&&d!==Yge.ComputationStatus.PENDING&&(u.properties.gitRepoUrl=d.url,u.properties.gitRepoHost=d.hostname,d.repoId?.type==="github"?(u.properties.gitRepoOwner=d.repoId.org,u.properties.gitRepoName=d.repoId.repo):d.repoId?.type==="ado"&&(u.properties.gitRepoOwner=d.repoId.project,u.properties.gitRepoName=d.repoId.repo),u.properties.gitRepoPath=d.pathname),u.properties.engineName=a.modelId,u.properties.engineChoiceSource=a.engineChoiceSource,u.properties.isMultiline=JSON.stringify(r.multiline),u.properties.isCycling=JSON.stringify(r.isCycling);let f=e.lineAt(n.line),p=e.getText(x3.LocationFactory.range(f.range.start,n)),h=e.getText(x3.LocationFactory.range(n,f.range.end)),_=Array.from(o.neighborSource.entries()).map(y=>[y[0],y[1].map(S=>(0,KUr.createSha256Hash)(S).toString())]),g={beforeCursorWhitespace:JSON.stringify(p.trim()===""),afterCursorWhitespace:JSON.stringify(h.trim()===""),neighborSource:JSON.stringify(_),blockMode:r.blockMode},v={...(0,Zm.telemetrizePromptLength)(o.prompt),promptEndPos:e.offsetAt(n),promptComputeTimeMs:o.computeTimeMs};o.metadata&&(g.promptMetadata=JSON.stringify(o.metadata)),o.contextProvidersTelemetry&&(g.contextProviders=JSON.stringify(o.contextProvidersTelemetry));let E=u.extendedBy(g,v);return(0,Zm.telemetry)(t,"ghostText.issued",E),u}function Kut(t,e){t.measurements.documentLength=e.getText().length,t.measurements.documentLineCount=e.lineCount}function Yut(t,e,r,n,o){let s=Date.now()-n,a=s-o,c=r.telemetryData.extendedBy({},{completionCharLen:r.completionText.length,requestTimeMs:s,processingTimeMs:o,deltaMs:a,meanLogProb:r.meanLogProb||NaN,meanAlternativeLogProb:r.meanAlternativeLogProb||NaN});c.extendWithRequestId(r.requestId),(0,Zm.telemetry)(t,`ghostText.${e}`,c)}});var e_e=m(RP=>{"use strict";Object.defineProperty(RP,"__esModule",{value:!0});RP.CurrentGhostText=RP.ICompletionsCurrentGhostText=void 0;var wqr=Qe(),Iqr=wP();RP.ICompletionsCurrentGhostText=(0,wqr.createServiceIdentifier)("ICompletionsCurrentGhostText");var t_e=class{constructor(){this.choices=[]}get clientCompletionId(){return this.choices[0]?.clientCompletionId}setGhostText(e,r,n,o){o!==Iqr.ResultType.TypingAsSuggested&&(this.prefix=e,this.suffix=r,this.choices=n)}getCompletionsForUserTyping(e,r){let n=this.getRemainingPrefix(e,r);if(n!==void 0&&Qut(this.choices[0].completionText,n))return Pqr(this.choices,n)}hasAcceptedCurrentCompletion(e,r){let n=this.getRemainingPrefix(e,r);if(n===void 0)return!1;let o=n===this.choices?.[0].completionText,s=this.choices?.[0].finishReason;return o&&s==="stop"}getRemainingPrefix(e,r){if(!(this.prefix===void 0||this.suffix===void 0||this.choices.length===0)&&this.suffix===r&&e.startsWith(this.prefix))return e.substring(this.prefix.length)}};RP.CurrentGhostText=t_e;function Pqr(t,e){return t.filter(r=>Qut(r.completionText,e)).map(r=>({...r,completionText:r.completionText.substring(e.length)}))}function Qut(t,e){return t.startsWith(e)&&t.length>e.length}});var Zut=m(Jm=>{"use strict";var Rqr=Jm&&Jm.__decorate||function(t,e,r,n){var o=arguments.length,s=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(o<3?a(s):o>3?a(e,r,s):a(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},Oqr=Jm&&Jm.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(Jm,"__esModule",{value:!0});Jm.ChangeTracker=void 0;var Mqr=Xl(),r_e=class{get offset(){return this._offset}constructor(e,r,n){this._referenceCount=0,this._isDisposed=!1,this._offset=r,this._tracker=n.onDidChangeTextDocument(o=>{if(o.document.uri===e){for(let s of o.contentChanges)if(s.rangeOffset+s.rangeLength<=this.offset){let a=s.text.length-s.rangeLength;this._offset=this._offset+a}}})}push(e,r){if(this._isDisposed)throw new Error("Unable to push new actions to a disposed ChangeTracker");this._referenceCount++,setTimeout(()=>{e(),this._referenceCount--,this._referenceCount===0&&(this._tracker.dispose(),this._isDisposed=!0)},r)}};Jm.ChangeTracker=r_e;Jm.ChangeTracker=r_e=Rqr([Oqr(2,Mqr.ICompletionsTextDocumentManagerService)],r_e)});var i_e=m(w3=>{"use strict";Object.defineProperty(w3,"__esModule",{value:!0});w3.CompletionState=void 0;w3.createCompletionState=Nqr;var n_e=T$(),TH=class t{constructor(e,r,n=[],o,s,a){this._textDocument=e,this._position=r,this.originalPosition=o??n_e.Position.create(r.line,r.character),this.originalVersion=s??e.version,this.originalOffset=a??e.offsetAt(this.originalPosition),this._editsWithPosition=[...n]}get textDocument(){return this._textDocument}get position(){return this._position}get editsWithPosition(){return[...this._editsWithPosition]}updateState(e,r,n){return new t(e,r,n??this.editsWithPosition,this.originalPosition,this.originalVersion,this.originalOffset)}updatePosition(e){return this.updateState(this._textDocument,e)}addSelectedCompletionInfo(e){if(this.editsWithPosition.find(n=>n.source==="selectedCompletionInfo"))throw new Error("Selected completion info already applied");let r={range:e.range,newText:e.text};return this.applyEdits([r],!0)}applyEdits(e,r=!1){if(r&&e.length>1)throw new Error("Selected completion info should be a single edit");let n=this._textDocument,o=this._position,s=n.offsetAt(o),a=this.editsWithPosition;for(let{range:c,newText:l}of e){let u=n.getText(c),d=n.offsetAt(c.end);if(n=n.applyEdits([{range:c,newText:l}]),s<n.offsetAt(c.start)){let p={range:c,newText:l,positionAfterEdit:n_e.Position.create(o.line,o.character)};r&&(p.source="selectedCompletionInfo"),a.push(p);continue}s<d&&(s=d),s+=l.length-u.length,o=n.positionAt(s);let f={range:c,newText:l,positionAfterEdit:n_e.Position.create(o.line,o.character)};r&&(f.source="selectedCompletionInfo"),a.push(f)}return this.updateState(n,o,a)}};w3.CompletionState=TH;function Nqr(t,e){return new TH(t,e)}});var rdt=m(Xm=>{"use strict";var Lqr=Xm&&Xm.__classPrivateFieldSet||function(t,e,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(t,r):o?o.value=r:e.set(t,r),r},Xut=Xm&&Xm.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},o_e,SH,edt;Object.defineProperty(Xm,"__esModule",{value:!0});Xm.AssertError=void 0;Xm.Assert=Uqr;var tdt=rv(),kqr=Lue(),Dqr=tme(),bH=class extends kqr.TypeBoxError{constructor(e){let r=e.First();super(r===void 0?"Invalid Value":r.message),o_e.add(this),SH.set(this,void 0),Lqr(this,SH,e,"f"),this.error=r}Errors(){return new tdt.ValueErrorIterator(Xut(this,o_e,"m",edt).call(this))}};Xm.AssertError=bH;SH=new WeakMap,o_e=new WeakSet,edt=function*(){this.error&&(yield this.error),yield*Xut(this,SH,"f")};function Jut(t,e,r){if(!(0,Dqr.Check)(t,e,r))throw new bH((0,tdt.Errors)(t,e,r))}function Uqr(...t){return t.length===3?Jut(t[0],t[1],t[2]):Jut(t[0],[],t[1])}});var CH=m(hb=>{"use strict";var qqr=hb&&hb.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),Fqr=hb&&hb.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&qqr(e,t,r)};Object.defineProperty(hb,"__esModule",{value:!0});Fqr(rdt(),hb)});var ndt=m(s_e=>{"use strict";Object.defineProperty(s_e,"__esModule",{value:!0});s_e.Clone=OP;var mb=bo();function jqr(t){let e={};for(let r of Object.getOwnPropertyNames(t))e[r]=OP(t[r]);for(let r of Object.getOwnPropertySymbols(t))e[r]=OP(t[r]);return e}function Bqr(t){return t.map(e=>OP(e))}function $qr(t){return t.slice()}function Vqr(t){return new Map(OP([...t.entries()]))}function Hqr(t){return new Set(OP([...t.entries()]))}function Gqr(t){return new Date(t.toISOString())}function OP(t){if((0,mb.IsArray)(t))return Bqr(t);if((0,mb.IsDate)(t))return Gqr(t);if((0,mb.IsTypedArray)(t))return $qr(t);if((0,mb.IsMap)(t))return Vqr(t);if((0,mb.IsSet)(t))return Hqr(t);if((0,mb.IsObject)(t))return jqr(t);if((0,mb.IsValueType)(t))return t;throw new Error("ValueClone: Unable to clone value")}});var Uf=m(gb=>{"use strict";var zqr=gb&&gb.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),Wqr=gb&&gb.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&zqr(e,t,r)};Object.defineProperty(gb,"__esModule",{value:!0});Wqr(ndt(),gb)});var adt=m(I3=>{"use strict";Object.defineProperty(I3,"__esModule",{value:!0});I3.ValueCreateError=void 0;I3.Create=LFr;var Zr=bo(),Kqr=iu(),Yqr=Uf(),a_e=ld(),idt=sf(),Qqr=qT(),odt=Ze(),Zqr=vi(),Jqr=sB(),ol=class extends Zqr.TypeBoxError{constructor(e,r){super(r),this.schema=e}};I3.ValueCreateError=ol;function rn(t){return(0,Jqr.IsFunction)(t)?t():(0,Yqr.Clone)(t)}function Xqr(t,e){return(0,Zr.HasPropertyKey)(t,"default")?rn(t.default):{}}function eFr(t,e){return{}}function tFr(t,e){if(t.uniqueItems===!0&&!(0,Zr.HasPropertyKey)(t,"default"))throw new ol(t,"Array with the uniqueItems constraint requires a default value");if("contains"in t&&!(0,Zr.HasPropertyKey)(t,"default"))throw new ol(t,"Array with the contains constraint requires a default value");return"default"in t?rn(t.default):t.minItems!==void 0?Array.from({length:t.minItems}).map(r=>au(t.items,e)):[]}function rFr(t,e){return(0,Zr.HasPropertyKey)(t,"default")?rn(t.default):(async function*(){})()}function nFr(t,e){return(0,Zr.HasPropertyKey)(t,"default")?rn(t.default):BigInt(0)}function iFr(t,e){return(0,Zr.HasPropertyKey)(t,"default")?rn(t.default):!1}function oFr(t,e){if((0,Zr.HasPropertyKey)(t,"default"))return rn(t.default);{let r=au(t.returns,e);return typeof r=="object"&&!Array.isArray(r)?class{constructor(){for(let[n,o]of Object.entries(r)){let s=this;s[n]=o}}}:class{}}}function sFr(t,e){return(0,Zr.HasPropertyKey)(t,"default")?rn(t.default):t.minimumTimestamp!==void 0?new Date(t.minimumTimestamp):new Date}function aFr(t,e){return(0,Zr.HasPropertyKey)(t,"default")?rn(t.default):()=>au(t.returns,e)}function cFr(t,e){let r=globalThis.Object.values(t.$defs),n=t.$defs[t.$ref];return au(n,[...e,...r])}function lFr(t,e){return(0,Zr.HasPropertyKey)(t,"default")?rn(t.default):t.minimum!==void 0?t.minimum:0}function uFr(t,e){if((0,Zr.HasPropertyKey)(t,"default"))return rn(t.default);{let r=t.allOf.reduce((n,o)=>{let s=au(o,e);return typeof s=="object"?{...n,...s}:s},{});if(!(0,Kqr.Check)(t,e,r))throw new ol(t,"Intersect produced invalid value. Consider using a default value.");return r}}function dFr(t,e){return(0,Zr.HasPropertyKey)(t,"default")?rn(t.default):(function*(){})()}function fFr(t,e){return(0,Zr.HasPropertyKey)(t,"default")?rn(t.default):t.const}function pFr(t,e){if((0,Zr.HasPropertyKey)(t,"default"))return rn(t.default);throw new ol(t,"Never types cannot be created. Consider using a default value.")}function hFr(t,e){if((0,Zr.HasPropertyKey)(t,"default"))return rn(t.default);throw new ol(t,"Not types must have a default value")}function mFr(t,e){return(0,Zr.HasPropertyKey)(t,"default")?rn(t.default):null}function gFr(t,e){return(0,Zr.HasPropertyKey)(t,"default")?rn(t.default):t.minimum!==void 0?t.minimum:0}function _Fr(t,e){if((0,Zr.HasPropertyKey)(t,"default"))return rn(t.default);{let r=new Set(t.required),n={};for(let[o,s]of Object.entries(t.properties))r.has(o)&&(n[o]=au(s,e));return n}}function vFr(t,e){return(0,Zr.HasPropertyKey)(t,"default")?rn(t.default):Promise.resolve(au(t.item,e))}function yFr(t,e){return(0,Zr.HasPropertyKey)(t,"default")?rn(t.default):{}}function EFr(t,e){return(0,Zr.HasPropertyKey)(t,"default")?rn(t.default):au((0,a_e.Deref)(t,e),e)}function TFr(t,e){if((0,Zr.HasPropertyKey)(t,"default"))return rn(t.default);throw new ol(t,"RegExp types cannot be created. Consider using a default value.")}function SFr(t,e){if(t.pattern!==void 0){if((0,Zr.HasPropertyKey)(t,"default"))return rn(t.default);throw new ol(t,"String types with patterns must specify a default value")}else if(t.format!==void 0){if((0,Zr.HasPropertyKey)(t,"default"))return rn(t.default);throw new ol(t,"String types with formats must specify a default value")}else return(0,Zr.HasPropertyKey)(t,"default")?rn(t.default):t.minLength!==void 0?Array.from({length:t.minLength}).map(()=>" ").join(""):""}function bFr(t,e){return(0,Zr.HasPropertyKey)(t,"default")?rn(t.default):"value"in t?Symbol.for(t.value):Symbol()}function CFr(t,e){if((0,Zr.HasPropertyKey)(t,"default"))return rn(t.default);if(!(0,idt.IsTemplateLiteralFinite)(t))throw new ol(t,"Can only create template literals that produce a finite variants. Consider using a default value.");return(0,idt.TemplateLiteralGenerate)(t)[0]}function AFr(t,e){if(sdt++>NFr)throw new ol(t,"Cannot create recursive type as it appears possibly infinite. Consider using a default.");return(0,Zr.HasPropertyKey)(t,"default")?rn(t.default):au((0,a_e.Deref)(t,e),e)}function xFr(t,e){return(0,Zr.HasPropertyKey)(t,"default")?rn(t.default):t.items===void 0?[]:Array.from({length:t.minItems}).map((r,n)=>au(t.items[n],e))}function wFr(t,e){if((0,Zr.HasPropertyKey)(t,"default"))return rn(t.default)}function IFr(t,e){if((0,Zr.HasPropertyKey)(t,"default"))return rn(t.default);if(t.anyOf.length===0)throw new Error("ValueCreate.Union: Cannot create Union with zero variants");return au(t.anyOf[0],e)}function PFr(t,e){return(0,Zr.HasPropertyKey)(t,"default")?rn(t.default):t.minByteLength!==void 0?new Uint8Array(t.minByteLength):new Uint8Array(0)}function RFr(t,e){return(0,Zr.HasPropertyKey)(t,"default")?rn(t.default):{}}function OFr(t,e){if((0,Zr.HasPropertyKey)(t,"default"))return rn(t.default)}function MFr(t,e){if((0,Zr.HasPropertyKey)(t,"default"))return rn(t.default);throw new Error("User defined types must specify a default value")}function au(t,e){let r=(0,a_e.Pushref)(t,e),n=t;switch(n[odt.Kind]){case"Any":return Xqr(n,r);case"Argument":return eFr(n,r);case"Array":return tFr(n,r);case"AsyncIterator":return rFr(n,r);case"BigInt":return nFr(n,r);case"Boolean":return iFr(n,r);case"Constructor":return oFr(n,r);case"Date":return sFr(n,r);case"Function":return aFr(n,r);case"Import":return cFr(n,r);case"Integer":return lFr(n,r);case"Intersect":return uFr(n,r);case"Iterator":return dFr(n,r);case"Literal":return fFr(n,r);case"Never":return pFr(n,r);case"Not":return hFr(n,r);case"Null":return mFr(n,r);case"Number":return gFr(n,r);case"Object":return _Fr(n,r);case"Promise":return vFr(n,r);case"Record":return yFr(n,r);case"Ref":return EFr(n,r);case"RegExp":return TFr(n,r);case"String":return SFr(n,r);case"Symbol":return bFr(n,r);case"TemplateLiteral":return CFr(n,r);case"This":return AFr(n,r);case"Tuple":return xFr(n,r);case"Undefined":return wFr(n,r);case"Union":return IFr(n,r);case"Uint8Array":return PFr(n,r);case"Unknown":return RFr(n,r);case"Void":return OFr(n,r);default:if(!Qqr.TypeRegistry.Has(n[odt.Kind]))throw new ol(n,"Unknown type");return MFr(n,r)}}var NFr=512,sdt=0;function LFr(...t){return sdt=0,t.length===2?au(t[0],t[1]):au(t[0],[])}});var AH=m(_b=>{"use strict";var kFr=_b&&_b.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),DFr=_b&&_b.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&kFr(e,t,r)};Object.defineProperty(_b,"__esModule",{value:!0});DFr(adt(),_b)});var ddt=m(O3=>{"use strict";Object.defineProperty(O3,"__esModule",{value:!0});O3.ValueCastError=void 0;O3.Cast=udt;var hd=bo(),UFr=vi(),xH=Ze(),pv=AH(),cu=iu(),vb=Uf(),R3=ld(),P3=class extends UFr.TypeBoxError{constructor(e,r){super(r),this.schema=e}};O3.ValueCastError=P3;function cdt(t,e,r){if(t[xH.Kind]==="Object"&&typeof r=="object"&&!(0,hd.IsNull)(r)){let n=t,o=Object.getOwnPropertyNames(r);return Object.entries(n.properties).reduce((a,[c,l])=>{let u=l[xH.Kind]==="Literal"&&l.const===r[c]?100:0,d=(0,cu.Check)(l,e,r[c])?10:0,f=o.includes(c)?1:0;return a+(u+d+f)},0)}else if(t[xH.Kind]==="Union"){let o=t.anyOf.map(s=>(0,R3.Deref)(s,e)).map(s=>cdt(s,e,r));return Math.max(...o)}else return(0,cu.Check)(t,e,r)?1:0}function qFr(t,e,r){let n=t.anyOf.map(a=>(0,R3.Deref)(a,e)),[o,s]=[n[0],0];for(let a of n){let c=cdt(a,e,r);c>s&&(o=a,s=c)}return o}function FFr(t,e,r){if("default"in t)return typeof r=="function"?t.default:(0,vb.Clone)(t.default);{let n=qFr(t,e,r);return udt(n,e,r)}}function jFr(t,e,r){return(0,cu.Check)(t,e,r)?(0,vb.Clone)(r):(0,pv.Create)(t,e)}function BFr(t,e,r){return(0,cu.Check)(t,e,r)?r:(0,pv.Create)(t,e)}function $Fr(t,e,r){if((0,cu.Check)(t,e,r))return(0,vb.Clone)(r);let n=(0,hd.IsArray)(r)?(0,vb.Clone)(r):(0,pv.Create)(t,e),o=(0,hd.IsNumber)(t.minItems)&&n.length<t.minItems?[...n,...Array.from({length:t.minItems-n.length},()=>null)]:n,a=((0,hd.IsNumber)(t.maxItems)&&o.length>t.maxItems?o.slice(0,t.maxItems):o).map(l=>qf(t.items,e,l));if(t.uniqueItems!==!0)return a;let c=[...new Set(a)];if(!(0,cu.Check)(t,e,c))throw new P3(t,"Array cast produced invalid data due to uniqueItems constraint");return c}function VFr(t,e,r){if((0,cu.Check)(t,e,r))return(0,pv.Create)(t,e);let n=new Set(t.returns.required||[]),o=function(){};for(let[s,a]of Object.entries(t.returns.properties))!n.has(s)&&r.prototype[s]===void 0||(o.prototype[s]=qf(a,e,r.prototype[s]));return o}function HFr(t,e,r){let n=globalThis.Object.values(t.$defs),o=t.$defs[t.$ref];return qf(o,[...e,...n],r)}function ldt(t,e){return(0,hd.IsObject)(t)&&!(0,hd.IsObject)(e)||!(0,hd.IsObject)(t)&&(0,hd.IsObject)(e)?t:!(0,hd.IsObject)(t)||!(0,hd.IsObject)(e)?e:globalThis.Object.getOwnPropertyNames(t).reduce((r,n)=>{let o=n in e?ldt(t[n],e[n]):t[n];return{...r,[n]:o}},{})}function GFr(t,e,r){if((0,cu.Check)(t,e,r))return r;let n=(0,pv.Create)(t,e),o=ldt(n,r);return(0,cu.Check)(t,e,o)?o:n}function zFr(t,e,r){throw new P3(t,"Never types cannot be cast")}function WFr(t,e,r){if((0,cu.Check)(t,e,r))return r;if(r===null||typeof r!="object")return(0,pv.Create)(t,e);let n=new Set(t.required||[]),o={};for(let[s,a]of Object.entries(t.properties))!n.has(s)&&r[s]===void 0||(o[s]=qf(a,e,r[s]));if(typeof t.additionalProperties=="object"){let s=Object.getOwnPropertyNames(t.properties);for(let a of Object.getOwnPropertyNames(r))s.includes(a)||(o[a]=qf(t.additionalProperties,e,r[a]))}return o}function KFr(t,e,r){if((0,cu.Check)(t,e,r))return(0,vb.Clone)(r);if(r===null||typeof r!="object"||Array.isArray(r)||r instanceof Date)return(0,pv.Create)(t,e);let n=Object.getOwnPropertyNames(t.patternProperties)[0],o=t.patternProperties[n],s={};for(let[a,c]of Object.entries(r))s[a]=qf(o,e,c);return s}function YFr(t,e,r){return qf((0,R3.Deref)(t,e),e,r)}function QFr(t,e,r){return qf((0,R3.Deref)(t,e),e,r)}function ZFr(t,e,r){return(0,cu.Check)(t,e,r)?(0,vb.Clone)(r):(0,hd.IsArray)(r)?t.items===void 0?[]:t.items.map((n,o)=>qf(n,e,r[o])):(0,pv.Create)(t,e)}function JFr(t,e,r){return(0,cu.Check)(t,e,r)?(0,vb.Clone)(r):FFr(t,e,r)}function qf(t,e,r){let n=(0,hd.IsString)(t.$id)?(0,R3.Pushref)(t,e):e,o=t;switch(t[xH.Kind]){case"Array":return $Fr(o,n,r);case"Constructor":return VFr(o,n,r);case"Import":return HFr(o,n,r);case"Intersect":return GFr(o,n,r);case"Never":return zFr(o,n,r);case"Object":return WFr(o,n,r);case"Record":return KFr(o,n,r);case"Ref":return YFr(o,n,r);case"This":return QFr(o,n,r);case"Tuple":return ZFr(o,n,r);case"Union":return JFr(o,n,r);case"Date":case"Symbol":case"Uint8Array":return jFr(t,e,r);default:return BFr(o,n,r)}}function udt(...t){return t.length===3?qf(t[0],t[1],t[2]):qf(t[0],[],t[1])}});var wH=m(yb=>{"use strict";var XFr=yb&&yb.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),ejr=yb&&yb.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&XFr(e,t,r)};Object.defineProperty(yb,"__esModule",{value:!0});ejr(ddt(),yb)});var pdt=m(l_e=>{"use strict";Object.defineProperty(l_e,"__esModule",{value:!0});l_e.Clean=pjr;var tjr=ed(),IH=iu(),rjr=Uf(),c_e=ld(),fdt=Ze(),Ff=bo(),PH=Er();function njr(t){return(0,PH.IsKind)(t)&&t[fdt.Kind]!=="Unsafe"}function ijr(t,e,r){return(0,Ff.IsArray)(r)?r.map(n=>sl(t.items,e,n)):r}function ojr(t,e,r){let n=globalThis.Object.values(t.$defs),o=t.$defs[t.$ref];return sl(o,[...e,...n],r)}function sjr(t,e,r){let n=t.unevaluatedProperties,s=t.allOf.map(c=>sl(c,e,(0,rjr.Clone)(r))).reduce((c,l)=>(0,Ff.IsObject)(l)?{...c,...l}:l,{});if(!(0,Ff.IsObject)(r)||!(0,Ff.IsObject)(s)||!(0,PH.IsKind)(n))return s;let a=(0,tjr.KeyOfPropertyKeys)(t);for(let c of Object.getOwnPropertyNames(r))a.includes(c)||(0,IH.Check)(n,e,r[c])&&(s[c]=sl(n,e,r[c]));return s}function ajr(t,e,r){if(!(0,Ff.IsObject)(r)||(0,Ff.IsArray)(r))return r;let n=t.additionalProperties;for(let o of Object.getOwnPropertyNames(r)){if((0,Ff.HasPropertyKey)(t.properties,o)){r[o]=sl(t.properties[o],e,r[o]);continue}if((0,PH.IsKind)(n)&&(0,IH.Check)(n,e,r[o])){r[o]=sl(n,e,r[o]);continue}delete r[o]}return r}function cjr(t,e,r){if(!(0,Ff.IsObject)(r))return r;let n=t.additionalProperties,o=Object.getOwnPropertyNames(r),[s,a]=Object.entries(t.patternProperties)[0],c=new RegExp(s);for(let l of o){if(c.test(l)){r[l]=sl(a,e,r[l]);continue}if((0,PH.IsKind)(n)&&(0,IH.Check)(n,e,r[l])){r[l]=sl(n,e,r[l]);continue}delete r[l]}return r}function ljr(t,e,r){return sl((0,c_e.Deref)(t,e),e,r)}function ujr(t,e,r){return sl((0,c_e.Deref)(t,e),e,r)}function djr(t,e,r){if(!(0,Ff.IsArray)(r))return r;if((0,Ff.IsUndefined)(t.items))return[];let n=Math.min(r.length,t.items.length);for(let o=0;o<n;o++)r[o]=sl(t.items[o],e,r[o]);return r.length>n?r.slice(0,n):r}function fjr(t,e,r){for(let n of t.anyOf)if(njr(n)&&(0,IH.Check)(n,e,r))return sl(n,e,r);return r}function sl(t,e,r){let n=(0,Ff.IsString)(t.$id)?(0,c_e.Pushref)(t,e):e,o=t;switch(o[fdt.Kind]){case"Array":return ijr(o,n,r);case"Import":return ojr(o,n,r);case"Intersect":return sjr(o,n,r);case"Object":return ajr(o,n,r);case"Record":return cjr(o,n,r);case"Ref":return ljr(o,n,r);case"This":return ujr(o,n,r);case"Tuple":return djr(o,n,r);case"Union":return fjr(o,n,r);default:return r}}function pjr(...t){return t.length===3?sl(t[0],t[1],t[2]):sl(t[0],[],t[1])}});var RH=m(Eb=>{"use strict";var hjr=Eb&&Eb.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),mjr=Eb&&Eb.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&hjr(e,t,r)};Object.defineProperty(Eb,"__esModule",{value:!0});mjr(pdt(),Eb)});var vdt=m(d_e=>{"use strict";Object.defineProperty(d_e,"__esModule",{value:!0});d_e.Convert=Jjr;var gjr=Uf(),hdt=iu(),u_e=ld(),_jr=Ze(),Jr=bo();function OH(t){return(0,Jr.IsString)(t)&&!isNaN(t)&&!isNaN(parseFloat(t))}function vjr(t){return(0,Jr.IsBigInt)(t)||(0,Jr.IsBoolean)(t)||(0,Jr.IsNumber)(t)}function M3(t){return t===!0||(0,Jr.IsNumber)(t)&&t===1||(0,Jr.IsBigInt)(t)&&t===BigInt("1")||(0,Jr.IsString)(t)&&(t.toLowerCase()==="true"||t==="1")}function N3(t){return t===!1||(0,Jr.IsNumber)(t)&&(t===0||Object.is(t,-0))||(0,Jr.IsBigInt)(t)&&t===BigInt("0")||(0,Jr.IsString)(t)&&(t.toLowerCase()==="false"||t==="0"||t==="-0")}function yjr(t){return(0,Jr.IsString)(t)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test(t)}function Ejr(t){return(0,Jr.IsString)(t)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test(t)}function Tjr(t){return(0,Jr.IsString)(t)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test(t)}function Sjr(t){return(0,Jr.IsString)(t)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test(t)}function bjr(t){return(0,Jr.IsString)(t)&&/^\d\d\d\d-[0-1]\d-[0-3]\d$/i.test(t)}function Cjr(t,e){let r=gdt(t);return r===e?r:t}function Ajr(t,e){let r=_dt(t);return r===e?r:t}function xjr(t,e){let r=mdt(t);return r===e?r:t}function wjr(t,e){return(0,Jr.IsString)(t.const)?Cjr(e,t.const):(0,Jr.IsNumber)(t.const)?Ajr(e,t.const):(0,Jr.IsBoolean)(t.const)?xjr(e,t.const):e}function mdt(t){return M3(t)?!0:N3(t)?!1:t}function Ijr(t){let e=r=>r.split(".")[0];return OH(t)?BigInt(e(t)):(0,Jr.IsNumber)(t)?BigInt(Math.trunc(t)):N3(t)?BigInt(0):M3(t)?BigInt(1):t}function gdt(t){return(0,Jr.IsSymbol)(t)&&t.description!==void 0?t.description.toString():vjr(t)?t.toString():t}function _dt(t){return OH(t)?parseFloat(t):M3(t)?1:N3(t)?0:t}function Pjr(t){return OH(t)?parseInt(t):(0,Jr.IsNumber)(t)?Math.trunc(t):M3(t)?1:N3(t)?0:t}function Rjr(t){return(0,Jr.IsString)(t)&&t.toLowerCase()==="null"?null:t}function Ojr(t){return(0,Jr.IsString)(t)&&t==="undefined"?void 0:t}function Mjr(t){return(0,Jr.IsDate)(t)?t:(0,Jr.IsNumber)(t)?new Date(t):M3(t)?new Date(1):N3(t)?new Date(0):OH(t)?new Date(parseInt(t)):Ejr(t)?new Date(`1970-01-01T${t}.000Z`):yjr(t)?new Date(`1970-01-01T${t}`):Sjr(t)?new Date(`${t}.000Z`):Tjr(t)?new Date(t):bjr(t)?new Date(`${t}T00:00:00.000Z`):t}function Njr(t,e,r){return((0,Jr.IsArray)(r)?r:[r]).map(o=>jf(t.items,e,o))}function Ljr(t,e,r){return Ijr(r)}function kjr(t,e,r){return mdt(r)}function Djr(t,e,r){return Mjr(r)}function Ujr(t,e,r){let n=globalThis.Object.values(t.$defs),o=t.$defs[t.$ref];return jf(o,[...e,...n],r)}function qjr(t,e,r){return Pjr(r)}function Fjr(t,e,r){return t.allOf.reduce((n,o)=>jf(o,e,n),r)}function jjr(t,e,r){return wjr(t,r)}function Bjr(t,e,r){return Rjr(r)}function $jr(t,e,r){return _dt(r)}function Vjr(t,e,r){if(!(0,Jr.IsObject)(r)||(0,Jr.IsArray)(r))return r;for(let n of Object.getOwnPropertyNames(t.properties))(0,Jr.HasPropertyKey)(r,n)&&(r[n]=jf(t.properties[n],e,r[n]));return r}function Hjr(t,e,r){if(!((0,Jr.IsObject)(r)&&!(0,Jr.IsArray)(r)))return r;let o=Object.getOwnPropertyNames(t.patternProperties)[0],s=t.patternProperties[o];for(let[a,c]of Object.entries(r))r[a]=jf(s,e,c);return r}function Gjr(t,e,r){return jf((0,u_e.Deref)(t,e),e,r)}function zjr(t,e,r){return gdt(r)}function Wjr(t,e,r){return(0,Jr.IsString)(r)||(0,Jr.IsNumber)(r)?Symbol(r):r}function Kjr(t,e,r){return jf((0,u_e.Deref)(t,e),e,r)}function Yjr(t,e,r){return(0,Jr.IsArray)(r)&&!(0,Jr.IsUndefined)(t.items)?r.map((o,s)=>s<t.items.length?jf(t.items[s],e,o):o):r}function Qjr(t,e,r){return Ojr(r)}function Zjr(t,e,r){for(let n of t.anyOf)if((0,hdt.Check)(n,e,r))return r;for(let n of t.anyOf){let o=jf(n,e,(0,gjr.Clone)(r));if((0,hdt.Check)(n,e,o))return o}return r}function jf(t,e,r){let n=(0,u_e.Pushref)(t,e),o=t;switch(t[_jr.Kind]){case"Array":return Njr(o,n,r);case"BigInt":return Ljr(o,n,r);case"Boolean":return kjr(o,n,r);case"Date":return Djr(o,n,r);case"Import":return Ujr(o,n,r);case"Integer":return qjr(o,n,r);case"Intersect":return Fjr(o,n,r);case"Literal":return jjr(o,n,r);case"Null":return Bjr(o,n,r);case"Number":return $jr(o,n,r);case"Object":return Vjr(o,n,r);case"Record":return Hjr(o,n,r);case"Ref":return Gjr(o,n,r);case"String":return zjr(o,n,r);case"Symbol":return Wjr(o,n,r);case"This":return Kjr(o,n,r);case"Tuple":return Yjr(o,n,r);case"Undefined":return Qjr(o,n,r);case"Union":return Zjr(o,n,r);default:return r}}function Jjr(...t){return t.length===3?jf(t[0],t[1],t[2]):jf(t[0],[],t[1])}});var MH=m(Tb=>{"use strict";var Xjr=Tb&&Tb.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),eBr=Tb&&Tb.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Xjr(e,t,r)};Object.defineProperty(Tb,"__esModule",{value:!0});eBr(vdt(),Tb)});var ydt=m(p_e=>{"use strict";Object.defineProperty(p_e,"__esModule",{value:!0});p_e.Decode=nBr;var f_e=gP(),tBr=iu(),rBr=rv();function nBr(...t){let[e,r,n]=t.length===3?[t[0],t[1],t[2]]:[t[0],[],t[1]];if(!(0,tBr.Check)(e,r,n))throw new f_e.TransformDecodeCheckError(e,n,(0,rBr.Errors)(e,r,n).First());return(0,f_e.HasTransform)(e,r)?(0,f_e.TransformDecode)(e,r,n):n}});var h_e=m(Sb=>{"use strict";var iBr=Sb&&Sb.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),oBr=Sb&&Sb.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&iBr(e,t,r)};Object.defineProperty(Sb,"__esModule",{value:!0});oBr(ydt(),Sb)});var Tdt=m(__e=>{"use strict";Object.defineProperty(__e,"__esModule",{value:!0});__e.Default=yBr;var sBr=iu(),Edt=Uf(),g_e=ld(),aBr=Ze(),al=bo(),cBr=Er();function eg(t,e){let r=(0,al.HasPropertyKey)(t,"default")?t.default:void 0,n=(0,al.IsFunction)(r)?r():(0,Edt.Clone)(r);return(0,al.IsUndefined)(e)?n:(0,al.IsObject)(e)&&(0,al.IsObject)(n)?Object.assign(n,e):e}function m_e(t){return(0,cBr.IsKind)(t)&&"default"in t}function lBr(t,e,r){if((0,al.IsArray)(r)){for(let o=0;o<r.length;o++)r[o]=oc(t.items,e,r[o]);return r}let n=eg(t,r);if(!(0,al.IsArray)(n))return n;for(let o=0;o<n.length;o++)n[o]=oc(t.items,e,n[o]);return n}function uBr(t,e,r){return(0,al.IsDate)(r)?r:eg(t,r)}function dBr(t,e,r){let n=globalThis.Object.values(t.$defs),o=t.$defs[t.$ref];return oc(o,[...e,...n],r)}function fBr(t,e,r){let n=eg(t,r);return t.allOf.reduce((o,s)=>{let a=oc(s,e,n);return(0,al.IsObject)(a)?{...o,...a}:a},{})}function pBr(t,e,r){let n=eg(t,r);if(!(0,al.IsObject)(n))return n;let o=Object.getOwnPropertyNames(t.properties);for(let s of o){let a=oc(t.properties[s],e,n[s]);(0,al.IsUndefined)(a)||(n[s]=oc(t.properties[s],e,n[s]))}if(!m_e(t.additionalProperties))return n;for(let s of Object.getOwnPropertyNames(n))o.includes(s)||(n[s]=oc(t.additionalProperties,e,n[s]));return n}function hBr(t,e,r){let n=eg(t,r);if(!(0,al.IsObject)(n))return n;let o=t.additionalProperties,[s,a]=Object.entries(t.patternProperties)[0],c=new RegExp(s);for(let l of Object.getOwnPropertyNames(n))c.test(l)&&m_e(a)&&(n[l]=oc(a,e,n[l]));if(!m_e(o))return n;for(let l of Object.getOwnPropertyNames(n))c.test(l)||(n[l]=oc(o,e,n[l]));return n}function mBr(t,e,r){return oc((0,g_e.Deref)(t,e),e,eg(t,r))}function gBr(t,e,r){return oc((0,g_e.Deref)(t,e),e,r)}function _Br(t,e,r){let n=eg(t,r);if(!(0,al.IsArray)(n)||(0,al.IsUndefined)(t.items))return n;let[o,s]=[t.items,Math.max(t.items.length,n.length)];for(let a=0;a<s;a++)a<o.length&&(n[a]=oc(o[a],e,n[a]));return n}function vBr(t,e,r){let n=eg(t,r);for(let o of t.anyOf){let s=oc(o,e,(0,Edt.Clone)(n));if((0,sBr.Check)(o,e,s))return s}return n}function oc(t,e,r){let n=(0,g_e.Pushref)(t,e),o=t;switch(o[aBr.Kind]){case"Array":return lBr(o,n,r);case"Date":return uBr(o,n,r);case"Import":return dBr(o,n,r);case"Intersect":return fBr(o,n,r);case"Object":return pBr(o,n,r);case"Record":return hBr(o,n,r);case"Ref":return mBr(o,n,r);case"This":return gBr(o,n,r);case"Tuple":return _Br(o,n,r);case"Union":return vBr(o,n,r);default:return eg(o,r)}}function yBr(...t){return t.length===3?oc(t[0],t[1],t[2]):oc(t[0],[],t[1])}});var NH=m(bb=>{"use strict";var EBr=bb&&bb.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),TBr=bb&&bb.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&EBr(e,t,r)};Object.defineProperty(bb,"__esModule",{value:!0});TBr(Tdt(),bb)});var Cdt=m(Bf=>{"use strict";Object.defineProperty(Bf,"__esModule",{value:!0});Bf.ValuePointerRootDeleteError=Bf.ValuePointerRootSetError=void 0;Bf.Format=L3;Bf.Set=SBr;Bf.Delete=bBr;Bf.Has=CBr;Bf.Get=ABr;var bdt=vi(),LH=class extends bdt.TypeBoxError{constructor(e,r,n){super("Cannot set root value"),this.value=e,this.path=r,this.update=n}};Bf.ValuePointerRootSetError=LH;var kH=class extends bdt.TypeBoxError{constructor(e,r){super("Cannot delete root value"),this.value=e,this.path=r}};Bf.ValuePointerRootDeleteError=kH;function Sdt(t){return t.indexOf("~")===-1?t:t.replace(/~1/g,"/").replace(/~0/g,"~")}function*L3(t){if(t==="")return;let[e,r]=[0,0];for(let n=0;n<t.length;n++)t.charAt(n)==="/"?(n===0||(r=n,yield Sdt(t.slice(e,r))),e=n+1):r=n;yield Sdt(t.slice(e))}function SBr(t,e,r){if(e==="")throw new LH(t,e,r);let[n,o,s]=[null,t,""];for(let a of L3(e))o[a]===void 0&&(o[a]={}),n=o,o=o[a],s=a;n[s]=r}function bBr(t,e){if(e==="")throw new kH(t,e);let[r,n,o]=[null,t,""];for(let s of L3(e)){if(n[s]===void 0||n[s]===null)return;r=n,n=n[s],o=s}if(Array.isArray(r)){let s=parseInt(o);r.splice(s,1)}else delete r[o]}function CBr(t,e){if(e==="")return!0;let[r,n,o]=[null,t,""];for(let s of L3(e)){if(n[s]===void 0)return!1;r=n,n=n[s],o=s}return Object.getOwnPropertyNames(r).includes(o)}function ABr(t,e){if(e==="")return t;let r=t;for(let n of L3(e)){if(r[n]===void 0)return;r=r[n]}return r}});var DH=m(qp=>{"use strict";var xBr=qp&&qp.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),wBr=qp&&qp.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),IBr=qp&&qp.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),o=0;o<n.length;o++)n[o]!=="default"&&xBr(r,e,n[o]);return wBr(r,e),r}})();Object.defineProperty(qp,"__esModule",{value:!0});qp.ValuePointer=void 0;qp.ValuePointer=IBr(Cdt())});var y_e=m(v_e=>{"use strict";Object.defineProperty(v_e,"__esModule",{value:!0});v_e.Equal=UH;var tg=bo();function PBr(t,e){if(!(0,tg.IsObject)(e))return!1;let r=[...Object.keys(t),...Object.getOwnPropertySymbols(t)],n=[...Object.keys(e),...Object.getOwnPropertySymbols(e)];return r.length!==n.length?!1:r.every(o=>UH(t[o],e[o]))}function RBr(t,e){return(0,tg.IsDate)(e)&&t.getTime()===e.getTime()}function OBr(t,e){return!(0,tg.IsArray)(e)||t.length!==e.length?!1:t.every((r,n)=>UH(r,e[n]))}function MBr(t,e){return!(0,tg.IsTypedArray)(e)||t.length!==e.length||Object.getPrototypeOf(t).constructor.name!==Object.getPrototypeOf(e).constructor.name?!1:t.every((r,n)=>UH(r,e[n]))}function NBr(t,e){return t===e}function UH(t,e){if((0,tg.IsDate)(t))return RBr(t,e);if((0,tg.IsTypedArray)(t))return MBr(t,e);if((0,tg.IsArray)(t))return OBr(t,e);if((0,tg.IsObject)(t))return PBr(t,e);if((0,tg.IsValueType)(t))return NBr(t,e);throw new Error("ValueEquals: Unable to compare value")}});var Pdt=m(Us=>{"use strict";Object.defineProperty(Us,"__esModule",{value:!0});Us.ValueDiffError=Us.Edit=Us.Delete=Us.Update=Us.Insert=void 0;Us.Diff=BBr;Us.Patch=HBr;var Fp=bo(),E_e=DH(),T_e=Uf(),LBr=y_e(),kBr=vi(),S_e=ma(),b_e=Ja(),C_e=O1(),xdt=D1(),DBr=Yi();Us.Insert=(0,b_e.Object)({type:(0,S_e.Literal)("insert"),path:(0,C_e.String)(),value:(0,xdt.Unknown)()});Us.Update=(0,b_e.Object)({type:(0,S_e.Literal)("update"),path:(0,C_e.String)(),value:(0,xdt.Unknown)()});Us.Delete=(0,b_e.Object)({type:(0,S_e.Literal)("delete"),path:(0,C_e.String)()});Us.Edit=(0,DBr.Union)([Us.Insert,Us.Update,Us.Delete]);var k3=class extends kBr.TypeBoxError{constructor(e,r){super(r),this.value=e}};Us.ValueDiffError=k3;function qH(t,e){return{type:"update",path:t,value:e}}function wdt(t,e){return{type:"insert",path:t,value:e}}function Idt(t){return{type:"delete",path:t}}function Adt(t){if(globalThis.Object.getOwnPropertySymbols(t).length>0)throw new k3(t,"Cannot diff objects with symbols")}function*UBr(t,e,r){if(Adt(e),Adt(r),!(0,Fp.IsStandardObject)(r))return yield qH(t,r);let n=globalThis.Object.getOwnPropertyNames(e),o=globalThis.Object.getOwnPropertyNames(r);for(let s of o)(0,Fp.HasPropertyKey)(e,s)||(yield wdt(`${t}/${s}`,r[s]));for(let s of n)(0,Fp.HasPropertyKey)(r,s)&&((0,LBr.Equal)(e,r)||(yield*FH(`${t}/${s}`,e[s],r[s])));for(let s of n)(0,Fp.HasPropertyKey)(r,s)||(yield Idt(`${t}/${s}`))}function*qBr(t,e,r){if(!(0,Fp.IsArray)(r))return yield qH(t,r);for(let n=0;n<Math.min(e.length,r.length);n++)yield*FH(`${t}/${n}`,e[n],r[n]);for(let n=0;n<r.length;n++)n<e.length||(yield wdt(`${t}/${n}`,r[n]));for(let n=e.length-1;n>=0;n--)n<r.length||(yield Idt(`${t}/${n}`))}function*FBr(t,e,r){if(!(0,Fp.IsTypedArray)(r)||e.length!==r.length||globalThis.Object.getPrototypeOf(e).constructor.name!==globalThis.Object.getPrototypeOf(r).constructor.name)return yield qH(t,r);for(let n=0;n<Math.min(e.length,r.length);n++)yield*FH(`${t}/${n}`,e[n],r[n])}function*jBr(t,e,r){e!==r&&(yield qH(t,r))}function*FH(t,e,r){if((0,Fp.IsStandardObject)(e))return yield*UBr(t,e,r);if((0,Fp.IsArray)(e))return yield*qBr(t,e,r);if((0,Fp.IsTypedArray)(e))return yield*FBr(t,e,r);if((0,Fp.IsValueType)(e))return yield*jBr(t,e,r);throw new k3(e,"Unable to diff value")}function BBr(t,e){return[...FH("",t,e)]}function $Br(t){return t.length>0&&t[0].path===""&&t[0].type==="update"}function VBr(t){return t.length===0}function HBr(t,e){if($Br(e))return(0,T_e.Clone)(e[0].value);if(VBr(e))return(0,T_e.Clone)(t);let r=(0,T_e.Clone)(t);for(let n of e)switch(n.type){case"insert":{E_e.ValuePointer.Set(r,n.path,n.value);break}case"update":{E_e.ValuePointer.Set(r,n.path,n.value);break}case"delete":{E_e.ValuePointer.Delete(r,n.path);break}}return r}});var A_e=m(Cb=>{"use strict";var GBr=Cb&&Cb.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),zBr=Cb&&Cb.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&GBr(e,t,r)};Object.defineProperty(Cb,"__esModule",{value:!0});zBr(Pdt(),Cb)});var Rdt=m(w_e=>{"use strict";Object.defineProperty(w_e,"__esModule",{value:!0});w_e.Encode=YBr;var x_e=gP(),WBr=iu(),KBr=rv();function YBr(...t){let[e,r,n]=t.length===3?[t[0],t[1],t[2]]:[t[0],[],t[1]],o=(0,x_e.HasTransform)(e,r)?(0,x_e.TransformEncode)(e,r,n):n;if(!(0,WBr.Check)(e,r,o))throw new x_e.TransformEncodeCheckError(e,o,(0,KBr.Errors)(e,r,o).First());return o}});var I_e=m(Ab=>{"use strict";var QBr=Ab&&Ab.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),ZBr=Ab&&Ab.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&QBr(e,t,r)};Object.defineProperty(Ab,"__esModule",{value:!0});ZBr(Rdt(),Ab)});var P_e=m(xb=>{"use strict";var JBr=xb&&xb.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),XBr=xb&&xb.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&JBr(e,t,r)};Object.defineProperty(xb,"__esModule",{value:!0});XBr(y_e(),xb)});var Mdt=m(U3=>{"use strict";Object.defineProperty(U3,"__esModule",{value:!0});U3.ValueMutateError=void 0;U3.Mutate=s$r;var $f=bo(),BH=DH(),R_e=Uf(),e$r=vi();function jH(t){return(0,$f.IsObject)(t)&&!(0,$f.IsArray)(t)}var D3=class extends e$r.TypeBoxError{constructor(e){super(e)}};U3.ValueMutateError=D3;function t$r(t,e,r,n){if(!jH(r))BH.ValuePointer.Set(t,e,(0,R_e.Clone)(n));else{let o=Object.getOwnPropertyNames(r),s=Object.getOwnPropertyNames(n);for(let a of o)s.includes(a)||delete r[a];for(let a of s)o.includes(a)||(r[a]=null);for(let a of s)O_e(t,`${e}/${a}`,r[a],n[a])}}function r$r(t,e,r,n){if(!(0,$f.IsArray)(r))BH.ValuePointer.Set(t,e,(0,R_e.Clone)(n));else{for(let o=0;o<n.length;o++)O_e(t,`${e}/${o}`,r[o],n[o]);r.splice(n.length)}}function n$r(t,e,r,n){if((0,$f.IsTypedArray)(r)&&r.length===n.length)for(let o=0;o<r.length;o++)r[o]=n[o];else BH.ValuePointer.Set(t,e,(0,R_e.Clone)(n))}function i$r(t,e,r,n){r!==n&&BH.ValuePointer.Set(t,e,n)}function O_e(t,e,r,n){if((0,$f.IsArray)(n))return r$r(t,e,r,n);if((0,$f.IsTypedArray)(n))return n$r(t,e,r,n);if(jH(n))return t$r(t,e,r,n);if((0,$f.IsValueType)(n))return i$r(t,e,r,n)}function Odt(t){return(0,$f.IsTypedArray)(t)||(0,$f.IsValueType)(t)}function o$r(t,e){return jH(t)&&(0,$f.IsArray)(e)||(0,$f.IsArray)(t)&&jH(e)}function s$r(t,e){if(Odt(t)||Odt(e))throw new D3("Only object and array types can be mutated at the root level");if(o$r(t,e))throw new D3("Cannot assign due type mismatch of assignable values");O_e(t,"",t,e)}});var M_e=m(wb=>{"use strict";var a$r=wb&&wb.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),c$r=wb&&wb.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&a$r(e,t,r)};Object.defineProperty(wb,"__esModule",{value:!0});c$r(Mdt(),wb)});var Ldt=m(Vf=>{"use strict";Object.defineProperty(Vf,"__esModule",{value:!0});Vf.ParseDefault=Vf.ParseRegistry=Vf.ParseError=void 0;Vf.Parse=_$r;var l$r=vi(),$H=gP(),u$r=CH(),d$r=wH(),f$r=RH(),p$r=Uf(),h$r=MH(),m$r=NH(),Ndt=bo(),q3=class extends l$r.TypeBoxError{constructor(e){super(e)}};Vf.ParseError=q3;var N_e;(function(t){let e=new Map([["Assert",(s,a,c)=>((0,u$r.Assert)(s,a,c),c)],["Cast",(s,a,c)=>(0,d$r.Cast)(s,a,c)],["Clean",(s,a,c)=>(0,f$r.Clean)(s,a,c)],["Clone",(s,a,c)=>(0,p$r.Clone)(c)],["Convert",(s,a,c)=>(0,h$r.Convert)(s,a,c)],["Decode",(s,a,c)=>(0,$H.HasTransform)(s,a)?(0,$H.TransformDecode)(s,a,c):c],["Default",(s,a,c)=>(0,m$r.Default)(s,a,c)],["Encode",(s,a,c)=>(0,$H.HasTransform)(s,a)?(0,$H.TransformEncode)(s,a,c):c]]);function r(s){e.delete(s)}t.Delete=r;function n(s,a){e.set(s,a)}t.Set=n;function o(s){return e.get(s)}t.Get=o})(N_e||(Vf.ParseRegistry=N_e={}));Vf.ParseDefault=["Clone","Clean","Default","Convert","Assert","Decode"];function g$r(t,e,r,n){return t.reduce((o,s)=>{let a=N_e.Get(s);if((0,Ndt.IsUndefined)(a))throw new q3(`Unable to find Parse operation '${s}'`);return a(e,r,o)},n)}function _$r(...t){let[e,r,n,o]=t.length===4?[t[0],t[1],t[2],t[3]]:t.length===3?(0,Ndt.IsArray)(t[0])?[t[0],t[1],[],t[2]]:[Vf.ParseDefault,t[0],t[1],t[2]]:t.length===2?[Vf.ParseDefault,t[0],[],t[1]]:(()=>{throw new q3("Invalid Arguments")})();return g$r(e,r,n,o)}});var L_e=m(Ib=>{"use strict";var v$r=Ib&&Ib.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),y$r=Ib&&Ib.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&v$r(e,t,r)};Object.defineProperty(Ib,"__esModule",{value:!0});y$r(Ldt(),Ib)});var Ddt=m(Tr=>{"use strict";Object.defineProperty(Tr,"__esModule",{value:!0});Tr.Parse=Tr.Mutate=Tr.Hash=Tr.Equal=Tr.Encode=Tr.Edit=Tr.Patch=Tr.Diff=Tr.Default=Tr.Decode=Tr.Create=Tr.Convert=Tr.Clone=Tr.Clean=Tr.Check=Tr.Cast=Tr.Assert=Tr.ValueErrorIterator=Tr.Errors=void 0;var kdt=rv();Object.defineProperty(Tr,"Errors",{enumerable:!0,get:function(){return kdt.Errors}});Object.defineProperty(Tr,"ValueErrorIterator",{enumerable:!0,get:function(){return kdt.ValueErrorIterator}});var E$r=CH();Object.defineProperty(Tr,"Assert",{enumerable:!0,get:function(){return E$r.Assert}});var T$r=wH();Object.defineProperty(Tr,"Cast",{enumerable:!0,get:function(){return T$r.Cast}});var S$r=iu();Object.defineProperty(Tr,"Check",{enumerable:!0,get:function(){return S$r.Check}});var b$r=RH();Object.defineProperty(Tr,"Clean",{enumerable:!0,get:function(){return b$r.Clean}});var C$r=Uf();Object.defineProperty(Tr,"Clone",{enumerable:!0,get:function(){return C$r.Clone}});var A$r=MH();Object.defineProperty(Tr,"Convert",{enumerable:!0,get:function(){return A$r.Convert}});var x$r=AH();Object.defineProperty(Tr,"Create",{enumerable:!0,get:function(){return x$r.Create}});var w$r=h_e();Object.defineProperty(Tr,"Decode",{enumerable:!0,get:function(){return w$r.Decode}});var I$r=NH();Object.defineProperty(Tr,"Default",{enumerable:!0,get:function(){return I$r.Default}});var k_e=A_e();Object.defineProperty(Tr,"Diff",{enumerable:!0,get:function(){return k_e.Diff}});Object.defineProperty(Tr,"Patch",{enumerable:!0,get:function(){return k_e.Patch}});Object.defineProperty(Tr,"Edit",{enumerable:!0,get:function(){return k_e.Edit}});var P$r=I_e();Object.defineProperty(Tr,"Encode",{enumerable:!0,get:function(){return P$r.Encode}});var R$r=P_e();Object.defineProperty(Tr,"Equal",{enumerable:!0,get:function(){return R$r.Equal}});var O$r=hP();Object.defineProperty(Tr,"Hash",{enumerable:!0,get:function(){return O$r.Hash}});var M$r=M_e();Object.defineProperty(Tr,"Mutate",{enumerable:!0,get:function(){return M$r.Mutate}});var N$r=L_e();Object.defineProperty(Tr,"Parse",{enumerable:!0,get:function(){return N$r.Parse}})});var Udt=m(jp=>{"use strict";var L$r=jp&&jp.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),k$r=jp&&jp.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),D$r=jp&&jp.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),o=0;o<n.length;o++)n[o]!=="default"&&L$r(r,e,n[o]);return k$r(r,e),r}})();Object.defineProperty(jp,"__esModule",{value:!0});jp.Value=void 0;jp.Value=D$r(Ddt())});var D_e=m(vn=>{"use strict";var U$r=vn&&vn.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),ms=vn&&vn.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&U$r(e,t,r)};Object.defineProperty(vn,"__esModule",{value:!0});vn.Value=vn.ValueErrorIterator=vn.ValueErrorType=void 0;var qdt=rv();Object.defineProperty(vn,"ValueErrorType",{enumerable:!0,get:function(){return qdt.ValueErrorType}});Object.defineProperty(vn,"ValueErrorIterator",{enumerable:!0,get:function(){return qdt.ValueErrorIterator}});ms(bo(),vn);ms(CH(),vn);ms(wH(),vn);ms(iu(),vn);ms(RH(),vn);ms(Uf(),vn);ms(MH(),vn);ms(AH(),vn);ms(h_e(),vn);ms(NH(),vn);ms(A_e(),vn);ms(I_e(),vn);ms(P_e(),vn);ms(hP(),vn);ms(M_e(),vn);ms(L_e(),vn);ms(DH(),vn);ms(gP(),vn);var q$r=Udt();Object.defineProperty(vn,"Value",{enumerable:!0,get:function(){return q$r.Value}})});var jdt=m(VH=>{"use strict";Object.defineProperty(VH,"__esModule",{value:!0});VH.assertShape=void 0;var Fdt=D_e(),F$r=(t,e)=>{if(Fdt.Value.Check(t,e))return e;let r=`Typebox schema validation failed:
${[...Fdt.Value.Errors(t,e)].map(n=>`${n.path} ${n.message}`).join(`
`)}`;throw new Error(r)};VH.assertShape=F$r});var Bdt=m(MP=>{"use strict";Object.defineProperty(MP,"__esModule",{value:!0});MP.FeatureName=MP.OutputPaneShowCommand=void 0;MP.OutputPaneShowCommand="codereferencing.showOutputPane2";MP.FeatureName="code-referencing"});var F3=m(HH=>{"use strict";Object.defineProperty(HH,"__esModule",{value:!0});HH.codeReferenceLogger=void 0;var j$r=An(),B$r=Bdt();HH.codeReferenceLogger=new j$r.Logger(B$r.FeatureName)});var Hdt=m(WH=>{"use strict";Object.defineProperty(WH,"__esModule",{value:!0});WH.ConnectionState=void 0;var $$r=Nr(),V$r=An(),H$r=rV(),G$r=tP(),j3=F3(),z$r=3e3,U_e=2,$dt=256,Vdt=Math.log($dt)/Math.log(U_e)/U_e,Hf={connection:"disabled",maxAttempts:Vdt,retryAttempts:0,initialWait:!1},GH,zH=[];function W$r(){if(GH)return GH;function t(E){return zH.push(E),()=>{let y=zH.indexOf(E);y!==-1&&zH.splice(y,1)}}function e(){for(let E of zH)E()}function r(E){Hf.connection!==E&&(Hf.connection=E,e())}function n(){return Hf.connection==="connected"}function o(){return Hf.connection==="disconnected"}function s(){return Hf.connection==="retry"}function a(){return Hf.connection==="disabled"}function c(){r("connected"),f(!1)}function l(){r("disconnected")}function u(){r("retry")}function d(){r("disabled")}function f(E){Hf.initialWait!==E&&(Hf.initialWait=E)}function p(E,y=z$r){s()||(u(),f(!0),_(E,y))}function h(){return Hf.initialWait}async function _(E,y){let S=E.get(V$r.ICompletionsLogTargetService),b=E.get(G$r.ICompletionsFetcherService),w=E.get($$r.IInstantiationService);j3.codeReferenceLogger.info(S,`Attempting to reconnect in ${y}ms.`),await g(y),f(!1);function P(A){if(A>$dt){j3.codeReferenceLogger.info(S,"Max retry time reached, disabling."),d();return}let O=async()=>{Hf.retryAttempts=Math.min(Hf.retryAttempts+1,Vdt);try{j3.codeReferenceLogger.info(S,`Pinging service after ${A} second(s)`);let L=await b.fetch(new URL("_ping",w.invokeFunction(H$r.getLastKnownEndpoints)["origin-tracker"]).href,{method:"GET",headers:{"content-type":"application/json"}});if(L.status!==200||!L.ok)P(A**2);else{j3.codeReferenceLogger.info(S,"Successfully reconnected."),c();return}}catch{P(A**2)}};setTimeout(()=>void O(),A*1e3)}j3.codeReferenceLogger.info(S,"Attempting to reconnect."),P(U_e)}let g=E=>new Promise(y=>setTimeout(y,E));function v(E){return{dispose:t(E)}}return GH={setConnected:c,setDisconnected:l,setRetrying:u,setDisabled:d,enableRetry:p,listen:v,isConnected:n,isDisconnected:o,isRetrying:s,isDisabled:a,isInitialWait:h},GH}WH.ConnectionState=W$r()});var zdt=m(gs=>{"use strict";Object.defineProperty(gs,"__esModule",{value:!0});gs.ErrorMessages=gs.ErrorReasons=void 0;gs.getErrorType=Gdt;gs.createErrorResponse=K$r;gs.ErrorReasons={BadArguments:"BadArgumentsError",Unauthorized:"NotAuthorized",NotFound:"NotFoundError",RateLimit:"RateLimitError",InternalError:"InternalError",ConnectionError:"ConnectionError",Unknown:"UnknownError"};gs.ErrorMessages={[gs.ErrorReasons.Unauthorized]:"Invalid GitHub token. Please sign out from your GitHub account using VSCode UI and try again",[gs.ErrorReasons.InternalError]:"Internal error: matches to public code will not be detected. It is advised to disable Copilot completions until the service is reconnected.",[gs.ErrorReasons.RateLimit]:"You've reached your quota and limit, code matching will be unavailable until the limit resets"};function Gdt(t){return t===401?gs.ErrorReasons.Unauthorized:t===400?gs.ErrorReasons.BadArguments:t===404?gs.ErrorReasons.NotFound:t===429?gs.ErrorReasons.RateLimit:t>=500&&t<600?gs.ErrorReasons.InternalError:t>=600?gs.ErrorReasons.ConnectionError:gs.ErrorReasons.Unknown}function K$r(t,e,r={}){return{kind:"failure",reason:Gdt(Number(t)),code:Number(t),msg:e,meta:r}}});var $_e=m(Bp=>{"use strict";Object.defineProperty(Bp,"__esModule",{value:!0});Bp.NoopTelemetryReporter=Bp.snippyTelemetry=Bp.matchNotificationTelemetry=Bp.copilotOutputLogTelemetry=void 0;var Y$r=An(),ba=Ps(),Q$r=F3(),Z$r=/^[1-6][0-9][0-9]$/,J$r=/([A-Z][a-z]+)/,X$r="code_referencing",NP=class{constructor(e){this.baseKey=e}buildKey(...e){return[X$r,this.baseKey,...e].join(".")}},q_e=class extends NP{constructor(){super("github_copilot_log")}handleOpen({instantiationService:e}){let r=this.buildKey("open","count"),n=ba.TelemetryData.createAndMarkAsIssued();e.invokeFunction(ba.telemetry,r,n)}handleFocus({instantiationService:e}){let r=ba.TelemetryData.createAndMarkAsIssued(),n=this.buildKey("focus","count");e.invokeFunction(ba.telemetry,n,r)}handleWrite({instantiationService:e}){let r=ba.TelemetryData.createAndMarkAsIssued(),n=this.buildKey("write","count");e.invokeFunction(ba.telemetry,n,r)}};Bp.copilotOutputLogTelemetry=new q_e;var F_e=class extends NP{constructor(){super("match_notification")}handleDoAction({instantiationService:e,actor:r}){let n=ba.TelemetryData.createAndMarkAsIssued({actor:r}),o=this.buildKey("acknowledge","count");e.invokeFunction(ba.telemetry,o,n)}handleDismiss({instantiationService:e,actor:r}){let n=ba.TelemetryData.createAndMarkAsIssued({actor:r}),o=this.buildKey("ignore","count");e.invokeFunction(ba.telemetry,o,n)}};Bp.matchNotificationTelemetry=new F_e;var j_e=class extends NP{constructor(){super("snippy")}handleUnexpectedError({instantiationService:e,origin:r,reason:n}){let o=ba.TelemetryData.createAndMarkAsIssued({origin:r,reason:n});e.invokeFunction(ba.telemetryError,this.buildKey("unexpectedError"),o)}handleCompletionMissing({instantiationService:e,origin:r,reason:n}){let o=ba.TelemetryData.createAndMarkAsIssued({origin:r,reason:n});e.invokeFunction(ba.telemetryError,this.buildKey("completionMissing"),o)}handleSnippyNetworkError({instantiationService:e,origin:r,reason:n,message:o}){if(!r.match(Z$r)){e.invokeFunction(c=>Q$r.codeReferenceLogger.debug(c.get(Y$r.ICompletionsLogTargetService),"Invalid status code, not sending telemetry",{origin:r}));return}let s=n.split(J$r).filter(c=>!!c).join("_").toLowerCase(),a=ba.TelemetryData.createAndMarkAsIssued({message:o});e.invokeFunction(ba.telemetryError,this.buildKey(s,r),a)}};Bp.snippyTelemetry=new j_e;var B_e=class extends NP{constructor(e=""){super(e)}telemetry(...e){}telemetryError(...e){}};Bp.NoopTelemetryReporter=B_e});var Wdt=m(V_e=>{"use strict";Object.defineProperty(V_e,"__esModule",{value:!0});V_e.call=cVr;var eVr=Nr(),tVr=gI(),rVr=Gl(),nVr=An(),iVr=rV(),oVr=tP(),LP=Hdt(),lo=zdt(),sVr=F3(),aVr=$_e();async function cVr(t,e,r,n){let o,s=t.get(nVr.ICompletionsLogTargetService),a=t.get(eVr.IInstantiationService),c=t.get(tVr.ICompletionsCopilotTokenManager);try{o=c.token??await c.getToken()}catch{return LP.ConnectionState.setDisconnected(),(0,lo.createErrorResponse)(401,lo.ErrorMessages[lo.ErrorReasons.Unauthorized])}if(sVr.codeReferenceLogger.info(s,`Calling ${e}`),LP.ConnectionState.isRetrying())return(0,lo.createErrorResponse)(600,"Attempting to reconnect to the public code matching service.");if(LP.ConnectionState.isDisconnected())return(0,lo.createErrorResponse)(601,"The public code matching service is offline.");let l;try{l=await a.invokeFunction(E=>E.get(oVr.ICompletionsFetcherService).fetch((0,iVr.getEndpointUrl)(E,o,"origin-tracker",e),{method:r.method,body:r.method==="POST"?JSON.stringify(r.body):void 0,headers:{"content-type":"application/json",authorization:`Bearer ${o.token}`,...(0,rVr.editorVersionHeaders)(E)},signal:n}))}catch{return a.invokeFunction(LP.ConnectionState.enableRetry),(0,lo.createErrorResponse)(602,"Network error detected. Check your internet connection.")}let u;try{u=await l.json()}catch(E){let y=E.message;throw aVr.snippyTelemetry.handleUnexpectedError({instantiationService:a,origin:"snippyNetwork",reason:y}),E}if(l.ok)return{kind:"success",...u};let d={...u,code:Number(l.status)},{code:f,msg:p,meta:h}=d,_=Number(f),g=(0,lo.getErrorType)(_),v=p||"unknown error";switch(g){case lo.ErrorReasons.Unauthorized:return(0,lo.createErrorResponse)(f,lo.ErrorMessages[lo.ErrorReasons.Unauthorized],h);case lo.ErrorReasons.BadArguments:return(0,lo.createErrorResponse)(f,v,h);case lo.ErrorReasons.RateLimit:return a.invokeFunction(E=>LP.ConnectionState.enableRetry(E,60*1e3)),(0,lo.createErrorResponse)(f,lo.ErrorMessages.RateLimitError,h);case lo.ErrorReasons.InternalError:return a.invokeFunction(E=>LP.ConnectionState.enableRetry(E)),(0,lo.createErrorResponse)(f,lo.ErrorMessages[lo.ErrorReasons.InternalError],h);default:return(0,lo.createErrorResponse)(f,v,h)}}});var H_e=m(cl=>{"use strict";Object.defineProperty(cl,"__esModule",{value:!0});cl.FileMatchResponse=cl.FileMatchRequest=cl.MatchResponse=cl.MatchRequest=cl.MatchError=void 0;var Fr=S4();cl.MatchError=Fr.Type.Object({kind:Fr.Type.Literal("failure"),reason:Fr.Type.String(),code:Fr.Type.Number(),msg:Fr.Type.String(),meta:Fr.Type.Optional(Fr.Type.Any())});var lVr=Fr.Type.Object({matched_source:Fr.Type.String(),occurrences:Fr.Type.String(),capped:Fr.Type.Boolean(),cursor:Fr.Type.String(),github_url:Fr.Type.String()});cl.MatchRequest=Fr.Type.Object({source:Fr.Type.String()});var uVr=Fr.Type.Object({snippets:Fr.Type.Array(lVr)});cl.MatchResponse=Fr.Type.Union([uVr,cl.MatchError]);cl.FileMatchRequest=Fr.Type.Object({cursor:Fr.Type.String()});var dVr=Fr.Type.Object({commit_id:Fr.Type.String(),license:Fr.Type.String(),nwo:Fr.Type.String(),path:Fr.Type.String(),url:Fr.Type.String()}),fVr=Fr.Type.Object({has_next_page:Fr.Type.Boolean(),cursor:Fr.Type.String()}),pVr=Fr.Type.Object({count:Fr.Type.Record(Fr.Type.String(),Fr.Type.String())}),hVr=Fr.Type.Object({file_matches:Fr.Type.Array(dVr),page_info:fVr,license_stats:pVr});cl.FileMatchResponse=Fr.Type.Union([hVr,cl.MatchError])});var Zdt=m($p=>{"use strict";var mVr=$p&&$p.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),gVr=$p&&$p.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),Kdt=$p&&$p.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),o=0;o<n.length;o++)n[o]!=="default"&&mVr(r,e,n[o]);return gVr(r,e),r}})();Object.defineProperty($p,"__esModule",{value:!0});$p.Match=_Vr;$p.FilesForMatch=vVr;var KH=jdt(),Ydt=tl(),Qdt=Kdt(Wdt()),YH=Kdt(H_e());async function _Vr(t,e,r){let n=await Qdt.call(t,t.get(Ydt.ICAPIClientService).snippyMatchPath,{method:"POST",body:(0,KH.assertShape)(YH.MatchRequest,{source:e})},r);return(0,KH.assertShape)(YH.MatchResponse,n)}async function vVr(t,{cursor:e},r){let n=await Qdt.call(t,t.get(Ydt.ICAPIClientService).snippyFilesForMatchPath,{method:"POST",body:(0,KH.assertShape)(YH.FileMatchRequest,{cursor:e})},r);return(0,KH.assertShape)(YH.FileMatchResponse,n)}});var Xdt=m(rg=>{"use strict";Object.defineProperty(rg,"__esModule",{value:!0});rg.MinTokenLength=void 0;rg.lexemeLength=Jdt;rg.offsetLastLexemes=EVr;rg.hasMinLexemeLength=TVr;var B3=new RegExp("[_\\p{L}\\p{Nd}]+|====+|----+|####+|////+|\\*\\*\\*\\*+|[\\p{P}\\p{S}]","gu");rg.MinTokenLength=65;function Jdt(t){let e=0,r;B3.lastIndex=0;do if(r=B3.exec(t),r&&(e+=1),e>=rg.MinTokenLength)break;while(r);return e}function yVr(t,e){let r=0,n;B3.lastIndex=0;do if(n=B3.exec(t),n&&(r+=1,r>=e))return B3.lastIndex;while(n);return t.length}function EVr(t,e){let r=t.split("").reverse().join(""),n=yVr(r,e);return r.length-n}function TVr(t){return Jdt(t)>=rg.MinTokenLength}});var oft=m(ng=>{"use strict";var SVr=ng&&ng.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),bVr=ng&&ng.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),nft=ng&&ng.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),o=0;o<n.length;o++)n[o]!=="default"&&SVr(r,e,n[o]);return bVr(r,e),r}})();Object.defineProperty(ng,"__esModule",{value:!0});ng.fetchCitations=OVr;var CVr=D_e(),ift=Nr(),AVr=rB(),xVr=An(),wVr=Xl(),eft=nft(Zdt()),kP=nft(Xdt()),G_e=F3(),IVr=H_e(),PVr=$_e();function RVr(t){return CVr.Value.Check(IVr.MatchError,t)}async function tft(t,e){let r=t.get(ift.IInstantiationService),n=await e();if(RVr(n)){PVr.snippyTelemetry.handleSnippyNetworkError({instantiationService:r,origin:String(n.code),reason:n.reason,message:n.msg});return}return n}function rft(t){return"kind"in t&&t.kind==="failure"}async function OVr(t,e,r,n){let o=t.get(ift.IInstantiationService),s=t.get(xVr.ICompletionsLogTargetService),a=t.get(wVr.ICompletionsTextDocumentManagerService),c=t.get(AVr.ICompletionsCitationManager),l=await a.getTextDocument({uri:e});if(!l){G_e.codeReferenceLogger.debug(s,`Expected document matching ${e}, got nothing.`);return}let u=l.getText();if(!kP.hasMinLexemeLength(u)||!kP.hasMinLexemeLength(u))return;let d=r;if(!kP.hasMinLexemeLength(r)){let v=u.slice(0,n),E=kP.offsetLastLexemes(v,kP.MinTokenLength);d=u.slice(E,n+r.length)}if(!kP.hasMinLexemeLength(d))return;let f=await o.invokeFunction(v=>tft(v,()=>eft.Match(v,d)));if(!f||rft(f)||!f.snippets.length){G_e.codeReferenceLogger.info(s,"No match found");return}G_e.codeReferenceLogger.info(s,"Match found");let{snippets:p}=f,h=p.map(async v=>{let E=await o.invokeFunction(b=>tft(b,()=>eft.FilesForMatch(b,{cursor:v.cursor})));if(!E||rft(E))return;let y=E.file_matches,S=E.license_stats;return{match:v,files:y,licenseStats:S}}),g=(await Promise.all(h)).filter(v=>v!==void 0);if(g.length)for(let v of g){let E=new Set(Object.keys(v.licenseStats?.count??{}));E.has("NOASSERTION")&&(E.delete("NOASSERTION"),E.add("unknown"));let y=Array.from(E).sort(),S=n,b=n+v.match.matched_source.length,w=l.positionAt(S),P=l.positionAt(b);await c.handleIPCodeCitation({inDocumentUri:e,offsetStart:S,offsetEnd:b,version:l.version,location:{start:w,end:P},matchingText:d,details:y.map(A=>({license:A,url:v.match.github_url}))})}}});var dft=m(hv=>{"use strict";Object.defineProperty(hv,"__esModule",{value:!0});hv.editDistance=aft;hv.emptyLexDictionary=cft;hv.reverseLexDictionary=lft;hv.lexGeneratorWords=uft;hv.lexicalAnalyzer=z_e;hv.lexEditDistance=MVr;function aft(t,e,r=(n,o)=>n===o?0:1){if(e.length===0||t.length===0)return{distance:e.length,startOffset:0,endOffset:0};let n=new Array(e.length+1).fill(0),o=new Array(e.length+1).fill(0),s=new Array(t.length+1).fill(0),a=new Array(t.length+1).fill(0),c=e[0];for(let u=0;u<t.length+1;u++)u===0?n[u]=1:n[u]=r(t[u-1],c,u-1,0),o[u]=u>0?u-1:0;for(let u=1;u<e.length;u++){let d=s;s=n,n=d,d=a,a=o,o=d,c=e[u],n[0]=u+1;for(let f=1;f<t.length+1;f++){let p=1+s[f],h=1+n[f-1],_=r(t[f-1],c,f-1,u)+s[f-1];n[f]=Math.min(h,p,_),n[f]===_?o[f]=a[f-1]:n[f]===p?o[f]=a[f]:o[f]=o[f-1]}}let l=0;for(let u=0;u<t.length+1;u++)n[u]<n[l]&&(l=u);return{distance:n[l],startOffset:o[l],endOffset:l}}function cft(){return new Map}function lft(t){let e=new Array(t.size);for(let[r,n]of t)e[n]=r;return e}function*uft(t){let e="",r;(function(o){o[o.Word=0]="Word",o[o.Space=1]="Space",o[o.Other=2]="Other"})(r||(r={}));let n=r.Word;for(let o of t){let s;/(\p{L}|\p{Nd}|_)/u.test(o)?s=r.Word:o===" "?s=r.Space:s=r.Other,s===n&&s!==r.Other?e+=o:(e.length>0&&(yield e),e=o,n=s)}e.length>0&&(yield e)}function z_e(t,e,r,n){let o=[],s=0;for(let a of r(t))n(a)&&(e.has(a)||e.set(a,e.size),o.push([e.get(a),s])),s+=a.length;return[o,e]}function sft(t){return t!==" "}function MVr(t,e,r=uft){let[n,o]=z_e(t,cft(),r,sft),[s,a]=z_e(e,o,r,sft);if(s.length===0||n.length===0)return{lexDistance:s.length,startOffset:0,endOffset:0,haystackLexLength:n.length,needleLexLength:s.length};let c=lft(a),l=s.length,u=c[s[0][0]],d=c[s[l-1][0]];function f(g,v,E,y){if(y===0||y===l-1){let S=c[n[E][0]];return y===0&&S.endsWith(u)||y===l-1&&S.startsWith(d)?0:1}else return g===v?0:1}let p=aft(n.map(g=>g[0]),s.map(g=>g[0]),f),h=n[p.startOffset][1],_=p.endOffset<n.length?n[p.endOffset][1]:t.length;return _>0&&t[_-1]===" "&&--_,{lexDistance:p.distance,startOffset:h,endOffset:_,haystackLexLength:n.length,needleLexLength:s.length}}});var W_e=m(Pb=>{"use strict";Object.defineProperty(Pb,"__esModule",{value:!0});Pb.PartialAcceptTriggerKind=void 0;Pb.computeCompCharLen=NVr;Pb.countLines=LVr;Pb.computeCompletionText=kVr;var fft;(function(t){t[t.Unknown=0]="Unknown",t[t.Word=1]="Word",t[t.Line=2]="Line",t[t.Suggest=3]="Suggest"})(fft||(Pb.PartialAcceptTriggerKind=fft={}));function NVr(t,e){return t.compType==="partial"?t.acceptedLength:e.length}function LVr(t){return t.length===0?0:t.split(`
`).length}function kVr(t,e){return e.compType==="partial"?t.substring(0,e.acceptedLength):t}});var Sft=m(JH=>{"use strict";Object.defineProperty(JH,"__esModule",{value:!0});JH.postRejectionTasks=WVr;JH.postInsertionTasks=KVr;var ZH=Nr(),mft=RT(),DVr=gI(),QH=Zut(),UVr=rB(),qVr=i_e(),gft=$pe(),_ft=b3(),DP=An(),pft=Ame(),FVr=AP(),jVr=oft(),hft=dft(),BVr=W_e(),mv=Ps(),$Vr=Xl(),vft=qN(),VVr=QS(),gv=new DP.Logger("postInsertion"),yft=[{seconds:15,captureCode:!1,captureRejection:!1},{seconds:30,captureCode:!0,captureRejection:!0},{seconds:120,captureCode:!1,captureRejection:!1},{seconds:300,captureCode:!1,captureRejection:!1},{seconds:600,captureCode:!1,captureRejection:!1}],Eft=50,HVr=1500,GVr=.5,zVr=500,K_e={triggerPostInsertionSynchroneously:!1,captureCode:!1,captureRejection:!1};async function Tft(t,e,r,n,o){let s=t.get(ZH.IInstantiationService),a=t.get(DP.ICompletionsLogTargetService),c=await t.get(gft.ICompletionsFileReaderService).getOrReadTextDocumentWithFakeClientProperties({uri:e});if(c.status!=="valid")return gv.info(a,`Could not get document for ${e}. Maybe it was closed by the editor.`),{prompt:{prefix:"",suffix:"",isFimEnabled:!1},capturedCode:"",terminationOffset:0};let l=c.document,u=l.getText(),d=u.substring(0,n),f=l.positionAt(n),p=await s.invokeFunction(FVr.extractPrompt,r.properties.headerRequestId,(0,qVr.createCompletionState)(l,f),r),h=p.type==="prompt"?p.prompt:{prefix:d,suffix:"",isFimEnabled:!1};if(h.isFimEnabled&&o!==void 0){let _=u.substring(n,o);return h.suffix=u.substring(o),{prompt:h,capturedCode:_,terminationOffset:0}}else{let _=u.substring(n),g=(0,pft.contextIndentationFromText)(d,n,l.detectedLanguageId),E=(0,pft.indentationBlockFinished)(g,void 0)(_),y=Math.min(u.length,n+(E?E*2:zVr)),S=u.substring(n,y);return{prompt:h,capturedCode:S,terminationOffset:E??-1}}}function WVr(t,e,r,n,o){let s=t.get(DP.ICompletionsLogTargetService),a=t.get(ZH.IInstantiationService),c=t.get(mft.ICompletionsTelemetryService),l=t.get(vft.ICompletionsPromiseQueueService);o.forEach(({completionText:p,completionTelemetryData:h})=>{gv.debug(s,`${e}.rejected choiceIndex: ${h.properties.choiceIndex}`),a.invokeFunction(_ft.telemetryRejected,e,h)});let u=a.createInstance(QH.ChangeTracker,n,r-1),d=a.createInstance(QH.ChangeTracker,n,r),f=async p=>{gv.debug(s,`Original offset: ${r}, Tracked offset: ${u.offset}`);let{completionTelemetryData:h}=o[0],{prompt:_,capturedCode:g,terminationOffset:v}=await a.invokeFunction(Tft,n,h,u.offset+1,d.offset),E={hypotheticalPromptJson:JSON.stringify({prefix:_.prefix,context:_.context}),hypotheticalPromptSuffixJson:JSON.stringify(_.suffix)},y=h.extendedBy({...E,capturedCodeJson:JSON.stringify(g)},{timeout:p.seconds,insertionOffset:r,trackedOffset:u.offset,terminationOffsetInCapturedCode:v});gv.debug(s,`${e}.capturedAfterRejected choiceIndex: ${h.properties.choiceIndex}`,y),a.invokeFunction(mv.telemetry,e+".capturedAfterRejected",y,mv.TelemetryStore.Enhanced)};yft.filter(p=>p.captureRejection).map(p=>u.push((0,mv.telemetryCatch)(c,l,()=>f(p),"postRejectionTasks"),p.seconds*1e3))}function KVr(t,e,r,n,o,s,a,c){let l=t.get(DP.ICompletionsLogTargetService),u=t.get(ZH.IInstantiationService),d=t.get(vft.ICompletionsPromiseQueueService),f=t.get(mft.ICompletionsTelemetryService),p=t.get(VVr.ICompletionsRuntimeModeService),h=s.extendedBy({compType:a.compType},{compCharLen:a.acceptedLength,numLines:a.acceptedLines});gv.debug(l,`${e}.accepted choiceIndex: ${h.properties.choiceIndex}`),u.invokeFunction(_ft.telemetryAccepted,e,h);let _=r;r=(0,BVr.computeCompletionText)(r,a);let g=r.trim(),v=u.createInstance(QH.ChangeTracker,o,n),E=u.createInstance(QH.ChangeTracker,o,n+r.length),y=async S=>{await u.invokeFunction(JVr,e,g,n,o,S,h,v,E)};if(K_e.triggerPostInsertionSynchroneously&&p.isRunningInTest()){let S=y({seconds:0,captureCode:K_e.captureCode,captureRejection:K_e.captureRejection});d.register(S)}else yft.map(S=>v.push((0,mv.telemetryCatch)(f,d,()=>y(S),"postInsertionTasks"),S.seconds*1e3));u.invokeFunction(S=>(0,mv.telemetryCatch)(f,d,YVr,"post insertion citation check")(S,o,_,r,n,c))}async function YVr(t,e,r,n,o,s){let a=t.get(DP.ICompletionsLogTargetService),c=t.get($Vr.ICompletionsTextDocumentManagerService),l=t.get(DVr.ICompletionsCopilotTokenManager),u=t.get(UVr.ICompletionsCitationManager);if(!s||(s.ip_code_citations?.length??0)<1){if(l.getLastToken()?.getTokenValue("sn")==="1")return;await(0,jVr.fetchCitations)(t,e,n,o);return}let d=await c.getTextDocument({uri:e});if(d){let f=Y_e(d.getText(),n,Eft,o);f.stillInCodeHeuristic&&(o=f.foundOffset)}for(let f of s.ip_code_citations){let p=QVr(r.length,n.length,f.start_offset);if(p===void 0){gv.info(a,`Full completion for ${e} contains a reference matching public code, but the partially inserted text did not include the match.`);continue}let h=o+p,_=d?.positionAt(h),g=o+ZVr(r.length,n.length,f.stop_offset),v=d?.positionAt(g),E=_&&v?d?.getText({start:_,end:v}):"<unknown>";await u.handleIPCodeCitation({inDocumentUri:e,offsetStart:h,offsetEnd:g,version:d?.version,location:_&&v?{start:_,end:v}:void 0,matchingText:E,details:f.details.citations})}}function QVr(t,e,r){if(!(e<t&&r>e))return r}function ZVr(t,e,r){return e<t?Math.min(r,e):r}function Y_e(t,e,r,n){let o=t.substring(Math.max(0,n-r),Math.min(t.length,n+e.length+r)),s=(0,hft.lexEditDistance)(o,e),a=s.lexDistance/s.needleLexLength,{distance:c}=(0,hft.editDistance)(o.substring(s.startOffset,s.endOffset),e);return{relativeLexEditDistance:a,charEditDistance:c,completionLexLength:s.needleLexLength,foundOffset:s.startOffset+Math.max(0,n-r),lexEditDistance:s.lexDistance,stillInCodeHeuristic:a<=GVr?1:0}}async function JVr(t,e,r,n,o,s,a,c,l){let u=t.get(ZH.IInstantiationService),d=t.get(DP.ICompletionsLogTargetService),f=await t.get(gft.ICompletionsFileReaderService).getOrReadTextDocument({uri:o});if(f.status==="valid"){let h=f.document.getText(),_=Y_e(h,r,Eft,c.offset);_.stillInCodeHeuristic||(_=Y_e(h,r,HVr,c.offset)),gv.debug(d,`stillInCode: ${_.stillInCodeHeuristic?"Found":"Not found"}! Completion '${r}' in file ${o}. lexEditDistance fraction was ${_.relativeLexEditDistance}. Char edit distance was ${_.charEditDistance}. Inserted at ${n}, tracked at ${c.offset}, found at ${_.foundOffset}. choiceIndex: ${a.properties.choiceIndex}`);let g=a.extendedBy({},{timeout:s.seconds,insertionOffset:n,trackedOffset:c.offset}).extendedBy({},_);if(u.invokeFunction(mv.telemetry,e+".stillInCode",g),s.captureCode){let{prompt:v,capturedCode:E,terminationOffset:y}=await u.invokeFunction(Tft,o,g,c.offset,l.offset),S={hypotheticalPromptJson:JSON.stringify({prefix:v.prefix,context:v.context}),hypotheticalPromptSuffixJson:JSON.stringify(v.suffix)},b=a.extendedBy({...S,capturedCodeJson:JSON.stringify(E)},{timeout:s.seconds,insertionOffset:n,trackedOffset:c.offset,terminationOffsetInCapturedCode:y});gv.debug(d,`${e}.capturedAfterAccepted choiceIndex: ${a.properties.choiceIndex}`,g),u.invokeFunction(mv.telemetry,e+".capturedAfterAccepted",b,mv.TelemetryStore.Enhanced)}}}});var J_e=m(qs=>{"use strict";Object.defineProperty(qs,"__esModule",{value:!0});qs.LastGhostText=qs.ICompletionsLastGhostText=void 0;qs.rejectLastShown=Aft;qs.setLastShown=nHr;qs.handleGhostTextShown=iHr;qs.handleGhostTextPostInsert=sHr;qs.handlePartialGhostTextPostInsert=aHr;var XVr=Qe(),bft=An(),Z_e=Sft(),$3=W_e(),Cft=wP(),eHr=b3(),tHr=new bft.Logger("ghostText");qs.ICompletionsLastGhostText=(0,XVr.createServiceIdentifier)("ICompletionsLastGhostText");var Q_e=class{constructor(){this.#r=[],this.linesAccepted=0}#e;#t;#r;get position(){return this.#e}get shownCompletions(){return this.#r||[]}get uri(){return this.#t}resetState(){this.#t=void 0,this.#e=void 0,this.#r=[],this.resetPartialAcceptanceState()}setState({uri:e},r){this.#t=e,this.#e=r,this.#r=[]}resetPartialAcceptanceState(){this.partiallyAcceptedLength=0,this.totalLength=void 0,this.linesLeft=void 0,this.linesAccepted=0}};qs.LastGhostText=Q_e;function rHr(t){let e=[];return t.shownCompletions.forEach(r=>{if(r.displayText&&r.telemetry){let n,o;t.partiallyAcceptedLength?(n=r.displayText.substring(t.partiallyAcceptedLength-1),o=r.telemetry.extendedBy({compType:"partial"},{compCharLen:n.length})):(n=r.displayText,o=r.telemetry);let s={completionText:n,completionTelemetryData:o,offset:r.offset};e.push(s)}}),e}function Aft(t,e){let r=t.get(qs.ICompletionsLastGhostText);if(!r.position||!r.uri)return;let n=rHr(r);n.length>0&&(0,Z_e.postRejectionTasks)(t,"ghostText",e??n[0].offset,r.uri,n),r.resetState(),r.resetPartialAcceptanceState()}function nHr(t,e,r,n){let o=t.get(qs.ICompletionsLastGhostText);return o.position&&o.uri&&!(o.position.line===r.line&&o.position.character===r.character&&o.uri.toString()===e.uri.toString())&&n!==Cft.ResultType.TypingAsSuggested&&Aft(t,e.offsetAt(o.position)),o.setState(e,r),o.index}function iHr(t,e){let r=t.get(bft.ICompletionsLogTargetService),n=t.get(qs.ICompletionsLastGhostText);if(n.index=e.index,!n.shownCompletions.find(o=>o.index===e.index)&&(e.uri===n.uri&&n.position?.line===e.position.line&&n.position?.character===e.position.character&&n.shownCompletions.push(e),e.displayText)){let o=e.resultType!==Cft.ResultType.Network;tHr.debug(r,`[${e.telemetry.properties.headerRequestId}] shown choiceIndex: ${e.telemetry.properties.choiceIndex}, fromCache ${o}`),e.telemetry.measurements.compCharLen=e.displayText.length,(0,eHr.telemetryShown)(t,"ghostText",e)}}function oHr(t,e,r){let n=t.get(qs.ICompletionsLastGhostText);n.linesLeft===void 0&&(n.linesAccepted=(0,$3.countLines)(e.insertText.substring(0,r)),n.linesLeft=(0,$3.countLines)(e.displayText));let o=(0,$3.countLines)(e.displayText);n.linesLeft>o&&(n.linesAccepted+=n.linesLeft-o,n.lastLineAcceptedLength=n.partiallyAcceptedLength,n.linesLeft=o),n.partiallyAcceptedLength=(n.lastLineAcceptedLength||0)+r}function sHr(t,e,r="ghostText"){let n=t.get(qs.ICompletionsLastGhostText),o;return n.partiallyAcceptedLength?o={compType:"full",acceptedLength:(n.partiallyAcceptedLength||0)+e.displayText.length,acceptedLines:n.linesAccepted+(n.linesLeft??0)}:o={compType:"full",acceptedLength:e.displayText.length,acceptedLines:(0,$3.countLines)(e.displayText)},n.resetState(),(0,Z_e.postInsertionTasks)(t,r,e.displayText,e.offset,e.uri,e.telemetry,o,e.copilotAnnotations)}function aHr(t,e,r,n=$3.PartialAcceptTriggerKind.Unknown,o="ghostText"){let s=t.get(qs.ICompletionsLastGhostText);oHr(t,e,r);let a={compType:"partial",acceptedLength:s.partiallyAcceptedLength||0,acceptedLines:s.linesAccepted};return(0,Z_e.postInsertionTasks)(t,o,e.displayText,e.offset,e.uri,e.telemetry,a,e.copilotAnnotations)}});var xft=m(X_e=>{"use strict";Object.defineProperty(X_e,"__esModule",{value:!0});X_e.normalizeIndentCharacter=cHr;function cHr(t,e,r){function n(s,a,c){let l=new RegExp(`^(${a})+`,"g");return s.split(`
`).map(u=>{let d=u.replace(l,""),f=u.length-d.length;return c(f)+d}).join(`
`)}let o;if(t.tabSize===void 0||typeof t.tabSize=="string"?o=4:o=t.tabSize,t.insertSpaces===!1){let s=a=>n(a," ",c=>"	".repeat(Math.floor(c/o))+" ".repeat(c%o));e.displayText=s(e.displayText),e.completionText=s(e.completionText)}else if(t.insertSpaces===!0){let s=a=>n(a,"	",c=>" ".repeat(c*o));if(e.displayText=s(e.displayText),e.completionText=s(e.completionText),r){let a=c=>{if(c==="")return c;let l=c.split(`
`)[0],u=l.length-l.trimStart().length,d=u%o;if(d!==0&&u>0){let f=" ".repeat(d);return n(c,f,p=>" ".repeat((Math.floor(p/o)+1)*o))}else return c};e.displayText=a(e.displayText),e.completionText=a(e.completionText)}}return e}});var wft=m(e1e=>{"use strict";Object.defineProperty(e1e,"__esModule",{value:!0});e1e.completionsFromGhostTextResults=fHr;var lHr=ws(),XH=zI(),uHr=wP(),dHr=xft();function fHr(t,e,r,n,o,s){let a=r.lineAt(n),c=t.map(l=>{let u=XH.LocationFactory.range(XH.LocationFactory.position(n.line,0),XH.LocationFactory.position(n.line,n.character+l.suffixCoverage)),d="";if(o&&(l.completion=(0,dHr.normalizeIndentCharacter)(o,l.completion,a.isEmptyOrWhitespace)),a.isEmptyOrWhitespace&&(l.completion.displayNeedsWsOffset||l.completion.completionText.startsWith(a.text)))d=l.completion.completionText;else{let p=XH.LocationFactory.range(u.start,n);d=r.getText(p)+l.completion.displayText}return{uuid:(0,lHr.generateUuid)(),insertText:d,range:u,uri:r.uri,index:l.completion.completionIndex,telemetry:l.telemetry,displayText:l.completion.displayText,position:n,offset:r.offsetAt(n),resultType:e,copilotAnnotations:l.copilotAnnotations,clientCompletionId:l.clientCompletionId}});if(e===uHr.ResultType.TypingAsSuggested&&s!==void 0){let l=c.find(u=>u.index===s);if(l){let u=c.filter(d=>d.index!==s);c=[l,...u]}}return c}});var Oft=m(r1e=>{"use strict";Object.defineProperty(r1e,"__esModule",{value:!0});r1e.getInlineCompletions=yHr;var Ift=cm(),Pft=Nr(),pHr=i_e(),hHr=wft(),t1e=wP(),mHr=J_e(),gHr=yH(),Rft=b3(),_Hr=An();async function vHr(t,e,r,n={}){let o=t.get(Pft.IInstantiationService),s=t.get(gHr.ICompletionsSpeculativeRequestCache),a=0;n.selectedCompletionInfo?.text&&!n.selectedCompletionInfo.text.includes(")")&&(e=e.addSelectedCompletionInfo(n.selectedCompletionInfo),a=e.position.character-n.selectedCompletionInfo.range.end.character);let c=await o.invokeFunction(t1e.getGhostText,e,r,n);if(c.type!=="success")return c;let[l,u]=c.value;if(r?.isCancellationRequested)return{type:"canceled",reason:"after getGhostText",telemetryData:{telemetryBlob:c.telemetryBlob}};let d=o.invokeFunction(mHr.setLastShown,e.textDocument,e.position,u),f=(0,hHr.completionsFromGhostTextResults)(l,u,e.textDocument,e.position,n.formattingOptions,d);if(f.length===0)return{type:"empty",reason:"no completions in final result",telemetryData:c.telemetryData};if(u!==t1e.ResultType.TypingAsSuggested){e=e.applyEdits([{newText:f[0].insertText,range:f[0].range}]);let h={isSpeculative:!0,opportunityId:n.opportunityId},_=()=>o.invokeFunction(t1e.getGhostText,e,void 0,h);s.set(f[0].clientCompletionId,_)}let p=f.map(h=>{let{start:_,end:g}=h.range,v=Ift.Range.create(_,Ift.Position.create(g.line,g.character-a));return{...h,range:v}});return{...c,value:p}}async function yHr(t,e,r,n,o={}){let s=t.get(Pft.IInstantiationService);EHr(t.get(_Hr.ICompletionsLogTargetService),e,r);let a=await vHr(t,(0,pHr.createCompletionState)(e,r),n,o);return s.invokeFunction(Rft.handleGhostTextResultTelemetry,a)}function EHr(t,e,r){let n=e.getText({start:{line:Math.max(r.line-1,0),character:0},end:r}),o=e.getText({start:r,end:{line:Math.min(r.line+2,e.lineCount-1),character:e.lineCount-1>r.line?0:r.character}});Rft.logger.debug(t,`Requesting for ${e.uri} at ${r.line}:${r.character}`,`between ${JSON.stringify(n)} and ${JSON.stringify(o)}.`)}});var Mft=m(rG=>{"use strict";Object.defineProperty(rG,"__esModule",{value:!0});rG.LocalFileSystem=void 0;var eG=require("fs"),THr=require("path"),tG=G1(),n1e=W1(),i1e=class{async readFileString(e){return(await eG.promises.readFile((0,n1e.fsPath)(e))).toString()}async stat(e){let{targetStat:r,lstat:n,stat:o}=await this.statWithLink((0,n1e.fsPath)(e));return{ctime:r.ctimeMs,mtime:r.mtimeMs,size:r.size,type:this.getFileType(r,n,o)}}async readDirectory(e){let r=(0,n1e.fsPath)(e),n=await eG.promises.readdir(r,{withFileTypes:!0}),o=[];for(let s of n){let{targetStat:a,lstat:c,stat:l}=await this.statWithLink((0,THr.join)(r,s.name));o.push([s.name,this.getFileType(a,c,l)])}return o}async statWithLink(e){let r=await eG.promises.lstat(e);if(r.isSymbolicLink())try{let n=await eG.promises.stat(e);return{lstat:r,stat:n,targetStat:n}}catch{}return{lstat:r,targetStat:r}}getFileType(e,r,n){let o=tG.FileType.Unknown;return e.isFile()&&(o=tG.FileType.File),e.isDirectory()&&(o=tG.FileType.Directory),r.isSymbolicLink()&&n&&(o|=tG.FileType.SymbolicLink),o}};rG.LocalFileSystem=i1e});var Dft=m(ig=>{"use strict";var SHr=ig&&ig.__decorate||function(t,e,r,n){var o=arguments.length,s=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(o<3?a(s):o>3?a(e,r,s):a(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},V3=ig&&ig.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(ig,"__esModule",{value:!0});ig.CompositeRelatedFilesProvider=void 0;var bHr=GS(),CHr=Nr(),UP=Gl(),AHr=Wa(),xHr=G1(),wHr=An(),H3=bP(),Rb=oH(),Nft=["cpp","c","cuda-cpp"],Lft=["typescript","javascript","typescriptreact","javascriptreact"],kft=["csharp"],IHr=new Map([...Nft.map(t=>[t,H3.NeighboringFileType.RelatedCpp]),...Lft.map(t=>[t,H3.NeighboringFileType.RelatedTypeScript]),...kft.map(t=>[t,H3.NeighboringFileType.RelatedCSharpRoslyn])]);function PHr(t){return IHr.get(t)??H3.NeighboringFileType.RelatedOther}var o1e=class extends Rb.RelatedFilesProvider{constructor(e,r,n,o,s){super(e,r,o,s),this.featuresService=n,this.providers=new Map,this.telemetrySent=!1,this.reportedUnknownProviders=new Set}async getRelatedFilesResponse(e,r,n){let o=Date.now(),s=e.clientLanguageId.toLowerCase();if(PHr(s)===H3.NeighboringFileType.RelatedOther&&!this.reportedUnknownProviders.has(s)&&(this.reportedUnknownProviders.add(s),Rb.relatedFilesLogger.warn(this.logTarget,`unknown language ${s}`)),this.relatedFilesTelemetry(r),Rb.relatedFilesLogger.debug(this.logTarget,`Fetching related files for ${e.uri}`),!this.isActive(s,r))return Rb.relatedFilesLogger.debug(this.logTarget,"language-server related-files experiment is not active."),Rb.EmptyRelatedFilesResponse;let c=this.providers.get(s);if(!c)return Rb.EmptyRelatedFilesResponse;try{return this.convert(e.uri,c,o,r,n)}catch{this.relatedFileNonresponseTelemetry(s,r);return}}async convert(e,r,n,o,s){s||(s={isCancellationRequested:!1,onCancellationRequested:()=>({dispose(){}})});let a={entries:[],traits:[]},c=r.size>0;for(let l of r.values()){let u=await l.callback(e,{flags:{}},s);if(u){c=!1,a.entries.push(...u.entries),u.traits&&a.traits.push(...u.traits);for(let d of u.entries)for(let f of d.uris)Rb.relatedFilesLogger.debug(this.logTarget,f.toString())}}return this.performanceTelemetry(Date.now()-n,o),c?void 0:a}registerRelatedFilesProvider(e,r,n){let o=this.providers.get(r);o?o.set(e,{extensionId:e,languageId:r,callback:n}):this.providers.set(r,new Map([[e,{extensionId:e,languageId:r,callback:n}]]))}unregisterRelatedFilesProvider(e,r,n){let o=this.providers.get(r);if(o){let s=o.get(e);s&&s.callback===n&&o.delete(e)}}isActive(e,r){return kft.includes(e)?this.featuresService.relatedFilesVSCodeCSharp(r)||this.instantiationService.invokeFunction(UP.getConfig,UP.ConfigKey.RelatedFilesVSCodeCSharp):Lft.includes(e)?this.featuresService.relatedFilesVSCodeTypeScript(r)||this.instantiationService.invokeFunction(UP.getConfig,UP.ConfigKey.RelatedFilesVSCodeTypeScript):Nft.includes(e)?this.featuresService.cppHeadersEnableSwitch(r):this.featuresService.relatedFilesVSCode(r)||this.instantiationService.invokeFunction(UP.getConfig,UP.ConfigKey.RelatedFilesVSCode)}relatedFilesTelemetry(e){}relatedFileNonresponseTelemetry(e,r){}performanceTelemetry(e,r){}};ig.CompositeRelatedFilesProvider=o1e;ig.CompositeRelatedFilesProvider=o1e=SHr([V3(0,CHr.IInstantiationService),V3(1,bHr.IIgnoreService),V3(2,AHr.ICompletionsFeaturesService),V3(3,wHr.ICompletionsLogTargetService),V3(4,xHr.ICompletionsFileSystemService)],o1e)});var jft=m(Ob=>{"use strict";Object.defineProperty(Ob,"__esModule",{value:!0});Ob.PositionOffsetTransformer=Ob.PositionOffsetTransformerBase=void 0;Ob.ensureDependenciesAreSet=MHr;var Uft=Wl(),qft=NN(),RHr=kj(),OHr=oI(),Fft=kj();Object.defineProperty(Ob,"PositionOffsetTransformerBase",{enumerable:!0,get:function(){return Fft.PositionOffsetTransformerBase}});Object.defineProperty(Ob,"PositionOffsetTransformer",{enumerable:!0,get:function(){return Fft.PositionOffsetTransformer}});(0,RHr._setPositionOffsetTransformerDependencies)({StringEdit:Uft.StringEdit,StringReplacement:Uft.StringReplacement,TextReplacement:qft.TextReplacement,TextEdit:qft.TextEdit,TextLength:OHr.TextLength});function MHr(){}});var iG=m(nG=>{"use strict";Object.defineProperty(nG,"__esModule",{value:!0});nG.RootedLineEdit=void 0;var Bft=uI(),NHr=jft(),LHr=og();(0,NHr.ensureDependenciesAreSet)();var s1e=class t{static fromEdit(e){let r=Bft.LineEdit.fromStringEdit(e.edit,e.base);return new t(e.base,r)}constructor(e,r){this.base=e,this.edit=r}toString(){return this.edit.humanReadablePatch(this.base.getLines())}toEdit(){return this.edit.toEdit(this.base)}toRootedEdit(){return new LHr.RootedEdit(this.base,this.toEdit())}getEditedState(){let e=this.base.getLines();return this.edit.apply(e)}removeCommonSuffixPrefixLines(){let e=n=>!n.lineRange.isEmpty||n.newLines.length>0,r=this.edit.replacements.map(n=>n.removeCommonSuffixPrefixLines(this.base)).filter(n=>e(n));return new t(this.base,new Bft.LineEdit(r))}};nG.RootedLineEdit=s1e});var og=m(_v=>{"use strict";Object.defineProperty(_v,"__esModule",{value:!0});_v.Edits=_v.SingleEdits=_v.RootedEdit=void 0;var $ft=qi(),kHr=uI(),qP=Wl(),Vft=c1e(),DHr=iG(),G3=class t{static toLineEdit(e){return kHr.LineEdit.fromStringEdit(e.edit,e.base)}constructor(e,r){this.base=e,this.edit=r}getEditedState(){return this.edit.applyOnText(this.base)}rebase(e){return(0,$ft.assertFn)(()=>null.base.equals(e.applyOnText(this.base))),(0,$ft.assertFn)(()=>null.edit.applyOnText(null.base).equals(this.edit.applyOnText(e.applyOnText(this.base)))),null}toString(){return DHr.RootedLineEdit.fromEdit(this).toString()}normalize(){return new t(this.base,this.edit.normalizeOnSource(this.base.value))}equals(e){return this.base.equals(e.base)&&this.edit.equals(e.edit)}};_v.RootedEdit=G3;var a1e=class{constructor(e){this.edits=e}compose(){return qP.StringEdit.compose(this.edits.map(e=>e.toEdit()))}apply(e){return this.compose().apply(e)}isEmpty(){return this.edits.length===0}toEdits(){return new oG(qP.StringEdit,this.edits.map(e=>e.toEdit()))}};_v.SingleEdits=a1e;var oG=class t{static single(e){return new t(qP.StringEdit,[e])}constructor(e,r){this._editType=e,this.edits=r}compose(){let e=new this._editType([]);for(let r of this.edits)e=e.compose(r);return e}add(e){return new t(this._editType,[...this.edits,e])}apply(e){return this.compose().apply(e)}isEmpty(){return this.edits.length===0}swap(e){let r=e,n=[];for(let o of this.edits){let s=qP.BaseStringEdit.trySwap(r,o);if(!s)return;n.push(s.e1),r=s.e2}return{edits:new t(qP.StringEdit,n),editLast:r}}serialize(){return this.edits.map(e=>(0,Vft.serializeStringEdit)(e))}static deserialize(e){return new t(qP.StringEdit,e.map(r=>(0,Vft.deserializeStringEdit)(r)))}toHumanReadablePatch(e){let r=e,n=[];for(let o of this.edits){let s=G3.toLineEdit(new G3(r,o));n.push(s.humanReadablePatch(r.getLines())),r=o.applyOnText(r)}return n.join(`
---
`)}};_v.Edits=oG});var c1e=m(FP=>{"use strict";Object.defineProperty(FP,"__esModule",{value:!0});FP.serializeStringEdit=FHr;FP.serializeSingleEdit=zft;FP.deserializeStringEdit=jHr;FP.decomposeStringEdit=$Hr;var UHr=Gr(),Gft=Wl(),qHr=zi(),Hft=og();function FHr(t){return t.replacements.map(e=>zft(e))}function zft(t){return[t.replaceRange.start,t.replaceRange.endExclusive,t.newText]}function jHr(t){return new Gft.StringEdit(t.map(e=>BHr(e)))}function BHr(t){return new Gft.StringReplacement(new qHr.OffsetRange(t[0],t[1]),t[2])}function $Hr(t,e){if(e===void 0){let o=[],s=0;for(let a of t.replacements)o.push(a.delta(s)),s+=a.newText.length-a.replaceRange.length;return new Hft.SingleEdits(o)}if(t.replacements.length!==e.arrayLength)throw(0,UHr.illegalArgument)(`Number of edits ${t.replacements.length} does not match ${e.arrayLength}`);let r=[],n=t.replacements.slice();for(let o=0;o<t.replacements.length;++o){let s=e.mapIndexBack(o),a=n[s];r.push(a);for(let c=s;c<n.length;++c){let l=a.newText.length-a.replaceRange.length,u=n[c];n[c]=u.delta(l)}}return new Hft.SingleEdits(r)}});var Wft=m(sG=>{"use strict";Object.defineProperty(sG,"__esModule",{value:!0});sG.DebugRecorderBookmark=void 0;var l1e=class{constructor(e){this.timeMs=e}};sG.DebugRecorderBookmark=l1e});var d1e=m(aG=>{"use strict";Object.defineProperty(aG,"__esModule",{value:!0});aG.register=HHr;aG.getCodiconFontCharacters=GHr;var VHr=Ol(),u1e=Object.create(null);function HHr(t,e){if((0,VHr.isString)(e)){let r=u1e[e];if(r===void 0)throw new Error(`${t} references an unknown codicon: ${e}`);e=r}return u1e[t]=e,{id:t}}function GHr(){return u1e}});var Kft=m(cG=>{"use strict";Object.defineProperty(cG,"__esModule",{value:!0});cG.codiconsLibrary=void 0;var T=d1e();cG.codiconsLibrary={add:(0,T.register)("add",6e4),plus:(0,T.register)("plus",6e4),gistNew:(0,T.register)("gist-new",6e4),repoCreate:(0,T.register)("repo-create",6e4),lightbulb:(0,T.register)("lightbulb",60001),lightBulb:(0,T.register)("light-bulb",60001),repo:(0,T.register)("repo",60002),repoDelete:(0,T.register)("repo-delete",60002),gistFork:(0,T.register)("gist-fork",60003),repoForked:(0,T.register)("repo-forked",60003),gitPullRequest:(0,T.register)("git-pull-request",60004),gitPullRequestAbandoned:(0,T.register)("git-pull-request-abandoned",60004),recordKeys:(0,T.register)("record-keys",60005),keyboard:(0,T.register)("keyboard",60005),tag:(0,T.register)("tag",60006),gitPullRequestLabel:(0,T.register)("git-pull-request-label",60006),tagAdd:(0,T.register)("tag-add",60006),tagRemove:(0,T.register)("tag-remove",60006),person:(0,T.register)("person",60007),personFollow:(0,T.register)("person-follow",60007),personOutline:(0,T.register)("person-outline",60007),personFilled:(0,T.register)("person-filled",60007),gitBranch:(0,T.register)("git-branch",60008),gitBranchCreate:(0,T.register)("git-branch-create",60008),gitBranchDelete:(0,T.register)("git-branch-delete",60008),sourceControl:(0,T.register)("source-control",60008),mirror:(0,T.register)("mirror",60009),mirrorPublic:(0,T.register)("mirror-public",60009),star:(0,T.register)("star",60010),starAdd:(0,T.register)("star-add",60010),starDelete:(0,T.register)("star-delete",60010),starEmpty:(0,T.register)("star-empty",60010),comment:(0,T.register)("comment",60011),commentAdd:(0,T.register)("comment-add",60011),alert:(0,T.register)("alert",60012),warning:(0,T.register)("warning",60012),search:(0,T.register)("search",60013),searchSave:(0,T.register)("search-save",60013),logOut:(0,T.register)("log-out",60014),signOut:(0,T.register)("sign-out",60014),logIn:(0,T.register)("log-in",60015),signIn:(0,T.register)("sign-in",60015),eye:(0,T.register)("eye",60016),eyeUnwatch:(0,T.register)("eye-unwatch",60016),eyeWatch:(0,T.register)("eye-watch",60016),circleFilled:(0,T.register)("circle-filled",60017),primitiveDot:(0,T.register)("primitive-dot",60017),closeDirty:(0,T.register)("close-dirty",60017),debugBreakpoint:(0,T.register)("debug-breakpoint",60017),debugBreakpointDisabled:(0,T.register)("debug-breakpoint-disabled",60017),debugHint:(0,T.register)("debug-hint",60017),terminalDecorationSuccess:(0,T.register)("terminal-decoration-success",60017),primitiveSquare:(0,T.register)("primitive-square",60018),edit:(0,T.register)("edit",60019),pencil:(0,T.register)("pencil",60019),info:(0,T.register)("info",60020),issueOpened:(0,T.register)("issue-opened",60020),gistPrivate:(0,T.register)("gist-private",60021),gitForkPrivate:(0,T.register)("git-fork-private",60021),lock:(0,T.register)("lock",60021),mirrorPrivate:(0,T.register)("mirror-private",60021),close:(0,T.register)("close",60022),removeClose:(0,T.register)("remove-close",60022),x:(0,T.register)("x",60022),repoSync:(0,T.register)("repo-sync",60023),sync:(0,T.register)("sync",60023),clone:(0,T.register)("clone",60024),desktopDownload:(0,T.register)("desktop-download",60024),beaker:(0,T.register)("beaker",60025),microscope:(0,T.register)("microscope",60025),vm:(0,T.register)("vm",60026),deviceDesktop:(0,T.register)("device-desktop",60026),file:(0,T.register)("file",60027),more:(0,T.register)("more",60028),ellipsis:(0,T.register)("ellipsis",60028),kebabHorizontal:(0,T.register)("kebab-horizontal",60028),mailReply:(0,T.register)("mail-reply",60029),reply:(0,T.register)("reply",60029),organization:(0,T.register)("organization",60030),organizationFilled:(0,T.register)("organization-filled",60030),organizationOutline:(0,T.register)("organization-outline",60030),newFile:(0,T.register)("new-file",60031),fileAdd:(0,T.register)("file-add",60031),newFolder:(0,T.register)("new-folder",60032),fileDirectoryCreate:(0,T.register)("file-directory-create",60032),trash:(0,T.register)("trash",60033),trashcan:(0,T.register)("trashcan",60033),history:(0,T.register)("history",60034),clock:(0,T.register)("clock",60034),folder:(0,T.register)("folder",60035),fileDirectory:(0,T.register)("file-directory",60035),symbolFolder:(0,T.register)("symbol-folder",60035),logoGithub:(0,T.register)("logo-github",60036),markGithub:(0,T.register)("mark-github",60036),github:(0,T.register)("github",60036),terminal:(0,T.register)("terminal",60037),console:(0,T.register)("console",60037),repl:(0,T.register)("repl",60037),zap:(0,T.register)("zap",60038),symbolEvent:(0,T.register)("symbol-event",60038),error:(0,T.register)("error",60039),stop:(0,T.register)("stop",60039),variable:(0,T.register)("variable",60040),symbolVariable:(0,T.register)("symbol-variable",60040),array:(0,T.register)("array",60042),symbolArray:(0,T.register)("symbol-array",60042),symbolModule:(0,T.register)("symbol-module",60043),symbolPackage:(0,T.register)("symbol-package",60043),symbolNamespace:(0,T.register)("symbol-namespace",60043),symbolObject:(0,T.register)("symbol-object",60043),symbolMethod:(0,T.register)("symbol-method",60044),symbolFunction:(0,T.register)("symbol-function",60044),symbolConstructor:(0,T.register)("symbol-constructor",60044),symbolBoolean:(0,T.register)("symbol-boolean",60047),symbolNull:(0,T.register)("symbol-null",60047),symbolNumeric:(0,T.register)("symbol-numeric",60048),symbolNumber:(0,T.register)("symbol-number",60048),symbolStructure:(0,T.register)("symbol-structure",60049),symbolStruct:(0,T.register)("symbol-struct",60049),symbolParameter:(0,T.register)("symbol-parameter",60050),symbolTypeParameter:(0,T.register)("symbol-type-parameter",60050),symbolKey:(0,T.register)("symbol-key",60051),symbolText:(0,T.register)("symbol-text",60051),symbolReference:(0,T.register)("symbol-reference",60052),goToFile:(0,T.register)("go-to-file",60052),symbolEnum:(0,T.register)("symbol-enum",60053),symbolValue:(0,T.register)("symbol-value",60053),symbolRuler:(0,T.register)("symbol-ruler",60054),symbolUnit:(0,T.register)("symbol-unit",60054),activateBreakpoints:(0,T.register)("activate-breakpoints",60055),archive:(0,T.register)("archive",60056),arrowBoth:(0,T.register)("arrow-both",60057),arrowDown:(0,T.register)("arrow-down",60058),arrowLeft:(0,T.register)("arrow-left",60059),arrowRight:(0,T.register)("arrow-right",60060),arrowSmallDown:(0,T.register)("arrow-small-down",60061),arrowSmallLeft:(0,T.register)("arrow-small-left",60062),arrowSmallRight:(0,T.register)("arrow-small-right",60063),arrowSmallUp:(0,T.register)("arrow-small-up",60064),arrowUp:(0,T.register)("arrow-up",60065),bell:(0,T.register)("bell",60066),bold:(0,T.register)("bold",60067),book:(0,T.register)("book",60068),bookmark:(0,T.register)("bookmark",60069),debugBreakpointConditionalUnverified:(0,T.register)("debug-breakpoint-conditional-unverified",60070),debugBreakpointConditional:(0,T.register)("debug-breakpoint-conditional",60071),debugBreakpointConditionalDisabled:(0,T.register)("debug-breakpoint-conditional-disabled",60071),debugBreakpointDataUnverified:(0,T.register)("debug-breakpoint-data-unverified",60072),debugBreakpointData:(0,T.register)("debug-breakpoint-data",60073),debugBreakpointDataDisabled:(0,T.register)("debug-breakpoint-data-disabled",60073),debugBreakpointLogUnverified:(0,T.register)("debug-breakpoint-log-unverified",60074),debugBreakpointLog:(0,T.register)("debug-breakpoint-log",60075),debugBreakpointLogDisabled:(0,T.register)("debug-breakpoint-log-disabled",60075),briefcase:(0,T.register)("briefcase",60076),broadcast:(0,T.register)("broadcast",60077),browser:(0,T.register)("browser",60078),bug:(0,T.register)("bug",60079),calendar:(0,T.register)("calendar",60080),caseSensitive:(0,T.register)("case-sensitive",60081),check:(0,T.register)("check",60082),checklist:(0,T.register)("checklist",60083),chevronDown:(0,T.register)("chevron-down",60084),chevronLeft:(0,T.register)("chevron-left",60085),chevronRight:(0,T.register)("chevron-right",60086),chevronUp:(0,T.register)("chevron-up",60087),chromeClose:(0,T.register)("chrome-close",60088),chromeMaximize:(0,T.register)("chrome-maximize",60089),chromeMinimize:(0,T.register)("chrome-minimize",60090),chromeRestore:(0,T.register)("chrome-restore",60091),circleOutline:(0,T.register)("circle-outline",60092),circle:(0,T.register)("circle",60092),debugBreakpointUnverified:(0,T.register)("debug-breakpoint-unverified",60092),terminalDecorationIncomplete:(0,T.register)("terminal-decoration-incomplete",60092),circleSlash:(0,T.register)("circle-slash",60093),circuitBoard:(0,T.register)("circuit-board",60094),clearAll:(0,T.register)("clear-all",60095),clippy:(0,T.register)("clippy",60096),closeAll:(0,T.register)("close-all",60097),cloudDownload:(0,T.register)("cloud-download",60098),cloudUpload:(0,T.register)("cloud-upload",60099),code:(0,T.register)("code",60100),collapseAll:(0,T.register)("collapse-all",60101),colorMode:(0,T.register)("color-mode",60102),commentDiscussion:(0,T.register)("comment-discussion",60103),creditCard:(0,T.register)("credit-card",60105),dash:(0,T.register)("dash",60108),dashboard:(0,T.register)("dashboard",60109),database:(0,T.register)("database",60110),debugContinue:(0,T.register)("debug-continue",60111),debugDisconnect:(0,T.register)("debug-disconnect",60112),debugPause:(0,T.register)("debug-pause",60113),debugRestart:(0,T.register)("debug-restart",60114),debugStart:(0,T.register)("debug-start",60115),debugStepInto:(0,T.register)("debug-step-into",60116),debugStepOut:(0,T.register)("debug-step-out",60117),debugStepOver:(0,T.register)("debug-step-over",60118),debugStop:(0,T.register)("debug-stop",60119),debug:(0,T.register)("debug",60120),deviceCameraVideo:(0,T.register)("device-camera-video",60121),deviceCamera:(0,T.register)("device-camera",60122),deviceMobile:(0,T.register)("device-mobile",60123),diffAdded:(0,T.register)("diff-added",60124),diffIgnored:(0,T.register)("diff-ignored",60125),diffModified:(0,T.register)("diff-modified",60126),diffRemoved:(0,T.register)("diff-removed",60127),diffRenamed:(0,T.register)("diff-renamed",60128),diff:(0,T.register)("diff",60129),diffSidebyside:(0,T.register)("diff-sidebyside",60129),discard:(0,T.register)("discard",60130),editorLayout:(0,T.register)("editor-layout",60131),emptyWindow:(0,T.register)("empty-window",60132),exclude:(0,T.register)("exclude",60133),extensions:(0,T.register)("extensions",60134),eyeClosed:(0,T.register)("eye-closed",60135),fileBinary:(0,T.register)("file-binary",60136),fileCode:(0,T.register)("file-code",60137),fileMedia:(0,T.register)("file-media",60138),filePdf:(0,T.register)("file-pdf",60139),fileSubmodule:(0,T.register)("file-submodule",60140),fileSymlinkDirectory:(0,T.register)("file-symlink-directory",60141),fileSymlinkFile:(0,T.register)("file-symlink-file",60142),fileZip:(0,T.register)("file-zip",60143),files:(0,T.register)("files",60144),filter:(0,T.register)("filter",60145),flame:(0,T.register)("flame",60146),foldDown:(0,T.register)("fold-down",60147),foldUp:(0,T.register)("fold-up",60148),fold:(0,T.register)("fold",60149),folderActive:(0,T.register)("folder-active",60150),folderOpened:(0,T.register)("folder-opened",60151),gear:(0,T.register)("gear",60152),gift:(0,T.register)("gift",60153),gistSecret:(0,T.register)("gist-secret",60154),gist:(0,T.register)("gist",60155),gitCommit:(0,T.register)("git-commit",60156),gitCompare:(0,T.register)("git-compare",60157),compareChanges:(0,T.register)("compare-changes",60157),gitMerge:(0,T.register)("git-merge",60158),githubAction:(0,T.register)("github-action",60159),githubAlt:(0,T.register)("github-alt",60160),globe:(0,T.register)("globe",60161),grabber:(0,T.register)("grabber",60162),graph:(0,T.register)("graph",60163),gripper:(0,T.register)("gripper",60164),heart:(0,T.register)("heart",60165),home:(0,T.register)("home",60166),horizontalRule:(0,T.register)("horizontal-rule",60167),hubot:(0,T.register)("hubot",60168),inbox:(0,T.register)("inbox",60169),issueReopened:(0,T.register)("issue-reopened",60171),issues:(0,T.register)("issues",60172),italic:(0,T.register)("italic",60173),jersey:(0,T.register)("jersey",60174),json:(0,T.register)("json",60175),kebabVertical:(0,T.register)("kebab-vertical",60176),key:(0,T.register)("key",60177),law:(0,T.register)("law",60178),lightbulbAutofix:(0,T.register)("lightbulb-autofix",60179),linkExternal:(0,T.register)("link-external",60180),link:(0,T.register)("link",60181),listOrdered:(0,T.register)("list-ordered",60182),listUnordered:(0,T.register)("list-unordered",60183),liveShare:(0,T.register)("live-share",60184),loading:(0,T.register)("loading",60185),location:(0,T.register)("location",60186),mailRead:(0,T.register)("mail-read",60187),mail:(0,T.register)("mail",60188),markdown:(0,T.register)("markdown",60189),megaphone:(0,T.register)("megaphone",60190),mention:(0,T.register)("mention",60191),milestone:(0,T.register)("milestone",60192),gitPullRequestMilestone:(0,T.register)("git-pull-request-milestone",60192),mortarBoard:(0,T.register)("mortar-board",60193),move:(0,T.register)("move",60194),multipleWindows:(0,T.register)("multiple-windows",60195),mute:(0,T.register)("mute",60196),noNewline:(0,T.register)("no-newline",60197),note:(0,T.register)("note",60198),octoface:(0,T.register)("octoface",60199),openPreview:(0,T.register)("open-preview",60200),package:(0,T.register)("package",60201),paintcan:(0,T.register)("paintcan",60202),pin:(0,T.register)("pin",60203),play:(0,T.register)("play",60204),run:(0,T.register)("run",60204),plug:(0,T.register)("plug",60205),preserveCase:(0,T.register)("preserve-case",60206),preview:(0,T.register)("preview",60207),project:(0,T.register)("project",60208),pulse:(0,T.register)("pulse",60209),question:(0,T.register)("question",60210),quote:(0,T.register)("quote",60211),radioTower:(0,T.register)("radio-tower",60212),reactions:(0,T.register)("reactions",60213),references:(0,T.register)("references",60214),refresh:(0,T.register)("refresh",60215),regex:(0,T.register)("regex",60216),remoteExplorer:(0,T.register)("remote-explorer",60217),remote:(0,T.register)("remote",60218),remove:(0,T.register)("remove",60219),replaceAll:(0,T.register)("replace-all",60220),replace:(0,T.register)("replace",60221),repoClone:(0,T.register)("repo-clone",60222),repoForcePush:(0,T.register)("repo-force-push",60223),repoPull:(0,T.register)("repo-pull",60224),repoPush:(0,T.register)("repo-push",60225),report:(0,T.register)("report",60226),requestChanges:(0,T.register)("request-changes",60227),rocket:(0,T.register)("rocket",60228),rootFolderOpened:(0,T.register)("root-folder-opened",60229),rootFolder:(0,T.register)("root-folder",60230),rss:(0,T.register)("rss",60231),ruby:(0,T.register)("ruby",60232),saveAll:(0,T.register)("save-all",60233),saveAs:(0,T.register)("save-as",60234),save:(0,T.register)("save",60235),screenFull:(0,T.register)("screen-full",60236),screenNormal:(0,T.register)("screen-normal",60237),searchStop:(0,T.register)("search-stop",60238),server:(0,T.register)("server",60240),settingsGear:(0,T.register)("settings-gear",60241),settings:(0,T.register)("settings",60242),shield:(0,T.register)("shield",60243),smiley:(0,T.register)("smiley",60244),sortPrecedence:(0,T.register)("sort-precedence",60245),splitHorizontal:(0,T.register)("split-horizontal",60246),splitVertical:(0,T.register)("split-vertical",60247),squirrel:(0,T.register)("squirrel",60248),starFull:(0,T.register)("star-full",60249),starHalf:(0,T.register)("star-half",60250),symbolClass:(0,T.register)("symbol-class",60251),symbolColor:(0,T.register)("symbol-color",60252),symbolConstant:(0,T.register)("symbol-constant",60253),symbolEnumMember:(0,T.register)("symbol-enum-member",60254),symbolField:(0,T.register)("symbol-field",60255),symbolFile:(0,T.register)("symbol-file",60256),symbolInterface:(0,T.register)("symbol-interface",60257),symbolKeyword:(0,T.register)("symbol-keyword",60258),symbolMisc:(0,T.register)("symbol-misc",60259),symbolOperator:(0,T.register)("symbol-operator",60260),symbolProperty:(0,T.register)("symbol-property",60261),wrench:(0,T.register)("wrench",60261),wrenchSubaction:(0,T.register)("wrench-subaction",60261),symbolSnippet:(0,T.register)("symbol-snippet",60262),tasklist:(0,T.register)("tasklist",60263),telescope:(0,T.register)("telescope",60264),textSize:(0,T.register)("text-size",60265),threeBars:(0,T.register)("three-bars",60266),thumbsdown:(0,T.register)("thumbsdown",60267),thumbsup:(0,T.register)("thumbsup",60268),tools:(0,T.register)("tools",60269),triangleDown:(0,T.register)("triangle-down",60270),triangleLeft:(0,T.register)("triangle-left",60271),triangleRight:(0,T.register)("triangle-right",60272),triangleUp:(0,T.register)("triangle-up",60273),twitter:(0,T.register)("twitter",60274),unfold:(0,T.register)("unfold",60275),unlock:(0,T.register)("unlock",60276),unmute:(0,T.register)("unmute",60277),unverified:(0,T.register)("unverified",60278),verified:(0,T.register)("verified",60279),versions:(0,T.register)("versions",60280),vmActive:(0,T.register)("vm-active",60281),vmOutline:(0,T.register)("vm-outline",60282),vmRunning:(0,T.register)("vm-running",60283),watch:(0,T.register)("watch",60284),whitespace:(0,T.register)("whitespace",60285),wholeWord:(0,T.register)("whole-word",60286),window:(0,T.register)("window",60287),wordWrap:(0,T.register)("word-wrap",60288),zoomIn:(0,T.register)("zoom-in",60289),zoomOut:(0,T.register)("zoom-out",60290),listFilter:(0,T.register)("list-filter",60291),listFlat:(0,T.register)("list-flat",60292),listSelection:(0,T.register)("list-selection",60293),selection:(0,T.register)("selection",60293),listTree:(0,T.register)("list-tree",60294),debugBreakpointFunctionUnverified:(0,T.register)("debug-breakpoint-function-unverified",60295),debugBreakpointFunction:(0,T.register)("debug-breakpoint-function",60296),debugBreakpointFunctionDisabled:(0,T.register)("debug-breakpoint-function-disabled",60296),debugStackframeActive:(0,T.register)("debug-stackframe-active",60297),circleSmallFilled:(0,T.register)("circle-small-filled",60298),debugStackframeDot:(0,T.register)("debug-stackframe-dot",60298),terminalDecorationMark:(0,T.register)("terminal-decoration-mark",60298),debugStackframe:(0,T.register)("debug-stackframe",60299),debugStackframeFocused:(0,T.register)("debug-stackframe-focused",60299),debugBreakpointUnsupported:(0,T.register)("debug-breakpoint-unsupported",60300),symbolString:(0,T.register)("symbol-string",60301),debugReverseContinue:(0,T.register)("debug-reverse-continue",60302),debugStepBack:(0,T.register)("debug-step-back",60303),debugRestartFrame:(0,T.register)("debug-restart-frame",60304),debugAlt:(0,T.register)("debug-alt",60305),callIncoming:(0,T.register)("call-incoming",60306),callOutgoing:(0,T.register)("call-outgoing",60307),menu:(0,T.register)("menu",60308),expandAll:(0,T.register)("expand-all",60309),feedback:(0,T.register)("feedback",60310),gitPullRequestReviewer:(0,T.register)("git-pull-request-reviewer",60310),groupByRefType:(0,T.register)("group-by-ref-type",60311),ungroupByRefType:(0,T.register)("ungroup-by-ref-type",60312),account:(0,T.register)("account",60313),gitPullRequestAssignee:(0,T.register)("git-pull-request-assignee",60313),bellDot:(0,T.register)("bell-dot",60314),debugConsole:(0,T.register)("debug-console",60315),library:(0,T.register)("library",60316),output:(0,T.register)("output",60317),runAll:(0,T.register)("run-all",60318),syncIgnored:(0,T.register)("sync-ignored",60319),pinned:(0,T.register)("pinned",60320),githubInverted:(0,T.register)("github-inverted",60321),serverProcess:(0,T.register)("server-process",60322),serverEnvironment:(0,T.register)("server-environment",60323),pass:(0,T.register)("pass",60324),issueClosed:(0,T.register)("issue-closed",60324),stopCircle:(0,T.register)("stop-circle",60325),playCircle:(0,T.register)("play-circle",60326),record:(0,T.register)("record",60327),debugAltSmall:(0,T.register)("debug-alt-small",60328),vmConnect:(0,T.register)("vm-connect",60329),cloud:(0,T.register)("cloud",60330),merge:(0,T.register)("merge",60331),export:(0,T.register)("export",60332),graphLeft:(0,T.register)("graph-left",60333),magnet:(0,T.register)("magnet",60334),notebook:(0,T.register)("notebook",60335),redo:(0,T.register)("redo",60336),checkAll:(0,T.register)("check-all",60337),pinnedDirty:(0,T.register)("pinned-dirty",60338),passFilled:(0,T.register)("pass-filled",60339),circleLargeFilled:(0,T.register)("circle-large-filled",60340),circleLarge:(0,T.register)("circle-large",60341),circleLargeOutline:(0,T.register)("circle-large-outline",60341),combine:(0,T.register)("combine",60342),gather:(0,T.register)("gather",60342),table:(0,T.register)("table",60343),variableGroup:(0,T.register)("variable-group",60344),typeHierarchy:(0,T.register)("type-hierarchy",60345),typeHierarchySub:(0,T.register)("type-hierarchy-sub",60346),typeHierarchySuper:(0,T.register)("type-hierarchy-super",60347),gitPullRequestCreate:(0,T.register)("git-pull-request-create",60348),runAbove:(0,T.register)("run-above",60349),runBelow:(0,T.register)("run-below",60350),notebookTemplate:(0,T.register)("notebook-template",60351),debugRerun:(0,T.register)("debug-rerun",60352),workspaceTrusted:(0,T.register)("workspace-trusted",60353),workspaceUntrusted:(0,T.register)("workspace-untrusted",60354),workspaceUnknown:(0,T.register)("workspace-unknown",60355),terminalCmd:(0,T.register)("terminal-cmd",60356),terminalDebian:(0,T.register)("terminal-debian",60357),terminalLinux:(0,T.register)("terminal-linux",60358),terminalPowershell:(0,T.register)("terminal-powershell",60359),terminalTmux:(0,T.register)("terminal-tmux",60360),terminalUbuntu:(0,T.register)("terminal-ubuntu",60361),terminalBash:(0,T.register)("terminal-bash",60362),arrowSwap:(0,T.register)("arrow-swap",60363),copy:(0,T.register)("copy",60364),personAdd:(0,T.register)("person-add",60365),filterFilled:(0,T.register)("filter-filled",60366),wand:(0,T.register)("wand",60367),debugLineByLine:(0,T.register)("debug-line-by-line",60368),inspect:(0,T.register)("inspect",60369),layers:(0,T.register)("layers",60370),layersDot:(0,T.register)("layers-dot",60371),layersActive:(0,T.register)("layers-active",60372),compass:(0,T.register)("compass",60373),compassDot:(0,T.register)("compass-dot",60374),compassActive:(0,T.register)("compass-active",60375),azure:(0,T.register)("azure",60376),issueDraft:(0,T.register)("issue-draft",60377),gitPullRequestClosed:(0,T.register)("git-pull-request-closed",60378),gitPullRequestDraft:(0,T.register)("git-pull-request-draft",60379),debugAll:(0,T.register)("debug-all",60380),debugCoverage:(0,T.register)("debug-coverage",60381),runErrors:(0,T.register)("run-errors",60382),folderLibrary:(0,T.register)("folder-library",60383),debugContinueSmall:(0,T.register)("debug-continue-small",60384),beakerStop:(0,T.register)("beaker-stop",60385),graphLine:(0,T.register)("graph-line",60386),graphScatter:(0,T.register)("graph-scatter",60387),pieChart:(0,T.register)("pie-chart",60388),bracket:(0,T.register)("bracket",60175),bracketDot:(0,T.register)("bracket-dot",60389),bracketError:(0,T.register)("bracket-error",60390),lockSmall:(0,T.register)("lock-small",60391),azureDevops:(0,T.register)("azure-devops",60392),verifiedFilled:(0,T.register)("verified-filled",60393),newline:(0,T.register)("newline",60394),layout:(0,T.register)("layout",60395),layoutActivitybarLeft:(0,T.register)("layout-activitybar-left",60396),layoutActivitybarRight:(0,T.register)("layout-activitybar-right",60397),layoutPanelLeft:(0,T.register)("layout-panel-left",60398),layoutPanelCenter:(0,T.register)("layout-panel-center",60399),layoutPanelJustify:(0,T.register)("layout-panel-justify",60400),layoutPanelRight:(0,T.register)("layout-panel-right",60401),layoutPanel:(0,T.register)("layout-panel",60402),layoutSidebarLeft:(0,T.register)("layout-sidebar-left",60403),layoutSidebarRight:(0,T.register)("layout-sidebar-right",60404),layoutStatusbar:(0,T.register)("layout-statusbar",60405),layoutMenubar:(0,T.register)("layout-menubar",60406),layoutCentered:(0,T.register)("layout-centered",60407),target:(0,T.register)("target",60408),indent:(0,T.register)("indent",60409),recordSmall:(0,T.register)("record-small",60410),errorSmall:(0,T.register)("error-small",60411),terminalDecorationError:(0,T.register)("terminal-decoration-error",60411),arrowCircleDown:(0,T.register)("arrow-circle-down",60412),arrowCircleLeft:(0,T.register)("arrow-circle-left",60413),arrowCircleRight:(0,T.register)("arrow-circle-right",60414),arrowCircleUp:(0,T.register)("arrow-circle-up",60415),layoutSidebarRightOff:(0,T.register)("layout-sidebar-right-off",60416),layoutPanelOff:(0,T.register)("layout-panel-off",60417),layoutSidebarLeftOff:(0,T.register)("layout-sidebar-left-off",60418),blank:(0,T.register)("blank",60419),heartFilled:(0,T.register)("heart-filled",60420),map:(0,T.register)("map",60421),mapHorizontal:(0,T.register)("map-horizontal",60421),foldHorizontal:(0,T.register)("fold-horizontal",60421),mapFilled:(0,T.register)("map-filled",60422),mapHorizontalFilled:(0,T.register)("map-horizontal-filled",60422),foldHorizontalFilled:(0,T.register)("fold-horizontal-filled",60422),circleSmall:(0,T.register)("circle-small",60423),bellSlash:(0,T.register)("bell-slash",60424),bellSlashDot:(0,T.register)("bell-slash-dot",60425),commentUnresolved:(0,T.register)("comment-unresolved",60426),gitPullRequestGoToChanges:(0,T.register)("git-pull-request-go-to-changes",60427),gitPullRequestNewChanges:(0,T.register)("git-pull-request-new-changes",60428),searchFuzzy:(0,T.register)("search-fuzzy",60429),commentDraft:(0,T.register)("comment-draft",60430),send:(0,T.register)("send",60431),sparkle:(0,T.register)("sparkle",60432),insert:(0,T.register)("insert",60433),mic:(0,T.register)("mic",60434),thumbsdownFilled:(0,T.register)("thumbsdown-filled",60435),thumbsupFilled:(0,T.register)("thumbsup-filled",60436),coffee:(0,T.register)("coffee",60437),snake:(0,T.register)("snake",60438),game:(0,T.register)("game",60439),vr:(0,T.register)("vr",60440),chip:(0,T.register)("chip",60441),piano:(0,T.register)("piano",60442),music:(0,T.register)("music",60443),micFilled:(0,T.register)("mic-filled",60444),repoFetch:(0,T.register)("repo-fetch",60445),copilot:(0,T.register)("copilot",60446),lightbulbSparkle:(0,T.register)("lightbulb-sparkle",60447),robot:(0,T.register)("robot",60448),sparkleFilled:(0,T.register)("sparkle-filled",60449),diffSingle:(0,T.register)("diff-single",60450),diffMultiple:(0,T.register)("diff-multiple",60451),surroundWith:(0,T.register)("surround-with",60452),share:(0,T.register)("share",60453),gitStash:(0,T.register)("git-stash",60454),gitStashApply:(0,T.register)("git-stash-apply",60455),gitStashPop:(0,T.register)("git-stash-pop",60456),vscode:(0,T.register)("vscode",60457),vscodeInsiders:(0,T.register)("vscode-insiders",60458),codeOss:(0,T.register)("code-oss",60459),runCoverage:(0,T.register)("run-coverage",60460),runAllCoverage:(0,T.register)("run-all-coverage",60461),coverage:(0,T.register)("coverage",60462),githubProject:(0,T.register)("github-project",60463),mapVertical:(0,T.register)("map-vertical",60464),foldVertical:(0,T.register)("fold-vertical",60464),mapVerticalFilled:(0,T.register)("map-vertical-filled",60465),foldVerticalFilled:(0,T.register)("fold-vertical-filled",60465),goToSearch:(0,T.register)("go-to-search",60466),percentage:(0,T.register)("percentage",60467),sortPercentage:(0,T.register)("sort-percentage",60467),attach:(0,T.register)("attach",60468),goToEditingSession:(0,T.register)("go-to-editing-session",60469),editSession:(0,T.register)("edit-session",60470),codeReview:(0,T.register)("code-review",60471),copilotWarning:(0,T.register)("copilot-warning",60472),python:(0,T.register)("python",60473),copilotLarge:(0,T.register)("copilot-large",60474),copilotWarningLarge:(0,T.register)("copilot-warning-large",60475),keyboardTab:(0,T.register)("keyboard-tab",60476),copilotBlocked:(0,T.register)("copilot-blocked",60477),copilotNotConnected:(0,T.register)("copilot-not-connected",60478),flag:(0,T.register)("flag",60479),lightbulbEmpty:(0,T.register)("lightbulb-empty",60480),symbolMethodArrow:(0,T.register)("symbol-method-arrow",60481),copilotUnavailable:(0,T.register)("copilot-unavailable",60482),repoPinned:(0,T.register)("repo-pinned",60483),keyboardTabAbove:(0,T.register)("keyboard-tab-above",60484),keyboardTabBelow:(0,T.register)("keyboard-tab-below",60485),gitPullRequestDone:(0,T.register)("git-pull-request-done",60486),mcp:(0,T.register)("mcp",60487),extensionsLarge:(0,T.register)("extensions-large",60488),layoutPanelDock:(0,T.register)("layout-panel-dock",60489),layoutSidebarLeftDock:(0,T.register)("layout-sidebar-left-dock",60490),layoutSidebarRightDock:(0,T.register)("layout-sidebar-right-dock",60491),copilotInProgress:(0,T.register)("copilot-in-progress",60492),copilotError:(0,T.register)("copilot-error",60493),copilotSuccess:(0,T.register)("copilot-success",60494),chatSparkle:(0,T.register)("chat-sparkle",60495),searchSparkle:(0,T.register)("search-sparkle",60496),editSparkle:(0,T.register)("edit-sparkle",60497),copilotSnooze:(0,T.register)("copilot-snooze",60498),sendToRemoteAgent:(0,T.register)("send-to-remote-agent",60499),commentDiscussionSparkle:(0,T.register)("comment-discussion-sparkle",60500),chatSparkleWarning:(0,T.register)("chat-sparkle-warning",60501),chatSparkleError:(0,T.register)("chat-sparkle-error",60502),collection:(0,T.register)("collection",60503),newCollection:(0,T.register)("new-collection",60504),thinking:(0,T.register)("thinking",60505),build:(0,T.register)("build",60506),commentDiscussionQuote:(0,T.register)("comment-discussion-quote",60507),cursor:(0,T.register)("cursor",60508),eraser:(0,T.register)("eraser",60509),fileText:(0,T.register)("file-text",60510),gitLens:(0,T.register)("git-lens",60511),quotes:(0,T.register)("quotes",60512),rename:(0,T.register)("rename",60513),runWithDeps:(0,T.register)("run-with-deps",60514),debugConnected:(0,T.register)("debug-connected",60515),strikethrough:(0,T.register)("strikethrough",60516),openInProduct:(0,T.register)("open-in-product",60517),indexZero:(0,T.register)("index-zero",60518)}});var Yft=m(sg=>{"use strict";Object.defineProperty(sg,"__esModule",{value:!0});sg.Codicon=sg.codiconsDerived=void 0;sg.getAllCodicons=WHr;var In=d1e(),zHr=Kft();function WHr(){return Object.values(sg.Codicon)}sg.codiconsDerived={dialogError:(0,In.register)("dialog-error","error"),dialogWarning:(0,In.register)("dialog-warning","warning"),dialogInfo:(0,In.register)("dialog-info","info"),dialogClose:(0,In.register)("dialog-close","close"),treeItemExpanded:(0,In.register)("tree-item-expanded","chevron-down"),treeFilterOnTypeOn:(0,In.register)("tree-filter-on-type-on","list-filter"),treeFilterOnTypeOff:(0,In.register)("tree-filter-on-type-off","list-selection"),treeFilterClear:(0,In.register)("tree-filter-clear","close"),treeItemLoading:(0,In.register)("tree-item-loading","loading"),menuSelection:(0,In.register)("menu-selection","check"),menuSubmenu:(0,In.register)("menu-submenu","chevron-right"),menuBarMore:(0,In.register)("menubar-more","more"),scrollbarButtonLeft:(0,In.register)("scrollbar-button-left","triangle-left"),scrollbarButtonRight:(0,In.register)("scrollbar-button-right","triangle-right"),scrollbarButtonUp:(0,In.register)("scrollbar-button-up","triangle-up"),scrollbarButtonDown:(0,In.register)("scrollbar-button-down","triangle-down"),toolBarMore:(0,In.register)("toolbar-more","more"),quickInputBack:(0,In.register)("quick-input-back","arrow-left"),dropDownButton:(0,In.register)("drop-down-button",60084),symbolCustomColor:(0,In.register)("symbol-customcolor",60252),exportIcon:(0,In.register)("export",60332),workspaceUnspecified:(0,In.register)("workspace-unspecified",60355),newLine:(0,In.register)("newline",60394),thumbsDownFilled:(0,In.register)("thumbsdown-filled",60435),thumbsUpFilled:(0,In.register)("thumbsup-filled",60436),gitFetch:(0,In.register)("git-fetch",60445),lightbulbSparkleAutofix:(0,In.register)("lightbulb-sparkle-autofix",60447),debugBreakpointPending:(0,In.register)("debug-breakpoint-pending",60377)};sg.Codicon={...zHr.codiconsLibrary,...sg.codiconsDerived}});var h1e=m(Mb=>{"use strict";Object.defineProperty(Mb,"__esModule",{value:!0});Mb.ThemeIcon=Mb.ThemeColor=void 0;Mb.themeColorFromId=KHr;var f1e=Yft(),p1e;(function(t){function e(r){return!!r&&typeof r=="object"&&typeof r.id=="string"}t.isThemeColor=e})(p1e||(Mb.ThemeColor=p1e={}));function KHr(t){return{id:t}}var Qft;(function(t){t.iconNameSegment="[A-Za-z0-9]+",t.iconNameExpression="[A-Za-z0-9-]+",t.iconModifierExpression="~[A-Za-z]+",t.iconNameCharacter="[A-Za-z0-9~-]";let e=new RegExp(`^(${t.iconNameExpression})(${t.iconModifierExpression})?$`);function r(_){let g=e.exec(_.id);if(!g)return r(f1e.Codicon.error);let[,v,E]=g,y=["codicon","codicon-"+v];return E&&y.push("codicon-modifier-"+E.substring(1)),y}t.asClassNameArray=r;function n(_){return r(_).join(" ")}t.asClassName=n;function o(_){return"."+r(_).join(".")}t.asCSSSelector=o;function s(_){return!!_&&typeof _=="object"&&typeof _.id=="string"&&(typeof _.color>"u"||p1e.isThemeColor(_.color))}t.isThemeIcon=s;let a=new RegExp(`^\\$\\((${t.iconNameExpression}(?:${t.iconModifierExpression})?)\\)$`);function c(_){let g=a.exec(_);if(!g)return;let[,v]=g;return{id:v}}t.fromString=c;function l(_){return{id:_}}t.fromId=l;function u(_,g){let v=_.id,E=v.lastIndexOf("~");return E!==-1&&(v=v.substring(0,E)),g&&(v=`${v}~${g}`),{id:v}}t.modify=u;function d(_){let g=_.id.lastIndexOf("~");if(g!==-1)return _.id.substring(g+1)}t.getModifier=d;function f(_,g){return _.id===g.id&&_.color?.id===g.color?.id}t.isEqual=f;function p(_){return _?.id===f1e.Codicon.file.id}t.isFile=p;function h(_){return _?.id===f1e.Codicon.folder.id}t.isFolder=h})(Qft||(Mb.ThemeIcon=Qft={}))});var lG=m(vv=>{"use strict";Object.defineProperty(vv,"__esModule",{value:!0});vv.Icon=void 0;vv.overrideNowValue=YHr;vv.now=QHr;vv.shortenOpportunityId=ZHr;vv.checkIfCursorAtEndOfLine=JHr;var z3=h1e(),m1e=-1;function YHr(t){m1e=t}function QHr(){return m1e!==-1?m1e:Date.now()}var Zft;(function(t){t.circleSlash={themeIcon:z3.ThemeIcon.fromId("circle-slash"),svg:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill="currentColor" d="M8 1a7 7 0 1 1-7 7a7.01 7.01 0 0 1 7-7M2 8c0 1.418.504 2.79 1.423 3.87l8.447-8.447A5.993 5.993 0 0 0 2 8m12 0c0-1.418-.504-2.79-1.423-3.87L4.13 12.577A5.993 5.993 0 0 0 14 8"/></svg>'},t.error={themeIcon:z3.ThemeIcon.fromId("error"),svg:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16"><path fill="currentColor" fill-rule="evenodd" d="M8.6 1c1.6.1 3.1.9 4.2 2c1.3 1.4 2 3.1 2 5.1c0 1.6-.6 3.1-1.6 4.4c-1 1.2-2.4 2.1-4 2.4s-3.2.1-4.6-.7s-2.5-2-3.1-3.5S.8 7.5 1.3 6c.5-1.6 1.4-2.9 2.8-3.8C5.4 1.3 7 .9 8.6 1m.5 12.9c1.3-.3 2.5-1 3.4-2.1c.8-1.1 1.3-2.4 1.2-3.8c0-1.6-.6-3.2-1.7-4.3c-1-1-2.2-1.6-3.6-1.7c-1.3-.1-2.7.2-3.8 1S2.7 4.9 2.3 6.3c-.4 1.3-.4 2.7.2 4q.9 1.95 2.7 3c1.2.7 2.6.9 3.9.6M7.9 7.5L10.3 5l.7.7l-2.4 2.5l2.4 2.5l-.7.7l-2.4-2.5l-2.4 2.5l-.7-.7l2.4-2.5l-2.4-2.5l.7-.7z" clip-rule="evenodd"/></svg>'},t.skipped={themeIcon:z3.ThemeIcon.fromId("testing-skipped-icon"),svg:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16"><path fill="currentColor" fill-rule="evenodd" d="M14.25 5.75v-4h-1.5v2.542c-1.145-1.359-2.911-2.209-4.84-2.209c-3.177 0-5.92 2.307-6.16 5.398l-.02.269h1.501l.022-.226c.212-2.195 2.202-3.94 4.656-3.94c1.736 0 3.244.875 4.05 2.166h-2.83v1.5h4.163l.962-.975V5.75zM8 14a2 2 0 1 0 0-4a2 2 0 0 0 0 4" clip-rule="evenodd"/></svg>'},t.lightbulbFull={themeIcon:z3.ThemeIcon.fromId("refactor-preview-view-icon"),svg:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill="currentColor" fill-rule="evenodd" d="M11.67 8.658a3.7 3.7 0 0 0-.781 1.114a3.3 3.3 0 0 0-.268 1.329v1.6a1.3 1.3 0 0 1-.794 1.197a1.3 1.3 0 0 1-.509.102H7.712a1.3 1.3 0 0 1-.922-.379a1.3 1.3 0 0 1-.38-.92v-1.6q0-.718-.274-1.329a3.6 3.6 0 0 0-.776-1.114a4.7 4.7 0 0 1-1.006-1.437A4.2 4.2 0 0 1 4 5.5a4.43 4.43 0 0 1 .616-2.27q.296-.504.705-.914a4.6 4.6 0 0 1 .911-.702q.508-.294 1.084-.454a4.5 4.5 0 0 1 1.2-.16a4.5 4.5 0 0 1 2.276.614a4.5 4.5 0 0 1 1.622 1.616a4.44 4.44 0 0 1 .616 2.27q0 .926-.353 1.721a4.7 4.7 0 0 1-1.006 1.437zM9.623 10.5H7.409v2.201q-.001.12.09.212a.3.3 0 0 0 .213.09h1.606a.3.3 0 0 0 .213-.09a.3.3 0 0 0 .09-.212V10.5z" clip-rule="evenodd"/></svg>'},t.database={themeIcon:z3.ThemeIcon.fromId("database"),svg:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill="currentColor" d="M13 3.5C13 2.119 10.761 1 8 1S3 2.119 3 3.5c0 .04.02.077.024.117H3v8.872l.056.357C3.336 14.056 5.429 15 8 15s4.664-.944 4.944-2.154l.056-.357V3.617h-.024c.004-.04.024-.077.024-.117M8 2.032c2.442 0 4 .964 4 1.468s-1.558 1.468-4 1.468S4 4 4 3.5s1.558-1.468 4-1.468m4 10.458l-.03.131C11.855 13.116 10.431 14 8 14s-3.855-.884-3.97-1.379L4 12.49v-7.5A7.4 7.4 0 0 0 8 6a7.4 7.4 0 0 0 4-1.014z"/></svg>'}})(Zft||(vv.Icon=Zft={}));function ZHr(t){return t.substring(4,8)}function JHr(t,e){return t.substring(e).match(/^\s*$/)!==null}});var e0t=m(uG=>{"use strict";Object.defineProperty(uG,"__esModule",{value:!0});uG.DebugRecorder=void 0;var XHr=c1e(),eGr=Wft(),tGr=Km(),rGr=lG(),Jft=Ui(),Xft=Ar(),nGr=oE(),iGr=bT(),oGr=Nl(),sGr=ws(),aGr=up(),g1e=class extends Xft.Disposable{constructor(e,r=rGr.now){super(),this._workspace=e,this.getNow=r,this._id=0,this._documentHistories=new Map,(0,iGr.mapObservableArrayCached)(this,this._workspace.openDocuments,(n,o)=>{let s=this._workspace.getWorkspaceRoot(n.id);if(!s)return;if(!this._workspaceRoot)this._workspaceRoot=s;else if(this._workspaceRoot.toString()!==s.toString())return;let a=new _1e(s,n.id,n.value.get().value,this._id++,n.languageId.get(),()=>this.getTimestamp());this._documentHistories.set(a.docId,a),o.add((0,tGr.autorunWithChanges)(this,{value:n.value,selection:n.selection,languageId:n.languageId},c=>{c.languageId.changes.length>0&&(a.languageId=c.languageId.value);for(let l of c.value.changes)a.handleEdit(l);c.selection.changes.length>0&&a.handleSelections(c.selection.value)})),o.add((0,Xft.toDisposable)(()=>{this._documentHistories.delete(n.id)}))},n=>n.id).recomputeInitiallyAndOnChange(this._store)}getTimestamp(){let e=this.getNow();return this._lastTimestamp!==void 0&&e<=this._lastTimestamp&&(e=this._lastTimestamp+1),this._lastTimestamp=e,e}getRecentLog(e=void 0){if(!this._workspaceRoot)return;let r=[];r.push({entry:{documentType:"workspaceRecording@1.0",kind:"header",repoRootUri:this._workspaceRoot.toString(),time:this.getNow(),uuid:(0,sGr.generateUuid)()},sortTime:0});for(let n of this._documentHistories.values())r.push(...n.getDocumentLog(e));return r.sort((0,Jft.compareBy)(n=>n.sortTime,Jft.numberComparator)),r.map(n=>n.entry)}createBookmark(){return new eGr.DebugRecorderBookmark(this.getNow())}};uG.DebugRecorder=g1e;var _1e=class{constructor(e,r,n,o,s,a){this.workspaceUri=e,this.docId=r,this.id=o,this.languageId=s,this.getNow=a,this._edits=[],this.relativePath=(()=>{let c=(0,oGr.relative)(this.workspaceUri.path,this.docId.path);return this.docId.toUri().scheme===nGr.Schemas.vscodeNotebookCell?`${c}#${this.docId.fragment}`:c})(),this._baseValue=new aGr.StringText(n),this.creationTime=this.getNow(),this._baseValueTime=this.creationTime}handleSelections(e){this._edits.push({kind:"selections",selections:e,instant:this.getNow()})}handleEdit(e){e.isEmpty()||(this._edits.push({kind:"edit",edit:e,instant:this.getNow()}),this.cleanUpHistory())}cleanUpHistory(){let r=this.getNow()-6e5;for(;this._edits.length>0&&this._edits[0].instant<r;){let n=this._edits.shift();n.kind!=="selections"&&(this._baseValue=n.edit.applyOnText(this._baseValue),this._baseValueTime=n.instant)}}getDocumentLog(e){if(this.cleanUpHistory(),this._edits.length===0)return[];let r=[];r.push({entry:{kind:"documentEncountered",id:this.id,relativePath:this.relativePath,time:this.creationTime},sortTime:this.creationTime});let n=1;r.push({entry:{kind:"setContent",id:this.id,v:n,content:this._baseValue.value,time:this._baseValueTime},sortTime:this._baseValueTime}),r.push({entry:{kind:"opened",id:this.id,time:this._baseValueTime},sortTime:this._baseValueTime});for(let o of this._edits){if(e&&o.instant>e.timeMs)break;if(n++,o.kind==="selections"){let s=o.selections.map(a=>[a.start,a.endExclusive]);r.push({entry:{kind:"selectionChanged",id:this.id,selection:s,time:o.instant},sortTime:o.instant})}else r.push({entry:{kind:"changed",id:this.id,v:n,edit:(0,XHr.serializeStringEdit)(o.edit),time:o.instant},sortTime:o.instant})}return r}}});var jP=m(dG=>{"use strict";Object.defineProperty(dG,"__esModule",{value:!0});dG.Result=void 0;var t0t;(function(t){function e(o){return new v1e(o)}t.ok=e;function r(o){return new y1e(o)}t.error=r;function n(o){return t.error(new Error(o))}t.fromString=n})(t0t||(dG.Result=t0t={}));var v1e=class t{constructor(e){this.val=e}map(e){return new t(e(this.val))}flatMap(e){return e(this.val)}isOk(){return!0}isError(){return!1}},y1e=class{constructor(e){this.err=e}map(e){return this}flatMap(e){return this}isOk(){return!1}isError(){return!0}}});var o0t=m(yv=>{"use strict";Object.defineProperty(yv,"__esModule",{value:!0});yv.DocumentLogEntry=void 0;yv.serializeOffsetRange=cGr;yv.deserializeOffsetRange=lGr;yv.serializeEdit=uGr;yv.deserializeEdit=dGr;var r0t=Wl(),i0t=zi(),n0t;(function(t){function e(r){return!!r&&typeof r=="object"&&"id"in r&&"time"in r}t.is=e})(n0t||(yv.DocumentLogEntry=n0t={}));function cGr(t){return[t.start,t.endExclusive]}function lGr(t){return new i0t.OffsetRange(t[0],t[1])}function uGr(t){return t.replacements.map(e=>[e.replaceRange.start,e.replaceRange.endExclusive,e.newText])}function dGr(t){return r0t.StringEdit.create(t.map(e=>r0t.StringReplacement.replace(new i0t.OffsetRange(e[0],e[1]),e[2])))}});var s0t=m(E1e=>{"use strict";Object.defineProperty(E1e,"__esModule",{value:!0});E1e.assertNever=fGr;function fGr(t,e=`unexpected value ${t}`){throw new Error(`Unreachable: ${e}`)}});var W3=m(ag=>{"use strict";Object.defineProperty(ag,"__esModule",{value:!0});ag.ChatCompletionContentPartOpaque=ag.ChatCompletionContentPartKind=ag.ChatRole=void 0;var pGr=s0t(),fG;(function(t){t[t.System=0]="System",t[t.User=1]="User",t[t.Assistant=2]="Assistant",t[t.Tool=3]="Tool"})(fG||(ag.ChatRole=fG={}));(function(t){function e(r){switch(r){case t.System:return"system";case t.User:return"user";case t.Assistant:return"assistant";case t.Tool:return"tool";default:(0,pGr.assertNever)(r,`unknown chat role ${r}}`)}}t.display=e})(fG||(ag.ChatRole=fG={}));var a0t;(function(t){t[t.Image=0]="Image",t[t.Text=1]="Text",t[t.Opaque=2]="Opaque",t[t.CacheBreakpoint=3]="CacheBreakpoint"})(a0t||(ag.ChatCompletionContentPartKind=a0t={}));var c0t;(function(t){function e(r,n){return!r.scope||(r.scope&n)!==0}t.usableIn=e})(c0t||(ag.ChatCompletionContentPartOpaque=c0t={}))});var T1e=m(Vp=>{"use strict";Object.defineProperty(Vp,"__esModule",{value:!0});Vp.BaseTokensPerName=Vp.BaseTokensPerMessage=Vp.BaseTokensPerCompletion=Vp.ChatRole=void 0;var l0t;(function(t){t.System="system",t.User="user",t.Assistant="assistant",t.Function="function",t.Tool="tool"})(l0t||(Vp.ChatRole=l0t={}));Vp.BaseTokensPerCompletion=3;Vp.BaseTokensPerMessage=3;Vp.BaseTokensPerName=1});var p0t=m(hG=>{"use strict";Object.defineProperty(hG,"__esModule",{value:!0});hG.toOpenAiChatMessage=f0t;hG.toOpenAIChatMessages=mGr;var cg=W3(),pG=T1e(),hGr=Ev();function u0t(t){return t.filter(e=>e.type===cg.ChatCompletionContentPartKind.Text).map(e=>e.text).join("")}function d0t(t){let e=t.map(r=>{if(r.type===cg.ChatCompletionContentPartKind.Text)return{type:"text",text:r.text};if(r.type===cg.ChatCompletionContentPartKind.Image)return{image_url:r.imageUrl,type:"image_url"};if(r.type===cg.ChatCompletionContentPartKind.Opaque&&cg.ChatCompletionContentPartOpaque.usableIn(r,hGr.OutputMode.OpenAI))return r.value}).filter(r=>!!r);return e.every(r=>r.type==="text")?e.map(r=>r.text).join(""):e}function f0t(t){switch(t.role){case cg.ChatRole.System:return{role:pG.ChatRole.System,content:u0t(t.content),name:t.name};case cg.ChatRole.User:return{role:pG.ChatRole.User,content:d0t(t.content),name:t.name};case cg.ChatRole.Assistant:return{role:pG.ChatRole.Assistant,content:u0t(t.content),name:t.name,tool_calls:t.toolCalls?.map(e=>({id:e.id,function:e.function,type:"function"}))};case cg.ChatRole.Tool:return{role:pG.ChatRole.Tool,content:d0t(t.content),tool_call_id:t.toolCallId};default:return}}function mGr(t){return t.map(f0t).filter(e=>!!e)}});var m0t=m(_G=>{"use strict";Object.defineProperty(_G,"__esModule",{value:!0});_G.toVsCodeChatMessage=h0t;_G.toVsCodeChatMessages=gGr;var gG=W3();function mG(t){return t.filter(e=>e.type===gG.ChatCompletionContentPartKind.Text).map(e=>e.text).join("")}var Tv;function h0t(t){switch(Tv??=require("vscode"),t.role){case gG.ChatRole.Assistant:let e=Tv.LanguageModelChatMessage.Assistant(mG(t.content),t.name);return t.toolCalls&&(e.content=[new Tv.LanguageModelTextPart(mG(t.content)),...t.toolCalls.map(r=>{let n;try{n=JSON.parse(r.function.arguments)}catch{throw new Error("Invalid JSON in tool call arguments for tool call: "+r.id)}return new Tv.LanguageModelToolCallPart(r.id,r.function.name,n)})]),e;case gG.ChatRole.User:return Tv.LanguageModelChatMessage.User(mG(t.content),t.name);case gG.ChatRole.Tool:{let r=Tv.LanguageModelChatMessage.User("");return r.content=[new Tv.LanguageModelToolResultPart(t.toolCallId,[new Tv.LanguageModelTextPart(mG(t.content))])],r}default:return}}function gGr(t){return t.map(h0t).filter(e=>!!e)}});var Ev=m(Gf=>{"use strict";Object.defineProperty(Gf,"__esModule",{value:!0});Gf.OutputMode=Gf.Raw=Gf.OpenAI=void 0;Gf.toMode=S1e;Gf.toVSCode=_Gr;Gf.toOpenAI=vGr;var g0t=p0t(),_0t=m0t();Gf.OpenAI=T1e();Gf.Raw=W3();var Nb;(function(t){t[t.Raw=1]="Raw",t[t.OpenAI=2]="OpenAI",t[t.VSCode=4]="VSCode"})(Nb||(Gf.OutputMode=Nb={}));function S1e(t,e){switch(t){case Nb.Raw:return e;case Nb.VSCode:return e instanceof Array?(0,_0t.toVsCodeChatMessages)(e):(0,_0t.toVsCodeChatMessage)(e);case Nb.OpenAI:return e instanceof Array?(0,g0t.toOpenAIChatMessages)(e):(0,g0t.toOpenAiChatMessage)(e);default:throw new Error(`Unknown output mode: ${t}`)}}function _Gr(t){return S1e(Nb.VSCode,t)}function vGr(t){return S1e(Nb.OpenAI,t)}});var b1e=m(K3=>{"use strict";Object.defineProperty(K3,"__esModule",{value:!0});K3.jsonRetainedProps=void 0;K3.forEachNode=v0t;K3.jsonRetainedProps=Object.keys({flexBasis:1,flexGrow:1,flexReserve:1,passPriority:1,priority:1});function v0t(t,e){if(e(t),t.type===1)for(let r of t.children)v0t(r,e)}});var y0t=m(C1e=>{"use strict";Object.defineProperty(C1e,"__esModule",{value:!0});C1e.once=yGr;function yGr(t){let e,r=!1,n=((...o)=>(r||(e=t(...o),r=!0),e));return n.clear=()=>{r=!1},n}});var I1e=m(Ca=>{"use strict";Object.defineProperty(Ca,"__esModule",{value:!0});Ca.BudgetExceededError=Ca.MaterializedChatMessageImage=Ca.MaterializedChatMessageBreakpoint=Ca.MaterializedChatMessageOpaque=Ca.MaterializedChatMessage=Ca.MaterializedChatMessageTextChunk=Ca.GenericMaterializedContainer=void 0;var BP=y0t(),ll=Ev(),lg=class t{parent;id;name;priority;metadata;flags;children;keepWithId;constructor(e,r,n,o,s,a,c){if(this.parent=e,this.id=r,this.name=n,this.priority=o,this.metadata=a,this.flags=c,this.children=s(this),c&8){if(this.children.length!==2)throw new Error("Invalid number of children for EmptyAlternate flag");let[l,u]=this.children;u.isEmpty?this.children=[l]:this.children=[u]}}has(e){return!!(this.flags&e)}async tokenCount(e){let r=0;return await Promise.all(this.children.map(async n=>{let o=bv(n)?await n.tokenCount(e):await n.upperBoundTokenCount(e);r+=o})),r}async upperBoundTokenCount(e){let r=0;return await Promise.all(this.children.map(async n=>{let o=await n.upperBoundTokenCount(e);r+=o})),r}replaceNode(e,r){return I0t(e,this.children,r)}allMetadata(){return w0t(this)}findById(e){return w1e(e,this)}get isEmpty(){return!this.children.some(e=>!e.isEmpty)}onChunksChange(){this.parent?.onChunksChange()}*toChatMessages(){for(let e of this.children)EGr(e),e instanceof t?yield*e.toChatMessages():!e.isEmpty&&e instanceof Wf&&(yield e.toChatMessage())}async baseMessageTokenCount(e){let r=0;return await Promise.all(this.children.map(async n=>{if(n instanceof Wf||n instanceof t){let o=await n.baseMessageTokenCount(e);r+=o}})),r}removeLowestPriorityChild(){let e=[];return x1e(this,e),e}};Ca.GenericMaterializedContainer=lg;var Y3=class{parent;text;priority;metadata;lineBreakBefore;constructor(e,r,n,o=[],s){this.parent=e,this.text=r,this.priority=n,this.metadata=o,this.lineBreakBefore=s}upperBoundTokenCount(e){return this._upperBound(e)}_upperBound=(0,BP.once)(async e=>await e.tokenLength({type:ll.Raw.ChatCompletionContentPartKind.Text,text:this.text})+(this.lineBreakBefore!==0?1:0));get isEmpty(){return!/\S/.test(this.text)}};Ca.MaterializedChatMessageTextChunk=Y3;var Wf=class{parent;id;role;name;toolCalls;toolCallId;priority;metadata;children;constructor(e,r,n,o,s,a,c,l,u){this.parent=e,this.id=r,this.role=n,this.name=o,this.toolCalls=s,this.toolCallId=a,this.priority=c,this.metadata=l,this.children=u(this)}async tokenCount(e){return this._tokenCount(e)}async upperBoundTokenCount(e){return this._upperBound(e)}get text(){return this._text()}get isEmpty(){return!this.toolCalls?.length&&!this.children.some(e=>!e.isEmpty)}replaceNode(e,r){let n=I0t(e,this.children,r);return n&&this.onChunksChange(),n}removeLowestPriorityChild(){let e=[];return x1e(this,e),e}onChunksChange(){this._tokenCount.clear(),this._upperBound.clear(),this._text.clear(),this.parent?.onChunksChange()}findById(e){return w1e(e,this)}_tokenCount=(0,BP.once)(async e=>{let r=this.toChatMessage();return e.countMessageTokens((0,ll.toMode)(e.mode,r))});_upperBound=(0,BP.once)(async e=>{let r=await this.baseMessageTokenCount(e);return await Promise.all(this.children.map(async n=>{let o=await n.upperBoundTokenCount(e);r+=o})),r});baseMessageTokenCount=(0,BP.once)(e=>{let r=this.toChatMessage();return r.content=r.content.map(n=>n.type===ll.Raw.ChatCompletionContentPartKind.Text?{...n,text:""}:n.type===ll.Raw.ChatCompletionContentPartKind.Image?void 0:n).filter(n=>!!n),e.countMessageTokens((0,ll.toMode)(e.mode,r))});_text=(0,BP.once)(()=>{let e=[];for(let{content:r,isTextSibling:n}of A0t(this)){if(r instanceof Lb||r instanceof Sv){e.push(r);continue}if(r instanceof zf){e.at(-1)instanceof zf?e[e.length-1]=r:e.push(r);continue}if(r.lineBreakBefore===1||r.lineBreakBefore===2&&!n){let o=e[e.length-1];typeof o=="string"&&o&&!o.endsWith(`
`)&&(e[e.length-1]=o+`
`)}typeof e[e.length-1]=="string"?e[e.length-1]+=r.text:e.push(r.text)}return e});toChatMessage(){let e=this.text.map(r=>{if(typeof r=="string")return{type:ll.Raw.ChatCompletionContentPartKind.Text,text:r};if(r instanceof Lb)return{type:ll.Raw.ChatCompletionContentPartKind.Image,imageUrl:{url:P0t(r.src),detail:r.detail}};if(r instanceof Sv)return{type:ll.Raw.ChatCompletionContentPartKind.Opaque,value:r.value};if(r instanceof zf)return r.part;throw new Error("Unexpected element type")});if(this.role===ll.Raw.ChatRole.System)return{role:this.role,content:e,...this.name?{name:this.name}:{}};if(this.role===ll.Raw.ChatRole.Assistant){let r={role:this.role,content:e};return this.name&&(r.name=this.name),this.toolCalls?.length&&(r.toolCalls=this.toolCalls.map(n=>({function:n.function,id:n.id,type:n.type}))),r}else return this.role===ll.Raw.ChatRole.User?{role:this.role,content:e,...this.name?{name:this.name}:{}}:this.role===ll.Raw.ChatRole.Tool?{role:this.role,content:e,toolCallId:this.toolCallId}:{role:this.role,content:e,name:this.name}}};Ca.MaterializedChatMessage=Wf;var Sv=class{parent;part;priority;metadata=[];get value(){return this.part.value}constructor(e,r,n=Number.MAX_SAFE_INTEGER){this.parent=e,this.part=r,this.priority=n}upperBoundTokenCount(e){return this.part.tokenUsage&&ll.Raw.ChatCompletionContentPartOpaque.usableIn(this.part,e.mode)?this.part.tokenUsage:0}isEmpty=!1};Ca.MaterializedChatMessageOpaque=Sv;var zf=class{parent;part;metadata=[];priority=Number.MAX_SAFE_INTEGER;constructor(e,r){this.parent=e,this.part=r}upperBoundTokenCount(e){return 0}isEmpty=!1};Ca.MaterializedChatMessageBreakpoint=zf;var Lb=class{parent;id;src;priority;metadata;lineBreakBefore;detail;constructor(e,r,n,o,s=[],a,c){this.parent=e,this.id=r,this.src=n,this.priority=o,this.metadata=s,this.lineBreakBefore=a,this.detail=c}upperBoundTokenCount(e){return this._upperBound(e)}_upperBound=(0,BP.once)(async e=>e.tokenLength({type:ll.Raw.ChatCompletionContentPartKind.Image,imageUrl:{url:P0t(this.src),detail:this.detail}}));isEmpty=!1};Ca.MaterializedChatMessageImage=Lb;function bv(t){return t instanceof lg||t instanceof Wf}function C0t(t){return t instanceof Y3||t instanceof Lb||t instanceof Sv||t instanceof zf}function EGr(t){if(!bv(t))throw new Error(`Cannot have a text node outside a ChatMessage. Text: "${t.text}"`)}function*A0t(t,e=!1){for(let r of t.children)r instanceof Y3?(yield{content:r,isTextSibling:e},e=!0):r instanceof Lb||r instanceof Sv||r instanceof zf?yield{content:r,isTextSibling:!1}:r instanceof Sv?yield{content:r,isTextSibling:!0}:(r&&(yield*A0t(r,e)),e=!1)}function TGr(t,e){let r;function n(o,s){if(C0t(o))(!r||o.priority<r.node.priority)&&(r={chain:s.slice(),node:o});else{s.push(o);for(let a of o.children)n(a,s);s.pop()}}if(n(t,[]),!r)throw new Error("No lowest priority node found");Q3(r.node,e)}var E0t=new WeakMap;function x0t(t){let e=E0t.get(t);if(e!==void 0)return e;let r=!1;return t instanceof zf?r=!0:t instanceof Wf?r=t.children.some(n=>n instanceof zf):t instanceof lg&&(r=t.children.some(x0t)),E0t.set(t,r),r}function SGr(t){if(t instanceof Wf)return!0;for(let e=t.parent;e;e=e.parent)if(e instanceof Wf)return!1;return!0}function x1e(t,e){let r;if(t instanceof lg&&t.has(1)){TGr(t,e);return}let n=SGr(t),o=t.children.map((s,a)=>({chain:[t],index:a}));for(let s=0;s<o.length;s++){let{chain:a,index:c}=o[s],l=a[a.length-1].children[c];if(!(n&&x0t(l)&&(r=void 0,l instanceof zf))){if(l instanceof lg&&l.has(4)&&l.children.length){let u=[...a,l];o.splice(s+1,0,...l.children.map((d,f)=>({chain:u,index:f})))}else if(!r||l.priority<r.value.priority)r={chain:a,index:c,value:l};else if(l.priority===r.value.priority){r.lowestNested??=T0t(r.value);let u=T0t(l);u<r.lowestNested&&(r={chain:a,index:c,value:l,lowestNested:u})}}}if(!r)throw new vG(t);C0t(r.value)||r.value instanceof lg&&r.value.has(2)||bv(r.value)&&!r.value.children.length?Q3(r.value,e):x1e(r.value,e)}var vG=class extends Error{metadata;messages;constructor(e){let r=[e];for(;r[0].parent;)r.unshift(r[0].parent);let n=r.map(o=>o instanceof Wf?o.role:o.name||"(anonymous)");super(`No lowest priority node found (path: ${n.join(" -> ")})`)}};Ca.BudgetExceededError=vG;function T0t(t){if(!bv(t))return-1;let e=Number.MAX_SAFE_INTEGER;for(let r of t.children)e=Math.min(e,r.priority);return e}function*w0t(t){yield*t.metadata;for(let e of t.children)bv(e)?yield*w0t(e):yield*e.metadata}function I0t(t,e,r){for(let n=0;n<e.length;n++){let o=e[n];if(bv(o)){if(o.id===t){let a=e[n];return r.parent=o.parent,e[n]=r,a}let s=o.replaceNode(t,r);if(s)return s}}}function*S0t(t){let e=[t];for(;e.length>0;){let r=e.pop();yield r,bv(r)&&e.push(...r.children)}}function bGr(t){let e=t;for(;e.parent;)e=e.parent;return e}function b0t(t){return t instanceof lg&&t.keepWithId!==void 0}var A1e=new Set;function CGr(t,e){let r=new Set;for(let n of S0t(t))b0t(n)&&!A1e.has(n.keepWithId)&&r.add(n.keepWithId);if(r.size===0)return!1;for(let n of r)A1e.add(n);try{let n=bGr(t);for(let o of S0t(n))b0t(o)&&r.has(o.keepWithId)?Q3(o,e):o instanceof Wf&&o.toolCalls&&(o.toolCalls=AGr(o.toolCalls,s=>!(s.keepWith&&r.has(s.keepWith.id))),o.isEmpty&&Q3(o,e))}finally{for(let n of r)A1e.delete(n)}}function w1e(t,e){if(e.id===t)return e;for(let r of e.children)if(bv(r)){let n=w1e(t,r);if(n)return n}}function Q3(t,e){let r=t.parent;if(!r)return;let n=r.children.indexOf(t);n!==-1&&(r.children.splice(n,1),e.push(t),CGr(t,e),r.isEmpty?Q3(r,e):r.onChunksChange())}function P0t(t){let e={"/9j/":"image/jpeg",iVBOR:"image/png",R0lGOD:"image/gif",UklGR:"image/webp"};for(let r of Object.keys(e))if(t.startsWith(r))return`data:${e[r]};base64,${t}`;return t}function AGr(t,e){for(let r=0;r<t.length;r++){if(e(t[r]))continue;let n=t.slice(0,r);for(let o=r+1;o<t.length;o++)e(t[o])&&n.push(t[o]);return n}return t}});var O0t=m(()=>{"use strict";function xGr(t,e,...r){return{ctor:t,props:e,children:r.flat()}}function R0t(){throw new Error("This should not be invoked!")}R0t.isFragment=!0;globalThis.vscpp=xGr;globalThis.vscppf=R0t});var R1e=m(yG=>{"use strict";Object.defineProperty(yG,"__esModule",{value:!0});yG.PromptElement=void 0;O0t();var P1e=class{props;get priority(){return this.props.priority??Number.MAX_SAFE_INTEGER}get insertLineBreakBefore(){return!0}constructor(e){this.props=e}};yG.PromptElement=P1e});var j1e=m(jr=>{"use strict";Object.defineProperty(jr,"__esModule",{value:!0});jr.LogicalWrapper=jr.IfEmpty=jr.AbstractKeepWith=jr.TokenLimit=jr.Expandable=jr.Chunk=jr.LegacyPrioritization=jr.ToolResult=jr.PrioritizedList=jr.Image=jr.TextChunk=jr.ToolMessage=jr.AssistantMessage=jr.UserMessage=jr.SystemMessage=jr.BaseChatMessage=void 0;jr.isChatMessagePromptElement=wGr;jr.useKeepWith=OGr;var J3=ul(),md=R1e();function wGr(t){return t instanceof EG||t instanceof TG||t instanceof SG}var kb=class extends md.PromptElement{render(){return vscpp(vscppf,null,this.props.children)}};jr.BaseChatMessage=kb;var EG=class extends kb{constructor(e){e.role=J3.Raw.ChatRole.System,super(e)}};jr.SystemMessage=EG;var TG=class extends kb{constructor(e){e.role=J3.Raw.ChatRole.User,super(e)}};jr.UserMessage=TG;var SG=class extends kb{constructor(e){e.role=J3.Raw.ChatRole.Assistant,super(e)}};jr.AssistantMessage=SG;var IGr=/\s+/g,O1e=class extends kb{constructor(e){e.role=J3.Raw.ChatRole.Tool,super(e)}};jr.ToolMessage=O1e;var bG=class extends md.PromptElement{async prepare(e,r,n){let o=this.props.breakOnWhitespace?IGr:this.props.breakOn;if(!o)return vscpp(vscppf,null,this.props.children);let s="",a=[];for(let l of this.props.children||[])if(l&&typeof l=="object"){if(typeof l.ctor!="string")throw new Error("TextChunk children must be text literals or intrinsic attributes.");l.ctor==="br"?s+=`
`:a.push(l)}else l!=null&&(s+=l);let c=await PGr(e,o,s,n);return vscpp(vscppf,null,a,c)}render(e){return e}};jr.TextChunk=bG;async function PGr(t,e,r,n){if(e instanceof RegExp){if(!e.global)throw new Error(`\`breakOn\` expression must have the global flag set (got ${e})`);e.lastIndex=0}let o="",s=-1;for(;s<r.length;){let a;typeof e=="string"?a=r.indexOf(e,s===-1?0:s+e.length):a=e.exec(r)?.index??-1,a===-1&&(a=r.length);let c=o+r.slice(Math.max(0,s),a);if(await t.countTokens({type:J3.Raw.ChatCompletionContentPartKind.Text,text:c},n)>t.tokenBudget)return o;o=c,s=a}return o}var M1e=class extends md.PromptElement{constructor(e){super(e)}render(){return vscpp(vscppf,null,this.props.children)}};jr.Image=M1e;var N1e=class extends md.PromptElement{render(){let{children:e,priority:r=0,descending:n}=this.props;if(e)return vscpp(vscppf,null,e.map((o,s)=>{if(!o)return;let a=n?r-s:r-e.length+s;return typeof o!="object"?vscpp(bG,{priority:a},o):(o.props??={},o.props.priority=a,o)}))}};jr.PrioritizedList=N1e;var L1e=class extends md.PromptElement{render(){return vscpp(vscppf,null,this.props.data.content.map(e=>{if(e&&typeof e.value=="string")return e.value;if(e&&e.value&&typeof e.value.node=="object")return vscpp("elementJSON",{data:e.value})}))}};jr.ToolResult=L1e;var k1e=class extends md.PromptElement{render(){return vscpp(vscppf,null,this.props.children)}};jr.LegacyPrioritization=k1e;var D1e=class extends md.PromptElement{render(){return vscpp(vscppf,null,this.props.children)}};jr.Chunk=D1e;var U1e=class extends md.PromptElement{async render(e,r){return vscpp(vscppf,null,await this.props.value(r))}};jr.Expandable=U1e;var q1e=class extends md.PromptElement{render(){return vscpp(vscppf,null,this.props.children)}};jr.TokenLimit=q1e;var CG=class extends md.PromptElement{};jr.AbstractKeepWith=CG;var RGr=0;function OGr(){let t=RGr++;return class extends CG{static id=t;id=t;render(){return vscpp(vscppf,null,this.props.children)}}}var F1e=class extends md.PromptElement{render(){return vscpp(vscppf,null,vscpp(Z3,null,this.props.alt),vscpp(Z3,{flexGrow:1},this.props.children))}};jr.IfEmpty=F1e;var Z3=class extends md.PromptElement{render(){return vscpp(vscppf,null,this.props.children)}};jr.LogicalWrapper=Z3});var N0t=m(X3=>{"use strict";Object.defineProperty(X3,"__esModule",{value:!0});X3.localize=MGr;X3.localize2=NGr;X3.getConfiguredDefaultLocale=LGr;function M0t(t,e){let r;return e.length===0?r=t:r=t.replace(/\{(\d+)\}/g,function(n,o){let s=o[0];return typeof e[s]<"u"?e[s]:n}),r}function MGr(t,e,...r){return M0t(e,r)}function NGr(t,e,...r){let n=M0t(e,r);return{original:n,value:n}}function LGr(t){}});var H1e=m(Pe=>{"use strict";Object.defineProperty(Pe,"__esModule",{value:!0});Pe.isAndroid=Pe.isEdge=Pe.isSafari=Pe.isFirefox=Pe.isChrome=Pe.OS=Pe.setTimeout0=Pe.setTimeout0IsFaster=Pe.translationsConfigFile=Pe.platformLocale=Pe.locale=Pe.Language=Pe.language=Pe.userAgent=Pe.platform=Pe.isCI=Pe.isMobile=Pe.isIOS=Pe.webWorkerOrigin=Pe.isWebWorker=Pe.isWeb=Pe.isElectron=Pe.isNative=Pe.isLinuxSnap=Pe.isLinux=Pe.isMacintosh=Pe.isWindows=Pe.LANGUAGE_DEFAULT=void 0;Pe.PlatformToString=DGr;Pe.isLittleEndian=UGr;Pe.isBigSurOrNewer=qGr;var L0t=N0t();Pe.LANGUAGE_DEFAULT="en";var rL=!1,nL=!1,tL=!1,q0t=!1,F0t=!1,$1e=!1,j0t=!1,V1e=!1,B0t=!1,$0t=!1,eL,AG=Pe.LANGUAGE_DEFAULT,B1e=Pe.LANGUAGE_DEFAULT,V0t,ug,dg=globalThis,lu;typeof dg.vscode<"u"&&typeof dg.vscode.process<"u"?lu=dg.vscode.process:typeof process<"u"&&(lu=process);var H0t=typeof lu?.versions?.electron=="string",kGr=H0t&&lu?.type==="renderer";if(typeof lu=="object"){rL=lu.platform==="win32",nL=lu.platform==="darwin",tL=lu.platform==="linux",q0t=tL&&!!lu.env.SNAP&&!!lu.env.SNAP_REVISION,j0t=H0t,B0t=!!lu.env.CI||!!lu.env.BUILD_ARTIFACTSTAGINGDIRECTORY,eL=Pe.LANGUAGE_DEFAULT,AG=Pe.LANGUAGE_DEFAULT;let t=lu.env.VSCODE_NLS_CONFIG;if(t)try{let e=JSON.parse(t),r=e.availableLanguages["*"];eL=e.locale,B1e=e.osLocale,AG=r||Pe.LANGUAGE_DEFAULT,V0t=e._translationsConfigFile}catch{}F0t=!0}else typeof navigator=="object"&&!kGr?(ug=navigator.userAgent,rL=ug.indexOf("Windows")>=0,nL=ug.indexOf("Macintosh")>=0,V1e=(ug.indexOf("Macintosh")>=0||ug.indexOf("iPad")>=0||ug.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,tL=ug.indexOf("Linux")>=0,$0t=ug?.indexOf("Mobi")>=0,$1e=!0,eL=L0t.getConfiguredDefaultLocale(L0t.localize({key:"ensureLoaderPluginIsLoaded",comment:["{Locked}"]},"_"))||Pe.LANGUAGE_DEFAULT,AG=eL,B1e=navigator.language):console.error("Unable to resolve platform.");function DGr(t){switch(t){case 0:return"Web";case 1:return"Mac";case 2:return"Linux";case 3:return"Windows"}}var xG=0;nL?xG=1:rL?xG=3:tL&&(xG=2);Pe.isWindows=rL;Pe.isMacintosh=nL;Pe.isLinux=tL;Pe.isLinuxSnap=q0t;Pe.isNative=F0t;Pe.isElectron=j0t;Pe.isWeb=$1e;Pe.isWebWorker=$1e&&typeof dg.importScripts=="function";Pe.webWorkerOrigin=Pe.isWebWorker?dg.origin:void 0;Pe.isIOS=V1e;Pe.isMobile=$0t;Pe.isCI=B0t;Pe.platform=xG;Pe.userAgent=ug;Pe.language=AG;var k0t;(function(t){function e(){return Pe.language}t.value=e;function r(){return Pe.language.length===2?Pe.language==="en":Pe.language.length>=3?Pe.language[0]==="e"&&Pe.language[1]==="n"&&Pe.language[2]==="-":!1}t.isDefaultVariant=r;function n(){return Pe.language==="en"}t.isDefault=n})(k0t||(Pe.Language=k0t={}));Pe.locale=eL;Pe.platformLocale=B1e;Pe.translationsConfigFile=V0t;Pe.setTimeout0IsFaster=typeof dg.postMessage=="function"&&!dg.importScripts;Pe.setTimeout0=(()=>{if(Pe.setTimeout0IsFaster){let t=[];dg.addEventListener("message",r=>{if(r.data&&r.data.vscodeScheduleAsyncWork)for(let n=0,o=t.length;n<o;n++){let s=t[n];if(s.id===r.data.vscodeScheduleAsyncWork){t.splice(n,1),s.callback();return}}});let e=0;return r=>{let n=++e;t.push({id:n,callback:r}),dg.postMessage({vscodeScheduleAsyncWork:n},"*")}}return t=>setTimeout(t)})();Pe.OS=nL||V1e?2:rL?1:3;var D0t=!0,U0t=!1;function UGr(){if(!U0t){U0t=!0;let t=new Uint8Array(2);t[0]=1,t[1]=2,D0t=new Uint16Array(t.buffer)[0]===513}return D0t}Pe.isChrome=!!(Pe.userAgent&&Pe.userAgent.indexOf("Chrome")>=0);Pe.isFirefox=!!(Pe.userAgent&&Pe.userAgent.indexOf("Firefox")>=0);Pe.isSafari=!!(!Pe.isChrome&&Pe.userAgent&&Pe.userAgent.indexOf("Safari")>=0);Pe.isEdge=!!(Pe.userAgent&&Pe.userAgent.indexOf("Edg/")>=0);Pe.isAndroid=!!(Pe.userAgent&&Pe.userAgent.indexOf("Android")>=0);function qGr(t){return parseFloat(t)>=20}});var z0t=m(Hp=>{"use strict";Object.defineProperty(Hp,"__esModule",{value:!0});Hp.arch=Hp.platform=Hp.env=Hp.cwd=void 0;var G0t=H1e(),Db,G1e=globalThis.vscode;if(typeof G1e<"u"&&typeof G1e.process<"u"){let t=G1e.process;Db={get platform(){return t.platform},get arch(){return t.arch},get env(){return t.env},cwd(){return t.cwd()}}}else typeof process<"u"?Db={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:Db={get platform(){return G0t.isWindows?"win32":G0t.isMacintosh?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};Hp.cwd=Db.cwd;Hp.env=Db.env;Hp.platform=Db.platform;Hp.arch=Db.arch});var K0t=m(Ke=>{"use strict";Object.defineProperty(Ke,"__esModule",{value:!0});Ke.delimiter=Ke.sep=Ke.toNamespacedPath=Ke.parse=Ke.format=Ke.extname=Ke.basename=Ke.dirname=Ke.relative=Ke.resolve=Ke.join=Ke.isAbsolute=Ke.normalize=Ke.posix=Ke.win32=void 0;var $P=z0t(),FGr=65,jGr=97,BGr=90,$Gr=122,xv=46,_s=47,dl=92,Cv=58,VGr=63,wG=class extends Error{code;constructor(e,r,n){let o;typeof r=="string"&&r.indexOf("not ")===0?(o="must not be",r=r.replace(/^not /,"")):o="must be";let s=e.indexOf(".")!==-1?"property":"argument",a=`The "${e}" ${s} ${o} of type ${r}`;a+=`. Received type ${typeof n}`,super(a),this.code="ERR_INVALID_ARG_TYPE"}};function HGr(t,e){if(t===null||typeof t!="object")throw new wG(e,"Object",t)}function Qi(t,e){if(typeof t!="string")throw new wG(e,"string",t)}var fl=$P.platform==="win32";function pr(t){return t===_s||t===dl}function z1e(t){return t===_s}function Av(t){return t>=FGr&&t<=BGr||t>=jGr&&t<=$Gr}function IG(t,e,r,n){let o="",s=0,a=-1,c=0,l=0;for(let u=0;u<=t.length;++u){if(u<t.length)l=t.charCodeAt(u);else{if(n(l))break;l=_s}if(n(l)){if(!(a===u-1||c===1))if(c===2){if(o.length<2||s!==2||o.charCodeAt(o.length-1)!==xv||o.charCodeAt(o.length-2)!==xv){if(o.length>2){let d=o.lastIndexOf(r);d===-1?(o="",s=0):(o=o.slice(0,d),s=o.length-1-o.lastIndexOf(r)),a=u,c=0;continue}else if(o.length!==0){o="",s=0,a=u,c=0;continue}}e&&(o+=o.length>0?`${r}..`:"..",s=2)}else o.length>0?o+=`${r}${t.slice(a+1,u)}`:o=t.slice(a+1,u),s=u-a-1;a=u,c=0}else l===xv&&c!==-1?++c:c=-1}return o}function W0t(t,e){HGr(e,"pathObject");let r=e.dir||e.root,n=e.base||`${e.name||""}${e.ext||""}`;return r?r===e.root?`${r}${n}`:`${r}${t}${n}`:n}Ke.win32={resolve(...t){let e="",r="",n=!1;for(let o=t.length-1;o>=-1;o--){let s;if(o>=0){if(s=t[o],Qi(s,"path"),s.length===0)continue}else e.length===0?s=$P.cwd():(s=$P.env[`=${e}`]||$P.cwd(),(s===void 0||s.slice(0,2).toLowerCase()!==e.toLowerCase()&&s.charCodeAt(2)===dl)&&(s=`${e}\\`));let a=s.length,c=0,l="",u=!1,d=s.charCodeAt(0);if(a===1)pr(d)&&(c=1,u=!0);else if(pr(d))if(u=!0,pr(s.charCodeAt(1))){let f=2,p=f;for(;f<a&&!pr(s.charCodeAt(f));)f++;if(f<a&&f!==p){let h=s.slice(p,f);for(p=f;f<a&&pr(s.charCodeAt(f));)f++;if(f<a&&f!==p){for(p=f;f<a&&!pr(s.charCodeAt(f));)f++;(f===a||f!==p)&&(l=`\\\\${h}\\${s.slice(p,f)}`,c=f)}}}else c=1;else Av(d)&&s.charCodeAt(1)===Cv&&(l=s.slice(0,2),c=2,a>2&&pr(s.charCodeAt(2))&&(u=!0,c=3));if(l.length>0)if(e.length>0){if(l.toLowerCase()!==e.toLowerCase())continue}else e=l;if(n){if(e.length>0)break}else if(r=`${s.slice(c)}\\${r}`,n=u,u&&e.length>0)break}return r=IG(r,!n,"\\",pr),n?`${e}\\${r}`:`${e}${r}`||"."},normalize(t){Qi(t,"path");let e=t.length;if(e===0)return".";let r=0,n,o=!1,s=t.charCodeAt(0);if(e===1)return z1e(s)?"\\":t;if(pr(s))if(o=!0,pr(t.charCodeAt(1))){let c=2,l=c;for(;c<e&&!pr(t.charCodeAt(c));)c++;if(c<e&&c!==l){let u=t.slice(l,c);for(l=c;c<e&&pr(t.charCodeAt(c));)c++;if(c<e&&c!==l){for(l=c;c<e&&!pr(t.charCodeAt(c));)c++;if(c===e)return`\\\\${u}\\${t.slice(l)}\\`;c!==l&&(n=`\\\\${u}\\${t.slice(l,c)}`,r=c)}}}else r=1;else Av(s)&&t.charCodeAt(1)===Cv&&(n=t.slice(0,2),r=2,e>2&&pr(t.charCodeAt(2))&&(o=!0,r=3));let a=r<e?IG(t.slice(r),!o,"\\",pr):"";return a.length===0&&!o&&(a="."),a.length>0&&pr(t.charCodeAt(e-1))&&(a+="\\"),n===void 0?o?`\\${a}`:a:o?`${n}\\${a}`:`${n}${a}`},isAbsolute(t){Qi(t,"path");let e=t.length;if(e===0)return!1;let r=t.charCodeAt(0);return pr(r)||e>2&&Av(r)&&t.charCodeAt(1)===Cv&&pr(t.charCodeAt(2))},join(...t){if(t.length===0)return".";let e,r;for(let s=0;s<t.length;++s){let a=t[s];Qi(a,"path"),a.length>0&&(e===void 0?e=r=a:e+=`\\${a}`)}if(e===void 0)return".";let n=!0,o=0;if(typeof r=="string"&&pr(r.charCodeAt(0))){++o;let s=r.length;s>1&&pr(r.charCodeAt(1))&&(++o,s>2&&(pr(r.charCodeAt(2))?++o:n=!1))}if(n){for(;o<e.length&&pr(e.charCodeAt(o));)o++;o>=2&&(e=`\\${e.slice(o)}`)}return Ke.win32.normalize(e)},relative(t,e){if(Qi(t,"from"),Qi(e,"to"),t===e)return"";let r=Ke.win32.resolve(t),n=Ke.win32.resolve(e);if(r===n||(t=r.toLowerCase(),e=n.toLowerCase(),t===e))return"";let o=0;for(;o<t.length&&t.charCodeAt(o)===dl;)o++;let s=t.length;for(;s-1>o&&t.charCodeAt(s-1)===dl;)s--;let a=s-o,c=0;for(;c<e.length&&e.charCodeAt(c)===dl;)c++;let l=e.length;for(;l-1>c&&e.charCodeAt(l-1)===dl;)l--;let u=l-c,d=a<u?a:u,f=-1,p=0;for(;p<d;p++){let _=t.charCodeAt(o+p);if(_!==e.charCodeAt(c+p))break;_===dl&&(f=p)}if(p!==d){if(f===-1)return n}else{if(u>d){if(e.charCodeAt(c+p)===dl)return n.slice(c+p+1);if(p===2)return n.slice(c+p)}a>d&&(t.charCodeAt(o+p)===dl?f=p:p===2&&(f=3)),f===-1&&(f=0)}let h="";for(p=o+f+1;p<=s;++p)(p===s||t.charCodeAt(p)===dl)&&(h+=h.length===0?"..":"\\..");return c+=f,h.length>0?`${h}${n.slice(c,l)}`:(n.charCodeAt(c)===dl&&++c,n.slice(c,l))},toNamespacedPath(t){if(typeof t!="string"||t.length===0)return t;let e=Ke.win32.resolve(t);if(e.length<=2)return t;if(e.charCodeAt(0)===dl){if(e.charCodeAt(1)===dl){let r=e.charCodeAt(2);if(r!==VGr&&r!==xv)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(Av(e.charCodeAt(0))&&e.charCodeAt(1)===Cv&&e.charCodeAt(2)===dl)return`\\\\?\\${e}`;return t},dirname(t){Qi(t,"path");let e=t.length;if(e===0)return".";let r=-1,n=0,o=t.charCodeAt(0);if(e===1)return pr(o)?t:".";if(pr(o)){if(r=n=1,pr(t.charCodeAt(1))){let c=2,l=c;for(;c<e&&!pr(t.charCodeAt(c));)c++;if(c<e&&c!==l){for(l=c;c<e&&pr(t.charCodeAt(c));)c++;if(c<e&&c!==l){for(l=c;c<e&&!pr(t.charCodeAt(c));)c++;if(c===e)return t;c!==l&&(r=n=c+1)}}}}else Av(o)&&t.charCodeAt(1)===Cv&&(r=e>2&&pr(t.charCodeAt(2))?3:2,n=r);let s=-1,a=!0;for(let c=e-1;c>=n;--c)if(pr(t.charCodeAt(c))){if(!a){s=c;break}}else a=!1;if(s===-1){if(r===-1)return".";s=r}return t.slice(0,s)},basename(t,e){e!==void 0&&Qi(e,"ext"),Qi(t,"path");let r=0,n=-1,o=!0,s;if(t.length>=2&&Av(t.charCodeAt(0))&&t.charCodeAt(1)===Cv&&(r=2),e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,c=-1;for(s=t.length-1;s>=r;--s){let l=t.charCodeAt(s);if(pr(l)){if(!o){r=s+1;break}}else c===-1&&(o=!1,c=s+1),a>=0&&(l===e.charCodeAt(a)?--a===-1&&(n=s):(a=-1,n=c))}return r===n?n=c:n===-1&&(n=t.length),t.slice(r,n)}for(s=t.length-1;s>=r;--s)if(pr(t.charCodeAt(s))){if(!o){r=s+1;break}}else n===-1&&(o=!1,n=s+1);return n===-1?"":t.slice(r,n)},extname(t){Qi(t,"path");let e=0,r=-1,n=0,o=-1,s=!0,a=0;t.length>=2&&t.charCodeAt(1)===Cv&&Av(t.charCodeAt(0))&&(e=n=2);for(let c=t.length-1;c>=e;--c){let l=t.charCodeAt(c);if(pr(l)){if(!s){n=c+1;break}continue}o===-1&&(s=!1,o=c+1),l===xv?r===-1?r=c:a!==1&&(a=1):r!==-1&&(a=-1)}return r===-1||o===-1||a===0||a===1&&r===o-1&&r===n+1?"":t.slice(r,o)},format:W0t.bind(null,"\\"),parse(t){Qi(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.length,n=0,o=t.charCodeAt(0);if(r===1)return pr(o)?(e.root=e.dir=t,e):(e.base=e.name=t,e);if(pr(o)){if(n=1,pr(t.charCodeAt(1))){let f=2,p=f;for(;f<r&&!pr(t.charCodeAt(f));)f++;if(f<r&&f!==p){for(p=f;f<r&&pr(t.charCodeAt(f));)f++;if(f<r&&f!==p){for(p=f;f<r&&!pr(t.charCodeAt(f));)f++;f===r?n=f:f!==p&&(n=f+1)}}}}else if(Av(o)&&t.charCodeAt(1)===Cv){if(r<=2)return e.root=e.dir=t,e;if(n=2,pr(t.charCodeAt(2))){if(r===3)return e.root=e.dir=t,e;n=3}}n>0&&(e.root=t.slice(0,n));let s=-1,a=n,c=-1,l=!0,u=t.length-1,d=0;for(;u>=n;--u){if(o=t.charCodeAt(u),pr(o)){if(!l){a=u+1;break}continue}c===-1&&(l=!1,c=u+1),o===xv?s===-1?s=u:d!==1&&(d=1):s!==-1&&(d=-1)}return c!==-1&&(s===-1||d===0||d===1&&s===c-1&&s===a+1?e.base=e.name=t.slice(a,c):(e.name=t.slice(a,s),e.base=t.slice(a,c),e.ext=t.slice(s,c))),a>0&&a!==n?e.dir=t.slice(0,a-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null};var GGr=(()=>{if(fl){let t=/\\/g;return()=>{let e=$P.cwd().replace(t,"/");return e.slice(e.indexOf("/"))}}return()=>$P.cwd()})();Ke.posix={resolve(...t){let e="",r=!1;for(let n=t.length-1;n>=-1&&!r;n--){let o=n>=0?t[n]:GGr();Qi(o,"path"),o.length!==0&&(e=`${o}/${e}`,r=o.charCodeAt(0)===_s)}return e=IG(e,!r,"/",z1e),r?`/${e}`:e.length>0?e:"."},normalize(t){if(Qi(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===_s,r=t.charCodeAt(t.length-1)===_s;return t=IG(t,!e,"/",z1e),t.length===0?e?"/":r?"./":".":(r&&(t+="/"),e?`/${t}`:t)},isAbsolute(t){return Qi(t,"path"),t.length>0&&t.charCodeAt(0)===_s},join(...t){if(t.length===0)return".";let e;for(let r=0;r<t.length;++r){let n=t[r];Qi(n,"path"),n.length>0&&(e===void 0?e=n:e+=`/${n}`)}return e===void 0?".":Ke.posix.normalize(e)},relative(t,e){if(Qi(t,"from"),Qi(e,"to"),t===e||(t=Ke.posix.resolve(t),e=Ke.posix.resolve(e),t===e))return"";let r=1,n=t.length,o=n-r,s=1,a=e.length-s,c=o<a?o:a,l=-1,u=0;for(;u<c;u++){let f=t.charCodeAt(r+u);if(f!==e.charCodeAt(s+u))break;f===_s&&(l=u)}if(u===c)if(a>c){if(e.charCodeAt(s+u)===_s)return e.slice(s+u+1);if(u===0)return e.slice(s+u)}else o>c&&(t.charCodeAt(r+u)===_s?l=u:u===0&&(l=0));let d="";for(u=r+l+1;u<=n;++u)(u===n||t.charCodeAt(u)===_s)&&(d+=d.length===0?"..":"/..");return`${d}${e.slice(s+l)}`},toNamespacedPath(t){return t},dirname(t){if(Qi(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===_s,r=-1,n=!0;for(let o=t.length-1;o>=1;--o)if(t.charCodeAt(o)===_s){if(!n){r=o;break}}else n=!1;return r===-1?e?"/":".":e&&r===1?"//":t.slice(0,r)},basename(t,e){e!==void 0&&Qi(e,"ext"),Qi(t,"path");let r=0,n=-1,o=!0,s;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,c=-1;for(s=t.length-1;s>=0;--s){let l=t.charCodeAt(s);if(l===_s){if(!o){r=s+1;break}}else c===-1&&(o=!1,c=s+1),a>=0&&(l===e.charCodeAt(a)?--a===-1&&(n=s):(a=-1,n=c))}return r===n?n=c:n===-1&&(n=t.length),t.slice(r,n)}for(s=t.length-1;s>=0;--s)if(t.charCodeAt(s)===_s){if(!o){r=s+1;break}}else n===-1&&(o=!1,n=s+1);return n===-1?"":t.slice(r,n)},extname(t){Qi(t,"path");let e=-1,r=0,n=-1,o=!0,s=0;for(let a=t.length-1;a>=0;--a){let c=t.charCodeAt(a);if(c===_s){if(!o){r=a+1;break}continue}n===-1&&(o=!1,n=a+1),c===xv?e===-1?e=a:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||n===-1||s===0||s===1&&e===n-1&&e===r+1?"":t.slice(e,n)},format:W0t.bind(null,"/"),parse(t){Qi(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.charCodeAt(0)===_s,n;r?(e.root="/",n=1):n=0;let o=-1,s=0,a=-1,c=!0,l=t.length-1,u=0;for(;l>=n;--l){let d=t.charCodeAt(l);if(d===_s){if(!c){s=l+1;break}continue}a===-1&&(c=!1,a=l+1),d===xv?o===-1?o=l:u!==1&&(u=1):o!==-1&&(u=-1)}if(a!==-1){let d=s===0&&r?1:s;o===-1||u===0||u===1&&o===a-1&&o===s+1?e.base=e.name=t.slice(d,a):(e.name=t.slice(d,o),e.base=t.slice(d,a),e.ext=t.slice(o,a))}return s>0?e.dir=t.slice(0,s-1):r&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};Ke.posix.win32=Ke.win32.win32=Ke.win32;Ke.posix.posix=Ke.win32.posix=Ke.posix;Ke.normalize=fl?Ke.win32.normalize:Ke.posix.normalize;Ke.isAbsolute=fl?Ke.win32.isAbsolute:Ke.posix.isAbsolute;Ke.join=fl?Ke.win32.join:Ke.posix.join;Ke.resolve=fl?Ke.win32.resolve:Ke.posix.resolve;Ke.relative=fl?Ke.win32.relative:Ke.posix.relative;Ke.dirname=fl?Ke.win32.dirname:Ke.posix.dirname;Ke.basename=fl?Ke.win32.basename:Ke.posix.basename;Ke.extname=fl?Ke.win32.extname:Ke.posix.extname;Ke.format=fl?Ke.win32.format:Ke.posix.format;Ke.parse=fl?Ke.win32.parse:Ke.posix.parse;Ke.toNamespacedPath=fl?Ke.win32.toNamespacedPath:Ke.posix.toNamespacedPath;Ke.sep=fl?Ke.win32.sep:Ke.posix.sep;Ke.delimiter=fl?Ke.win32.delimiter:Ke.posix.delimiter});var tpt=m(VP=>{"use strict";Object.defineProperty(VP,"__esModule",{value:!0});VP.URI=void 0;VP.isUriComponents=XGr;VP.uriToFsPath=MG;var Y0t=K0t(),RG=H1e(),zGr=/^\w[\w\d+.-]*$/,WGr=/^\//,KGr=/^\/\//;function YGr(t,e){if(!t.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${t.authority}", path: "${t.path}", query: "${t.query}", fragment: "${t.fragment}"}`);if(t.scheme&&!zGr.test(t.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(t.path){if(t.authority){if(!WGr.test(t.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(KGr.test(t.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function QGr(t,e){return!t&&!e?"file":t}function ZGr(t,e){switch(t){case"https":case"http":case"file":e?e[0]!==Kf&&(e=Kf+e):e=Kf;break}return e}var Bn="",Kf="/",JGr=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,OG=class t{static isUri(e){return e instanceof t?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}scheme;authority;path;query;fragment;constructor(e,r,n,o,s,a=!1){typeof e=="object"?(this.scheme=e.scheme||Bn,this.authority=e.authority||Bn,this.path=e.path||Bn,this.query=e.query||Bn,this.fragment=e.fragment||Bn):(this.scheme=QGr(e,a),this.authority=r||Bn,this.path=ZGr(this.scheme,n||Bn),this.query=o||Bn,this.fragment=s||Bn,YGr(this,a))}get fsPath(){return MG(this,!1)}with(e){if(!e)return this;let{scheme:r,authority:n,path:o,query:s,fragment:a}=e;return r===void 0?r=this.scheme:r===null&&(r=Bn),n===void 0?n=this.authority:n===null&&(n=Bn),o===void 0?o=this.path:o===null&&(o=Bn),s===void 0?s=this.query:s===null&&(s=Bn),a===void 0?a=this.fragment:a===null&&(a=Bn),r===this.scheme&&n===this.authority&&o===this.path&&s===this.query&&a===this.fragment?this:new wv(r,n,o,s,a)}static parse(e,r=!1){let n=JGr.exec(e);return n?new wv(n[2]||Bn,PG(n[4]||Bn),PG(n[5]||Bn),PG(n[7]||Bn),PG(n[9]||Bn),r):new wv(Bn,Bn,Bn,Bn,Bn)}static file(e){let r=Bn;if(RG.isWindows&&(e=e.replace(/\\/g,Kf)),e[0]===Kf&&e[1]===Kf){let n=e.indexOf(Kf,2);n===-1?(r=e.substring(2),e=Kf):(r=e.substring(2,n),e=e.substring(n)||Kf)}return new wv("file",r,e,Bn,Bn)}static from(e,r){return new wv(e.scheme,e.authority,e.path,e.query,e.fragment,r)}static joinPath(e,...r){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let n;return RG.isWindows&&e.scheme==="file"?n=t.file(Y0t.win32.join(MG(e,!0),...r)).path:n=Y0t.posix.join(e.path,...r),e.with({path:n})}toString(e=!1){return W1e(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof t)return e;{let r=new wv(e);return r._formatted=e.external??null,r._fsPath=e._sep===J0t?e.fsPath??null:null,r}}else return e}};VP.URI=OG;function XGr(t){return!t||typeof t!="object"?!1:typeof t.scheme=="string"&&(typeof t.authority=="string"||typeof t.authority>"u")&&(typeof t.path=="string"||typeof t.path>"u")&&(typeof t.query=="string"||typeof t.query>"u")&&(typeof t.fragment=="string"||typeof t.fragment>"u")}var J0t=RG.isWindows?1:void 0,wv=class extends OG{_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=MG(this,!1)),this._fsPath}toString(e=!1){return e?W1e(this,!0):(this._formatted||(this._formatted=W1e(this,!1)),this._formatted)}toJSON(){let e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=J0t),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}},X0t={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function Q0t(t,e,r){let n,o=-1;for(let s=0;s<t.length;s++){let a=t.charCodeAt(s);if(a>=97&&a<=122||a>=65&&a<=90||a>=48&&a<=57||a===45||a===46||a===95||a===126||e&&a===47||r&&a===91||r&&a===93||r&&a===58)o!==-1&&(n+=encodeURIComponent(t.substring(o,s)),o=-1),n!==void 0&&(n+=t.charAt(s));else{n===void 0&&(n=t.substr(0,s));let c=X0t[a];c!==void 0?(o!==-1&&(n+=encodeURIComponent(t.substring(o,s)),o=-1),n+=c):o===-1&&(o=s)}}return o!==-1&&(n+=encodeURIComponent(t.substring(o))),n!==void 0?n:t}function ezr(t){let e;for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);n===35||n===63?(e===void 0&&(e=t.substr(0,r)),e+=X0t[n]):e!==void 0&&(e+=t[r])}return e!==void 0?e:t}function MG(t,e){let r;return t.authority&&t.path.length>1&&t.scheme==="file"?r=`//${t.authority}${t.path}`:t.path.charCodeAt(0)===47&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&t.path.charCodeAt(2)===58?e?r=t.path.substr(1):r=t.path[1].toLowerCase()+t.path.substr(2):r=t.path,RG.isWindows&&(r=r.replace(/\//g,"\\")),r}function W1e(t,e){let r=e?ezr:Q0t,n="",{scheme:o,authority:s,path:a,query:c,fragment:l}=t;if(o&&(n+=o,n+=":"),(s||o==="file")&&(n+=Kf,n+=Kf),s){let u=s.indexOf("@");if(u!==-1){let d=s.substr(0,u);s=s.substr(u+1),u=d.lastIndexOf(":"),u===-1?n+=r(d,!1,!1):(n+=r(d.substr(0,u),!1,!1),n+=":",n+=r(d.substr(u+1),!1,!0)),n+="@"}s=s.toLowerCase(),u=s.lastIndexOf(":"),u===-1?n+=r(s,!1,!0):(n+=r(s.substr(0,u),!1,!0),n+=s.substr(u))}if(a){if(a.length>=3&&a.charCodeAt(0)===47&&a.charCodeAt(2)===58){let u=a.charCodeAt(1);u>=65&&u<=90&&(a=`/${String.fromCharCode(u+32)}:${a.substr(3)}`)}else if(a.length>=2&&a.charCodeAt(1)===58){let u=a.charCodeAt(0);u>=65&&u<=90&&(a=`${String.fromCharCode(u+32)}:${a.substr(2)}`)}n+=r(a,!0,!1)}return c&&(n+="?",n+=r(c,!1,!1)),l&&(n+="#",n+=e?l:Q0t(l,!1,!1)),n}function ept(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substr(0,3)+ept(t.substr(3)):t}}var Z0t=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function PG(t){return t.match(Z0t)?t.replace(Z0t,e=>ept(e)):t}});var Q1e=m(Iv=>{"use strict";Object.defineProperty(Iv,"__esModule",{value:!0});Iv.PromptReference=Iv.ChatResponseReferencePartStatusKind=Iv.PromptMetadata=void 0;var iL=tpt(),K1e=class{_marker;toString(){return Object.getPrototypeOf(this).constructor.name}};Iv.PromptMetadata=K1e;var rpt;(function(t){t[t.Complete=1]="Complete",t[t.Partial=2]="Partial",t[t.Omitted=3]="Omitted"})(rpt||(Iv.ChatResponseReferencePartStatusKind=rpt={}));var Y1e=class t{anchor;iconPath;options;static fromJSON(e){let r=n=>"scheme"in n?iL.URI.from(n):{uri:iL.URI.from(n.uri),range:n.range};return new t("variableName"in e.anchor?{variableName:e.anchor.variableName,value:e.anchor.value&&r(e.anchor.value)}:r(e.anchor),e.iconPath&&("scheme"in e.iconPath?iL.URI.from(e.iconPath):"light"in e.iconPath?{light:iL.URI.from(e.iconPath.light),dark:iL.URI.from(e.iconPath.dark)}:e.iconPath),e.options)}constructor(e,r,n){this.anchor=e,this.iconPath=r,this.options=n}toJSON(){return{anchor:this.anchor,iconPath:this.iconPath,options:this.options}}};Iv.PromptReference=Y1e});var ove=m(HP=>{"use strict";Object.defineProperty(HP,"__esModule",{value:!0});HP.PromptRenderer=HP.MetadataMap=void 0;var tzr=b1e(),qb=I1e(),Fb=Ev(),uo=j1e(),ive=Q1e(),NG;(function(t){t.empty={get:()=>{},getAll:()=>[]},t.from=e=>({get:r=>e.find(n=>n instanceof r),getAll:r=>e.filter(n=>n instanceof r)})})(NG||(HP.MetadataMap=NG={}));var J1e=class{_endpoint;_ctor;_props;_tokenizer;_usedContext=[];_ignoredFiles=[];_growables=[];_root=new DG(null,0);_tokenLimits=[];tracer=void 0;constructor(e,r,n,o){this._endpoint=e,this._ctor=r,this._props=n,this._tokenizer=o}getIgnoredFiles(){return Array.from(new Set(this._ignoredFiles))}getUsedContext(){return this._usedContext}createElement(e){return new e.ctor(e.props)}async _processPromptPieces(e,r,n,o){let s=new Map;for(let[l,u]of r.entries()){if(Array.isArray(u.children)&&(u.props=u.props??{},u.props.children=u.children),!u.ctor){let _=spt(u.path);throw new Error(`Invalid ChatMessage child! Child must be a TSX component that extends PromptElement at ${_}`)}let d=this.createElement(u),f;d instanceof uo.TokenLimit&&(f=u.props.max,this._tokenLimits.push({limit:f,id:u.node.id})),u.node.setObj(d);let p=u.props.flexGrow??1/0,h=s.get(p);h||(h=[],s.set(p,h)),h.push({element:u,promptElementInstance:d,tokenLimit:f})}if(s.size===0)return;let a=[...s.entries()].sort(([l],[u])=>u-l).map(([l,u])=>u),c=l=>{let u=0;for(let d=l+1;d<a.length;d++)for(let{element:f}of a[d]){if(!f.props.flexReserve)continue;let p=typeof f.props.flexReserve=="string"?Math.floor(e.remainingTokenBudget/Number(f.props.flexReserve.slice(1))):f.props.flexReserve;u+=p}return e.consume(u),u};for(let[l,u]of a.entries()){let d=c(l),f=0;for(let{element:v}of u)f+=v.props.flexBasis??1;let p=0,h=u.map(v=>{if(v.tokenLimit===void 0)return!1;let E=v.element.props.flexBasis??1,y=E/f;return Math.floor(e.remainingTokenBudget*y)<v.tokenLimit?!1:(f-=E,p+=v.tokenLimit,!0)}),_=u.map((v,E)=>{let y=(v.element.props.flexBasis??1)/f;return{tokenBudget:h[E]?v.tokenLimit:Math.floor((e.remainingTokenBudget-p)*y),endpoint:e.endpoint,countTokens:(S,b)=>this._tokenizer.tokenLength(typeof S=="string"?{type:Fb.Raw.ChatCompletionContentPartKind.Text,text:S}:S,b)}});e.consume(-d),this.tracer?.addRenderEpoch?.({inNode:u[0].element.node.parent?.id,flexValue:u[0].element.props.flexGrow??0,tokenBudget:e.remainingTokenBudget,reservedTokens:d,elements:u.map((v,E)=>({id:v.element.node.id,tokenBudget:_[E].tokenBudget}))}),await Promise.all(u.map(async({element:v,promptElementInstance:E},y)=>{let S=await ipt(v,()=>E.prepare?.(_[y],n,o));v.node.setState(S)}));let g=await Promise.all(u.map(async({element:v,promptElementInstance:E},y)=>{let S=_[y];return await ipt(v,()=>E.render(v.node.getState(),S,n,o))}));for(let[v,{element:E,promptElementInstance:y}]of u.entries()){let S=_[v],b=g[v];if(!b)continue;let w=await this._processPromptRenderPiece(new Ub(S.tokenBudget,this._endpoint),E,y,b,n,o);y instanceof uo.Expandable&&this._growables.push({initialConsume:w,elem:E.node}),e.consume(w)}}}async _processPromptRenderPiece(e,r,n,o,s,a){let c=opt(o),l=new Ub(e.tokenBudget,this._endpoint),{tokensConsumed:u}=await rzr(this._tokenizer,r,n,c);return l.consume(u),await this._handlePromptChildren(r,c,l,s,a),l.consumed}async renderElementJSON(e){return await this._processPromptPieces(new Ub(this._endpoint.modelMaxPromptTokens,this._endpoint),[{node:this._root,ctor:this._ctor,props:this._props,children:[],path:[this._ctor]}],void 0,e),{node:this._root.toJSON()}}async render(e,r){let n=await this.renderRaw(e,r);return{...n,messages:(0,Fb.toMode)(this._tokenizer.mode,n.messages)}}async renderRaw(e,r){await this._processPromptPieces(new Ub(this._endpoint.modelMaxPromptTokens,this._endpoint),[{node:this._root,ctor:this._ctor,props:this._props,children:[],path:[this._ctor]}],e,r);let{container:n,allMetadata:o,removed:s}=await this._getFinalElementTree(this._endpoint.modelMaxPromptTokens,r);this.tracer?.didMaterializeTree?.({budget:this._endpoint.modelMaxPromptTokens,renderedTree:{container:n,removed:s,budget:this._endpoint.modelMaxPromptTokens},tokenizer:this._tokenizer,renderTree:p=>this._getFinalElementTree(p,void 0).then(h=>({...h,budget:p}))});let a=[...n.toChatMessages()],c=await n.tokenCount(this._tokenizer),l=[...n.allMetadata()],u=new Set,d=l.map(p=>{if(!(p instanceof Gp))return;let h=p.reference,_="variableName"in h.anchor;if(_&&!u.has(h.anchor.variableName))return u.add(h.anchor.variableName),h;if(!_)return h}).filter(UG),f=o.map(p=>{if(!(p instanceof Gp)||l.includes(p))return;let h=p.reference,_="variableName"in h.anchor;if(_&&!u.has(h.anchor.variableName))return u.add(h.anchor.variableName),h;if(!_)return h}).filter(UG);return{metadata:NG.from(l),messages:a,hasIgnoredFiles:this._ignoredFiles.length>0,tokenCount:c,references:d,omittedReferences:f}}async _getFinalElementTree(e,r){let n=this._root.materialize(),o=[...n.toChatMessages()],s=[...n.allMetadata()],a=[{limit:e,id:this._root.id},...this._tokenLimits],c=0;for(let l=a.length-1;l>=0;l--){let u=a[l];if(u.limit>e)continue;let d=n.findById(u.id);if(!d)continue;let f=await d.tokenCount(this._tokenizer);if(!(f<u.limit&&!await this._grow(d,f,u.limit,r)))try{let p=await d.tokenCount(this._tokenizer);for(;p>u.limit;){let h=await d.baseMessageTokenCount(this._tokenizer);do for(let _ of d.removeLowestPriorityChild()){c++;let g=_.upperBoundTokenCount(this._tokenizer);p-=(typeof g=="number"?g:await g)*1.25}while(p-h>u.limit);p=await d.tokenCount(this._tokenizer)}}catch(p){throw p instanceof qb.BudgetExceededError&&(p.metadata=NG.from([...n.allMetadata()]),p.messages=o),p}}return{container:n,allMetadata:s,removed:c}}async _grow(e,r,n,o){if(!this._growables.length)return!1;for(let s of this._growables){if(!e.findById(s.elem.id))continue;let a=s.elem.getObj();if(!(a instanceof uo.Expandable))throw new Error("unreachable: expected growable");let c=new DG(null,0,s.elem.id),l=new Ub(n-r+s.initialConsume,this._endpoint),u=await this._processPromptRenderPiece(l,{node:c,ctor:this._ctor,props:{},children:[],path:[this._ctor]},a,await a.render(void 0,{tokenBudget:l.tokenBudget,endpoint:this._endpoint,countTokens:(p,h)=>this._tokenizer.tokenLength(typeof p=="string"?{type:Fb.Raw.ChatCompletionContentPartKind.Text,text:p}:p,h)}),void 0,o),d=c.materialize();if(!e.replaceNode(s.elem.id,d))throw new Error("unreachable: could not find old element to replace");if(r-=s.initialConsume,r+=u,r>=n)break}return!0}_handlePromptChildren(e,r,n,o,s){if(e.ctor===uo.TextChunk){this._handleExtrinsicTextChunkChildren(e.node,e.node,e.props,r);return}let a=[];for(let c of r){if(c.kind==="literal"){e.node.appendStringChild(c.value,e.props.priority??Number.MAX_SAFE_INTEGER);continue}if(c.kind==="intrinsic"){this._handleIntrinsic(e.node,c.name,{priority:e.props.priority??Number.MAX_SAFE_INTEGER,...c.props},LG(c.children));continue}let l=e.node.createChild();a.push({node:l,ctor:c.ctor,props:c.props,children:c.children,path:[...e.path,c.ctor]})}return this._processPromptPieces(n,a,o,s)}_handleIntrinsic(e,r,n,o,s){switch(r){case"meta":return this._handleIntrinsicMeta(e,n,o);case"br":return this._handleIntrinsicLineBreak(e,n,o,n.priority,s);case"usedContext":return this._handleIntrinsicUsedContext(e,n,o);case"references":return this._handleIntrinsicReferences(e,n,o);case"ignoredFiles":return this._handleIntrinsicIgnoredFiles(e,n,o);case"elementJSON":return this._handleIntrinsicElementJSON(e,n.data);case"cacheBreakpoint":return this._handleIntrinsicCacheBreakpoint(e,n,o,s);case"opaque":return this._handleIntrinsicOpaque(e,n,s)}throw new Error(`Unknown intrinsic element ${r}!`)}_handleIntrinsicCacheBreakpoint(e,r,n,o){if(n.length>0)throw new Error("<cacheBreakpoint /> must not have children!");e.addCacheBreakpoint(r,o)}_handleIntrinsicMeta(e,r,n){if(n.length>0)throw new Error("<meta /> must not have children!");r.local?e.addMetadata(r.value):this._root.addMetadata(r.value)}_handleIntrinsicLineBreak(e,r,n,o,s){if(n.length>0)throw new Error("<br /> must not have children!");e.appendLineBreak(o??Number.MAX_SAFE_INTEGER,s)}_handleIntrinsicOpaque(e,r,n){e.appendOpaque(r.value,r.tokenUsage,r.priority,n)}_handleIntrinsicElementJSON(e,r){let n=e.appendPieceJSON(r.node);if(this.tracer?.includeInEpoch)for(let o of n.elements())this.tracer.includeInEpoch({id:o.id,tokenBudget:0})}_handleIntrinsicUsedContext(e,r,n){if(n.length>0)throw new Error("<usedContext /> must not have children!");this._usedContext.push(...r.value)}_handleIntrinsicReferences(e,r,n){if(n.length>0)throw new Error("<reference /> must not have children!");for(let o of r.value)e.addMetadata(new Gp(o))}_handleIntrinsicIgnoredFiles(e,r,n){if(n.length>0)throw new Error("<ignoredFiles /> must not have children!");this._ignoredFiles.push(...r.value)}_handleExtrinsicTextChunkChildren(e,r,n,o){let s=[],a=[];for(let c of o){if(c.kind==="extrinsic")throw new Error("TextChunk cannot have extrinsic children!");if(c.kind==="literal"&&s.push(c.value),c.kind==="intrinsic")if(c.name==="br")s.push(`
`);else if(c.name==="references")for(let l of c.props.value)a.push(new Gp(l));else this._handleIntrinsic(e,c.name,c.props,LG(c.children),r.childIndex)}e.appendStringChild(s.join(""),n?.priority??Number.MAX_SAFE_INTEGER,a,r.childIndex,!0)}};HP.PromptRenderer=J1e;async function rzr(t,e,r,n){let o=0;if((0,uo.isChatMessagePromptElement)(r)){let s={role:e.props.role,content:[],...e.props.name?{name:e.props.name}:void 0,...e.props.toolCalls?{toolCalls:e.props.toolCalls}:void 0,...e.props.toolCallId?{toolCallId:e.props.toolCallId}:void 0};o+=await t.countMessageTokens((0,Fb.toMode)(t.mode,s))}for(let s of n)s.kind==="literal"&&(o+=await t.tokenLength({type:Fb.Raw.ChatCompletionContentPartKind.Text,text:s.value}));return{tokensConsumed:o}}function opt(t,e=[]){return typeof t>"u"||typeof t=="boolean"?[]:(typeof t=="string"||typeof t=="number"?e.push(new tve(String(t))):nzr(t)?LG(t.children,e):izr(t)?LG(t,e):typeof t.ctor=="string"?e.push(new X1e(t.ctor,t.props,t.children)):e.push(new eve(t.ctor,t.props,t.children)),e)}function LG(t,e=[]){for(let r of t)opt(r,e);return e}var X1e=class{name;props;children;kind="intrinsic";constructor(e,r,n){this.name=e,this.props=r,this.children=n}},eve=class{ctor;props;children;kind="extrinsic";constructor(e,r,n){this.ctor=e,this.props=r,this.children=n}},tve=class{value;priority;kind="literal";constructor(e,r){this.value=e,this.priority=r}},kG=class t{parent;childIndex;value;tokenUsage;priority;static fromJSON(e,r,n){return new t(e,r,n.value,n.tokenUsage,n.priority)}kind=2;constructor(e,r,n,o,s){this.parent=e,this.childIndex=r,this.value=n,this.tokenUsage=o,this.priority=s}materialize(e){return new qb.MaterializedChatMessageOpaque(e,{type:Fb.Raw.ChatCompletionContentPartKind.Opaque,value:this.value,tokenUsage:this.tokenUsage},this.priority)}toJSON(){return{type:3,value:this.value,tokenUsage:this.tokenUsage,priority:this.priority}}},Ub=class{tokenBudget;endpoint;_consumed=0;constructor(e,r){this.tokenBudget=e,this.endpoint=r}get consumed(){return this._consumed>this.tokenBudget?this.tokenBudget:this._consumed}get remainingTokenBudget(){return Math.max(0,this.tokenBudget-this._consumed)}consume(e){this._consumed+=e}},DG=class t{parent;childIndex;id;static _nextId=0;static fromJSON(e,r,n){let o=new t(null,e);switch(o._metadata=r.references?.map(s=>new Gp(ive.PromptReference.fromJSON(s)))??[],o._children=r.children.map((s,a)=>{switch(s.type){case 1:return t.fromJSON(a,s,n);case 2:return oL.fromJSON(o,a,s);case 3:return kG.fromJSON(o,a,s);default:}}).filter(UG),r.ctor){case 1:o._objFlags=r.flags??0,o._obj=new uo.BaseChatMessage(r.props);break;case 2:{if(r.keepWithId!==void 0){let s=n.get(r.keepWithId);s||(s=(0,uo.useKeepWith)(),n.set(r.keepWithId,s)),o._obj=new s(r.props||{})}else o._obj=new uo.LogicalWrapper(r.props||{});o._objFlags=r.flags??0;break}case 3:o._obj=new uo.Image(r.props);break;default:}return o}kind=1;_obj=null;_state=void 0;_children=[];_metadata=[];_objFlags=0;constructor(e=null,r,n=t._nextId++){this.parent=e,this.childIndex=r,this.id=n}setObj(e){this._obj=e,this._obj instanceof uo.LegacyPrioritization&&(this._objFlags|=1),this._obj instanceof uo.Chunk&&(this._objFlags|=2),this._obj instanceof uo.IfEmpty&&(this._objFlags|=8),this._obj.props.passPriority&&(this._objFlags|=4)}getObj(){return this._obj}setState(e){this._state=e}getState(){return this._state}createChild(){let e=new t(this,this._children.length);return this._children.push(e),e}appendPieceJSON(e){let r=t.fromJSON(this._children.length,e,new Map);return this._children.push(r),r}appendStringChild(e,r,n,o=this._children.length,s=!1){this._children.push(new oL(this,o,e,r,n,s))}appendLineBreak(e,r=this._children.length){this._children.push(new oL(this,r,`
`,e))}appendOpaque(e,r,n,o=this._children.length){this._children.push(new kG(this,o,e,r,n))}toJSON(){let e={type:1,ctor:2,ctorName:this._obj?.constructor.name,children:this._children.slice().sort((r,n)=>r.childIndex-n.childIndex).map(r=>r.toJSON()).filter(UG),props:{},references:this._metadata.filter(r=>r instanceof Gp).map(r=>r.reference.toJSON())};if(this._obj&&(e.props=Z1e(this._obj.props,tzr.jsonRetainedProps)),this._obj instanceof uo.BaseChatMessage)e.ctor=1,Object.assign(e.props,Z1e(this._obj.props,["role","name","toolCalls","toolCallId"]));else{if(this._obj instanceof uo.Image)return{...e,ctor:3,props:{...e.props,...Z1e(this._obj.props,["src","detail"])}};this._obj instanceof uo.AbstractKeepWith&&(e.keepWithId=this._obj.id)}return this._objFlags!==0&&(e.flags=this._objFlags),e}materialize(e){if(this._children.sort((r,n)=>r.childIndex-n.childIndex),this._obj instanceof uo.Image)return new qb.MaterializedChatMessageImage(e,this.id,this._obj.props.src,this._obj.props.priority??Number.MAX_SAFE_INTEGER,this._metadata,0,this._obj.props.detail??void 0);if(this._obj instanceof uo.BaseChatMessage){if(this._obj.props.role===void 0||typeof this._obj.props.role!="number")throw new Error("Invalid ChatMessage!");return new qb.MaterializedChatMessage(e,this.id,this._obj.props.role,this._obj.props.name,this._obj instanceof uo.AssistantMessage?this._obj.props.toolCalls:void 0,this._obj instanceof uo.ToolMessage?this._obj.props.toolCallId:void 0,this._obj.props.priority??Number.MAX_SAFE_INTEGER,this._metadata,r=>this._children.map(n=>n.materialize(r)))}else{let r=new qb.GenericMaterializedContainer(e,this.id,this._obj?.constructor.name,this._obj?.props.priority??(this._obj?.props.passPriority?0:Number.MAX_SAFE_INTEGER),n=>this._children.map(o=>o.materialize(n)),this._metadata,this._objFlags);return this._obj instanceof uo.AbstractKeepWith&&(r.keepWithId=this._obj.id),r}}addMetadata(e){this._metadata.push(e)}addCacheBreakpoint(e,r=this._children.length){if(!(this._obj instanceof uo.BaseChatMessage))throw new Error("Cache breakpoints may only be direct children of chat messages");this._children.push(new rve({type:Fb.Raw.ChatCompletionContentPartKind.CacheBreakpoint,cacheType:e.type},r))}*elements(){yield this;for(let e of this._children)e instanceof t&&(yield*e.elements())}},rve=class{part;childIndex;constructor(e,r){this.part=e,this.childIndex=r}toJSON(){}materialize(e){return new qb.MaterializedChatMessageBreakpoint(e,this.part)}},oL=class t{parent;childIndex;text;priority;metadata;lineBreakBefore;static fromJSON(e,r,n){return new t(e,r,n.text,n.priority,n.references?.map(o=>new Gp(ive.PromptReference.fromJSON(o))),n.lineBreakBefore)}kind=2;constructor(e,r,n,o,s,a=!1){this.parent=e,this.childIndex=r,this.text=n,this.priority=o,this.metadata=s,this.lineBreakBefore=a}materialize(e){let r=this.lineBreakBefore?1:this.childIndex===0?2:0;return new qb.MaterializedChatMessageTextChunk(e,this.text,this.priority??Number.MAX_SAFE_INTEGER,this.metadata||[],r)}toJSON(){return{type:2,priority:this.priority,text:this.text,references:this.metadata?.filter(e=>e instanceof Gp).map(e=>e.reference.toJSON()),lineBreakBefore:this.lineBreakBefore}}};function nzr(t){return(typeof t.ctor=="function"&&t.ctor.isFragment)??!1}function UG(t){return t!==void 0}var nve=class extends ive.PromptMetadata{},Gp=class extends nve{reference;constructor(e){super(),this.reference=e}};function izr(t){return!!t&&typeof t[Symbol.iterator]=="function"}function Z1e(t,e){let r={};for(let n of e)t.hasOwnProperty(n)&&(r[n]=t[n]);return r}function spt(t){return t.map(e=>typeof e=="string"?e:e?e.name||"<anonymous>":String(e)).join(" > ")}var npt=new WeakSet;async function ipt(t,e){try{return await e()}catch(r){throw r instanceof Error&&!npt.has(r)&&r.constructor.name!=="CancellationError"&&(npt.add(r),r.message+=` (at tsx element ${spt(t.path)})`),r}}});var apt=m(qG=>{"use strict";Object.defineProperty(qG,"__esModule",{value:!0});qG.VSCodeTokenizer=void 0;var sve=Ev(),ave=class{countTokens;mode=sve.OutputMode.VSCode;constructor(e,r){if(this.countTokens=e,r!==sve.OutputMode.VSCode)throw new Error("`mode` must be set to vscode when using vscode.LanguageModelChat as the tokenizer")}async tokenLength(e,r){return e.type===sve.Raw.ChatCompletionContentPartKind.Text?this.countTokens(e.text,r):Promise.resolve(0)}async countMessageTokens(e){return this.countTokens(e)}};qG.VSCodeTokenizer=ave});var cpt=m(GP=>{"use strict";Object.defineProperty(GP,"__esModule",{value:!0});GP.tracerCss=GP.tracerSrc=void 0;GP.tracerSrc='"use strict";(()=>{var $,m,se,Ue,w,re,le,q,X,G,K,Ae,D={},ce=[],Re=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,J=Array.isArray;function E(t,e){for(var n in e)t[n]=e[n];return t}function ue(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function l(t,e,n){var o,r,_,c={};for(_ in e)_=="key"?o=e[_]:_=="ref"?r=e[_]:c[_]=e[_];if(arguments.length>2&&(c.children=arguments.length>3?$.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(_ in t.defaultProps)c[_]===void 0&&(c[_]=t.defaultProps[_]);return R(t,c,o,r,null)}function R(t,e,n,o,r){var _={type:t,props:e,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:r??++se,__i:-1,__u:0};return r==null&&m.vnode!=null&&m.vnode(_),_}function N(t){return t.children}function B(t,e){this.props=t,this.context=e}function I(t,e){if(e==null)return t.__?I(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?I(t):null}function de(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return de(t)}}function ie(t){(!t.__d&&(t.__d=!0)&&w.push(t)&&!O.__r++||re!==m.debounceRendering)&&((re=m.debounceRendering)||le)(O)}function O(){var t,e,n,o,r,_,c,a;for(w.sort(q);t=w.shift();)t.__d&&(e=w.length,o=void 0,_=(r=(n=t).__v).__e,c=[],a=[],n.__P&&((o=E({},r)).__v=r.__v+1,m.vnode&&m.vnode(o),Q(n.__P,o,r,n.__n,n.__P.namespaceURI,32&r.__u?[_]:null,c,_??I(r),!!(32&r.__u),a),o.__v=r.__v,o.__.__k[o.__i]=o,me(c,o,a),o.__e!=_&&de(o)),w.length>e&&w.sort(q));O.__r=0}function pe(t,e,n,o,r,_,c,a,u,s,p){var i,f,d,b,x,C=o&&o.__k||ce,h=e.length;for(n.__d=u,Be(n,e,C),u=n.__d,i=0;i<h;i++)(d=n.__k[i])!=null&&(f=d.__i===-1?D:C[d.__i]||D,d.__i=i,Q(t,d,f,r,_,c,a,u,s,p),b=d.__e,d.ref&&f.ref!=d.ref&&(f.ref&&Y(f.ref,null,d),p.push(d.ref,d.__c||b,d)),x==null&&b!=null&&(x=b),65536&d.__u||f.__k===d.__k?u=fe(d,u,t):typeof d.type=="function"&&d.__d!==void 0?u=d.__d:b&&(u=b.nextSibling),d.__d=void 0,d.__u&=-196609);n.__d=u,n.__e=x}function Be(t,e,n){var o,r,_,c,a,u=e.length,s=n.length,p=s,i=0;for(t.__k=[],o=0;o<u;o++)(r=e[o])!=null&&typeof r!="boolean"&&typeof r!="function"?(c=o+i,(r=t.__k[o]=typeof r=="string"||typeof r=="number"||typeof r=="bigint"||r.constructor==String?R(null,r,null,null,null):J(r)?R(N,{children:r},null,null,null):r.constructor===void 0&&r.__b>0?R(r.type,r.props,r.key,r.ref?r.ref:null,r.__v):r).__=t,r.__b=t.__b+1,_=null,(a=r.__i=Oe(r,n,c,p))!==-1&&(p--,(_=n[a])&&(_.__u|=131072)),_==null||_.__v===null?(a==-1&&i--,typeof r.type!="function"&&(r.__u|=65536)):a!==c&&(a==c-1?i--:a==c+1?i++:(a>c?i--:i++,r.__u|=65536))):r=t.__k[o]=null;if(p)for(o=0;o<s;o++)(_=n[o])!=null&&(131072&_.__u)==0&&(_.__e==t.__d&&(t.__d=I(_)),he(_,_))}function fe(t,e,n){var o,r;if(typeof t.type=="function"){for(o=t.__k,r=0;o&&r<o.length;r++)o[r]&&(o[r].__=t,e=fe(o[r],e,n));return e}t.__e!=e&&(e&&t.type&&!n.contains(e)&&(e=I(t)),n.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType===8);return e}function Oe(t,e,n,o){var r=t.key,_=t.type,c=n-1,a=n+1,u=e[n];if(u===null||u&&r==u.key&&_===u.type&&(131072&u.__u)==0)return n;if(o>(u!=null&&(131072&u.__u)==0?1:0))for(;c>=0||a<e.length;){if(c>=0){if((u=e[c])&&(131072&u.__u)==0&&r==u.key&&_===u.type)return c;c--}if(a<e.length){if((u=e[a])&&(131072&u.__u)==0&&r==u.key&&_===u.type)return a;a++}}return-1}function _e(t,e,n){e[0]==="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||Re.test(e)?n:n+"px"}function A(t,e,n,o,r){var _;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof o=="string"&&(t.style.cssText=o=""),o)for(e in o)n&&e in n||_e(t.style,e,"");if(n)for(e in n)o&&n[e]===o[e]||_e(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")_=e!==(e=e.replace(/(PointerCapture)$|Capture$/i,"$1")),e=e.toLowerCase()in t||e==="onFocusOut"||e==="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+_]=n,n?o?n.u=o.u:(n.u=X,t.addEventListener(e,_?K:G,_)):t.removeEventListener(e,_?K:G,_);else{if(r=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!=="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function ae(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=X++;else if(e.t<n.u)return;return n(m.event?m.event(e):e)}}}function Q(t,e,n,o,r,_,c,a,u,s){var p,i,f,d,b,x,C,h,v,H,M,P,F,oe,z,j,k=e.type;if(e.constructor!==void 0)return null;128&n.__u&&(u=!!(32&n.__u),_=[a=e.__e=n.__e]),(p=m.__b)&&p(e);e:if(typeof k=="function")try{if(h=e.props,v="prototype"in k&&k.prototype.render,H=(p=k.contextType)&&o[p.__c],M=p?H?H.props.value:p.__:o,n.__c?C=(i=e.__c=n.__c).__=i.__E:(v?e.__c=i=new k(h,M):(e.__c=i=new B(h,M),i.constructor=k,i.render=We),H&&H.sub(i),i.props=h,i.state||(i.state={}),i.context=M,i.__n=o,f=i.__d=!0,i.__h=[],i._sb=[]),v&&i.__s==null&&(i.__s=i.state),v&&k.getDerivedStateFromProps!=null&&(i.__s==i.state&&(i.__s=E({},i.__s)),E(i.__s,k.getDerivedStateFromProps(h,i.__s))),d=i.props,b=i.state,i.__v=e,f)v&&k.getDerivedStateFromProps==null&&i.componentWillMount!=null&&i.componentWillMount(),v&&i.componentDidMount!=null&&i.__h.push(i.componentDidMount);else{if(v&&k.getDerivedStateFromProps==null&&h!==d&&i.componentWillReceiveProps!=null&&i.componentWillReceiveProps(h,M),!i.__e&&(i.shouldComponentUpdate!=null&&i.shouldComponentUpdate(h,i.__s,M)===!1||e.__v===n.__v)){for(e.__v!==n.__v&&(i.props=h,i.state=i.__s,i.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(U){U&&(U.__=e)}),P=0;P<i._sb.length;P++)i.__h.push(i._sb[P]);i._sb=[],i.__h.length&&c.push(i);break e}i.componentWillUpdate!=null&&i.componentWillUpdate(h,i.__s,M),v&&i.componentDidUpdate!=null&&i.__h.push(function(){i.componentDidUpdate(d,b,x)})}if(i.context=M,i.props=h,i.__P=t,i.__e=!1,F=m.__r,oe=0,v){for(i.state=i.__s,i.__d=!1,F&&F(e),p=i.render(i.props,i.state,i.context),z=0;z<i._sb.length;z++)i.__h.push(i._sb[z]);i._sb=[]}else do i.__d=!1,F&&F(e),p=i.render(i.props,i.state,i.context),i.state=i.__s;while(i.__d&&++oe<25);i.state=i.__s,i.getChildContext!=null&&(o=E(E({},o),i.getChildContext())),v&&!f&&i.getSnapshotBeforeUpdate!=null&&(x=i.getSnapshotBeforeUpdate(d,b)),pe(t,J(j=p!=null&&p.type===N&&p.key==null?p.props.children:p)?j:[j],e,n,o,r,_,c,a,u,s),i.base=e.__e,e.__u&=-161,i.__h.length&&c.push(i),C&&(i.__E=i.__=null)}catch(U){if(e.__v=null,u||_!=null){for(e.__u|=u?160:32;a&&a.nodeType===8&&a.nextSibling;)a=a.nextSibling;_[_.indexOf(a)]=null,e.__e=a}else e.__e=n.__e,e.__k=n.__k;m.__e(U,e,n)}else _==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=$e(n.__e,e,n,o,r,_,c,u,s);(p=m.diffed)&&p(e)}function me(t,e,n){e.__d=void 0;for(var o=0;o<n.length;o++)Y(n[o],n[++o],n[++o]);m.__c&&m.__c(e,t),t.some(function(r){try{t=r.__h,r.__h=[],t.some(function(_){_.call(r)})}catch(_){m.__e(_,r.__v)}})}function $e(t,e,n,o,r,_,c,a,u){var s,p,i,f,d,b,x,C=n.props,h=e.props,v=e.type;if(v==="svg"?r="http://www.w3.org/2000/svg":v==="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),_!=null){for(s=0;s<_.length;s++)if((d=_[s])&&"setAttribute"in d==!!v&&(v?d.localName===v:d.nodeType===3)){t=d,_[s]=null;break}}if(t==null){if(v===null)return document.createTextNode(h);t=document.createElementNS(r,v,h.is&&h),a&&(m.__m&&m.__m(e,_),a=!1),_=null}if(v===null)C===h||a&&t.data===h||(t.data=h);else{if(_=_&&$.call(t.childNodes),C=n.props||D,!a&&_!=null)for(C={},s=0;s<t.attributes.length;s++)C[(d=t.attributes[s]).name]=d.value;for(s in C)if(d=C[s],s!="children"){if(s=="dangerouslySetInnerHTML")i=d;else if(!(s in h)){if(s=="value"&&"defaultValue"in h||s=="checked"&&"defaultChecked"in h)continue;A(t,s,null,d,r)}}for(s in h)d=h[s],s=="children"?f=d:s=="dangerouslySetInnerHTML"?p=d:s=="value"?b=d:s=="checked"?x=d:a&&typeof d!="function"||C[s]===d||A(t,s,d,C[s],r);if(p)a||i&&(p.__html===i.__html||p.__html===t.innerHTML)||(t.innerHTML=p.__html),e.__k=[];else if(i&&(t.innerHTML=""),pe(t,J(f)?f:[f],e,n,o,v==="foreignObject"?"http://www.w3.org/1999/xhtml":r,_,c,_?_[0]:n.__k&&I(n,0),a,u),_!=null)for(s=_.length;s--;)ue(_[s]);a||(s="value",v==="progress"&&b==null?t.removeAttribute("value"):b!==void 0&&(b!==t[s]||v==="progress"&&!b||v==="option"&&b!==C[s])&&A(t,s,b,C[s],r),s="checked",x!==void 0&&x!==t[s]&&A(t,s,x,C[s],r))}return t}function Y(t,e,n){try{if(typeof t=="function"){var o=typeof t.__u=="function";o&&t.__u(),o&&e==null||(t.__u=t(e))}else t.current=e}catch(r){m.__e(r,n)}}function he(t,e,n){var o,r;if(m.unmount&&m.unmount(t),(o=t.ref)&&(o.current&&o.current!==t.__e||Y(o,null,e)),(o=t.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(_){m.__e(_,e)}o.base=o.__P=null}if(o=t.__k)for(r=0;r<o.length;r++)o[r]&&he(o[r],e,n||typeof t.type!="function");n||ue(t.__e),t.__c=t.__=t.__e=t.__d=void 0}function We(t,e,n){return this.constructor(t,n)}function ve(t,e,n){var o,r,_,c;m.__&&m.__(t,e),r=(o=typeof n=="function")?null:n&&n.__k||e.__k,_=[],c=[],Q(e,t=(!o&&n||e).__k=l(N,null,[t]),r||D,D,e.namespaceURI,!o&&n?[n]:r?null:e.firstChild?$.call(e.childNodes):null,_,!o&&n?n:r?r.__e:e.firstChild,o,c),me(_,t,c)}$=ce.slice,m={__e:function(t,e,n,o){for(var r,_,c;e=e.__;)if((r=e.__c)&&!r.__)try{if((_=r.constructor)&&_.getDerivedStateFromError!=null&&(r.setState(_.getDerivedStateFromError(t)),c=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(t,o||{}),c=r.__d),c)return r.__E=r}catch(a){t=a}throw t}},se=0,Ue=function(t){return t!=null&&t.constructor==null},B.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=E({},this.state),typeof t=="function"&&(t=t(E({},n),this.props)),t&&E(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),ie(this))},B.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),ie(this))},B.prototype.render=N,w=[],le=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,q=function(t,e){return t.__v.__b-e.__v.__b},O.__r=0,X=0,G=ae(!1),K=ae(!0),Ae=0;var L,g,Z,ge,V=0,Ee=[],y=m,be=y.__b,ye=y.__r,Ce=y.diffed,xe=y.__c,ke=y.unmount,Te=y.__;function te(t,e){y.__h&&y.__h(g,t,V||e),V=0;var n=g.__H||(g.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function S(t){return V=1,Ve(Ne,t)}function Ve(t,e,n){var o=te(L++,2);if(o.t=t,!o.__c&&(o.__=[n?n(e):Ne(void 0,e),function(a){var u=o.__N?o.__N[0]:o.__[0],s=o.t(u,a);u!==s&&(o.__N=[s,o.__[1]],o.__c.setState({}))}],o.__c=g,!g.u)){var r=function(a,u,s){if(!o.__c.__H)return!0;var p=o.__c.__H.__.filter(function(f){return!!f.__c});if(p.every(function(f){return!f.__N}))return!_||_.call(this,a,u,s);var i=!1;return p.forEach(function(f){if(f.__N){var d=f.__[0];f.__=f.__N,f.__N=void 0,d!==f.__[0]&&(i=!0)}}),!(!i&&o.__c.props===a)&&(!_||_.call(this,a,u,s))};g.u=!0;var _=g.shouldComponentUpdate,c=g.componentWillUpdate;g.componentWillUpdate=function(a,u,s){if(this.__e){var p=_;_=void 0,r(a,u,s),_=p}c&&c.call(this,a,u,s)},g.shouldComponentUpdate=r}return o.__N||o.__}function Se(t,e){var n=te(L++,3);!y.__s&&Ie(n.__H,e)&&(n.__=t,n.i=e,g.__H.__h.push(n))}function we(t){return V=5,je(function(){return{current:t}},[])}function je(t,e){var n=te(L++,7);return Ie(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function qe(){for(var t;t=Ee.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(W),t.__H.__h.forEach(ee),t.__H.__h=[]}catch(e){t.__H.__h=[],y.__e(e,t.__v)}}y.__b=function(t){g=null,be&&be(t)},y.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),Te&&Te(t,e)},y.__r=function(t){ye&&ye(t),L=0;var e=(g=t.__c).__H;e&&(Z===g?(e.__h=[],g.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.i=n.__N=void 0})):(e.__h.forEach(W),e.__h.forEach(ee),e.__h=[],L=0)),Z=g},y.diffed=function(t){Ce&&Ce(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(Ee.push(e)!==1&&ge===y.requestAnimationFrame||((ge=y.requestAnimationFrame)||Ge)(qe)),e.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.i=void 0})),Z=g=null},y.__c=function(t,e){e.some(function(n){try{n.__h.forEach(W),n.__h=n.__h.filter(function(o){return!o.__||ee(o)})}catch(o){e.some(function(r){r.__h&&(r.__h=[])}),e=[],y.__e(o,n.__v)}}),xe&&xe(t,e)},y.unmount=function(t){ke&&ke(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{W(o)}catch(r){e=r}}),n.__H=void 0,e&&y.__e(e,n.__v))};var Me=typeof requestAnimationFrame=="function";function Ge(t){var e,n=function(){clearTimeout(o),Me&&cancelAnimationFrame(e),setTimeout(t)},o=setTimeout(n,100);Me&&(e=requestAnimationFrame(n))}function W(t){var e=g,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),g=e}function ee(t){var e=g;t.__c=t.__(),g=e}function Ie(t,e){return!t||t.length!==e.length||e.some(function(n,o){return n!==t[o]})}function Ne(t,e){return typeof e=="function"?e(t):e}function He(t,e){let n=we(void 0),o=(...r)=>{n.current&&clearTimeout(n.current),n.current=window.setTimeout(()=>{t(...r)},e)};return Se(()=>()=>{n.current&&clearTimeout(n.current)},[]),o}var Ke=new Intl.NumberFormat("en-US"),T=({value:t})=>l(N,null,Ke.format(t));var ne=[{bg:"#c1e7ff",fg:"#000"},{bg:"#abd2ec",fg:"#000"},{bg:"#94bed9",fg:"#000"},{bg:"#7faac6",fg:"#000"},{bg:"#6996b3",fg:"#fff"},{bg:"#5383a1",fg:"#fff"},{bg:"#3d708f",fg:"#fff"},{bg:"#255e7e",fg:"#fff"}],Xe=({scoreBy:t,nodes:e,epoch:n})=>{if(e.length===0)return null;let o=t;if(t.field!=="tokens"){let r=e[0][t.field],_=e[0][t.field];for(let c=1;c<e.length;c++)r=Math.max(r,e[c][t.field]),_=Math.max(_,e[c][t.field]);o={field:t.field,max:r,min:_}}return l("div",{className:"node-children"},e.map((r,_)=>r.type===2?l(Je,{scoreBy:o,key:_,node:r}):l(Le,{scoreBy:o,key:_,node:r,epoch:n})))},Fe=({node:t})=>l("div",{className:"node-stats"},"Used Tokens: ",l(T,{value:t.tokens})," / ","Priority:"," ",t.priority===Number.MAX_SAFE_INTEGER?"MAX":l(T,{value:t.priority})),De=({scoreBy:t,node:e,children:n,...o})=>{let r=0;if(t.max!==t.min){let _=(e[t.field]-t.min)/(t.max-t.min);r=Math.round((ne.length-1)*_)}return l("div",{...o,className:`node ${o.className||""}`,style:{backgroundColor:ne[r].bg,color:ne[r].fg}},n)},Je=({scoreBy:t,node:e})=>l(De,{node:e,scoreBy:t,tabIndex:0,className:"node-text"},l(Fe,{node:e}),l("div",{className:"node-content"},e.value)),Le=({scoreBy:t,node:e,epoch:n})=>{let[o,r]=S(!1),_=EPOCHS.findIndex(i=>i.elements.some(f=>f.id===e.id));if(_===void 0)throw new Error(`epoch not found for ${e.id}`);let c=EPOCHS[_],a=EPOCHS.at(n),u=c.elements.find(i=>i.id===e.id).tokenBudget,s=e.type===1?e.name||e.role.slice(0,1).toUpperCase()+e.role.slice(1)+"Message":e.name,p=_===n?"new-in-epoch":n<_?"before-epoch":"";return l(De,{node:e,scoreBy:t,className:p},l(Fe,{node:e}),l("div",{className:"node-content node-toggler",onClick:()=>r(i=>!i)},l("span",null,a?.inNode===e.id?"\\u{1F3C3} ":"",`<${s}>`),l("span",{className:"indicator"},o?"[+]":"[-]")),n===_&&l("div",{className:"node-stats"},"Token Budget: ",l(T,{value:u})),a?.inNode===e.id&&l("div",{className:"node-stats"},"Rendering flexGrow=",a.flexValue,l("br",null),l("br",null),"Splitting"," ",a.reservedTokens?`${a.tokenBudget} - ${a.reservedTokens} (reserved) = `:"",l(T,{value:a.tokenBudget})," tokens among ",a.elements.length," ","elements"),!o&&l(Xe,{nodes:e.children,scoreBy:t,epoch:n}))},Pe=({scoreBy:t,node:e,epoch:n})=>{let o;return t==="tokens"?o={field:"tokens",max:e.tokens,min:0}:o={field:"priority",max:e.priority,min:e.priority},l(Le,{scoreBy:o,node:e,epoch:n})};var ze=({label:t,value:e,onChange:n,min:o,max:r})=>{let _=a=>{n(a.target.valueAsNumber)},c=`number-slider-${Math.random()}`;return l("div",{className:"controls-slider"},l("label",{htmlFor:c},t),l("input",{id:c,type:"range",min:o,max:r,value:e,onInput:_}),l("input",{type:"number",min:o,value:e,onInput:_,onChange:_}))},Qe=({scoreBy:t,onScoreByChange:e})=>{let n=o=>{let r=o.target.value;e(r)};return l("div",{className:"controls-scoreby"},"Visualize by",l("label",null,l("input",{type:"radio",name:"scoreBy",value:"tokens",checked:t==="tokens",onChange:n}),"Tokens"),l("label",null,l("input",{type:"radio",name:"scoreBy",value:"priority",checked:t==="priority",onChange:n}),"Priority"))},Ye=()=>{let[t,e]=S(DEFAULT_TOKENS),[n,o]=S(EPOCHS.length),[r,_]=S(DEFAULT_MODEL),[c,a]=S("tokens"),[u,s]=S("epoch"),p=He(async f=>{if(f===DEFAULT_TOKENS)return DEFAULT_MODEL;let b=await(await fetch(`${SERVER_ADDRESS}regen?n=${f}`)).json();_(b)},100),i=f=>{e(f),p(f),o(EPOCHS.length)};return l("div",{className:"app"},l("div",{className:"controls"},l("div",{className:"tabs"},l("div",{className:`tab ${u==="epoch"?"active":""}`,onClick:()=>s("epoch")},"View Order"),l("div",{className:`tab ${u==="tokens"?"active":""}`,onClick:()=>s("tokens")},"Change Token Budget")),l("div",{className:`tab-content ${u==="epoch"?"active":""}`},l(ze,{label:"Render Epoch",value:n,onChange:o,min:0,max:EPOCHS.length})),l("div",{className:`tab-content ${u==="tokens"?"active":""}`},l(ze,{label:"Token Budget",value:t,onChange:i,min:0,max:DEFAULT_TOKENS*2}))),l("div",{className:"control-description"},u==="tokens"?l("p",null,"Token changes here will prune elements and re-render Expandable ones, but the entire prompt is not being re-rendered"):l("p",null,"Changing the render epoch lets you see the order in which elements are rendered and how the token budget is allocated."),l("div",{className:"controls-stats"},l("span",null,"Used ",l(T,{value:r.container.tokens}),"/",l(T,{value:r.budget})," tokens"),l("span",null,"Removed ",l(T,{value:r.removed})," nodes"),l(Qe,{scoreBy:c,onScoreByChange:a}))),l(Pe,{node:r.container,scoreBy:c,epoch:n}))};ve(l(Ye,null),document.body);})();\n';GP.tracerCss=`body{font-family:-apple-system,BlinkMacSystemFont,Segoe WPC,Segoe UI,system-ui,Ubuntu,Droid Sans,sans-serif;background:#fff;margin:0}.render-pass{border-left:2px solid #ccc;&:hover{border-left-color:#000}}.literals li{white-space:pre;font-family:SF Mono,Monaco,Menlo,Consolas,Ubuntu Mono,Liberation Mono,DejaVu Sans Mono,Courier New,monospace}.render-flex,.render-element{padding-left:10px}.node{border:1px solid rgba(255,255,255,.5);margin:3px 10px;padding:3px 10px;border-radius:4px;width:fit-content;&.new-in-epoch{box-shadow:0 0 3px 2px red}&.before-epoch{pointer-events:none;filter:grayscale(1);color:#777!important;.node{color:#777!important}}&:last-child{margin-bottom:0}}.node-content{font-weight:700}.node-children{margin-left:20px;border-left:2px dashed rgba(255,255,255,.5);padding-left:10px}.node-toggler{cursor:pointer;display:flex;align-items:center;justify-content:space-between;.indicator{font-size:.7em}}.node-text{width:400px;&:focus,&:focus-within{outline:1px solid orange;.node-content{white-space:normal}}.node-content{font-weight:400;font-size:.8em;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}}.node-stats{font-family:SF Mono,Monaco,Menlo,Consolas,Ubuntu Mono,Liberation Mono,DejaVu Sans Mono,Courier New,monospace;font-size:.8em}.control-description{padding:10px;p{font-size:.9em;max-width:500px;margin-top:0}}.controls{display:flex;flex-direction:column;gap:10px;position:sticky;top:0;padding:10px;background:#fff;border-bottom:1px solid #ccc;z-index:1}.controls-slider{display:flex;align-items:center;gap:10px}.controls-stats{display:flex;gap:20px;list-style:none;padding:0;margin-top:0}.controls-scoreby{display:flex;gap:10px}.tabs{display:flex;border-bottom:1px solid #ccc;margin-bottom:10px}.tab{padding:10px;cursor:pointer;border:1px solid transparent;border-bottom:none}.tab.active{border-color:#ccc;border-bottom:1px solid #fff;background-color:#f9f9f9}.tab-content{display:none}.tab-content.active{display:block}
`});var ppt=m(jG=>{"use strict";Object.defineProperty(jG,"__esModule",{value:!0});jG.HTMLTracer=void 0;var lpt=cpt(),jb=I1e(),ozr=Ev(),cve=class{traceData;epochs=[];addRenderEpoch(e){this.epochs.push(e)}includeInEpoch(e){this.epochs[this.epochs.length-1].elements.push(e)}didMaterializeTree(e){this.traceData=e}async serveHTML(){return lve.create({epochs:this.epochs,traceData:dpt(this.traceData)})}serveRouter(e){return new FG({baseAddress:e,epochs:this.epochs,traceData:dpt(this.traceData)})}};jG.HTMLTracer=cve;var FG=class{opts;serverToken=crypto.randomUUID();constructor(e){this.opts=e}route(e,r){let n=e,o=r,s=new URL(n.url||"/","http://localhost"),a=`/${this.serverToken}`;switch(s.pathname){case a:case`${a}/`:this.onRoot(s,n,o);break;case`${a}/regen`:this.onRegen(s,n,o);break;default:return!1}return!0}get address(){return this.opts.baseAddress+"/"+this.serverToken}async getHTML(){let{traceData:e,epochs:r}=this.opts;return`<body>
			<style>${lpt.tracerCss}</style>
			<script>
				const DEFAULT_TOKENS = ${JSON.stringify(e.budget)};
				const EPOCHS = ${JSON.stringify(r)};
				const DEFAULT_MODEL = ${JSON.stringify(await upt(e.tokenizer,e.renderedTree))};
				const SERVER_ADDRESS = ${JSON.stringify(this.opts.baseAddress+"/"+this.serverToken+"/")};
				${lpt.tracerSrc}
			</script>
		</body>`}async onRegen(e,r,n){let{traceData:o}=this.opts,s=Number(e.searchParams.get("n")||o.budget),a=await o.renderTree(s),c=await upt(o.tokenizer,a),l=JSON.stringify(c);n.setHeader("Content-Type","application/json"),n.setHeader("Content-Length",Buffer.byteLength(l)),n.end(l)}onRoot(e,r,n){this.getHTML().then(o=>{n.setHeader("Content-Type","text/html"),n.setHeader("Content-Length",Buffer.byteLength(o)),n.end(o)})}},lve=class t extends FG{server;static async create(e){let{createServer:r}=await Promise.resolve().then(()=>require("http")),n=r((a,c)=>{try{s.route(a,c)||(c.statusCode=404,c.end("Not Found"))}catch(l){c.statusCode=500,c.end(String(l))}}),o=await new Promise((a,c)=>{n.listen(0,"127.0.0.1",()=>a(n.address().port)).on("error",c)}),s=new t({...e,baseAddress:`http://127.0.0.1:${o}`},n);return s}constructor(e,r){super(e),this.server=r}dispose(){this.server.closeAllConnections(),this.server.close()}};async function upt(t,e){return{container:await fpt(t,e.container,!1),removed:e.removed,budget:e.budget}}async function fpt(t,e,r){let n={metadata:e.metadata.map(azr),priority:e.priority};if(e instanceof jb.MaterializedChatMessageTextChunk)return{...n,type:2,value:e.text,tokens:await e.upperBoundTokenCount(t)};if(e instanceof jb.MaterializedChatMessageImage)return{...n,name:e.id.toString(),id:e.id,type:3,value:e.src,tokens:await e.upperBoundTokenCount(t)};if(e instanceof jb.MaterializedChatMessageOpaque||e instanceof jb.MaterializedChatMessageBreakpoint)return;{let o={...n,id:e.id,name:e.name,children:(await Promise.all(e.children.map(s=>fpt(t,s,r||e instanceof jb.MaterializedChatMessage)))).filter(s=>!!s),tokens:r?await e.upperBoundTokenCount(t):await e.tokenCount(t)};if(e instanceof jb.GenericMaterializedContainer)return{...o,type:0};if(e instanceof jb.MaterializedChatMessage){let s=e.text.filter(a=>typeof a=="string").join("").trim();return{...o,type:1,role:ozr.Raw.ChatRole.display(e.role),text:s}}}szr(e)}function szr(t){throw new Error("unreachable")}function azr(t){return{name:t.constructor.name,value:JSON.stringify(t)}}var dpt=t=>{if(t===void 0)throw new Error("Prompt must be rendered before calling HTMLTRacer.serveHTML");return t}});var mpt=m(hpt=>{"use strict";Object.defineProperty(hpt,"__esModule",{value:!0})});var _pt=m(gpt=>{"use strict";Object.defineProperty(gpt,"__esModule",{value:!0})});var ypt=m(vpt=>{"use strict";Object.defineProperty(vpt,"__esModule",{value:!0})});var ul=m(ui=>{"use strict";var czr=ui&&ui.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),Bb=ui&&ui.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&czr(e,t,r)};Object.defineProperty(ui,"__esModule",{value:!0});ui.contentType=ui.PromptRenderer=ui.MetadataMap=ui.PromptElement=ui.JSONTree=void 0;ui.renderPrompt=dzr;ui.renderElementJSON=fzr;var uve=Ev(),Ept=ove(),lzr=apt();Bb(ppt(),ui);ui.JSONTree=b1e();Bb(Ev(),ui);Bb(j1e(),ui);Bb(Q1e(),ui);Bb(mpt(),ui);Bb(_pt(),ui);Bb(ypt(),ui);var uzr=R1e();Object.defineProperty(ui,"PromptElement",{enumerable:!0,get:function(){return uzr.PromptElement}});var Tpt=ove();Object.defineProperty(ui,"MetadataMap",{enumerable:!0,get:function(){return Tpt.MetadataMap}});Object.defineProperty(ui,"PromptRenderer",{enumerable:!0,get:function(){return Tpt.PromptRenderer}});async function dzr(t,e,r,n,o,s,a=uve.OutputMode.VSCode){let c="countTokens"in n?new lzr.VSCodeTokenizer((f,p)=>n.countTokens(f,p),a):n,l=new Ept.PromptRenderer(r,t,e,c),u=await l.render(o,s),d=l.getUsedContext();return{...u,usedContext:d}}ui.contentType="application/vnd.codechat.prompt+json.1";function fzr(t,e,r,n){return new Ept.PromptRenderer({modelMaxPromptTokens:r?.tokenBudget??Number.MAX_SAFE_INTEGER},t,e,{mode:uve.OutputMode.Raw,countMessageTokens(s){throw new Error("Tools may only return text, not messages.")},tokenLength(s,a){return s.type===uve.Raw.ChatCompletionContentPartKind.Text?Promise.resolve(r?.countTokens(s.text,a)??Promise.resolve(1)):Promise.resolve(1)}}).renderElementJSON(n)}});var fve=m(dve=>{"use strict";Object.defineProperty(dve,"__esModule",{value:!0});dve.stringifyChatMessages=pzr;var BG=ul();function pzr(t){return t.map(hzr).join(`
`)}function hzr({role:t,content:e}){if(t!==BG.Raw.ChatRole.User&&t!==BG.Raw.ChatRole.System)return"omitted because of non-user and non-system role";let r=t===BG.Raw.ChatRole.User?"User":"System",n=e.at(0);return n?.type!==BG.Raw.ChatCompletionContentPartKind.Text?"omitted because of non-text content":`${r}
------
${n.text}
==================`}});var vve=m(pl=>{"use strict";Object.defineProperty(pl,"__esModule",{value:!0});pl.StatelessNextEditTelemetryBuilder=pl.StatelessNextEditResult=pl.NoNextEditReason=pl.FilteredOutReason=pl.StatelessNextEditDocument=pl.StatelessNextEditRequest=void 0;var Spt=jP(),pve=qi(),mzr=Ua(),gzr=Oh(),_zr=Wl(),vzr=up(),yzr=o0t(),Ezr=fve(),hve=class t{static{this.ID=0}get result(){return this._result.p}constructor(e,r,n,o,s,a,c,l,u,d,f,p){this.id=e,this.opportunityId=r,this.documentBeforeEdits=n,this.documents=o,this.activeDocumentIdx=s,this.xtabEditHistory=a,this.firstEdit=c,this.expandedEditWindowNLines=l,this.logContext=u,this.recordingBookmark=d,this.recording=f,this.providerRequestStartDateTime=p,this.seqid=String(++t.ID),this.cancellationTokenSource=new gzr.CancellationTokenSource,this.liveDependentants=0,this.fetchIssued=!1,this.intermediateUserEdit=_zr.StringEdit.empty,this._result=new mzr.DeferredPromise,(0,pve.assert)(o.length>0),(0,pve.assert)(s>=0&&s<o.length)}setResult(e){this._result.complete(e)}setResultError(e){this._result.error(e)}hasDocument(e){return this.documents.find(r=>r.id===e)!==void 0}getActiveDocument(){return this.documents[this.activeDocumentIdx]}serialize(){return{id:this.id,documents:this.documents.map(e=>e.serialize()),activeDocumentIdx:this.activeDocumentIdx,recording:this.recording}}toString(){return this.toMarkdown()}toMarkdown(){return`### StatelessNextEditRequest

${this.documents.map((r,n)=>` * [${n+1}/${this.documents.length}] ${n===this.activeDocumentIdx?"(active document) ":""}`+r.toMarkdown()).join(`

`)}`}};pl.StatelessNextEditRequest=hve;var mve=class{constructor(e,r,n,o,s,a,c,l=void 0){this.id=e,this.workspaceRoot=r,this.languageId=n,this.documentLinesBeforeEdit=o,this.recentEdit=s,this.documentBeforeEdits=a,this.recentEdits=c,this.lastSelectionInAfterEdit=l,this.documentAfterEdits=new vzr.StringText(this.recentEdits.apply(this.documentBeforeEdits.value)),this.documentAfterEditsLines=this.documentAfterEdits.getLines()}serialize(){return{id:this.id.uri,workspaceRoot:this.workspaceRoot?.toString(),languageId:this.languageId,documentLinesBeforeEdit:this.documentLinesBeforeEdit,recentEdit:this.recentEdit.serialize(),documentBeforeEdits:this.documentBeforeEdits.value,recentEdits:this.recentEdits.serialize(),lastSelectionInAfterEdit:this.lastSelectionInAfterEdit===void 0?void 0:(0,yzr.serializeOffsetRange)(this.lastSelectionInAfterEdit)}}toString(){return this.toMarkdown()}toMarkdown(){let e=[];return e.push(`StatelessNextEditDocument: **${this.id.uri}**
`),e.push("```patch"),e.push(this.recentEdit.humanReadablePatch(this.documentLinesBeforeEdit)),e.push("```"),e.push(""),e.join(`
`)}};pl.StatelessNextEditDocument=mve;var bpt;(function(t){t.LowLogProbSuggestions="lowLogProbSuggestions",t.EnforcingNextEditOptions="enforcingNextEditOptions",t.PromptTooLarge="promptTooLarge",t.Uncategorized="uncategorized"})(bpt||(pl.FilteredOutReason=bpt={}));var zp;(function(t){class e{}class r extends e{constructor(){super(...arguments),this.kind="activeDocumentHasNoEdits"}toString(){return this.kind}}t.ActiveDocumentHasNoEdits=r;class n extends e{constructor(f,p,h){super(),this.documentBeforeEdits=f,this.window=p,this.nextCursorPosition=h,this.kind="noSuggestions"}toString(){return this.kind}}t.NoSuggestions=n;class o extends e{constructor(f){super(),this.message=f,this.kind="gotCancelled"}toString(){return`${this.kind}:${this.message}`}}t.GotCancelled=o;class s extends e{constructor(f){super(),this.error=f,this.kind="fetchFailure"}toString(){return`${this.kind}:${this.error.message}`}}t.FetchFailure=s;class a extends e{constructor(f){super(),this.message=f,this.kind="filteredOut"}toString(){return`${this.kind}:${this.message}`}}t.FilteredOut=a;class c extends e{constructor(f){super(),this.message=f,this.kind="promptTooLarge"}toString(){return`${this.kind}:${this.message}`}}t.PromptTooLarge=c;class l extends e{constructor(f){super(),this.error=f,this.kind="uncategorized"}toString(){return`${this.kind}:${this.error.message}`}}t.Uncategorized=l;class u extends e{constructor(f){super(),this.error=f,this.kind="unexpected"}toString(){return`${this.kind}:${this.error.message}`}}t.Unexpected=u})(zp||(pl.NoNextEditReason=zp={}));var gve=class t{static noEdit(e,r){let n=Spt.Result.error(e),o=r.build(n);return new t(n,o)}static streaming(e){let r=Spt.Result.ok(void 0),n=e.build(r);return new t(r,n)}constructor(e,r){this.nextEdit=e,this.telemetry=r}};pl.StatelessNextEditResult=gve;var _ve=class{constructor(e){this._nextCursorPrediction={nextCursorLineError:void 0,nextCursorLineDistance:void 0},this.startTime=Date.now(),this.requestUuid=e.id}build(e){let n=Date.now()-this.startTime,o=this._prompt?JSON.stringify(this._prompt.map(({role:d,content:f})=>({role:d,content:f}))):void 0,s=this._prompt?(0,Ezr.stringifyChatMessages)(this._prompt):void 0,a=s?.split(`
`).length,c=s?.length,l=e.isOk()?void 0:e.err.kind,u;return e.isError()&&(e.err instanceof zp.ActiveDocumentHasNoEdits||e.err instanceof zp.NoSuggestions||(e.err instanceof zp.GotCancelled||e.err instanceof zp.FilteredOut||e.err instanceof zp.PromptTooLarge?u=e.err.message:e.err instanceof zp.FetchFailure||e.err instanceof zp.Uncategorized||e.err instanceof zp.Unexpected?u=e.err.error.stack?e.err.error.stack:e.err.error.message:(0,pve.assertNever)(e.err))),{hadStatelessNextEditProviderCall:!0,noNextEditReasonKind:l,noNextEditReasonMessage:u,statelessNextEditProviderDuration:n,logProbThreshold:this._logProbThreshold,mergeConflictExpanded:this._mergeConflictExpanded,nLinesOfCurrentFileInPrompt:this._nLinesOfCurrentFileInPrompt,modelName:this._modelName,prompt:o,promptLineCount:a,promptCharCount:c,isCursorAtEndOfLine:this._isCursorAtLineEnd,debounceTime:this._debounceTime,artificialDelay:this._artificialDelay,fetchStartedAt:this._fetchStartedAt,hadLowLogProbSuggestion:this._hadLowLogProbSuggestion,response:this._response,nEditsSuggested:this._nEditsSuggested,nextEditLogprob:this._nextEditLogProb,nextCursorPrediction:this._nextCursorPrediction,lineDistanceToMostRecentEdit:this._lineDistanceToMostRecentEdit}}setLogProbThreshold(e){return this._logProbThreshold=e,this}setMergeConflictExpanded(e){return this._mergeConflictExpanded=e,this}setHadLowLogProbSuggestion(e){return this._hadLowLogProbSuggestion=e,this}setNLinesOfCurrentFileInPrompt(e){return this._nLinesOfCurrentFileInPrompt=e,this}setModelName(e){return this._modelName=e,this}setPrompt(e){return this._prompt=e,this}setIsCursorAtLineEnd(e){return this._isCursorAtLineEnd=e,this}setDebounceTime(e){return this._debounceTime=e,this}setArtificialDelay(e){return this._artificialDelay=e,this}setFetchStartedAt(){return this._fetchStartedAt=Date.now(),this}get fetchStartedAt(){return this._fetchStartedAt}setResponse(e){return this._response=e.then(({response:r,ttft:n})=>{let o=Date.now()-this._fetchStartedAt,s=r.type;return{ttft:n,response:r,fetchTime:o,fetchResult:s}}),this}setNextEditLogProb(e){return this._nextEditLogProb=e,this}setNEditsSuggested(e){return this._nEditsSuggested=e,this}setLineDistanceToMostRecentEdit(e){return this._lineDistanceToMostRecentEdit=e,this}setNextCursorLineError(e){return this._nextCursorPrediction.nextCursorLineError=e,this}setNextCursorLineDistance(e){return this._nextCursorPrediction.nextCursorLineDistance=e,this}};pl.StatelessNextEditTelemetryBuilder=_ve});var Eve=m(zP=>{"use strict";Object.defineProperty(zP,"__esModule",{value:!0});zP.NullSnippyService=zP.ISnippyService=void 0;var Tzr=Qe();zP.ISnippyService=(0,Tzr.createServiceIdentifier)("ISnippyService");var yve=class{async handlePostInsertion(){}};zP.NullSnippyService=yve});var fg=m($G=>{"use strict";Object.defineProperty($G,"__esModule",{value:!0});$G.fromUnknown=bzr;$G.toString=Czr;var Szr=bj();function bzr(t){return t instanceof Error?t:typeof t=="string"?new Error(t):new Error(`An unexpected error occurred: ${(0,Szr.safeStringify)(t)}`)}function Czr(t){return t.stack?t.stack:t.message}});var aL=m(sL=>{"use strict";Object.defineProperty(sL,"__esModule",{value:!0});sL.Tracer=void 0;sL.createTracer=Azr;var VG=class t{constructor(e,r){this.section=e,this.logFn=r}trace(e,...r){this.logFn(this.argsToString(e,r))}argsToString(e,r){let n=r.length?` ${this.stringify(r)}`:"";return`[${this.sectionStr}] ${e}${n}`}sub(e,r){let n=this.subNoEntry(e,r);return n.trace("created"),n}subNoEntry(e,r){let n=this.createSubSection(e),o=r?.extraLog,s=o===void 0?this.logFn:c=>{this.logFn(c),o(c)};return new t(n,s)}throws(e,...r){let n=r.length?` ${this.stringify(r)}`:"";this.logFn(`[${this.sectionStr}] Throw: ${e||"void"}${n}`)}returns(e,...r){let n=r.length?` ${this.stringify(r)}`:"";this.logFn(`[${this.sectionStr}] Return: ${e||"void"}${n}`)}get sectionStr(){return Array.isArray(this.section)?this.section.join("]["):this.section}createSubSection(e){return Array.isArray(this.section)?this.section.concat(e):[this.section,...Array.isArray(e)?e:[e]]}stringify(e){function r(o){let s=o.toString();return s&&s!=="[object Object]"?s:o instanceof Error?o.stack||o.message:JSON.stringify(o,null,2)}if(!e)return JSON.stringify(e,null,2);if(typeof e=="string")return e;if(typeof e=="function")return e.name?`[Function: ${e.name}]`:"[Function]";if(Array.isArray(e))return`[${e.map(o=>this.stringify(o)).join(", ")}]`;if(typeof e=="object")return r(e);let n=e.toString();return n&&n!=="[object Object]"?n:r(e)}};sL.Tracer=VG;function Azr(t,e){return new VG(t,e)}});var bve=m(WP=>{"use strict";Object.defineProperty(WP,"__esModule",{value:!0});WP.MovedText=WP.LinesDiff=void 0;var Tve=class{constructor(e,r,n){this.changes=e,this.moves=r,this.hitTimeout=n}};WP.LinesDiff=Tve;var Sve=class t{constructor(e,r){this.lineRangeMapping=e,this.changes=r}flip(){return new t(this.lineRangeMapping.flip(),this.changes.map(e=>e.flip()))}};WP.MovedText=Sve});var GG=m(Qf=>{"use strict";Object.defineProperty(Qf,"__esModule",{value:!0});Qf.RangeMapping=Qf.DetailedLineRangeMapping=Qf.LineRangeMapping=void 0;Qf.lineRangeMappingFromRangeMappings=wzr;Qf.getLineRangeMapping=wpt;Qf.lineRangeMappingFromChange=Izr;var xzr=Ui(),Cpt=qi(),HG=Gr(),hl=um(),Yf=tf(),Wp=Ya(),xpt=NN(),cL=class t{static inverse(e,r,n){let o=[],s=1,a=1;for(let l of e){let u=new t(new hl.LineRange(s,l.original.startLineNumber),new hl.LineRange(a,l.modified.startLineNumber));u.modified.isEmpty||o.push(u),s=l.original.endLineNumberExclusive,a=l.modified.endLineNumberExclusive}let c=new t(new hl.LineRange(s,r+1),new hl.LineRange(a,n+1));return c.modified.isEmpty||o.push(c),o}static clip(e,r,n){let o=[];for(let s of e){let a=s.original.intersect(r),c=s.modified.intersect(n);a&&!a.isEmpty&&c&&!c.isEmpty&&o.push(new t(a,c))}return o}constructor(e,r){this.original=e,this.modified=r}toString(){return`{${this.original.toString()}->${this.modified.toString()}}`}flip(){return new t(this.modified,this.original)}join(e){return new t(this.original.join(e.original),this.modified.join(e.modified))}get changedLineCount(){return Math.max(this.original.length,this.modified.length)}toRangeMapping(){let e=this.original.toInclusiveRange(),r=this.modified.toInclusiveRange();if(e&&r)return new pg(e,r);if(this.original.startLineNumber===1||this.modified.startLineNumber===1){if(!(this.modified.startLineNumber===1&&this.original.startLineNumber===1))throw new HG.BugIndicatingError("not a valid diff");return new pg(new Wp.Range(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new Wp.Range(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1))}else return new pg(new Wp.Range(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),new Wp.Range(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER))}toRangeMapping2(e,r){if(Apt(this.original.endLineNumberExclusive,e)&&Apt(this.modified.endLineNumberExclusive,r))return new pg(new Wp.Range(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new Wp.Range(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1));if(!this.original.isEmpty&&!this.modified.isEmpty)return new pg(Wp.Range.fromPositions(new Yf.Position(this.original.startLineNumber,1),KP(new Yf.Position(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),Wp.Range.fromPositions(new Yf.Position(this.modified.startLineNumber,1),KP(new Yf.Position(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),r)));if(this.original.startLineNumber>1&&this.modified.startLineNumber>1)return new pg(Wp.Range.fromPositions(KP(new Yf.Position(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER),e),KP(new Yf.Position(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),Wp.Range.fromPositions(KP(new Yf.Position(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER),r),KP(new Yf.Position(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),r)));throw new HG.BugIndicatingError}};Qf.LineRangeMapping=cL;function KP(t,e){if(t.lineNumber<1)return new Yf.Position(1,1);if(t.lineNumber>e.length)return new Yf.Position(e.length,e[e.length-1].length+1);let r=e[t.lineNumber-1];return t.column>r.length+1?new Yf.Position(t.lineNumber,r.length+1):t}function Apt(t,e){return t>=1&&t<=e.length}var lL=class t extends cL{static toTextEdit(e,r){let n=[];for(let o of e)for(let s of o.innerChanges??[]){let a=s.toTextEdit(r);n.push(a)}return new xpt.TextEdit(n)}static fromRangeMappings(e){let r=hl.LineRange.join(e.map(o=>hl.LineRange.fromRangeInclusive(o.originalRange))),n=hl.LineRange.join(e.map(o=>hl.LineRange.fromRangeInclusive(o.modifiedRange)));return new t(r,n,e)}constructor(e,r,n){super(e,r),this.innerChanges=n}flip(){return new t(this.modified,this.original,this.innerChanges?.map(e=>e.flip()))}withInnerChangesFromLineRanges(){return new t(this.original,this.modified,[this.toRangeMapping()])}};Qf.DetailedLineRangeMapping=lL;var pg=class t{static fromEdit(e){let r=e.getNewRanges();return e.replacements.map((o,s)=>new t(o.range,r[s]))}static fromEditJoin(e){let r=e.getNewRanges(),n=e.replacements.map((o,s)=>new t(o.range,r[s]));return t.join(n)}static join(e){if(e.length===0)throw new HG.BugIndicatingError("Cannot join an empty list of range mappings");let r=e[0];for(let n=1;n<e.length;n++)r=r.join(e[n]);return r}static assertSorted(e){for(let r=1;r<e.length;r++){let n=e[r-1],o=e[r];if(!(n.originalRange.getEndPosition().isBeforeOrEqual(o.originalRange.getStartPosition())&&n.modifiedRange.getEndPosition().isBeforeOrEqual(o.modifiedRange.getStartPosition())))throw new HG.BugIndicatingError("Range mappings must be sorted")}}constructor(e,r){this.originalRange=e,this.modifiedRange=r}toString(){return`{${this.originalRange.toString()}->${this.modifiedRange.toString()}}`}flip(){return new t(this.modifiedRange,this.originalRange)}toTextEdit(e){let r=e.getValueOfRange(this.modifiedRange);return new xpt.TextReplacement(this.originalRange,r)}join(e){return new t(this.originalRange.plusRange(e.originalRange),this.modifiedRange.plusRange(e.modifiedRange))}};Qf.RangeMapping=pg;function wzr(t,e,r,n=!1){let o=[];for(let s of(0,xzr.groupAdjacentBy)(t.map(a=>wpt(a,e,r)),(a,c)=>a.original.intersectsOrTouches(c.original)||a.modified.intersectsOrTouches(c.modified))){let a=s[0],c=s[s.length-1];o.push(new lL(a.original.join(c.original),a.modified.join(c.modified),s.map(l=>l.innerChanges[0])))}return(0,Cpt.assertFn)(()=>!n&&o.length>0&&(o[0].modified.startLineNumber!==o[0].original.startLineNumber||r.length.lineCount-o[o.length-1].modified.endLineNumberExclusive!==e.length.lineCount-o[o.length-1].original.endLineNumberExclusive)?!1:(0,Cpt.checkAdjacentItems)(o,(s,a)=>a.original.startLineNumber-s.original.endLineNumberExclusive===a.modified.startLineNumber-s.modified.endLineNumberExclusive&&s.original.endLineNumberExclusive<a.original.startLineNumber&&s.modified.endLineNumberExclusive<a.modified.startLineNumber)),o}function wpt(t,e,r){let n=0,o=0;t.modifiedRange.endColumn===1&&t.originalRange.endColumn===1&&t.originalRange.startLineNumber+n<=t.originalRange.endLineNumber&&t.modifiedRange.startLineNumber+n<=t.modifiedRange.endLineNumber&&(o=-1),t.modifiedRange.startColumn-1>=r.getLineLength(t.modifiedRange.startLineNumber)&&t.originalRange.startColumn-1>=e.getLineLength(t.originalRange.startLineNumber)&&t.originalRange.startLineNumber<=t.originalRange.endLineNumber+o&&t.modifiedRange.startLineNumber<=t.modifiedRange.endLineNumber+o&&(n=1);let s=new hl.LineRange(t.originalRange.startLineNumber+n,t.originalRange.endLineNumber+1+o),a=new hl.LineRange(t.modifiedRange.startLineNumber+n,t.modifiedRange.endLineNumber+1+o);return new lL(s,a,[t])}function Izr(t){let e;t.originalEndLineNumber===0?e=new hl.LineRange(t.originalStartLineNumber+1,t.originalStartLineNumber+1):e=new hl.LineRange(t.originalStartLineNumber,t.originalEndLineNumber+1);let r;return t.modifiedEndLineNumber===0?r=new hl.LineRange(t.modifiedStartLineNumber+1,t.modifiedStartLineNumber+1):r=new hl.LineRange(t.modifiedStartLineNumber,t.modifiedEndLineNumber+1),new cL(e,r)}});var QP=m(gd=>{"use strict";Object.defineProperty(gd,"__esModule",{value:!0});gd.DateTimeout=gd.InfiniteTimeout=gd.OffsetPair=gd.SequenceDiff=gd.DiffAlgorithmResult=void 0;var Pzr=Ui(),Ipt=Gr(),YP=zi(),Cve=class t{static trivial(e,r){return new t([new uL(YP.OffsetRange.ofLength(e.length),YP.OffsetRange.ofLength(r.length))],!1)}static trivialTimedOut(e,r){return new t([new uL(YP.OffsetRange.ofLength(e.length),YP.OffsetRange.ofLength(r.length))],!0)}constructor(e,r){this.diffs=e,this.hitTimeout=r}};gd.DiffAlgorithmResult=Cve;var uL=class t{static invert(e,r){let n=[];return(0,Pzr.forEachAdjacent)(e,(o,s)=>{n.push(t.fromOffsetPairs(o?o.getEndExclusives():$b.zero,s?s.getStarts():new $b(r,(o?o.seq2Range.endExclusive-o.seq1Range.endExclusive:0)+r)))}),n}static fromOffsetPairs(e,r){return new t(new YP.OffsetRange(e.offset1,r.offset1),new YP.OffsetRange(e.offset2,r.offset2))}static assertSorted(e){let r;for(let n of e){if(r&&!(r.seq1Range.endExclusive<=n.seq1Range.start&&r.seq2Range.endExclusive<=n.seq2Range.start))throw new Ipt.BugIndicatingError("Sequence diffs must be sorted");r=n}}constructor(e,r){this.seq1Range=e,this.seq2Range=r}swap(){return new t(this.seq2Range,this.seq1Range)}toString(){return`${this.seq1Range} <-> ${this.seq2Range}`}join(e){return new t(this.seq1Range.join(e.seq1Range),this.seq2Range.join(e.seq2Range))}delta(e){return e===0?this:new t(this.seq1Range.delta(e),this.seq2Range.delta(e))}deltaStart(e){return e===0?this:new t(this.seq1Range.deltaStart(e),this.seq2Range.deltaStart(e))}deltaEnd(e){return e===0?this:new t(this.seq1Range.deltaEnd(e),this.seq2Range.deltaEnd(e))}intersectsOrTouches(e){return this.seq1Range.intersectsOrTouches(e.seq1Range)||this.seq2Range.intersectsOrTouches(e.seq2Range)}intersect(e){let r=this.seq1Range.intersect(e.seq1Range),n=this.seq2Range.intersect(e.seq2Range);if(!(!r||!n))return new t(r,n)}getStarts(){return new $b(this.seq1Range.start,this.seq2Range.start)}getEndExclusives(){return new $b(this.seq1Range.endExclusive,this.seq2Range.endExclusive)}};gd.SequenceDiff=uL;var $b=class t{static{this.zero=new t(0,0)}static{this.max=new t(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER)}constructor(e,r){this.offset1=e,this.offset2=r}toString(){return`${this.offset1} <-> ${this.offset2}`}delta(e){return e===0?this:new t(this.offset1+e,this.offset2+e)}equals(e){return this.offset1===e.offset1&&this.offset2===e.offset2}};gd.OffsetPair=$b;var Ave=class t{static{this.instance=new t}isValid(){return!0}};gd.InfiniteTimeout=Ave;var xve=class{constructor(e){if(this.timeout=e,this.startTime=Date.now(),this.valid=!0,e<=0)throw new Ipt.BugIndicatingError("timeout must be positive")}isValid(){return!(Date.now()-this.startTime<this.timeout)&&this.valid&&(this.valid=!1),this.valid}disable(){this.timeout=Number.MAX_SAFE_INTEGER,this.isValid=()=>!0,this.valid=!0}};gd.DateTimeout=xve});var zG=m(Vb=>{"use strict";Object.defineProperty(Vb,"__esModule",{value:!0});Vb.LineRangeFragment=Vb.Array2D=void 0;Vb.isSpace=Rzr;var wve=class{constructor(e,r){this.width=e,this.height=r,this.array=[],this.array=new Array(e*r)}get(e,r){return this.array[e+r*this.width]}set(e,r,n){this.array[e+r*this.width]=n}};Vb.Array2D=wve;function Rzr(t){return t===32||t===9}var Ive=class t{static{this.chrKeys=new Map}static getKey(e){let r=this.chrKeys.get(e);return r===void 0&&(r=this.chrKeys.size,this.chrKeys.set(e,r)),r}constructor(e,r,n){this.range=e,this.lines=r,this.source=n,this.histogram=[];let o=0;for(let s=e.startLineNumber-1;s<e.endLineNumberExclusive-1;s++){let a=r[s];for(let l=0;l<a.length;l++){o++;let u=a[l],d=t.getKey(u);this.histogram[d]=(this.histogram[d]||0)+1}o++;let c=t.getKey(`
`);this.histogram[c]=(this.histogram[c]||0)+1}this.totalCount=o}computeSimilarity(e){let r=0,n=Math.max(this.histogram.length,e.histogram.length);for(let o=0;o<n;o++)r+=Math.abs((this.histogram[o]??0)-(e.histogram[o]??0));return 1-r/(this.totalCount+e.totalCount)}};Vb.LineRangeFragment=Ive});var Rpt=m(WG=>{"use strict";Object.defineProperty(WG,"__esModule",{value:!0});WG.DynamicProgrammingDiffing=void 0;var Ppt=zi(),dL=QP(),Pve=zG(),Rve=class{compute(e,r,n=dL.InfiniteTimeout.instance,o){if(e.length===0||r.length===0)return dL.DiffAlgorithmResult.trivial(e,r);let s=new Pve.Array2D(e.length,r.length),a=new Pve.Array2D(e.length,r.length),c=new Pve.Array2D(e.length,r.length);for(let _=0;_<e.length;_++)for(let g=0;g<r.length;g++){if(!n.isValid())return dL.DiffAlgorithmResult.trivialTimedOut(e,r);let v=_===0?0:s.get(_-1,g),E=g===0?0:s.get(_,g-1),y;e.getElement(_)===r.getElement(g)?(_===0||g===0?y=0:y=s.get(_-1,g-1),_>0&&g>0&&a.get(_-1,g-1)===3&&(y+=c.get(_-1,g-1)),y+=o?o(_,g):1):y=-1;let S=Math.max(v,E,y);if(S===y){let b=_>0&&g>0?c.get(_-1,g-1):0;c.set(_,g,b+1),a.set(_,g,3)}else S===v?(c.set(_,g,0),a.set(_,g,1)):S===E&&(c.set(_,g,0),a.set(_,g,2));s.set(_,g,S)}let l=[],u=e.length,d=r.length;function f(_,g){(_+1!==u||g+1!==d)&&l.push(new dL.SequenceDiff(new Ppt.OffsetRange(_+1,u),new Ppt.OffsetRange(g+1,d))),u=_,d=g}let p=e.length-1,h=r.length-1;for(;p>=0&&h>=0;)a.get(p,h)===3?(f(p,h),p--,h--):a.get(p,h)===1?p--:h--;return f(-1,-1),l.reverse(),new dL.DiffAlgorithmResult(l,!1)}};WG.DynamicProgrammingDiffing=Rve});var Lve=m(YG=>{"use strict";Object.defineProperty(YG,"__esModule",{value:!0});YG.MyersDiffAlgorithm=void 0;var Opt=zi(),fL=QP(),Ove=class{compute(e,r,n=fL.InfiniteTimeout.instance){if(e.length===0||r.length===0)return fL.DiffAlgorithmResult.trivial(e,r);let o=e,s=r;function a(g,v){for(;g<o.length&&v<s.length&&o.getElement(g)===s.getElement(v);)g++,v++;return g}let c=0,l=new Mve;l.set(0,a(0,0));let u=new Nve;u.set(0,l.get(0)===0?null:new KG(null,0,0,l.get(0)));let d=0;e:for(;;){if(c++,!n.isValid())return fL.DiffAlgorithmResult.trivialTimedOut(o,s);let g=-Math.min(c,s.length+c%2),v=Math.min(c,o.length+c%2);for(d=g;d<=v;d+=2){let E=0,y=d===v?-1:l.get(d+1),S=d===g?-1:l.get(d-1)+1;E++;let b=Math.min(Math.max(y,S),o.length),w=b-d;if(E++,b>o.length||w>s.length)continue;let P=a(b,w);l.set(d,P);let A=b===y?u.get(d+1):u.get(d-1);if(u.set(d,P!==b?new KG(A,b,w,P-b):A),l.get(d)===o.length&&l.get(d)-d===s.length)break e}}let f=u.get(d),p=[],h=o.length,_=s.length;for(;;){let g=f?f.x+f.length:0,v=f?f.y+f.length:0;if((g!==h||v!==_)&&p.push(new fL.SequenceDiff(new Opt.OffsetRange(g,h),new Opt.OffsetRange(v,_))),!f)break;h=f.x,_=f.y,f=f.prev}return p.reverse(),new fL.DiffAlgorithmResult(p,!1)}};YG.MyersDiffAlgorithm=Ove;var KG=class{constructor(e,r,n,o){this.prev=e,this.x=r,this.y=n,this.length=o}},Mve=class{constructor(){this.positiveArr=new Int32Array(10),this.negativeArr=new Int32Array(10)}get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,r){if(e<0){if(e=-e-1,e>=this.negativeArr.length){let n=this.negativeArr;this.negativeArr=new Int32Array(n.length*2),this.negativeArr.set(n)}this.negativeArr[e]=r}else{if(e>=this.positiveArr.length){let n=this.positiveArr;this.positiveArr=new Int32Array(n.length*2),this.positiveArr.set(n)}this.positiveArr[e]=r}}},Nve=class{constructor(){this.positiveArr=[],this.negativeArr=[]}get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,r){e<0?(e=-e-1,this.negativeArr[e]=r):this.positiveArr[e]=r}}});var Uve=m(ZG=>{"use strict";Object.defineProperty(ZG,"__esModule",{value:!0});ZG.LinesSliceCharSequence=void 0;var kve=u_(),QG=zi(),Ozr=tf(),Mpt=Ya(),Mzr=zG(),Dve=class{constructor(e,r,n){this.lines=e,this.range=r,this.considerWhitespaceChanges=n,this.elements=[],this.firstElementOffsetByLineIdx=[],this.lineStartOffsets=[],this.trimmedWsLengthsByLineIdx=[],this.firstElementOffsetByLineIdx.push(0);for(let o=this.range.startLineNumber;o<=this.range.endLineNumber;o++){let s=e[o-1],a=0;o===this.range.startLineNumber&&this.range.startColumn>1&&(a=this.range.startColumn-1,s=s.substring(a)),this.lineStartOffsets.push(a);let c=0;if(!n){let u=s.trimStart();c=s.length-u.length,s=u.trimEnd()}this.trimmedWsLengthsByLineIdx.push(c);let l=o===this.range.endLineNumber?Math.min(this.range.endColumn-1-a-c,s.length):s.length;for(let u=0;u<l;u++)this.elements.push(s.charCodeAt(u));o<this.range.endLineNumber&&(this.elements.push(10),this.firstElementOffsetByLineIdx.push(this.elements.length))}}toString(){return`Slice: "${this.text}"`}get text(){return this.getText(new QG.OffsetRange(0,this.length))}getText(e){return this.elements.slice(e.start,e.endExclusive).map(r=>String.fromCharCode(r)).join("")}getElement(e){return this.elements[e]}get length(){return this.elements.length}getBoundaryScore(e){let r=kpt(e>0?this.elements[e-1]:-1),n=kpt(e<this.elements.length?this.elements[e]:-1);if(r===7&&n===8)return 0;if(r===8)return 150;let o=0;return r!==n&&(o+=10,r===0&&n===1&&(o+=1)),o+=Lpt(r),o+=Lpt(n),o}translateOffset(e,r="right"){let n=(0,kve.findLastIdxMonotonous)(this.firstElementOffsetByLineIdx,s=>s<=e),o=e-this.firstElementOffsetByLineIdx[n];return new Ozr.Position(this.range.startLineNumber+n,1+this.lineStartOffsets[n]+o+(o===0&&r==="left"?0:this.trimmedWsLengthsByLineIdx[n]))}translateRange(e){let r=this.translateOffset(e.start,"right"),n=this.translateOffset(e.endExclusive,"left");return n.isBefore(r)?Mpt.Range.fromPositions(n,n):Mpt.Range.fromPositions(r,n)}findWordContaining(e){if(e<0||e>=this.elements.length||!ZP(this.elements[e]))return;let r=e;for(;r>0&&ZP(this.elements[r-1]);)r--;let n=e;for(;n<this.elements.length&&ZP(this.elements[n]);)n++;return new QG.OffsetRange(r,n)}findSubWordContaining(e){if(e<0||e>=this.elements.length||!ZP(this.elements[e]))return;let r=e;for(;r>0&&ZP(this.elements[r-1])&&!Npt(this.elements[r]);)r--;let n=e;for(;n<this.elements.length&&ZP(this.elements[n])&&!Npt(this.elements[n]);)n++;return new QG.OffsetRange(r,n)}countLinesIn(e){return this.translateOffset(e.endExclusive).lineNumber-this.translateOffset(e.start).lineNumber}isStronglyEqual(e,r){return this.elements[e]===this.elements[r]}extendToFullLines(e){let r=(0,kve.findLastMonotonous)(this.firstElementOffsetByLineIdx,o=>o<=e.start)??0,n=(0,kve.findFirstMonotonous)(this.firstElementOffsetByLineIdx,o=>e.endExclusive<=o)??this.elements.length;return new QG.OffsetRange(r,n)}};ZG.LinesSliceCharSequence=Dve;function ZP(t){return t>=97&&t<=122||t>=65&&t<=90||t>=48&&t<=57}function Npt(t){return t>=65&&t<=90}var Nzr={0:0,1:0,2:0,3:10,4:2,5:30,6:3,7:10,8:10};function Lpt(t){return Nzr[t]}function kpt(t){return t===10?8:t===13?7:(0,Mzr.isSpace)(t)?6:t>=97&&t<=122?0:t>=65&&t<=90?1:t>=48&&t<=57?2:t===-1?3:t===44||t===59?5:4}});var Fpt=m(qve=>{"use strict";Object.defineProperty(qve,"__esModule",{value:!0});qve.computeMovedLines=Uzr;var Lzr=QP(),JG=GG(),Kp=Ui(),pL=u_(),kzr=f_(),ml=um(),Dpt=Uve(),XG=zG(),Dzr=Lve(),Upt=Ya();function Uzr(t,e,r,n,o,s){let{moves:a,excludedChanges:c}=Fzr(t,e,r,s);if(!s.isValid())return[];let l=t.filter(d=>!c.has(d)),u=jzr(l,n,o,e,r,s);return(0,Kp.pushMany)(a,u),a=Bzr(a),a=a.filter(d=>{let f=d.original.toOffsetRange().slice(e).map(h=>h.trim());return f.join(`
`).length>=15&&qzr(f,h=>h.length>=2)>=2}),a=$zr(t,a),a}function qzr(t,e){let r=0;for(let n of t)e(n)&&r++;return r}function Fzr(t,e,r,n){let o=[],s=t.filter(l=>l.modified.isEmpty&&l.original.length>=3).map(l=>new XG.LineRangeFragment(l.original,e,l)),a=new Set(t.filter(l=>l.original.isEmpty&&l.modified.length>=3).map(l=>new XG.LineRangeFragment(l.modified,r,l))),c=new Set;for(let l of s){let u=-1,d;for(let f of a){let p=l.computeSimilarity(f);p>u&&(u=p,d=f)}if(u>.9&&d&&(a.delete(d),o.push(new JG.LineRangeMapping(l.range,d.range)),c.add(l.source),c.add(d.source)),!n.isValid())return{moves:o,excludedChanges:c}}return{moves:o,excludedChanges:c}}function jzr(t,e,r,n,o,s){let a=[],c=new kzr.SetMap;for(let p of t)for(let h=p.original.startLineNumber;h<p.original.endLineNumberExclusive-2;h++){let _=`${e[h-1]}:${e[h+1-1]}:${e[h+2-1]}`;c.add(_,{range:new ml.LineRange(h,h+3)})}let l=[];t.sort((0,Kp.compareBy)(p=>p.modified.startLineNumber,Kp.numberComparator));for(let p of t){let h=[];for(let _=p.modified.startLineNumber;_<p.modified.endLineNumberExclusive-2;_++){let g=`${r[_-1]}:${r[_+1-1]}:${r[_+2-1]}`,v=new ml.LineRange(_,_+3),E=[];c.forEach(g,({range:y})=>{for(let b of h)if(b.originalLineRange.endLineNumberExclusive+1===y.endLineNumberExclusive&&b.modifiedLineRange.endLineNumberExclusive+1===v.endLineNumberExclusive){b.originalLineRange=new ml.LineRange(b.originalLineRange.startLineNumber,y.endLineNumberExclusive),b.modifiedLineRange=new ml.LineRange(b.modifiedLineRange.startLineNumber,v.endLineNumberExclusive),E.push(b);return}let S={modifiedLineRange:v,originalLineRange:y};l.push(S),E.push(S)}),h=E}if(!s.isValid())return[]}l.sort((0,Kp.reverseOrder)((0,Kp.compareBy)(p=>p.modifiedLineRange.length,Kp.numberComparator)));let u=new ml.LineRangeSet,d=new ml.LineRangeSet;for(let p of l){let h=p.modifiedLineRange.startLineNumber-p.originalLineRange.startLineNumber,_=u.subtractFrom(p.modifiedLineRange),g=d.subtractFrom(p.originalLineRange).getWithDelta(h),v=_.getIntersection(g);for(let E of v.ranges){if(E.length<3)continue;let y=E,S=E.delta(-h);a.push(new JG.LineRangeMapping(S,y)),u.addRange(y),d.addRange(S)}}a.sort((0,Kp.compareBy)(p=>p.original.startLineNumber,Kp.numberComparator));let f=new pL.MonotonousArray(t);for(let p=0;p<a.length;p++){let h=a[p],_=f.findLastMonotonous(P=>P.original.startLineNumber<=h.original.startLineNumber),g=(0,pL.findLastMonotonous)(t,P=>P.modified.startLineNumber<=h.modified.startLineNumber),v=Math.max(h.original.startLineNumber-_.original.startLineNumber,h.modified.startLineNumber-g.modified.startLineNumber),E=f.findLastMonotonous(P=>P.original.startLineNumber<h.original.endLineNumberExclusive),y=(0,pL.findLastMonotonous)(t,P=>P.modified.startLineNumber<h.modified.endLineNumberExclusive),S=Math.max(E.original.endLineNumberExclusive-h.original.endLineNumberExclusive,y.modified.endLineNumberExclusive-h.modified.endLineNumberExclusive),b;for(b=0;b<v;b++){let P=h.original.startLineNumber-b-1,A=h.modified.startLineNumber-b-1;if(P>n.length||A>o.length||u.contains(A)||d.contains(P)||!qpt(n[P-1],o[A-1],s))break}b>0&&(d.addRange(new ml.LineRange(h.original.startLineNumber-b,h.original.startLineNumber)),u.addRange(new ml.LineRange(h.modified.startLineNumber-b,h.modified.startLineNumber)));let w;for(w=0;w<S;w++){let P=h.original.endLineNumberExclusive+w,A=h.modified.endLineNumberExclusive+w;if(P>n.length||A>o.length||u.contains(A)||d.contains(P)||!qpt(n[P-1],o[A-1],s))break}w>0&&(d.addRange(new ml.LineRange(h.original.endLineNumberExclusive,h.original.endLineNumberExclusive+w)),u.addRange(new ml.LineRange(h.modified.endLineNumberExclusive,h.modified.endLineNumberExclusive+w))),(b>0||w>0)&&(a[p]=new JG.LineRangeMapping(new ml.LineRange(h.original.startLineNumber-b,h.original.endLineNumberExclusive+w),new ml.LineRange(h.modified.startLineNumber-b,h.modified.endLineNumberExclusive+w)))}return a}function qpt(t,e,r){if(t.trim()===e.trim())return!0;if(t.length>300&&e.length>300)return!1;let o=new Dzr.MyersDiffAlgorithm().compute(new Dpt.LinesSliceCharSequence([t],new Upt.Range(1,1,1,t.length),!1),new Dpt.LinesSliceCharSequence([e],new Upt.Range(1,1,1,e.length),!1),r),s=0,a=Lzr.SequenceDiff.invert(o.diffs,t.length);for(let d of a)d.seq1Range.forEach(f=>{(0,XG.isSpace)(t.charCodeAt(f))||s++});function c(d){let f=0;for(let p=0;p<t.length;p++)(0,XG.isSpace)(d.charCodeAt(p))||f++;return f}let l=c(t.length>e.length?t:e);return s/l>.6&&l>10}function Bzr(t){if(t.length===0)return t;t.sort((0,Kp.compareBy)(r=>r.original.startLineNumber,Kp.numberComparator));let e=[t[0]];for(let r=1;r<t.length;r++){let n=e[e.length-1],o=t[r],s=o.original.startLineNumber-n.original.endLineNumberExclusive,a=o.modified.startLineNumber-n.modified.endLineNumberExclusive;if(s>=0&&a>=0&&s+a<=2){e[e.length-1]=n.join(o);continue}e.push(o)}return e}function $zr(t,e){let r=new pL.MonotonousArray(t);return e=e.filter(n=>{let o=r.findLastMonotonous(c=>c.original.startLineNumber<n.original.endLineNumberExclusive)||new JG.LineRangeMapping(new ml.LineRange(1,1),new ml.LineRange(1,1)),s=(0,pL.findLastMonotonous)(t,c=>c.modified.startLineNumber<n.modified.endLineNumberExclusive);return o!==s}),e}});var $pt=m(Hb=>{"use strict";Object.defineProperty(Hb,"__esModule",{value:!0});Hb.optimizeSequenceDiffs=Hzr;Hb.removeShortMatches=zzr;Hb.extendDiffsToEntireWordIfAppropriate=Wzr;Hb.removeVeryShortMatchingLinesBetweenDiffs=Yzr;Hb.removeVeryShortMatchingTextBetweenLongDiffs=Qzr;var Vzr=Ui(),Yp=zi(),Qp=QP();function Hzr(t,e,r){let n=r;return n=jpt(t,e,n),n=jpt(t,e,n),n=Gzr(t,e,n),n}function jpt(t,e,r){if(r.length===0)return r;let n=[];n.push(r[0]);for(let s=1;s<r.length;s++){let a=n[n.length-1],c=r[s];if(c.seq1Range.isEmpty||c.seq2Range.isEmpty){let l=c.seq1Range.start-a.seq1Range.endExclusive,u;for(u=1;u<=l&&!(t.getElement(c.seq1Range.start-u)!==t.getElement(c.seq1Range.endExclusive-u)||e.getElement(c.seq2Range.start-u)!==e.getElement(c.seq2Range.endExclusive-u));u++);if(u--,u===l){n[n.length-1]=new Qp.SequenceDiff(new Yp.OffsetRange(a.seq1Range.start,c.seq1Range.endExclusive-l),new Yp.OffsetRange(a.seq2Range.start,c.seq2Range.endExclusive-l));continue}c=c.delta(-u)}n.push(c)}let o=[];for(let s=0;s<n.length-1;s++){let a=n[s+1],c=n[s];if(c.seq1Range.isEmpty||c.seq2Range.isEmpty){let l=a.seq1Range.start-c.seq1Range.endExclusive,u;for(u=0;u<l&&!(!t.isStronglyEqual(c.seq1Range.start+u,c.seq1Range.endExclusive+u)||!e.isStronglyEqual(c.seq2Range.start+u,c.seq2Range.endExclusive+u));u++);if(u===l){n[s+1]=new Qp.SequenceDiff(new Yp.OffsetRange(c.seq1Range.start+l,a.seq1Range.endExclusive),new Yp.OffsetRange(c.seq2Range.start+l,a.seq2Range.endExclusive));continue}u>0&&(c=c.delta(u))}o.push(c)}return n.length>0&&o.push(n[n.length-1]),o}function Gzr(t,e,r){if(!t.getBoundaryScore||!e.getBoundaryScore)return r;for(let n=0;n<r.length;n++){let o=n>0?r[n-1]:void 0,s=r[n],a=n+1<r.length?r[n+1]:void 0,c=new Yp.OffsetRange(o?o.seq1Range.endExclusive+1:0,a?a.seq1Range.start-1:t.length),l=new Yp.OffsetRange(o?o.seq2Range.endExclusive+1:0,a?a.seq2Range.start-1:e.length);s.seq1Range.isEmpty?r[n]=Bpt(s,t,e,c,l):s.seq2Range.isEmpty&&(r[n]=Bpt(s.swap(),e,t,l,c).swap())}return r}function Bpt(t,e,r,n,o){let a=1;for(;t.seq1Range.start-a>=n.start&&t.seq2Range.start-a>=o.start&&r.isStronglyEqual(t.seq2Range.start-a,t.seq2Range.endExclusive-a)&&a<100;)a++;a--;let c=0;for(;t.seq1Range.start+c<n.endExclusive&&t.seq2Range.endExclusive+c<o.endExclusive&&r.isStronglyEqual(t.seq2Range.start+c,t.seq2Range.endExclusive+c)&&c<100;)c++;if(a===0&&c===0)return t;let l=0,u=-1;for(let d=-a;d<=c;d++){let f=t.seq2Range.start+d,p=t.seq2Range.endExclusive+d,h=t.seq1Range.start+d,_=e.getBoundaryScore(h)+r.getBoundaryScore(f)+r.getBoundaryScore(p);_>u&&(u=_,l=d)}return t.delta(l)}function zzr(t,e,r){let n=[];for(let o of r){let s=n[n.length-1];if(!s){n.push(o);continue}o.seq1Range.start-s.seq1Range.endExclusive<=2||o.seq2Range.start-s.seq2Range.endExclusive<=2?n[n.length-1]=new Qp.SequenceDiff(s.seq1Range.join(o.seq1Range),s.seq2Range.join(o.seq2Range)):n.push(o)}return n}function Wzr(t,e,r,n,o=!1){let s=Qp.SequenceDiff.invert(r,t.length),a=[],c=new Qp.OffsetPair(0,0);function l(d,f){if(d.offset1<c.offset1||d.offset2<c.offset2)return;let p=n(t,d.offset1),h=n(e,d.offset2);if(!p||!h)return;let _=new Qp.SequenceDiff(p,h),g=_.intersect(f),v=g.seq1Range.length,E=g.seq2Range.length;for(;s.length>0;){let y=s[0];if(!(y.seq1Range.intersects(_.seq1Range)||y.seq2Range.intersects(_.seq2Range)))break;let b=n(t,y.seq1Range.start),w=n(e,y.seq2Range.start),P=new Qp.SequenceDiff(b,w),A=P.intersect(y);if(v+=A.seq1Range.length,E+=A.seq2Range.length,_=_.join(P),_.seq1Range.endExclusive>=y.seq1Range.endExclusive)s.shift();else break}(o&&v+E<_.seq1Range.length+_.seq2Range.length||v+E<(_.seq1Range.length+_.seq2Range.length)*2/3)&&a.push(_),c=_.getEndExclusives()}for(;s.length>0;){let d=s.shift();d.seq1Range.isEmpty||(l(d.getStarts(),d),l(d.getEndExclusives().delta(-1),d))}return Kzr(r,a)}function Kzr(t,e){let r=[];for(;t.length>0||e.length>0;){let n=t[0],o=e[0],s;n&&(!o||n.seq1Range.start<o.seq1Range.start)?s=t.shift():s=e.shift(),r.length>0&&r[r.length-1].seq1Range.endExclusive>=s.seq1Range.start?r[r.length-1]=r[r.length-1].join(s):r.push(s)}return r}function Yzr(t,e,r){let n=r;if(n.length===0)return n;let o=0,s;do{s=!1;let a=[n[0]];for(let c=1;c<n.length;c++){let d=function(p,h){let _=new Yp.OffsetRange(u.seq1Range.endExclusive,l.seq1Range.start);return t.getText(_).replace(/\s/g,"").length<=4&&(p.seq1Range.length+p.seq2Range.length>5||h.seq1Range.length+h.seq2Range.length>5)},l=n[c],u=a[a.length-1];d(u,l)?(s=!0,a[a.length-1]=a[a.length-1].join(l)):a.push(l)}n=a}while(o++<10&&s);return n}function Qzr(t,e,r){let n=r;if(n.length===0)return n;let o=0,s;do{s=!1;let c=[n[0]];for(let l=1;l<n.length;l++){let f=function(h,_){let g=new Yp.OffsetRange(d.seq1Range.endExclusive,u.seq1Range.start);if(t.countLinesIn(g)>5||g.length>500)return!1;let E=t.getText(g).trim();if(E.length>20||E.split(/\r\n|\r|\n/).length>1)return!1;let y=t.countLinesIn(h.seq1Range),S=h.seq1Range.length,b=e.countLinesIn(h.seq2Range),w=h.seq2Range.length,P=t.countLinesIn(_.seq1Range),A=_.seq1Range.length,O=e.countLinesIn(_.seq2Range),L=_.seq2Range.length,j=130;function $(Q){return Math.min(Q,j)}return Math.pow(Math.pow($(y*40+S),1.5)+Math.pow($(b*40+w),1.5),1.5)+Math.pow(Math.pow($(P*40+A),1.5)+Math.pow($(O*40+L),1.5),1.5)>(j**1.5)**1.5*1.3},u=n[l],d=c[c.length-1];f(d,u)?(s=!0,c[c.length-1]=c[c.length-1].join(u)):c.push(u)}n=c}while(o++<10&&s);let a=[];return(0,Vzr.forEachWithNeighbors)(n,(c,l,u)=>{let d=l;function f(E){return E.length>0&&E.trim().length<=3&&l.seq1Range.length+l.seq2Range.length>100}let p=t.extendToFullLines(l.seq1Range),h=t.getText(new Yp.OffsetRange(p.start,l.seq1Range.start));f(h)&&(d=d.deltaStart(-h.length));let _=t.getText(new Yp.OffsetRange(l.seq1Range.endExclusive,p.endExclusive));f(_)&&(d=d.deltaEnd(_.length));let g=Qp.SequenceDiff.fromOffsetPairs(c?c.getEndExclusives():Qp.OffsetPair.zero,u?u.getStarts():Qp.OffsetPair.max),v=d.intersect(g);a.length>0&&v.getStarts().equals(a[a.length-1].getEndExclusives())?a[a.length-1]=a[a.length-1].join(v):a.push(v)}),a}});var Hpt=m(ez=>{"use strict";Object.defineProperty(ez,"__esModule",{value:!0});ez.LineSequence=void 0;var Fve=class{constructor(e,r){this.trimmedHash=e,this.lines=r}getElement(e){return this.trimmedHash[e]}get length(){return this.trimmedHash.length}getBoundaryScore(e){let r=e===0?0:Vpt(this.lines[e-1]),n=e===this.lines.length?0:Vpt(this.lines[e]);return 1e3-(r+n)}getText(e){return this.lines.slice(e.start,e.endExclusive).join(`
`)}isStronglyEqual(e,r){return this.lines[e]===this.lines[r]}};ez.LineSequence=Fve;function Vpt(t){let e=0;for(;e<t.length&&(t.charCodeAt(e)===32||t.charCodeAt(e)===9);)e++;return e}});var Bve=m(iz=>{"use strict";Object.defineProperty(iz,"__esModule",{value:!0});iz.DefaultLinesDiffComputer=void 0;var Zzr=Ui(),Gpt=qi(),nz=um(),zpt=zi(),Wpt=Ya(),tz=up(),rz=bve(),zb=GG(),Zp=QP(),Jzr=Rpt(),Xzr=Lve(),eWr=Fpt(),Gb=$pt(),Kpt=Hpt(),Ypt=Uve(),jve=class{constructor(){this.dynamicProgrammingDiffing=new Jzr.DynamicProgrammingDiffing,this.myersDiffingAlgorithm=new Xzr.MyersDiffAlgorithm}computeDiff(e,r,n){if(e.length<=1&&(0,Zzr.equals)(e,r,(A,O)=>A===O))return new rz.LinesDiff([],[],!1);if(e.length===1&&e[0].length===0||r.length===1&&r[0].length===0)return new rz.LinesDiff([new zb.DetailedLineRangeMapping(new nz.LineRange(1,e.length+1),new nz.LineRange(1,r.length+1),[new zb.RangeMapping(new Wpt.Range(1,1,e.length,e[e.length-1].length+1),new Wpt.Range(1,1,r.length,r[r.length-1].length+1))])],[],!1);let o=n.maxComputationTimeMs===0?Zp.InfiniteTimeout.instance:new Zp.DateTimeout(n.maxComputationTimeMs),s=!n.ignoreTrimWhitespace,a=new Map;function c(A){let O=a.get(A);return O===void 0&&(O=a.size,a.set(A,O)),O}let l=e.map(A=>c(A.trim())),u=r.map(A=>c(A.trim())),d=new Kpt.LineSequence(l,e),f=new Kpt.LineSequence(u,r),p=d.length+f.length<1700?this.dynamicProgrammingDiffing.compute(d,f,o,(A,O)=>e[A]===r[O]?r[O].length===0?.1:1+Math.log(1+r[O].length):.99):this.myersDiffingAlgorithm.compute(d,f,o),h=p.diffs,_=p.hitTimeout;h=(0,Gb.optimizeSequenceDiffs)(d,f,h),h=(0,Gb.removeVeryShortMatchingLinesBetweenDiffs)(d,f,h);let g=[],v=A=>{if(s)for(let O=0;O<A;O++){let L=E+O,j=y+O;if(e[L]!==r[j]){let $=this.refineDiff(e,r,new Zp.SequenceDiff(new zpt.OffsetRange(L,L+1),new zpt.OffsetRange(j,j+1)),o,s,n);for(let Q of $.mappings)g.push(Q);$.hitTimeout&&(_=!0)}}},E=0,y=0;for(let A of h){(0,Gpt.assertFn)(()=>A.seq1Range.start-E===A.seq2Range.start-y);let O=A.seq1Range.start-E;v(O),E=A.seq1Range.endExclusive,y=A.seq2Range.endExclusive;let L=this.refineDiff(e,r,A,o,s,n);L.hitTimeout&&(_=!0);for(let j of L.mappings)g.push(j)}v(e.length-E);let S=new tz.ArrayText(e),b=new tz.ArrayText(r),w=(0,zb.lineRangeMappingFromRangeMappings)(g,S,b),P=[];return n.computeMoves&&(P=this.computeMoves(w,e,r,l,u,o,s,n)),(0,Gpt.assertFn)(()=>{function A(L,j){if(L.lineNumber<1||L.lineNumber>j.length)return!1;let $=j[L.lineNumber-1];return!(L.column<1||L.column>$.length+1)}function O(L,j){return!(L.startLineNumber<1||L.startLineNumber>j.length+1||L.endLineNumberExclusive<1||L.endLineNumberExclusive>j.length+1)}for(let L of w){if(!L.innerChanges)return!1;for(let j of L.innerChanges)if(!(A(j.modifiedRange.getStartPosition(),r)&&A(j.modifiedRange.getEndPosition(),r)&&A(j.originalRange.getStartPosition(),e)&&A(j.originalRange.getEndPosition(),e)))return!1;if(!O(L.modified,r)||!O(L.original,e))return!1}return!0}),new rz.LinesDiff(w,P,_)}computeMoves(e,r,n,o,s,a,c,l){return(0,eWr.computeMovedLines)(e,r,n,o,s,a).map(f=>{let p=this.refineDiff(r,n,new Zp.SequenceDiff(f.original.toOffsetRange(),f.modified.toOffsetRange()),a,c,l),h=(0,zb.lineRangeMappingFromRangeMappings)(p.mappings,new tz.ArrayText(r),new tz.ArrayText(n),!0);return new rz.MovedText(f,h)})}refineDiff(e,r,n,o,s,a){let l=tWr(n).toRangeMapping2(e,r),u=new Ypt.LinesSliceCharSequence(e,l.originalRange,s),d=new Ypt.LinesSliceCharSequence(r,l.modifiedRange,s),f=u.length+d.length<500?this.dynamicProgrammingDiffing.compute(u,d,o):this.myersDiffingAlgorithm.compute(u,d,o),p=!1,h=f.diffs;p&&Zp.SequenceDiff.assertSorted(h),h=(0,Gb.optimizeSequenceDiffs)(u,d,h),p&&Zp.SequenceDiff.assertSorted(h),h=(0,Gb.extendDiffsToEntireWordIfAppropriate)(u,d,h,(g,v)=>g.findWordContaining(v)),p&&Zp.SequenceDiff.assertSorted(h),a.extendToSubwords&&(h=(0,Gb.extendDiffsToEntireWordIfAppropriate)(u,d,h,(g,v)=>g.findSubWordContaining(v),!0),p&&Zp.SequenceDiff.assertSorted(h)),h=(0,Gb.removeShortMatches)(u,d,h),p&&Zp.SequenceDiff.assertSorted(h),h=(0,Gb.removeVeryShortMatchingTextBetweenLongDiffs)(u,d,h),p&&Zp.SequenceDiff.assertSorted(h);let _=h.map(g=>new zb.RangeMapping(u.translateRange(g.seq1Range),d.translateRange(g.seq2Range)));return p&&zb.RangeMapping.assertSorted(_),{mappings:_,hitTimeout:f.hitTimeout}}};iz.DefaultLinesDiffComputer=jve;function tWr(t){return new zb.LineRangeMapping(new nz.LineRange(t.seq1Range.start+1,t.seq1Range.endExclusive+1),new nz.LineRange(t.seq2Range.start+1,t.seq2Range.endExclusive+1))}});var $ve=m(Go=>{"use strict";var rWr=Go&&Go.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),nWr=Go&&Go.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),iWr=Go&&Go.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),o=0;o<n.length;o++)n[o]!=="default"&&rWr(r,e,n[o]);return nWr(r,e),r}})();Object.defineProperty(Go,"__esModule",{value:!0});Go.maxImperfectAgreementLength=Go.maxAgreementOffset=Go.EditDataWithIndex=void 0;Go.tryRebase=lWr;Go.checkEditConsistency=Zpt;Go.tryRebaseStringEdits=dWr;var oWr=og(),sWr=iWr(fg()),sc=Wl(),hL=zi(),Qpt=up(),aWr=Bve(),cWr=!1,oz=class{constructor(e){this.index=e}join(e){if(this.index===e.index)return this}};Go.EditDataWithIndex=oz;function lWr(t,e,r,n,o,s,a,c,l,u={}){let d=Date.now();try{return uWr(t,e,r,n,o,s,a,c,l,u)}catch(f){return l.trace(`Rebase error: ${sWr.toString(f)}`),"error"}finally{l.trace(`Rebase duration: ${Date.now()-d}ms`)}}function uWr(t,e,r,n,o,s,a,c,l,u){if(!Zpt(t,o,s,l,!0))return"inconsistentEdits";let d=o.removeCommonSuffixAndPrefix(t),f=a[0];if(e&&f&&!d.applyToOffsetRangeOrUndefined(e)?.containsRange(f))return"outsideEditWindow";if(n.length<r.length){let v=t;for(let E=0;E<n.length;E++){let y=r[E];v=sc.StringEdit.single(y).apply(v)}for(let E=n.length;E<r.length;E++){let y=r[E],S=new oz(E);n[E]=pWr(y.replaceRange.substring(v),y.newText,y.replaceRange.start,S,{ignoreTrimWhitespace:!1,computeMoves:!1,extendToSubwords:!0,maxComputationTimeMs:500})||[new sc.AnnotatedStringReplacement(y.replaceRange,y.newText,S)],v=sc.StringEdit.single(y).apply(v)}}let p=sc.AnnotatedStringEdit.compose(n.map(v=>sc.AnnotatedStringEdit.create(v))),h=Jpt(t,p,d,c,u);if(!h)return"rebaseFailed";let _=h.replacements.reduce((v,E)=>((v[E.data.index]||=[]).push(E),v),[]),g=[];for(let v=0;v<_.length;v++){let E=_[v];if(!E)continue;let y=hL.OffsetRange.fromTo(E[0].replaceRange.start,E[E.length-1].replaceRange.endExclusive),S=E.map((w,P,A)=>P>0?s.substring(A[P-1].replaceRange.endExclusive,w.replaceRange.start)+w.newText:w.newText).join(""),b=sc.StringReplacement.replace(y,S);b.removeCommonSuffixAndPrefix(s).isEmpty||g.push({rebasedEdit:b,rebasedEditIndex:v})}return c==="strict"&&g.length>0&&new oWr.SingleEdits(r).apply(t)!==sc.StringEdit.create(g.map(v=>v.rebasedEdit)).apply(s)?(l.trace("Result consistency check failed."),"inconsistentEdits"):g}function Zpt(t,e,r,n,o=cWr){if(!o)return!0;let s=e.apply(t)===r;return s||n.trace("Edit consistency check failed."),s}function dWr(t,e,r,n,o={}){return Jpt(t,e.mapData(s=>new sc.VoidEditData),r,n,o)?.toStringEdit()}function Jpt(t,e,r,n,o){let s=r.removeCommonSuffixAndPrefix(t),a=[],c=0,l=0,u=0;for(;l<e.replacements.length||c<s.replacements.length;){let d=s.replacements[c],f=e.replacements[l];if(f)if(!d)a.push(f.delta(u)),l++;else{let p=f;if(!p.replaceRange.containsRange(d.replaceRange)){if(p.replaceRange.start>d.replaceRange.start){let h=t.substring(d.replaceRange.start,p.replaceRange.start),_=h+p.newText;_.endsWith(h)&&(p=new sc.AnnotatedStringReplacement(hL.OffsetRange.fromTo(d.replaceRange.start,p.replaceRange.endExclusive-h.length),_.substring(0,_.length-h.length),p.data))}else if(l===e.replacements.length-1&&p.replaceRange.endExclusive<d.replaceRange.endExclusive){let h=t.substring(p.replaceRange.endExclusive,d.replaceRange.endExclusive),_=p.newText+h;_.startsWith(h)&&(p=new sc.AnnotatedStringReplacement(hL.OffsetRange.fromTo(p.replaceRange.start+h.length,d.replaceRange.endExclusive),_.substring(h.length),p.data))}}if(p.replaceRange.intersectsOrTouches(d.replaceRange))if(p.replaceRange.containsRange(d.replaceRange)&&p.newText.length>=d.newText.length){let h=0,_=0,g=d,v;for(;g&&p.replaceRange.containsRange(g.replaceRange);){if(_=fWr(t,p,g,v,_,n,o),_===-1)return;h+=g.newText.length-g.replaceRange.length,v=g,g=s.replacements[++c]}a.push(new sc.AnnotatedStringReplacement(new hL.OffsetRange(p.replaceRange.start+u,p.replaceRange.endExclusive+u+h),p.newText,p.data)),l++,u+=h}else return;else if(f.replaceRange.start<d.replaceRange.start)a.push(new sc.AnnotatedStringReplacement(f.replaceRange.delta(u),f.newText,f.data)),l++;else{if(n==="strict")return;c++,u+=d.newText.length-d.replaceRange.length}}else{if(n==="strict")return;break}}return sc.AnnotatedStringEdit.create(a)}Go.maxAgreementOffset=10;Go.maxImperfectAgreementLength=5;function fWr(t,e,r,n,o,s,a){let c=n?n.replaceRange.endExclusive:e.replaceRange.start;c<r.replaceRange.start&&(r=new sc.StringReplacement(hL.OffsetRange.fromTo(c,r.replaceRange.endExclusive),t.substring(c,r.replaceRange.start)+r.newText));let l=e.newText.indexOf(r.newText,o);return s==="strict"&&l>Go.maxAgreementOffset||s==="strict"&&l>0&&r.newText.length>Go.maxImperfectAgreementLength?-1:l!==-1?l+r.newText.length:-1}function pWr(t,e,r,n,o){let s=t.split(/\r\n|\r|\n/),a=e.split(/\r\n|\r|\n/),l=new aWr.DefaultLinesDiffComputer().computeDiff(s,a,o);if(l.hitTimeout)return;let u=new Qpt.StringText(t),d=new Qpt.StringText(e);return l.changes.map(f=>(f.innerChanges||[]).map(p=>{let h=u.getTransformer().getOffsetRange(p.originalRange),_=d.getValueOfRange(p.modifiedRange);return new sc.AnnotatedStringReplacement(h.delta(r),_,n)})).flat()}});var eht=m(sz=>{"use strict";Object.defineProperty(sz,"__esModule",{value:!0});sz.RejectionCollector=void 0;var hWr=Km(),mWr=aL(),Xpt=Ar(),gWr=cp(),Vve=class extends Xpt.Disposable{constructor(e,r){super(),this.workspace=e,this._garbageCollector=this._register(new zve(20)),this._documentCaches=new Map,this._tracer=(0,mWr.createTracer)(["NES","RejectionCollector"],r),(0,gWr.mapObservableArrayCached)(this,e.openDocuments,(n,o)=>{let s=new Hve(n,this._garbageCollector,this._tracer);this._documentCaches.set(s.doc.id,s),o.add((0,hWr.autorunWithChanges)(this,{value:n.value,selection:n.selection,languageId:n.languageId},a=>{for(let c of a.value.changes)s.handleEdit(c,a.value.value)})),o.add((0,Xpt.toDisposable)(()=>{this._documentCaches.delete(n.id)}))}).recomputeInitiallyAndOnChange(this._store)}reject(e,r){let n=this._documentCaches.get(e);if(!n){this._tracer.trace(`Rejecting, no document cache: ${r}`);return}let o=r.removeCommonSuffixAndPrefix(n.doc.value.get().value);this._tracer.trace(`Rejecting: ${o}`),n.reject(o)}isRejected(e,r){let n=this._documentCaches.get(e);if(!n)return this._tracer.trace(`Checking rejection, no document cache: ${r}`),!1;let o=r.removeCommonSuffixAndPrefix(n.doc.value.get().value),s=n.isRejected(o);return this._tracer.trace(`Checking rejection, ${s?"rejected":"not rejected"}: ${o}`),s}clear(){this._garbageCollector.clear()}};sz.RejectionCollector=Vve;var Hve=class{constructor(e,r,n){this.doc=e,this._garbageCollector=r,this._tracer=n,this._rejectedEdits=new Set}handleEdit(e,r){for(let n of[...this._rejectedEdits])n.handleEdit(e,r)}reject(e){if(this.isRejected(e))return;let r=new Gve(e.toEdit(),()=>{this._tracer.trace(`Evicting: ${e}`),this._rejectedEdits.delete(r)});this._rejectedEdits.add(r),this._garbageCollector.put(r)}isRejected(e){for(let r of this._rejectedEdits)if(r.isRejected(e))return!0;return!1}},Gve=class{constructor(e,r){this._edit=e,this._onDispose=r}handleEdit(e,r){let n=this._edit.tryRebase(e);n?this._edit=n.removeCommonSuffixAndPrefix(r.value):this.dispose()}isRejected(e){return this._edit.equals(e.toEdit())}dispose(){this._onDispose()}},zve=class{constructor(e){this._maxSize=e,this._disposables=[]}put(e){this._disposables.push(e),this._disposables.length>this._maxSize&&this._disposables.shift().dispose()}clear(){for(let e of this._disposables)e.dispose();this._disposables=[]}dispose(){this.clear()}}});var Kve=m(JP=>{"use strict";Object.defineProperty(JP,"__esModule",{value:!0});JP.DisposablesLRUCache=JP.LRUCache=void 0;var mL=class{constructor(e,r){this.prev=null,this.next=null,this.key=e,this.value=r}},az=class{constructor(e=10){if(e<1)throw new Error("Cache size must be at least 1");this._capacity=e,this._cache=new Map,this._head=new mL("",null),this._tail=new mL("",null),this._head.next=this._tail,this._tail.prev=this._head}_addNode(e){e.prev=this._head,e.next=this._head.next,this._head.next.prev=e,this._head.next=e}_removeNode(e){let r=e.prev,n=e.next;r.next=n,n.prev=r}_moveToHead(e){this._removeNode(e),this._addNode(e)}_popTail(){let e=this._tail.prev;return this._removeNode(e),e}clear(){this._cache.clear(),this._head.next=this._tail,this._tail.prev=this._head}deleteKey(e){let r=this._cache.get(e);if(r)return this._removeNode(r),this._cache.delete(e),r.value}get(e){let r=this._cache.get(e);if(r)return this._moveToHead(r),r.value}keys(){let e=[],r=this._head.next;for(;r!==this._tail;)e.push(r.key),r=r.next;return e}getValues(){let e=[],r=this._head.next;for(;r!==this._tail;)e.push(r.value),r=r.next;return e}put(e,r){let n=this._cache.get(e);if(n)n.value=r,this._moveToHead(n);else if(n=new mL(e,r),this._cache.set(e,n),this._addNode(n),this._cache.size>this._capacity){let o=this._popTail();return this._cache.delete(o.key),[o.key,o.value]}}entries(){let e=[],r=this._head.next;for(;r!==this._tail;)e.push([r.key,r.value]),r=r.next;return e}};JP.LRUCache=az;var Wve=class{constructor(e){this.actual=new az(e)}dispose(){this.clear()}clear(){let e=this.actual.getValues();for(let r of e)r.dispose();this.actual.clear()}deleteKey(e){let r=this.actual.deleteKey(e);r&&r.dispose()}get(e){return this.actual.get(e)}keys(){return this.actual.keys()}getValues(){return this.actual.getValues()}put(e,r){let n=this.actual.put(e,r);n&&n[1].dispose()}};JP.DisposablesLRUCache=Wve});var rht=m(lz=>{"use strict";Object.defineProperty(lz,"__esModule",{value:!0});lz.NextEditCache=void 0;var _Wr=Ni(),vWr=Km(),yWr=Kve(),EWr=aL(),tht=Ar(),TWr=bT(),cz=$ve(),Yve=class extends tht.Disposable{constructor(e,r,n,o){super(),this.workspace=e,this._logService=r,this._documentCaches=new Map,this._sharedCache=new yWr.LRUCache(50),(0,TWr.mapObservableArrayCached)(this,e.openDocuments,(s,a)=>{let c=new Qve(this,s.id,s,this._sharedCache,this._logService);this._documentCaches.set(c.docId,c),a.add((0,vWr.autorunWithChanges)(this,{value:s.value},l=>{for(let u of l.value.changes)u.isEmpty()||c.handleEdit(u);if(n.getExperimentBasedConfig(_Wr.ConfigKey.Advanced.InlineEditsTriggerOnEditorChangeAfterSeconds,o)!==void 0)for(let[u,d]of this._sharedCache.entries())d.docId!==s.id&&this._sharedCache.deleteKey(u)})),a.add((0,tht.toDisposable)(()=>{this._documentCaches.delete(s.id)}))}).recomputeInitiallyAndOnChange(this._store)}setKthNextEdit(e,r,n,o,s,a,c,l){let u=this._documentCaches.get(e);if(u)return u.setKthNextEdit(r,n,o,a,c,s,l)}setNoNextEdit(e,r,n,o){let s=this._documentCaches.get(e);s&&s.setNoNextEdit(r,n,o)}lookupNextEdit(e,r,n,o){let s=this._documentCaches.get(e);if(s)return s.lookupNextEdit(r,n,o)}tryRebaseCacheEntry(e,r,n,o){let s=this._documentCaches.get(e.docId);if(s)return s.tryRebaseCacheEntry(e,r,n,o)}rejectedNextEdit(e){this._sharedCache.getValues().filter(r=>r.source.headerRequestId===e).forEach(r=>r.rejected=!0)}isRejectedNextEdit(e,r,n,o){let s=this._documentCaches.get(e);return s?s.isRejectedNextEdit(r,n,o):!1}evictedCachedEdit(e){let r=this._documentCaches.get(e.docId);r&&r.evictedCachedEdit(e)}clear(){this._documentCaches.forEach(e=>e.clear()),this._sharedCache.clear()}};lz.NextEditCache=Yve;var Qve=class{constructor(e,r,n,o,s){this._nextEditCache=e,this.docId=r,this._doc=n,this._sharedCache=o,this._logService=s,this._trackedCachedEdits=[],this._tracer=(0,EWr.createTracer)(["NES","DocumentEditCache"],a=>this._logService.trace(a))}handleEdit(e){let r=this._tracer.sub("handleEdit");for(let n of this._trackedCachedEdits)n.userEditSince&&(n.userEditSince=n.userEditSince.compose(e),n.rebaseFailed=!1,(0,cz.checkEditConsistency)(n.documentBeforeEdit.value,n.userEditSince,this._doc.value.get().value,r)||(n.userEditSince=void 0))}evictedCachedEdit(e){let r=this._trackedCachedEdits.indexOf(e);r!==-1&&this._trackedCachedEdits.splice(r,1)}clear(){this._trackedCachedEdits.length=0}setKthNextEdit(e,r,n,o,s,a,c){let l=this._getKey(e.value),u={docId:this.docId,edit:n,edits:o,detailedEdits:[],userEditSince:s,subsequentN:a,source:c,documentBeforeEdit:e,editWindow:r,cacheTime:Date.now()};s&&((0,cz.checkEditConsistency)(u.documentBeforeEdit.value,s,this._doc.value.get().value,this._tracer.sub("setKthNextEdit"))?this._trackedCachedEdits.unshift(u):u.userEditSince=void 0);let d=this._sharedCache.get(l);d&&this.evictedCachedEdit(d);let f=this._sharedCache.put(l,u);return f&&this._nextEditCache.evictedCachedEdit(f[1]),u}setNoNextEdit(e,r,n){let o=this._getKey(e.value),s={docId:this.docId,edits:[],detailedEdits:[],source:n,documentBeforeEdit:e,editWindow:r,cacheTime:Date.now()},a=this._sharedCache.get(o);a&&this.evictedCachedEdit(a);let c=this._sharedCache.put(o,s);c&&this._nextEditCache.evictedCachedEdit(c[1])}lookupNextEdit(e,r,n){let o=this._getKey(e.value),s=this._sharedCache.get(o);if(s){let a=s.editWindow,c=r[0];return a&&!a.containsRange(c)?void 0:s}for(let a of this._trackedCachedEdits){let c=this.tryRebaseCacheEntry(a,e,r,n);if(c)return c}}tryRebaseCacheEntry(e,r,n,o){let s=this._tracer.sub("tryRebaseCacheEntry");if(e.userEditSince&&!e.rebaseFailed){let a=e.edits||(e.edit?[e.edit]:[]),c=(0,cz.tryRebase)(e.documentBeforeEdit.value,e.editWindow,a,e.detailedEdits,e.userEditSince,r.value,n,"strict",s,o);if(c==="rebaseFailed")e.rebaseFailed=!0;else if(c==="inconsistentEdits"||c==="error")e.userEditSince=void 0;else if(c!=="outsideEditWindow"){if(c.length)return!e.rejected&&this.isRejectedNextEdit(r,c[0].rebasedEdit,o)&&(e.rejected=!0),{...e,...c[0]};if(!a.length)return e}}}isRejectedNextEdit(e,r,n){let o=this._tracer.sub("isRejectedNextEdit"),s=r.removeCommonSuffixAndPrefix(e.value);for(let a of this._trackedCachedEdits.filter(c=>c.rejected)){if(!a.userEditSince)continue;let c=a.edits||(a.edit?[a.edit]:[]);if(!c.length)continue;let l=(0,cz.tryRebase)(a.documentBeforeEdit.value,void 0,c,a.detailedEdits,a.userEditSince,e.value,[],"lenient",o,n);if(typeof l=="string")continue;if(l.some(d=>d.rebasedEdit.removeCommonSuffixAndPrefix(e.value).equals(s)))return o.trace("Found rejected edit that matches current edit"),!0}return!1}_getKey(e){return JSON.stringify([this.docId.uri,e])}}});var nht=m(uz=>{"use strict";Object.defineProperty(uz,"__esModule",{value:!0});uz.NextEditResult=void 0;var Zve=class{constructor(e,r,n){this.requestId=e,this.source=r,this.result=n}};uz.NextEditResult=Zve});var aht=m(Fs=>{"use strict";var SWr=Fs&&Fs.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),bWr=Fs&&Fs.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),CWr=Fs&&Fs.__decorate||function(t,e,r,n){var o=arguments.length,s=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(o<3?a(s):o>3?a(e,r,s):a(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},AWr=Fs&&Fs.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),o=0;o<n.length;o++)n[o]!=="default"&&SWr(r,e,n[o]);return bWr(r,e),r}})(),dz=Fs&&Fs.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(Fs,"__esModule",{value:!0});Fs.NextEditFetchRequest=Fs.NextEditProvider=void 0;var Pv=Ni(),iht=og(),fz=iG(),Zf=vve(),xWr=Km(),wWr=pa(),IWr=Eve(),PWr=Vo(),RWr=AWr(fg()),XP=jP(),OWr=aL(),MWr=qi(),Jve=Ua(),NWr=g8(),eye=Gr(),Xve=Ar(),oht=cp(),LWr=H2(),kWr=Ol(),DWr=ws(),UWr=uI(),sht=Wl(),qWr=zi(),FWr=$ve(),jWr=eht(),BWr=rht(),pz=nht(),tye=class extends Xve.Disposable{get lastRejectionTime(){return this._lastRejectionTime}get lastTriggerTime(){return this._lastTriggerTime}constructor(e,r,n,o,s,a,c,l,u){super(),this._workspace=e,this._statelessNextEditProvider=r,this._historyContextProvider=n,this._xtabHistoryTracker=o,this._debugRecorder=s,this._configService=a,this._snippyService=c,this._logService=l,this._expService=u,this.ID=this._statelessNextEditProvider.ID,this._rejectionCollector=this._register(new jWr.RejectionCollector(this._workspace,d=>this._logService.trace(d))),this._pendingStatelessNextEditRequest=null,this._lastShownTime=0,this._lastRejectionTime=0,this._lastTriggerTime=0,this._shouldExpandEditWindow=!1,this._tracer=(0,OWr.createTracer)(["NES","NextEditProvider"],d=>this._logService.trace(d)),this._nextEditCache=new BWr.NextEditCache(this._workspace,this._logService,this._configService,this._expService),(0,oht.mapObservableArrayCached)(this,this._workspace.openDocuments,(d,f)=>{f.add((0,oht.runOnChange)(d.value,p=>{this._cancelPendingRequestDueToDocChange(d.id,p)}))}).recomputeInitiallyAndOnChange(this._store)}_cancelPendingRequestDueToDocChange(e,r){if(this._configService.getExperimentBasedConfig(Pv.ConfigKey.TeamInternal.InlineEditsAsyncCompletions,this._expService)||this._pendingStatelessNextEditRequest===null)return;let o=this._pendingStatelessNextEditRequest.getActiveDocument();o.id===e&&o.documentAfterEdits.value!==r.value&&this._pendingStatelessNextEditRequest.cancellationTokenSource.cancel()}async getNextEdit(e,r,n,o,s){let a=Date.now();this._lastTriggerTime=a;let c=new LWr.StopWatch,l=this._tracer.sub(r.requestUuid.substring(4,8),{extraLog:f=>{n.trace(`[${Math.floor(c.elapsed()).toString().padStart(4," ")}ms] ${f}`)}}),u=this._shouldExpandEditWindow;n.setStatelessNextEditProviderId(this._statelessNextEditProvider.ID);let d;try{d=await this._getNextEditCanThrow(e,r,a,u,l,n,o,s)}catch(f){throw n.setError(f),s.setNextEditProviderError(RWr.toString(f)),f}finally{s.markEndTime()}return this._lastNextEditResult=d,d}async _getNextEditCanThrow(e,r,n,o,s,a,c,l){let u=s.sub("_getNextEdit"),d=this._workspace.getDocument(e);if(!d)throw u.throws(`Document "${e.baseName}" not found`),new eye.BugIndicatingError(`Document "${e.baseName}" not found`);let f=d.value.get(),p=d.selection.get(),h=this.determineNesConfigs(l,a),_=this._nextEditCache.lookupNextEdit(e,f,p,h);if(_?.rejected)return u.trace("cached edit was previously rejected"),l.setStatus("previouslyRejectedCache"),l.setWasPreviouslyRejected(),new pz.NextEditResult(a.requestId,_.source,void 0);let g,v,E,y,S=e,b=!1,w=!1;if(_)u.trace("using cached edit"),g=_.rebasedEdit||_.edit,b=!!_.rebasedEdit,w=_.subsequentN!==void 0&&_.subsequentN>0,y=_.source,a.setIsCachedResult(_.source.log),v=f,l.setHeaderRequestId(y.headerRequestId),l.setIsFromCache(),l.setSubsequentEditOrder(_.rebasedEditIndex??_.subsequentN),a.recordingBookmark=y.log.recordingBookmark;else{u.trace(`fetching next edit with shouldExpandEditWindow=${o}`);let j=this._configService.getExperimentBasedConfig(Pv.ConfigKey.TeamInternal.InlineEditsDebounceUseCoreRequestTime,this._expService)?r.requestIssuedDateTime??void 0:void 0;y=new hz(r.requestUuid,a,j),l.setHeaderRequestId(y.headerRequestId);let $=d.value.get();u.trace("awaiting firstEdit promise");let Q=await this.fetchNextEdit(y,d,h,o,u,l,c);u.trace("resolved firstEdit promise");let K=`First edit latency: ${Date.now()-this._lastTriggerTime} ms`;if(a.addLog(K),u.trace(K),Q.isError())u.trace(`failed to fetch next edit ${Q.err.toString()}`),l.setStatus(`noEdit:${Q.err.kind}`),E=Q.err;else if(S=Q.val.docId??S,v=(S?this._workspace.getDocument(S):d).value.get(),S===d.id&&$.value!==v.value)u.trace("document changed while fetching next edit"),l.setStatus("docChanged"),a.setIsSkipped();else{let Y=Q.val.rebasedEdit||Q.val.edit;Y?(u.trace("fetch succeeded"),a.setResponseResults([Y]),g=Y):(u.trace("empty edits"),l.setStatus("emptyEdits"))}}if(E instanceof Zf.NoNextEditReason.FetchFailure||E instanceof Zf.NoNextEditReason.Unexpected)throw u.throws("has throwing error",E.error),E.error;if(E instanceof Zf.NoNextEditReason.NoSuggestions)if(E.nextCursorPosition===void 0)a.markAsNoSuggestions();else return l.setStatus("emptyEditsButHasNextCursorPosition"),new pz.NextEditResult(a.requestId,y,{jumpToPosition:E.nextCursorPosition,documentBeforeEdits:f});let P=new pz.NextEditResult(a.requestId,y,void 0);if(!g)return u.returns("had no edit"),P;if(c.isCancellationRequested)return u.returns("cancelled"),l.setStatus("noEdit:gotCancelled"),P;if(this._rejectionCollector.isRejected(S,g)||v&&this._nextEditCache.isRejectedNextEdit(S,v,g,h))return u.returns("edit was previously rejected"),l.setStatus("previouslyRejected"),l.setWasPreviouslyRejected(),P;a.setResult(fz.RootedLineEdit.fromEdit(new iht.RootedEdit(f,new sht.StringEdit([g])))),(0,MWr.assert)(v!==void 0,"should be defined if edit is defined"),l.setStatus("notAccepted");let A=this._statelessNextEditProvider.showNextEditPreference??"aroundEdit",O=new pz.NextEditResult(a.requestId,y,{edit:g,showRangePreference:A,documentBeforeEdits:v,targetDocumentId:S});l.setHasNextEdit(!0);let L=this.computeMinimumResponseDelay({triggerTime:n,isRebasedCachedEdit:b,isSubsequentCachedEdit:w,enforceCacheDelay:r.enforceCacheDelay},u);return L>0&&(await(0,Jve.timeout)(L),c.isCancellationRequested)?(u.returns("cancelled"),l.setStatus("noEdit:gotCancelled"),P):(u.returns("returning next edit result"),O)}determineNesConfigs(e,r){let n={isAsyncCompletions:this._configService.getExperimentBasedConfig(Pv.ConfigKey.TeamInternal.InlineEditsAsyncCompletions,this._expService)};return e.setNESConfigs({...n}),r.addCodeblockToLog(JSON.stringify(n,null,"	")),n}_processDoc(e){let r=e.lastEdit.base.getLines(),n=e.lastEdits,o=fz.RootedLineEdit.fromEdit(new iht.RootedEdit(e.lastEdit.base,e.lastEdits.compose())).removeCommonSuffixPrefixLines().edit,s=e.lastEdit.base,a=e.lastSelection,c=this._workspace.getWorkspaceRoot(e.docId),l=new Zf.StatelessNextEditDocument(e.docId,c,e.languageId,r,o,s,n,a);return{recentEdit:e.lastEdit,nextEditDoc:l,documentAfterEdits:l.documentAfterEdits}}async fetchNextEdit(e,r,n,o,s,a,c){let l=r.id,u=s.sub("fetchNextEdit"),d=this._historyContextProvider.getHistoryContext(l);if(!d)return XP.Result.error(new Zf.NoNextEditReason.Unexpected(new Error("DocumentMissingInHistoryContext")));let f=r.value.get(),p=r.selection.get(),h=e.log;h.setRecentEdit(d);let _=f.value===this._pendingStatelessNextEditRequest?.documentBeforeEdits.value,g=(_||n.isAsyncCompletions)&&!this._pendingStatelessNextEditRequest?.cancellationTokenSource.token.isCancellationRequested&&this._pendingStatelessNextEditRequest||void 0;if(g){let S=await this._joinNextEditRequest(g,a,h,c);if(_)return a.setStatelessNextEditTelemetry(S.telemetry),S.nextEdit.isError()?S.nextEdit:g.firstEdit.p;{let b=await g.firstEdit.p;if(b.isOk()&&b.val.edit){let A=this._nextEditCache.tryRebaseCacheEntry(b.val,f,p,n);if(A)return a.setStatelessNextEditTelemetry(S.telemetry),XP.Result.ok(A)}if(c.isCancellationRequested)return u.trace("document changed after rebase failed"),a.setStatelessNextEditTelemetry(S.telemetry),XP.Result.error(new Zf.NoNextEditReason.GotCancelled("afterFailedRebase"));let P=f.value===this._pendingStatelessNextEditRequest?.documentBeforeEdits.value&&!this._pendingStatelessNextEditRequest?.cancellationTokenSource.token.isCancellationRequested&&this._pendingStatelessNextEditRequest||void 0;if(P){u.trace("reusing 2nd existing next edit request after rebase failed");let A=await this._joinNextEditRequest(P,a,h,c);return a.setStatelessNextEditTelemetry(A.telemetry),A.nextEdit.isError()?A.nextEdit:P.firstEdit.p}u.trace("creating new next edit request after rebase failed")}}let v=await this._executeNewNextEditRequest(e,r,d,n,o,u,a,c),E=v.nextEditRequest,y=v.nextEditResult;return a.setStatelessNextEditTelemetry(y.telemetry),y.nextEdit.isError()?y.nextEdit:E.firstEdit.p}async _joinNextEditRequest(e,r,n,o){r.setHeaderRequestId(e.id),r.setIsFromCache(),r.setRequest(e),n.setRequestInput(e),n.setIsCachedResult(e.logContext);let s=this._hookupCancellation(e,o);try{return await e.result}finally{s.dispose()}}async _executeNewNextEditRequest(e,r,n,o,s,a,c,l){let u=r.id,d=a.sub("_executeNewNextEditRequest"),f=this._debugRecorder?.getRecentLog(),p=e.log,h=$Wr(n.getDocumentAndIdx(u)),_=r.selection.get()[0],g=n.documents.map(j=>this._processDoc(j)),v=this._xtabHistoryTracker.getHistory();function E(j,$){let Q=g.find(G=>G.nextEditDoc.id===$);return new fz.RootedLineEdit(Q.documentAfterEdits,j).toEdit()}let y=new Jve.DeferredPromise,S=s?this._configService.getExperimentBasedConfig(Pv.ConfigKey.TeamInternal.InlineEditsAutoExpandEditWindowLines,this._expService):void 0,b=new Zf.StatelessNextEditRequest(e.headerRequestId,e.opportunityId,r.value.get(),g.map(j=>j.nextEditDoc),h.idx,v,y,S,p,e.log.recordingBookmark,f,e.providerRequestStartDateTime),w;this._pendingStatelessNextEditRequest&&(this._pendingStatelessNextEditRequest.cancellationTokenSource.cancel(),this._pendingStatelessNextEditRequest=null),this._pendingStatelessNextEditRequest=b;let P=()=>{this._pendingStatelessNextEditRequest===b&&(this._pendingStatelessNextEditRequest=null)};c.setRequest(b),c.setStatus("requested"),p.setRequestInput(b);let A=this._hookupCancellation(b,l,o.isAsyncCompletions?(0,xWr.autorunWithChanges)(this,{value:r.value},j=>{j.value.changes.forEach($=>{b.intermediateUserEdit&&!$.isEmpty()&&(b.intermediateUserEdit=b.intermediateUserEdit.compose($),(0,FWr.checkEditConsistency)(b.documentBeforeEdits.value,b.intermediateUserEdit,j.value.value.value,d)||(b.intermediateUserEdit=void 0))})}):void 0),L=(()=>{let j=-1,$=new NWr.CachedFunction(K=>{let N=g.find(G=>G.nextEditDoc.id===K);if(!N)throw new eye.BugIndicatingError;return{docContents:N.documentAfterEdits,editsSoFar:sht.StringEdit.empty,nextEdits:[],docId:K}});return K=>{let N=d.sub("pushEdit");if(++j,N.trace(`processing edit #${j} (starts at 0)`),K.isError()){if(j===0&&K.err instanceof Zf.NoNextEditReason.NoSuggestions&&(N.trace("resetting shouldExpandEditWindow to false due to NoSuggestions"),this._shouldExpandEditWindow=!1),$.get(u).nextEdits.length)N.returns(`${$.get(u).nextEdits.length} edits returned`);else if(N.returns(`no edit, reason: ${K.err.kind}`),K.err instanceof Zf.NoNextEditReason.NoSuggestions){let{documentBeforeEdits:de,window:Ee}=K.err,Me=Ee;if(_&&Ee){let He=_.endExclusive,Je=de.getTransformer(),lt=Je.getPosition(He),St=Je.getOffset(lt.with(void 0,1)),Dt=Je.getOffset(lt.with(void 0,Je.getLineLength(lt.lineNumber)+1)),qt=Je.getOffset(Je.getPosition(Ee.start).delta(1)),Nt=Je.getPosition(Ee.endExclusive).delta(-2),D=Je.getOffset(Nt.column>1?Nt.with(void 0,Je.getLineLength(Nt.lineNumber)+1):Nt);Me=new qWr.OffsetRange(Math.min(qt,St),Math.max(D,Dt))}this._nextEditCache.setNoNextEdit(u,de,Me,e)}A.dispose(),P(),y.isSettled||y.complete(K);return}N.trace("resetting shouldExpandEditWindow to false due to receiving an edit"),this._shouldExpandEditWindow=!1;let G=$.get(K.val.targetDocument??u),Y=K.val.edit,J=new UWr.LineEdit([Y]),oe=E(J,G.docId).tryRebase(G.editsSoFar);if(oe===void 0){N.trace(`edit ${j} is undefined after rebasing`),y.isSettled||y.complete(XP.Result.error(new Zf.NoNextEditReason.Uncategorized(new Error("Rebased edit is undefined"))));return}G.editsSoFar=G.editsSoFar.compose(oe);let ne;if(oe.replacements.length===0)N.trace(`WARNING: ${j} has no edits`);else if(oe.replacements.length>1)N.trace(`WARNING: ${j} has ${oe.replacements.length} edits, but expected only 1`);else{let de=oe.replacements[0];G.nextEdits.push(de),ne=this._nextEditCache.setKthNextEdit(G.docId,G.docContents,j===0?K.val.window:void 0,de,j,j===0?G.nextEdits:void 0,j===0?b.intermediateUserEdit:void 0,e),N.trace(`populated cache for ${j}`)}y.isSettled||(N.trace("resolving firstEdit promise"),p.setResult(new fz.RootedLineEdit(G.docContents,J)),y.complete(ne?XP.Result.ok(ne):XP.Result.error(new Zf.NoNextEditReason.Unexpected(new Error("No cached edit"))))),G.docContents=oe.applyOnText(G.docContents)}})();try{w=await this._statelessNextEditProvider.provideNextEdit(b,L,d,p,b.cancellationTokenSource.token),b.setResult(w)}catch(j){throw b.setResultError(j),j}finally{(!w||w.nextEdit.isError())&&(A.dispose(),P())}return{nextEditRequest:b,nextEditResult:w}}_hookupCancellation(e,r,n){let o=new Xve.DisposableStore,s=!1,a=()=>{s||(s=!0,e.liveDependentants--)},c=o.add(new Jve.TimeoutTimer);return o.add(r.onCancellationRequested(()=>{if(a(),!(e.liveDependentants>0)){if(!e.fetchIssued){e.cancellationTokenSource.cancel(),n?.dispose();return}c.setIfNotSet(()=>{e.liveDependentants>0||(e.cancellationTokenSource.cancel(),n?.dispose())},1e3)}})),o.add((0,Xve.toDisposable)(()=>{a(),e.liveDependentants===0&&n?.dispose()})),e.liveDependentants++,o}computeMinimumResponseDelay({triggerTime:e,isRebasedCachedEdit:r,isSubsequentCachedEdit:n,enforceCacheDelay:o},s){if(!o)return s.trace("[minimumDelay] no minimum delay enforced due to enforceCacheDelay being false"),0;let a=this._configService.getExperimentBasedConfig(Pv.ConfigKey.TeamInternal.InlineEditsCacheDelay,this._expService),c=this._configService.getExperimentBasedConfig(Pv.ConfigKey.TeamInternal.InlineEditsRebasedCacheDelay,this._expService),l=this._configService.getExperimentBasedConfig(Pv.ConfigKey.TeamInternal.InlineEditsSubsequentCacheDelay,this._expService),u=a;r&&c!==void 0?u=c:n&&l!==void 0&&(u=l);let d=Date.now()-e,f=Math.max(0,u-d);return s.trace(`[minimumDelay] expected delay: ${u}ms, effective delay: ${f}. isRebasedCachedEdit: ${r} (rebasedCacheDelay: ${c}), isSubsequentCachedEdit: ${n} (subsequentCacheDelay: ${l})`),f}handleShown(e){this._lastShownTime=Date.now()}handleAcceptance(e,r){this.runSnippy(e,r),this._statelessNextEditProvider.handleAcceptance?.();let n=this._tracer.subNoEntry(r.source.opportunityId.substring(4,8)).subNoEntry("handleAcceptance");r===this._lastNextEditResult?(n.trace("setting shouldExpandEditWindow to true due to acceptance of last suggestion"),this._shouldExpandEditWindow=!0):n.trace("NOT setting shouldExpandEditWindow to true because suggestion is not the last suggestion")}handleRejection(e,r){(0,kWr.assertType)(r.result,"@ulugbekna: undefined edit cannot be rejected?"),Date.now()-this._lastShownTime>1e3&&r.result.edit&&(this._rejectionCollector.reject(e,r.result.edit),this._nextEditCache.rejectedNextEdit(r.source.headerRequestId)),this._lastRejectionTime=Date.now(),this._statelessNextEditProvider.handleRejection?.()}handleIgnored(e,r,n){}async runSnippy(e,r){r.result===void 0||r.result.edit===void 0||this._snippyService.handlePostInsertion(e.toUri(),r.result.documentBeforeEdits,r.result.edit)}clearCache(){this._nextEditCache.clear(),this._rejectionCollector.clear()}};Fs.NextEditProvider=tye;Fs.NextEditProvider=tye=CWr([dz(5,Pv.IConfigurationService),dz(6,IWr.ISnippyService),dz(7,wWr.ILogService),dz(8,PWr.IExperimentationService)],tye);function $Wr(t){if(!t)throw new eye.BugIndicatingError("expected value to be defined, but it was not");return t}var hz=class{constructor(e,r,n){this.opportunityId=e,this.log=r,this.providerRequestStartDateTime=n,this.headerRequestId=(0,DWr.generateUuid)()}};Fs.NextEditFetchRequest=hz});var cht=m(rye=>{"use strict";Object.defineProperty(rye,"__esModule",{value:!0});rye.secondsToHumanReadableTime=VWr;function VWr(t){if(t<90)return`${t} seconds`;let e=Math.floor(t/60);if(t<=5400)return`${e} minutes`;let r=Math.floor(e/60),n=e%60,o=`${r} hours`;return n>0&&(o+=` ${n} minutes`),o}});var Jf=m(nye=>{"use strict";Object.defineProperty(nye,"__esModule",{value:!0});nye.es5ClassCompat=HWr;function HWr(t){return Object.assign(t,{apply:function(...r){if(r.length===0)return Reflect.construct(t,[]);{let n=r.length===1?[]:r[1];return Reflect.construct(t,n,r[0].constructor)}},call:function(...r){if(r.length===0)return Reflect.construct(t,[]);{let[n,...o]=r;return Reflect.construct(t,o,n.constructor)}}})}});var eR=m(Kb=>{"use strict";var GWr=Kb&&Kb.__decorate||function(t,e,r,n){var o=arguments.length,s=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(o<3?a(s):o>3?a(e,r,s):a(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},Wb;Object.defineProperty(Kb,"__esModule",{value:!0});Kb.Position=void 0;var mz=Gr(),zWr=Jf(),iye=Wb=class{static Min(...e){if(e.length===0)throw new TypeError;let r=e[0];for(let n=1;n<e.length;n++){let o=e[n];o.isBefore(r)&&(r=o)}return r}static Max(...e){if(e.length===0)throw new TypeError;let r=e[0];for(let n=1;n<e.length;n++){let o=e[n];o.isAfter(r)&&(r=o)}return r}static isPosition(e){if(!e)return!1;if(e instanceof Wb)return!0;let{line:r,character:n}=e;return typeof r=="number"&&typeof n=="number"}static of(e){if(e instanceof Wb)return e;if(this.isPosition(e))return new Wb(e.line,e.character);throw new Error("Invalid argument, is NOT a position-like object")}get line(){return this._line}get character(){return this._character}constructor(e,r){if(e<0)throw(0,mz.illegalArgument)("line must be non-negative");if(r<0)throw(0,mz.illegalArgument)("character must be non-negative");this._line=e,this._character=r}isBefore(e){return this._line<e._line?!0:e._line<this._line?!1:this._character<e._character}isBeforeOrEqual(e){return this._line<e._line?!0:e._line<this._line?!1:this._character<=e._character}isAfter(e){return!this.isBeforeOrEqual(e)}isAfterOrEqual(e){return!this.isBefore(e)}isEqual(e){return this._line===e._line&&this._character===e._character}compareTo(e){return this._line<e._line?-1:this._line>e.line?1:this._character<e._character?-1:this._character>e._character?1:0}translate(e,r=0){if(e===null||r===null)throw(0,mz.illegalArgument)();let n;return typeof e>"u"?n=0:typeof e=="number"?n=e:(n=typeof e.lineDelta=="number"?e.lineDelta:0,r=typeof e.characterDelta=="number"?e.characterDelta:0),n===0&&r===0?this:new Wb(this.line+n,this.character+r)}with(e,r=this.character){if(e===null||r===null)throw(0,mz.illegalArgument)();let n;return typeof e>"u"?n=this.line:typeof e=="number"?n=e:(n=typeof e.line=="number"?e.line:this.line,r=typeof e.character=="number"?e.character:this.character),n===this.line&&r===this.character?this:new Wb(n,r)}toJSON(){return{line:this.line,character:this.character}}[Symbol.for("debug.description")](){return`(${this.line}:${this.character})`}};Kb.Position=iye;Kb.Position=iye=Wb=GWr([zWr.es5ClassCompat],iye)});var mg=m(Rv=>{"use strict";var WWr=Rv&&Rv.__decorate||function(t,e,r,n){var o=arguments.length,s=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(o<3?a(s):o>3?a(e,r,s):a(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},hg;Object.defineProperty(Rv,"__esModule",{value:!0});Rv.Range=void 0;Rv.getDebugDescriptionOfRange=lht;var KWr=Gr(),YWr=Jf(),ac=eR(),oye=hg=class{static isRange(e){return e instanceof hg?!0:e?ac.Position.isPosition(e.start)&&ac.Position.isPosition(e.end):!1}static of(e){if(e instanceof hg)return e;if(this.isRange(e))return new hg(e.start,e.end);throw new Error("Invalid argument, is NOT a range-like object")}get start(){return this._start}get end(){return this._end}constructor(e,r,n,o){let s,a;if(typeof e=="number"&&typeof r=="number"&&typeof n=="number"&&typeof o=="number"?(s=new ac.Position(e,r),a=new ac.Position(n,o)):ac.Position.isPosition(e)&&ac.Position.isPosition(r)&&(s=ac.Position.of(e),a=ac.Position.of(r)),!s||!a)throw new Error("Invalid arguments");s.isBefore(a)?(this._start=s,this._end=a):(this._start=a,this._end=s)}contains(e){return hg.isRange(e)?this.contains(e.start)&&this.contains(e.end):ac.Position.isPosition(e)?!(ac.Position.of(e).isBefore(this._start)||this._end.isBefore(e)):!1}isEqual(e){return this._start.isEqual(e._start)&&this._end.isEqual(e._end)}intersection(e){let r=ac.Position.Max(e.start,this._start),n=ac.Position.Min(e.end,this._end);if(!r.isAfter(n))return new hg(r,n)}union(e){if(this.contains(e))return this;if(e.contains(this))return e;let r=ac.Position.Min(e.start,this._start),n=ac.Position.Max(e.end,this.end);return new hg(r,n)}get isEmpty(){return this._start.isEqual(this._end)}get isSingleLine(){return this._start.line===this._end.line}with(e,r=this.end){if(e===null||r===null)throw(0,KWr.illegalArgument)();let n;return e?ac.Position.isPosition(e)?n=e:(n=e.start||this.start,r=e.end||this.end):n=this.start,n.isEqual(this._start)&&r.isEqual(this.end)?this:new hg(n,r)}toJSON(){return[this.start,this.end]}[Symbol.for("debug.description")](){return lht(this)}};Rv.Range=oye;Rv.Range=oye=hg=WWr([YWr.es5ClassCompat],oye);function lht(t){return t.isEmpty?`[${t.start.line}:${t.start.character})`:`[${t.start.line}:${t.start.character} -> ${t.end.line}:${t.end.character})`}});var mht=m(gl=>{"use strict";var fht=gl&&gl.__decorate||function(t,e,r,n){var o=arguments.length,s=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(o<3?a(s):o>3?a(e,r,s):a(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s};Object.defineProperty(gl,"__esModule",{value:!0});gl.Diagnostic=gl.DiagnosticRelatedInformation=gl.DiagnosticSeverity=gl.DiagnosticTag=void 0;var uht=Ui(),QWr=Bi(),pht=Jf(),hht=mg(),dht;(function(t){t[t.Unnecessary=1]="Unnecessary",t[t.Deprecated=2]="Deprecated"})(dht||(gl.DiagnosticTag=dht={}));var gz;(function(t){t[t.Hint=3]="Hint",t[t.Information=2]="Information",t[t.Warning=1]="Warning",t[t.Error=0]="Error"})(gz||(gl.DiagnosticSeverity=gz={}));var _z=class{static is(e){return e?typeof e.message=="string"&&e.location&&hht.Range.isRange(e.location.range)&&QWr.URI.isUri(e.location.uri):!1}constructor(e,r){this.location=e,this.message=r}static isEqual(e,r){return e===r?!0:!e||!r?!1:e.message===r.message&&e.location.range.isEqual(r.location.range)&&e.location.uri.toString()===r.location.uri.toString()}};gl.DiagnosticRelatedInformation=_z;gl.DiagnosticRelatedInformation=_z=fht([pht.es5ClassCompat],_z);var sye=class{constructor(e,r,n=gz.Error){if(!hht.Range.isRange(e))throw new TypeError("range must be set");if(!r)throw new TypeError("message must be set");this.range=e,this.message=r,this.severity=n}toJSON(){return{severity:gz[this.severity],message:this.message,range:this.range,source:this.source,code:this.code}}static isEqual(e,r){return e===r?!0:!e||!r?!1:e.message===r.message&&e.severity===r.severity&&e.code===r.code&&e.severity===r.severity&&e.source===r.source&&e.range.isEqual(r.range)&&(0,uht.equals)(e.tags,r.tags)&&(0,uht.equals)(e.relatedInformation,r.relatedInformation,_z.isEqual)}};gl.Diagnostic=sye;gl.Diagnostic=sye=fht([pht.es5ClassCompat],sye)});var lye=m(Yb=>{"use strict";var ZWr=Yb&&Yb.__decorate||function(t,e,r,n){var o=arguments.length,s=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(o<3?a(s):o>3?a(e,r,s):a(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},aye;Object.defineProperty(Yb,"__esModule",{value:!0});Yb.Location=void 0;var JWr=Bi(),XWr=Jf(),eKr=eR(),vz=mg(),cye=aye=class{static isLocation(e){return e instanceof aye?!0:e?vz.Range.isRange(e.range)&&JWr.URI.isUri(e.uri):!1}constructor(e,r){if(this.uri=e,r)if(vz.Range.isRange(r))this.range=vz.Range.of(r);else if(eKr.Position.isPosition(r))this.range=new vz.Range(r,r);else throw new Error("Illegal argument")}toJSON(){return{uri:this.uri,range:this.range}}};Yb.Location=cye;Yb.Location=cye=aye=ZWr([XWr.es5ClassCompat],cye)});var ght=m(pye=>{"use strict";Object.defineProperty(pye,"__esModule",{value:!0});pye.getKoreanAltChars=tKr;function tKr(t){let e=rKr(t);if(e&&e.length>0)return new Uint32Array(e)}var _l=0,Ov=new Uint32Array(10);function rKr(t){if(_l=0,Jp(t,uye,4352),_l>0||(Jp(t,dye,4449),_l>0)||(Jp(t,fye,4520),_l>0)||(Jp(t,Qb,12593),_l))return Ov.subarray(0,_l);if(t>=44032&&t<=55203){let e=t-44032,r=e%588,n=Math.floor(e/588),o=Math.floor(r/28),s=r%28-1;if(n<uye.length?Jp(n,uye,0):4352+n-12593<Qb.length&&Jp(4352+n,Qb,12593),o<dye.length?Jp(o,dye,0):4449+o-12593<Qb.length&&Jp(4449+o-12593,Qb,12593),s>=0&&(s<fye.length?Jp(s,fye,0):4520+s-12593<Qb.length&&Jp(4520+s-12593,Qb,12593)),_l>0)return Ov.subarray(0,_l)}}function Jp(t,e,r){t>=r&&t<r+e.length&&nKr(e[t-r])}function nKr(t){t!==0&&(Ov[_l++]=t&255,t>>8&&(Ov[_l++]=t>>8&255),t>>16&&(Ov[_l++]=t>>16&255))}var uye=new Uint8Array([114,82,115,101,69,102,97,113,81,116,84,100,119,87,99,122,120,118,103]),dye=new Uint16Array([107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]),fye=new Uint16Array([114,82,29810,115,30579,26483,101,102,29286,24934,29030,29798,30822,30310,26470,97,113,29809,116,84,100,119,99,122,120,118,103]),Qb=new Uint16Array([114,82,29810,115,30579,26483,101,69,102,29286,24934,29030,29798,30822,30310,26470,97,113,81,29809,116,84,100,119,87,99,122,120,118,103,107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108])});var kht=m(un=>{"use strict";var iKr=un&&un.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),oKr=un&&un.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),sKr=un&&un.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),o=0;o<n.length;o++)n[o]!=="default"&&iKr(r,e,n[o]);return oKr(r,e),r}})();Object.defineProperty(un,"__esModule",{value:!0});un.FuzzyScoreOptions=un.FuzzyScore=un.matchesPrefix=un.matchesStrictPrefix=void 0;un.or=Tye;un.matchesContiguousSubString=bht;un.matchesSubString=Cht;un.isUpper=vL;un.matchesCamelCase=Aye;un.matchesWords=pKr;un.matchesFuzzy=gKr;un.matchesFuzzy2=_Kr;un.anyScore=vKr;un.createMatches=Rht;un.isPatternInWord=Nht;un.fuzzyScore=_L;un.fuzzyScoreGracefulAggressive=bKr;un.fuzzyScoreGraceful=CKr;var aKr=f_(),cKr=ght(),Eye=sKr(Fo());function Tye(...t){return function(e,r){for(let n=0,o=t.length;n<o;n++){let s=t[n](e,r);if(s)return s}return null}}un.matchesStrictPrefix=Sht.bind(void 0,!1);un.matchesPrefix=Sht.bind(void 0,!0);function Sht(t,e,r){if(!r||r.length<e.length)return null;let n;return t?n=Eye.startsWithIgnoreCase(r,e):n=r.indexOf(e)===0,n?e.length>0?[{start:0,end:e.length}]:[]:null}function bht(t,e){let r=e.toLowerCase().indexOf(t.toLowerCase());return r===-1?null:[{start:r,end:r+t.length}]}function Cht(t,e){return gye(t.toLowerCase(),e.toLowerCase(),0,0)}function gye(t,e,r,n){if(r===t.length)return[];if(n===e.length)return null;if(t[r]===e[n]){let o=null;return(o=gye(t,e,r+1,n+1))?Cye({start:n,end:n+1},o):null}return gye(t,e,r,n+1)}function Sye(t){return 97<=t&&t<=122}function vL(t){return 65<=t&&t<=90}function bye(t){return 48<=t&&t<=57}function Aht(t){return t===32||t===9||t===10||t===13}var xht=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach(t=>xht.add(t.charCodeAt(0)));function Tz(t){return Aht(t)||xht.has(t)}function _ht(t,e){return t===e||Tz(t)&&Tz(e)}var hye=new Map;function vht(t){if(hye.has(t))return hye.get(t);let e,r=(0,cKr.getKoreanAltChars)(t);return r&&(e=r),hye.set(t,e),e}function wht(t){return Sye(t)||vL(t)||bye(t)}function Cye(t,e){return e.length===0?e=[t]:t.end===e[0].start?e[0].start=t.start:e.unshift(t),e}function Iht(t,e){for(let r=e;r<t.length;r++){let n=t.charCodeAt(r);if(vL(n)||bye(n)||r>0&&!wht(t.charCodeAt(r-1)))return r}return t.length}function _ye(t,e,r,n){if(r===t.length)return[];if(n===e.length)return null;if(t[r]!==e[n].toLowerCase())return null;{let o=null,s=n+1;for(o=_ye(t,e,r+1,n+1);!o&&(s=Iht(e,s))<e.length;)o=_ye(t,e,r+1,s),s++;return o===null?null:Cye({start:n,end:n+1},o)}}function lKr(t){let e=0,r=0,n=0,o=0,s=0;for(let d=0;d<t.length;d++)s=t.charCodeAt(d),vL(s)&&e++,Sye(s)&&r++,wht(s)&&n++,bye(s)&&o++;let a=e/t.length,c=r/t.length,l=n/t.length,u=o/t.length;return{upperPercent:a,lowerPercent:c,alphaPercent:l,numericPercent:u}}function uKr(t){let{upperPercent:e,lowerPercent:r}=t;return r===0&&e>.6}function dKr(t){let{upperPercent:e,lowerPercent:r,alphaPercent:n,numericPercent:o}=t;return r>.2&&e<.8&&n>.6&&o<.2}function fKr(t){let e=0,r=0,n=0,o=0;for(let s=0;s<t.length;s++)n=t.charCodeAt(s),vL(n)&&e++,Sye(n)&&r++,Aht(n)&&o++;return(e===0||r===0)&&o===0?t.length<=30:e<=5}function Aye(t,e){if(!e||(e=e.trim(),e.length===0)||!fKr(t))return null;e.length>60&&(e=e.substring(0,60));let r=lKr(e);if(!dKr(r)){if(!uKr(r))return null;e=e.toLowerCase()}let n=null,o=0;for(t=t.toLowerCase();o<e.length&&(n=_ye(t,e,0,o))===null;)o=Iht(e,o+1);return n}function pKr(t,e,r=!1){if(!e||e.length===0)return null;let n=null,o=0;for(t=t.toLowerCase(),e=e.toLowerCase();o<e.length&&(n=vye(t,e,0,o,r),n===null);)o=Pht(e,o+1);return n}function vye(t,e,r,n,o){let s=0;if(r===t.length)return[];if(n===e.length)return null;if(!_ht(t.charCodeAt(r),e.charCodeAt(n))){let l=vht(t.charCodeAt(r));if(!l)return null;for(let u=0;u<l.length;u++)if(!_ht(l[u],e.charCodeAt(n+u)))return null;s+=l.length-1}let a=null,c=n+s+1;if(a=vye(t,e,r+1,c,o),!o)for(;!a&&(c=Pht(e,c))<e.length;)a=vye(t,e,r+1,c,o),c++;if(!a)return null;if(t.charCodeAt(r)!==e.charCodeAt(n)){let l=vht(t.charCodeAt(r));if(!l)return a;for(let u=0;u<l.length;u++)if(l[u]!==e.charCodeAt(n+u))return a}return Cye({start:n,end:n+s+1},a)}function Pht(t,e){for(let r=e;r<t.length;r++)if(Tz(t.charCodeAt(r))||r>0&&Tz(t.charCodeAt(r-1)))return r;return t.length}var hKr=Tye(un.matchesPrefix,Aye,bht),mKr=Tye(un.matchesPrefix,Aye,Cht),yht=new aKr.LRUCache(1e4);function gKr(t,e,r=!1){if(typeof t!="string"||typeof e!="string")return null;let n=yht.get(t);n||(n=new RegExp(Eye.convertSimple2RegExpPattern(t),"i"),yht.set(t,n));let o=n.exec(e);return o?[{start:o.index,end:o.index+o[0].length}]:r?mKr(t,e):hKr(t,e)}function _Kr(t,e){let r=_L(t,t.toLowerCase(),0,e,e.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});return r?Rht(r):null}function vKr(t,e,r,n,o,s){let a=Math.min(13,t.length);for(;r<a;r++){let c=_L(t,e,r,n,o,s,{firstMatchCanBeWeak:!0,boostFullMatch:!0});if(c)return c}return[0,s]}function Rht(t){if(typeof t>"u")return[];let e=[],r=t[1];for(let n=t.length-1;n>1;n--){let o=t[n]+r,s=e[e.length-1];s&&s.end===o?s.end=o+1:e.push({start:o,end:o+1})}return e}var Nv=128;function xye(){let t=[],e=[];for(let r=0;r<=Nv;r++)e[r]=0;for(let r=0;r<=Nv;r++)t.push(e.slice(0));return t}function Oht(t){let e=[];for(let r=0;r<=t;r++)e[r]=0;return e}var Mht=Oht(2*Nv),yye=Oht(2*Nv),Xp=xye(),Mv=xye(),gL=xye(),yKr=!1;function mye(t,e,r,n,o){function s(c,l,u=" "){for(;c.length<l;)c=u+c;return c}let a=` |   |${n.split("").map(c=>s(c,3)).join("|")}
`;for(let c=0;c<=r;c++)c===0?a+=" |":a+=`${e[c-1]}|`,a+=t[c].slice(0,o+1).map(l=>s(l.toString(),3)).join("|")+`
`;return a}function EKr(t,e,r,n){t=t.substr(e),r=r.substr(n),console.log(mye(Mv,t,t.length,r,r.length)),console.log(mye(gL,t,t.length,r,r.length)),console.log(mye(Xp,t,t.length,r,r.length))}function yz(t,e){if(e<0||e>=t.length)return!1;let r=t.codePointAt(e);switch(r){case 95:case 45:case 46:case 32:case 47:case 92:case 39:case 34:case 58:case 36:case 60:case 62:case 40:case 41:case 91:case 93:case 123:case 125:return!0;case void 0:return!1;default:return!!Eye.isEmojiImprecise(r)}}function Eht(t,e){if(e<0||e>=t.length)return!1;switch(t.charCodeAt(e)){case 32:case 9:return!0;default:return!1}}function Ez(t,e,r){return e[t]!==r[t]}function Nht(t,e,r,n,o,s,a=!1){for(;e<r&&o<s;)t[e]===n[o]&&(a&&(Mht[e]=o),e+=1),o+=1;return e===r}var Tht;(function(t){t.Default=[-100,0];function e(r){return!r||r.length===2&&r[0]===-100&&r[1]===0}t.isDefault=e})(Tht||(un.FuzzyScore=Tht={}));var Sz=class{static{this.default={boostFullMatch:!0,firstMatchCanBeWeak:!1}}constructor(e,r){this.firstMatchCanBeWeak=e,this.boostFullMatch=r}};un.FuzzyScoreOptions=Sz;function _L(t,e,r,n,o,s,a=Sz.default){let c=t.length>Nv?Nv:t.length,l=n.length>Nv?Nv:n.length;if(r>=c||s>=l||c-r>l-s||!Nht(e,r,c,o,s,l,!0))return;TKr(c,l,r,s,e,o);let u=1,d=1,f=r,p=s,h=[!1];for(u=1,f=r;f<c;u++,f++){let y=Mht[f],S=yye[f],b=f+1<c?yye[f+1]:l;for(d=y-s+1,p=y;p<b;d++,p++){let w=Number.MIN_SAFE_INTEGER,P=!1;p<=S&&(w=SKr(t,e,f,r,n,o,p,l,s,Xp[u-1][d-1]===0,h));let A=0;w!==Number.MIN_SAFE_INTEGER&&(P=!0,A=w+Mv[u-1][d-1]);let O=p>y,L=O?Mv[u][d-1]+(Xp[u][d-1]>0?-5:0):0,j=p>y+1&&Xp[u][d-1]>0,$=j?Mv[u][d-2]+(Xp[u][d-2]>0?-5:0):0;if(j&&(!O||$>=L)&&(!P||$>=A))Mv[u][d]=$,gL[u][d]=3,Xp[u][d]=0;else if(O&&(!P||L>=A))Mv[u][d]=L,gL[u][d]=2,Xp[u][d]=0;else if(P)Mv[u][d]=A,gL[u][d]=1,Xp[u][d]=Xp[u-1][d-1]+1;else throw new Error("not possible")}}if(yKr&&EKr(t,r,n,s),!h[0]&&!a.firstMatchCanBeWeak)return;u--,d--;let _=[Mv[u][d],s],g=0,v=0;for(;u>=1;){let y=d;do{let S=gL[u][y];if(S===3)y=y-2;else if(S===2)y=y-1;else break}while(y>=1);g>1&&e[r+u-1]===o[s+d-1]&&!Ez(y+s-1,n,o)&&g+1>Xp[u][y]&&(y=d),y===d?g++:g=1,v||(v=y),u--,d=y-1,_.push(d)}l-s===c&&a.boostFullMatch&&(_[0]+=2);let E=v-c;return _[0]-=E,_}function TKr(t,e,r,n,o,s){let a=t-1,c=e-1;for(;a>=r&&c>=n;)o[a]===s[c]&&(yye[a]=c,a--),c--}function SKr(t,e,r,n,o,s,a,c,l,u,d){if(e[r]!==s[a])return Number.MIN_SAFE_INTEGER;let f=1,p=!1;return a===r-n?f=t[r]===o[a]?7:5:Ez(a,o,s)&&(a===0||!Ez(a-1,o,s))?(f=t[r]===o[a]?7:5,p=!0):yz(s,a)&&(a===0||!yz(s,a-1))?f=5:(yz(s,a-1)||Eht(s,a-1))&&(f=5,p=!0),f>1&&r===n&&(d[0]=!0),p||(p=Ez(a,o,s)||yz(s,a-1)||Eht(s,a-1)),r===n?a>l&&(f-=p?3:5):u?f+=p?2:0:f+=p?0:1,a+1===c&&(f-=p?3:5),f}function bKr(t,e,r,n,o,s,a){return Lht(t,e,r,n,o,s,!0,a)}function CKr(t,e,r,n,o,s,a){return Lht(t,e,r,n,o,s,!1,a)}function Lht(t,e,r,n,o,s,a,c){let l=_L(t,e,r,n,o,s,c);if(l&&!a)return l;if(t.length>=3){let u=Math.min(7,t.length-1);for(let d=r+1;d<u;d++){let f=AKr(t,d);if(f){let p=_L(f,f.toLowerCase(),r,n,o,s,c);p&&(p[0]-=3,(!l||p[0]>l[0])&&(l=p))}}}return l}function AKr(t,e){if(e+1>=t.length)return;let r=t[e],n=t[e+1];if(r!==n)return t.slice(0,e)+n+r+t.slice(e+2)}});var Uht=m(Lv=>{"use strict";Object.defineProperty(Lv,"__esModule",{value:!0});Lv.escapeIcons=PKr;Lv.markdownEscapeEscapedIcons=OKr;Lv.stripIcons=NKr;Lv.getCodiconAriaLabel=LKr;Lv.parseLabelWithIcons=kKr;Lv.matchesFuzzyIconAware=DKr;var Dht=kht(),xKr=Fo(),Iye=h1e(),wKr="$(",Pye=new RegExp(`\\$\\(${Iye.ThemeIcon.iconNameExpression}(?:${Iye.ThemeIcon.iconModifierExpression})?\\)`,"g"),IKr=new RegExp(`(\\\\)?${Pye.source}`,"g");function PKr(t){return t.replace(IKr,(e,r)=>r?e:`\\${e}`)}var RKr=new RegExp(`\\\\${Pye.source}`,"g");function OKr(t){return t.replace(RKr,e=>`\\${e}`)}var MKr=new RegExp(`(\\s)?(\\\\)?${Pye.source}(\\s)?`,"g");function NKr(t){return t.indexOf(wKr)===-1?t:t.replace(MKr,(e,r,n,o)=>n?e:r||o||"")}function LKr(t){return t?t.replace(/\$\((.*?)\)/g,(e,r)=>` ${r} `).trim():""}var wye=new RegExp(`\\$\\(${Iye.ThemeIcon.iconNameCharacter}+\\)`,"g");function kKr(t){wye.lastIndex=0;let e="",r=[],n=0;for(;;){let o=wye.lastIndex,s=wye.exec(t),a=t.substring(o,s?.index);if(a.length>0){e+=a;for(let c=0;c<a.length;c++)r.push(n)}if(!s)break;n+=s[0].length}return{text:e,iconOffsets:r}}function DKr(t,e,r=!1){let{text:n,iconOffsets:o}=e;if(!o||o.length===0)return(0,Dht.matchesFuzzy)(t,n,r);let s=(0,xKr.ltrim)(n," "),a=n.length-s.length,c=(0,Dht.matchesFuzzy)(t,s,r);if(c)for(let l of c){let u=o[l.start+a]+a;l.start+=u,l.end+=u}return c}});var $ht=m(vl=>{"use strict";Object.defineProperty(vl,"__esModule",{value:!0});vl.MarkdownString=void 0;vl.isEmptyMarkdownString=qht;vl.isMarkdownString=Fht;vl.markdownStringEqual=$Kr;vl.escapeMarkdownSyntaxTokens=Az;vl.appendEscapedMarkdownCodeBlockFence=jht;vl.escapeDoubleQuotes=VKr;vl.removeMarkdownEscapes=HKr;vl.parseHrefAndDimensions=GKr;vl.markdownCommandLink=zKr;vl.createCommandUri=Bht;var UKr=Gr(),qKr=Uht(),FKr=oE(),jKr=E_(),BKr=Fo(),bz=Bi(),Cz=class t{static lift(e){let r=new t(e.value,e);return r.uris=e.uris,r.baseUri=e.baseUri?bz.URI.revive(e.baseUri):void 0,r}constructor(e="",r=!1){if(this.value=e,typeof this.value!="string")throw(0,UKr.illegalArgument)("value");typeof r=="boolean"?(this.isTrusted=r,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=r.isTrusted??void 0,this.supportThemeIcons=r.supportThemeIcons??!1,this.supportHtml=r.supportHtml??!1)}appendText(e,r=0){return this.value+=Az(this.supportThemeIcons?(0,qKr.escapeIcons)(e):e).replace(/([ \t]+)/g,(n,o)=>"&nbsp;".repeat(o.length)).replace(/\>/gm,"\\>").replace(/\n/g,r===1?`\\
`:`

`),this}appendMarkdown(e){return this.value+=e,this}appendCodeblock(e,r){return this.value+=`
${jht(r,e)}
`,this}appendLink(e,r,n){return this.value+="[",this.value+=this._escape(r,"]"),this.value+="](",this.value+=this._escape(String(e),")"),n&&(this.value+=` "${this._escape(this._escape(n,'"'),")")}"`),this.value+=")",this}_escape(e,r){let n=new RegExp((0,BKr.escapeRegExpCharacters)(r),"g");return e.replace(n,(o,s)=>e.charAt(s-1)!=="\\"?`\\${o}`:o)}};vl.MarkdownString=Cz;function qht(t){return Fht(t)?!t.value:Array.isArray(t)?t.every(qht):!0}function Fht(t){return t instanceof Cz?!0:t&&typeof t=="object"?typeof t.value=="string"&&(typeof t.isTrusted=="boolean"||typeof t.isTrusted=="object"||t.isTrusted===void 0)&&(typeof t.supportThemeIcons=="boolean"||t.supportThemeIcons===void 0):!1}function $Kr(t,e){return t===e?!0:!t||!e?!1:t.value===e.value&&t.isTrusted===e.isTrusted&&t.supportThemeIcons===e.supportThemeIcons&&t.supportHtml===e.supportHtml&&(t.baseUri===e.baseUri||!!t.baseUri&&!!e.baseUri&&(0,jKr.isEqual)(bz.URI.from(t.baseUri),bz.URI.from(e.baseUri)))}function Az(t){return t.replace(/[\\`*_{}[\]()#+\-!~]/g,"\\$&")}function jht(t,e){let r=t.match(/^`+/gm)?.reduce((o,s)=>o.length>s.length?o:s).length??0,n=r>=3?r+1:3;return[`${"`".repeat(n)}${e}`,t,`${"`".repeat(n)}`].join(`
`)}function VKr(t){return t.replace(/"/g,"&quot;")}function HKr(t){return t&&t.replace(/\\([\\`*_{}[\]()#+\-.!~])/g,"$1")}function GKr(t){let e=[],r=t.split("|").map(o=>o.trim());t=r[0];let n=r[1];if(n){let o=/height=(\d+)/.exec(n),s=/width=(\d+)/.exec(n),a=o?o[1]:"",c=s?s[1]:"",l=isFinite(parseInt(c)),u=isFinite(parseInt(a));l&&e.push(`width="${c}"`),u&&e.push(`height="${a}"`)}return{href:t,dimensions:e}}function zKr(t,e=!0){let r=Bht(t.id,...t.arguments||[]).toString();return`[${e?Az(t.title):t.title}](${r}${t.tooltip?` "${Az(t.tooltip)}"`:""})`}function Bht(t,...e){return bz.URI.from({scheme:FKr.Schemas.command,path:t,query:e.length?encodeURIComponent(JSON.stringify(e)):void 0})}});var Mye=m(Zb=>{"use strict";var WKr=Zb&&Zb.__decorate||function(t,e,r,n){var o=arguments.length,s=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(o<3?a(s):o>3?a(e,r,s):a(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},Rye;Object.defineProperty(Zb,"__esModule",{value:!0});Zb.MarkdownString=void 0;var KKr=$ht(),YKr=Jf(),Oye=Rye=class{#e;static isMarkdownString(e){return e instanceof Rye?!0:e&&e.appendCodeblock&&e.appendMarkdown&&e.appendText&&e.value!==void 0}constructor(e,r=!1){this.#e=new KKr.MarkdownString(e,{supportThemeIcons:r})}get value(){return this.#e.value}set value(e){this.#e.value=e}get isTrusted(){return this.#e.isTrusted}set isTrusted(e){this.#e.isTrusted=e}get supportThemeIcons(){return this.#e.supportThemeIcons}set supportThemeIcons(e){this.#e.supportThemeIcons=e}get supportHtml(){return this.#e.supportHtml}set supportHtml(e){this.#e.supportHtml=e}get baseUri(){return this.#e.baseUri}set baseUri(e){this.#e.baseUri=e}appendText(e){return this.#e.appendText(e),this}appendMarkdown(e){return this.#e.appendMarkdown(e),this}appendCodeblock(e,r){return this.#e.appendCodeblock(r??"",e),this}};Zb.MarkdownString=Oye;Zb.MarkdownString=Oye=Rye=WKr([YKr.es5ClassCompat],Oye)});var Ght=m(gg=>{"use strict";Object.defineProperty(gg,"__esModule",{value:!0});gg.Mimes=void 0;gg.getMediaOrTextMime=ZKr;gg.getMediaMime=Hht;gg.getExtensionForMimeType=JKr;gg.normalizeMimeType=eYr;gg.isTextStreamMime=tYr;var Vht=Nl();gg.Mimes=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list",html:"text/html"});var QKr={".css":"text/css",".csv":"text/csv",".htm":"text/html",".html":"text/html",".ics":"text/calendar",".js":"text/javascript",".mjs":"text/javascript",".txt":"text/plain",".xml":"text/xml"},Nye={".aac":"audio/x-aac",".avi":"video/x-msvideo",".bmp":"image/bmp",".flv":"video/x-flv",".gif":"image/gif",".ico":"image/x-icon",".jpe":"image/jpg",".jpeg":"image/jpg",".jpg":"image/jpg",".m1v":"video/mpeg",".m2a":"audio/mpeg",".m2v":"video/mpeg",".m3a":"audio/mpeg",".mid":"audio/midi",".midi":"audio/midi",".mk3d":"video/x-matroska",".mks":"video/x-matroska",".mkv":"video/x-matroska",".mov":"video/quicktime",".movie":"video/x-sgi-movie",".mp2":"audio/mpeg",".mp2a":"audio/mpeg",".mp3":"audio/mpeg",".mp4":"video/mp4",".mp4a":"audio/mp4",".mp4v":"video/mp4",".mpe":"video/mpeg",".mpeg":"video/mpeg",".mpg":"video/mpeg",".mpg4":"video/mp4",".mpga":"audio/mpeg",".oga":"audio/ogg",".ogg":"audio/ogg",".opus":"audio/opus",".ogv":"video/ogg",".png":"image/png",".psd":"image/vnd.adobe.photoshop",".qt":"video/quicktime",".spx":"audio/ogg",".svg":"image/svg+xml",".tga":"image/x-tga",".tif":"image/tiff",".tiff":"image/tiff",".wav":"audio/x-wav",".webm":"video/webm",".webp":"image/webp",".wma":"audio/x-ms-wma",".wmv":"video/x-ms-wmv",".woff":"application/font-woff"};function ZKr(t){let e=(0,Vht.extname)(t),r=QKr[e.toLowerCase()];return r!==void 0?r:Hht(t)}function Hht(t){let e=(0,Vht.extname)(t);return Nye[e.toLowerCase()]}function JKr(t){for(let e in Nye)if(Nye[e]===t)return e}var XKr=/^(.+)\/(.+?)(;.+)?$/;function eYr(t,e){let r=XKr.exec(t);return r?`${r[1].toLowerCase()}/${r[2].toLowerCase()}${r[3]??""}`:e?void 0:t}function tYr(t){return["application/vnd.code.notebook.stdout","application/vnd.code.notebook.stderr"].includes(t)}});var Kht=m(zo=>{"use strict";var rYr=zo&&zo.__decorate||function(t,e,r,n){var o=arguments.length,s=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(o<3?a(s):o>3?a(e,r,s):a(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},kv;Object.defineProperty(zo,"__esModule",{value:!0});zo.NotebookCellOutput=zo.NotebookCellOutputItem=zo.NotebookEdit=zo.NotebookData=zo.NotebookCellData=zo.NotebookRange=zo.NotebookCellKind=void 0;var nYr=Jf(),zht=Gr(),xz=Ght(),iYr=ws(),Wht;(function(t){t[t.Markup=1]="Markup",t[t.Code=2]="Code"})(Wht||(zo.NotebookCellKind=Wht={}));var Jb=class t{static isNotebookRange(e){return e instanceof t?!0:e?typeof e.start=="number"&&typeof e.end=="number":!1}get start(){return this._start}get end(){return this._end}get isEmpty(){return this._start===this._end}constructor(e,r){if(e<0)throw(0,zht.illegalArgument)("start must be positive");if(r<0)throw(0,zht.illegalArgument)("end must be positive");e<=r?(this._start=e,this._end=r):(this._start=r,this._end=e)}with(e){let r=this._start,n=this._end;return e.start!==void 0&&(r=e.start),e.end!==void 0&&(n=e.end),r===this._start&&n===this._end?this:new t(r,n)}};zo.NotebookRange=Jb;var Lye=class t{static validate(e){if(typeof e.kind!="number")throw new Error("NotebookCellData MUST have 'kind' property");if(typeof e.value!="string")throw new Error("NotebookCellData MUST have 'value' property");if(typeof e.languageId!="string")throw new Error("NotebookCellData MUST have 'languageId' property")}static isNotebookCellDataArray(e){return Array.isArray(e)&&e.every(r=>t.isNotebookCellData(r))}static isNotebookCellData(e){return!0}constructor(e,r,n,o,s,a,c){this.kind=e,this.value=r,this.languageId=n,this.mime=o,this.outputs=s??[],this.metadata=a,this.executionSummary=c,t.validate(this)}};zo.NotebookCellData=Lye;var kye=class{constructor(e){this.cells=e}};zo.NotebookData=kye;var Dye=kv=class{static isNotebookCellEdit(e){return e instanceof kv?!0:e?Jb.isNotebookRange(e)&&Array.isArray(e.newCells):!1}static replaceCells(e,r){return new kv(e,r)}static insertCells(e,r){return new kv(new Jb(e,e),r)}static deleteCells(e){return new kv(e,[])}static updateCellMetadata(e,r){let n=new kv(new Jb(e,e),[]);return n.newCellMetadata=r,n}static updateNotebookMetadata(e){let r=new kv(new Jb(0,0),[]);return r.newNotebookMetadata=e,r}constructor(e,r){this.range=e,this.newCells=r}};zo.NotebookEdit=Dye;zo.NotebookEdit=Dye=kv=rYr([nYr.es5ClassCompat],Dye);var Uye=class t{static isNotebookCellOutputItem(e){return e instanceof t?!0:e?typeof e.mime=="string"&&e.data instanceof Uint8Array:!1}static error(e){let r={name:e.name,message:e.message,stack:e.stack};return t.json(r,"application/vnd.code.notebook.error")}static stdout(e){return t.text(e,"application/vnd.code.notebook.stdout")}static stderr(e){return t.text(e,"application/vnd.code.notebook.stderr")}static bytes(e,r="application/octet-stream"){return new t(e,r)}static#e=new TextEncoder;static text(e,r=xz.Mimes.text){let n=t.#e.encode(String(e));return new t(n,r)}static json(e,r="text/x-json"){let n=JSON.stringify(e,void 0,"	");return t.text(n,r)}constructor(e,r){this.data=e,this.mime=r;let n=(0,xz.normalizeMimeType)(r,!0);if(!n)throw new Error(`INVALID mime type: ${r}. Must be in the format "type/subtype[;optionalparameter]"`);this.mime=n}};zo.NotebookCellOutputItem=Uye;var qye=class t{static isNotebookCellOutput(e){return e instanceof t?!0:!e||typeof e!="object"?!1:typeof e.id=="string"&&Array.isArray(e.items)}static ensureUniqueMimeTypes(e,r=!1){let n=new Set,o=new Set;for(let s=0;s<e.length;s++){let a=e[s],c=(0,xz.normalizeMimeType)(a.mime);if(!n.has(c)||(0,xz.isTextStreamMime)(c)){n.add(c);continue}o.add(s),r&&console.warn(`DUPLICATED mime type '${a.mime}' will be dropped`)}return o.size===0?e:e.filter((s,a)=>!o.has(a))}constructor(e,r,n){this.items=t.ensureUniqueMimeTypes(e,!0),typeof r=="string"?(this.id=r,this.metadata=n):(this.id=(0,iYr.generateUuid)(),this.metadata=r??n)}};zo.NotebookCellOutput=qye});var Qht=m(Uv=>{"use strict";var oYr=Uv&&Uv.__decorate||function(t,e,r,n){var o=arguments.length,s=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(o<3?a(s):o>3?a(e,r,s):a(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},Fye;Object.defineProperty(Uv,"__esModule",{value:!0});Uv.Selection=void 0;Uv.getDebugDescriptionOfSelection=Yht;var sYr=Jf(),Dv=eR(),jye=mg(),Bye=Fye=class extends jye.Range{static isSelection(e){return e instanceof Fye?!0:e?jye.Range.isRange(e)&&Dv.Position.isPosition(e.anchor)&&Dv.Position.isPosition(e.active)&&typeof e.isReversed=="boolean":!1}get anchor(){return this._anchor}get active(){return this._active}constructor(e,r,n,o){let s,a;if(typeof e=="number"&&typeof r=="number"&&typeof n=="number"&&typeof o=="number"?(s=new Dv.Position(e,r),a=new Dv.Position(n,o)):Dv.Position.isPosition(e)&&Dv.Position.isPosition(r)&&(s=Dv.Position.of(e),a=Dv.Position.of(r)),!s||!a)throw new Error("Invalid arguments");super(s,a),this._anchor=s,this._active=a}get isReversed(){return this._anchor===this._end}toJSON(){return{start:this.start,end:this.end,active:this.active,anchor:this.anchor}}[Symbol.for("debug.description")](){return Yht(this)}};Uv.Selection=Bye;Uv.Selection=Bye=Fye=oYr([sYr.es5ClassCompat],Bye);function Yht(t){let e=(0,jye.getDebugDescriptionOfRange)(t);return t.isEmpty||(t.active.isEqual(t.start)?e=`|${e}`:e=`${e}|`),e}});var Vye=m(eC=>{"use strict";var aYr=eC&&eC.__decorate||function(t,e,r,n){var o=arguments.length,s=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(o<3?a(s):o>3?a(e,r,s):a(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},Xb;Object.defineProperty(eC,"__esModule",{value:!0});eC.SnippetString=void 0;var cYr=Jf(),$ye=Xb=class{static isSnippetString(e){return e instanceof Xb?!0:e?typeof e.value=="string":!1}static _escape(e){return e.replace(/\$|}|\\/g,"\\$&")}constructor(e){this._tabstop=1,this.value=e||""}appendText(e){return this.value+=Xb._escape(e),this}appendTabstop(e=this._tabstop++){return this.value+="$",this.value+=e,this}appendPlaceholder(e,r=this._tabstop++){if(typeof e=="function"){let n=new Xb;n._tabstop=this._tabstop,e(n),this._tabstop=n._tabstop,e=n.value}else e=Xb._escape(e);return this.value+="${",this.value+=r,this.value+=":",this.value+=e,this.value+="}",this}appendChoice(e,r=this._tabstop++){let n=e.map(o=>o.replaceAll(/[|\\,]/g,"\\$&")).join(",");return this.value+="${",this.value+=r,this.value+="|",this.value+=n,this.value+="|}",this}appendVariable(e,r){if(typeof r=="function"){let n=new Xb;n._tabstop=this._tabstop,r(n),this._tabstop=n._tabstop,r=n.value}else typeof r=="string"&&(r=r.replace(/\$|}/g,"\\$&"));return this.value+="${",this.value+=e,r&&(this.value+=":",this.value+=r),this.value+="}",this}};eC.SnippetString=$ye;eC.SnippetString=$ye=Xb=aYr([cYr.es5ClassCompat],$ye)});var Gye=m(wz=>{"use strict";Object.defineProperty(wz,"__esModule",{value:!0});wz.SnippetTextEdit=void 0;var lYr=Vye(),Zht=mg(),Hye=class t{static isSnippetTextEdit(e){return e instanceof t?!0:e?Zht.Range.isRange(e.range)&&lYr.SnippetString.isSnippetString(e.snippet):!1}static replace(e,r){return new t(e,r)}static insert(e,r){return t.replace(new Zht.Range(e,e),r)}constructor(e,r){this.range=e,this.snippet=r}};wz.SnippetTextEdit=Hye});var emt=m(Xf=>{"use strict";var uYr=Xf&&Xf.__decorate||function(t,e,r,n){var o=arguments.length,s=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(o<3?a(s):o>3?a(e,r,s):a(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},zye;Object.defineProperty(Xf,"__esModule",{value:!0});Xf.SymbolInformation=Xf.SymbolTag=Xf.SymbolKind=void 0;var dYr=Jf(),Jht=lye(),fYr=mg(),Wye;(function(t){t[t.File=0]="File",t[t.Module=1]="Module",t[t.Namespace=2]="Namespace",t[t.Package=3]="Package",t[t.Class=4]="Class",t[t.Method=5]="Method",t[t.Property=6]="Property",t[t.Field=7]="Field",t[t.Constructor=8]="Constructor",t[t.Enum=9]="Enum",t[t.Interface=10]="Interface",t[t.Function=11]="Function",t[t.Variable=12]="Variable",t[t.Constant=13]="Constant",t[t.String=14]="String",t[t.Number=15]="Number",t[t.Boolean=16]="Boolean",t[t.Array=17]="Array",t[t.Object=18]="Object",t[t.Key=19]="Key",t[t.Null=20]="Null",t[t.EnumMember=21]="EnumMember",t[t.Struct=22]="Struct",t[t.Event=23]="Event",t[t.Operator=24]="Operator",t[t.TypeParameter=25]="TypeParameter"})(Wye||(Xf.SymbolKind=Wye={}));var Xht;(function(t){t[t.Deprecated=1]="Deprecated"})(Xht||(Xf.SymbolTag=Xht={}));var Kye=zye=class{static validate(e){if(!e.name)throw new Error("name must not be falsy")}constructor(e,r,n,o,s){this.name=e,this.kind=r,this.containerName=s,typeof n=="string"&&(this.containerName=n),o instanceof Jht.Location?this.location=o:n instanceof fYr.Range&&(this.location=new Jht.Location(o,n)),zye.validate(this)}toJSON(){return{name:this.name,kind:Wye[this.kind],location:this.location,containerName:this.containerName}}};Xf.SymbolInformation=Kye;Xf.SymbolInformation=Kye=zye=uYr([dYr.es5ClassCompat],Kye)});var Zye=m(_g=>{"use strict";var pYr=_g&&_g.__decorate||function(t,e,r,n){var o=arguments.length,s=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(o<3?a(s):o>3?a(e,r,s):a(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},tC;Object.defineProperty(_g,"__esModule",{value:!0});_g.TextEdit=_g.EndOfLine=void 0;var Yye=Gr(),hYr=Jf(),tmt=eR(),Iz=mg(),rmt;(function(t){t[t.LF=1]="LF",t[t.CRLF=2]="CRLF"})(rmt||(_g.EndOfLine=rmt={}));var Qye=tC=class{static isTextEdit(e){return e instanceof tC?!0:e?Iz.Range.isRange(e)&&typeof e.newText=="string":!1}static replace(e,r){return new tC(e,r)}static insert(e,r){return tC.replace(new Iz.Range(e,e),r)}static delete(e){return tC.replace(e,"")}static setEndOfLine(e){let r=new tC(new Iz.Range(new tmt.Position(0,0),new tmt.Position(0,0)),"");return r.newEol=e,r}get range(){return this._range}set range(e){if(e&&!Iz.Range.isRange(e))throw(0,Yye.illegalArgument)("range");this._range=e}get newText(){return this._newText||""}set newText(e){if(e&&typeof e!="string")throw(0,Yye.illegalArgument)("newText");this._newText=e}get newEol(){return this._newEol}set newEol(e){if(e&&typeof e!="number")throw(0,Yye.illegalArgument)("newEol");this._newEol=e}constructor(e,r){this._range=e,this._newText=r}toJSON(){return{range:this.range,newText:this.newText,newEol:this._newEol}}};_g.TextEdit=Qye;_g.TextEdit=Qye=tC=pYr([hYr.es5ClassCompat],Qye)});var fmt=m(_e=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0});_e.LanguageModelChatToolMode=_e.LanguageModelChatMessageRole=_e.LanguageModelToolResultPart2=_e.LanguageModelToolResultPart=_e.LanguageModelToolCallPart=_e.LanguageModelToolMCPSource=_e.LanguageModelToolExtensionSource=_e.ChatResponseClearToPreviousToolInvocationReason=_e.ChatRequestEditedFileEventKind=_e.ChatErrorLevel=_e.AISearchKeyword=_e.TextSearchMatch2=_e.ExcludeSettingOptions=_e.LanguageModelPromptTsxPart=_e.ChatImageMimeType=_e.LanguageModelDataPart2=_e.LanguageModelDataPart=_e.LanguageModelThinkingPart=_e.LanguageModelTextPart2=_e.LanguageModelPartAudience=_e.LanguageModelTextPart=_e.LanguageModelToolResult2=_e.LanguageModelToolResult=_e.ChatReferenceBinaryData=_e.ChatReferenceDiagnostic=_e.ChatRequestNotebookData=_e.ChatRequestEditorData=_e.ChatResponseTurn=_e.ChatRequestTurn=_e.ChatPrepareToolInvocationPart=_e.ChatResponseConfirmationPart=_e.ChatResponseNotebookEditPart=_e.ChatResponseTextEditPart=_e.ChatResponseMarkdownWithVulnerabilitiesPart=_e.ChatResponseCommandButtonPart=_e.ChatResponseCodeCitationPart=_e.ChatResponsePullRequestPart=_e.ChatResponseExtensionsPart=_e.ChatResponseMovePart=_e.ChatResponseReferencePart2=_e.ChatResponseReferencePart=_e.ChatResponseWarningPart=_e.ChatResponseProgressPart2=_e.ChatResponseExternalEditPart=_e.ChatResponseThinkingProgressPart=_e.ChatResponseProgressPart=_e.ChatResponseAnchorPart=_e.ChatResponseFileTreePart=_e.ChatResponseCodeblockUriPart=_e.ChatResponseMarkdownPart=void 0;_e.LanguageModelError=_e.ChatSessionStatus=_e.ChatResponseTurn2=_e.ChatToolInvocationPart=_e.LanguageModelChatMessage=void 0;var nmt=V1(),$Ee=Mye(),Jye=class{constructor(e){this.value=typeof e=="string"?new $Ee.MarkdownString(e):e}};_e.ChatResponseMarkdownPart=Jye;var Xye=class{constructor(e,r,n){this.value=e,this.undoStopId=n}};_e.ChatResponseCodeblockUriPart=Xye;var eEe=class{constructor(e,r){this.value=e,this.baseUri=r}};_e.ChatResponseFileTreePart=eEe;var tEe=class{constructor(e,r){this.value=e,this.title=r}};_e.ChatResponseAnchorPart=tEe;var rEe=class{constructor(e){this.value=e}};_e.ChatResponseProgressPart=rEe;var nEe=class{constructor(e,r,n){this.value=e,this.id=r,this.metadata=n}};_e.ChatResponseThinkingProgressPart=nEe;var iEe=class{constructor(e,r){this.uris=e,this.callback=r,this.applied=new Promise(n=>{this.didGetApplied=n})}};_e.ChatResponseExternalEditPart=iEe;var oEe=class{constructor(e,r){this.value=e,this.task=r}};_e.ChatResponseProgressPart2=oEe;var sEe=class{constructor(e){this.value=typeof e=="string"?new $Ee.MarkdownString(e):e}};_e.ChatResponseWarningPart=sEe;var aEe=class{constructor(e){this.value=e}};_e.ChatResponseReferencePart=aEe;var cEe=class{constructor(e,r,n){this.value=e,this.iconPath=r,this.options=n}};_e.ChatResponseReferencePart2=cEe;var lEe=class{constructor(e,r){this.uri=e,this.range=r}};_e.ChatResponseMovePart=lEe;var uEe=class{constructor(e){this.extensions=e}};_e.ChatResponseExtensionsPart=uEe;var dEe=class{constructor(e,r,n,o,s){this.uri=e,this.title=r,this.description=n,this.author=o,this.linkTag=s}};_e.ChatResponsePullRequestPart=dEe;var fEe=class{constructor(e,r,n){this.value=e,this.license=r,this.snippet=n}};_e.ChatResponseCodeCitationPart=fEe;var pEe=class{constructor(e){this.value=e}};_e.ChatResponseCommandButtonPart=pEe;var hEe=class{constructor(e,r){this.value=typeof e=="string"?new $Ee.MarkdownString(e):e,this.vulnerabilities=r}};_e.ChatResponseMarkdownWithVulnerabilitiesPart=hEe;var mEe=class{constructor(e,r){this.uri=e,r===!0?(this.isDone=!0,this.edits=[]):this.edits=Array.isArray(r)?r:[r]}};_e.ChatResponseTextEditPart=mEe;var gEe=class{constructor(e,r){this.uri=e,r===!0?(this.isDone=!0,this.edits=[]):this.edits=Array.isArray(r)?r:[r]}};_e.ChatResponseNotebookEditPart=gEe;var _Ee=class{constructor(e,r,n,o){this.title=e,this.message=r,this.data=n,this.buttons=o}};_e.ChatResponseConfirmationPart=_Ee;var vEe=class{constructor(e){this.toolName=e}};_e.ChatPrepareToolInvocationPart=vEe;var yEe=class{constructor(e,r,n,o,s){this.prompt=e,this.command=r,this.references=n,this.participant=o,this.toolReferences=s}};_e.ChatRequestTurn=yEe;var EEe=class{constructor(e,r,n,o){this.response=e,this.result=r,this.participant=n,this.command=o}};_e.ChatResponseTurn=EEe;var TEe=class{constructor(e,r,n){this.document=e,this.selection=r,this.wholeRange=n}};_e.ChatRequestEditorData=TEe;var SEe=class{constructor(e){this.cell=e}};_e.ChatRequestNotebookData=SEe;var bEe=class{constructor(e){this.diagnostics=e}};_e.ChatReferenceDiagnostic=bEe;var CEe=class{constructor(e,r){this.mimeType=e,this.data=r}};_e.ChatReferenceBinaryData=CEe;var AEe=class{constructor(e){this.content=e}};_e.LanguageModelToolResult=AEe;var xEe=class{constructor(e){this.content=e}};_e.LanguageModelToolResult2=xEe;var Pz=class{constructor(e){this.value=e}};_e.LanguageModelTextPart=Pz;var imt;(function(t){t[t.Assistant=0]="Assistant",t[t.User=1]="User",t[t.Extension=2]="Extension"})(imt||(_e.LanguageModelPartAudience=imt={}));var wEe=class extends Pz{constructor(e,r){super(e),this.audience=r}};_e.LanguageModelTextPart2=wEe;var IEe=class{constructor(e,r,n){this.value=e,this.id=r,this.metadata=n}};_e.LanguageModelThinkingPart=IEe;var Rz=class t{constructor(e,r){this.mimeType=r,this.data=e}static image(e,r){return new t(e,r)}static json(e){let r=JSON.stringify(e,void 0,"	");return new t(nmt.VSBuffer.fromString(r).buffer,"json")}static text(e){return new t(nmt.VSBuffer.fromString(e).buffer,"text/plain")}};_e.LanguageModelDataPart=Rz;var PEe=class extends Rz{constructor(e,r,n){super(e,r),this.audience=n}};_e.LanguageModelDataPart2=PEe;var omt;(function(t){t.PNG="image/png",t.JPEG="image/jpeg",t.GIF="image/gif",t.WEBP="image/webp",t.BMP="image/bmp"})(omt||(_e.ChatImageMimeType=omt={}));var REe=class{constructor(e){this.value=e}};_e.LanguageModelPromptTsxPart=REe;var smt;(function(t){t[t.None=1]="None",t[t.FilesExclude=2]="FilesExclude",t[t.SearchAndFilesExclude=3]="SearchAndFilesExclude"})(smt||(_e.ExcludeSettingOptions=smt={}));var OEe=class{constructor(e,r,n){this.uri=e,this.ranges=r,this.previewText=n}};_e.TextSearchMatch2=OEe;var MEe=class{constructor(e){this.keyword=e}};_e.AISearchKeyword=MEe;var amt;(function(t){t[t.Info=0]="Info",t[t.Warning=1]="Warning",t[t.Error=2]="Error"})(amt||(_e.ChatErrorLevel=amt={}));var cmt;(function(t){t[t.Keep=1]="Keep",t[t.Undo=2]="Undo",t[t.UserModification=3]="UserModification"})(cmt||(_e.ChatRequestEditedFileEventKind=cmt={}));var lmt;(function(t){t[t.NoReason=0]="NoReason",t[t.FilteredContentRetry=1]="FilteredContentRetry",t[t.CopyrightContentRetry=2]="CopyrightContentRetry"})(lmt||(_e.ChatResponseClearToPreviousToolInvocationReason=lmt={}));var NEe=class{constructor(e,r){this.id=e,this.label=r}};_e.LanguageModelToolExtensionSource=NEe;var LEe=class{constructor(e,r,n){this.label=e,this.name=r,this.instructions=n}};_e.LanguageModelToolMCPSource=LEe;var kEe=class{constructor(e,r,n){this.callId=e,this.name=r,this.input=n}};_e.LanguageModelToolCallPart=kEe;var DEe=class{constructor(e,r,n){this.callId=e,this.content=r,this.isError=n??!1}};_e.LanguageModelToolResultPart=DEe;var UEe=class{constructor(e,r,n){this.callId=e,this.content=r,this.isError=n??!1}};_e.LanguageModelToolResultPart2=UEe;var Oz;(function(t){t[t.User=1]="User",t[t.Assistant=2]="Assistant",t[t.System=3]="System"})(Oz||(_e.LanguageModelChatMessageRole=Oz={}));var umt;(function(t){t[t.Auto=1]="Auto",t[t.Required=2]="Required"})(umt||(_e.LanguageModelChatToolMode=umt={}));var qEe=class t{constructor(e,r,n){this.role=e,this.content=typeof r=="string"?[{type:"text",value:r}]:r,this.name=n}static User(e,r){return new t(Oz.User,e,r)}static Assistant(e,r){return new t(Oz.Assistant,e,r)}};_e.LanguageModelChatMessage=qEe;var FEe=class{constructor(e,r,n){this.toolName=e,this.toolCallId=r,this.isError=n}};_e.ChatToolInvocationPart=FEe;var jEe=class{constructor(e,r,n,o){this.response=e,this.result=r,this.participant=n,this.command=o}};_e.ChatResponseTurn2=jEe;var dmt;(function(t){t[t.Failed=0]="Failed",t[t.Completed=1]="Completed",t[t.InProgress=2]="InProgress"})(dmt||(_e.ChatSessionStatus=dmt={}));var BEe=class t extends Error{static#e="LanguageModelError";static NotFound(e){return new t(e,t.NotFound.name)}static NoPermissions(e){return new t(e,t.NoPermissions.name)}static Blocked(e){return new t(e,t.Blocked.name)}constructor(e,r,n){super(e,{cause:n}),this.name=t.#e,this.code=r??""}};_e.LanguageModelError=BEe});var mmt=m(qv=>{"use strict";Object.defineProperty(qv,"__esModule",{value:!0});qv.TextDocumentChangeReason=qv.TextEditorSelectionChangeKind=qv.WorkspaceEdit=void 0;var mYr=Ui(),gYr=f_(),_Yr=mg(),vYr=Gye(),yYr=Zye(),VEe=class{constructor(){this._edits=[]}_allEntries(){return this._edits}renameFile(e,r,n,o){this._edits.push({_type:1,from:e,to:r,options:n,metadata:o})}createFile(e,r,n){this._edits.push({_type:1,from:void 0,to:e,options:r,metadata:n})}deleteFile(e,r,n){this._edits.push({_type:1,from:e,to:void 0,options:r,metadata:n})}replace(e,r,n,o){this._edits.push({_type:2,uri:e,edit:new yYr.TextEdit(r,n),metadata:o})}insert(e,r,n,o){this.replace(e,new _Yr.Range(r,r),n,o)}delete(e,r,n){this.replace(e,r,"",n)}has(e){return this._edits.some(r=>r._type===2&&r.uri.toString()===e.toString())}set(e,r){if(r)for(let n of r){if(!n)continue;let o,s;Array.isArray(n)?(o=n[0],s=n[1]):o=n,vYr.SnippetTextEdit.isSnippetTextEdit(o)?this._edits.push({_type:6,uri:e,range:o.range,edit:o.snippet,metadata:s}):this._edits.push({_type:2,uri:e,edit:o,metadata:s})}else{for(let n=0;n<this._edits.length;n++){let o=this._edits[n];switch(o._type){case 2:case 6:o.uri.toString()===e.toString()&&(this._edits[n]=void 0);break}}(0,mYr.coalesceInPlace)(this._edits)}}get(e){let r=[];for(let n of this._edits)n._type===2&&n.uri.toString()===e.toString()&&r.push(n.edit);return r}entries(){let e=new gYr.ResourceMap;for(let r of this._edits)if(r._type===2){let n=e.get(r.uri);n||(n=[r.uri,[]],e.set(r.uri,n)),n[1].push(r.edit)}return[...e.values()]}get size(){return this.entries().length}toJSON(){return this.entries()}};qv.WorkspaceEdit=VEe;var pmt;(function(t){t[t.Keyboard=1]="Keyboard",t[t.Mouse=2]="Mouse",t[t.Command=3]="Command"})(pmt||(qv.TextEditorSelectionChangeKind=pmt={}));var hmt;(function(t){t[t.Undo=1]="Undo",t[t.Redo=2]="Redo"})(hmt||(qv.TextDocumentChangeReason=hmt={}))});var xmt=m(Zi=>{"use strict";Object.defineProperty(Zi,"__esModule",{value:!0});Zi.FileType=Zi.ChatSessionStatus=Zi.ChatLocation=Zi.ChatVariableLevel=Zi.ExtensionMode=Zi.DiagnosticSeverity=Zi.TextEditorRevealType=Zi.TextEditorLineNumbersStyle=Zi.TextEditorCursorStyle=Zi.InteractiveEditorResponseFeedbackKind=void 0;var gmt;(function(t){t[t.Unhelpful=0]="Unhelpful",t[t.Helpful=1]="Helpful",t[t.Undone=2]="Undone",t[t.Accepted=3]="Accepted",t[t.Bug=4]="Bug"})(gmt||(Zi.InteractiveEditorResponseFeedbackKind=gmt={}));var _mt;(function(t){t[t.Line=1]="Line",t[t.Block=2]="Block",t[t.Underline=3]="Underline",t[t.LineThin=4]="LineThin",t[t.BlockOutline=5]="BlockOutline",t[t.UnderlineThin=6]="UnderlineThin"})(_mt||(Zi.TextEditorCursorStyle=_mt={}));var vmt;(function(t){t[t.Off=0]="Off",t[t.On=1]="On",t[t.Relative=2]="Relative",t[t.Interval=3]="Interval"})(vmt||(Zi.TextEditorLineNumbersStyle=vmt={}));var ymt;(function(t){t[t.Default=0]="Default",t[t.InCenter=1]="InCenter",t[t.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",t[t.AtTop=3]="AtTop"})(ymt||(Zi.TextEditorRevealType=ymt={}));var Emt;(function(t){t[t.Error=0]="Error",t[t.Warning=1]="Warning",t[t.Information=2]="Information",t[t.Hint=3]="Hint"})(Emt||(Zi.DiagnosticSeverity=Emt={}));var Tmt;(function(t){t[t.Production=1]="Production",t[t.Development=2]="Development",t[t.Test=3]="Test"})(Tmt||(Zi.ExtensionMode=Tmt={}));var Smt;(function(t){t[t.Short=1]="Short",t[t.Medium=2]="Medium",t[t.Full=3]="Full"})(Smt||(Zi.ChatVariableLevel=Smt={}));var bmt;(function(t){t[t.Panel=1]="Panel",t[t.Terminal=2]="Terminal",t[t.Notebook=3]="Notebook",t[t.Editor=4]="Editor"})(bmt||(Zi.ChatLocation=bmt={}));var Cmt;(function(t){t[t.Failed=0]="Failed",t[t.Completed=1]="Completed",t[t.InProgress=2]="InProgress"})(Cmt||(Zi.ChatSessionStatus=Cmt={}));var Amt;(function(t){t[t.Unknown=0]="Unknown",t[t.File=1]="File",t[t.Directory=2]="Directory",t[t.SymbolicLink=64]="SymbolicLink"})(Amt||(Zi.FileType=Amt={}))});var Imt=m(HEe=>{"use strict";Object.defineProperty(HEe,"__esModule",{value:!0});HEe.t=EYr;function EYr(...t){if(typeof t[0]=="string"){let e=t.shift(),r=!t||typeof t[0]!="object"?t:t[0];return wmt({message:e,args:r})}return wmt(t[0])}function wmt(t){let{message:e,args:r}=t;return SYr(e,r??{})}var TYr=/{([^}]+)}/g;function SYr(t,e){return t.replace(TYr,(r,n)=>e[n]??r)}});var Omt=m(Fv=>{"use strict";Object.defineProperty(Fv,"__esModule",{value:!0});Fv.NewSymbolName=Fv.NewSymbolNameTriggerKind=Fv.NewSymbolNameTag=void 0;var Pmt;(function(t){t[t.AIGenerated=1]="AIGenerated"})(Pmt||(Fv.NewSymbolNameTag=Pmt={}));var Rmt;(function(t){t[t.Invoke=0]="Invoke",t[t.Automatic=1]="Automatic"})(Rmt||(Fv.NewSymbolNameTriggerKind=Rmt={}));var GEe=class{constructor(e,r){this.newSymbolName=e,this.tags=r}};Fv.NewSymbolName=GEe});var Nmt=m(Mz=>{"use strict";Object.defineProperty(Mz,"__esModule",{value:!0});Mz.TerminalShellExecutionCommandLineConfidence=void 0;var Mmt;(function(t){t[t.Low=0]="Low",t[t.Medium=1]="Medium",t[t.High=2]="High"})(Mmt||(Mz.TerminalShellExecutionCommandLineConfidence=Mmt={}))});var cc=m((t$n,Umt)=>{"use strict";var bYr=Oh(),CYr=Fi(),AYr=Bi(),Lmt=mht(),xYr=lye(),wYr=Mye(),yL=Kht(),IYr=eR(),PYr=mg(),RYr=Qht(),OYr=Vye(),MYr=Gye(),kmt=emt(),Dmt=Zye(),Ct=fmt(),zEe=mmt(),jv=xmt(),NYr=Imt(),WEe=Omt(),LYr=Nmt(),kYr={Position:IYr.Position,Range:PYr.Range,Selection:RYr.Selection,EventEmitter:CYr.Emitter,CancellationTokenSource:bYr.CancellationTokenSource,Diagnostic:Lmt.Diagnostic,Location:xYr.Location,DiagnosticRelatedInformation:Lmt.DiagnosticRelatedInformation,TextEdit:Dmt.TextEdit,WorkspaceEdit:zEe.WorkspaceEdit,Uri:AYr.URI,MarkdownString:wYr.MarkdownString,DiagnosticSeverity:jv.DiagnosticSeverity,TextEditorCursorStyle:jv.TextEditorCursorStyle,TextEditorLineNumbersStyle:jv.TextEditorLineNumbersStyle,TextEditorRevealType:jv.TextEditorRevealType,EndOfLine:Dmt.EndOfLine,l10n:{t:NYr.t},ExtensionMode:jv.ExtensionMode,ChatVariableLevel:jv.ChatVariableLevel,ChatResponseClearToPreviousToolInvocationReason:Ct.ChatResponseClearToPreviousToolInvocationReason,ChatResponseMarkdownPart:Ct.ChatResponseMarkdownPart,ChatResponseFileTreePart:Ct.ChatResponseFileTreePart,ChatResponseAnchorPart:Ct.ChatResponseAnchorPart,ChatResponseMovePart:Ct.ChatResponseMovePart,ChatResponseExtensionsPart:Ct.ChatResponseExtensionsPart,ChatResponseProgressPart:Ct.ChatResponseProgressPart,ChatResponseProgressPart2:Ct.ChatResponseProgressPart2,ChatResponseWarningPart:Ct.ChatResponseWarningPart,ChatResponseReferencePart:Ct.ChatResponseReferencePart,ChatResponseReferencePart2:Ct.ChatResponseReferencePart2,ChatResponseCodeCitationPart:Ct.ChatResponseCodeCitationPart,ChatResponseCommandButtonPart:Ct.ChatResponseCommandButtonPart,ChatResponseExternalEditPart:Ct.ChatResponseExternalEditPart,ChatResponseMarkdownWithVulnerabilitiesPart:Ct.ChatResponseMarkdownWithVulnerabilitiesPart,ChatResponseCodeblockUriPart:Ct.ChatResponseCodeblockUriPart,ChatResponseTextEditPart:Ct.ChatResponseTextEditPart,ChatResponseNotebookEditPart:Ct.ChatResponseNotebookEditPart,ChatResponseConfirmationPart:Ct.ChatResponseConfirmationPart,ChatPrepareToolInvocationPart:Ct.ChatPrepareToolInvocationPart,ChatRequestTurn:Ct.ChatRequestTurn,ChatResponseTurn:Ct.ChatResponseTurn,ChatRequestEditorData:Ct.ChatRequestEditorData,ChatRequestNotebookData:Ct.ChatRequestNotebookData,NewSymbolName:WEe.NewSymbolName,NewSymbolNameTag:WEe.NewSymbolNameTag,NewSymbolNameTriggerKind:WEe.NewSymbolNameTriggerKind,ChatLocation:jv.ChatLocation,SymbolInformation:kmt.SymbolInformation,LanguageModelToolResult:Ct.LanguageModelToolResult,ExtendedLanguageModelToolResult:Ct.LanguageModelToolResult,LanguageModelToolResult2:Ct.LanguageModelToolResult2,LanguageModelPromptTsxPart:Ct.LanguageModelPromptTsxPart,LanguageModelTextPart:Ct.LanguageModelTextPart,LanguageModelDataPart:Ct.LanguageModelDataPart,LanguageModelToolExtensionSource:Ct.LanguageModelToolExtensionSource,LanguageModelToolMCPSource:Ct.LanguageModelToolMCPSource,ChatReferenceBinaryData:Ct.ChatReferenceBinaryData,ChatReferenceDiagnostic:Ct.ChatReferenceDiagnostic,TextSearchMatch2:Ct.TextSearchMatch2,AISearchKeyword:Ct.AISearchKeyword,ExcludeSettingOptions:Ct.ExcludeSettingOptions,NotebookCellKind:yL.NotebookCellKind,NotebookRange:yL.NotebookRange,NotebookEdit:yL.NotebookEdit,NotebookCellData:yL.NotebookCellData,NotebookData:yL.NotebookData,ChatErrorLevel:Ct.ChatErrorLevel,TerminalShellExecutionCommandLineConfidence:LYr.TerminalShellExecutionCommandLineConfidence,ChatRequestEditedFileEventKind:Ct.ChatRequestEditedFileEventKind,ChatResponsePullRequestPart:Ct.ChatResponsePullRequestPart,LanguageModelTextPart2:Ct.LanguageModelTextPart2,LanguageModelDataPart2:Ct.LanguageModelDataPart2,LanguageModelThinkingPart:Ct.LanguageModelThinkingPart,LanguageModelPartAudience:Ct.LanguageModelPartAudience,ChatResponseThinkingProgressPart:Ct.ChatResponseThinkingProgressPart,LanguageModelToolCallPart:Ct.LanguageModelToolCallPart,LanguageModelToolResultPart:Ct.LanguageModelToolResultPart,LanguageModelToolResultPart2:Ct.LanguageModelToolResultPart2,LanguageModelChatMessageRole:Ct.LanguageModelChatMessageRole,LanguageModelChatMessage:Ct.LanguageModelChatMessage,LanguageModelChatToolMode:Ct.LanguageModelChatToolMode,TextEditorSelectionChangeKind:zEe.TextEditorSelectionChangeKind,TextDocumentChangeReason:zEe.TextDocumentChangeReason,ChatToolInvocationPart:Ct.ChatToolInvocationPart,ChatResponseTurn2:Ct.ChatResponseTurn2,ChatRequestTurn2:Ct.ChatRequestTurn,LanguageModelError:Ct.LanguageModelError,SymbolKind:kmt.SymbolKind,SnippetString:OYr.SnippetString,SnippetTextEdit:MYr.SnippetTextEdit,FileType:jv.FileType,ChatSessionStatus:Ct.ChatSessionStatus,authentication:{getSession:async()=>{throw new Error("authentication.getSession not mocked in test")}}};Umt.exports=kYr});var KEe=m(tR=>{"use strict";Object.defineProperty(tR,"__esModule",{value:!0});tR.CacheType=tR.CustomDataPartMimeTypes=void 0;var qmt;(function(t){t.CacheControl="cache_control",t.StatefulMarker="stateful_marker",t.ThinkingData="thinking"})(qmt||(tR.CustomDataPartMimeTypes=qmt={}));tR.CacheType="ephemeral"});var QEe=m(EL=>{"use strict";Object.defineProperty(EL,"__esModule",{value:!0});EL.ThinkingDataContainer=void 0;EL.rawPartAsThinkingData=UYr;var DYr=ul(),Fmt=KEe(),YEe=class extends DYr.PromptElement{render(){let{thinking:e}=this.props,r={type:Fmt.CustomDataPartMimeTypes.ThinkingData,thinking:e};return vscpp("opaque",{value:r,tokenUsage:e.tokens})}};EL.ThinkingDataContainer=YEe;function UYr(t){let e=t.value;if(!e||typeof e!="object")return;let r=e;if(r.type===Fmt.CustomDataPartMimeTypes.ThinkingData&&r.thinking&&typeof r.thinking=="object")return r.thinking}});var Bv=m(e0=>{"use strict";Object.defineProperty(e0,"__esModule",{value:!0});e0.FilterReason=e0.FinishedCompletionReason=e0.ChatRole=void 0;e0.isApiUsage=jYr;e0.getCAPITextPart=Vmt;e0.rawMessageToCAPI=Hmt;var ZEe=ul(),qYr=W3(),FYr=QEe();function jYr(t){return typeof t.prompt_tokens=="number"&&typeof t.completion_tokens=="number"&&typeof t.total_tokens=="number"}var jmt;(function(t){t.System="system",t.User="user",t.Assistant="assistant",t.Function="function",t.Tool="tool"})(jmt||(e0.ChatRole=jmt={}));function Vmt(t){return Array.isArray(t)?t.map(e=>Vmt(e)).join(""):typeof t=="string"?t:typeof t=="object"&&"text"in t?t.text:""}function Hmt(t,e){if(Array.isArray(t))return t.map(n=>Hmt(n,e));let r=(0,ZEe.toMode)(ZEe.OutputMode.OpenAI,t);if("copilot_references"in t&&(r.copilot_references=t.copilot_references),"copilot_confirmations"in t&&(r.copilot_confirmations=t.copilot_confirmations),typeof r.content=="string")r.content=r.content.trimEnd();else for(let n of r.content)n.type==="text"&&(n.text=n.text.trimEnd());t.content.find(n=>n.type===qYr.ChatCompletionContentPartKind.CacheBreakpoint)&&(r.copilot_cache_control={type:"ephemeral"});for(let n of t.content)if(n.type===ZEe.Raw.ChatCompletionContentPartKind.Opaque){let o=(0,FYr.rawPartAsThinkingData)(n);e&&o&&e(r,o)}return r}var Bmt;(function(t){t.Stop="stop",t.Length="length",t.FunctionCall="function_call",t.ToolCalls="tool_calls",t.ContentFilter="content_filter",t.ServerError="error",t.ClientTrimmed="client-trimmed",t.ClientIterationDone="Iteration Done",t.ClientDone="DONE"})(Bmt||(e0.FinishedCompletionReason=Bmt={}));var $mt;(function(t){t.Hate="hate",t.SelfHarm="self_harm",t.Sexual="sexual",t.Violence="violence",t.Copyright="snippy",t.Prompt="prompt"})($mt||(e0.FilterReason=$mt={}))});var vg=m(fo=>{"use strict";var BYr=fo&&fo.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),$Yr=fo&&fo.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),VYr=fo&&fo.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),o=0;o<n.length;o++)n[o]!=="default"&&BYr(r,e,n[o]);return $Yr(r,e),r}})();Object.defineProperty(fo,"__esModule",{value:!0});fo.CanceledResult=fo.CanceledMessage=fo.ChatFetchResponseType=fo.ChatLocation=void 0;fo.getErrorDetailsFromChatFetchError=WYr;fo.getFilteredMessage=Wmt;var Pn=VYr(kpe()),HYr=cht(),Gmt=cc(),zmt=Bv(),Nz;(function(t){t[t.Panel=1]="Panel",t[t.Terminal=2]="Terminal",t[t.Notebook=3]="Notebook",t[t.Editor=4]="Editor",t[t.EditingSession=5]="EditingSession",t[t.Other=6]="Other",t[t.Agent=7]="Agent",t[t.ResponsesProxy=8]="ResponsesProxy"})(Nz||(fo.ChatLocation=Nz={}));(function(t){function e(n){switch(n){case t.Editor:return"conversationInline";case t.Panel:return"conversationPanel";case t.EditingSession:return"editingSession";case t.Agent:return"editingSessionAgent";default:return"none"}}t.toString=e;function r(n){switch(n){case t.Editor:case t.Notebook:return"inline";case t.Panel:return"panel";case t.EditingSession:return"editingSession";default:return"none"}}t.toStringShorter=r})(Nz||(fo.ChatLocation=Nz={}));var Mo;(function(t){t.OffTopic="offTopic",t.Canceled="canceled",t.Filtered="filtered",t.FilteredRetry="filteredRetry",t.PromptFiltered="promptFiltered",t.Length="length",t.RateLimited="rateLimited",t.QuotaExceeded="quotaExceeded",t.ExtensionBlocked="extensionBlocked",t.BadRequest="badRequest",t.NotFound="notFound",t.Failed="failed",t.Unknown="unknown",t.NetworkError="networkError",t.AgentUnauthorized="agent_unauthorized",t.AgentFailedDependency="agent_failed_dependency",t.InvalidStatefulMarker="invalid_stateful_marker",t.Success="success"})(Mo||(fo.ChatFetchResponseType=Mo={}));function GYr(t,e,r){if(t.type!==Mo.RateLimited)throw new Error("Expected RateLimited error");if(t.capiError?.code==="agent_mode_limit_exceeded")return Pn.t("Sorry, you have exceeded the agent mode rate limit. Please switch to ask mode and try again later.");if(t.capiError?.code==="upstream_provider_rate_limit")return Pn.t("Sorry, the upstream model provider is currently experiencing high demand. Please try again later or consider switching to {0}.",e.name);let o=t.rateLimitKey.split(",").map(a=>a.trim()).some(a=>/^global-user(-[^-]+)?-tps-\d{4}-\d{2}-\d{2}$/.test(a)),s=!r&&t.retryAfter?(0,HYr.secondsToHumanReadableTime)(t.retryAfter):"a moment";return t?.capiError?.code&&t?.capiError?.message?Pn.t({message:`Sorry, you have been rate-limited. Please wait {0} before trying again. [Learn More]({1})

Server Error: {2}
Error Code: {3}`,args:[s,"https://aka.ms/github-copilot-rate-limit-error",t.capiError.message,t.capiError.code],comment:["{Locked=']({'}"]}):o?Pn.t({message:"Sorry, your request was rate-limited. Please wait {0} before trying again. [Learn More]({1})",args:[s,"https://aka.ms/github-copilot-rate-limit-error"],comment:["{Locked=']({'}"]}):Pn.t({message:"Sorry, you have exhausted this model's rate limit. Please wait {0} before trying again, or switch to {1}. [Learn More]({2})",args:[s,e.name,"https://aka.ms/github-copilot-rate-limit-error"],comment:["{Locked=']({'}"]})}function zYr(t,e){if(t.type!==Mo.QuotaExceeded)throw new Error("Expected QuotaExceeded error");if(t.capiError?.code==="free_quota_exceeded"&&(t.capiError.code="quota_exceeded"),t.capiError?.code==="quota_exceeded")switch(e){case"free":return Pn.t("You've reached your monthly chat messages quota. Upgrade to Copilot Pro (30-day free trial) or wait for your allowance to renew.");case"individual":return Pn.t("You've exhausted your premium model quota. Please enable additional paid premium requests, upgrade to Copilot Pro+, or wait for your allowance to renew.");case"individual_pro":return Pn.t("You've exhausted your premium model quota. Please enable additional paid premium requests or wait for your allowance to renew.");default:return Pn.t("You've exhausted your premium model quota. Please reach out to your organization's Copilot admin to enable additional paid premium requests or wait for your allowance to renew.")}else return t.capiError?.code==="overage_limit_reached"?Pn.t({message:"You cannot accrue additional premium requests at this time. Please contact [GitHub Support]({0}) to continue using Copilot.",args:["https://support.github.com/contact"],comment:["{Locked=']({'}"]}):t.capiError?.code&&t.capiError?.message?Pn.t({message:`Quota Exceeded

Server Error: {0}
Error Code: {1}`,args:[t.capiError.message,t.capiError.code],comment:""}):Pn.t("Quota Exceeded")}function WYr(t,e,r,n){return{code:t.type,...KYr(t,r,e,n)}}function KYr(t,e,r,n){switch(t.type){case Mo.OffTopic:return{message:Pn.t("Sorry, but I can only assist with programming related questions.")};case Mo.Canceled:return fo.CanceledMessage;case Mo.RateLimited:return{message:GYr(t,r,n),level:Gmt.ChatErrorLevel.Info,isRateLimited:!0};case Mo.QuotaExceeded:return{message:zYr(t,e),isQuotaExceeded:!0};case Mo.BadRequest:case Mo.Failed:return t.serverRequestId?{message:Pn.t(`Sorry, your request failed. Please try again.

Copilot Request id: {0}

GH Request Id: {1}

Reason: {2}`,t.requestId,t.serverRequestId,t.reason)}:{message:Pn.t(`Sorry, your request failed. Please try again.

Copilot Request id: {0}

Reason: {1}`,t.requestId,t.reason)};case Mo.NetworkError:return{message:Pn.t(`Sorry, there was a network error. Please try again later. Request id: {0}

Reason: {1}`,t.requestId,t.reason)};case Mo.Filtered:case Mo.PromptFiltered:return{message:Wmt(t.category),responseIsFiltered:!0,level:Gmt.ChatErrorLevel.Info};case Mo.AgentUnauthorized:return{message:Pn.t("Sorry, something went wrong.")};case Mo.AgentFailedDependency:return{message:t.reason};case Mo.Length:return{message:Pn.t("Sorry, the response hit the length limit. Please rephrase your prompt.")};case Mo.NotFound:return{message:Pn.t("Sorry, the resource was not found.")};case Mo.Unknown:return{message:Pn.t("Sorry, no response was returned.")};case Mo.ExtensionBlocked:return{message:Pn.t("Sorry, something went wrong.")};case Mo.InvalidStatefulMarker:return{message:Pn.t("Your chat session state is invalid, please start a new chat.")}}}function Wmt(t,e=!0){switch(t){case zmt.FilterReason.Copyright:return e?Pn.t({message:"Sorry, the response matched public code so it was blocked. Please rephrase your prompt. [Learn more](https://aka.ms/copilot-chat-filtered-docs).",comment:["{Locked='](https://aka.ms/copilot-chat-filtered-docs)'}"]}):Pn.t("Sorry, the response matched public code so it was blocked. Please rephrase your prompt.");case zmt.FilterReason.Prompt:return e?Pn.t({message:"Sorry, your prompt was filtered by the Responsible AI Service. Please rephrase your prompt and try again. [Learn more](https://aka.ms/copilot-chat-filtered-docs).",comment:["{Locked='](https://aka.ms/copilot-chat-filtered-docs)'}"]}):Pn.t("Sorry, your prompt was filtered by the Responsible AI Service. Please rephrase your prompt and try again.");default:return e?Pn.t({message:"Sorry, the response was filtered by the Responsible AI Service. Please rephrase your prompt and try again. [Learn more](https://aka.ms/copilot-chat-filtered-docs).",comment:["{Locked='](https://aka.ms/copilot-chat-filtered-docs)'}"]}):Pn.t("Sorry, the response was filtered by the Responsible AI Service. Please rephrase your prompt and try again.")}}fo.CanceledMessage={message:"Canceled"};fo.CanceledResult={errorDetails:fo.CanceledMessage}});var rgt=m(po=>{"use strict";Object.defineProperty(po,"__esModule",{value:!0});po.GLOB_SPLIT=po.GLOBSTAR=void 0;po.getEmptyExpression=XYr;po.splitGlobAware=tTe;po.isEmptyPattern=aQr;po.match=fQr;po.parse=Xmt;po.isRelativePattern=egt;po.getBasenameTerms=pQr;po.getPathTerms=hQr;po.patternsEquals=_Qr;var YYr=Ui(),XEe=Ua(),QYr=HX(),ZYr=f_(),$v=Nl(),JYr=m_(),eTe=Fo();function XYr(){return Object.create(null)}po.GLOBSTAR="**";po.GLOB_SPLIT="/";var Lz="[/\\\\]",kz="[^/\\\\]",eQr=/\//g;function Kmt(t,e){switch(t){case 0:return"";case 1:return`${kz}*?`;default:return`(?:${Lz}|${kz}+${Lz}${e?`|${Lz}${kz}+`:""})*?`}}function tTe(t,e){if(!t)return[];let r=[],n=!1,o=!1,s="";for(let a of t){switch(a){case e:if(!n&&!o){r.push(s),s="";continue}break;case"{":n=!0;break;case"}":n=!1;break;case"[":o=!0;break;case"]":o=!1;break}s+=a}return s&&r.push(s),r}function Jmt(t){if(!t)return"";let e="",r=tTe(t,po.GLOB_SPLIT);if(r.every(n=>n===po.GLOBSTAR))e=".*";else{let n=!1;r.forEach((o,s)=>{if(o===po.GLOBSTAR){if(n)return;e+=Kmt(2,s===r.length-1)}else{let a=!1,c="",l=!1,u="";for(let d of o){if(d!=="}"&&a){c+=d;continue}if(l&&(d!=="]"||!u)){let f;d==="-"?f=d:(d==="^"||d==="!")&&!u?f="^":d===po.GLOB_SPLIT?f="":f=(0,eTe.escapeRegExpCharacters)(d),u+=f;continue}switch(d){case"{":a=!0;continue;case"[":l=!0;continue;case"}":{let p=`(?:${tTe(c,",").map(h=>Jmt(h)).join("|")})`;e+=p,a=!1,c="";break}case"]":{e+="["+u+"]",l=!1,u="";break}case"?":e+=kz;continue;case"*":e+=Kmt(1);continue;default:e+=(0,eTe.escapeRegExpCharacters)(d)}}s<r.length-1&&(r[s+1]!==po.GLOBSTAR||s+2<r.length)&&(e+=Lz)}n=o===po.GLOBSTAR})}return e}var tQr=/^\*\*\/\*\.[\w\.-]+$/,rQr=/^\*\*\/([\w\.-]+)\/?$/,nQr=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,iQr=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,oQr=/^\*\*((\/[\w\.-]+)+)\/?$/,sQr=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,Ymt=new ZYr.LRUCache(1e4),rTe=function(){return!1},t0=function(){return null};function aQr(t){return t===rTe||t===t0}function nTe(t,e){if(!t)return t0;let r;typeof t!="string"?r=t.pattern:r=t,r=r.trim();let n=`${r}_${!!e.trimForExclusions}`,o=Ymt.get(n);if(o)return Qmt(o,t);let s;return tQr.test(r)?o=cQr(r.substr(4),r):(s=rQr.exec(JEe(r,e)))?o=lQr(s[1],r):(e.trimForExclusions?iQr:nQr).test(r)?o=uQr(r,e):(s=oQr.exec(JEe(r,e)))?o=Zmt(s[1].substr(1),r,!0):(s=sQr.exec(JEe(r,e)))?o=Zmt(s[1],r,!1):o=dQr(r),Ymt.set(n,o),Qmt(o,t)}function Qmt(t,e){if(typeof e=="string")return t;let r=function(n,o){return(0,QYr.isEqualOrParent)(n,e.base,!JYr.isLinux)?t((0,eTe.ltrim)(n.substr(e.base.length),$v.sep),o):null};return r.allBasenames=t.allBasenames,r.allPaths=t.allPaths,r.basenames=t.basenames,r.patterns=t.patterns,r}function JEe(t,e){return e.trimForExclusions&&t.endsWith("/**")?t.substr(0,t.length-2):t}function cQr(t,e){return function(r,n){return typeof r=="string"&&r.endsWith(t)?e:null}}function lQr(t,e){let r=`/${t}`,n=`\\${t}`,o=function(a,c){return typeof a!="string"?null:c?c===t?e:null:a===t||a.endsWith(r)||a.endsWith(n)?e:null},s=[t];return o.basenames=s,o.patterns=[e],o.allBasenames=s,o}function uQr(t,e){let r=tgt(t.slice(1,-1).split(",").map(c=>nTe(c,e)).filter(c=>c!==t0),t),n=r.length;if(!n)return t0;if(n===1)return r[0];let o=function(c,l){for(let u=0,d=r.length;u<d;u++)if(r[u](c,l))return t;return null},s=r.find(c=>!!c.allBasenames);s&&(o.allBasenames=s.allBasenames);let a=r.reduce((c,l)=>l.allPaths?c.concat(l.allPaths):c,[]);return a.length&&(o.allPaths=a),o}function Zmt(t,e,r){let n=$v.sep===$v.posix.sep,o=n?t:t.replace(eQr,$v.sep),s=$v.sep+o,a=$v.posix.sep+t,c;return r?c=function(l,u){return typeof l=="string"&&(l===o||l.endsWith(s)||!n&&(l===t||l.endsWith(a)))?e:null}:c=function(l,u){return typeof l=="string"&&(l===o||!n&&l===t)?e:null},c.allPaths=[(r?"*/":"./")+t],c}function dQr(t){try{let e=new RegExp(`^${Jmt(t)}$`);return function(r){return e.lastIndex=0,typeof r=="string"&&e.test(r)?t:null}}catch{return t0}}function fQr(t,e,r){return!t||typeof e!="string"?!1:Xmt(t)(e,void 0,r)}function Xmt(t,e={}){if(!t)return rTe;if(typeof t=="string"||egt(t)){let r=nTe(t,e);if(r===t0)return rTe;let n=function(o,s){return!!r(o,s)};return r.allBasenames&&(n.allBasenames=r.allBasenames),r.allPaths&&(n.allPaths=r.allPaths),n}return mQr(t,e)}function egt(t){let e=t;return e?typeof e.base=="string"&&typeof e.pattern=="string":!1}function pQr(t){return t.allBasenames||[]}function hQr(t){return t.allPaths||[]}function mQr(t,e){let r=tgt(Object.getOwnPropertyNames(t).map(c=>gQr(c,t[c],e)).filter(c=>c!==t0)),n=r.length;if(!n)return t0;if(!r.some(c=>!!c.requiresSiblings)){if(n===1)return r[0];let c=function(d,f){let p;for(let h=0,_=r.length;h<_;h++){let g=r[h](d,f);if(typeof g=="string")return g;(0,XEe.isThenable)(g)&&(p||(p=[]),p.push(g))}return p?(async()=>{for(let h of p){let _=await h;if(typeof _=="string")return _}return null})():null},l=r.find(d=>!!d.allBasenames);l&&(c.allBasenames=l.allBasenames);let u=r.reduce((d,f)=>f.allPaths?d.concat(f.allPaths):d,[]);return u.length&&(c.allPaths=u),c}let o=function(c,l,u){let d,f;for(let p=0,h=r.length;p<h;p++){let _=r[p];_.requiresSiblings&&u&&(l||(l=(0,$v.basename)(c)),d||(d=l.substr(0,l.length-(0,$v.extname)(c).length)));let g=_(c,l,d,u);if(typeof g=="string")return g;(0,XEe.isThenable)(g)&&(f||(f=[]),f.push(g))}return f?(async()=>{for(let p of f){let h=await p;if(typeof h=="string")return h}return null})():null},s=r.find(c=>!!c.allBasenames);s&&(o.allBasenames=s.allBasenames);let a=r.reduce((c,l)=>l.allPaths?c.concat(l.allPaths):c,[]);return a.length&&(o.allPaths=a),o}function gQr(t,e,r){if(e===!1)return t0;let n=nTe(t,r);if(n===t0)return t0;if(typeof e=="boolean")return n;if(e){let o=e.when;if(typeof o=="string"){let s=(a,c,l,u)=>{if(!u||!n(a,c))return null;let d=o.replace("$(basename)",()=>l),f=u(d);return(0,XEe.isThenable)(f)?f.then(p=>p?t:null):f?t:null};return s.requiresSiblings=!0,s}}return n}function tgt(t,e){let r=t.filter(c=>!!c.basenames);if(r.length<2)return t;let n=r.reduce((c,l)=>{let u=l.basenames;return u?c.concat(u):c},[]),o;if(e){o=[];for(let c=0,l=n.length;c<l;c++)o.push(e)}else o=r.reduce((c,l)=>{let u=l.patterns;return u?c.concat(u):c},[]);let s=function(c,l){if(typeof c!="string")return null;if(!l){let d;for(d=c.length;d>0;d--){let f=c.charCodeAt(d-1);if(f===47||f===92)break}l=c.substr(d)}let u=n.indexOf(l);return u!==-1?o[u]:null};s.basenames=n,s.patterns=o,s.allBasenames=n;let a=t.filter(c=>!c.basenames);return a.push(s),a}function _Qr(t,e){return(0,YYr.equals)(t,e,(r,n)=>typeof r=="string"&&typeof n=="string"?r===n:typeof r!="string"&&typeof n!="string"?r.base===n.base&&r.pattern===n.pattern:!1)}});var Uz=m(Rn=>{"use strict";var vQr=Rn&&Rn.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),yQr=Rn&&Rn.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),EQr=Rn&&Rn.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),o=0;o<n.length;o++)n[o]!=="default"&&vQr(r,e,n[o]);return yQr(r,e),r}})();Object.defineProperty(Rn,"__esModule",{value:!0});Rn.RegisteredEditorPriority=void 0;Rn.findNotebook=iTe;Rn.findCell=oTe;Rn.getNotebookCellOutput=TQr;Rn.getNotebookAndCellFromUri=igt;Rn.isNotebookCellOrNotebookChatInput=SQr;Rn.isNotebookCell=bQr;Rn.isJupyterNotebookUri=CQr;Rn.isJupyterNotebook=AQr;Rn.serializeNotebookDocument=xQr;Rn.extractNotebookOutline=wQr;Rn.isDocumentExcludePattern=ogt;Rn.isFilenamePattern=sgt;Rn.isRelativePattern=agt;Rn.isNotebookEditorContribution=IQr;Rn.extractEditorAssociation=PQr;Rn.notebookSelectorMatches=cgt;Rn.getNotebookEditorAssociations=lgt;Rn._hasSupportedNotebooks=RQr;var rR=EQr(rgt()),TL=oE(),nR=Nl(),ngt=E_(),Dz;(function(t){t.builtin="builtin",t.option="option",t.exclusive="exclusive",t.default="default"})(Dz||(Rn.RegisteredEditorPriority=Dz={}));function iTe(t,e){return e.find(r=>(0,ngt.isEqual)(r.uri,t)||r.uri.path===t.path||oTe(t,r))}function oTe(t,e){if(t.scheme===TL.Schemas.vscodeNotebookCell||t.scheme===TL.Schemas.vscodeNotebookCellOutput){let r=e.getCells().findIndex(n=>(0,ngt.isEqual)(n.document.uri,t)||n.document.uri.fragment===t.fragment&&n.document.uri.path===t.path);if(r!==-1)return e.getCells()[r]}}function TQr(t,e){if(t.scheme!==TL.Schemas.vscodeNotebookCellOutput)return;let r=new URLSearchParams(t.query),[n,o]=igt(t,e);if(!o||!o.outputs.length)return;let s=(r.get("outputIndex")?parseInt(r.get("outputIndex")||"",10):void 0)||0;if(!(s>o.outputs.length-1))return[n,o,o.outputs[s]]}function igt(t,e){let r=iTe(t,e)||e.find(o=>o.uri.path===t.path);if(!r)return[void 0,void 0];let n=oTe(t,r);return n===void 0?[r,void 0]:[r,n]}function SQr(t){return t.scheme===TL.Schemas.vscodeNotebookCell||t.scheme==="untitled"&&t.fragment.startsWith("notebook-chat-input")}function bQr(t){return t.scheme===TL.Schemas.vscodeNotebookCell}function CQr(t){return t.path.endsWith(".ipynb")}function AQr(t){return t.notebookType==="jupyter-notebook"}function xQr(t,e={}){return JSON.stringify({cells:t.getCells().map(r=>({uri_fragment:e.cell_uri_fragment?r.document.uri.fragment:void 0,cell_type:r.kind,source:r.document.getText().split(/\r?\n/)}))})}function wQr(t){try{let e=t.replace(/\n/g,""),n=/```(?:json)?(.+)/g.exec(e);if(n){let o=n[1],s=o.indexOf("```"),a=s===-1?o:o.substring(0,s);return JSON.parse(a)}}catch{}}function ogt(t){let e=t;return typeof e=="object"&&e!==null&&(typeof e.include=="string"||agt(e.include))}function sgt(t){let e=t;return typeof e=="object"&&e!==null&&typeof e.filenamePattern=="string"}function agt(t){let e=t;return e?typeof e.base=="string"&&typeof e.pattern=="string":!1}function IQr(t){let e=t;return!!e&&!!e.type&&!!e.displayName&&!!e.selector}function PQr(t){let e=[];for(let[r,n]of Object.entries(t))n&&e.push({filenamePattern:r,viewType:n});return e}function cgt(t,e){if(typeof e=="string"&&rR.match(e.toLowerCase(),(0,nR.basename)(t.fsPath).toLowerCase()))return!0;if(ogt(e)){let r=e.include,n=e.exclude;if(!r)return!1;if(rR.match(r,(0,nR.basename)(t.fsPath).toLowerCase()))return!(n&&rR.match(n,(0,nR.basename)(t.fsPath).toLowerCase()))}return sgt(e)&&rR.match(e.filenamePattern,(0,nR.basename)(t.fsPath).toLowerCase())?!(e.excludeFileNamePattern&&rR.match(e.excludeFileNamePattern,(0,nR.basename)(t.fsPath).toLowerCase())):!1}function lgt(t,e){let r=[];for(let n of e)n.filenamePattern&&rR.match(n.filenamePattern.toLowerCase(),(0,nR.basename)(t.fsPath).toLowerCase())&&r.push({filenamePattern:n.filenamePattern,viewType:n.viewType});return r}function RQr(t,e,r,n){if(iTe(t,e))return!0;let o=r.filter(a=>a.selector.some(c=>cgt(t,c)));if(o.length===0)return!1;let s=lgt(t,n);for(let a of s)if(o.some(c=>c.type===a.viewType))return!0;return!!o.some(a=>(a.priority??Dz.default)===Dz.default)}});var hgt=m(lc=>{"use strict";var OQr=lc&&lc.__decorate||function(t,e,r,n){var o=arguments.length,s=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(o<3?a(s):o>3?a(e,r,s):a(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},MQr=lc&&lc.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(lc,"__esModule",{value:!0});lc.TelemetrySender=lc.NextEditProviderTelemetryBuilder=lc.DiagnosticsTelemetryBuilder=lc.LlmNESTelemetryBuilder=void 0;var ugt=vg(),NQr=Km(),fgt=qa(),LQr=Uz(),pgt=Ar(),kQr=oE(),dgt=cc(),qz=class extends pgt.Disposable{build(e){let r,n,o,s,a,c=!1,l,u,d;if(this._request){let h=this._request.getActiveDocument();r=this._request.documents.length,n=this._request.documents.reduce((g,v)=>g+v.recentEdits.edits.length,0),o=h.recentEdits.edits.length,s=h.languageId,a=h.documentAfterEditsLines.length,c=h.id.toUri().scheme===kQr.Schemas.vscodeNotebookCell||this._notebookService?.hasSupportedNotebooks(h.id.toUri())||!1,l=(0,LQr.findNotebook)(h.id.toUri(),this._workspaceService.notebookDocuments)?.notebookType;let _=this._gitExtensionService.getExtensionApi();if(_){let g=_.getRepository(dgt.Uri.parse(h.id.uri));if(g){let y=g.state.HEAD?.upstream?.remote,S=g.state.remotes.find(b=>b.name===y);S?.fetchUrl&&(u=S.pushUrl||S.fetchUrl)}let v=new Set,E=[...new Set(this._request.documents.map(y=>_.getRepository(dgt.Uri.parse(y.id.uri))).filter(Boolean))];for(let y of E){let S=y?.state.HEAD?.upstream?.remote,b=y?.state.remotes.find(w=>w.name===S);b?.fetchUrl&&v.add(b.fetchUrl),b?.pushUrl&&v.add(b.pushUrl)}d=[...v]}}let f;if(e){let h=this._originalDoc.value,_;if(this._debugRecorder&&this._requestBookmark){let g=this._debugRecorder.getRecentLog(),v=JSON.stringify(g)?.length||0;_={entries:v>200*1024?void 0:g,entriesSize:v,requestTime:this._requestBookmark.timeMs}}f={text:h.length>200*1024?void 0:h,textLength:h.length,selection:this._originalSelection.map(g=>({start:g.start,endExclusive:g.endExclusive})),edits:this._edits.map(g=>g.edit.replacements.map(v=>({time:g.time.toISOString(),start:v.replaceRange.start,endExclusive:v.replaceRange.endExclusive,newText:v.newText}))).flat(),tags:[],recording:_}}let p=this._statelessNextEditTelemetry?.fetchStartedAt===void 0?void 0:this._statelessNextEditTelemetry.fetchStartedAt-this._startTime;return{providerId:this._providerId,headerRequestId:this._headerRequestId||"",nextEditProviderDuration:this._duration||0,isFromCache:this._isFromCache,subsequentEditOrder:this._subsequentEditOrder,documentsCount:r,editsCount:n,activeDocumentEditsCount:o,activeDocumentLanguageId:s,activeDocumentOriginalLineCount:a,fetchStartedAfterMs:p,hasNextEdit:this._hasNextEdit,wasPreviouslyRejected:this._wasPreviouslyRejected,isNotebook:c,notebookType:l,status:this._status,nextEditProviderError:this._nextEditProviderError,alternativeAction:f,...this._statelessNextEditTelemetry,activeDocumentRepository:u,repositoryUrls:d,nesConfigs:this._nesConfigs}}constructor(e,r,n,o,s,a,c){super(),this._gitExtensionService=e,this._notebookService=r,this._workspaceService=n,this._providerId=o,this._doc=s,this._debugRecorder=a,this._requestBookmark=c,this._edits=[],this._isFromCache=!1,this._hasNextEdit=!1,this._wasPreviouslyRejected=!1,this._status="new",this._startTime=Date.now(),this._originalDoc=this._doc.value.get(),this._originalSelection=this._doc.selection.get(),this._store.add((0,NQr.autorunWithChanges)(this,{value:this._doc.value},l=>{let u=new Date;l.value.changes.forEach(d=>{this._edits.push({time:u,edit:d})})}))}setNESConfigs(e){return this._nesConfigs=e,this}setHeaderRequestId(e){return this._headerRequestId=e,this}setIsFromCache(){return this._isFromCache=!0,this}setSubsequentEditOrder(e){return this._subsequentEditOrder=e,this}setRequest(e){return this._request=e,this}setStatelessNextEditTelemetry(e){return this._statelessNextEditTelemetry=e,this}setHasNextEdit(e){return this._hasNextEdit=e,this}setWasPreviouslyRejected(){return this._wasPreviouslyRejected=!0,this}markEndTime(){return this._duration=Date.now()-this._startTime,this}setStatus(e){return this._status=e,this}setNextEditProviderError(e){return this._nextEditProviderError=e,this}};lc.LlmNESTelemetryBuilder=qz;var Fz=class{constructor(){this._droppedReasons=[]}build(){let e=this._droppedReasons.length>0?JSON.stringify(this._droppedReasons):void 0;return{diagnosticType:this._type,diagnosticDroppedReasons:e,diagnosticAlternativeImportsCount:this._diagnosticRunTelemetry?.alternativeImportsCount,diagnosticHasExistingSameFileImport:this._diagnosticRunTelemetry?.hasExistingSameFileImport,diagnosticIsLocalImport:this._diagnosticRunTelemetry?.isLocalImport,diagnosticDistanceToUnknownDiagnostic:this._diagnosticRunTelemetry?.distanceToUnknownDiagnostic,diagnosticDistanceToAlternativeDiagnostic:this._diagnosticRunTelemetry?.distanceToAlternativeDiagnostic,diagnosticHasAlternativeDiagnosticForSameRange:this._diagnosticRunTelemetry?.hasAlternativeDiagnosticForSameRange}}populate(e){this._droppedReasons.forEach(r=>e.addDroppedReason(r)),this._type&&e.setType(this._type),this._diagnosticRunTelemetry&&e.setDiagnosticRunTelemetry(this._diagnosticRunTelemetry)}setType(e){return this._type=e,this}addDroppedReason(e){return this._droppedReasons.push(e),this}setDiagnosticRunTelemetry(e){return this._diagnosticRunTelemetry=e,this}};lc.DiagnosticsTelemetryBuilder=Fz;var sTe=class t extends pgt.Disposable{static{this.requestN=0}get isSent(){return this._isSent}markAsSent(){this._isSent=!0}build(e){let r=this._nesBuilder.build(e),n=this._diagnosticsBuilder.build();return{...r,...n,opportunityId:this._opportunityId||"",requestN:this._requestN,isShown:this._isShown,acceptance:this._acceptance,disposalReason:this._disposalReason,supersededByOpportunityId:this._supersededByOpportunityId,pickedNES:this._nesTypePicked,hadLlmNES:this._hadLlmNES,isMultilineEdit:this._isMultilineEdit,isEolDifferent:this._isEolDifferent,isActiveDocument:this._isActiveDocument,isNextEditorVisible:this._isNextEditorVisible,isNextEditorRangeVisible:this._isNextEditorRangeVisible,isNESForAnotherDoc:this._isNESForAnotherDoc,notebookId:this._notebookId,notebookCellLines:this._notebookCellLines,notebookCellMarkerCount:this._notebookCellMarkerCount,notebookCellMarkerIndex:this._notebookCellMarkerIndex,hadDiagnosticsNES:this._hadDiagnosticsNES,configIsDiagnosticsNESEnabled:this._configIsDiagnosticsNESEnabled,isNaturalLanguageDominated:this._isNaturalLanguageDominated,postProcessingOutcome:this._postProcessingOutcome}}get nesBuilder(){return this._nesBuilder}get diagnosticsBuilder(){return this._diagnosticsBuilder}constructor(e,r,n,o,s,a,c){super(),this._isSent=!1,this._isShown=!1,this._acceptance="notAccepted",this._disposalReason=void 0,this._supersededByOpportunityId=void 0,this._notebookCellMarkerCount=0,this._notebookCellMarkerIndex=-1,this._isNESForAnotherDoc=!1,this._hadLlmNES=!1,this._hadDiagnosticsNES=!1,this._configIsDiagnosticsNESEnabled=!1,this._isNaturalLanguageDominated=!1,this._requestN=++t.requestN,this._nesBuilder=this._register(new qz(e,r,n,o,s,a,c)),this._diagnosticsBuilder=new Fz}setOpportunityId(e){return this._opportunityId=e,this}setAsShown(){return this._isShown=!0,this}setAcceptance(e){return this._acceptance=e,this}setDisposalReason(e){return this._disposalReason=e,this}setSupersededBy(e){return this._supersededByOpportunityId=e,this}setPickedNESType(e){return this._nesTypePicked=e,this}setIsActiveDocument(e){return this._isActiveDocument=e,this}setNotebookCellMarkerCount(e){return this._notebookCellMarkerCount=e,this}setIsMultilineEdit(e){return this._isMultilineEdit=e,this}setIsEolDifferent(e){return this._isEolDifferent=e,this}setIsNextEditorVisible(e){return this._isNextEditorVisible=e,this}setIsNextEditorRangeVisible(e){return this._isNextEditorRangeVisible=e,this}setNotebookId(e){return this._notebookId=e,this}setNotebookCellLines(e){return this._notebookCellLines=e,this}setNotebookCellMarkerIndex(e){return this._notebookCellMarkerIndex=e,this}setIsNESForOtherEditor(e){return this._isNESForAnotherDoc=e,this}setHadLlmNES(e){return this._hadLlmNES=e,this}setHadDiagnosticsNES(e){return this._hadDiagnosticsNES=e,this}setStatus(e){return this._nesBuilder.setStatus(e),this}setConfigIsDiagnosticsNESEnabled(e){return this._configIsDiagnosticsNESEnabled=e,this}setIsNaturalLanguageDominated(e){return this._isNaturalLanguageDominated=e,this}setPostProcessingOutcome(e){let r=e.displayLocation?{label:e.displayLocation.label,range:e.displayLocation.range.toString()}:void 0;return this._postProcessingOutcome=JSON.stringify({suggestedEdit:e.edit.toString(),isInlineCompletion:e.isInlineCompletion,displayLocation:r}),this}};lc.NextEditProviderTelemetryBuilder=sTe;var aTe=class{constructor(e){this._telemetryService=e,this._map=new Map}scheduleSendingEnhancedTelemetry(e,r){let n=setTimeout(()=>{let o;this._map.delete(e);try{o=r.build(!0)}finally{r.dispose()}this._doSendEnhancedTelemetry(o)},12e4);this._map.set(e,{builder:r,timeout:n})}sendTelemetry(e,r){if(e){let o=this._map.get(e);o&&(clearTimeout(o.timeout),this._map.delete(e))}let n=r.build(!0);r.isSent||(this._doSendTelemetry(n),r.markAsSent()),this._doSendEnhancedTelemetry(n)}sendTelemetryForBuilder(e){if(e.isSent)return;let r=e.build(!1);this._doSendTelemetry(r),e.markAsSent()}async _doSendTelemetry(e){let{opportunityId:r,headerRequestId:n,requestN:o,providerId:s,modelName:a,hadStatelessNextEditProviderCall:c,statelessNextEditProviderDuration:l,nextEditProviderDuration:u,isFromCache:d,subsequentEditOrder:f,activeDocumentLanguageId:p,activeDocumentOriginalLineCount:h,nLinesOfCurrentFileInPrompt:_,wasPreviouslyRejected:g,isShown:v,isNotebook:E,notebookType:y,isNESForAnotherDoc:S,isActiveDocument:b,isEolDifferent:w,isMultilineEdit:P,isNextEditorRangeVisible:A,isNextEditorVisible:O,acceptance:L,disposalReason:j,logProbThreshold:$,documentsCount:Q,editsCount:K,activeDocumentEditsCount:N,promptLineCount:G,promptCharCount:Y,hadLowLogProbSuggestion:J,nEditsSuggested:ie,lineDistanceToMostRecentEdit:oe,isCursorAtEndOfLine:ne,debounceTime:de,artificialDelay:Ee,hasNextEdit:Me,notebookCellMarkerCount:He,notebookCellMarkerIndex:Je,notebookId:lt,notebookCellLines:St,nextEditLogprob:Dt,supersededByOpportunityId:qt,noNextEditReasonKind:Nt,noNextEditReasonMessage:D,fetchStartedAfterMs:fe,response:B,configIsDiagnosticsNESEnabled:Oe,isNaturalLanguageDominated:me,diagnosticType:ye,diagnosticDroppedReasons:et,diagnosticHasExistingSameFileImport:Rt,diagnosticIsLocalImport:Ot,diagnosticAlternativeImportsCount:xt,diagnosticDistanceToUnknownDiagnostic:Ut,diagnosticDistanceToAlternativeDiagnostic:Jt,diagnosticHasAlternativeDiagnosticForSameRange:$t,hadDiagnosticsNES:ar,hadLlmNES:_r,pickedNES:ur}=e,zt,Wt,M,ee;if(B!==void 0){let{response:pe,ttft:be,fetchResult:ct,fetchTime:ot}=await B;pe.type===ugt.ChatFetchResponseType.Success&&(zt=pe.usage),Wt=be,M=ct,ee=ot}this._sendTelemetryToBoth({opportunityId:r,headerRequestId:n,providerId:s,modelName:a,activeDocumentLanguageId:p,mergeConflictExpanded:e.mergeConflictExpanded,acceptance:L,disposalReason:j,supersededByOpportunityId:qt,noNextEditReasonKind:Nt,noNextEditReasonMessage:D,fetchResult:M,nextEditProviderError:e.nextEditProviderError,diagnosticType:ye,diagnosticDroppedReasons:et,pickedNES:ur,notebookType:y,notebookId:lt,notebookCellLines:St,nextCursorLineError:e.nextCursorPrediction?.nextCursorLineError},{requestN:o,hadStatelessNextEditProviderCall:this._boolToNum(c),statelessNextEditProviderDuration:l,nextEditProviderDuration:u,isFromCache:this._boolToNum(d),subsequentEditOrder:f,activeDocumentOriginalLineCount:h,activeDocumentNLinesInPrompt:_,wasPreviouslyRejected:this._boolToNum(g),isShown:this._boolToNum(v),isNotebook:this._boolToNum(E),isNESForAnotherDoc:this._boolToNum(S),isActiveDocument:this._boolToNum(b),isEolDifferent:this._boolToNum(w),isMultilineEdit:this._boolToNum(P),isNextEditorRangeVisible:this._boolToNum(A),isNextEditorVisible:this._boolToNum(O),hasNotebookCellMarker:He>0?1:0,notebookCellMarkerCount:He,notebookCellMarkerIndex:Je,logProbThreshold:$,documentsCount:Q,editsCount:K,activeDocumentEditsCount:N,promptLineCount:G,promptCharCount:Y,hadLowLogProbSuggestion:this._boolToNum(J),nEditsSuggested:ie,lineDistanceToMostRecentEdit:oe,isCursorAtEndOfLine:this._boolToNum(ne),debounceTime:de,artificialDelay:Ee,fetchStartedAfterMs:fe,ttft:Wt,fetchTime:ee,promptTokens:zt?.prompt_tokens,responseTokens:zt?.completion_tokens,cachedTokens:zt?.prompt_tokens_details?.cached_tokens,acceptedPredictionTokens:zt?.completion_tokens_details?.accepted_prediction_tokens,rejectedPredictionTokens:zt?.completion_tokens_details?.rejected_prediction_tokens,hasNextEdit:this._boolToNum(Me),nextEditLogprob:Dt,hadDiagnosticsNES:this._boolToNum(ar),hadLlmNES:this._boolToNum(_r),configIsDiagnosticsNESEnabled:this._boolToNum(Oe),isNaturalLanguageDominated:this._boolToNum(me),diagnosticHasExistingSameFileImport:this._boolToNum(Rt),diagnosticIsLocalImport:this._boolToNum(Ot),diagnosticAlternativeImportsCount:xt,diagnosticDistanceToUnknownDiagnostic:Ut,diagnosticDistanceToAlternativeDiagnostic:Jt,diagnosticHasAlternativeDiagnosticForSameRange:this._boolToNum($t),nextCursorLineDistance:e.nextCursorPrediction?.nextCursorLineDistance})}_sendTelemetryToBoth(e,r){this._telemetryService.sendMSFTTelemetryEvent("provideInlineEdit",e,r),this._telemetryService.sendGHTelemetryEvent("copilot-nes/provideInlineEdit",e,r)}async _doSendEnhancedTelemetry(e){let{opportunityId:r,headerRequestId:n,providerId:o,activeDocumentLanguageId:s,status:a,prompt:c,response:l,alternativeAction:u,postProcessingOutcome:d,activeDocumentRepository:f,repositoryUrls:p}=e,h=l===void 0?l:await l;this._telemetryService.sendEnhancedGHTelemetryEvent("copilot-nes/provideInlineEdit",(0,fgt.multiplexProperties)({opportunityId:r,headerRequestId:n,providerId:o,activeDocumentLanguageId:s,suggestionStatus:a,prompt:c,modelResponse:h===void 0||h.response.type!==ugt.ChatFetchResponseType.Success?void 0:h.response.value,alternativeAction:u?JSON.stringify(u):void 0,postProcessingOutcome:d,activeDocumentRepository:f,repositories:JSON.stringify(p)}))}_boolToNum(e){return e===void 0?void 0:e?1:0}dispose(){for(let{timeout:e}of this._map.values())clearTimeout(e);this._map.clear()}};lc.TelemetrySender=aTe;lc.TelemetrySender=aTe=OQr([MQr(0,fgt.ITelemetryService)],aTe)});var yg=m(Vv=>{"use strict";Object.defineProperty(Vv,"__esModule",{value:!0});Vv.FetchStreamRecorder=Vv.FetchStreamSource=Vv.IChatMLFetcher=void 0;var DQr=Qe(),UQr=Ua();Vv.IChatMLFetcher=(0,DQr.createServiceIdentifier)("IChatMLFetcher");var cTe=class{get stream(){return this._stream.asyncIterable}constructor(){this._stream=new UQr.AsyncIterableSource,this._seenAnnotationTypes=new Set}pause(){this._paused??=[]}unpause(){let e=this._paused;if(e){this._paused=void 0;for(let r of e)r?this.update(r.text,r.delta):this.resolve()}}update(e,r){if(this._paused){this._paused.push({text:e,delta:r});return}r.codeVulnAnnotations&&(!((e.match(/(^|\n)```/g)?.length??0)%2===1)||e.match(/(^|\n)```\w*\s*$/))&&(r.codeVulnAnnotations=void 0),r.codeVulnAnnotations&&(r.codeVulnAnnotations=r.codeVulnAnnotations.filter(n=>!this._seenAnnotationTypes.has(n.details.type)),r.codeVulnAnnotations.forEach(n=>this._seenAnnotationTypes.add(n.details.type))),this._stream.emitOne({delta:r})}resolve(){if(this._paused){this._paused.push(void 0);return}this._stream.resolve()}};Vv.FetchStreamSource=cTe;var lTe=class{get firstTokenEmittedTime(){return this._firstTokenEmittedTime}constructor(e){this.deltas=[],this.callback=async(r,n,o)=>{this._firstTokenEmittedTime===void 0&&(o.text||o.beginToolCalls||typeof o.thinking?.text=="string"&&o.thinking?.text||o.thinking?.text?.length||o.copilotToolCalls)&&(this._firstTokenEmittedTime=Date.now());let s=e?await e(r,n,o):void 0;return this.deltas.push(o),s}}};Vv.FetchStreamRecorder=lTe});var uTe=m(jz=>{"use strict";Object.defineProperty(jz,"__esModule",{value:!0});jz.IChatQuotaService=void 0;var qQr=Qe();jz.IChatQuotaService=(0,qQr.createServiceIdentifier)("IChatQuotaService")});var dTe=m(Bz=>{"use strict";Object.defineProperty(Bz,"__esModule",{value:!0});Bz.IConversationOptions=void 0;var FQr=Qe();Bz.IConversationOptions=(0,FQr.createServiceIdentifier)("ConversationOptions")});var SL=m(iR=>{"use strict";Object.defineProperty(iR,"__esModule",{value:!0});iR.getTextPart=BQr;iR.toTextPart=mgt;iR.toTextParts=$Qr;iR.roleToString=VQr;var rC=ul(),jQr=qi();function BQr(t){return t?typeof t=="string"?t:Array.isArray(t)?t.map(e=>e.type===rC.Raw.ChatCompletionContentPartKind.Text||e.type==="text"?e.text:"").join(""):t.type===rC.Raw.ChatCompletionContentPartKind.Text?t.text:"":""}function mgt(t){return{type:rC.Raw.ChatCompletionContentPartKind.Text,text:t}}function $Qr(t){return[mgt(t)]}function VQr(t){switch(t){case rC.Raw.ChatRole.System:return"system";case rC.Raw.ChatRole.User:return"user";case rC.Raw.ChatRole.Assistant:return"assistant";case rC.Raw.ChatRole.Tool:return"tool";default:(0,jQr.assertNever)(t,`unknown role (${t})`)}}});var pTe=m(oR=>{"use strict";Object.defineProperty(oR,"__esModule",{value:!0});oR.InteractionService=oR.IInteractionService=void 0;var HQr=Qe(),ggt=ws();oR.IInteractionService=(0,HQr.createServiceIdentifier)("IInteractionService");var fTe=class{constructor(){this._interactionId=(0,ggt.generateUuid)()}startInteraction(){this._interactionId=(0,ggt.generateUuid)()}get interactionId(){return this._interactionId}};oR.InteractionService=fTe});var Sgt=m(Eg=>{"use strict";Object.defineProperty(Eg,"__esModule",{value:!0});Eg.getImageDimensions=GQr;Eg.getPngDimensions=_gt;Eg.getGifDimensions=vgt;Eg.getJpegDimensions=ygt;Eg.getWebPDimensions=Egt;Eg.getMimeType=Tgt;Eg.extractImageAttributes=zQr;function GQr(t){if(!t.startsWith("data:image/"))throw new Error("Could not read image: invalid base64 image string");let e=t.split(",")[1];switch(Tgt(e)){case"image/png":return _gt(e);case"image/gif":return vgt(e);case"image/jpeg":case"image/jpg":return ygt(e);case"image/webp":return Egt(e);default:throw new Error("Unsupported image format")}}function _gt(t){let e=atob(t.slice(0,50)).slice(16,24),r=Uint8Array.from(e,o=>o.charCodeAt(0)),n=new DataView(r.buffer);return{width:n.getUint32(0,!1),height:n.getUint32(4,!1)}}function vgt(t){let e=atob(t.slice(0,50)),r=Uint8Array.from(e,o=>o.charCodeAt(0)),n=new DataView(r.buffer);return{width:n.getUint16(6,!0),height:n.getUint16(8,!0)}}function ygt(t){let e=atob(t),r=Uint8Array.from(e,s=>s.charCodeAt(0)),n=r.length,o=2;for(;o<n;){let s=r[o]<<8|r[o+1],a=r[o+2]<<8|r[o+3];if(s>=65472&&s<=65474){let c=new DataView(r.buffer,o+5,4);return{height:c.getUint16(0,!1),width:c.getUint16(2,!1)}}o+=2+a}throw new Error("JPEG dimensions not found")}function Egt(t){let e=atob(t),r=new Uint8Array(e.length);for(let o=0;o<e.length;o++)r[o]=e.charCodeAt(o);if(e.slice(0,4)!=="RIFF"||e.slice(8,12)!=="WEBP")throw new Error("Not a valid WebP image.");let n=e.slice(12,16);if(n==="VP8 "){let o=(r[26]|r[27]<<8)&16383,s=(r[28]|r[29]<<8)&16383;return{width:o,height:s}}else if(n==="VP8L"){let o=(r[21]|r[22]<<8)&16383,s=(r[23]|r[24]<<8)&16383;return{width:o,height:s}}else if(n==="VP8X"){let o=((r[24]|r[25]<<8|r[26]<<16)&16777215)+1,s=((r[27]|r[28]<<8|r[29]<<16)&16777215)+1;return{width:o,height:s}}else throw new Error("Unsupported WebP format.")}function Tgt(t){let e={"/9j/":"image/jpeg",iVBOR:"image/png",R0lGOD:"image/gif",UklGR:"image/webp"};for(let r of Object.keys(e))if(t.startsWith(r))return e[r]}function zQr(t,e){let r=/!\[([^\]]*)\]\(<?([^)<>]+?)>?\)/,n=/<img\s+(?:alt=["']([^"']*)["']\s*)?src=["']([^"']+)["'](?:\s*alt=["']([^"']*)["'])?/,o,s="",a="";if((o=r.exec(t))!==null)s=o[2],a=o[1];else if((o=n.exec(t))!==null)s=o[2],a=o[1]||o[3]||"";else{let l=/:::image\s+.*?source=["']([^"']+)["'].*?:::/.exec(t);if(l){s=l[1];let d=/alt-text=["']([^"']*?)["']/.exec(t);a=d?d[1]:""}else return}if(!(e?!a:a))return s}});var sR=m($z=>{"use strict";Object.defineProperty($z,"__esModule",{value:!0});$z.TokenizerType=void 0;var bgt;(function(t){t.CL100K="cl100k_base",t.O200K="o200k_base",t.Llama3="llama3"})(bgt||($z.TokenizerType=bgt={}))});var mTe=m(nC=>{"use strict";Object.defineProperty(nC,"__esModule",{value:!0});nC.WorkerWithRpcProxy=nC.RcpResponseHandler=void 0;nC.createRpcProxy=Cgt;var WQr=require("worker_threads"),Vz=class{constructor(){this.nextId=1,this.handlers=new Map}createHandler(){let e=this.nextId++,r,n,o=new Promise((s,a)=>{r=s,n=a});return this.handlers.set(e,{resolve:r,reject:n}),{id:e,result:o}}handleResponse(e){let r=this.handlers.get(e.id);r&&(this.handlers.delete(e.id),e.err?r.reject(e.err):r.resolve(e.res))}handleError(e){for(let r of this.handlers.values())r.reject(e);this.handlers.clear()}clear(){this.handlers.clear()}};nC.RcpResponseHandler=Vz;function Cgt(t){let e={get:(r,n)=>(typeof n=="string"&&!r[n]&&(r[n]=(...o)=>t(n,o)),r[n])};return new Proxy(Object.create(null),e)}var hTe=class{constructor(e,r,n){this.responseHandler=new Vz,this.worker=new WQr.Worker(e,r),this.worker.on("message",async o=>{if("fn"in o)try{let s=await n?.[o.fn].apply(n,o.args);this.worker.postMessage({id:o.id,res:s})}catch(s){this.worker.postMessage({id:o.id,err:s})}else this.responseHandler.handleResponse(o)}),this.worker.on("error",o=>this.handleError(o)),this.worker.on("exit",o=>{o!==0&&this.handleError(new Error(`Worker thread exited with code ${o}.`))}),this.proxy=Cgt((o,s)=>{if(!this.worker)throw new Error("Worker was terminated!");let{id:a,result:c}=this.responseHandler.createHandler();return this.worker.postMessage({id:a,fn:o,args:s}),c})}terminate(){this.worker.removeAllListeners(),this.worker.terminate(),this.responseHandler.clear()}handleError(e){this.responseHandler.handleError(e)}};nC.WorkerWithRpcProxy=hTe});var Agt=m(_d=>{"use strict";Object.defineProperty(_d,"__esModule",{value:!0});_d.SlidingWindowAverage=_d.MovingAverage=_d.Counter=void 0;_d.clamp=YQr;_d.rot=QQr;_d.isPointWithinTriangle=ZQr;_d.randomChance=JQr;var KQr=qi();function YQr(t,e,r){return Math.min(Math.max(t,e),r)}function QQr(t,e){return(e+t%e)%e}var gTe=class{constructor(){this._next=0}getNext(){return this._next++}};_d.Counter=gTe;var _Te=class{constructor(){this._n=1,this._val=0}update(e){return this._val=this._val+(e-this._val)/this._n,this._n+=1,this._val}get value(){return this._val}};_d.MovingAverage=_Te;var vTe=class{constructor(e){this._n=0,this._val=0,this._values=[],this._index=0,this._sum=0,this._values=new Array(e),this._values.fill(0,0,e)}update(e){let r=this._values[this._index];return this._values[this._index]=e,this._index=(this._index+1)%this._values.length,this._sum-=r,this._sum+=e,this._n<this._values.length&&(this._n+=1),this._val=this._sum/this._n,this._val}get value(){return this._val}};_d.SlidingWindowAverage=vTe;function ZQr(t,e,r,n,o,s,a,c){let l=a-r,u=c-n,d=o-r,f=s-n,p=t-r,h=e-n,_=l*l+u*u,g=l*d+u*f,v=l*p+u*h,E=d*d+f*f,y=d*p+f*h,S=1/(_*E-g*g),b=(E*v-g*y)*S,w=(_*y-g*v)*S;return b>=0&&w>=0&&b+w<1}function JQr(t){return(0,KQr.assert)(t>=0&&t<=1,"p must be between 0 and 1"),Math.random()<t}});var xgt=m(Gz=>{"use strict";Object.defineProperty(Gz,"__esModule",{value:!0});Gz.TikTokenImpl=void 0;var yTe=O$(),Hz=Agt(),XQr=H2(),eZr=dpe(),ETe=class t{constructor(){this._values=[],this._stats={encodeDuration:new Hz.MovingAverage,textLength:new Hz.MovingAverage,callCount:0}}static get instance(){return this._instance||(this._instance=new t),this._instance}init(e,r,n){let o=this._values.length,s=n?eZr.parseTikTokenBinary:a=>a;return this._values.push((0,yTe.createTokenizer)(s(e),(0,yTe.getSpecialTokensByEncoder)(r),(0,yTe.getRegexByEncoder)(r),64e3)),o}encode(e,r,n){let o=XQr.StopWatch.create(!0),s=this._values[e].encode(r,n);return this._stats.callCount+=1,this._stats.encodeDuration.update(o.elapsed()),this._stats.textLength.update(r.length),s}destroy(e){this._values[e]=void 0}resetStats(){let e=this._stats,r={callCount:e.callCount,encodeDuration:e.encodeDuration.value,textLength:e.textLength.value};return this._stats.encodeDuration=new Hz.MovingAverage,this._stats.textLength=new Hz.MovingAverage,this._stats.callCount=0,r}};Gz.TikTokenImpl=ETe});var oC=m(ho=>{"use strict";var Pgt=ho&&ho.__decorate||function(t,e,r,n){var o=arguments.length,s=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(o<3?a(s):o>3?a(e,r,s):a(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},Rgt=ho&&ho.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(ho,"__esModule",{value:!0});ho.TokenizerProvider=ho.BaseTokensPerName=ho.BaseTokensPerMessage=ho.BaseTokensPerCompletion=ho.ITokenizerProvider=void 0;ho.calculateImageTokenCost=CTe;var iC=ul(),tZr=Kve(),rZr=Sgt(),nZr=Qe(),wgt=sR(),iZr=mTe(),oZr=qi(),Igt=nE(),TTe=Ar(),zz=Nl(),Ogt=qa(),STe=xgt();ho.ITokenizerProvider=(0,nZr.createServiceIdentifier)("ITokenizerProvider");ho.BaseTokensPerCompletion=3;ho.BaseTokensPerMessage=3;ho.BaseTokensPerName=1;var bTe=class{constructor(e,r){this._cl100kTokenizer=new Igt.Lazy(()=>new Wz(e,(0,zz.join)(__dirname,"./cl100k_base.tiktoken"),"cl100k_base",r)),this._o200kTokenizer=new Igt.Lazy(()=>new Wz(e,(0,zz.join)(__dirname,"./o200k_base.tiktoken"),"o200k_base",r))}dispose(){this._cl100kTokenizer.rawValue?.dispose(),this._o200kTokenizer.rawValue?.dispose()}acquireTokenizer(e){switch(e.tokenizer){case wgt.TokenizerType.CL100K:return this._cl100kTokenizer.value;case wgt.TokenizerType.O200K:return this._o200kTokenizer.value;default:throw new Error(`Unknown tokenizer: ${e.tokenizer}`)}}};ho.TokenizerProvider=bTe;ho.TokenizerProvider=bTe=Pgt([Rgt(1,Ogt.ITelemetryService)],bTe);var Wz=class extends TTe.Disposable{constructor(e,r,n,o){super(),this._useWorker=e,this._tokenFilePath=r,this._encoderName=n,this._telemetryService=o,this._cache=new tZr.LRUCache(5e3),this.baseTokensPerMessage=ho.BaseTokensPerMessage,this.baseTokensPerName=ho.BaseTokensPerName,this.mode=iC.OutputMode.Raw}async countMessagesTokens(e){let r=ho.BaseTokensPerMessage;for(let n of e)r+=await this.countMessageTokens(n);return r}async tokenize(e){return(await this.ensureTokenizer()).encode(e)}async tokenLength(e){if(typeof e=="string")return this._textTokenLength(e);switch(e.type){case iC.Raw.ChatCompletionContentPartKind.Text:return this._textTokenLength(e.text);case iC.Raw.ChatCompletionContentPartKind.Opaque:return e.tokenUsage||0;case iC.Raw.ChatCompletionContentPartKind.Image:if(e.imageUrl.url.startsWith("data:image/"))try{return CTe(e.imageUrl.url,e.imageUrl.detail)}catch{return this._textTokenLength(e.imageUrl.url)}return this._textTokenLength(e.imageUrl.url);case iC.Raw.ChatCompletionContentPartKind.CacheBreakpoint:return 0;default:(0,oZr.assertNever)(e,`unknown content part (${JSON.stringify(e)})`)}}async _textTokenLength(e){if(!e)return 0;let r=this._cache.get(e);return r||(r=(await this.tokenize(e)).length,this._cache.put(e,r)),r}async countMessageTokens(e){return this.baseTokensPerMessage+await this.countMessageObjectTokens((0,iC.toMode)(iC.OutputMode.OpenAI,e))}async countToolTokens(e){let n=0;e.length&&(n+=16);let o=8;for(let s of e)n+=o,n+=await this.countObjectTokens({name:s.name,description:s.description,parameters:s.inputSchema});return Math.floor(n*1.1)}async countMessageObjectTokens(e){let r=0;for(let[n,o]of Object.entries(e))if(o){if(typeof o=="string")r+=await this.tokenLength(o);else if(o){let s=o;if(s.type==="text")r+=await this.tokenLength(s.text);else if(s.type==="image_url"&&s.image_url)if(s.image_url.url.startsWith("data:image/"))try{r+=CTe(s.image_url.url,s.image_url.detail)}catch{r+=await this.tokenLength(s.image_url.url)}else r+=await this.tokenLength(s.image_url.url);else{let a=await this.countMessageObjectTokens(o);n==="tool_calls"&&(a=Math.floor(a*1.5)),r+=a}}n==="name"&&o!==void 0&&(r+=this.baseTokensPerName)}return r}async countObjectTokens(e){let r=0;for(let[n,o]of Object.entries(e))o&&(r+=await this.tokenLength(n),typeof o=="string"?r+=await this.tokenLength(o):o&&(r+=await this.countMessageObjectTokens(o)));return r}ensureTokenizer(){return this._tokenizer??=this.doInitTokenizer(),this._tokenizer}async doInitTokenizer(){let e=(0,zz.basename)(__dirname)==="dist";if(this._useWorker){let r=(0,zz.join)(__dirname,"tikTokenizerWorker.js"),n=new iZr.WorkerWithRpcProxy(r,{name:`TikToken worker (${this._encoderName})`}),o=await n.proxy.init(this._tokenFilePath,this._encoderName,e),s=(0,TTe.toDisposable)(()=>{n.terminate(),this._store.deleteAndLeak(s),this._tokenizer=void 0}),a;return{encode:(c,l)=>{let u=n.proxy.encode(o,c,l);return clearTimeout(a),a=setTimeout(()=>s.dispose(),15e3),Math.random()<1/1e3&&n.proxy.resetStats().then(d=>{this._telemetryService.sendMSFTTelemetryEvent("tokenizer.stats",void 0,d)}),u}}}else{let r=STe.TikTokenImpl.instance.init(this._tokenFilePath,this._encoderName,e),n=(0,TTe.toDisposable)(()=>{STe.TikTokenImpl.instance.destroy(r),this._store.deleteAndLeak(n),this._tokenizer=void 0});return this._store.add(n),{encode:async(o,s)=>STe.TikTokenImpl.instance.encode(r,o,s)}}}};Wz=Pgt([Rgt(3,Ogt.ITelemetryService)],Wz);function CTe(t,e){let{width:r,height:n}=(0,rZr.getImageDimensions)(t);if(e==="low")return 85;if(r>2048||n>2048){let a=2048/Math.max(r,n);r=Math.round(r*a),n=Math.round(n*a)}let o=768/Math.min(r,n);return r=Math.round(r*o),n=Math.round(n*o),Math.ceil(r/512)*Math.ceil(n/512)*170+85}});var Hv=m(aR=>{"use strict";Object.defineProperty(aR,"__esModule",{value:!0});aR.IDomainService=aR.FEEDBACK_URL=void 0;var sZr=Qe();aR.FEEDBACK_URL="https://aka.ms/microsoft/vscode-copilot-release";aR.IDomainService=(0,sZr.createServiceIdentifier)("IDomainService")});var Kz=m(uu=>{"use strict";Object.defineProperty(uu,"__esModule",{value:!0});uu.HeaderContributors=uu.IHeaderContributors=uu.userAgentLibraryHeader=void 0;uu.stringifyUrlOrRequestMetadata=fZr;uu.createCapiRequestBody=pZr;uu.canRetryOnceNetworkError=Ngt;uu.postRequest=hZr;uu.getRequest=mZr;var aZr=Qe(),cZr=sR(),lZr=Gr(),uZr=Bv();uu.userAgentLibraryHeader="X-VSCode-User-Agent-Library-Version";var dZr=30*1e3;function fZr(t){return typeof t=="string"?t:JSON.stringify(t)}function pZr(t,e,r){let n={messages:(0,uZr.rawMessageToCAPI)(t.messages,r),model:e};return t.postOptions&&Object.assign(n,t.postOptions),n}function Mgt(t,e,r,n,o,s,a,c,l,u,d,f){let p=typeof o=="string"||"type"in o?{modelMaxPromptTokens:0,urlOrRequestMetadata:o,family:"",tokenizer:cZr.TokenizerType.O200K,acquireTokenizer:()=>{throw new Error("Method not implemented.")},name:"",version:""}:o,h={Authorization:`Bearer ${s}`,"X-Request-Id":c,"X-Interaction-Type":a,"OpenAI-Intent":a,"X-GitHub-Api-Version":"2025-05-01",...u,...p.getExtraHeaders?p.getExtraHeaders():{}};p.interceptBody&&p.interceptBody(l);let _=p.getEndpointFetchOptions?.(),g={method:n,headers:h,json:l,timeout:dZr,useFetcher:f,suppressIntegrationId:_?.suppressIntegrationId};if(d){let v=t.makeAbortController();d.onCancellationRequested(()=>{e.sendGHTelemetryEvent("networking.cancelRequest",{headerRequestId:c}),v.abort()}),g.signal=v.signal}return typeof p.urlOrRequestMetadata=="string"?t.fetch(p.urlOrRequestMetadata,g).catch(E=>{if(Ngt(E))return e.sendGHTelemetryEvent("networking.disconnectAll"),t.disconnectAll().then(()=>t.fetch(p.urlOrRequestMetadata,g));throw t.isAbortError(E)?new lZr.CancellationError:E}):r.makeRequest(g,p.urlOrRequestMetadata)}function Ngt(t){return["ECONNRESET","ETIMEDOUT","ERR_NETWORK_CHANGED","ERR_HTTP2_INVALID_SESSION","ERR_HTTP2_STREAM_CANCEL","ERR_HTTP2_GOAWAY_SESSION","ERR_HTTP2_PROTOCOL_ERROR"].includes(t?.code)}function hZr(t,e,r,n,o,s,a,c,l,u,d,f){return Mgt(t,e,r,"POST",n,o,a,c,l,u,d,f)}function mZr(t,e,r,n,o,s,a,c,l,u,d){return Mgt(t,e,r,"GET",n,o,a,c,l,u,d)}uu.IHeaderContributors=(0,aZr.createServiceIdentifier)("headerContributors");var ATe=class{constructor(){this.contributors=[]}add(e){this.contributors.push(e)}remove(e){let r=this.contributors.indexOf(e);r!==-1&&this.contributors.splice(r,1)}contributeHeaders(e){for(let r of this.contributors)r.contributeHeaderValues(e)}size(){return this.contributors.length}};uu.HeaderContributors=ATe});var PTe=m(Aa=>{"use strict";var gZr=Aa&&Aa.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),_Zr=Aa&&Aa.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),vZr=Aa&&Aa.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),o=0;o<n.length;o++)n[o]!=="default"&&gZr(r,e,n[o]);return _Zr(r,e),r}})();Object.defineProperty(Aa,"__esModule",{value:!0});Aa.StringSHA1=Aa.hashAsync=void 0;Aa.hash=yZr;Aa.doHash=Zz;Aa.numberHash=eh;Aa.stringHash=ITe;var wTe=V1(),Yz=vZr(Fo());function yZr(t){return Zz(t,0)}function Zz(t,e){switch(typeof t){case"object":return t===null?eh(349,e):Array.isArray(t)?TZr(t,e):SZr(t,e);case"string":return ITe(t,e);case"boolean":return EZr(t,e);case"number":return eh(t,e);case"undefined":return eh(937,e);default:return eh(617,e)}}function eh(t,e){return(e<<5)-e+t|0}function EZr(t,e){return eh(t?433:863,e)}function ITe(t,e){e=eh(149417,e);for(let r=0,n=t.length;r<n;r++)e=eh(t.charCodeAt(r),e);return e}function TZr(t,e){return e=eh(104579,e),t.reduce((r,n)=>Zz(n,r),e)}function SZr(t,e){return e=eh(181387,e),Object.keys(t).sort().reduce((r,n)=>(r=ITe(n,r),Zz(t[n],r)),e)}var bZr=t=>{if(typeof t=="string"&&t.length<250){let r=new Qz;return r.update(t),Promise.resolve(r.digest())}let e;return typeof t=="string"?e=new TextEncoder().encode(t):t instanceof wTe.VSBuffer?e=t.buffer:e=t,crypto.subtle.digest("sha-1",e).then(cR)};Aa.hashAsync=bZr;function xTe(t,e,r=32){let n=r-e,o=~((1<<n)-1);return(t<<e|(o&t)>>>n)>>>0}function cR(t,e=32){return t instanceof ArrayBuffer?(0,wTe.encodeHex)(wTe.VSBuffer.wrap(new Uint8Array(t))):(t>>>0).toString(16).padStart(e/4,"0")}var Qz=class t{static{this._bigBlock32=new DataView(new ArrayBuffer(320))}constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(67),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(e){let r=e.length;if(r===0)return;let n=this._buff,o=this._buffLen,s=this._leftoverHighSurrogate,a,c;for(s!==0?(a=s,c=-1,s=0):(a=e.charCodeAt(0),c=0);;){let l=a;if(Yz.isHighSurrogate(a))if(c+1<r){let u=e.charCodeAt(c+1);Yz.isLowSurrogate(u)?(c++,l=Yz.computeCodePoint(a,u)):l=65533}else{s=a;break}else Yz.isLowSurrogate(a)&&(l=65533);if(o=this._push(n,o,l),c++,c<r)a=e.charCodeAt(c);else break}this._buffLen=o,this._leftoverHighSurrogate=s}_push(e,r,n){return n<128?e[r++]=n:n<2048?(e[r++]=192|(n&1984)>>>6,e[r++]=128|(n&63)>>>0):n<65536?(e[r++]=224|(n&61440)>>>12,e[r++]=128|(n&4032)>>>6,e[r++]=128|(n&63)>>>0):(e[r++]=240|(n&1835008)>>>18,e[r++]=128|(n&258048)>>>12,e[r++]=128|(n&4032)>>>6,e[r++]=128|(n&63)>>>0),r>=64&&(this._step(),r-=64,this._totalLen+=64,e[0]=e[64],e[1]=e[65],e[2]=e[66]),r}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),cR(this._h0)+cR(this._h1)+cR(this._h2)+cR(this._h3)+cR(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,this._buff.subarray(this._buffLen).fill(0),this._buffLen>56&&(this._step(),this._buff.fill(0));let e=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(e/4294967296),!1),this._buffDV.setUint32(60,e%4294967296,!1),this._step()}_step(){let e=t._bigBlock32,r=this._buffDV;for(let f=0;f<64;f+=4)e.setUint32(f,r.getUint32(f,!1),!1);for(let f=64;f<320;f+=4)e.setUint32(f,xTe(e.getUint32(f-12,!1)^e.getUint32(f-32,!1)^e.getUint32(f-56,!1)^e.getUint32(f-64,!1),1),!1);let n=this._h0,o=this._h1,s=this._h2,a=this._h3,c=this._h4,l,u,d;for(let f=0;f<80;f++)f<20?(l=o&s|~o&a,u=1518500249):f<40?(l=o^s^a,u=1859775393):f<60?(l=o&s|o&a|s&a,u=2400959708):(l=o^s^a,u=3395469782),d=xTe(n,5)+l+c+u+e.getUint32(f*4,!1)&4294967295,c=a,a=s,s=xTe(o,30),o=n,n=d;this._h0=this._h0+n&4294967295,this._h1=this._h1+o&4294967295,this._h2=this._h2+s&4294967295,this._h3=this._h3+a&4294967295,this._h4=this._h4+c&4294967295}};Aa.StringSHA1=Qz});var lR=m(bL=>{"use strict";Object.defineProperty(bL,"__esModule",{value:!0});bL.TelemetryData=void 0;bL.eventPropertiesToSimpleObject=AZr;var CZr=ws(),RTe=class t{static{this.keysExemptedFromSanitization=["VSCode.ABExp.Features","abexp.assignmentcontext"]}constructor(e,r,n){this.properties=e,this.measurements=r,this.issuedTime=n}static createAndMarkAsIssued(e,r){return new t(e||{},r||{},Date.now())}extendedBy(e,r){let n={...this.properties,...e},o={...this.measurements,...r},s=new t(n,o,this.issuedTime);return s.displayedTime=this.displayedTime,s}markAsDisplayed(){this.displayedTime===void 0&&(this.displayedTime=Date.now())}extendWithEditorAgnosticFields(e){this.properties.editor_version=e.getEditorInfo().format(),this.properties.editor_plugin_version=e.getEditorPluginInfo().format(),this.properties.client_machineid=e.machineId,this.properties.client_sessionid=e.sessionId,this.properties.copilot_version=`copilot/${e.getVersion()}`,this.properties.common_extname=e.getEditorPluginInfo().name,this.properties.common_extversion=e.getEditorPluginInfo().version,this.properties.common_vscodeversion=e.getEditorInfo().format()}extendWithConfigProperties(e,r,n){let o=e.dumpConfig();o["copilot.build"]=r.getBuild(),o["copilot.buildType"]=r.getBuildType(),n.trackingId&&(o["copilot.trackingId"]=n.trackingId),n.organizationsList&&(o.organizations_list=n.organizationsList),this.properties={...this.properties,...o}}extendWithRequestId(e){let r={completionId:e.completionId,created:e.created.toString(),headerRequestId:e.headerRequestId,serverExperiments:e.serverExperiments,deploymentId:e.deploymentId};this.properties={...this.properties,...r}}static{this.keysToRemoveFromStandardTelemetry=["gitRepoHost","gitRepoName","gitRepoOwner","gitRepoUrl","gitRepoPath","repo","request_option_nwo","userKind"]}static maybeRemoveRepoInfoFromPropertiesHack(e,r){if(e)return r;let n={};for(let o in r)t.keysToRemoveFromStandardTelemetry.includes(o)||(n[o]=r[o]);return n}sanitizeKeys(){this.properties=t.sanitizeKeys(this.properties),this.measurements=t.sanitizeKeys(this.measurements)}static sanitizeKeys(e){e=e||{};let r={};for(let n in e){let o=t.keysExemptedFromSanitization.includes(n)?n:n.replace(/\./g,"_");r[o]=e[n]}return r}updateTimeSinceIssuedAndDisplayed(){let e=Date.now()-this.issuedTime;if(this.measurements.timeSinceIssuedMs===void 0&&(this.measurements.timeSinceIssuedMs=e),this.measurements.timeSinceDisplayedMs===void 0&&this.displayedTime!==void 0){let r=Date.now()-this.displayedTime;this.measurements.timeSinceDisplayedMs=r}}makeReadyForSending(e,r,n){this.extendWithConfigProperties(e,r,n),this.extendWithEditorAgnosticFields(r),this.sanitizeKeys(),this.updateTimeSinceIssuedAndDisplayed();for(let o in this.properties)this.properties[o]===void 0&&delete this.properties[o];xZr(r,this.properties)}};bL.TelemetryData=RTe;function AZr(t){if(!t)return;let e={};for(let r in t){let n=t[r];n&&(n.value?e[r]=n.value:e[r]=n)}return e}function xZr(t,e){e.unique_id=(0,CZr.generateUuid)(),e.common_extname=t.getEditorPluginInfo().name,e.common_extversion=t.getEditorPluginInfo().version,e.common_vscodeversion=t.getEditorInfo().format()}});var Lgt=m(OTe=>{"use strict";Object.defineProperty(OTe,"__esModule",{value:!0});OTe.extractThinkingDeltaFromChoice=PZr;function wZr(t){if(!t)return"";if(t.cot_summary)return t.cot_summary;if(t.reasoning_text)return t.reasoning_text;if(t.thinking)return t.thinking}function IZr(t){if(t){if(t.cot_id)return t.cot_id;if(t.reasoning_opaque)return t.reasoning_opaque;if(t.signature)return t.signature}}function PZr(t){let e=t.message||t.delta;if(!e)return;let r=IZr(e),n=wZr(e);if(r&&n)return{id:r,text:n};if(n)return{text:n};if(r)return{id:r}}});var Jz=m(sC=>{"use strict";Object.defineProperty(sC,"__esModule",{value:!0});sC.getRequestId=RZr;sC.isCopilotAnnotation=OZr;sC.isCodeCitationAnnotation=MZr;sC.isCopilotWebReference=NZr;sC.isOpenAiFunctionTool=LZr;function RZr(t,e){return{headerRequestId:t.headers.get("x-request-id")||"",gitHubRequestId:t.headers.get("x-github-request-id")||"",completionId:e&&e.id?e.id:"",created:e&&e.created?e.created:0,serverExperiments:t.headers.get("X-Copilot-Experiment")||"",deploymentId:t.headers.get("azureml-model-deployment")||""}}function OZr(t){if(typeof t!="object"||t===null||!("details"in t))return!1;let{details:e}=t;return typeof e=="object"&&e!==null&&"type"in e&&"description"in e&&typeof e.type=="string"&&typeof e.description=="string"}function MZr(t){if(typeof t!="object"||t===null||!("citations"in t))return!1;let{citations:e}=t;return typeof e=="object"&&e!==null&&"url"in e&&"license"in e&&typeof e.url=="string"&&typeof e.license=="string"}function NZr(t){return typeof t=="object"&&!!t&&"title"in t&&"excerpt"in t&&"url"in t}function LZr(t){return t.function!==void 0}});var tW=m(aC=>{"use strict";Object.defineProperty(aC,"__esModule",{value:!0});aC.SSEProcessor=void 0;aC.splitChunk=Dgt;aC.convertToAPIJsonData=UZr;aC.sendCommunicationErrorTelemetry=uR;var Xz=pa(),kgt=lR(),kZr=Lgt(),eW=Jz(),No=Bv(),CL=class t{constructor(e){this.model=e,this._text=[],this._newText=[]}get text(){return this._text}append(e){if(e.text){let r=t._removeCR(e.text);this._text.push(r),this._newText.push(r)}if(e.delta?.content){let r=t._removeCR(e.delta.content);this._text.push(r),this._newText.push(r)}if(e.delta?.function_call&&(e.delta.function_call.name||e.delta.function_call.arguments)){let r=t._removeCR(e.delta.function_call.arguments);this._text.push(r),this._newText.push(r)}}flush(){let e=this._newText.join("");return this._newText=[],e}static _removeCR(e){return e.replace(/\r$/g,"")}toJSON(){return{text:this._text,newText:this._newText}}},MTe=class{constructor(){this.arguments=""}update(e){e.id&&(this.id=e.id),e.function?.name&&(this.name=e.function.name),e.function?.arguments&&(this.arguments+=e.function.arguments)}},NTe=class{constructor(){this.toolCalls=[]}getToolCalls(){return this.toolCalls.map(e=>({name:e.name,arguments:e.arguments,id:e.id}))}hasToolCalls(){return this.toolCalls.length>0}update(e){e.delta?.tool_calls?.forEach(r=>{let n=this.toolCalls.at(-1);(!n||r.id&&n.id!==r.id)&&(n=new MTe,this.toolCalls.push(n)),n.update(r)})}};function Dgt(t){let e=t.split(`
`),r=e.pop();return[e.filter(n=>n!==""),r]}var LTe=class t{constructor(e,r,n,o,s,a){this.logService=e,this.telemetryService=r,this.expectedNumChoices=n,this.response=o,this.body=s,this.cancellationToken=a,this.requestId=(0,eW.getRequestId)(this.response),this.solutions={},this.completedFunctionCallIdxs=new Map,this.functionCalls={},this.toolCalls=new NTe,this.functionCallName=void 0}static async create(e,r,n,o,s){let a=await o.body();return a.setEncoding("utf8"),new t(e,r,n,o,a,s)}async*processSSE(e=async()=>{}){try{if(this.expectedNumChoices>1)for await(let r of this.processSSEInner(e))(0,No.isApiUsage)(r)||(yield r);else{let r,n;for await(let o of this.processSSEInner(e))(0,No.isApiUsage)(o)?n=o:r=o;if(this.maybeCancel("after receiving the completion, but maybe before we got the usage"))return;r&&(r.usage=n,yield r)}}finally{this.cancel(),this.logService.info(`request done: requestId: [${this.requestId.headerRequestId}] model deployment ID: [${this.requestId.deploymentId}]`)}}async*processSSEInner(e){let r="",n=!1;for await(let o of this.body){if(this.maybeCancel("after awaiting body chunk"))return;let[s,a]=Dgt(r+o.toString());r=a;let c=!0,l=!1;for(let u of s){if(u.startsWith(":"))continue;let d=u.slice(5).trim();if(d==="[DONE]"){l=!1,yield*this.finishSolutions();return}let f;try{f=JSON.parse(d)}catch{this.logService.error(`Error parsing JSON stream data for request id ${this.requestId.headerRequestId}:${u}`),uR(this.telemetryService,`Error parsing JSON stream data for request id ${this.requestId.headerRequestId}:`,u);continue}if(f.usage&&(yield f.usage),f.copilot_confirmation&&DZr(f.copilot_confirmation)&&await e("",0,{text:"",copilotConfirmation:f.copilot_confirmation}),!f.choices){!f.copilot_references&&!f.copilot_confirmation&&(f.error!==void 0?(this.logService.error(`Error in response for request id ${this.requestId.headerRequestId}:${f.error.message}`),uR(this.telemetryService,`Error in response for request id ${this.requestId.headerRequestId}:`,f.error.message),yield{index:0,finishOffset:void 0,solution:new CL(f.model||""),reason:No.FinishedCompletionReason.ServerError,error:f.error,requestId:this.requestId}):(this.logService.error(`Unexpected response with no choices or error for request id ${this.requestId.headerRequestId}`),uR(this.telemetryService,`Unexpected response with no choices or error for request id ${this.requestId.headerRequestId}`))),f.copilot_errors&&await e("",0,{text:"",copilotErrors:f.copilot_errors}),f.copilot_references&&await e("",0,{text:"",copilotReferences:f.copilot_references});continue}this.requestId.created===0&&(this.requestId=(0,eW.getRequestId)(this.response,f),this.requestId.created===0&&f.choices?.length&&(this.requestId.created=Math.floor(Date.now()/1e3)));for(let p=0;p<f.choices.length;p++){let h=f.choices[p];this.logChoice(h);let _=(0,kZr.extractThinkingDeltaFromChoice)(h);l||=!!(_?.text||_?.id),h.index in this.solutions||(this.solutions[h.index]=new CL(f.model));let g=this.solutions[h.index];if(g===null){_&&await e("",h.index,{text:"",thinking:_});continue}let v,E=async b=>(b?.vulnAnnotations&&(!Array.isArray(b.vulnAnnotations)||!b.vulnAnnotations.every(w=>(0,eW.isCopilotAnnotation)(w)))&&(b.vulnAnnotations=void 0),b?.ipCodeCitations&&(!Array.isArray(b.ipCodeCitations)||!b.ipCodeCitations.every(eW.isCodeCitationAnnotation))&&(b.ipCodeCitations=void 0),v=await e(g.text.join(""),h.index,{text:g.flush(),logprobs:h.logprobs,codeVulnAnnotations:b?.vulnAnnotations,ipCitations:b?.ipCodeCitations,copilotReferences:b?.references,copilotToolCalls:b?.toolCalls,_deprecatedCopilotFunctionCalls:b?.functionCalls,beginToolCalls:b?.beginToolCalls,copilotErrors:b?.errors,thinking:_??b?.thinking}),v!==void 0&&(n=!0),this.maybeCancel("after awaiting finishedCb")),y=!0;if(h.delta?.tool_calls){if(!this.toolCalls.hasToolCalls()){let b=h.delta.tool_calls.at(0)?.function?.name;b&&(g.text.length&&g.append({index:0,delta:{content:" "}}),await E({beginToolCalls:[{name:b}]}))}this.toolCalls.update(h)}else if(h.delta?.copilot_annotations?.CodeVulnerability||h.delta?.copilot_annotations?.IPCodeCitations){if(await E()||!n&&(g.append(h),await E({vulnAnnotations:h.delta?.copilot_annotations?.CodeVulnerability,ipCodeCitations:h.delta?.copilot_annotations?.IPCodeCitations})))continue}else if(h.delta?.role==="function"){if(h.delta.content)try{let b=JSON.parse(h.delta.content);if(Array.isArray(b)&&await E({references:b}))continue}catch(b){this.logService.error(`Error parsing function references: ${JSON.stringify(b)}`)}}else if(h.delta?.function_call&&(h.delta.function_call.name||h.delta.function_call.arguments))c=!1,this.functionCallName??=h.delta.function_call.name,this.functionCalls[this.functionCallName]??=new CL(f.model),this.functionCalls[this.functionCallName].append(h);else if((h.finish_reason===No.FinishedCompletionReason.FunctionCall||h.finish_reason===No.FinishedCompletionReason.Stop)&&this.functionCallName){let b=this.functionCalls[this.functionCallName],w={name:this.functionCallName,arguments:b.flush()};this.completedFunctionCallIdxs.set(h.index,"function");try{if(await E({functionCalls:[w]}))continue}catch(P){this.logService.error(P)}if(this.functionCalls[this.functionCallName]=null,this.functionCallName=void 0,h.finish_reason===No.FinishedCompletionReason.FunctionCall)continue}else y=!1;if((h.finish_reason===No.FinishedCompletionReason.ToolCalls||h.finish_reason===No.FinishedCompletionReason.Stop)&&this.toolCalls.hasToolCalls()){y=!0;let b=this.toolCalls.getToolCalls();this.completedFunctionCallIdxs.set(h.index,"tool");let w=b.length>0?b[0].id:void 0;try{if(await E({toolCalls:b,thinking:w&&l?{metadata:{toolId:w}}:void 0}))continue}catch(P){this.logService.error(P)}}if(!(!y&&(g.append(h),await E())||!(h.finish_reason||v!==void 0))){if(yield{solution:g,finishOffset:v,reason:h.finish_reason??No.FinishedCompletionReason.ClientTrimmed,filterReason:qZr(h),requestId:this.requestId,index:h.index},this.maybeCancel("after yielding finished choice"))return;c&&(this.solutions[h.index]=null)}}}}for(let[o,s]of Object.entries(this.solutions)){let a=Number(o);if(s!==null&&(yield{solution:s,finishOffset:void 0,reason:No.FinishedCompletionReason.ClientIterationDone,requestId:this.requestId,index:a},this.maybeCancel("after yielding after iteration done")))return}if(r.length>0&&!n)try{let o=JSON.parse(r);o.error!==void 0&&(this.logService.error(o.error,`Error in response: ${o.error.message}`),uR(this.telemetryService,`Error in response: ${o.error.message}`,o.error))}catch{this.logService.error(`Error parsing extraData for request id ${this.requestId.headerRequestId}: ${r}`),uR(this.telemetryService,`Error parsing extraData for request id ${this.requestId.headerRequestId}: ${r}`)}}async*finishSolutions(){for(let[e,r]of Object.entries(this.solutions)){let n=Number(e);if(r!==null){if(this.completedFunctionCallIdxs.has(n)){yield{solution:r,finishOffset:void 0,reason:this.completedFunctionCallIdxs.get(n)==="function"?No.FinishedCompletionReason.FunctionCall:No.FinishedCompletionReason.ToolCalls,requestId:this.requestId,index:n};continue}if(yield{solution:r,finishOffset:void 0,reason:No.FinishedCompletionReason.ClientDone,requestId:this.requestId,index:n},this.maybeCancel("after yielding on DONE"))return}}}maybeCancel(e){return this.cancellationToken?.isCancellationRequested?(this.logService.debug("Cancelled: "+e),this.cancel(),!0):!1}cancel(){this.body.destroy()}logChoice(e){let r={...e};delete r.index,delete r.content_filter_results,delete r.content_filter_offsets,this.logService.trace(`choice ${JSON.stringify(r)}`)}};aC.SSEProcessor=LTe;function DZr(t){return typeof t.title=="string"&&typeof t.message=="string"&&!!t.confirmation}function UZr(t){return{text:t.text.join(""),tokens:t.text}}function qZr(t){if(t.finish_reason===No.FinishedCompletionReason.ContentFilter){if(t.delta?.copilot_annotations?.TextCopyright)return No.FilterReason.Copyright;if(t.delta?.copilot_annotations?.Sexual||t.delta?.copilot_annotations?.SexualPattern)return No.FilterReason.Sexual;if(t.delta?.copilot_annotations?.Violence)return No.FilterReason.Violence;if(t.delta?.copilot_annotations?.HateSpeech||t.delta?.copilot_annotations?.HateSpeechPattern)return No.FilterReason.Hate;if(t.delta?.copilot_annotations?.SelfHarm)return No.FilterReason.SelfHarm;if(t.delta?.copilot_annotations?.PromptPromBlockList)return No.FilterReason.Prompt;if(t.content_filter_results){for(let e of Object.keys(t.content_filter_results))if(t.content_filter_results[e]?.filtered)return e}}}function uR(t,e,r){let n=[e,r],o=n.length>0?JSON.stringify(n):"no msg",s=kgt.TelemetryData.createAndMarkAsIssued({context:"fetch",level:Xz.LogLevel[Xz.LogLevel.Error],message:o});t.sendEnhancedGHTelemetryErrorEvent("log",s.properties,s.measurements);let a=kgt.TelemetryData.createAndMarkAsIssued({context:"fetch",level:Xz.LogLevel[Xz.LogLevel.Error],message:"[redacted]"});t.sendGHTelemetryErrorEvent("log",a.properties,a.measurements)}});var UTe=m(wL=>{"use strict";Object.defineProperty(wL,"__esModule",{value:!0});wL.sendEngineMessagesLengthTelemetry=Bgt;wL.sendEngineMessagesTelemetry=$gt;wL.prepareChatCompletionForReturn=QZr;var FZr=ul(),Fgt=PTe(),nW=f_(),jgt=ws(),jZr=SL(),DTe=qa(),xL=lR(),BZr=Bv(),$Zr=tW();function Bgt(t,e,r,n,o){let s=n?"output":"input",a=r.properties.modelCallId;if(!a){o?.warn("[TELEMETRY] modelCallId not found in telemetryData, input/output messages cannot be linked");return}let c=e.map(d=>{let f={...d,content:typeof d.content=="string"?d.content.length:Array.isArray(d.content)?d.content.reduce((p,h)=>typeof h=="string"?p+h.length:h.type==="text"?p+(h.text?.length||0):p,0):0};return"tool_calls"in d&&d.tool_calls&&Array.isArray(d.tool_calls)&&(f.tool_calls=d.tool_calls.map(p=>({...p,function:p.function?{...p.function,arguments:typeof p.function.arguments=="string"?p.function.arguments.length:p.function.arguments}:p.function}))),f}),l={};for(let[d,f]of Object.entries(r.properties))if(d.startsWith("request.option.tools"))if(typeof f=="string")try{let p=JSON.parse(f);Array.isArray(p)?l[d]=p.length.toString():l[d]=f.length.toString()}catch{l[d]=f.length.toString()}else Array.isArray(f)?l[d]=f.length.toString():l[d]="0";else l[d]=f;let u=xL.TelemetryData.createAndMarkAsIssued({...l,messagesJson:JSON.stringify(c),message_direction:s,modelCallId:a},r.measurements);t.sendEnhancedGHTelemetryEvent("engine.messages.length",(0,DTe.multiplexProperties)(u.properties),u.measurements),t.sendInternalMSFTTelemetryEvent("engine.messages.length",(0,DTe.multiplexProperties)(u.properties),u.measurements)}var Ugt=new nW.LRUCache(1e3),qgt=new nW.LRUCache(500),AL=new nW.LRUCache(1e3),rW={headerRequestId:null},kTe=new nW.LRUCache(100);function VZr(t){let e=AL.get(t);if(e!==void 0){let r=e+1;return AL.set(t,r),r}else return AL.set(t,1),1}function HZr(t){let e=kTe.get(t);if(e!==void 0){let r=e+1;return kTe.set(t,r),r}else return kTe.set(t,1),1}function GZr(t,e,r){let n={};for(let[f,p]of Object.entries(e.properties))f.startsWith("request.option.")&&(n[f]=p);if(Object.keys(n).length===0)return;let o=e.properties.conversationId||e.properties.sessionId||"unknown",s=e.properties.headerRequestId||"unknown",a=(0,Fgt.hash)(n).toString(),c=qgt.get(a);if(!c)c=(0,jgt.generateUuid)(),qgt.set(a,c);else return c;let l=JSON.stringify(n),u=8e3,d=[];for(let f=0;f<l.length;f+=u)d.push(l.substring(f,f+u));for(let f=0;f<d.length;f++){let p=xL.TelemetryData.createAndMarkAsIssued({requestOptionsId:c,conversationId:o,headerRequestId:s,requestOptionsJson:d[f],chunkIndex:f.toString(),totalChunks:d.length.toString()},e.measurements);t.sendInternalMSFTTelemetryEvent("model.request.options.added",p.properties,p.measurements)}return c}function zZr(t,e,r){let n=e.properties.headerRequestId;if(!n)return;let o=e.properties.conversationId;if(o&&(rW.headerRequestId=n),AL.has(n))return;let s;o&&(s=HZr(o));let a={};for(let[l,u]of Object.entries(e.properties))!l.startsWith("message")&&!l.startsWith("request.option")&&l!=="modelCallId"&&(a[l]=u);if(s!==void 0&&(a.conversationTurn=s.toString()),!o&&rW.headerRequestId){let l=AL.get(rW.headerRequestId);a.mostRecentConversationHeaderRequestId=rW.headerRequestId,l!==void 0&&(a.mostRecentConversationHeaderRequestIdTurn=l.toString())}let c=xL.TelemetryData.createAndMarkAsIssued(a,e.measurements);t.sendInternalMSFTTelemetryEvent("model.request.added",c.properties,c.measurements)}function WZr(t,e,r,n,o){let s=[];for(let a of e){let c=r.properties.conversationId||r.properties.sessionId||"unknown",l=r.properties.headerRequestId||"unknown",u=(0,Fgt.hash)({role:a.role,content:a.content,headerRequestId:l,..."tool_calls"in a&&a.tool_calls&&{tool_calls:a.tool_calls},..."tool_call_id"in a&&a.tool_call_id&&{tool_call_id:a.tool_call_id}}).toString(),d=Ugt.get(u);if(!d)d=(0,jgt.generateUuid)(),Ugt.set(u,d);else{s.push({uuid:d,headerRequestId:l});continue}s.push({uuid:d,headerRequestId:l});let f=JSON.stringify(a),p=8e3,h=[];for(let _=0;_<f.length;_+=p)h.push(f.substring(_,_+p));for(let _=0;_<h.length;_++){let g=xL.TelemetryData.createAndMarkAsIssued({messageUuid:d,messageDirection:n,conversationId:c,headerRequestId:l,messageJson:h[_],chunkIndex:_.toString(),totalChunks:h.length.toString()},r.measurements);t.sendInternalMSFTTelemetryEvent("model.message.added",g.properties,g.measurements)}}return s}function KZr(t,e,r,n,o){let s=r.properties.modelCallId;if(!s)return;let a;n==="input"&&(a=GZr(t,r,o));let c=r.properties.conversationId||r.properties.sessionId||"unknown",l=new Map;for(let u of e)l.has(u.headerRequestId)||l.set(u.headerRequestId,[]),l.get(u.headerRequestId).push(u.uuid);for(let[u,d]of l){let f=n==="input"?"model.modelCall.input":"model.modelCall.output",p;n==="input"&&(p=VZr(u));let h=JSON.stringify(d),_=8e3,g=[];for(let v=0;v<h.length;v+=_)g.push(h.substring(v,v+_));for(let v=0;v<g.length;v++){let E=xL.TelemetryData.createAndMarkAsIssued({modelCallId:s,conversationId:c,headerRequestId:u,messageDirection:n,messageUuids:g[v],chunkIndex:v.toString(),totalChunks:g.length.toString(),messageCount:d.length.toString(),...p!==void 0&&{requestTurn:p.toString()},...a&&{requestOptionsId:a},...r.properties.turnIndex&&{turnIndex:r.properties.turnIndex}},r.measurements);t.sendInternalMSFTTelemetryEvent(f,E.properties,E.measurements)}}}function YZr(t,e,r,n,o){let s=r.properties.messageSource;if(s==="XtabProvider"||s&&s.startsWith("api."))return;n||zZr(t,r,o);let a=r.properties.retryAfterFilterCategory!==void 0;if(!n&&a)return;let c=WZr(t,e,r,n?"output":"input",o);KZr(t,c,r,n?"output":"input",o)}function $gt(t,e,r,n,o){let s=r.extendedBy({messagesJson:JSON.stringify(e)});t.sendEnhancedGHTelemetryEvent("engine.messages",(0,DTe.multiplexProperties)(s.properties),s.measurements),YZr(t,e,r,n,o),Bgt(t,e,r,n,o)}function QZr(t,e,r,n){let o=r.solution.text.join(""),s=!1;r.finishOffset!==void 0&&(e.debug(`message ${r.index}: early finish at offset ${r.finishOffset}`),o=o.substring(0,r.finishOffset),s=!0),e.info(`message ${r.index} returned. finish reason: [${r.reason}]`),e.debug(`message ${r.index} details: finishOffset: [${r.finishOffset}] completionId: [{${r.requestId.completionId}}] created: [{${r.requestId.created}}]`);let a=(0,$Zr.convertToAPIJsonData)(r.solution),c={role:FZr.Raw.ChatRole.Assistant,content:(0,jZr.toTextParts)(o)},l=(0,BZr.rawMessageToCAPI)(c);n.extendWithRequestId(r.requestId);let u=n;return r.usage&&(u=n.extendedBy({},{promptTokens:r.usage.prompt_tokens,completionTokens:r.usage.completion_tokens,totalTokens:r.usage.total_tokens})),$gt(t,[l],u,!0,e),{message:c,choiceIndex:r.index,requestId:r.requestId,blockFinished:s,finishReason:r.reason,filterReason:r.filterReason,error:r.error,tokens:a.tokens,model:r.solution.model,usage:r.usage,telemetryData:u}}});var lW=m(On=>{"use strict";Object.defineProperty(On,"__esModule",{value:!0});On.isHiddenModelA=eJr;On.isHiddenModelB=iW;On.isHiddenModelE=oW;On.isVSCModelA=sW;On.isVSCModelB=aW;On.isVSCModelC=IL;On.modelPrefersInstructionsInUserMessage=tJr;On.modelPrefersInstructionsAfterHistory=rJr;On.modelSupportsApplyPatch=nJr;On.modelPrefersJsonNotebookRepresentation=iJr;On.modelSupportsReplaceString=oJr;On.modelSupportsMultiReplaceString=zgt;On.modelCanUseReplaceStringExclusively=sJr;On.modelShouldUseReplaceStringHealing=aJr;On.modelCanUseMcpResultImageURL=cJr;On.modelCanUseImageURL=lJr;On.modelCanUseApplyPatchExclusively=uJr;On.modelNeedsStrongReplaceStringHint=dJr;On.modelSupportsSimplifiedApplyPatchInstructions=fJr;On.isAnthropicFamily=cW;On.isGpt5PlusFamily=FTe;On.isGptCodexFamily=pJr;On.isGpt5Family=hJr;On.isGptFamily=mJr;On.isGpt51Family=gJr;On.getVerbosityForModelSync=_Jr;var Tg=$4(),ZZr=["a99dd17dfee04155d863268596b7f6dd36d0a6531cd326348dbe7416142a21a3","6b0f165d0590bf8d508540a796b4fda77bf6a0a4ed4e8524d5451b1913100a95"],Vgt=["7b667eee9b3517fb9aae7061617fd9cec524859fcd6a20a605bfb142a6b0f14e","e7cfc1a7adaf9e419044e731b7a9e21940a5280a438b472db0c46752dd70eab3","878722e35e24b005604c37aa5371ae100e82465fbfbdf6fe3c1fdaf7c92edc96","1d28f8e6e5af58c60e9a52385314a3c7bc61f7226e1444e31fe60c58c30e8235","3104045f9b69dbb7a3d76cc8a0aa89eb05e10677c4dd914655ea87f4be000f4e","b576d46942ee2c45ecd979cbbcb62688ae3171a07ac83f53b783787f345e3dd7","b46570bfd230db11a82d5463c160b9830195def7086519ca319c41037b991820","6b0f165d0590bf8d508540a796b4fda77bf6a0a4ed4e8524d5451b1913100a95","e30111497b2a7e8f1aa7beed60b69952537d99bcdc18987abc2f6add63a89960","df610ed210bb9266ff8ab812908d5837538cdb1d7436de907fb7e970dab5d289","6db59e9bfe6e2ce608c0ee0ade075c64e4d054f05305e3034481234703381bb5"],JZr=["31a2d5282683edb3a22c565f199aa96fb9ffb3107af35aad92ee1cd567cfc25d","dd832404e8eeb90793f0369b96ed1702e0e22487a58eb4c1f285a4af5c4f6f21","131e2083b68bde4fe879efc38ed9651b1623f8735eeb42157fa3b63ef943fdc6"],Hgt=[],Ggt=["7b667eee9b3517fb9aae7061617fd9cec524859fcd6a20a605bfb142a6b0f14e","1d28f8e6e5af58c60e9a52385314a3c7bc61f7226e1444e31fe60c58c30e8235"],XZr=["6013de0381f648b7f21518885c02b40b7583adfb33c6d9b64d3aed52c3934798"];function qTe(t){return"id"in t?t.id:t.model}function eJr(t){let e=(0,Tg.getCachedSha256Hash)(t.family);return ZZr.includes(e)}function iW(t){let e=(0,Tg.getCachedSha256Hash)(t);return JZr.includes(e)}function oW(t){let e=(0,Tg.getCachedSha256Hash)(t.family);return XZr.includes(e)}function sW(t){let e=(0,Tg.getCachedSha256Hash)(qTe(t)),r=(0,Tg.getCachedSha256Hash)(t.family);return Vgt.includes(e)||Vgt.includes(r)}function aW(t){let e=(0,Tg.getCachedSha256Hash)(qTe(t)),r=(0,Tg.getCachedSha256Hash)(t.family);return Hgt.includes(e)||Hgt.includes(r)}function IL(t){let e=(0,Tg.getCachedSha256Hash)(qTe(t)),r=(0,Tg.getCachedSha256Hash)(t.family);return Ggt.includes(e)||Ggt.includes(r)}function tJr(t){return t.includes("claude-3.5-sonnet")}function rJr(t){return t.includes("claude-3.5-sonnet")}function nJr(t){return IL(t)?!1:t.family.startsWith("gpt")&&!t.family.includes("gpt-4o")||t.family==="o4-mini"||t.family==="arctic-fox"||sW(t)||aW(t)||iW(t.family)}function iJr(t){return t.family.startsWith("gpt")&&!t.family.includes("gpt-4o")||t.family==="o4-mini"||t.family==="arctic-fox"||iW(t.family)}function oJr(t){return t.family.includes("gemini")||t.family.includes("grok-code")||zgt(t)}function zgt(t){return cW(t)||oW(t)||IL(t)}function sJr(t){return cW(t)||t.family.includes("grok-code")||oW(t)||t.family.includes("gemini-3")||IL(t)}function aJr(t){return t.family.includes("gemini-2")}function cJr(t){return!cW(t)&&!t.family.startsWith("gemini")&&!oW(t)}function lJr(t){return!t.family.startsWith("gemini")}function uJr(t){return IL(t)?!1:FTe(t)||sW(t)||aW(t)}function dJr(t){return t.family.toLowerCase().includes("gemini")}function fJr(t){return FTe(t)||sW(t)||aW(t)}function cW(t){return t.family.startsWith("claude")||t.family.startsWith("Anthropic")}function FTe(t){if(!t)return!1;let e=typeof t=="string"?t:t.family;return!!e.startsWith("gpt-5")||e==="arctic-fox"||iW(e)}function pJr(t){if(!t)return!1;let e=typeof t=="string"?t:t.family;return!!e.startsWith("gpt-")&&e.includes("-codex")||e==="arctic-fox"}function hJr(t){if(!t)return!1;let e=typeof t=="string"?t:t.family;return e==="gpt-5"||e==="gpt-5-mini"||e==="gpt-5-codex"}function mJr(t){if(!t)return!1;let e=typeof t=="string"?t:t.family;return!!e.startsWith("gpt-")||e==="arctic-fox"}function gJr(t){if(!t)return!1;let e=typeof t=="string"?t:t.family;return!!e.match(/^gpt-5\.1/i)||e==="arctic-fox"}function _Jr(t){if(t.family==="gpt-5.1"||t.family==="gpt-5-mini")return"low"}});var BTe=m(uW=>{"use strict";Object.defineProperty(uW,"__esModule",{value:!0});uW.SSEParser=void 0;var jTe=class{constructor(e){this.dataBuffer="",this.eventTypeBuffer="",this.buffer=[],this.endedOnCR=!1,this.onEventHandler=e,this.decoder=new TextDecoder("utf-8")}getLastEventId(){return this.lastEventIdBuffer}getReconnectionTime(){return this.reconnectionTime}feed(e){if(e.length===0)return;let r=0;for(this.endedOnCR&&e[0]===10&&r++,this.endedOnCR=!1;r<e.length;){let n=e.indexOf(13,r),o=e.indexOf(10,r),s=n===-1?o:o===-1?n:Math.min(n,o);if(s===-1)break;let a="";for(let c of this.buffer)a+=this.decoder.decode(c,{stream:!0});a+=this.decoder.decode(e.subarray(r,s)),this.processLine(a),this.buffer.length=0,r=s+(e[s]===13&&e[s+1]===10?2:1)}r<e.length?this.buffer.push(e.subarray(r)):this.endedOnCR=e[e.length-1]===13}processLine(e){if(!e.length){this.dispatchEvent();return}if(e.startsWith(":"))return;let r,n,o=e.indexOf(":");o===-1?(r=e,n=""):(r=e.substring(0,o),n=e.substring(o+1),n.startsWith(" ")&&(n=n.substring(1))),this.processField(r,n)}processField(e,r){switch(e){case"event":this.eventTypeBuffer=r;break;case"data":this.dataBuffer+=r,this.dataBuffer+=`
`;break;case"id":r.includes("\0")?this.currentEventId=void 0:this.currentEventId=this.lastEventIdBuffer=r;break;case"retry":/^\d+$/.test(r)&&(this.reconnectionTime=parseInt(r,10));break}}dispatchEvent(){if(this.dataBuffer===""){this.dataBuffer="",this.eventTypeBuffer="";return}this.dataBuffer.endsWith(`
`)&&(this.dataBuffer=this.dataBuffer.substring(0,this.dataBuffer.length-1));let e={type:this.eventTypeBuffer||"message",data:this.dataBuffer};this.currentEventId!==void 0&&(e.id=this.currentEventId),this.reconnectionTime!==void 0&&(e.retry=this.reconnectionTime),this.onEventHandler(e),this.reset()}reset(){this.dataBuffer="",this.eventTypeBuffer="",this.currentEventId=void 0}};uW.SSEParser=jTe});var Qgt=m(dR=>{"use strict";Object.defineProperty(dR,"__esModule",{value:!0});dR.AnthropicMessagesProcessor=void 0;dR.createMessagesRequestBody=SJr;dR.processResponseFromMessagesEndpoint=CJr;var vd=ul(),vJr=Ua(),yJr=BTe(),Wgt=Ol(),Ygt=ws(),Kgt=Ni(),EJr=Bv(),TJr=Vo();function SJr(t,e,r,n){let o=e.requestOptions?.tools?.filter(f=>f.function.name&&f.function.name.length>0).map(f=>({name:f.function.name,description:f.function.description||"",input_schema:{type:"object",properties:f.function.parameters?.properties??{},required:f.function.parameters?.required??[]}})),s=t.get(Kgt.IConfigurationService),a=t.get(TJr.IExperimentationService),c=s.getExperimentBasedConfig(Kgt.ConfigKey.AnthropicThinkingBudget,a),l=e.postOptions.max_tokens??1024,u=c&&c>0?c<1024?1024:c:void 0,d=u?Math.min(32e3,l-1,u):void 0;return{model:r,...bJr(e.messages),stream:!0,tools:o,top_p:e.postOptions.top_p,max_tokens:e.postOptions.max_tokens,thinking:d?{type:"enabled",budget_tokens:d}:void 0}}function bJr(t){let e=[],r=[];for(let s of t)switch(s.role){case vd.Raw.ChatRole.System:{let a=s.content.filter(c=>c.type===vd.Raw.ChatCompletionContentPartKind.Text).map(c=>c.text).join(`
`);a&&r.push(a);break}case vd.Raw.ChatRole.User:{let a=s.content.map($Te).filter(Wgt.isDefined);a.length>0&&e.push({role:"user",content:a});break}case vd.Raw.ChatRole.Assistant:{let a=[];for(let c of s.content){let l=$Te(c);l&&a.push(l)}if(s.toolCalls)for(let c of s.toolCalls){let l={};try{l=JSON.parse(c.function.arguments)}catch{}a.push({type:"tool_use",id:c.id,name:c.function.name,input:l})}a.length>0&&e.push({role:"assistant",content:a});break}case vd.Raw.ChatRole.Tool:{if(s.toolCallId){let c=s.content.map(l=>{if(l.type===vd.Raw.ChatCompletionContentPartKind.Text)return{type:"text",text:l.text};if(l.type===vd.Raw.ChatCompletionContentPartKind.Image)return $Te(l)}).filter(Wgt.isDefined).filter(l=>l.type==="text"||l.type==="image");e.push({role:"user",content:[{type:"tool_result",tool_use_id:s.toolCallId,content:c}]})}break}}let n=[];for(let s of e){let a=n[n.length-1];if(a&&a.role===s.role){let c=Array.isArray(a.content)?a.content:[{type:"text",text:a.content}],l=Array.isArray(s.content)?s.content:[{type:"text",text:s.content}];a.content=[...c,...l]}else n.push(s)}let o=r.join(`
`);return{messages:n,...o?{system:[{type:"text",text:o}]}:{}}}function $Te(t){switch(t.type){case vd.Raw.ChatCompletionContentPartKind.Text:return t.text.trim()?{type:"text",text:t.text}:void 0;case vd.Raw.ChatCompletionContentPartKind.Image:return;case vd.Raw.ChatCompletionContentPartKind.Opaque:{if(t.value&&typeof t.value=="object"&&"type"in t.value){let e=t.value;if(e.type==="thinking"&&e.thinking){if(e.thinking.encrypted)return{type:"redacted_thinking",data:e.thinking.encrypted};if(e.thinking.text)return{type:"thinking",thinking:e.thinking.text,signature:""}}}return}default:return}}async function CJr(t,e,r,n,o,s,a){let c=await n.body();return new vJr.AsyncIterableObject(async l=>{let u=n.headers.get("X-Request-ID")??(0,Ygt.generateUuid)(),d=n.headers.get("x-github-request-id")??"",f=t.createInstance(dW,a,u,d),p=new yJr.SSEParser(h=>{try{let _=h.data?.trim();if(!_||_==="[DONE]")return;r.trace(`SSE: ${_}`);let g=JSON.parse(_),v=g.type??h.type;if(!v)return;let E=f.push({...g,type:v},s);E&&l.emitOne(E)}catch(_){l.reject(_)}});for await(let h of c)p.feed(h)},()=>{c.destroy()})}var dW=class{constructor(e,r,n){this.telemetryData=e,this.requestId=r,this.ghRequestId=n,this.textAccumulator="",this.toolCallAccumulator=new Map,this.thinkingAccumulator=new Map,this.completedToolCalls=[],this.messageId="",this.model="",this.inputTokens=0,this.outputTokens=0,this.cachedTokens=0}push(e,r){let n=o=>{this.textAccumulator+=o.text,r(this.textAccumulator,0,o)};switch(e.type){case"message_start":e.message&&(this.messageId=e.message.id,this.model=e.message.model,this.inputTokens=e.message.usage.input_tokens,this.outputTokens=e.message.usage.output_tokens,e.message.usage.cache_read_input_tokens&&(this.cachedTokens=e.message.usage.cache_read_input_tokens));return;case"content_block_start":e.content_block?.type==="tool_use"&&e.index!==void 0?(this.toolCallAccumulator.set(e.index,{id:e.content_block.id||(0,Ygt.generateUuid)(),name:e.content_block.name||"",arguments:""}),n({text:"",beginToolCalls:[{name:e.content_block.name||""}]})):e.content_block?.type==="thinking"&&e.index!==void 0&&this.thinkingAccumulator.set(e.index,{thinking:"",signature:""});return;case"content_block_delta":if(e.delta){if(e.delta.type==="text_delta"&&e.delta.text)return n({text:e.delta.text});if(e.delta.type==="thinking_delta"&&e.delta.thinking&&e.index!==void 0){let o=this.thinkingAccumulator.get(e.index);return o&&(o.thinking+=e.delta.thinking),n({text:"",thinking:{id:`thinking_${e.index}`,text:e.delta.thinking}})}else if(e.delta.type==="signature_delta"&&e.delta.signature&&e.index!==void 0){let o=this.thinkingAccumulator.get(e.index);o&&(o.signature+=e.delta.signature)}else if(e.delta.type==="input_json_delta"&&e.delta.partial_json&&e.index!==void 0){let o=this.toolCallAccumulator.get(e.index);o&&(o.arguments+=e.delta.partial_json)}}return;case"content_block_stop":if(e.index!==void 0){let o=this.toolCallAccumulator.get(e.index);o&&(this.completedToolCalls.push(o),n({text:"",copilotToolCalls:[{id:o.id,name:o.name,arguments:o.arguments}]}),this.toolCallAccumulator.delete(e.index));let s=this.thinkingAccumulator.get(e.index);s&&s.signature&&(n({text:"",thinking:{id:`thinking_${e.index}`,encrypted:s.signature}}),this.thinkingAccumulator.delete(e.index))}return;case"message_delta":e.usage&&(this.outputTokens=e.usage.output_tokens);return;case"message_stop":return{blockFinished:!0,choiceIndex:0,model:this.model,tokens:[],telemetryData:this.telemetryData,requestId:{headerRequestId:this.requestId,gitHubRequestId:this.ghRequestId,completionId:this.messageId,created:Date.now(),deploymentId:"",serverExperiments:""},usage:{prompt_tokens:this.inputTokens,completion_tokens:this.outputTokens,total_tokens:this.inputTokens+this.outputTokens,prompt_tokens_details:{cached_tokens:this.cachedTokens},completion_tokens_details:{reasoning_tokens:0,accepted_prediction_tokens:0,rejected_prediction_tokens:0}},finishReason:EJr.FinishedCompletionReason.Stop,message:{role:vd.Raw.ChatRole.Assistant,content:this.textAccumulator?[{type:vd.Raw.ChatCompletionContentPartKind.Text,text:this.textAccumulator}]:[],...this.completedToolCalls.length>0?{toolCalls:this.completedToolCalls.map(o=>({id:o.id,type:"function",function:{name:o.name,arguments:o.arguments}}))}:{}}};case"error":{let o=e.error?.message||"Unknown error";return n({text:"",copilotErrors:[{agent:"anthropic",code:"unknown",message:o,type:"error",identifier:void 0}]})}}}};dR.AnthropicMessagesProcessor=dW});var e_t=m(Sg=>{"use strict";Object.defineProperty(Sg,"__esModule",{value:!0});Sg.StatefulMarkerContainer=void 0;Sg.rawPartAsStatefulMarker=Jgt;Sg.encodeStatefulMarker=AJr;Sg.decodeStatefulMarker=xJr;Sg.getAllStatefulMarkersAndIndicies=Xgt;Sg.getStatefulMarkerAndIndex=wJr;var VTe=ul(),Zgt=KEe(),HTe=class extends VTe.PromptElement{render(){let{statefulMarker:e}=this.props,r={type:Zgt.CustomDataPartMimeTypes.StatefulMarker,value:e};return vscpp("opaque",{value:r})}};Sg.StatefulMarkerContainer=HTe;function Jgt(t){let e=t.value;if(!e||typeof e!="object")return;let r=e;if(r.type===Zgt.CustomDataPartMimeTypes.StatefulMarker&&typeof r.value=="object")return r.value}function AJr(t,e){return new TextEncoder().encode(t+"\\"+e)}function xJr(t){let e=new TextDecoder().decode(t),[r,n]=e.split("\\");return{modelId:r,marker:n}}function*Xgt(t){for(let e=t.length-1;e>=0;e--){let r=t[e];if(r.role===VTe.Raw.ChatRole.Assistant){for(let n of r.content)if(n.type===VTe.Raw.ChatCompletionContentPartKind.Opaque){let o=Jgt(n);o&&(yield{statefulMarker:o,index:e})}}}}function wJr(t,e){for(let r of Xgt(e))if(r.statefulMarker.modelId===t)return{statefulMarker:r.statefulMarker.marker,index:r.index}}});var i_t=m(cC=>{"use strict";Object.defineProperty(cC,"__esModule",{value:!0});cC.OpenAIResponsesProcessor=void 0;cC.createResponsesRequestBody=qJr;cC.responseApiInputToRawMessagesForLogging=$Jr;cC.processResponseFromChatEndpoint=WJr;var _n=ul(),n_t=Ui(),IJr=Ua(),PJr=V1(),RJr=nE(),OJr=BTe(),Gv=Ol(),MJr=ws(),fW=Ni(),NJr=Bv(),LJr=Vo(),kJr=lW(),DJr=e_t(),UJr=QEe();function qJr(t,e,r,n){let o=t.get(fW.IConfigurationService),s=t.get(LJr.IExperimentationService),a=(0,kJr.getVerbosityForModelSync)(n),c={model:r,...FJr(r,e.messages,!!e.ignoreStatefulMarker),stream:!0,tools:e.requestOptions?.tools?.map(p=>({...p.function,type:"function",strict:!1,parameters:p.function.parameters||{}})),max_output_tokens:e.postOptions.max_tokens,tool_choice:typeof e.postOptions.tool_choice=="object"?{type:"function",name:e.postOptions.tool_choice.function.name}:e.postOptions.tool_choice,top_logprobs:e.postOptions.logprobs?3:void 0,store:!1,text:a?{verbosity:a}:void 0};c.truncation=o.getConfig(fW.ConfigKey.Advanced.UseResponsesApiTruncation)?"auto":"disabled";let l=o.getExperimentBasedConfig(fW.ConfigKey.ResponsesApiReasoningEffort,s),u=o.getExperimentBasedConfig(fW.ConfigKey.ResponsesApiReasoningSummary,s),d=l==="default"?"medium":l,f=u==="off"?void 0:u;return(d||f)&&(c.reasoning={...d?{effort:d}:{},...f?{summary:f}:{}}),c.include=["reasoning.encrypted_content"],c}function FJr(t,e,r){let n=!r&&(0,DJr.getStatefulMarkerAndIndex)(t,e),o;n&&(o=n.statefulMarker,e=e.slice(n.index+1));let s=[];for(let a of e)switch(a.role){case _n.Raw.ChatRole.Assistant:if(a.content.length){s.push(...BJr(a.content));let c=a.content.map(jJr).filter(Gv.isDefined);c.length&&s.push({role:"assistant",content:c,id:"msg_123",status:"completed",type:"message"})}if(a.toolCalls)for(let c of a.toolCalls)s.push({type:"function_call",name:c.function.name,arguments:c.function.arguments,call_id:c.id});break;case _n.Raw.ChatRole.Tool:if(a.toolCallId){let c=a.content.filter(u=>u.type===_n.Raw.ChatCompletionContentPartKind.Text).map(u=>u.text).join(""),l=a.content.filter(u=>u.type===_n.Raw.ChatCompletionContentPartKind.Image).map(u=>({type:"input_image",detail:u.imageUrl.detail||"auto",image_url:u.imageUrl.url}));s.push({type:"function_call_output",call_id:a.toolCallId,output:c}),l.length&&s.push({role:"user",content:[{type:"input_text",text:"Image associated with the above tool call:"},...l]})}break;case _n.Raw.ChatRole.User:s.push({role:"user",content:a.content.map(t_t).filter(Gv.isDefined)});break;case _n.Raw.ChatRole.System:s.push({role:"system",content:a.content.map(t_t).filter(Gv.isDefined)});break}return{input:s,previous_response_id:o}}function t_t(t){switch(t.type){case _n.Raw.ChatCompletionContentPartKind.Text:return{type:"input_text",text:t.text};case _n.Raw.ChatCompletionContentPartKind.Image:return{type:"input_image",detail:t.imageUrl.detail||"auto",image_url:t.imageUrl.url};case _n.Raw.ChatCompletionContentPartKind.Opaque:{let e=t.value;if(e.type==="input_text"||e.type==="input_image"||e.type==="input_file")return e}}}function jJr(t){switch(t.type){case _n.Raw.ChatCompletionContentPartKind.Text:if(t.text.trim())return{type:"output_text",text:t.text,annotations:[]}}}function BJr(t){return(0,n_t.coalesce)(t.map(e=>{if(e.type===_n.Raw.ChatCompletionContentPartKind.Opaque){let r=(0,UJr.rawPartAsThinkingData)(e);if(r)return{type:"reasoning",id:r.id,summary:[],encrypted_content:r.encrypted}}}))}function $Jr(t){let e=[],r=[],n=()=>{r.length>0&&e.push({role:_n.Raw.ChatRole.Assistant,content:[],toolCalls:r.splice(0)})};t.instructions&&e.push({role:_n.Raw.ChatRole.System,content:[{type:_n.Raw.ChatCompletionContentPartKind.Text,text:t.instructions}]});let o=typeof t.input=="string"?[{role:"user",content:t.input,type:"message"}]:t.input??[];for(let s of o)if("role"in s)switch(s.role){case"user":n(),e.push({role:_n.Raw.ChatRole.User,content:GTe(s.content).map(pW).filter(Gv.isDefined)});break;case"system":case"developer":n(),e.push({role:_n.Raw.ChatRole.System,content:GTe(s.content).map(pW).filter(Gv.isDefined)});break;case"assistant":n(),VJr(s)?e.push({role:_n.Raw.ChatRole.Assistant,content:s.content.map(GJr).filter(Gv.isDefined)}):HJr(s)&&e.push({role:_n.Raw.ChatRole.Assistant,content:GTe(s.content).map(pW).filter(Gv.isDefined)});break}else if("type"in s)switch(s.type){case"function_call":r.push({id:s.call_id,type:"function",function:{name:s.name,arguments:s.arguments}});break;case"function_call_output":{n();let a=zJr(s.output);e.push({role:_n.Raw.ChatRole.Tool,content:a,toolCallId:s.call_id});break}case"reasoning":n(),e.push({role:_n.Raw.ChatRole.Assistant,content:[{type:_n.Raw.ChatCompletionContentPartKind.Text,text:`Reasoning summary: ${s.summary.map(a=>a.text).join(`

`)}`}]});break}return r.length>0&&e.push({role:_n.Raw.ChatRole.Assistant,content:[],toolCalls:r.splice(0)}),e}function VJr(t){return"role"in t&&t.role==="assistant"&&"type"in t&&t.type==="message"&&"content"in t&&Array.isArray(t.content)}function HJr(t){return"role"in t&&t.role==="assistant"&&(!("type"in t)||t.type!=="message")}function GTe(t){return typeof t=="string"?[{type:"input_text",text:t}]:t}function pW(t){switch(t.type){case"input_text":return{type:_n.Raw.ChatCompletionContentPartKind.Text,text:t.text};case"input_image":return{type:_n.Raw.ChatCompletionContentPartKind.Image,imageUrl:{url:t.image_url||"",detail:t.detail==="auto"?void 0:t.detail??void 0}};case"input_file":return{type:_n.Raw.ChatCompletionContentPartKind.Opaque,value:`[File Input - Filename: ${t.filename||"unknown"}]`}}}function GJr(t){switch(t.type){case"output_text":return{type:_n.Raw.ChatCompletionContentPartKind.Text,text:t.text};case"refusal":return{type:_n.Raw.ChatCompletionContentPartKind.Text,text:`[Refusal: ${t.refusal}]`}}}function zJr(t){return typeof t=="string"?[{type:_n.Raw.ChatCompletionContentPartKind.Text,text:t}]:(0,n_t.coalesce)(t.map(pW))}async function WJr(t,e,r,n,o,s,a){let c=await n.body();return new IJr.AsyncIterableObject(async l=>{let u=n.headers.get("X-Request-ID")??(0,MJr.generateUuid)(),d=n.headers.get("x-github-request-id")??"",f=t.createInstance(hW,a,u,d),p=new OJr.SSEParser(h=>{try{r.trace(`SSE: ${h.data}`);let _=f.push({type:h.type,...JSON.parse(h.data)},s);_&&l.emitOne(_)}catch(_){l.reject(_)}});for await(let h of c)p.feed(h)},()=>{c.destroy()})}var hW=class{constructor(e,r,n){this.telemetryData=e,this.requestId=r,this.ghRequestId=n,this.textAccumulator="",this.hasReceivedReasoningSummary=!1}push(e,r){let n=o=>{this.textAccumulator+=o.text,r(this.textAccumulator,0,o)};switch(e.type){case"error":return n({text:"",copilotErrors:[{agent:"openai",code:e.code||"unknown",message:e.message,type:"error",identifier:e.param||void 0}]});case"response.output_text.delta":{let o=e,s=new RJr.Lazy(()=>new TextEncoder().encode(o.delta));return n({text:o.delta,logprobs:o.logprobs&&{content:o.logprobs.map(a=>({...r_t(s,a),top_logprobs:a.top_logprobs?.map(c=>r_t(s,c))||[]}))}})}case"response.output_item.added":e.item.type==="function_call"&&n({text:"",beginToolCalls:[{name:e.item.name}]});return;case"response.output_item.done":e.item.type==="function_call"?n({text:"",copilotToolCalls:[{id:e.item.call_id,name:e.item.name,arguments:e.item.arguments}]}):e.item.type==="reasoning"&&n({text:"",thinking:e.item.encrypted_content?{id:e.item.id,text:this.hasReceivedReasoningSummary?void 0:e.item.summary.map(o=>o.text),encrypted:e.item.encrypted_content}:void 0});return;case"response.reasoning_summary_text.delta":return this.hasReceivedReasoningSummary=!0,n({text:"",thinking:{id:e.item_id,text:e.delta}});case"response.reasoning_summary_part.done":return this.hasReceivedReasoningSummary=!0,n({text:"",thinking:{id:e.item_id}});case"response.completed":return n({text:"",statefulMarker:e.response.id}),{blockFinished:!0,choiceIndex:0,model:e.response.model,tokens:[],telemetryData:this.telemetryData,requestId:{headerRequestId:this.requestId,gitHubRequestId:this.ghRequestId,completionId:e.response.id,created:e.response.created_at,deploymentId:"",serverExperiments:""},usage:{prompt_tokens:e.response.usage?.input_tokens??0,completion_tokens:e.response.usage?.output_tokens??0,total_tokens:e.response.usage?.total_tokens??0,prompt_tokens_details:{cached_tokens:e.response.usage?.input_tokens_details.cached_tokens??0},completion_tokens_details:{reasoning_tokens:e.response.usage?.output_tokens_details.reasoning_tokens??0,accepted_prediction_tokens:0,rejected_prediction_tokens:0}},finishReason:NJr.FinishedCompletionReason.Stop,message:{role:_n.Raw.ChatRole.Assistant,content:e.response.output.map(o=>{if(o.type==="message")return{type:_n.Raw.ChatCompletionContentPartKind.Text,text:o.content.map(s=>s.type==="output_text"?s.text:s.refusal).join("")};if(o.type==="image_generation_call"&&o.result)return{type:_n.Raw.ChatCompletionContentPartKind.Image,imageUrl:{url:o.result}}}).filter(Gv.isDefined)}}}}};cC.OpenAIResponsesProcessor=hW;function r_t(t,e){let r=[];if(e.token){let n=new TextEncoder().encode(e.token),o=t.value,s=(0,PJr.binaryIndexOf)(o,n);s!==-1&&(r=[s,s+n.length])}return{token:e.token,bytes:r,logprob:e.logprob}}});var lC=m(yl=>{"use strict";var u_t=yl&&yl.__decorate||function(t,e,r,n){var o=arguments.length,s=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(o<3?a(s):o>3?a(e,r,s):a(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},Ji=yl&&yl.__param||function(t,e){return function(r,n){e(r,n,t)}},zTe;Object.defineProperty(yl,"__esModule",{value:!0});yl.RemoteAgentChatEndpoint=yl.ChatEndpoint=void 0;yl.defaultChatResponseProcessor=KTe;yl.defaultNonStreamChatResponseProcessor=b_t;var mW=(nP(),cn(rP)),o_t=ul(),KJr=$4(),d_t=Ua(),s_t=bj(),f_t=ws(),p_t=Nr(),h_t=ha(),m_t=yg(),YJr=vg(),QJr=SL(),PL=Ni(),g_t=pa(),__t=tu(),a_t=Kz(),ZJr=UTe(),JJr=tW(),v_t=Vo(),y_t=qa(),E_t=oC(),T_t=tl(),XJr=lW(),S_t=Hv(),gW=A$(),c_t=Qgt(),l_t=i_t();async function KTe(t,e,r,n,o,s,a){let l=(await JJr.SSEProcessor.create(e,t,n,r,a)).processSSE(o);return d_t.AsyncIterableObject.map(l,d=>{let f=d.reason??"client-trimmed",p=s.extendedBy({completionChoiceFinishReason:f,headerRequestId:d.requestId.headerRequestId});return t.sendGHTelemetryEvent("completion.finishReason",p.properties,p.measurements),(0,ZJr.prepareChatCompletionForReturn)(t,e,d,s)})}async function b_t(t,e,r){let n=await t.text(),o=JSON.parse(n),s=[];for(let a=0;a<(o?.choices?.length||0);a++){let c=o.choices[a],l={role:c.message.role,content:c.message.content,name:c.message.name,toolCalls:c.message.toolCalls??c.message.tool_calls},u=(0,QJr.getTextPart)(l.content),d=t.headers.get("X-Request-ID")??(0,f_t.generateUuid)(),f=t.headers.get("x-github-request-id")??"",p={blockFinished:!1,choiceIndex:a,model:o.model,filterReason:void 0,finishReason:c.finish_reason,message:l,usage:o.usage,tokens:[],requestId:{headerRequestId:d,gitHubRequestId:f,completionId:o.id,created:o.created,deploymentId:"",serverExperiments:""},telemetryData:r},h=[];for(let _ of l.toolCalls??[])h.push({name:_.function?.name??"",arguments:_.function?.arguments??"",id:_.id??""});await e(u,a,{text:u,copilotToolCalls:h}),s.push(p)}return d_t.AsyncIterableObject.fromArray(s)}var _W=zTe=class{constructor(e,r,n,o,s,a,c,l,u,d,f,p){this.modelMetadata=e,this._domainService=r,this._capiClientService=n,this._fetcherService=o,this._telemetryService=s,this._authService=a,this._chatMLFetcher=c,this._tokenizerProvider=l,this._instantiationService=u,this._configurationService=d,this._expService=f,this._maxTokens=e.capabilities.limits?.max_prompt_tokens??8192,this._maxOutputTokens=e.capabilities.limits?.max_output_tokens??4096,this.model=e.id,this.name=e.name,this.version=e.version,this.family=e.capabilities.family,this.tokenizer=e.capabilities.tokenizer,this.showInModelPicker=e.model_picker_enabled,this.isPremium=e.billing?.is_premium,this.multiplier=e.billing?.multiplier,this.restrictedToSkus=e.billing?.restricted_to,this.isDefault=e.is_chat_default,this.isFallback=e.is_chat_fallback,this.supportsToolCalls=!!e.capabilities.supports.tool_calls,this.supportsVision=!!e.capabilities.supports.vision,this.supportsPrediction=!!e.capabilities.supports.prediction,this._supportsStreaming=!!e.capabilities.supports.streaming,this._policyDetails=e.policy,this.customModel=e.custom_model}getExtraHeaders(){return this.modelMetadata.requestHeaders??{}}get modelMaxPromptTokens(){return this._maxTokens}get maxOutputTokens(){return this._maxOutputTokens}get urlOrRequestMetadata(){return this.modelMetadata.urlOrRequestMetadata??(this.useResponsesApi?{type:mW.RequestType.ChatResponses}:this.useMessagesApi?{type:mW.RequestType.ChatMessages}:{type:mW.RequestType.ChatCompletions})}get useResponsesApi(){return this.modelMetadata.supported_endpoints&&!this.modelMetadata.supported_endpoints.includes(gW.ModelSupportedEndpoint.ChatCompletions)&&this.modelMetadata.supported_endpoints.includes(gW.ModelSupportedEndpoint.Responses)?!0:!!(this._configurationService.getExperimentBasedConfig(PL.ConfigKey.UseResponsesApi,this._expService)&&this.modelMetadata.supported_endpoints?.includes(gW.ModelSupportedEndpoint.Responses))}get useMessagesApi(){return!!(this._configurationService.getExperimentBasedConfig(PL.ConfigKey.TeamInternal.UseMessagesApi,this._expService)&&this.modelMetadata.supported_endpoints?.includes(gW.ModelSupportedEndpoint.Messages))}get degradationReason(){return this.modelMetadata.warning_messages?.at(0)?.message??this.modelMetadata.info_messages?.at(0)?.message}get policy(){return!this._policyDetails||this._policyDetails.state==="enabled"?"enabled":{terms:this._policyDetails.terms??"Unknown policy terms"}}get apiType(){return this.useResponsesApi?"responses":this.useMessagesApi?"messages":"chatCompletions"}interceptBody(e){if(e&&!this.supportsToolCalls&&delete e.tools,e&&!this._supportsStreaming&&(e.stream=!1),e?.messages&&(this.family.startsWith("o1")||this.model==="o1"||this.model==="o1-mini")){let r=e.messages.map(n=>n.role===o_t.OpenAI.ChatRole.System?{role:o_t.OpenAI.ChatRole.User,content:n.content}:n);e.messages=r}}createRequestBody(e){if(this.useResponsesApi){let r=this._instantiationService.invokeFunction(l_t.createResponsesRequestBody,e,this.model,this);return this.customizeResponsesBody(r)}else if(this.useMessagesApi){let r=this._instantiationService.invokeFunction(c_t.createMessagesRequestBody,e,this.model,this);return this.customizeMessagesBody(r)}else{let r=(0,a_t.createCapiRequestBody)(e,this.model,this.getCompletionsCallback());return this.customizeCapiBody(r,e)}}getCompletionsCallback(){}customizeMessagesBody(e){return e}customizeResponsesBody(e){return e}customizeCapiBody(e,r){let n=r.location===YJr.ChatLocation.Agent;if((0,XJr.isAnthropicFamily)(this)&&!r.disableThinking&&n){let o=this._configurationService.getExperimentBasedConfig(PL.ConfigKey.AnthropicThinkingBudget,this._expService);if(o&&o>0){let s=o<1024?1024:o;e.thinking_budget=Math.min(32e3,this._maxOutputTokens-1,s)}}return e}async processResponseFromChatEndpoint(e,r,n,o,s,a,c){return this.useResponsesApi?(0,l_t.processResponseFromChatEndpoint)(this._instantiationService,e,r,n,o,s,a):this.useMessagesApi?(0,c_t.processResponseFromMessagesEndpoint)(this._instantiationService,e,r,n,o,s,a):this._supportsStreaming?KTe(e,r,n,o,s,a,c):b_t(n,s,a)}async acceptChatPolicy(){if(this.policy==="enabled")return!0;try{let e=await(0,a_t.postRequest)(this._fetcherService,this._telemetryService,this._capiClientService,{type:mW.RequestType.ModelPolicy,modelId:this.model},(await this._authService.getCopilotToken()).token,await(0,KJr.createRequestHMAC)(process.env.HMAC_SECRET),"chat-policy",(0,f_t.generateUuid)(),{state:"enabled"});return e.ok&&this._policyDetails&&(this._policyDetails.state="enabled"),e.ok}catch{return!1}}acquireTokenizer(){return this._tokenizerProvider.acquireTokenizer(this)}async makeChatRequest2(e,r){return this._makeChatRequest2({...e,ignoreStatefulMarker:e.ignoreStatefulMarker??!0},r)}async _makeChatRequest2(e,r){return this._chatMLFetcher.fetchOne({requestOptions:{},...e,endpoint:this},r)}async makeChatRequest(e,r,n,o,s,a,c,l,u){return this.makeChatRequest2({debugName:e,messages:r,finishedCb:n,location:s,source:a,requestOptions:c,userInitiatedRequest:l,telemetryProperties:u},o)}cloneWithTokenOverride(e){return this._instantiationService.createInstance(zTe,(0,s_t.mixin)((0,s_t.deepClone)(this.modelMetadata),{capabilities:{limits:{max_prompt_tokens:e}}}))}};yl.ChatEndpoint=_W;yl.ChatEndpoint=_W=zTe=u_t([Ji(1,S_t.IDomainService),Ji(2,T_t.ICAPIClientService),Ji(3,__t.IFetcherService),Ji(4,y_t.ITelemetryService),Ji(5,h_t.IAuthenticationService),Ji(6,m_t.IChatMLFetcher),Ji(7,E_t.ITokenizerProvider),Ji(8,p_t.IInstantiationService),Ji(9,PL.IConfigurationService),Ji(10,v_t.IExperimentationService),Ji(11,g_t.ILogService)],_W);var WTe=class extends _W{constructor(e,r,n,o,s,a,c,l,u,d,f,p,h){super(e,n,o,s,a,c,l,u,d,f,p,h),this._requestMetadata=r}processResponseFromChatEndpoint(e,r,n,o,s,a,c){return KTe(e,r,n,2,s,a,c)}get urlOrRequestMetadata(){return this._requestMetadata}};yl.RemoteAgentChatEndpoint=WTe;yl.RemoteAgentChatEndpoint=WTe=u_t([Ji(2,S_t.IDomainService),Ji(3,T_t.ICAPIClientService),Ji(4,__t.IFetcherService),Ji(5,y_t.ITelemetryService),Ji(6,h_t.IAuthenticationService),Ji(7,m_t.IChatMLFetcher),Ji(8,E_t.ITokenizerProvider),Ji(9,p_t.IInstantiationService),Ji(10,PL.IConfigurationService),Ji(11,v_t.IExperimentationService),Ji(12,g_t.ILogService)],WTe)});var C_t=m(bg=>{"use strict";var eXr=bg&&bg.__decorate||function(t,e,r,n){var o=arguments.length,s=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(o<3?a(s):o>3?a(e,r,s):a(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},yd=bg&&bg.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(bg,"__esModule",{value:!0});bg.CopilotChatEndpoint=void 0;var tXr=Nr(),rXr=ha(),nXr=yg(),iXr=Ni(),oXr=Q0(),sXr=pa(),aXr=tu(),cXr=Vo(),lXr=qa(),uXr=oC(),dXr=tl(),fXr=Hv(),pXr=lC(),YTe=class extends pXr.ChatEndpoint{constructor(e,r,n,o,s,a,c,l,u,d,f,p,h){super(e,r,n,o,a,c,l,u,d,f,p,h)}getCompletionsCallback(){return(e,r)=>{r&&r.id&&(e.reasoning_opaque=r.id,e.reasoning_text=Array.isArray(r.text)?r.text.join(""):r.text)}}};bg.CopilotChatEndpoint=YTe;bg.CopilotChatEndpoint=YTe=eXr([yd(1,fXr.IDomainService),yd(2,dXr.ICAPIClientService),yd(3,aXr.IFetcherService),yd(4,oXr.IEnvService),yd(5,lXr.ITelemetryService),yd(6,rXr.IAuthenticationService),yd(7,nXr.IChatMLFetcher),yd(8,uXr.ITokenizerProvider),yd(9,tXr.IInstantiationService),yd(10,iXr.IConfigurationService),yd(11,cXr.IExperimentationService),yd(12,sXr.ILogService)],YTe)});var QTe=m(th=>{"use strict";var hXr=th&&th.__decorate||function(t,e,r,n){var o=arguments.length,s=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(o<3?a(s):o>3?a(e,r,s):a(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},Ed=th&&th.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(th,"__esModule",{value:!0});th.AutoChatEndpoint=void 0;th.isAutoModel=RXr;var mXr=Nr(),gXr=ha(),_Xr=yg(),vXr=Ni(),yXr=Q0(),EXr=pa(),TXr=tu(),SXr=Vo(),bXr=qa(),CXr=oC(),AXr=tl(),xXr=Hv(),wXr=lC(),IXr=C_t(),RL=class extends IXr.CopilotChatEndpoint{static{this.pseudoModelId="auto"}constructor(e,r,n,o,s,a,c,l,u,d,f,p,h,_,g,v){super(PXr(e,r,n),s,a,c,l,u,d,f,p,h,_,g,v),this.discountRange=o}};th.AutoChatEndpoint=RL;th.AutoChatEndpoint=RL=hXr([Ed(4,xXr.IDomainService),Ed(5,AXr.ICAPIClientService),Ed(6,TXr.IFetcherService),Ed(7,yXr.IEnvService),Ed(8,bXr.ITelemetryService),Ed(9,gXr.IAuthenticationService),Ed(10,_Xr.IChatMLFetcher),Ed(11,CXr.ITokenizerProvider),Ed(12,mXr.IInstantiationService),Ed(13,vXr.IConfigurationService),Ed(14,SXr.IExperimentationService),Ed(15,EXr.ILogService)],RL);function PXr(t,e,r){let n;t instanceof wXr.ChatEndpoint?n=t.modelMetadata:n={id:t.model,name:t.name,version:t.version,model_picker_enabled:t.showInModelPicker,is_chat_default:t.isDefault,is_chat_fallback:t.isFallback,capabilities:{type:"chat",family:t.family,tokenizer:t.tokenizer,limits:{max_prompt_tokens:t.modelMaxPromptTokens,max_output_tokens:t.maxOutputTokens},supports:{tool_calls:t.supportsToolCalls,vision:t.supportsVision,prediction:t.supportsPrediction,streaming:!0}},billing:t.isPremium!==void 0||t.multiplier!==void 0||t.restrictedToSkus!==void 0?{is_premium:t.isPremium??!1,multiplier:t.multiplier??0,restricted_to:t.restrictedToSkus}:void 0,custom_model:t.customModel};let o=Math.round((t.multiplier??0)*(1-r)*100)/100;return{...n,warning_messages:void 0,model_picker_enabled:!0,info_messages:void 0,billing:{is_premium:n.billing?.is_premium??!1,multiplier:o,restricted_to:n.billing?.restricted_to},requestHeaders:{...n.requestHeaders||{},"Copilot-Session-Token":e}}}function RXr(t){return t&&(t.model===RL.pseudoModelId||t instanceof RL)?1:-1}});var w_t=m(fR=>{"use strict";Object.defineProperty(fR,"__esModule",{value:!0});fR.ChatFailKind=fR.FetchResponseKind=void 0;var A_t;(function(t){t.Success="success",t.Failed="failed",t.Canceled="canceled"})(A_t||(fR.FetchResponseKind=A_t={}));var x_t;(function(t){t.OffTopic="offTopic",t.TokenExpiredOrInvalid="tokenExpiredOrInvalid",t.ServerCanceled="serverCanceled",t.ClientNotSupported="clientNotSupported",t.RateLimited="rateLimited",t.QuotaExceeded="quotaExceeded",t.ExtensionBlocked="extensionBlocked",t.ServerError="serverError",t.ContentFilter="contentFilter",t.AgentUnauthorized="unauthorized",t.AgentFailedDependency="failedDependency",t.ValidationFailed="validationFailed",t.InvalidPreviousResponseId="invalidPreviousResponseId",t.NotFound="notFound",t.Unknown="unknown"})(x_t||(fR.ChatFailKind=x_t={}))});var yW=m(rh=>{"use strict";Object.defineProperty(rh,"__esModule",{value:!0});rh.PendingLoggedChatRequest=rh.AbstractRequestLogger=rh.IRequestLogger=rh.ChatRequestScheme=void 0;var OXr=require("async_hooks"),I_t=vg(),MXr=Qe(),NXr=Ar(),LXr=zi(),ZTe=class t{static{this.chatRequestScheme="ccreq"}static buildUri(e,r="markdown"){let n;return r==="markdown"?n="copilotmd":r==="json"?n="json":n="request.json",e.kind==="latest"?`${t.chatRequestScheme}:latest.${n}`:`${t.chatRequestScheme}:${e.id}.${n}`}static parseUri(e){if(e===this.buildUri({kind:"latest"},"markdown"))return{data:{kind:"latest"},format:"markdown"};if(e===this.buildUri({kind:"latest"},"json"))return{data:{kind:"latest"},format:"json"};if(e===this.buildUri({kind:"latest"},"rawrequest"))return{data:{kind:"latest"},format:"rawrequest"};let r=e.match(/ccreq:([^\s]+)\.copilotmd/);if(r)return{data:{kind:"request",id:r[1]},format:"markdown"};let n=e.match(/ccreq:([^\s]+)\.request\.json/);if(n)return{data:{kind:"request",id:n[1]},format:"rawrequest"};let o=e.match(/ccreq:([^\s]+)\.json/);if(o)return{data:{kind:"request",id:o[1]},format:"json"}}static findAllUris(e){let r=/(ccreq:[^\s]+\.(copilotmd|json|request\.json))/g;return[...e.matchAll(r)].map(n=>{let o=n[1];return{uri:o,range:new LXr.OffsetRange(n.index,n.index+o.length)}})}};rh.ChatRequestScheme=ZTe;rh.IRequestLogger=(0,MXr.createServiceIdentifier)("IRequestLogger");var P_t=new OXr.AsyncLocalStorage,JTe=class extends NXr.Disposable{get promptRendererTracing(){return!1}captureInvocation(e,r){return P_t.run(e,()=>r())}logChatRequest(e,r,n){return new vW(this,e,r,n)}enableWorkspaceEditTracing(){}disableWorkspaceEditTracing(){}get currentRequest(){return P_t.getStore()}};rh.AbstractRequestLogger=JTe;var XTe=class{constructor(e,r,n,o){this._logbook=e,this._debugName=r,this._chatEndpoint=n,this._chatParams=o,this._timeToFirstToken=void 0,this._time=new Date}markTimeToFirstToken(e){this._timeToFirstToken=e}resolveWithCancelation(){this._logbook.addEntry({type:"ChatMLCancelation",debugName:this._debugName,chatEndpoint:this._chatEndpoint,chatParams:this._chatParams,startTime:this._time,endTime:new Date})}},vW=class extends XTe{constructor(e,r,n,o){super(e,r,n,o)}resolve(e,r){e.type===I_t.ChatFetchResponseType.Success?this._logbook.addEntry({type:"ChatMLSuccess",debugName:this._debugName,usage:e.usage,chatEndpoint:this._chatEndpoint,chatParams:this._chatParams,startTime:this._time,endTime:new Date,timeToFirstToken:this._timeToFirstToken,result:e,deltas:r}):this._logbook.addEntry({type:e.type===I_t.ChatFetchResponseType.Canceled?"ChatMLCancelation":"ChatMLFailure",debugName:this._debugName,chatEndpoint:this._chatEndpoint,chatParams:this._chatParams,startTime:this._time,endTime:new Date,timeToFirstToken:this._timeToFirstToken,result:e})}};rh.PendingLoggedChatRequest=vW});var O_t=m(EW=>{"use strict";Object.defineProperty(EW,"__esModule",{value:!0});EW.calculateLineRepetitionStats=DXr;EW.isRepetitive=UXr;var kXr=[{max_token_sequence_length:1,last_tokens_to_consider:10},{max_token_sequence_length:10,last_tokens_to_consider:30},{max_token_sequence_length:20,last_tokens_to_consider:45},{max_token_sequence_length:30,last_tokens_to_consider:60},{max_token_sequence_length:60,last_tokens_to_consider:120}];function DXr(t){if(t.length===0)return{numberOfRepetitions:0,mostRepeatedLine:"",totalLines:0};let e=new Map,r=t.split(`
`);for(let s of r){if(s=s.trim(),s.length===0)continue;let a=e.get(s)||0;e.set(s,a+1)}let n="",o=0;for(let[s,a]of e.entries())a>o&&(o=a,n=s);return{numberOfRepetitions:o,mostRepeatedLine:n,totalLines:r.length}}function UXr(t){let e=t.slice();return e.reverse(),R_t(e)||R_t(e.filter(r=>r.trim().length>0))}function R_t(t){let e=qXr(t);for(let r of kXr){if(t.length<r.last_tokens_to_consider)continue;if(r.last_tokens_to_consider-1-e[r.last_tokens_to_consider-1]<=r.max_token_sequence_length)return!0}return!1}function qXr(t){let e=Array(t.length).fill(0);e[0]=-1;let r=-1;for(let n=1;n<t.length;n++){for(;r>=0&&t[r+1]!==t[n];)r=e[r];t[r+1]===t[n]&&r++,e[n]=r}return e}});var tSe=m(nh=>{"use strict";var FXr=nh&&nh.__decorate||function(t,e,r,n){var o=arguments.length,s=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(o<3?a(s):o>3?a(e,r,s):a(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},r0=nh&&nh.__param||function(t,e){return function(r,n){e(r,n,t)}},Td;Object.defineProperty(nh,"__esModule",{value:!0});nh.OpenAIEndpoint=void 0;nh.isBYOKModel=ten;var jXr=ha(),BXr=yg(),eSe=vg(),$Xr=Ni(),VXr=tl(),HXr=Hv(),GXr=lC(),zXr=pa(),WXr=Jz(),KXr=tu(),YXr=Kz(),QXr=Vo(),ZXr=qa(),JXr=oC(),XXr=Nr();function een(t){return t.type===eSe.ChatFetchResponseType.Failed&&t.streamError?{type:t.type,requestId:t.requestId,serverRequestId:t.serverRequestId,reason:JSON.stringify(t.streamError)}:t.type===eSe.ChatFetchResponseType.RateLimited?{type:t.type,requestId:t.requestId,serverRequestId:t.serverRequestId,reason:t.capiError?`Rate limit exceeded

`+JSON.stringify(t.capiError):"Rate limit exceeded",rateLimitKey:"",retryAfter:void 0,capiError:t.capiError}:t}function ten(t){return t?t instanceof TW?1:t.customModel?2:-1:-1}var TW=class extends GXr.ChatEndpoint{static{Td=this}static{this._reservedHeaders=new Set(["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","date","dnt","expect","host","keep-alive","origin","permissions-policy","referer","te","trailer","transfer-encoding","upgrade","user-agent","via","forwarded","x-forwarded-for","x-forwarded-host","x-forwarded-proto","api-key","authorization","content-type","openai-intent","x-github-api-version","x-initiator","x-interaction-id","x-interaction-type","x-onbehalf-extension-id","x-request-id","x-vscode-user-agent-library-version"])}static{this._validHeaderNamePattern=/^[!#$%&'*+\-.0-9A-Z^_`a-z|~]+$/}static{this._maxHeaderNameLength=256}static{this._maxHeaderValueLength=8192}static{this._maxCustomHeaderCount=20}constructor(e,r,n,o,s,a,c,l,u,d,f,p,h,_){super(e,s,a,o,c,l,u,d,f,p,h,_),this._apiKey=r,this._modelUrl=n,this.instantiationService=f,this.logService=_,this._customHeaders=this._sanitizeCustomHeaders(e.requestHeaders)}_sanitizeCustomHeaders(e){if(!e)return{};let r=Object.entries(e);r.length>Td._maxCustomHeaderCount&&this.logService.warn(`[OpenAIEndpoint] Model '${this.modelMetadata.id}' has ${r.length} custom headers, exceeding limit of ${Td._maxCustomHeaderCount}. Only first ${Td._maxCustomHeaderCount} will be processed.`);let n={},o=0;for(let[s,a]of r){if(o>=Td._maxCustomHeaderCount)break;let c=s.trim();if(!c){this.logService.warn(`[OpenAIEndpoint] Model '${this.modelMetadata.id}' has empty header name, skipping.`);continue}if(c.length>Td._maxHeaderNameLength){this.logService.warn(`[OpenAIEndpoint] Model '${this.modelMetadata.id}' has header name exceeding ${Td._maxHeaderNameLength} characters, skipping.`);continue}if(!Td._validHeaderNamePattern.test(c)){this.logService.warn(`[OpenAIEndpoint] Model '${this.modelMetadata.id}' has invalid header name format: '${c}', Skipping.`);continue}let l=c.toLowerCase();if(Td._reservedHeaders.has(l)){this.logService.warn(`[OpenAIEndpoint] Model '${this.modelMetadata.id}' attempted to override reserved header '${c}', skipping.`);continue}if(l.startsWith("proxy-")||l.startsWith("sec-")){this.logService.warn(`[OpenAIEndpoint] Model '${this.modelMetadata.id}' attempted to set forbidden header pattern '${c}', skipping.`);continue}if(l==="x-http-method"||l==="x-http-method-override"||l==="x-method-override"){let d=["connect","trace","track"],f=String(a).toLowerCase().trim();if(d.includes(f)){this.logService.warn(`[OpenAIEndpoint] Model '${this.modelMetadata.id}' attempted to set forbidden method '${f}' in header '${c}', skipping.`);continue}}let u=this._sanitizeHeaderValue(a);if(u===void 0){this.logService.warn(`[OpenAIEndpoint] Model '${this.modelMetadata.id}' has invalid value for header '${c}': '${a}', skipping.`);continue}n[c]=u,o++}return n}_sanitizeHeaderValue(e){if(typeof e!="string")return;let r=e.trim();if(!(r.length>Td._maxHeaderValueLength)&&!/[\x00-\x1F\x7F]/.test(r)&&!/[\u200B-\u200D\u202A-\u202E\uFEFF]/.test(r))return r}createRequestBody(e){if(this.useResponsesApi){e.ignoreStatefulMarker=!1;let r=super.createRequestBody(e);return r.store=!0,r.n=void 0,r.stream_options=void 0,this.modelMetadata.capabilities.supports.thinking||(r.reasoning=void 0,r.include=void 0),r.previous_response_id&&(!r.previous_response_id.startsWith("resp_")||this.modelMetadata.zeroDataRetentionEnabled)&&(r.previous_response_id=void 0),r}else{let r=(o,s)=>{s&&s.id&&(o.cot_id=s.id,o.cot_summary=Array.isArray(s.text)?s.text.join(""):s.text)};return(0,YXr.createCapiRequestBody)(e,this.model,r)}}interceptBody(e){super.interceptBody(e),e?.tools?.length===0&&delete e.tools,e?.tools&&(e.tools=e.tools.map(r=>((0,WXr.isOpenAiFunctionTool)(r)&&r.function.parameters===void 0&&(r.function.parameters={type:"object",properties:{}}),r))),e&&(this.modelMetadata.capabilities.supports.thinking&&(delete e.temperature,e.max_completion_tokens=e.max_tokens,delete e.max_tokens),delete e.max_tokens,!this.useResponsesApi&&e.stream&&(e.stream_options={include_usage:!0}))}get urlOrRequestMetadata(){return this._modelUrl}getExtraHeaders(){let e={"Content-Type":"application/json"};this._modelUrl.includes("openai.azure")?e["api-key"]=this._apiKey:e.Authorization=`Bearer ${this._apiKey}`;for(let[r,n]of Object.entries(this._customHeaders))e[r]=n;return e}async acceptChatPolicy(){return!0}cloneWithTokenOverride(e){let r={...this.modelMetadata,maxInputTokens:e};return this.instantiationService.createInstance(Td,r,this._apiKey,this._modelUrl)}async makeChatRequest2(e,r){let n={...e,ignoreStatefulMarker:!1},o=await super.makeChatRequest2(n,r);return o.type===eSe.ChatFetchResponseType.InvalidStatefulMarker&&(o=await this._makeChatRequest2({...e,ignoreStatefulMarker:!0},r)),een(o)}};nh.OpenAIEndpoint=TW;nh.OpenAIEndpoint=TW=Td=FXr([r0(3,KXr.IFetcherService),r0(4,HXr.IDomainService),r0(5,VXr.ICAPIClientService),r0(6,ZXr.ITelemetryService),r0(7,jXr.IAuthenticationService),r0(8,BXr.IChatMLFetcher),r0(9,JXr.ITokenizerProvider),r0(10,XXr.IInstantiationService),r0(11,$Xr.IConfigurationService),r0(12,QXr.IExperimentationService),r0(13,zXr.ILogService)],TW)});var M_t=m(n0=>{"use strict";Object.defineProperty(n0,"__esModule",{value:!0});n0.EXTENSION_ID=n0.agentsToCommands=n0.GITHUB_PLATFORM_AGENT=void 0;n0.getAgentForIntent=nen;var ren=vg();n0.GITHUB_PLATFORM_AGENT="github.copilot-dynamic.platform";n0.agentsToCommands={workspace:{explain:"explain",edit:"edit",review:"review",tests:"tests",fix:"fix",new:"new",newNotebook:"newNotebook",semanticSearch:"semanticSearch",setupTests:"setupTests"},vscode:{search:"search"},terminal:{explain:"terminalExplain"},editor:{doc:"doc",fix:"fix",explain:"explain",review:"review",tests:"tests",edit:"edit",generate:"generate"}};function nen(t,e){if(Object.keys(n0.agentsToCommands).includes(t))return{agent:t};for(let[r,n]of Object.entries(n0.agentsToCommands))if(!(e===ren.ChatLocation.Editor&&r!=="editor")&&Object.values(n).includes(t))return{agent:r,command:t}}n0.EXTENSION_ID="GitHub.copilot-chat"});var k_t=m(SW=>{"use strict";Object.defineProperty(SW,"__esModule",{value:!0});SW.ChatMLFetcherTelemetrySender=void 0;var N_t=QTe(),L_t=tSe(),rSe=class{static sendSuccessTelemetry(e,{chatCompletion:r,baseTelemetry:n,userInitiatedRequest:o,chatEndpointInfo:s,requestBody:a,maxResponseTokens:c,promptTokenCount:l,timeToFirstToken:u,timeToFirstTokenEmitted:d,hasImageMessages:f,fetcher:p}){e.sendTelemetryEvent("response.success",{github:!0,microsoft:!0},{reason:r.finishReason,filterReason:r.filterReason,source:n?.properties.messageSource??"unknown",initiatorType:o?"user":"agent",model:s?.model,modelInvoked:r.model,apiType:s?.apiType,requestId:r.requestId.headerRequestId,gitHubRequestId:r.requestId.gitHubRequestId,associatedRequestId:n?.properties.associatedRequestId,reasoningEffort:a.reasoning?.effort,reasoningSummary:a.reasoning?.summary,...p?{fetcher:p}:{},...n?.properties.retryAfterErrorCategory?{retryAfterErrorCategory:n.properties.retryAfterErrorCategory}:{},...n?.properties.retryAfterError?{retryAfterError:n.properties.retryAfterError}:{},...n?.properties.retryAfterErrorGitHubRequestId?{retryAfterErrorGitHubRequestId:n.properties.retryAfterErrorGitHubRequestId}:{},...n?.properties.connectivityTestError?{connectivityTestError:n.properties.connectivityTestError}:{},...n?.properties.connectivityTestErrorGitHubRequestId?{connectivityTestErrorGitHubRequestId:n.properties.connectivityTestErrorGitHubRequestId}:{},...n?.properties.retryAfterFilterCategory?{retryAfterFilterCategory:n.properties.retryAfterFilterCategory}:{}},{totalTokenMax:s?.modelMaxPromptTokens??-1,tokenCountMax:c,promptTokenCount:r.usage?.prompt_tokens,promptCacheTokenCount:r.usage?.prompt_tokens_details?.cached_tokens,clientPromptTokenCount:l,tokenCount:r.usage?.total_tokens,reasoningTokens:r.usage?.completion_tokens_details?.reasoning_tokens,acceptedPredictionTokens:r.usage?.completion_tokens_details?.accepted_prediction_tokens,rejectedPredictionTokens:r.usage?.completion_tokens_details?.rejected_prediction_tokens,completionTokens:r.usage?.completion_tokens,timeToFirstToken:u,timeToFirstTokenEmitted:d,timeToComplete:n?Date.now()-n.issuedTime:-1,isVisionRequest:f?1:-1,isBYOK:(0,L_t.isBYOKModel)(s),isAuto:(0,N_t.isAutoModel)(s)})}static sendCancellationTelemetry(e,{source:r,requestId:n,model:o,apiType:s,associatedRequestId:a,retryAfterErrorCategory:c,retryAfterError:l,retryAfterErrorGitHubRequestId:u,connectivityTestError:d,connectivityTestErrorGitHubRequestId:f,retryAfterFilterCategory:p,fetcher:h},{totalTokenMax:_,promptTokenCount:g,tokenCountMax:v,timeToFirstToken:E,timeToFirstTokenEmitted:y,timeToCancelled:S,isVisionRequest:b,isBYOK:w,isAuto:P}){e.sendTelemetryEvent("response.cancelled",{github:!0,microsoft:!0},{apiType:s,source:r,requestId:n,model:o,associatedRequestId:a,...h?{fetcher:h}:{},...c?{retryAfterErrorCategory:c}:{},...l?{retryAfterError:l}:{},...u?{retryAfterErrorGitHubRequestId:u}:{},...d?{connectivityTestError:d}:{},...f?{connectivityTestErrorGitHubRequestId:f}:{},...p?{retryAfterFilterCategory:p}:{}},{totalTokenMax:_,promptTokenCount:g,tokenCountMax:v,timeToFirstToken:E,timeToFirstTokenEmitted:y,timeToCancelled:S,isVisionRequest:b,isBYOK:w,isAuto:P})}static sendResponseErrorTelemetry(e,r,n,o,s,a,c,l,u,d){e.sendTelemetryEvent("response.error",{github:!0,microsoft:!0},{type:r.type,reason:r.reasonDetail||r.reason,source:n?.messageSource??"unknown",requestId:r.requestId,gitHubRequestId:r.serverRequestId,model:o.model,apiType:o.apiType,reasoningEffort:s.reasoning?.effort,reasoningSummary:s.reasoning?.summary,...d?{fetcher:d}:{},associatedRequestId:n?.associatedRequestId,...n?.retryAfterErrorCategory?{retryAfterErrorCategory:n.retryAfterErrorCategory}:{},...n?.retryAfterError?{retryAfterError:n.retryAfterError}:{},...n?.retryAfterErrorGitHubRequestId?{retryAfterErrorGitHubRequestId:n.retryAfterErrorGitHubRequestId}:{},...n?.connectivityTestError?{connectivityTestError:n.connectivityTestError}:{},...n?.connectivityTestErrorGitHubRequestId?{connectivityTestErrorGitHubRequestId:n.connectivityTestErrorGitHubRequestId}:{},...n?.retryAfterFilterCategory?{retryAfterFilterCategory:n.retryAfterFilterCategory}:{}},{totalTokenMax:o.modelMaxPromptTokens??-1,promptTokenCount:a,tokenCountMax:c,timeToFirstToken:l,isVisionRequest:u?1:-1,isBYOK:(0,L_t.isBYOKModel)(o),isAuto:(0,N_t.isAutoModel)(o)})}};SW.ChatMLFetcherTelemetrySender=rSe});var H_t=m(Wo=>{"use strict";var ien=Wo&&Wo.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),oen=Wo&&Wo.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),sen=Wo&&Wo.__decorate||function(t,e,r,n){var o=arguments.length,s=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(o<3?a(s):o>3?a(e,r,s):a(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},aen=Wo&&Wo.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),o=0;o<n.length;o++)n[o]!=="default"&&ien(r,e,n[o]);return oen(r,e),r}})(),i0=Wo&&Wo.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(Wo,"__esModule",{value:!0});Wo.ChatMLFetcherImpl=Wo.AbstractChatMLFetcher=void 0;Wo.createTelemetryData=$_t;Wo.locationToIntent=V_t;var cen=ul(),len=ha(),uen=yg(),den=uTe(),hr=vg(),fen=dTe(),OL=SL(),pen=pTe(),NL=Ni(),hen=tl(),D_t=QTe(),iSe=pa(),U_t=Jz(),men=tu(),bW=Kz(),ih=Bv(),gen=UTe(),q_t=tW(),Lt=w_t(),_en=yW(),ven=Vo(),yen=qa(),CW=lR(),F_t=O_t(),Een=$4(),Ten=aen(fg()),Sen=Ua(),ben=Gr(),Cen=Fi(),Aen=Fo(),j_t=ws(),B_t=tSe(),xen=M_t(),ML=k_t(),AW=class{constructor(e){this.options=e,this._onDidMakeChatMLRequest=new Cen.Emitter,this.onDidMakeChatMLRequest=this._onDidMakeChatMLRequest.event}preparePostOptions(e){return{temperature:this.options.temperature,top_p:this.options.topP,...e,stream:!0}}async fetchOne(e,r){let n=await this.fetchMany({...e,requestOptions:{...e.requestOptions,n:1}},r);return n.type===hr.ChatFetchResponseType.Success?{...n,value:n.value[0]}:n}};Wo.AbstractChatMLFetcher=AW;var oSe=class extends AW{constructor(e,r,n,o,s,a,c,l,u,d,f){super(u),this._fetcherService=e,this._telemetryService=r,this._requestLogger=n,this._logService=o,this._authenticationService=s,this._interactionService=a,this._chatQuotaService=c,this._capiClientService=l,this._configurationService=d,this._experimentationService=f}async fetchMany(e,r){let{debugName:n,endpoint:o,finishedCb:s,location:a,messages:c,requestOptions:l,source:u,telemetryProperties:d,userInitiatedRequest:f}=e;d||(d={}),d.messageSource||(d.messageSource=n);let p=d.requestId??d.messageId??(0,j_t.generateUuid)(),h=o.maxOutputTokens;l?.prediction||(l={max_tokens:h,...l}),l.prediction?.content||delete l.prediction;let _=this.preparePostOptions(l),g=o.createRequestBody({...e,requestId:p,postOptions:_}),v=CW.TelemetryData.createAndMarkAsIssued({...d,baseModel:o.model,uiKind:hr.ChatLocation.toString(a)}),E=this._requestLogger.logChatRequest(n,o,{messages:e.messages,model:o.model,ourRequestId:p,location:e.location,body:g,ignoreStatefulMarker:e.ignoreStatefulMarker}),y=-1,S=new uen.FetchStreamRecorder(s),b=e.enableRetryOnError??e.enableRetryOnFilter,w,P;try{let A,O=wen(e.messages,_);if(!O.isValid)A={type:Lt.FetchResponseKind.Failed,modelRequestId:void 0,failKind:Lt.ChatFailKind.ValidationFailed,reason:O.reason};else{let j=await this._authenticationService.getCopilotToken();w=j.username;let $=await this._fetchAndStreamChat(o,g,v,S.callback,l.secretKey,j,e.location,p,_.n,r,f,d,e.useFetcher);A=$.result,P=$.fetcher,y=await o.acquireTokenizer().countMessagesTokens(c);let Q=u?.extensionId??xen.EXTENSION_ID;this._onDidMakeChatMLRequest.fire({messages:c,model:o.model,source:{extensionId:Q},tokenCount:y})}let L=Date.now()-v.issuedTime;switch(E?.markTimeToFirstToken(L),A.type){case Lt.FetchResponseKind.Success:{let j=await this.processSuccessfulResponse(A,c,g,p,h,y,L,S,v,o,f,P);if(j.type===hr.ChatFetchResponseType.FilteredRetry){if(e.enableRetryOnFilter){S.callback("",0,{text:"",retryReason:j.category});let $=j.value[0];if($){let Q=j.category===ih.FilterReason.Copyright?`The previous response (copied below) was filtered due to being too similar to existing public code. Please suggest something similar in function that does not match public code. Here's the previous response: ${$}

`:`The previous response (copied below) was filtered due to triggering our content safety filters, which looks for hateful, self-harm, sexual, or violent content. Please suggest something similar in content that does not trigger these filters. Here's the previous response: ${$}

`,K=[...c,{role:cen.Raw.ChatRole.User,content:(0,OL.toTextParts)(Q)}],N=await this.fetchMany({...e,debugName:"retry-"+n,messages:K,finishedCb:s,location:a,endpoint:o,source:u,requestOptions:l,userInitiatedRequest:!1,telemetryProperties:{...d,retryAfterFilterCategory:j.category??"uncategorized"},enableRetryOnFilter:!1,enableRetryOnError:b},r);if(E?.resolve(N,S.deltas),N.type===hr.ChatFetchResponseType.Success)return N}}return{type:hr.ChatFetchResponseType.Filtered,category:j.category,reason:"Response got filtered.",requestId:j.requestId,serverRequestId:j.serverRequestId}}return E?.resolve(j,S.deltas),j}case Lt.FetchResponseKind.Canceled:return ML.ChatMLFetcherTelemetrySender.sendCancellationTelemetry(this._telemetryService,{source:d.messageSource??"unknown",requestId:p,model:o.model,apiType:o.apiType,associatedRequestId:d.associatedRequestId,retryAfterErrorCategory:d.retryAfterErrorCategory,retryAfterError:d.retryAfterError,retryAfterErrorGitHubRequestId:d.retryAfterErrorGitHubRequestId,connectivityTestError:d.connectivityTestError,connectivityTestErrorGitHubRequestId:d.connectivityTestErrorGitHubRequestId,retryAfterFilterCategory:d.retryAfterFilterCategory,fetcher:P},{totalTokenMax:o.modelMaxPromptTokens??-1,promptTokenCount:y,tokenCountMax:h,timeToFirstToken:L,timeToFirstTokenEmitted:v&&S.firstTokenEmittedTime?S.firstTokenEmittedTime-v.issuedTime:-1,timeToCancelled:v?Date.now()-v.issuedTime:-1,isVisionRequest:this.filterImageMessages(c)?1:-1,isBYOK:(0,B_t.isBYOKModel)(o),isAuto:(0,D_t.isAutoModel)(o)}),E?.resolveWithCancelation(),this.processCanceledResponse(A,p);case Lt.FetchResponseKind.Failed:{let j=this.processFailedResponse(A,p);return ML.ChatMLFetcherTelemetrySender.sendResponseErrorTelemetry(this._telemetryService,j,d,o,g,y,h,L,this.filterImageMessages(c),P),E?.resolve(j),j}}}catch(A){let O=Date.now()-v.issuedTime;A.fetcherId&&(P=A.fetcherId);let L=this.processError(A,p,A.gitHubRequestId,w),j=d.connectivityTestError,$=d.connectivityTestErrorGitHubRequestId;if(L.type===hr.ChatFetchResponseType.NetworkError&&b){let Q=["darwin","linux"].includes(process.platform)&&L.reason.indexOf("net::ERR_NETWORK_CHANGED")!==-1,K=this._configurationService.getExperimentBasedConfig(NL.ConfigKey.TeamInternal.RetryNetworkErrors,this._experimentationService);if(Q||K){let N=Q?"node-fetch":e.useFetcher;this._logService.info(`Retrying chat request with ${N||"default"} fetcher after: ${L.reasonDetail||L.reason}`);let G=K?await this._checkNetworkConnectivity(N):{retryRequest:!0};if(j=G.connectivityTestError?this.scrubErrorDetail(G.connectivityTestError,w):void 0,$=G.connectivityTestErrorGitHubRequestId,G.retryRequest){S.callback("",0,{text:"",retryReason:"network_error"});let Y=await this.fetchMany({...e,debugName:"retry-error-"+n,messages:c,finishedCb:s,location:a,endpoint:o,source:u,requestOptions:l,userInitiatedRequest:!1,telemetryProperties:{...d,retryAfterErrorCategory:L.reasonDetail||L.reason,retryAfterError:L.reasonDetail||L.reason,retryAfterErrorGitHubRequestId:L.serverRequestId,connectivityTestError:j,connectivityTestErrorGitHubRequestId:$},enableRetryOnFilter:e.enableRetryOnFilter,enableRetryOnError:!1,useFetcher:N},r);return E?.resolve(Y,S.deltas),Y}else this._logService.info("Not retrying chat request as network connectivity could not be re-established.")}}return L.type===hr.ChatFetchResponseType.Canceled?ML.ChatMLFetcherTelemetrySender.sendCancellationTelemetry(this._telemetryService,{source:d.messageSource??"unknown",requestId:p,model:o.model,apiType:o.apiType,associatedRequestId:d.associatedRequestId,retryAfterErrorCategory:d.retryAfterErrorCategory,retryAfterError:d.retryAfterError,retryAfterErrorGitHubRequestId:d.retryAfterErrorGitHubRequestId,connectivityTestError:j,connectivityTestErrorGitHubRequestId:$,retryAfterFilterCategory:d.retryAfterFilterCategory,fetcher:P},{totalTokenMax:o.modelMaxPromptTokens??-1,promptTokenCount:y,tokenCountMax:h,timeToFirstToken:void 0,timeToCancelled:O,isVisionRequest:this.filterImageMessages(c)?1:-1,isBYOK:(0,B_t.isBYOKModel)(o),isAuto:(0,D_t.isAutoModel)(o)}):ML.ChatMLFetcherTelemetrySender.sendResponseErrorTelemetry(this._telemetryService,L,{...d,connectivityTestError:j,connectivityTestErrorGitHubRequestId:$},o,g,y,h,O,this.filterImageMessages(c),P),E?.resolve(L),L}}async _checkNetworkConnectivity(e){let r=[1e3,1e4,1e4],n,o;for(let s of r){this._logService.info(`Waiting ${s}ms before pinging CAPI to check network connectivity...`),await new Promise(a=>setTimeout(a,s));try{let a=this._capiClientService.dotcomAPIURL!=="https://api.github.com",c=this._capiClientService.capiPingURL,l=await this._getAuthHeaders(a,c),u=await this._fetcherService.fetch(c,{headers:l,useFetcher:e});if(u.status>=200&&u.status<300)return this._logService.info("CAPI ping successful, proceeding with chat request retry..."),{retryRequest:!0,connectivityTestError:n,connectivityTestErrorGitHubRequestId:o};n=`Status ${u.status}: ${u.statusText}`,o=u.headers.get("x-github-request-id")??"",this._logService.info(`CAPI ping returned status ${u.status}, retrying ping...`)}catch(a){n=(0,iSe.collectSingleLineErrorMessage)(a,!0),o=void 0,this._logService.info(`CAPI ping failed with error, retrying ping: ${n}`)}}return{retryRequest:!1,connectivityTestError:n,connectivityTestErrorGitHubRequestId:o}}async _getAuthHeaders(e,r){let n={};if(e){let o="";if(r===this._capiClientService.dotcomAPIURL)o=this._authenticationService.anyGitHubSession?.accessToken||"";else try{o=(await this._authenticationService.getCopilotToken()).token}catch{o=""}n.Authorization=`Bearer ${o}`}return n}async _fetchAndStreamChat(e,r,n,o,s,a,c,l,u,d,f,p,h){if(d.isCancellationRequested)return{result:{type:Lt.FetchResponseKind.Canceled,reason:"before fetch request"}};if(this._logService.debug(`modelMaxPromptTokens ${e.modelMaxPromptTokens}`),this._logService.debug(`modelMaxResponseTokens ${r.max_tokens??2048}`),this._logService.debug(`chat model ${e.model}`),s??=a.token,!s){let S=(0,bW.stringifyUrlOrRequestMetadata)(e.urlOrRequestMetadata);return this._logService.error(`Failed to send request to ${S} due to missing key`),(0,q_t.sendCommunicationErrorTelemetry)(this._telemetryService,`Failed to send request to ${S} due to missing key`),{result:{type:Lt.FetchResponseKind.Failed,modelRequestId:void 0,failKind:Lt.ChatFailKind.TokenExpiredOrInvalid,reason:"key is missing"}}}let _=(0,j_t.generateUuid)(),g=await this._fetchWithInstrumentation(e,l,r,s,c,d,f,{...p,modelCallId:_},h);if(d.isCancellationRequested){let S=await g.body();try{S.destroy()}catch(b){this._logService.error(b,"Error destroying stream"),this._telemetryService.sendGHTelemetryException(b,"Error destroying stream")}return{result:{type:Lt.FetchResponseKind.Canceled,reason:"after fetch request"},fetcher:g.fetcher}}if(g.status===200&&this._authenticationService.copilotToken?.isFreeUser&&this._authenticationService.copilotToken?.isChatQuotaExceeded&&this._authenticationService.resetCopilotToken(),g.status!==200){let S=$_t(e,c,l);return this._logService.info("Request ID for failed request: "+l),{result:await this._handleError(S,g,l),fetcher:g.fetcher}}let v=n.extendedBy({modelCallId:_}),E,y=g.headers.get("x-github-request-id")??"";try{let S=await e.processResponseFromChatEndpoint(this._telemetryService,this._logService,g,u??1,o,v,d);E=new Sen.AsyncIterableObject(async b=>{try{for await(let w of S)b.emitOne(w)}catch(w){throw w.fetcherId=g.fetcher,w.gitHubRequestId=y,w}})}catch(S){throw S.fetcherId=g.fetcher,S.gitHubRequestId=y,S}return g.headers.get("Copilot-Edits-Session")&&(this._authenticationService.speculativeDecodingEndpointToken=g.headers.get("Copilot-Edits-Session")??void 0),this._chatQuotaService.processQuotaHeaders(g.headers),{result:{type:Lt.FetchResponseKind.Success,chatCompletions:E},fetcher:g.fetcher}}async _fetchWithInstrumentation(e,r,n,o,s,a,c,l,u){let d={"X-Interaction-Id":this._interactionService.interactionId,"X-Initiator":c?"user":"agent"};n.messages?.some(_=>Array.isArray(_.content)?_.content.some(g=>"image_url"in g):!1)&&e.supportsVision&&(d["Copilot-Vision-Request"]="true");let f=CW.TelemetryData.createAndMarkAsIssued({endpoint:"completions",engineName:"chat",uiKind:hr.ChatLocation.toString(s),...l},{maxTokenWindow:e.modelMaxPromptTokens});for(let[_,g]of Object.entries(n))_==="messages"||_==="input"||(f.properties[`request.option.${_}`]=JSON.stringify(g)??"undefined");f.properties.headerRequestId=r,this._telemetryService.sendGHTelemetryEvent("request.sent",f.properties,f.measurements);let p=Date.now(),h=V_t(s);return(0,bW.postRequest)(this._fetcherService,this._telemetryService,this._capiClientService,e,o,await(0,Een.createRequestHMAC)(process.env.HMAC_SECRET),h,r,n,d,a,u).then(_=>{let g=_.headers.get("apim-request-id");g&&this._logService.debug(`APIM request id: ${g}`);let v=_.headers.get("x-github-request-id");v&&this._logService.debug(`GH request id: ${v}`);let E=(0,U_t.getRequestId)(_,void 0);f.extendWithRequestId(E);let y=Date.now()-p;return f.measurements.totalTimeMs=y,this._logService.debug(`request.response: [${(0,bW.stringifyUrlOrRequestMetadata)(e.urlOrRequestMetadata)}], took ${y} ms`),this._telemetryService.sendGHTelemetryEvent("request.response",f.properties,f.measurements),_}).catch(_=>{if(this._fetcherService.isAbortError(_))throw _;let g=f.extendedBy({error:"Network exception"});this._telemetryService.sendGHTelemetryEvent("request.shownWarning",g.properties,g.measurements),f.properties.code=String(_.code??""),f.properties.errno=String(_.errno??""),f.properties.message=String(_.message??""),f.properties.type=String(_.type??"");let v=Date.now()-p;throw f.measurements.totalTimeMs=v,this._logService.debug(`request.response: [${(0,bW.stringifyUrlOrRequestMetadata)(e.urlOrRequestMetadata)}] took ${v} ms`),this._telemetryService.sendGHTelemetryEvent("request.error",f.properties,f.measurements),_}).finally(()=>{(0,gen.sendEngineMessagesTelemetry)(this._telemetryService,n.messages??[],f,!1,this._logService)})}async _handleError(e,r,n){let o=(0,U_t.getRequestId)(r,void 0);n=o.headerRequestId||n,o.headerRequestId=n,e.properties.error=`Response status was ${r.status}`,e.properties.status=String(r.status),this._telemetryService.sendGHTelemetryEvent("request.shownWarning",e.properties,e.measurements);let s=await r.text(),a;try{a=JSON.parse(s),a=a?.error??a}catch{}let c=`Server error: ${r.status}`,l=`${c} ${s}`;if(this._logService.error(l),400<=r.status&&r.status<500){if(r.status===400&&s.includes("off_topic"))return{type:Lt.FetchResponseKind.Failed,modelRequestId:o,failKind:Lt.ChatFailKind.OffTopic,reason:"filtered as off_topic by intent classifier: message was not programming related"};if(r.status===401&&s.includes("authorize_url")&&a?.authorize_url)return{type:Lt.FetchResponseKind.Failed,modelRequestId:o,failKind:Lt.ChatFailKind.AgentUnauthorized,reason:r.statusText||r.statusText,data:a};if(r.status===400&&a?.code==="previous_response_not_found")return{type:Lt.FetchResponseKind.Failed,modelRequestId:o,failKind:Lt.ChatFailKind.InvalidPreviousResponseId,reason:a.message||"Invalid previous response ID",data:a};if(r.status===401||r.status===403)return this._authenticationService.resetCopilotToken(r.status),{type:Lt.FetchResponseKind.Failed,modelRequestId:o,failKind:Lt.ChatFailKind.TokenExpiredOrInvalid,reason:a?.message||`token expired or invalid: ${r.status}`};if(r.status===402){this._authenticationService.resetCopilotToken(r.status);let u=r.headers.get("retry-after"),f=(p=>{if(!p)return;let h=new Date(p);if(!isNaN(h.getDate()))return h;let _=parseInt(p,10);if(!isNaN(_))return new Date(Date.now()+_*1e3)})(u);return{type:Lt.FetchResponseKind.Failed,modelRequestId:o,failKind:Lt.ChatFailKind.QuotaExceeded,reason:a?.message??"Free tier quota exceeded",data:{capiError:a,retryAfter:f}}}if(r.status===404){let u;return a?u=JSON.stringify(a):u=s,{type:Lt.FetchResponseKind.Failed,modelRequestId:o,failKind:Lt.ChatFailKind.NotFound,reason:u}}if(r.status===422)return{type:Lt.FetchResponseKind.Failed,modelRequestId:o,failKind:Lt.ChatFailKind.ContentFilter,reason:`Filtered by Responsible AI Service

`+s};if(r.status===424)return{type:Lt.FetchResponseKind.Failed,modelRequestId:o,failKind:Lt.ChatFailKind.AgentFailedDependency,reason:s};if(r.status===429){let u=s;return u=a?.message??a?.code,s.includes("extension_blocked")&&a?.code==="extension_blocked"&&a?.type==="rate_limit_error"?{type:Lt.FetchResponseKind.Failed,modelRequestId:o,failKind:Lt.ChatFailKind.ExtensionBlocked,reason:"Extension blocked",data:{...a?.message,retryAfter:r.headers.get("retry-after")}}:{type:Lt.FetchResponseKind.Failed,modelRequestId:o,failKind:Lt.ChatFailKind.RateLimited,reason:u,data:{retryAfter:r.headers.get("retry-after"),rateLimitKey:r.headers.get("x-ratelimit-exceeded"),capiError:a}}}if(r.status===466)return this._logService.info(s),{type:Lt.FetchResponseKind.Failed,modelRequestId:o,failKind:Lt.ChatFailKind.ClientNotSupported,reason:`client not supported: ${s}`};if(r.status===499)return this._logService.info("Cancelled by server"),{type:Lt.FetchResponseKind.Failed,modelRequestId:o,failKind:Lt.ChatFailKind.ServerCanceled,reason:"canceled by server"}}else if(500<=r.status&&r.status<600)return r.status===503?{type:Lt.FetchResponseKind.Failed,modelRequestId:o,failKind:Lt.ChatFailKind.RateLimited,reason:"Upstream provider rate limit hit",data:{retryAfter:null,rateLimitKey:null,capiError:{code:"upstream_provider_rate_limit",message:s}}}:{type:Lt.FetchResponseKind.Failed,modelRequestId:o,failKind:Lt.ChatFailKind.ServerError,reason:c};return this._logService.error(`Request Failed: ${r.status} ${s}`),(0,q_t.sendCommunicationErrorTelemetry)(this._telemetryService,"Unhandled status from server: "+r.status,s),{type:Lt.FetchResponseKind.Failed,modelRequestId:o,failKind:Lt.ChatFailKind.Unknown,reason:`Request Failed: ${r.status} ${s}`}}async processSuccessfulResponse(e,r,n,o,s,a,c,l,u,d,f,p){let h=[];for await(let E of e.chatCompletions)ML.ChatMLFetcherTelemetrySender.sendSuccessTelemetry(this._telemetryService,{chatCompletion:E,baseTelemetry:u,userInitiatedRequest:f,chatEndpointInfo:d,requestBody:n,maxResponseTokens:s,promptTokenCount:a,timeToFirstToken:c,timeToFirstTokenEmitted:u&&l.firstTokenEmittedTime?l.firstTokenEmittedTime-u.issuedTime:-1,hasImageMessages:this.filterImageMessages(r),fetcher:p}),this.isRepetitive(E,u?.properties)||h.push(E);let _=new Set([ih.FinishedCompletionReason.Stop,ih.FinishedCompletionReason.ClientTrimmed,ih.FinishedCompletionReason.FunctionCall,ih.FinishedCompletionReason.ToolCalls]),g=h.filter(E=>_.has(E.finishReason));if(g.length>=1)return{type:hr.ChatFetchResponseType.Success,resolvedModel:g[0].model,usage:g.length===1?g[0].usage:void 0,value:g.map(E=>(0,OL.getTextPart)(E.message.content)),requestId:o,serverRequestId:g[0].requestId.headerRequestId};let v=h.at(0);switch(v?.finishReason){case ih.FinishedCompletionReason.ContentFilter:return{type:hr.ChatFetchResponseType.FilteredRetry,category:v.filterReason??ih.FilterReason.Copyright,reason:"Response got filtered.",value:h.map(E=>(0,OL.getTextPart)(E.message.content)),requestId:o,serverRequestId:v.requestId.headerRequestId};case ih.FinishedCompletionReason.Length:return{type:hr.ChatFetchResponseType.Length,reason:"Response too long.",requestId:o,serverRequestId:v.requestId.headerRequestId,truncatedValue:(0,OL.getTextPart)(v.message.content)};case ih.FinishedCompletionReason.ServerError:return{type:hr.ChatFetchResponseType.Failed,reason:"Server error. Stream terminated",requestId:o,serverRequestId:v.requestId.headerRequestId,streamError:v.error}}return{type:hr.ChatFetchResponseType.Unknown,reason:"Response contained no choices.",requestId:o,serverRequestId:v?.requestId.headerRequestId}}filterImageMessages(e){return e?.some(r=>Array.isArray(r.content)?r.content.some(n=>"imageUrl"in n):!1)}isRepetitive(e,r){let n=(0,F_t.calculateLineRepetitionStats)((0,OL.getTextPart)(e.message.content)),o=(0,F_t.isRepetitive)(e.tokens);if(o){let s=CW.TelemetryData.createAndMarkAsIssued();s.extendWithRequestId(e.requestId);let a=s.extendedBy(r);this._telemetryService.sendEnhancedGHTelemetryEvent("conversation.repetition.detected",a.properties,a.measurements)}return n.numberOfRepetitions>=10&&this._telemetryService.sendMSFTTelemetryEvent("conversation.repetition.detected",{requestId:e.requestId.headerRequestId,finishReason:e.finishReason},{numberOfRepetitions:n.numberOfRepetitions,lengthOfLine:n.mostRepeatedLine.length,totalLines:n.totalLines}),o}processCanceledResponse(e,r){return{type:hr.ChatFetchResponseType.Canceled,reason:e.reason,requestId:r,serverRequestId:void 0}}processFailedResponse(e,r){let n=e.modelRequestId?.gitHubRequestId,o=e.reason;if(e.failKind===Lt.ChatFailKind.RateLimited)return{type:hr.ChatFetchResponseType.RateLimited,reason:o,requestId:r,serverRequestId:n,retryAfter:e.data?.retryAfter,rateLimitKey:e.data?.rateLimitKey||"",capiError:e.data?.capiError};if(e.failKind===Lt.ChatFailKind.QuotaExceeded)return{type:hr.ChatFetchResponseType.QuotaExceeded,reason:o,requestId:r,serverRequestId:n,retryAfter:e.data?.retryAfter,capiError:e.data?.capiError};if(e.failKind===Lt.ChatFailKind.OffTopic)return{type:hr.ChatFetchResponseType.OffTopic,reason:o,requestId:r,serverRequestId:n};if(e.failKind===Lt.ChatFailKind.TokenExpiredOrInvalid||e.failKind===Lt.ChatFailKind.ClientNotSupported||o.includes("Bad request: "))return{type:hr.ChatFetchResponseType.BadRequest,reason:o,requestId:r,serverRequestId:n};if(e.failKind===Lt.ChatFailKind.ServerError)return{type:hr.ChatFetchResponseType.Failed,reason:o,requestId:r,serverRequestId:n};if(e.failKind===Lt.ChatFailKind.ContentFilter)return{type:hr.ChatFetchResponseType.PromptFiltered,reason:o,category:ih.FilterReason.Prompt,requestId:r,serverRequestId:n};if(e.failKind===Lt.ChatFailKind.AgentUnauthorized)return{type:hr.ChatFetchResponseType.AgentUnauthorized,reason:o,authorizationUrl:e.data.authorize_url,requestId:r,serverRequestId:n};if(e.failKind===Lt.ChatFailKind.AgentFailedDependency)return{type:hr.ChatFetchResponseType.AgentFailedDependency,reason:o,requestId:r,serverRequestId:n};if(e.failKind===Lt.ChatFailKind.ExtensionBlocked){let s=typeof e.data?.retryAfter=="number"?e.data.retryAfter:300;return{type:hr.ChatFetchResponseType.ExtensionBlocked,reason:o,requestId:r,retryAfter:s,learnMoreLink:e.data?.learnMoreLink??"",serverRequestId:n}}return e.failKind===Lt.ChatFailKind.NotFound?{type:hr.ChatFetchResponseType.NotFound,reason:o,requestId:r,serverRequestId:n}:e.failKind===Lt.ChatFailKind.InvalidPreviousResponseId?{type:hr.ChatFetchResponseType.InvalidStatefulMarker,reason:o,requestId:r,serverRequestId:n}:{type:hr.ChatFetchResponseType.Failed,reason:o,requestId:r,serverRequestId:n}}processError(e,r,n,o){let s=this._fetcherService;if(s.isAbortError(e))return{type:hr.ChatFetchResponseType.Canceled,reason:"network request aborted",requestId:r,serverRequestId:n};if((0,ben.isCancellationError)(e))return{type:hr.ChatFetchResponseType.Canceled,reason:"Got a cancellation error",requestId:r,serverRequestId:n};if(e&&(e instanceof Error&&e.message==="Premature close"||typeof e=="object"&&e.code==="ERR_STREAM_PREMATURE_CLOSE"))return{type:hr.ChatFetchResponseType.Canceled,reason:"Stream closed prematurely",requestId:r,serverRequestId:n};this._logService.error(Ten.fromUnknown(e),"Error on conversation request"),this._telemetryService.sendGHTelemetryException(e,"Error on conversation request");let a=s.getUserMessageForFetcherError(e),c=(0,iSe.collectSingleLineErrorMessage)(e,!0),l=this.scrubErrorDetail(c,o);return s.isInternetDisconnectedError(e)?{type:hr.ChatFetchResponseType.NetworkError,reason:"It appears you're not connected to the internet, please check your network connection and try again.",reasonDetail:l,requestId:r,serverRequestId:n}:s.isFetcherError(e)?{type:hr.ChatFetchResponseType.NetworkError,reason:a,reasonDetail:l,requestId:r,serverRequestId:n}:{type:hr.ChatFetchResponseType.Failed,reason:"Error on conversation request. Check the log for more details.",reasonDetail:l,requestId:r,serverRequestId:n}}scrubErrorDetail(e,r){if(r){let n=new RegExp((0,Aen.escapeRegExpCharacters)(r),"ig");e=e.replaceAll(n,"<login>")}return e.replaceAll(/(?<=logged in as )(?!<login>)[^\s]+/ig,"!<login>!")}};Wo.ChatMLFetcherImpl=oSe;Wo.ChatMLFetcherImpl=oSe=sen([i0(0,men.IFetcherService),i0(1,yen.ITelemetryService),i0(2,_en.IRequestLogger),i0(3,iSe.ILogService),i0(4,len.IAuthenticationService),i0(5,pen.IInteractionService),i0(6,den.IChatQuotaService),i0(7,hen.ICAPIClientService),i0(8,fen.IConversationOptions),i0(9,NL.IConfigurationService),i0(10,ven.IExperimentationService)],oSe);function wen(t,e){if(t.length===0)return{isValid:!1,reason:nSe("No messages provided")};if(e?.max_tokens&&e?.max_tokens<1)return{isValid:!1,reason:nSe("Invalid response token parameter")};let r=/^[a-zA-Z0-9_-]+$/;return e?.functions?.some(n=>!n.name.match(r))||e?.function_call?.name&&!e.function_call.name.match(r)?{isValid:!1,reason:nSe("Function names must match ^[a-zA-Z0-9_-]+$")}:e?.tools&&e.tools.length>NL.HARD_TOOL_LIMIT?{isValid:!1,reason:`Tool limit exceeded (${e.tools.length}/${NL.HARD_TOOL_LIMIT}). Click "Configure Tools" in the chat input to disable ${e.tools.length-NL.HARD_TOOL_LIMIT} tools and retry.`}:{isValid:!0,reason:""}}function nSe(t){return`Prompt failed validation with the reason: ${t}. Please file an issue.`}function $_t(t,e,r){return CW.TelemetryData.createAndMarkAsIssued({endpoint:"completions",engineName:"chat",uiKind:hr.ChatLocation.toString(e),headerRequestId:r})}function V_t(t){switch(t){case hr.ChatLocation.Panel:return"conversation-panel";case hr.ChatLocation.Editor:return"conversation-inline";case hr.ChatLocation.EditingSession:return"conversation-edits";case hr.ChatLocation.Notebook:return"conversation-notebook";case hr.ChatLocation.Terminal:return"conversation-terminal";case hr.ChatLocation.Other:return"conversation-other";case hr.ChatLocation.Agent:return"conversation-agent";case hr.ChatLocation.ResponsesProxy:return"responses-proxy"}}});var sSe=m(xW=>{"use strict";Object.defineProperty(xW,"__esModule",{value:!0});xW.IDiffService=void 0;var Ien=Qe();xW.IDiffService=(0,Ien.createServiceIdentifier)("IDiffService")});var G_t=m(aSe=>{"use strict";Object.defineProperty(aSe,"__esModule",{value:!0});aSe.createProxyXtabEndpoint=Men;var Pen=(nP(),cn(rP)),Ren=sR(),Oen=lC();function Men(t,e){let r={id:e??"copilot-nes-xtab",urlOrRequestMetadata:{type:Pen.RequestType.ProxyChatCompletions},name:"xtab-proxy",model_picker_enabled:!1,is_chat_default:!1,is_chat_fallback:!1,version:"unknown",capabilities:{type:"chat",family:"xtab-proxy",tokenizer:Ren.TokenizerType.O200K,limits:{max_prompt_tokens:12285,max_output_tokens:4096},supports:{streaming:!0,parallel_tool_calls:!1,tool_calls:!1,vision:!1,prediction:!0}}};return t.createInstance(Oen.ChatEndpoint,r)}});var wW=m(zv=>{"use strict";Object.defineProperty(zv,"__esModule",{value:!0});zv.NullUndesiredModelsManager=zv.IUndesiredModelsManager=zv.IInlineEditsModelService=void 0;var z_t=Qe();zv.IInlineEditsModelService=(0,z_t.createServiceIdentifier)("IInlineEditsModelService");zv.IUndesiredModelsManager=(0,z_t.createServiceIdentifier)("IUndesiredModelsManager");var cSe=class{isUndesiredModelId(e){return!1}addUndesiredModelId(e){return Promise.resolve()}removeUndesiredModelId(e){return Promise.resolve()}};zv.NullUndesiredModelsManager=cSe});var W_t=m(Cg=>{"use strict";Object.defineProperty(Cg,"__esModule",{value:!0});Cg.IgnoreWhitespaceOnlyChanges=Cg.IgnoreEmptyLineAndLeadingTrailingWhitespaceChanges=void 0;Cg.editWouldDeleteWhatWasJustInserted=Nen;Cg.editIsDeletion=dSe;Cg.editWouldDeleteWhatWasJustInserted2=Len;var lSe=class t{static filterEdit(e,r){return r.filter(o=>!t._isWhitespaceOnlyChange(o,e.documentAfterEditsLines))}static _isWhitespaceOnlyChange(e,r){let n=e.lineRange.toOffsetRange().slice(r),o=e.newLines,s=o.length===0;if(s&&n.every(a=>a.trim()==="")||!s&&o.every(a=>a.trim()===""))return!0;if(n.length!==o.length)return!1;for(let a=0;a<n.length;a++){let c=n[a],l=o[a];if(c.trim()!==l.trim())return!1}return!0}};Cg.IgnoreEmptyLineAndLeadingTrailingWhitespaceChanges=lSe;var uSe=class t{static filterEdit(e,r){return r.filter(n=>!t._isFormattingOnlyChange(e.documentAfterEditsLines,n))}static _isFormattingOnlyChange(e,r){let n=r.lineRange.toOffsetRange().slice(e).join("").replace(/\s/g,""),o=r.newLines.join("").replace(/\s/g,"");return n===o}};Cg.IgnoreWhitespaceOnlyChanges=uSe;function Nen(t,e){let r=e.toEdit(t.documentAfterEdits);if(r=r.normalizeOnSource(t.documentAfterEdits.value),!dSe(r))return!1;for(let n=t.recentEdits.edits.length-1;n>=0;n--){let o=t.recentEdits.edits[n],s=r.tryRebase(o);if(!s)return!0;r=s}return!1}function dSe(t){let e=t.replacements.reduce((n,o)=>n+o.replaceRange.length,0);return t.replacements.reduce((n,o)=>n+o.newText.length,0)===0&&e>0}function Len(t,e){let r=e.toEdit(t.documentAfterEdits);if(r=r.normalizeOnSource(t.documentAfterEdits.value),!dSe(r))return!1;let n=t.documentAfterEdits.value;for(let o=t.recentEdits.edits.length-1;o>=0;o--){let a=t.recentEdits.edits[o].inverse(n);if(a.equals(r))return!0;n=a.apply(n)}return!1}});var IW=m(Ag=>{"use strict";Object.defineProperty(Ag,"__esModule",{value:!0});Ag.AbstractLanguageDiagnosticsService=Ag.ILanguageDiagnosticsService=void 0;Ag.rangeSpanningDiagnostics=Uen;Ag.isError=qen;Ag.getDiagnosticsAtSelection=Fen;var ken=Qe(),Den=E_(),fSe=cc();Ag.ILanguageDiagnosticsService=(0,ken.createServiceIdentifier)("ILanguageDiagnosticService");var pSe=class{waitForNewDiagnostics(e,r,n=5e3){let o,s,a;return new Promise(c=>{o=r.onCancellationRequested(()=>c([])),a=setTimeout(()=>c(this.getDiagnostics(e)),n),s=this.onDidChangeDiagnostics(l=>{for(let u of l.uris)if((0,Den.isEqual)(u,e)){c(this.getDiagnostics(e));break}})}).finally(()=>{o.dispose(),s.dispose(),clearTimeout(a)})}};Ag.AbstractLanguageDiagnosticsService=pSe;function Uen(t){return t.map(e=>e.range).reduce((e,r)=>e.union(r))}function qen(t){return t.severity===fSe.DiagnosticSeverity.Error}function Fen(t,e,r=[fSe.DiagnosticSeverity.Error,fSe.DiagnosticSeverity.Warning]){return t.find(n=>n.range.contains(e)&&r.includes(n.severity))}});var PW=m(Sd=>{"use strict";Object.defineProperty(Sd,"__esModule",{value:!0});Sd.NullLanguageContextService=Sd.TriggerKind=Sd.KnownSources=Sd.ContextKind=Sd.ILanguageContextService=void 0;var jen=Qe();Sd.ILanguageContextService=(0,jen.createServiceIdentifier)("ILanguageContextService");var K_t;(function(t){t.Snippet="snippet",t.Trait="trait"})(K_t||(Sd.ContextKind=K_t={}));var Y_t;(function(t){t.unknown="unknown",t.sideCar="sideCar",t.completion="completion",t.populateCache="populateCache",t.nes="nes",t.chat="chat",t.fix="fix"})(Y_t||(Sd.KnownSources=Y_t={}));var Q_t;(function(t){t.unknown="unknown",t.selection="selection",t.completion="completion"})(Q_t||(Sd.TriggerKind=Q_t={}));var hSe=class{async*[Symbol.asyncIterator](){}};Sd.NullLanguageContextService={_serviceBrand:void 0,isActivated:async()=>!1,populateCache:async()=>{},getContext:()=>new hSe,getContextOnTimeout:()=>[]}});var gSe=m(pR=>{"use strict";Object.defineProperty(pR,"__esModule",{value:!0});pR.NulSimulationTestContext=pR.ISimulationTestContext=void 0;var Ben=Qe();pR.ISimulationTestContext=(0,Ben.createServiceIdentifier)("ISimulationTestContext");var mSe=class{constructor(){this.isInSimulationTests=!1}async writeFile(e,r,n){return""}};pR.NulSimulationTestContext=mSe});function uC(t,e=!1){let r=t.length,n=0,o="",s=0,a=16,c=0,l=0,u=0,d=0,f=0;function p(S,b){let w=0,P=0;for(;w<S||!b;){let A=t.charCodeAt(n);if(A>=48&&A<=57)P=P*16+A-48;else if(A>=65&&A<=70)P=P*16+A-65+10;else if(A>=97&&A<=102)P=P*16+A-97+10;else break;n++,w++}return w<S&&(P=-1),P}function h(S){n=S,o="",s=0,a=16,f=0}function _(){let S=n;if(t.charCodeAt(n)===48)n++;else for(n++;n<t.length&&hR(t.charCodeAt(n));)n++;if(n<t.length&&t.charCodeAt(n)===46)if(n++,n<t.length&&hR(t.charCodeAt(n)))for(n++;n<t.length&&hR(t.charCodeAt(n));)n++;else return f=3,t.substring(S,n);let b=n;if(n<t.length&&(t.charCodeAt(n)===69||t.charCodeAt(n)===101))if(n++,(n<t.length&&t.charCodeAt(n)===43||t.charCodeAt(n)===45)&&n++,n<t.length&&hR(t.charCodeAt(n))){for(n++;n<t.length&&hR(t.charCodeAt(n));)n++;b=n}else f=3;return t.substring(S,b)}function g(){let S="",b=n;for(;;){if(n>=r){S+=t.substring(b,n),f=2;break}let w=t.charCodeAt(n);if(w===34){S+=t.substring(b,n),n++;break}if(w===92){if(S+=t.substring(b,n),n++,n>=r){f=2;break}switch(t.charCodeAt(n++)){case 34:S+='"';break;case 92:S+="\\";break;case 47:S+="/";break;case 98:S+="\b";break;case 102:S+="\f";break;case 110:S+=`
`;break;case 114:S+="\r";break;case 116:S+="	";break;case 117:let A=p(4,!0);A>=0?S+=String.fromCharCode(A):f=4;break;default:f=5}b=n;continue}if(w>=0&&w<=31)if(LL(w)){S+=t.substring(b,n),f=2;break}else f=6;n++}return S}function v(){if(o="",f=0,s=n,l=c,d=u,n>=r)return s=r,a=17;let S=t.charCodeAt(n);if(_Se(S)){do n++,o+=String.fromCharCode(S),S=t.charCodeAt(n);while(_Se(S));return a=15}if(LL(S))return n++,o+=String.fromCharCode(S),S===13&&t.charCodeAt(n)===10&&(n++,o+=`
`),c++,u=n,a=14;switch(S){case 123:return n++,a=1;case 125:return n++,a=2;case 91:return n++,a=3;case 93:return n++,a=4;case 58:return n++,a=6;case 44:return n++,a=5;case 34:return n++,o=g(),a=10;case 47:let b=n-1;if(t.charCodeAt(n+1)===47){for(n+=2;n<r&&!LL(t.charCodeAt(n));)n++;return o=t.substring(b,n),a=12}if(t.charCodeAt(n+1)===42){n+=2;let w=r-1,P=!1;for(;n<w;){let A=t.charCodeAt(n);if(A===42&&t.charCodeAt(n+1)===47){n+=2,P=!0;break}n++,LL(A)&&(A===13&&t.charCodeAt(n)===10&&n++,c++,u=n)}return P||(n++,f=1),o=t.substring(b,n),a=13}return o+=String.fromCharCode(S),n++,a=16;case 45:if(o+=String.fromCharCode(S),n++,n===r||!hR(t.charCodeAt(n)))return a=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return o+=_(),a=11;default:for(;n<r&&E(S);)n++,S=t.charCodeAt(n);if(s!==n){switch(o=t.substring(s,n),o){case"true":return a=8;case"false":return a=9;case"null":return a=7}return a=16}return o+=String.fromCharCode(S),n++,a=16}}function E(S){if(_Se(S)||LL(S))return!1;switch(S){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function y(){let S;do S=v();while(S>=12&&S<=15);return S}return{setPosition:h,getPosition:()=>n,scan:e?y:v,getToken:()=>a,getTokenValue:()=>o,getTokenOffset:()=>s,getTokenLength:()=>n-s,getTokenStartLine:()=>l,getTokenStartCharacter:()=>s-d,getTokenError:()=>f}}function _Se(t){return t===32||t===9}function LL(t){return t===10||t===13}function hR(t){return t>=48&&t<=57}var Z_t,RW=q(()=>{"use strict";(function(t){t[t.lineFeed=10]="lineFeed",t[t.carriageReturn=13]="carriageReturn",t[t.space=32]="space",t[t._0=48]="_0",t[t._1=49]="_1",t[t._2=50]="_2",t[t._3=51]="_3",t[t._4=52]="_4",t[t._5=53]="_5",t[t._6=54]="_6",t[t._7=55]="_7",t[t._8=56]="_8",t[t._9=57]="_9",t[t.a=97]="a",t[t.b=98]="b",t[t.c=99]="c",t[t.d=100]="d",t[t.e=101]="e",t[t.f=102]="f",t[t.g=103]="g",t[t.h=104]="h",t[t.i=105]="i",t[t.j=106]="j",t[t.k=107]="k",t[t.l=108]="l",t[t.m=109]="m",t[t.n=110]="n",t[t.o=111]="o",t[t.p=112]="p",t[t.q=113]="q",t[t.r=114]="r",t[t.s=115]="s",t[t.t=116]="t",t[t.u=117]="u",t[t.v=118]="v",t[t.w=119]="w",t[t.x=120]="x",t[t.y=121]="y",t[t.z=122]="z",t[t.A=65]="A",t[t.B=66]="B",t[t.C=67]="C",t[t.D=68]="D",t[t.E=69]="E",t[t.F=70]="F",t[t.G=71]="G",t[t.H=72]="H",t[t.I=73]="I",t[t.J=74]="J",t[t.K=75]="K",t[t.L=76]="L",t[t.M=77]="M",t[t.N=78]="N",t[t.O=79]="O",t[t.P=80]="P",t[t.Q=81]="Q",t[t.R=82]="R",t[t.S=83]="S",t[t.T=84]="T",t[t.U=85]="U",t[t.V=86]="V",t[t.W=87]="W",t[t.X=88]="X",t[t.Y=89]="Y",t[t.Z=90]="Z",t[t.asterisk=42]="asterisk",t[t.backslash=92]="backslash",t[t.closeBrace=125]="closeBrace",t[t.closeBracket=93]="closeBracket",t[t.colon=58]="colon",t[t.comma=44]="comma",t[t.dot=46]="dot",t[t.doubleQuote=34]="doubleQuote",t[t.minus=45]="minus",t[t.openBrace=123]="openBrace",t[t.openBracket=91]="openBracket",t[t.plus=43]="plus",t[t.slash=47]="slash",t[t.formFeed=12]="formFeed",t[t.tab=9]="tab"})(Z_t||(Z_t={}))});var du,mR,vSe,J_t,X_t=q(()=>{du=new Array(20).fill(0).map((t,e)=>" ".repeat(e)),mR=200,vSe={" ":{"\n":new Array(mR).fill(0).map((t,e)=>`
`+" ".repeat(e)),"\r":new Array(mR).fill(0).map((t,e)=>"\r"+" ".repeat(e)),"\r\n":new Array(mR).fill(0).map((t,e)=>`\r
`+" ".repeat(e))},"	":{"\n":new Array(mR).fill(0).map((t,e)=>`
`+"	".repeat(e)),"\r":new Array(mR).fill(0).map((t,e)=>"\r"+"	".repeat(e)),"\r\n":new Array(mR).fill(0).map((t,e)=>`\r
`+"	".repeat(e))}},J_t=[`
`,"\r",`\r
`]});function OW(t,e,r){let n,o,s,a,c;if(e){for(a=e.offset,c=a+e.length,s=a;s>0&&!kL(t,s-1);)s--;let w=c;for(;w<t.length&&!kL(t,w);)w++;o=t.substring(s,w),n=Ven(o,r)}else o=t,n=0,s=0,a=0,c=t.length;let l=Hen(r,t),u=J_t.includes(l),d=0,f=0,p;r.insertSpaces?p=du[r.tabSize||4]??gR(du[1],r.tabSize||4):p="	";let h=p==="	"?"	":" ",_=uC(o,!1),g=!1;function v(){if(d>1)return gR(l,d)+gR(p,n+f);let w=p.length*(n+f);return!u||w>vSe[h][l].length?l+gR(p,n+f):w<=0?l:vSe[h][l][w]}function E(){let w=_.scan();for(d=0;w===15||w===14;)w===14&&r.keepLines?d+=1:w===14&&(d=1),w=_.scan();return g=w===16||_.getTokenError()!==0,w}let y=[];function S(w,P,A){!g&&(!e||P<c&&A>a)&&t.substring(P,A)!==w&&y.push({offset:P,length:A-P,content:w})}let b=E();if(r.keepLines&&d>0&&S(gR(l,d),0,0),b!==17){let w=_.getTokenOffset()+s,P=p.length*n<20&&r.insertSpaces?du[p.length*n]:gR(p,n);S(P,s,w)}for(;b!==17;){let w=_.getTokenOffset()+_.getTokenLength()+s,P=E(),A="",O=!1;for(;d===0&&(P===12||P===13);){let j=_.getTokenOffset()+s;S(du[1],w,j),w=_.getTokenOffset()+_.getTokenLength()+s,O=P===12,A=O?v():"",P=E()}if(P===2)b!==1&&f--,r.keepLines&&d>0||!r.keepLines&&b!==1?A=v():r.keepLines&&(A=du[1]);else if(P===4)b!==3&&f--,r.keepLines&&d>0||!r.keepLines&&b!==3?A=v():r.keepLines&&(A=du[1]);else{switch(b){case 3:case 1:f++,r.keepLines&&d>0||!r.keepLines?A=v():A=du[1];break;case 5:r.keepLines&&d>0||!r.keepLines?A=v():A=du[1];break;case 12:A=v();break;case 13:d>0?A=v():O||(A=du[1]);break;case 6:r.keepLines&&d>0?A=v():O||(A=du[1]);break;case 10:r.keepLines&&d>0?A=v():P===6&&!O&&(A="");break;case 7:case 8:case 9:case 11:case 2:case 4:r.keepLines&&d>0?A=v():(P===12||P===13)&&!O?A=du[1]:P!==5&&P!==17&&(g=!0);break;case 16:g=!0;break}d>0&&(P===12||P===13)&&(A=v())}P===17&&(r.keepLines&&d>0?A=v():A=r.insertFinalNewline?l:"");let L=_.getTokenOffset()+s;S(A,w,L),b=P}return y}function gR(t,e){let r="";for(let n=0;n<e;n++)r+=t;return r}function Ven(t,e){let r=0,n=0,o=e.tabSize||4;for(;r<t.length;){let s=t.charAt(r);if(s===du[1])n++;else if(s==="	")n+=o;else break;r++}return Math.floor(n/o)}function Hen(t,e){for(let r=0;r<e.length;r++){let n=e.charAt(r);if(n==="\r")return r+1<e.length&&e.charAt(r+1)===`
`?`\r
`:"\r";if(n===`
`)return`
`}return t&&t.eol||`
`}function kL(t,e){return`\r
`.indexOf(t.charAt(e))!==-1}var ySe=q(()=>{"use strict";RW();X_t()});function e1t(t,e){let r=[],n=new Object,o,s={value:{},offset:0,length:0,type:"object",parent:void 0},a=!1;function c(l,u,d,f){s.value=l,s.offset=u,s.length=d,s.type=f,s.colonOffset=void 0,o=s}try{qL(t,{onObjectBegin:(l,u)=>{if(e<=l)throw n;o=void 0,a=e>l,r.push("")},onObjectProperty:(l,u,d)=>{if(e<u||(c(l,u,d,"property"),r[r.length-1]=l,e<=u+d))throw n},onObjectEnd:(l,u)=>{if(e<=l)throw n;o=void 0,r.pop()},onArrayBegin:(l,u)=>{if(e<=l)throw n;o=void 0,r.push(0)},onArrayEnd:(l,u)=>{if(e<=l)throw n;o=void 0,r.pop()},onLiteralValue:(l,u,d)=>{if(e<u||(c(l,u,d,n1t(l)),e<=u+d))throw n},onSeparator:(l,u,d)=>{if(e<=u)throw n;if(l===":"&&o&&o.type==="property")o.colonOffset=u,a=!1,o=void 0;else if(l===","){let f=r[r.length-1];typeof f=="number"?r[r.length-1]=f+1:(a=!0,r[r.length-1]=""),o=void 0}}})}catch(l){if(l!==n)throw l}return{path:r,previousNode:o,isAtPropertyKey:a,matches:l=>{let u=0;for(let d=0;u<l.length&&d<r.length;d++)if(l[u]===r[d]||l[u]==="*")u++;else if(l[u]!=="**")return!1;return u===l.length}}}function t1t(t,e=[],r=DL.DEFAULT){let n=null,o=[],s=[];function a(l){Array.isArray(o)?o.push(l):n!==null&&(o[n]=l)}return qL(t,{onObjectBegin:()=>{let l={};a(l),s.push(o),o=l,n=null},onObjectProperty:l=>{n=l},onObjectEnd:()=>{o=s.pop()},onArrayBegin:()=>{let l=[];a(l),s.push(o),o=l,n=null},onArrayEnd:()=>{o=s.pop()},onLiteralValue:a,onError:(l,u,d)=>{e.push({error:l,offset:u,length:d})}},r),o[0]}function NW(t,e=[],r=DL.DEFAULT){let n={type:"array",offset:-1,length:-1,children:[],parent:void 0};function o(l){n.type==="property"&&(n.length=l-n.offset,n=n.parent)}function s(l){return n.children.push(l),l}qL(t,{onObjectBegin:l=>{n=s({type:"object",offset:l,length:-1,parent:n,children:[]})},onObjectProperty:(l,u,d)=>{n=s({type:"property",offset:u,length:-1,parent:n,children:[]}),n.children.push({type:"string",value:l,offset:u,length:d,parent:n})},onObjectEnd:(l,u)=>{o(l+u),n.length=l+u-n.offset,n=n.parent,o(l+u)},onArrayBegin:(l,u)=>{n=s({type:"array",offset:l,length:-1,parent:n,children:[]})},onArrayEnd:(l,u)=>{n.length=l+u-n.offset,n=n.parent,o(l+u)},onLiteralValue:(l,u,d)=>{s({type:n1t(l),offset:u,length:d,parent:n,value:l}),o(u+d)},onSeparator:(l,u,d)=>{n.type==="property"&&(l===":"?n.colonOffset=u:l===","&&o(u))},onError:(l,u,d)=>{e.push({error:l,offset:u,length:d})}},r);let c=n.children[0];return c&&delete c.parent,c}function UL(t,e){if(!t)return;let r=t;for(let n of e)if(typeof n=="string"){if(r.type!=="object"||!Array.isArray(r.children))return;let o=!1;for(let s of r.children)if(Array.isArray(s.children)&&s.children[0].value===n&&s.children.length===2){r=s.children[1],o=!0;break}if(!o)return}else{let o=n;if(r.type!=="array"||o<0||!Array.isArray(r.children)||o>=r.children.length)return;r=r.children[o]}return r}function ESe(t){if(!t.parent||!t.parent.children)return[];let e=ESe(t.parent);if(t.parent.type==="property"){let r=t.parent.children[0].value;e.push(r)}else if(t.parent.type==="array"){let r=t.parent.children.indexOf(t);r!==-1&&e.push(r)}return e}function MW(t){switch(t.type){case"array":return t.children.map(MW);case"object":let e=Object.create(null);for(let r of t.children){let n=r.children[1];n&&(e[r.children[0].value]=MW(n))}return e;case"null":case"string":case"number":case"boolean":return t.value;default:return}}function zen(t,e,r=!1){return e>=t.offset&&e<t.offset+t.length||r&&e===t.offset+t.length}function TSe(t,e,r=!1){if(zen(t,e,r)){let n=t.children;if(Array.isArray(n))for(let o=0;o<n.length&&n[o].offset<=e;o++){let s=TSe(n[o],e,r);if(s)return s}return t}}function qL(t,e,r=DL.DEFAULT){let n=uC(t,!1),o=[],s=0;function a(N){return N?()=>s===0&&N(n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter()):()=>!0}function c(N){return N?G=>s===0&&N(G,n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter()):()=>!0}function l(N){return N?G=>s===0&&N(G,n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter(),()=>o.slice()):()=>!0}function u(N){return N?()=>{s>0?s++:N(n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter(),()=>o.slice())===!1&&(s=1)}:()=>!0}function d(N){return N?()=>{s>0&&s--,s===0&&N(n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter())}:()=>!0}let f=u(e.onObjectBegin),p=l(e.onObjectProperty),h=d(e.onObjectEnd),_=u(e.onArrayBegin),g=d(e.onArrayEnd),v=l(e.onLiteralValue),E=c(e.onSeparator),y=a(e.onComment),S=c(e.onError),b=r&&r.disallowComments,w=r&&r.allowTrailingComma;function P(){for(;;){let N=n.scan();switch(n.getTokenError()){case 4:A(14);break;case 5:A(15);break;case 3:A(13);break;case 1:b||A(11);break;case 2:A(12);break;case 6:A(16);break}switch(N){case 12:case 13:b?A(10):y();break;case 16:A(1);break;case 15:case 14:break;default:return N}}}function A(N,G=[],Y=[]){if(S(N),G.length+Y.length>0){let J=n.getToken();for(;J!==17;){if(G.indexOf(J)!==-1){P();break}else if(Y.indexOf(J)!==-1)break;J=P()}}}function O(N){let G=n.getTokenValue();return N?v(G):(p(G),o.push(G)),P(),!0}function L(){switch(n.getToken()){case 11:let N=n.getTokenValue(),G=Number(N);isNaN(G)&&(A(2),G=0),v(G);break;case 7:v(null);break;case 8:v(!0);break;case 9:v(!1);break;default:return!1}return P(),!0}function j(){return n.getToken()!==10?(A(3,[],[2,5]),!1):(O(!1),n.getToken()===6?(E(":"),P(),K()||A(4,[],[2,5])):A(5,[],[2,5]),o.pop(),!0)}function $(){f(),P();let N=!1;for(;n.getToken()!==2&&n.getToken()!==17;){if(n.getToken()===5){if(N||A(4,[],[]),E(","),P(),n.getToken()===2&&w)break}else N&&A(6,[],[]);j()||A(4,[],[2,5]),N=!0}return h(),n.getToken()!==2?A(7,[2],[]):P(),!0}function Q(){_(),P();let N=!0,G=!1;for(;n.getToken()!==4&&n.getToken()!==17;){if(n.getToken()===5){if(G||A(4,[],[]),E(","),P(),n.getToken()===4&&w)break}else G&&A(6,[],[]);N?(o.push(0),N=!1):o[o.length-1]++,K()||A(4,[],[4,5]),G=!0}return g(),N||o.pop(),n.getToken()!==4?A(8,[4],[]):P(),!0}function K(){switch(n.getToken()){case 3:return Q();case 1:return $();case 10:return O(!0);default:return L()}}return P(),n.getToken()===17?r.allowEmptyContent?!0:(A(4,[],[]),!1):K()?(n.getToken()!==17&&A(9,[],[]),!0):(A(4,[],[]),!1)}function r1t(t,e){let r=uC(t),n=[],o,s=0,a;do switch(a=r.getPosition(),o=r.scan(),o){case 12:case 13:case 17:s!==a&&n.push(t.substring(s,a)),e!==void 0&&n.push(r.getTokenValue().replace(/[^\r\n]/g,e)),s=r.getPosition();break}while(o!==17);return n.join("")}function n1t(t){switch(typeof t){case"boolean":return"boolean";case"number":return"number";case"string":return"string";case"object":{if(t){if(Array.isArray(t))return"array"}else return"null";return"object"}default:return"null"}}var DL,SSe=q(()=>{"use strict";RW();(function(t){t.DEFAULT={allowTrailingComma:!1}})(DL||(DL={}))});function i1t(t,e,r,n){let o=e.slice(),a=NW(t,[]),c,l;for(;o.length>0&&(l=o.pop(),c=UL(a,o),c===void 0&&r!==void 0);)typeof l=="string"?r={[l]:r}:r=[r];if(c)if(c.type==="object"&&typeof l=="string"&&Array.isArray(c.children)){let u=UL(c,[l]);if(u!==void 0)if(r===void 0){if(!u.parent)throw new Error("Malformed AST");let d=c.children.indexOf(u.parent),f,p=u.parent.offset+u.parent.length;if(d>0){let h=c.children[d-1];f=h.offset+h.length}else f=c.offset+1,c.children.length>1&&(p=c.children[1].offset);return dC(t,{offset:f,length:p-f,content:""},n)}else return dC(t,{offset:u.offset,length:u.length,content:JSON.stringify(r)},n);else{if(r===void 0)return[];let d=`${JSON.stringify(l)}: ${JSON.stringify(r)}`,f=n.getInsertionIndex?n.getInsertionIndex(c.children.map(h=>h.children[0].value)):c.children.length,p;if(f>0){let h=c.children[f-1];p={offset:h.offset+h.length,length:0,content:","+d}}else c.children.length===0?p={offset:c.offset+1,length:0,content:d}:p={offset:c.offset+1,length:0,content:d+","};return dC(t,p,n)}}else if(c.type==="array"&&typeof l=="number"&&Array.isArray(c.children)){let u=l;if(u===-1){let d=`${JSON.stringify(r)}`,f;if(c.children.length===0)f={offset:c.offset+1,length:0,content:d};else{let p=c.children[c.children.length-1];f={offset:p.offset+p.length,length:0,content:","+d}}return dC(t,f,n)}else if(r===void 0&&c.children.length>=0){let d=l,f=c.children[d],p;if(c.children.length===1)p={offset:c.offset+1,length:c.length-2,content:""};else if(c.children.length-1===d){let h=c.children[d-1],_=h.offset+h.length,g=c.offset+c.length;p={offset:_,length:g-2-_,content:""}}else p={offset:f.offset,length:c.children[d+1].offset-f.offset,content:""};return dC(t,p,n)}else if(r!==void 0){let d,f=`${JSON.stringify(r)}`;if(!n.isArrayInsertion&&c.children.length>l){let p=c.children[l];d={offset:p.offset,length:p.length,content:f}}else if(c.children.length===0||l===0)d={offset:c.offset+1,length:0,content:c.children.length===0?f:f+","};else{let p=l>c.children.length?c.children.length:l,h=c.children[p-1];d={offset:h.offset+h.length,length:0,content:","+f}}return dC(t,d,n)}else throw new Error(`Can not ${r===void 0?"remove":n.isArrayInsertion?"insert":"modify"} Array index ${u} as length is not sufficient`)}else throw new Error(`Can not add ${typeof l!="number"?"index":"property"} to parent of type ${c.type}`);else{if(r===void 0)throw new Error("Can not delete in empty document");return dC(t,{offset:a?a.offset:0,length:a?a.length:0,content:JSON.stringify(r)},n)}}function dC(t,e,r){if(!r.formattingOptions)return[e];let n=LW(t,e),o=e.offset,s=e.offset+e.content.length;if(e.length===0||e.content.length===0){for(;o>0&&!kL(n,o-1);)o--;for(;s<n.length&&!kL(n,s);)s++}let a=OW(n,{offset:o,length:s-o},{...r.formattingOptions,keepLines:!1});for(let l=a.length-1;l>=0;l--){let u=a[l];n=LW(n,u),o=Math.min(o,u.offset),s=Math.max(s,u.offset+u.length),s+=u.content.length-u.length}let c=t.length-(n.length-s)-o;return[{offset:o,length:c,content:n.substring(o,s)}]}function LW(t,e){return t.substring(0,e.offset)+e.content+t.substring(e.offset+e.length)}var o1t=q(()=>{"use strict";ySe();SSe()});var s1t={};Xs(s1t,{ParseErrorCode:()=>ASe,ScanError:()=>bSe,SyntaxKind:()=>CSe,applyEdits:()=>ctn,createScanner:()=>Yen,findNodeAtLocation:()=>Xen,findNodeAtOffset:()=>etn,format:()=>stn,getLocation:()=>Qen,getNodePath:()=>ttn,getNodeValue:()=>rtn,modify:()=>atn,parse:()=>Zen,parseTree:()=>Jen,printParseErrorCode:()=>otn,stripComments:()=>itn,visit:()=>ntn});function otn(t){switch(t){case 1:return"InvalidSymbol";case 2:return"InvalidNumberFormat";case 3:return"PropertyNameExpected";case 4:return"ValueExpected";case 5:return"ColonExpected";case 6:return"CommaExpected";case 7:return"CloseBraceExpected";case 8:return"CloseBracketExpected";case 9:return"EndOfFileExpected";case 10:return"InvalidCommentToken";case 11:return"UnexpectedEndOfComment";case 12:return"UnexpectedEndOfString";case 13:return"UnexpectedEndOfNumber";case 14:return"InvalidUnicode";case 15:return"InvalidEscapeCharacter";case 16:return"InvalidCharacter"}return"<unknown ParseErrorCode>"}function stn(t,e,r){return OW(t,e,r)}function atn(t,e,r,n){return i1t(t,e,r,n)}function ctn(t,e){let r=e.slice(0).sort((o,s)=>{let a=o.offset-s.offset;return a===0?o.length-s.length:a}),n=t.length;for(let o=r.length-1;o>=0;o--){let s=r[o];if(s.offset+s.length<=n)t=LW(t,s);else throw new Error("Overlapping edit");n=s.offset}return t}var Yen,bSe,CSe,Qen,Zen,Jen,Xen,etn,ttn,rtn,ntn,itn,ASe,a1t=q(()=>{"use strict";ySe();o1t();RW();SSe();Yen=uC;(function(t){t[t.None=0]="None",t[t.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",t[t.UnexpectedEndOfString=2]="UnexpectedEndOfString",t[t.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",t[t.InvalidUnicode=4]="InvalidUnicode",t[t.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",t[t.InvalidCharacter=6]="InvalidCharacter"})(bSe||(bSe={}));(function(t){t[t.OpenBraceToken=1]="OpenBraceToken",t[t.CloseBraceToken=2]="CloseBraceToken",t[t.OpenBracketToken=3]="OpenBracketToken",t[t.CloseBracketToken=4]="CloseBracketToken",t[t.CommaToken=5]="CommaToken",t[t.ColonToken=6]="ColonToken",t[t.NullKeyword=7]="NullKeyword",t[t.TrueKeyword=8]="TrueKeyword",t[t.FalseKeyword=9]="FalseKeyword",t[t.StringLiteral=10]="StringLiteral",t[t.NumericLiteral=11]="NumericLiteral",t[t.LineCommentTrivia=12]="LineCommentTrivia",t[t.BlockCommentTrivia=13]="BlockCommentTrivia",t[t.LineBreakTrivia=14]="LineBreakTrivia",t[t.Trivia=15]="Trivia",t[t.Unknown=16]="Unknown",t[t.EOF=17]="EOF"})(CSe||(CSe={}));Qen=e1t,Zen=t1t,Jen=NW,Xen=UL,etn=TSe,ttn=ESe,rtn=MW,ntn=qL,itn=r1t;(function(t){t[t.InvalidSymbol=1]="InvalidSymbol",t[t.InvalidNumberFormat=2]="InvalidNumberFormat",t[t.PropertyNameExpected=3]="PropertyNameExpected",t[t.ValueExpected=4]="ValueExpected",t[t.ColonExpected=5]="ColonExpected",t[t.CommaExpected=6]="CommaExpected",t[t.CloseBraceExpected=7]="CloseBraceExpected",t[t.CloseBracketExpected=8]="CloseBracketExpected",t[t.EndOfFileExpected=9]="EndOfFileExpected",t[t.InvalidCommentToken=10]="InvalidCommentToken",t[t.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",t[t.UnexpectedEndOfString=12]="UnexpectedEndOfString",t[t.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",t[t.InvalidUnicode=14]="InvalidUnicode",t[t.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",t[t.InvalidCharacter=16]="InvalidCharacter"})(ASe||(ASe={}))});var DW=m(kW=>{"use strict";Object.defineProperty(kW,"__esModule",{value:!0});kW.BaseAlternativeNotebookContentProvider=void 0;var xSe=class{constructor(e){this.kind=e}};kW.BaseAlternativeNotebookContentProvider=xSe});var ISe=m(o0=>{"use strict";Object.defineProperty(o0,"__esModule",{value:!0});o0.DEFAULT_WORD_REGEXP=o0.USUAL_WORD_SEPARATORS=void 0;o0.ensureValidWordDefinition=c1t;o0.setDefaultGetWordAtTextConfig=ptn;o0.getWordAtText=l1t;var ltn=rX(),utn=Ar(),dtn=V2();o0.USUAL_WORD_SEPARATORS="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function ftn(t=""){let e="(-?\\d*\\.\\d\\w*)|([^";for(let r of o0.USUAL_WORD_SEPARATORS)t.indexOf(r)>=0||(e+="\\"+r);return e+="\\s]+)",new RegExp(e,"g")}o0.DEFAULT_WORD_REGEXP=ftn();function c1t(t){let e=o0.DEFAULT_WORD_REGEXP;if(t&&t instanceof RegExp)if(t.global)e=t;else{let r="g";t.ignoreCase&&(r+="i"),t.multiline&&(r+="m"),t.unicode&&(r+="u"),e=new RegExp(t.source,r)}return e.lastIndex=0,e}var wSe=new dtn.LinkedList;wSe.unshift({maxLen:1e3,windowSize:15,timeBudget:150});function ptn(t){let e=wSe.unshift(t);return(0,utn.toDisposable)(e)}function l1t(t,e,r,n,o){if(e=c1t(e),o||(o=ltn.Iterable.first(wSe)),r.length>o.maxLen){let u=t-o.maxLen/2;return u<0?u=0:n+=u,r=r.substring(u,t+o.maxLen/2),l1t(t,e,r,n,o)}let s=Date.now(),a=t-1-n,c=-1,l=null;for(let u=1;!(Date.now()-s>=o.timeBudget);u++){let d=a-o.windowSize*u;e.lastIndex=Math.max(0,d);let f=htn(e,r,a,c);if(!f&&l||(l=f,d<=0))break;c=d}if(l){let u={word:l[0],startColumn:n+1+l.index,endColumn:n+1+l.index+l[0].length};return e.lastIndex=0,u}return null}function htn(t,e,r,n){let o;for(;o=t.exec(e);){let s=o.index||0;if(s<=r&&t.lastIndex>=r)return o;if(n>0&&s>n)return null}return null}});var u1t=m(UW=>{"use strict";Object.defineProperty(UW,"__esModule",{value:!0});UW.toUint8=mtn;UW.toUint32=gtn;function mtn(t){return t<0?0:t>255?255:t|0}function gtn(t){return t<0?0:t>4294967295?4294967295:t|0}});var d1t=m(Wv=>{"use strict";Object.defineProperty(Wv,"__esModule",{value:!0});Wv.PrefixSumIndexOfResult=Wv.ConstantTimePrefixSumComputer=Wv.PrefixSumComputer=void 0;var _tn=Ui(),_R=u1t(),PSe=class{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}getCount(){return this.values.length}insertValues(e,r){e=(0,_R.toUint32)(e);let n=this.values,o=this.prefixSum,s=r.length;return s===0?!1:(this.values=new Uint32Array(n.length+s),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e),e+s),this.values.set(r,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(o.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}setValue(e,r){return e=(0,_R.toUint32)(e),r=(0,_R.toUint32)(r),this.values[e]===r?!1:(this.values[e]=r,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,r){e=(0,_R.toUint32)(e),r=(0,_R.toUint32)(r);let n=this.values,o=this.prefixSum;if(e>=n.length)return!1;let s=n.length-e;return r>=s&&(r=s),r===0?!1:(this.values=new Uint32Array(n.length-r),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e+r),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(o.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=(0,_R.toUint32)(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let r=this.prefixSumValidIndex[0]+1;r===0&&(this.prefixSum[0]=this.values[0],r++),e>=this.values.length&&(e=this.values.length-1);for(let n=r;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let r=0,n=this.values.length-1,o=0,s=0,a=0;for(;r<=n;)if(o=r+(n-r)/2|0,s=this.prefixSum[o],a=s-this.values[o],e<a)n=o-1;else if(e>=s)r=o+1;else break;return new FL(o,e-a)}};Wv.PrefixSumComputer=PSe;var RSe=class{constructor(e){this._values=e,this._isValid=!1,this._validEndIndex=-1,this._prefixSum=[],this._indexBySum=[]}getTotalSum(){return this._ensureValid(),this._indexBySum.length}getPrefixSum(e){return this._ensureValid(),e===0?0:this._prefixSum[e-1]}getIndexOf(e){this._ensureValid();let r=this._indexBySum[e],n=r>0?this._prefixSum[r-1]:0;return new FL(r,e-n)}removeValues(e,r){this._values.splice(e,r),this._invalidate(e)}insertValues(e,r){this._values=(0,_tn.arrayInsert)(this._values,e,r),this._invalidate(e)}_invalidate(e){this._isValid=!1,this._validEndIndex=Math.min(this._validEndIndex,e-1)}_ensureValid(){if(!this._isValid){for(let e=this._validEndIndex+1,r=this._values.length;e<r;e++){let n=this._values[e],o=e>0?this._prefixSum[e-1]:0;this._prefixSum[e]=o+n;for(let s=0;s<n;s++)this._indexBySum[o+s]=e}this._prefixSum.length=this._values.length,this._indexBySum.length=this._prefixSum[this._prefixSum.length-1],this._isValid=!0,this._validEndIndex=this._values.length-1}}setValue(e,r){this._values[e]!==r&&(this._values[e]=r,this._invalidate(e))}};Wv.ConstantTimePrefixSumComputer=RSe;var FL=class{constructor(e,r){this.index=e,this.remainder=r,this._prefixSumIndexOfResultBrand=void 0,this.index=e,this.remainder=r}};Wv.PrefixSumIndexOfResult=FL});var MSe=m(qW=>{"use strict";Object.defineProperty(qW,"__esModule",{value:!0});qW.PositionOffsetTransformer=void 0;var f1t=Fo(),p1t=Wl(),vtn=zi(),ytn=d1t(),fC=cc(),OSe=class{constructor(e){this._lines=(0,f1t.splitLines)(e),this._eol=e.charAt(this._lines[0].length)==="\r"?`\r
`:`
`;let r=new Uint32Array(this._lines.length);for(let n=0;n<this._lines.length;n++)r[n]=this._lines[n].length+this._eol.length;this._lineStarts=new ytn.PrefixSumComputer(r)}getText(){return this._lines.join(this._eol)}applyOffsetEdits(e){let{replacements:r}=e;for(let n=r.length-1;n>=0;n--){let o=r[n],s=this.toRange(o.replaceRange);this._acceptDeleteRange(s),this._acceptInsertText(s.start,o.newText)}}_acceptDeleteRange(e){if(e.start.line===e.end.line){if(e.start.character===e.end.character)return;this._setLineText(e.start.line,this._lines[e.start.line].substring(0,e.start.character)+this._lines[e.start.line].substring(e.end.character));return}this._setLineText(e.start.line,this._lines[e.start.line].substring(0,e.start.character)+this._lines[e.end.line].substring(e.end.character)),this._lines.splice(e.start.line+1,e.end.line-e.start.line),this._lineStarts.removeValues(e.start.line+1,e.end.line-e.start.line)}_acceptInsertText(e,r){if(r.length===0)return;let n=(0,f1t.splitLines)(r);if(n.length===1){this._setLineText(e.line,this._lines[e.line].substring(0,e.character)+n[0]+this._lines[e.line].substring(e.character));return}n[n.length-1]+=this._lines[e.line].substring(e.character),this._setLineText(e.line,this._lines[e.line].substring(0,e.character)+n[0]);let o=new Uint32Array(n.length-1);for(let s=1;s<n.length;s++)this._lines.splice(e.line+1+s-1,0,n[s]),o[s-1]=n[s].length+this._eol.length;this._lineStarts.insertValues(e.line+1,o)}_setLineText(e,r){this._lines[e]=r,this._lineStarts.setValue(e,this._lines[e].length+this._eol.length)}getLineCount(){return this._lines.length}getOffset(e){return e=this.validatePosition(e),this._lineStarts.getPrefixSum(e.line-1)+e.character}getPosition(e){e=Math.floor(e),e=Math.max(0,e);let r=this._lineStarts.getIndexOf(e),n=this._lines[r.index].length;return new fC.Position(r.index,Math.min(r.remainder,n))}toRange(e){return new fC.Range(this.getPosition(e.start),this.getPosition(e.endExclusive))}toOffsetRange(e){return new vtn.OffsetRange(this.getOffset(e.start),this.getOffset(e.end))}toOffsetEdit(e){let r=e.map(n=>new fC.TextEdit(this.validateRange(n.range),n.newText));return new p1t.StringEdit(r.map(n=>new p1t.StringReplacement(this.toOffsetRange(n.range),n.newText)))}toTextEdits(e){return e.replacements.map(r=>new fC.TextEdit(this.toRange(r.replaceRange),r.newText))}validatePosition(e){if(!(e instanceof fC.Position))throw new Error("Invalid argument");if(this._lines.length===0)return e.with(0,0);let{line:r,character:n}=e,o=!1;if(r<0)r=0,n=0,o=!0;else if(r>=this._lines.length)r=this._lines.length-1,n=this._lines[r].length,o=!0;else{let s=this._lines[r].length;n<0?(n=0,o=!0):n>s&&(n=s,o=!0)}return o?new fC.Position(r,n):e}validateRange(e){return new fC.Range(this.validatePosition(e.start),this.validatePosition(e.end))}};qW.PositionOffsetTransformer=OSe});var LSe=m(pC=>{"use strict";Object.defineProperty(pC,"__esModule",{value:!0});pC.SnapshotDocumentLine=pC.TextDocumentSnapshot=void 0;pC.isTextDocumentSnapshotJSON=Ttn;var FW=Ol(),m1t=Bi(),h1t=ISe(),vR=cc(),Etn=MSe();function Ttn(t){return!t||typeof t!="object"?!1:(0,m1t.isUriComponents)(t.uri)&&(0,FW.isString)(t._text)&&(0,FW.isString)(t.languageId)&&(0,FW.isNumber)(t.version)&&(0,FW.isNumber)(t.eol)}var NSe=class t{static create(e){return new t(e,e.uri,e.getText(),e.languageId,e.eol,e.version)}static fromNewText(e,r){return new t(r instanceof t?r.document:r,r.uri,e,r.languageId,r.eol,r.version+1)}static fromJSON(e,r){return new t(e,m1t.URI.from(r.uri),r._text,r.languageId,r.eol,r.version)}get transformer(){return this._transformer||(this._transformer=new Etn.PositionOffsetTransformer(this._text)),this._transformer}get fileName(){return this.uri.fsPath}get isUntitled(){return this.uri.scheme==="untitled"}get lineCount(){return this.lines.length}get lines(){return this._lines||(this._lines=this._text.split(/\r\n|\r|\n/g)),this._lines}constructor(e,r,n,o,s,a){this._transformer=null,this._lines=null,this.document=e,this.uri=r,this._text=n,this.languageId=o,this.eol=s,this.version=a}lineAt(e){let r;if(e instanceof vR.Position)r=e.line;else if(typeof e=="number")r=e;else throw new Error("Invalid argument");if(r<0||r>=this.lines.length)throw new Error("Illegal value for `line`");return new jW(r,this.lines[r],r===this.lines.length-1)}offsetAt(e){return this.version===this.document.version?this.document.offsetAt(e):(e=this.validatePosition(e),this.transformer.getOffset(e))}positionAt(e){return this.version===this.document.version?this.document.positionAt(e):(e=Math.floor(e),e=Math.max(0,e),this.transformer.getPosition(e))}getText(e){return e?this._getTextInRange(e):this._text}_getTextInRange(e){if(this.version===this.document.version)return this.document.getText(e);let r=this.validateRange(e);if(r.isEmpty)return"";let n=this.transformer.toOffsetRange(r);return this._text.substring(n.start,n.endExclusive)}getWordRangeAtPosition(e){let r=this.validatePosition(e),n=(0,h1t.getWordAtText)(r.character+1,h1t.DEFAULT_WORD_REGEXP,this.lines[r.line],0);if(n)return new vR.Range(r.line,n.startColumn-1,r.line,n.endColumn-1)}validateRange(e){let r=this.validatePosition(e.start),n=this.validatePosition(e.end);return r===e.start&&n===e.end?e:new vR.Range(r.line,r.character,n.line,n.character)}validatePosition(e){if(this._text.length===0)return e.with(0,0);let{line:r,character:n}=e,o=!1;if(r<0)r=0,n=0,o=!0;else if(r>=this.lines.length)r=this.lines.length-1,n=this.lines[r].length,o=!0;else{let s=this.lines[r].length;n<0?(n=0,o=!0):n>s&&(n=s,o=!0)}return o?new vR.Position(r,n):e}toJSON(){return{uri:this.uri.toJSON(),languageId:this.languageId,version:this.version,eol:this.eol,_text:this._text}}};pC.TextDocumentSnapshot=NSe;var jW=class{constructor(e,r,n){this._line=e,this._text=r,this._isLastLine=n}get lineNumber(){return this._line}get text(){return this._text}get range(){return new vR.Range(this._line,0,this._line,this._text.length)}get rangeIncludingLineBreak(){return this._isLastLine?this.range:new vR.Range(this._line,0,this._line+1,0)}get firstNonWhitespaceCharacterIndex(){return/^(\s*)/.exec(this._text)[1].length}get isEmptyOrWhitespace(){return this.firstNonWhitespaceCharacterIndex===this._text.length}};pC.SnapshotDocumentLine=jW});var VW=m($W=>{"use strict";Object.defineProperty($W,"__esModule",{value:!0});$W.AlternativeNotebookDocument=void 0;var g1t=ISe(),BW=cc(),Stn=MSe(),btn=LSe(),kSe=class{get transformer(){return this._transformer||(this._transformer=new Stn.PositionOffsetTransformer(this._text)),this._transformer}getText(e){return e?this._getTextInRange(e):this._text}_getTextInRange(e){let r=this.validateRange(e);if(r.isEmpty)return"";let n=this.transformer.toOffsetRange(r);return this._text.substring(n.start,n.endExclusive)}constructor(e,r){this._text=e,this.notebook=r,this._transformer=null,this._lines=null}positionToOffset(e){return e=this.validatePosition(e),this.transformer.getOffset(e)}getWordRangeAtPosition(e){let r=this.validatePosition(e),n=(0,g1t.getWordAtText)(r.character+1,g1t.DEFAULT_WORD_REGEXP,this.lines[r.line],0);if(n)return new BW.Range(r.line,n.startColumn-1,r.line,n.endColumn-1)}get lines(){return this._lines||(this._lines=this._text.split(/\r\n|\r|\n/g)),this._lines}get lineCount(){return this.lines.length}lineAt(e){let r;if(e instanceof BW.Position)r=e.line;else if(typeof e=="number")r=e;else throw new Error("Invalid argument");if(r<0||r>=this.lines.length)throw new Error("Illegal value for `line`");return new btn.SnapshotDocumentLine(r,this.lines[r],r===this.lines.length-1)}offsetAt(e){return this.transformer.getOffset(e)}positionAt(e){return e=Math.floor(e),e=Math.max(0,e),this.transformer.getPosition(e)}validateRange(e){let r=this.validatePosition(e.start),n=this.validatePosition(e.end);return r===e.start&&n===e.end?e:new BW.Range(r.line,r.character,n.line,n.character)}validatePosition(e){if(this._text.length===0)return e.with(0,0);let{line:r,character:n}=e,o=!1;if(r<0)r=0,n=0,o=!0;else if(r>=this.lines.length)r=this.lines.length-1,n=this.lines[r].length,o=!0;else{let s=this.lines[r].length;n<0?(n=0,o=!0):n>s&&(n=s,o=!0)}return o?new BW.Position(r,n):e}};$W.AlternativeNotebookDocument=kSe});var HW=m(yR=>{"use strict";Object.defineProperty(yR,"__esModule",{value:!0});yR.isUri=Atn;yR.isLocation=DSe;yR.toLocation=xtn;yR.isSymbolInformation=wtn;var jL=cc(),Ctn=Bi();function Atn(t){return Ctn.URI.isUri(t)}function DSe(t){return t&&typeof t=="object"&&"uri"in t&&"range"in t}function xtn(t){if(DSe(t)&&Array.isArray(t.range)&&t.range.length===2){let e=t.range[0],r=t.range[1];return new jL.Location(t.uri,new jL.Range(new jL.Position(e.line,e.character),new jL.Position(r.line,r.character)))}else if(DSe(t)&&t.range instanceof jL.Range)return t}function wtn(t){return t&&typeof t=="object"&&"name"in t&&"containerName"in t}});var VL=m(js=>{"use strict";Object.defineProperty(js,"__esModule",{value:!0});js.CellIdPatternRe=js.EOL=js.LineOfText=void 0;js.summarize=Ptn;js.notebookCellToCellData=Rtn;js.getCellIdMap=Otn;js.normalizeCellId=Mtn;js.getNotebookId=Ntn;js.getCellId=FSe;js.getDefaultLanguage=ktn;js.requestHasNotebookRefs=Utn;js.parseAndCleanStack=qtn;var _1t=HW(),T1t=PTe(),Itn=Fo(),v1t=Bi(),qSe=cc(),USe=class{constructor(e){this.__lineOfTextBrand=void 0,this.value=e.replace(/\r$/,"")}};js.LineOfText=USe;js.EOL=`
`;function Ptn(t){let e=t.kind===qSe.NotebookCellKind.Code?"code":"markdown",r=FSe(t),n=Ltn(t.document);return{cell_type:e,id:r,language:t.document.languageId,source:n,index:t.index}}function Rtn(t){let e=new qSe.NotebookCellData(t.kind,t.document.getText(),t.document.languageId);return e.metadata=t.metadata,e.executionSummary=t.executionSummary,t.outputs.length&&(e.outputs=[...t.outputs]),e}function Otn(t){let e=new Map;return t.getCells().forEach(r=>{e.set(FSe(r),r)}),e}var y1t=new WeakMap,$L=8,BL="#VSC-";js.CellIdPatternRe=new RegExp(`(\\s+|^|\\b|\\W)(#VSC-[a-f0-9]{${$L}})\\b`,"gi");function Mtn(t){return t.startsWith(BL)?t:t.startsWith("VSC-")?`#${t}`:t.startsWith("#V-")&&t.length===$L+3?`${BL}${t.substring(3)}`:t.toLowerCase().startsWith("vscode-")&&t.length===$L+7?`${BL}${t.substring(7)}`:t.startsWith("-")?`#VSC${t}`:t.length===$L?`${BL}${t}`:t}var E1t=new WeakMap;function Ntn(t){let e=E1t.get(t);if(e)return e;let r=new T1t.StringSHA1;return r.update(t.uri.toString()),e=r.digest(),E1t.set(t,e),e}function FSe(t){let e=y1t.get(t);if(e)return e;let r=new T1t.StringSHA1;return r.update(t.document.uri.toString()),e=`${BL}${r.digest().substring(0,$L)}`,y1t.set(t,e),e}function Ltn(t){return t.lineCount===0?[]:new Array(t.lineCount).fill("").map((e,r)=>t.lineAt(r).text)}function ktn(t){let e=t.getCells().find(r=>r.kind===qSe.NotebookCellKind.Code);if(e)return e.document.languageId;if(t.notebookType==="jupyter-notebook")return t.metadata?.language_info?.name||t.metadata?.kernelspec?.language||"python"}var Dtn=["jupyter","notebook","cell.","cells."," cell ","cells","notebook cell"];function Utn(t,e,r){let n=(t.prompt||"").toLowerCase();return r?.checkPromptAsWell&&Dtn.some(o=>n.includes(o))?!0:t.references.some(o=>(0,_1t.isLocation)(o.value)?e.hasSupportedNotebooks(o.value.uri):(0,v1t.isUriComponents)(o.value)?e.hasSupportedNotebooks(v1t.URI.revive(o.value)):(0,_1t.isUri)(o.value)?e.hasSupportedNotebooks(o.value):!1)}function qtn(t){try{let e=JSON.parse(t);return(0,Itn.removeAnsiEscapeCodes)(e?.stack||e.message||"")||e.message||e.name||t}catch{return t}}});var C1t=m(HL=>{"use strict";Object.defineProperty(HL,"__esModule",{value:!0});HL.AlternativeJsonNotebookContentProvider=void 0;HL.isJsonContent=Vtn;var Ftn=(a1t(),cn(s1t)),jtn=Ua(),S1t=Bi(),s0=cc(),Btn=DW(),$tn=VW(),ER=VL(),b1t=4;function Vtn(t){return!!(t.startsWith("{")||t.trim().startsWith("{")||(t.includes("{")||t.includes("}"))&&t.includes('"source":')&&t.includes('"cell_type":'))}var GW=class extends $tn.AlternativeNotebookDocument{fromCellPosition(e,r){let n=(0,ER.getCellId)(e),o=this.getText(),s="                ",a=`"id": "${n}",`,c=o.indexOf('"source": [',o.indexOf(a)),l=this.positionAt(c).line+1,u=e.document.getText(new s0.Range(r.line,0,r.line,r.character)),d=`${s}${JSON.stringify(u).slice(0,-1)}`,f=r.line+l;return new s0.Position(f,d.length)}toCellPosition(e){throw new Error("Method not implemented.")}},jSe=class extends Btn.BaseAlternativeNotebookContentProvider{constructor(){super("json")}stripCellMarkers(e){return e}parseAlternateContent(e,r,n){return this.parseAlternateContentImpl(e,r,n)}getAlternativeDocumentFromText(e,r){return new GW(e,r)}getAlternativeDocument(e,r){let o={cells:e.getCells().filter(a=>r?a.kind!==s0.NotebookCellKind.Markup:!0).map(a=>{let c=(0,ER.summarize)(a),l=Htn(a.document);return{cell_type:c.cell_type,id:c.id,metadata:{language:c.language},source:l}})},s=JSON.stringify(o,void 0,b1t);return new GW(s,e)}getSummaryOfStructure(e,r,n){let o=["{",'    "cells: ['],s=`// ${n}`;return e.getCells().forEach(a=>{if(r.includes(a)){let c=(0,ER.summarize)(a);c.source.length&&c.source[0].trim().length?c.source=[c.source[0],s]:c.source.length&&c.source.some(u=>u.trim().length)?c.source=[s,c.source.filter(u=>u.trim().length)[0],s]:c.source=[s];let l=JSON.stringify(c,void 0,b1t).split(/\r?\n/).map(u=>`    ${u}`);o.push(...l),o.push(",")}else(!o.length||o[o.length-1]!==s)&&o.push(s)}),o.push("    ]"),o.push("}"),o.join(ER.EOL)}parseAlternateContentImpl(e,r,n){return new jtn.AsyncIterableObject(async o=>{let s=S1t.URI.isUri(e)?new Map:(0,ER.getCellIdMap)(e),a=new Set,c="",l=-1,u={index:-1,startOffset:-1,endOffset:-1,kind:s0.NotebookCellKind.Code,source:[]},d=S1t.URI.isUri(e)?"python":(0,ER.getDefaultLanguage)(e),f=h=>{u.language=u.language||d,u.id&&s.get(u.id)?.document.languageId===u.language?a.has(u.id)?u.id="":a.add(u.id):u.id="";let _=s.get(u.id);u.uri=_?.document.uri,u.kind=_?.kind||(u.language==="markdown"?s0.NotebookCellKind.Markup:s0.NotebookCellKind.Code),o.emitOne({index:u.index,type:"start",kind:u.kind,language:u.language,uri:u.uri,id:u.id}),u.source.forEach(g=>o.emitOne({index:u.index,type:"line",line:g})),o.emitOne({index:u.index,type:"end"})},p=0;for await(let h of r){if(n.isCancellationRequested)break;let _=h.value;c+=_,(0,Ftn.visit)(c,{onObjectEnd(g,v,E,y){p=g},onLiteralValue:(g,v,E,y,S,b)=>{if(l>=v)return;let w=b();if(w.length<2||w.shift()!=="cells")return;let P=w.shift();if(typeof P!="number")return;let A=w.shift();if(l=v,u.index!==-1&&u.index!==P&&(f(v),u.startOffset=v,u.id=void 0,u.kind=s0.NotebookCellKind.Code,u.source=[],u.uri=void 0,u.language=void 0),u.index=P,A==="cell_type")u.kind=g==="code"?s0.NotebookCellKind.Code:s0.NotebookCellKind.Markup,u.kind===s0.NotebookCellKind.Markup&&(u.language="markdown");else if(A==="id")u.id=g;else if(A==="metadata"&&w[0]==="id")u.id=g;else if(A==="metadata"&&w[0]==="language")u.language=g,u.language==="markdown"&&(u.kind=s0.NotebookCellKind.Markup);else if(A==="source"&&w.length&&typeof w[0]=="number"){w[0]===0&&(u.startOffset=v);let O=typeof g=="string"?g:`${g||""}`;O.endsWith(`
`)&&(O=O.substr(0,O.length-1)),u.source.push(O)}}})}u.index!==-1&&f(p)})}};HL.AlternativeJsonNotebookContentProvider=jSe;function Htn(t){if(t.lineCount===0)return[];if(t.lineCount===1)return[t.lineAt(0).text];let e=t.lineCount;return new Array(e).fill("").map((r,n)=>t.lineAt(n).text)}});var $Se=m(Kv=>{"use strict";Object.defineProperty(Kv,"__esModule",{value:!0});Kv.wellKnownLanguages=void 0;Kv.getLanguage=A1t;Kv.getLanguageForResource=Wtn;var Gtn=E_(),ztn=Object.freeze({abap:{lineComment:{start:"'"},markdownLanguageIds:["abap","sap-abap"]},bat:{lineComment:{start:"REM"},alternativeLineComments:[{start:"::"}],aliases:["Batch","bat"],extensions:[".bat",".cmd"]},bibtex:{lineComment:{start:"%"},aliases:["BibTeX","bibtex"],extensions:[".bib"]},blade:{lineComment:{start:"#"}},c:{lineComment:{start:"//"},aliases:["C","c"],extensions:[".c",".i"],markdownLanguageIds:["c","h"]},clojure:{lineComment:{start:";"},aliases:["Clojure","clojure"],extensions:[".clj",".cljs",".cljc",".cljx",".clojure",".edn"],markdownLanguageIds:["clojure","clj"]},coffeescript:{lineComment:{start:"//"},aliases:["CoffeeScript","coffeescript","coffee"],extensions:[".coffee",".cson",".iced"],markdownLanguageIds:["coffeescript","coffee","cson","iced"],blockComment:["###","###"]},cpp:{lineComment:{start:"//"},aliases:["C++","Cpp","cpp"],extensions:[".cpp",".cc",".cxx",".c++",".hpp",".hh",".hxx",".h++",".h",".ii",".ino",".inl",".ipp",".ixx",".tpp",".txx",".hpp.in",".h.in"],markdownLanguageIds:["cpp","hpp","cc","hh","c++","h++","cxx","hxx"],blockComment:["/*","*/"]},csharp:{lineComment:{start:"//"},aliases:["C#","csharp"],extensions:[".cs",".csx",".cake"],markdownLanguageIds:["csharp","cs"],blockComment:["/*","*/"]},css:{lineComment:{start:"/*",end:"*/"},aliases:["CSS","css"],extensions:[".css"],blockComment:["/*","*/"]},dart:{lineComment:{start:"//"},aliases:["Dart"],extensions:[".dart"],blockComment:["/*","*/"]},dockerfile:{lineComment:{start:"#"},aliases:["Docker","Dockerfile","Containerfile"],extensions:[".dockerfile",".containerfile"],markdownLanguageIds:["dockerfile","docker"]},elixir:{lineComment:{start:"#"}},erb:{lineComment:{start:"<%#",end:"%>"}},erlang:{lineComment:{start:"%"},markdownLanguageIds:["erlang","erl"]},fsharp:{lineComment:{start:"//"},aliases:["F#","FSharp","fsharp"],extensions:[".fs",".fsi",".fsx",".fsscript"],markdownLanguageIds:["fsharp","fs","fsx","fsi","fsscript"],blockComment:["(*","*)"]},go:{lineComment:{start:"//"},aliases:["Go"],extensions:[".go"],markdownLanguageIds:["go","golang"],blockComment:["/*","*/"]},groovy:{lineComment:{start:"//"},aliases:["Groovy","groovy"],extensions:[".groovy",".gvy",".gradle",".jenkinsfile",".nf"],blockComment:["/*","*/"]},haml:{lineComment:{start:"-#"}},handlebars:{lineComment:{start:"{{!",end:"}}"},extensions:[".hbs",".handlebars"],markdownLanguageIds:["handlebars","hbs","html.hbs","html.handlebars"],blockComment:["{{!--","--}}"]},haskell:{lineComment:{start:"--"},markdownLanguageIds:["haskell","hs"]},html:{lineComment:{start:"<!--",end:"-->"},aliases:["HTML","htm","html","xhtml"],extensions:[".html",".htm",".shtml",".xhtml",".xht",".mdoc",".jsp",".asp",".aspx",".jshtm",".volt",".ejs",".rhtml"],markdownLanguageIds:["html","xhtml"],blockComment:["<!--","-->"]},ini:{lineComment:{start:";"},blockComment:[";"," "]},java:{lineComment:{start:"//"},extensions:[".java",".class"],markdownLanguageIds:["java","jsp"],blockComment:["/*","*/"]},javascript:{lineComment:{start:"//"},aliases:["JavaScript","javascript","js"],extensions:[".js",".es6",".mjs",".cjs",".pac"],markdownLanguageIds:["javascript","js"],blockComment:["/*","*/"]},javascriptreact:{lineComment:{start:"//"},aliases:["JavaScript JSX","JavaScript React","jsx"],extensions:[".jsx"],markdownLanguageIds:["jsx"]},json:{extensions:[".json"],lineComment:{start:"//"},blockComment:["/*","*/"]},jsonc:{lineComment:{start:"//"}},jsx:{lineComment:{start:"//"},markdownLanguageIds:["jsx"]},julia:{lineComment:{start:"#"},aliases:["Julia","julia"],extensions:[".jl"],markdownLanguageIds:["julia","jl"],blockComment:["#=","=#"]},kotlin:{lineComment:{start:"//"},markdownLanguageIds:["kotlin","kt"]},latex:{lineComment:{start:"%"},aliases:["LaTeX","latex"],extensions:[".tex",".ltx",".ctx"],markdownLanguageIds:["tex"]},less:{lineComment:{start:"//"},aliases:["Less","less"],extensions:[".less"],blockComment:["/*","*/"]},lua:{lineComment:{start:"--"},aliases:["Lua","lua"],extensions:[".lua"],markdownLanguageIds:["lua","pluto"],blockComment:["--[[","]]"]},makefile:{lineComment:{start:"#"},aliases:["Makefile","makefile"],extensions:[".mak",".mk"],markdownLanguageIds:["makefile","mk","mak","make"]},markdown:{lineComment:{start:"<!--",end:"-->"},alternativeLineComments:[{start:"[]: #"}],aliases:["Markdown","markdown"],extensions:[".md",".mkd",".mdwn",".mdown",".markdown",".markdn",".mdtxt",".mdtext",".workbook"],markdownLanguageIds:["markdown","md","mkdown","mkd"]},"objective-c":{lineComment:{start:"//"},aliases:["Objective-C"],extensions:[".m"],markdownLanguageIds:["objectivec","mm","objc","obj-c"],blockComment:["/*","*/"]},"objective-cpp":{lineComment:{start:"//"},aliases:["Objective-C++"],extensions:[".mm"],markdownLanguageIds:["objectivec++","objc+"]},perl:{lineComment:{start:"#"},aliases:["Perl","perl"],extensions:[".pl",".pm",".pod",".t",".PL",".psgi"],markdownLanguageIds:["perl","pl","pm"]},php:{lineComment:{start:"//"},aliases:["PHP","php"],extensions:[".php",".php4",".php5",".phtml",".ctp"],blockComment:["/*","*/"]},powershell:{lineComment:{start:"#"},aliases:["PowerShell","powershell","ps","ps1"],extensions:[".ps1",".psm1",".psd1",".pssc",".psrc"],markdownLanguageIds:["powershell","ps","ps1"],blockComment:["<#","#>"]},pug:{lineComment:{start:"//"}},python:{lineComment:{start:"#"},aliases:["Python","py"],extensions:[".py",".rpy",".pyw",".cpy",".gyp",".gypi",".pyi",".ipy",".pyt"],markdownLanguageIds:["python","py","gyp"],blockComment:['"""','"""']},ql:{lineComment:{start:"//"}},r:{lineComment:{start:"#"},aliases:["R","r"],extensions:[".r",".rhistory",".rprofile",".rt"]},razor:{lineComment:{start:"<!--",end:"-->"},aliases:["Razor","razor"],extensions:[".cshtml",".razor"],markdownLanguageIds:["cshtml","razor","razor-cshtml"],blockComment:["<!--","-->"]},ruby:{lineComment:{start:"#"},aliases:["Ruby","rb"],extensions:[".rb",".rbx",".rjs",".gemspec",".rake",".ru",".erb",".podspec",".rbi"],markdownLanguageIds:["ruby","rb","gemspec","podspec","thor","irb"],blockComment:["=begin","=end"]},rust:{lineComment:{start:"//"},aliases:["Rust","rust"],extensions:[".rs"],markdownLanguageIds:["rust","rs"],blockComment:["/*","*/"]},sass:{lineComment:{start:"//"}},scala:{lineComment:{start:"//"}},scss:{lineComment:{start:"//"},aliases:["SCSS","scss"],extensions:[".scss"],blockComment:["/*","*/"]},shellscript:{lineComment:{start:"#"},aliases:["Shell Script","shellscript","bash","fish","sh","zsh","ksh","csh"],extensions:[".sh",".bash",".bashrc",".bash_aliases",".bash_profile",".bash_login",".ebuild",".profile",".bash_logout",".xprofile",".xsession",".xsessionrc",".Xsession",".zsh",".zshrc",".zprofile",".zlogin",".zlogout",".zshenv",".zsh-theme",".fish",".ksh",".csh",".cshrc",".tcshrc",".yashrc",".yash_profile"],markdownLanguageIds:["bash","sh","zsh"]},slim:{lineComment:{start:"/"}},solidity:{lineComment:{start:"//"},markdownLanguageIds:["solidity","sol"]},sql:{lineComment:{start:"--"},aliases:["SQL"],extensions:[".sql",".dsql"],blockComment:["/*","*/"]},stylus:{lineComment:{start:"//"}},svelte:{lineComment:{start:"<!--",end:"-->"}},swift:{lineComment:{start:"//"},aliases:["Swift","swift"],extensions:[".swift"],blockComment:["/*","*/"]},terraform:{lineComment:{start:"#"}},tex:{lineComment:{start:"%"},aliases:["TeX","tex"],extensions:[".sty",".cls",".bbx",".cbx"]},typescript:{lineComment:{start:"//"},aliases:["TypeScript","ts","typescript"],extensions:[".ts",".cts",".mts"],markdownLanguageIds:["typescript","ts"],blockComment:["/*","*/"]},typescriptreact:{lineComment:{start:"//"},aliases:["TypeScript JSX","TypeScript React","tsx"],extensions:[".tsx"],markdownLanguageIds:["tsx"],blockComment:["/*","*/"]},vb:{lineComment:{start:"'"},aliases:["Visual Basic","vb"],extensions:[".vb",".brs",".vbs",".bas",".vba"],markdownLanguageIds:["vb","vbscript"]},verilog:{lineComment:{start:"//"}},"vue-html":{lineComment:{start:"<!--",end:"-->"}},vue:{lineComment:{start:"//"},extensions:[".vue"]},xml:{lineComment:{start:"<!--",end:"-->"},aliases:["XML","xml"],extensions:[".xml",".xsd",".ascx",".atom",".axml",".axaml",".bpmn",".cpt",".csl",".csproj",".csproj.user",".dita",".ditamap",".dtd",".ent",".mod",".dtml",".fsproj",".fxml",".iml",".isml",".jmx",".launch",".menu",".mxml",".nuspec",".opml",".owl",".proj",".props",".pt",".publishsettings",".pubxml",".pubxml.user",".rbxlx",".rbxmx",".rdf",".rng",".rss",".shproj",".storyboard",".svg",".targets",".tld",".tmx",".vbproj",".vbproj.user",".vcxproj",".vcxproj.filters",".wsdl",".wxi",".wxl",".wxs",".xaml",".xbl",".xib",".xlf",".xliff",".xpdl",".xul",".xoml"],blockComment:["<!--","-->"]},xsl:{lineComment:{start:"<!--",end:"-->"},aliases:["XSL","xsl"],extensions:[".xsl",".xslt"]},yaml:{lineComment:{start:"#"},markdownLanguageIds:["yaml","yml"]}});Kv.wellKnownLanguages=new Map(Object.entries(ztn).map(([t,e])=>[t,{languageId:t,...e}]));function A1t(t){return BSe(typeof t=="string"?t:typeof t>"u"?"plaintext":t.languageId)}function BSe(t){return Kv.wellKnownLanguages.get(t.toLowerCase())??{languageId:t,lineComment:{start:"//"}}}function Wtn(t){let e=(0,Gtn.extname)(t).toLowerCase();for(let r of Kv.wellKnownLanguages.values())if(r.extensions?.includes(e))return r;return A1t("plaintext")}});var I1t=m(Yv=>{"use strict";Object.defineProperty(Yv,"__esModule",{value:!0});Yv.AlternativeTextNotebookContentProvider=void 0;Yv.generateCellTextMarker=GSe;Yv.lineMightHaveCellMarker=zSe;Yv.getBlockComment=SR;Yv.getLineCommentStart=bR;var HSe=$Se(),Ktn=HW(),Ytn=u_(),TR=cc(),Qtn=DW(),Ztn=VW(),Lo=VL();function GSe(t,e){let r=t.id?`[id=${t.id}] `:"";return`${e}%% vscode.cell ${r}[language=${t.language}]`}function zSe(t){return t.toLowerCase().includes("vscode.cell")}var zW=class extends Ztn.AlternativeNotebookDocument{constructor(e,r,n){super(e,n),this.cellOffsetMap=r}fromCellPosition(e,r){let n=(0,Lo.summarize)(e),o=bR(this.notebook),s=GSe(n,o),a=e.document.eol===TR.EndOfLine.LF?1:2,c=SR(this.notebook),l=this.getText(),u=e.document.offsetAt(r),d=e.kind===TR.NotebookCellKind.Markup?c[0].length+a:0,f=l.indexOf(s)+s.length+a+d+u;return this.positionAt(f)}toCellPosition(e){let r=this.offsetAt(e),n=(0,Ytn.findLast)(this.cellOffsetMap,s=>s.sourceOffset<=r);if(!n)return;let o=n.cell.document.positionAt(r-n.sourceOffset);return{cell:n.cell,position:o}}},VSe=class extends Qtn.BaseAlternativeNotebookContentProvider{constructor(){super("text")}stripCellMarkers(e){let r=e.split(Lo.EOL);return r.length&&zSe(r[0])?(r.shift(),r.join(Lo.EOL)):e}getSummaryOfStructure(e,r,n){let o=SR(e),s=bR(e),a=`${s} ${n}`,c=[];return e.getCells().forEach(l=>{if(r.includes(l)){let u=(0,Lo.summarize)(l);u.source.length&&u.source[0].trim().length?u.source=[u.source[0],a]:u.source.length&&u.source.some(d=>d.trim().length)?u.source=[a,u.source.filter(d=>d.trim().length)[0],a]:u.source=[a],c.push(x1t(u,s,o).content)}else(!c.length||c[c.length-1]!==a)&&c.push(a)}),c.join(Lo.EOL)}async*parseAlternateContent(e,r,n){let o=!(0,Ktn.isUri)(e),s=o?(0,Lo.getCellIdMap)(e):new Map,a=!1,c=!1,l=!1,u=!1,d=-1,f=bR(o?e:void 0),p=SR(o?e:void 0),h=o?(0,HSe.getLanguage)((0,Lo.getDefaultLanguage)(e)).languageId:void 0,_=new Set;for await(let g of r){if(n.isCancellationRequested)break;let v=g.value,E=v.startsWith(`${f}%% [`)&&v.trimEnd().endsWith("]"),y=v.startsWith(`${f}%% vscode.cell`),S=y||E?w1t(v,h):void 0;if((y||E)&&S?.language){l&&(l=!1);let b={index:-1,uri:void 0,language:void 0,kind:TR.NotebookCellKind.Code,emitted:!1,type:"start"};b.index=d+=1,b.emitted=!1,S.id&&s.get(S.id)?.document.languageId===S.language?_.has(S.id)?S.id="":_.add(S.id):S.id="";let w=s.get(S.id);b.id=S.id,b.language=S.language,b.uri=w?.document.uri,b.kind=w?.kind||(b.language==="markdown"?TR.NotebookCellKind.Markup:TR.NotebookCellKind.Code),a=b.language==="markdown",c=!1,u&&(yield{index:d-1,type:"end"}),u=!0,yield b;continue}u&&(a?c?v===p[1]?(c=!1,l=!0):yield{index:d,line:v,type:"line"}:v===p[0]?c=!0:yield{index:d,line:v,type:"line"}:yield{index:d,line:v,type:"line"})}u&&(yield{index:d,type:"end"})}getAlternativeDocumentFromText(e,r){let n=SR(r),o=bR(r),s=(0,Lo.getCellIdMap)(r),a=[],c=e.split(Lo.EOL),l=0;for(let u=0;u<c.length;u++){let d=c[u],f=d.startsWith(`${o}%% [`)&&d.trimEnd().endsWith("]");if(d.startsWith(`${o}%% vscode.cell`)||f){let h=w1t(d,void 0);if(h){let _=s.get(h.id)||r.getCells().find(g=>g.document.languageId===h.language&&!a.some(v=>v.cell===g));if(_){let g=l,v=Lo.EOL.length,E=h.language==="markdown",y=g+d.length+v+(E?n[0].length+v:0);a.push({offset:g,sourceOffset:y,cell:_})}}}l+=d.length+Lo.EOL.length}return new zW(e,a,r)}getAlternativeDocument(e,r){let n=e.getCells().filter(u=>r?u.kind!==TR.NotebookCellKind.Markup:!0).map(u=>(0,Lo.summarize)(u)),o=SR(e),s=bR(e),a=n.map(u=>({...x1t(u,s,o),cell:e.cellAt(u.index)})),c=a.map(u=>u.content).join(Lo.EOL),l=a.map(u=>{let d=c.indexOf(u.content),f=d+u.prefix.length;return{offset:d,sourceOffset:f,cell:e.cellAt(u.cell.index)}});return new zW(c,l,e)}};Yv.AlternativeTextNotebookContentProvider=VSe;function x1t(t,e,r){let n=GSe(t,e),o=t.source.join(Lo.EOL),s=t.language==="markdown"?`${n}${Lo.EOL}${r[0]}${Lo.EOL}`:`${n}${Lo.EOL}`;return{content:t.language==="markdown"?`${s}${o}${Lo.EOL}${r[1]}`:`${s}${o}`,prefix:s}}function SR(t){return t?(0,HSe.getLanguage)((0,Lo.getDefaultLanguage)(t)).blockComment??["```","```"]:['"""','"""']}function bR(t){return t&&(0,HSe.getLanguage)((0,Lo.getDefaultLanguage)(t)).lineComment.start||"#"}function w1t(t,e){let r=t.match(/\[id=(.+?)\]/),n=t.match(/\[language=(.+?)\]/);return n?{id:r?r[1].trim():"",language:n[1].trim()}:zSe(t)&&typeof e=="string"?{id:r?r[1].trim():"",language:e}:void 0}});var O1t=m(WL=>{"use strict";Object.defineProperty(WL,"__esModule",{value:!0});WL.AlternativeXmlNotebookContentProvider=void 0;WL.isXmlContent=R1t;var Jtn=$Se(),Xtn=HW(),ern=u_(),GL=cc(),trn=DW(),rrn=VW(),xa=VL(),zL="<VSCode.Cell ",WW="<VSCode.Cell>",Qv="</VSCode.Cell>";function nrn(t){return`${zL}id="${t}" `}function WSe(t){return`${nrn(t.id)}language="${t.language}">`}function R1t(t){return t.includes(zL)||t.includes(Qv)||t.includes(WW)}var KW=class extends rrn.AlternativeNotebookDocument{constructor(e,r,n){super(e,n),this.cellOffsetMap=r}fromCellPosition(e,r){let n=(0,xa.summarize)(e),o=WSe(n),s=e.document.eol===GL.EndOfLine.LF?1:2,a=this.getText(),c=e.document.offsetAt(r),l=a.indexOf(o)+o.length+s+c;return this.positionAt(l)}toCellPosition(e){let r=this.offsetAt(e),n=(0,ern.findLast)(this.cellOffsetMap,s=>s.offset<=r);if(!n)return;let o=n.cell.document.positionAt(r-n.offset);return{cell:n.cell,position:o}}},KSe=class extends trn.BaseAlternativeNotebookContentProvider{constructor(){super("xml")}stripCellMarkers(e){let r=e.split(xa.EOL);return r.length&&(r[0].startsWith(zL)||r[0].startsWith(WW))&&r.shift(),r.length&&r[r.length-1].trim().endsWith(Qv)&&(r[r.length-1]=r[r.length-1].substring(0,r[r.length-1].lastIndexOf(Qv))),r.join(xa.EOL)}getSummaryOfStructure(e,r,n){let o=[],s=`// ${n}`;return e.getCells().forEach(a=>{if(r.includes(a)){let c=(0,xa.summarize)(a);o.push(WSe(c)),c.source.length&&c.source[0].trim().length?(o.push(c.source[0]),o.push(s)):c.source.length&&c.source.some(l=>l.trim().length)?c.source=[s,c.source.filter(l=>l.trim().length)[0],s]:o.push(s),o.push(Qv)}else(!o.length||o[o.length-1]!==s)&&o.push(s)}),o.join(xa.EOL)}async*parseAlternateContent(e,r,n){let o=!(0,Xtn.isUri)(e),s=o?(0,xa.getCellIdMap)(e):new Map,a=-1,c=!1,l=new Set,u=!1,d,f=o?(0,Jtn.getLanguage)((0,xa.getDefaultLanguage)(e)).languageId:void 0;for await(let p of r){if(n.isCancellationRequested)break;let h=p.value;if((h.startsWith(zL)||h.startsWith(WW))&&(a<0||c||u&&d)){!c&&u&&d&&(d.line=d.line.substring(0,d.line.lastIndexOf(Qv)),yield d,yield{type:"end",index:d.index}),u=!1,d=void 0,a+=1,c=!1;let _={type:"start",index:a,uri:void 0,language:void 0,kind:GL.NotebookCellKind.Code},g=P1t(h,f);g.id&&s.get(g.id)?.document.languageId===g.language?l.has(g.id)?g.id="":l.add(g.id):g.id="";let v=s.get(g.id)?.document.languageId===g.language?s.get(g.id):void 0;_.id=g.id,_.language=g.language,_.uri=v?.document.uri,_.kind=v?.kind||(_.language==="markdown"?GL.NotebookCellKind.Markup:GL.NotebookCellKind.Code),yield _}else h.startsWith(Qv)?(u&&d&&(yield d),c=!0,u=!1,d=void 0,yield{type:"end",index:a}):a>=0&&(u&&d&&(yield d,d=void 0),u=h.endsWith(Qv),u?d={type:"line",index:a,line:h}:yield{type:"line",index:a,line:h})}}getAlternativeDocumentFromText(e,r){let n=(0,xa.getCellIdMap)(r),o=[],s=e.split(xa.EOL),a=0;for(let c=0;c<s.length;c++){let l=s[c];if(l.startsWith(zL)||l.startsWith(WW)){let u=P1t(l,void 0),d=n.get(u.id)||r.getCells().find(f=>f.document.languageId===u.language&&!o.some(p=>p.cell===f));if(d){let f=xa.EOL.length,p=a+l.length+f;o.push({offset:p,cell:d})}}a+=l.length+xa.EOL.length}return new KW(e,o,r)}getAlternativeDocument(e,r){let o=e.getCells().filter(c=>r?c.kind!==GL.NotebookCellKind.Markup:!0).map(c=>(0,xa.summarize)(c)).map(c=>{let u=`${WSe(c)}${xa.EOL}`;return{content:`${u}${c.source.join(xa.EOL)}${xa.EOL}${Qv}`,prefix:u,cell:e.cellAt(c.index)}}),s=o.map(c=>c.content).join(xa.EOL),a=o.map(c=>({offset:s.indexOf(c.content)+c.prefix.length,cell:c.cell}));return new KW(s,a,e)}};WL.AlternativeXmlNotebookContentProvider=KSe;function P1t(t,e){let r=t.match(/id="([^"]+)"/),n=t.match(/language="([^"]+)"/);if(!n){if(R1t(t)&&typeof e=="string")return{id:r?r[1].trim():"",language:e};throw new Error(`Invalid cell part in ${t}`)}return{id:r?r[1].trim():"",language:n[1].trim()}}});var D1t=m(El=>{"use strict";var irn=El&&El.__decorate||function(t,e,r,n){var o=arguments.length,s=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(o<3?a(s):o>3?a(e,r,s):a(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},M1t=El&&El.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(El,"__esModule",{value:!0});El.AlternativeNotebookContentService=El.IAlternativeNotebookContentService=void 0;El.getAlternativeNotebookDocumentProvider=QSe;El.inferAlternativeNotebookContentFormat=drn;El.getAltNotebookRange=frn;var orn=Uz(),srn=Qe(),arn=cc(),N1t=Ni(),crn=lW(),lrn=Vo(),L1t=C1t(),urn=I1t(),k1t=O1t();function QSe(t){switch(t){case"xml":return new k1t.AlternativeXmlNotebookContentProvider;case"text":return new urn.AlternativeTextNotebookContentProvider;case"json":return new L1t.AlternativeJsonNotebookContentProvider;default:throw new Error(`Unsupported kind '${t}'`)}}function drn(t){return(0,k1t.isXmlContent)(t)?"xml":(0,L1t.isJsonContent)(t)?"json":"text"}El.IAlternativeNotebookContentService=(0,srn.createServiceIdentifier)("IAlternativeNotebookContentService");var YSe=class{constructor(e,r){this.configurationService=e,this.experimentationService=r}getFormat(e){return e&&(0,crn.modelPrefersJsonNotebookRepresentation)(e)?"json":this.configurationService.getExperimentBasedConfig(N1t.ConfigKey.Advanced.NotebookAlternativeDocumentFormat,this.experimentationService)}create(e){return QSe(e)}};El.AlternativeNotebookContentService=YSe;El.AlternativeNotebookContentService=YSe=irn([M1t(0,N1t.IConfigurationService),M1t(1,lrn.IExperimentationService)],YSe);function frn(t,e,r,n){let o=(0,orn.findCell)(e,r);if(!o)return;let s=QSe(n).getAlternativeDocument(r);return new arn.Range(s.fromCellPosition(o,t.start),s.fromCellPosition(o,t.end))}});var q1t=m(KL=>{"use strict";Object.defineProperty(KL,"__esModule",{value:!0});KL.NotebookDocumentSnapshot=void 0;KL.isNotebookDocumentSnapshotJSON=mrn;var YW=Ol(),prn=Bi(),ZSe=cc(),U1t=D1t(),hrn=VL();function mrn(t){return!t||typeof t!="object"?!1:t.type==="notebook"&&(0,prn.isUriComponents)(t.uri)&&(0,YW.isString)(t._text)&&(0,YW.isString)(t.languageId)&&(0,YW.isNumber)(t.version)&&(0,YW.isString)(t.alternativeFormat)}var JSe=class t{static create(e,r){let n=e.uri,o=e.version,s=(0,U1t.getAlternativeNotebookDocumentProvider)(r).getAlternativeDocument(e);return new t(e,n,o,r,s)}static fromNewText(e,r){let n=(0,U1t.getAlternativeNotebookDocumentProvider)(r.alternativeFormat).getAlternativeDocumentFromText(e,r.document);return new t(r.document,r.uri,r.version,r.alternativeFormat,n)}static fromJSON(e,r){return t.create(e,r.alternativeFormat)}constructor(e,r,n,o,s){this.alternativeFormat=o,this._alternativeDocument=s,this.type="notebook",this.document=e,this.uri=r,this.version=n,this.languageId=o==="text"?(0,hrn.getDefaultLanguage)(e)||"python":o}getText(e){return this._alternativeDocument.getText(e)}getSelection(){return new ZSe.Selection(0,0,this.lineCount,0)}getWholeRange(){return new ZSe.Range(0,0,this.lineCount,0)}get lines(){return this._alternativeDocument.lines}get lineCount(){return this._alternativeDocument.lineCount}lineAt(e){let r;if(e instanceof ZSe.Position)r=e.line;else if(typeof e=="number")r=e;else throw new Error("Invalid argument");if(r<0||r>=this.lines.length)throw new Error("Illegal value for `line`");return this._alternativeDocument.lineAt(r)}offsetAt(e){return this._alternativeDocument.offsetAt(e)}positionAt(e){return this._alternativeDocument.positionAt(e)}validateRange(e){return this._alternativeDocument.validateRange(e)}validatePosition(e){return this._alternativeDocument.validatePosition(e)}toJSON(){return{type:"notebook",uri:this.uri.toJSON(),languageId:this.languageId,version:this.version,_text:this._alternativeDocument.getText(),alternativeFormat:this.alternativeFormat}}};KL.NotebookDocumentSnapshot=JSe});var ebe=m(uc=>{"use strict";var grn=uc&&uc.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),_rn=uc&&uc.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),vrn=uc&&uc.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),o=0;o<n.length;o++)n[o]!=="default"&&grn(r,e,n[o]);return _rn(r,e),r}})();Object.defineProperty(uc,"__esModule",{value:!0});uc.NullWorkspaceService=uc.AbstractWorkspaceService=uc.IWorkspaceService=void 0;uc.getWorkspaceFileDisplayPath=xrn;var yrn=Uz(),Ern=Qe(),Trn=vrn(Nl()),F1t=E_(),Srn=Bi(),brn=q1t(),Crn=LSe(),Arn=Ar(),Zv=Fi();uc.IWorkspaceService=(0,Ern.createServiceIdentifier)("IWorkspaceService");var QW=class{asRelativePath(e,r){let n,o="";if(typeof e=="string"?(n=Srn.URI.file(e),o=e):typeof e<"u"&&(n=e,o=e.fsPath),!n)return o;let s=this.getWorkspaceFolder(n);if(!s)return o;typeof r>"u"&&(r=this.getWorkspaceFolders().length>1);let a=(0,F1t.relativePath)(s,n);return r&&(a=`${this.getWorkspaceFolderName(s)}/${a}`),a}async openTextDocumentAndSnapshot(e){let r=await this.openTextDocument(e);return Crn.TextDocumentSnapshot.create(r)}async openNotebookDocumentAndSnapshot(e,r){let n=(0,yrn.findNotebook)(e,this.notebookDocuments)||await this.openNotebookDocument(e);return brn.NotebookDocumentSnapshot.create(n,r)}getWorkspaceFolder(e){return this.getWorkspaceFolders().find(r=>F1t.extUriBiasedIgnorePathCase.isEqualOrParent(e,r))}};uc.AbstractWorkspaceService=QW;function xrn(t,e){let r=t.getWorkspaceFolder(e);return r?Trn.posix.relative(r.path,e.path):e.path}var XSe=class extends QW{constructor(e=[],r=[],n=[]){super(),this.disposables=new Arn.DisposableStore,this.didOpenTextDocumentEmitter=this.disposables.add(new Zv.Emitter),this.didCloseTextDocumentEmitter=this.disposables.add(new Zv.Emitter),this.didOpenNotebookDocumentEmitter=this.disposables.add(new Zv.Emitter),this.didCloseNotebookDocumentEmitter=this.disposables.add(new Zv.Emitter),this.didChangeTextDocumentEmitter=this.disposables.add(new Zv.Emitter),this.didChangeWorkspaceFoldersEmitter=this.disposables.add(new Zv.Emitter),this.didChangeNotebookDocumentEmitter=this.disposables.add(new Zv.Emitter),this.didChangeTextEditorSelectionEmitter=this.disposables.add(new Zv.Emitter),this.onDidChangeTextDocument=this.didChangeTextDocumentEmitter.event,this.onDidCloseTextDocument=this.didCloseTextDocumentEmitter.event,this.onDidOpenNotebookDocument=this.didOpenNotebookDocumentEmitter.event,this.onDidCloseNotebookDocument=this.didCloseNotebookDocumentEmitter.event,this.onDidOpenTextDocument=this.didOpenTextDocumentEmitter.event,this.onDidChangeWorkspaceFolders=this.didChangeWorkspaceFoldersEmitter.event,this.onDidChangeNotebookDocument=this.didChangeNotebookDocumentEmitter.event,this.onDidChangeTextEditorSelection=this.didChangeTextEditorSelectionEmitter.event,this._textDocuments=[],this._notebookDocuments=[],this.workspaceFolder=e,this._textDocuments=r,this._notebookDocuments=n}get textDocuments(){return this._textDocuments}showTextDocument(e){return Promise.resolve()}async openTextDocument(e){let r=this.textDocuments.find(n=>n.uri.toString()===e.toString());if(r)return r;throw new Error(`Unknown document: ${e}`)}async openNotebookDocument(e,r){if(typeof e=="string")throw new Error("Not implemented");{let n=this.notebookDocuments.find(o=>o.uri.toString()===e.toString());if(n)return n;throw new Error(`Unknown notebook: ${e}`)}}get notebookDocuments(){return this._notebookDocuments}getWorkspaceFolders(){return this.workspaceFolder}getWorkspaceFolderName(e){return"default"}ensureWorkspaceIsFullyLoaded(){return Promise.resolve()}showWorkspaceFolderPicker(){return Promise.resolve(void 0)}applyEdit(){return Promise.resolve(!0)}dispose(){this.disposables.dispose()}};uc.NullWorkspaceService=XSe});var B1t=m(hC=>{"use strict";Object.defineProperty(hC,"__esModule",{value:!0});hC.BatchedProcessor=hC.TaskQueue=void 0;hC.raceFilter=wrn;var tbe=Ua(),j1t=Gr(),rbe=class{constructor(){this._runningTask=void 0,this._pendingTasks=[]}schedule(e){let r=new tbe.DeferredPromise;return this._pendingTasks.push({task:e,deferred:r,setUndefinedWhenCleared:!1}),this._runIfNotRunning(),r.p}scheduleSkipIfCleared(e){let r=new tbe.DeferredPromise;return this._pendingTasks.push({task:e,deferred:r,setUndefinedWhenCleared:!0}),this._runIfNotRunning(),r.p}_runIfNotRunning(){this._runningTask===void 0&&this._processQueue()}async _processQueue(){if(this._pendingTasks.length===0)return;let e=this._pendingTasks.shift();if(e){if(this._runningTask)throw new j1t.BugIndicatingError;this._runningTask=e.task;try{let r=await e.task();e.deferred.complete(r)}catch(r){e.deferred.error(r)}finally{this._runningTask=void 0,this._processQueue()}}}clearPending(){let e=this._pendingTasks;this._pendingTasks=[];for(let r of e)r.setUndefinedWhenCleared?r.deferred.complete(void 0):r.deferred.error(new j1t.CancellationError)}};hC.TaskQueue=rbe;var nbe=class{constructor(e,r){this._fn=e,this._waitingTimeMs=r,this._queue=[],this._timeout=null}request(e){this._timeout===null&&(this._timeout=setTimeout(()=>this._flush(),this._waitingTimeMs));let r=new tbe.DeferredPromise;return this._queue.push({arg:e,promise:r}),r.p}async _flush(){let e=this._queue;this._queue=[],this._timeout=null;let r=e.map(o=>o.arg),n;try{n=await this._fn(r)}catch(o){for(let s of e)s.promise.error(o);return}for(let[o,s]of n.entries())e[o].promise.complete(s)}};hC.BatchedProcessor=nbe;function wrn(t,e){return new Promise((r,n)=>{if(t.length===0){r(void 0);return}let o=!1,s=t.length;for(let a of t)a.then(c=>{s--,o||(e(c)?(o=!0,r(c)):s===0&&r(void 0))}).catch(n)})}});var V1t=m(fu=>{"use strict";Object.defineProperty(fu,"__esModule",{value:!0});fu.LineWithTokens=fu.Token=void 0;fu.getOrDeduceSelectionFromLastEdit=Prn;fu.clipTokensToRange=$1t;fu.clipTokensToRangeAndAdjustOffsets=Orn;fu.removeTokensInRangeAndAdjustOffsets=Mrn;fu.getTokensFromLogProbs=Nrn;fu.getTokensFromLinesWithTokens=Lrn;fu.mergeOffsetRangesAtDistance=krn;var Irn=Gr(),CR=zi();function Prn(t){let e=new CR.OffsetRange(0,0);return t.lastSelectionInAfterEdit&&!t.lastSelectionInAfterEdit.equals(e)?t.documentAfterEdits.getTransformer().getRange(t.lastSelectionInAfterEdit):Rrn(t)}function Rrn(t){let e=t.recentEdits.edits.at(-1);if(e===void 0)return null;let r=e.replacements.at(-1);if(r===void 0)return null;let n=r.replaceRange,s=r.newText.length-n.length,a=n.endExclusive+s;return t.documentAfterEdits.getTransformer().getRange(new CR.OffsetRange(a,a))}var ZW=class t{get id(){return this.text+"_"+this.range.toString()}constructor(e,r,n){this.text=e,this.value=r,this.range=new CR.OffsetRange(n,n+e.length)}equals(e){return this.range.equals(e.range)&&this.text===e.text}deltaOffset(e){return new t(this.text,this.value,this.range.start+e)}};fu.Token=ZW;function $1t(t,e){return t.filter(r=>e.intersects(r.range))}function Orn(t,e){return $1t(t,e).map(r=>r.deltaOffset(-e.start))}function Mrn(t,e){let r=[];for(let n of t)e.containsRange(n.range)||(n.range.start>e.start&&(n=n.deltaOffset(-e.length)),r.push(n));return r}function Nrn(t,e){let r=e;return t.content.map(n=>{let o=new ZW(n.token,n.logprob,r);return r+=o.range.length,o})}var ibe=class t{static stringEquals(e,r){return e._text===r._text}static fromText(e,r){r=r??[];let n=[];for(;;){let o=e.indexOf(`\r
`),s=e.indexOf(`
`),a=o===-1?s:s===-1?o:Math.min(o,s),c=o!==-1?`\r
`:s===-1?void 0:`
`;if(c===void 0){n.push(new t(e,r,`
`));break}let l=a+c.length,u=e.substring(0,a),d=r.filter(f=>f.range.start<l&&f.range.endExclusive>0);n.push(new t(u,d,c)),e=e.substring(l),r=r.map(f=>f.deltaOffset(-l)).filter(f=>f.range.endExclusive>0)}return n}get text(){return this._text}get tokens(){return this._tokens}get length(){return this._text.length}get lengthWithEOL(){return this._text.length+this._eol.length}get eol(){return this._eol}constructor(e,r,n){this._text=e,this._tokens=r,this._eol=n}trim(){return this.trimStart().trimEnd()}trimStart(){let e=this._text.trimStart(),r=this._text.length-e.length,n=this._tokens.map(o=>o.deltaOffset(-r)).filter(o=>o.range.endExclusive>0);return new t(e,n,this._eol)}trimEnd(){let e=this._text.trimEnd(),r=this._tokens.filter(n=>n.range.start<e.length);return new t(e,r,this._eol)}substring(e,r){let n=this._text.substring(e,r),o=this._tokens.map(s=>s.deltaOffset(-e)).filter(s=>s.range.endExclusive>0&&s.range.start<n.length);return new t(n,o,this._eol)}stringEquals(e){return t.stringEquals(this,e)}equals(e){return this._text===e.text&&this._tokens.length===e.tokens.length&&this._tokens.every((r,n)=>r.equals(e.tokens[n]))}dropTokens(e){return new t(this._text,this._tokens.filter(r=>!e.some(n=>r.equals(n))),this._eol)}findTokens(e){return this._tokens.filter(e)}};fu.LineWithTokens=ibe;function Lrn(t){let e=0,r=[];for(let s of t){let a=s.text+s.eol;r.push(...s.tokens.map(c=>c.deltaOffset(e))),e+=a.length}let n=[],o=new Set;for(let s of r)o.has(s.id)||(o.add(s.id),n.push(s));return n}function krn(t,e){if(e<0)throw new Irn.BugIndicatingError("Distance must be positive");let r=t.map(o=>new CR.OffsetRange(o.start-e,o.endExclusive+e)),n=new CR.OffsetRangeSet;for(let o of r)n.addRange(o);return n.ranges.map(o=>new CR.OffsetRange(o.start+e,o.endExclusive-e))}});var H1t=m(JW=>{"use strict";Object.defineProperty(JW,"__esModule",{value:!0});JW.DelaySession=void 0;var obe=class{constructor(e,r,n=Date.now()){this.baseDebounceTime=e,this.expectedTotalTime=r,this.providerInvocationTime=n,this.extraDebounce=0}setExtraDebounce(e){this.extraDebounce=e}getDebounceTime(){let r=(this.expectedTotalTime===void 0?this.baseDebounceTime:Math.min(this.baseDebounceTime,this.expectedTotalTime))+this.extraDebounce,n=Date.now()-this.providerInvocationTime;return Math.max(0,r-n)}getArtificialDelay(){if(this.expectedTotalTime===void 0)return 0;let e=Date.now()-this.providerInvocationTime;return Math.max(0,this.expectedTotalTime-e)}};JW.DelaySession=obe});var z1t=m(xg=>{"use strict";var Drn=xg&&xg.__decorate||function(t,e,r,n){var o=arguments.length,s=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(o<3?a(s):o>3?a(e,r,s):a(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},G1t=xg&&xg.__param||function(t,e){return function(r,n){e(r,n,t)}},XW;Object.defineProperty(xg,"__esModule",{value:!0});xg.UserInteractionMonitor=void 0;var eK=Ni(),sbe=S1(),Urn=Vo(),qrn=H1t(),abe=class{static{XW=this}static{this.MAX_INTERACTIONS_CONSIDERED=10}constructor(e,r){this._configurationService=e,this._experimentationService=r,this._recentUserActions=[]}handleAcceptance(){this._recordUserAction("accepted")}handleRejection(){this._recordUserAction("rejected")}_recordUserAction(e){this._recentUserActions.push({time:Date.now(),kind:e}),this._recentUserActions=this._recentUserActions.slice(-XW.MAX_INTERACTIONS_CONSIDERED)}createDelaySession(e){let r=this._configurationService.getExperimentBasedConfig(eK.ConfigKey.TeamInternal.InlineEditsDebounce,this._experimentationService),o=this._configurationService.getExperimentBasedConfig(eK.ConfigKey.TeamInternal.InlineEditsBackoffDebounceEnabled,this._experimentationService)?this._getExpectedTotalTime(r):void 0;return new qrn.DelaySession(r,o,e)}_getExpectedTotalTime(e){let c=Date.now(),l=1;for(let d of this._recentUserActions){let f=c-d.time;if(f>6e5)continue;let p=Math.exp(-f/6e5),h=d.kind==="rejected"?1.5:.8;l*=1+(h-1)*p}let u=e*l;return u=Math.min(3e3,Math.max(50,u)),u}getAggressivenessLevel(){let e=this._configurationService.getExperimentBasedConfig(eK.ConfigKey.TeamInternal.InlineEditsXtabAggressivenessLevel,this._experimentationService);if(e!==void 0)return e;let r=this._getUserHappinessScore();return r>=.7?sbe.AggressivenessLevel.High:r>=.4?sbe.AggressivenessLevel.Medium:sbe.AggressivenessLevel.Low}_getUserHappinessScore(){if(this._recentUserActions.length===0)return .5;let e=0,r=0;for(let s=0;s<this._recentUserActions.length;s++){let a=this._recentUserActions[s],c=s+1,l=a.kind==="accepted"?1:0;e+=l*c,r+=c}let n=r>0?e/r:.5,o=this._recentUserActions.length/XW.MAX_INTERACTIONS_CONSIDERED;return .5+(n-.5)*o}};xg.UserInteractionMonitor=abe;xg.UserInteractionMonitor=abe=XW=Drn([G1t(0,eK.IConfigurationService),G1t(1,Urn.IExperimentationService)],abe)});var W1t=m(cbe=>{"use strict";Object.defineProperty(cbe,"__esModule",{value:!0});cbe.isImportStatement=Frn;function Frn(t,e){switch(e){case"java":return!!t.match(/^\s*import\s/);case"typescript":case"typescriptreact":case"javascript":case"javascriptreact":return!!t.match(/^\s*import[\s{*]|^\s*[var|const|let].*=\s*require\(/);case"php":return!!t.match(/^\s*use/);case"rust":return!!t.match(/^\s*use\s+[\w:{}, ]+\s*(as\s+\w+)?;/);case"python":return!!t.match(/^\s*from\s+[\w.]+\s+import\s+[\w, *]+$/)||!!t.match(/^\s*import\s+[\w, ]+$/);default:return!1}}});var Y1t=m(tK=>{"use strict";Object.defineProperty(tK,"__esModule",{value:!0});tK.IgnoreImportChangesAspect=void 0;var jrn=Ui(),K1t=W1t(),lbe=class t{static isImportChange(e,r,n){return e.newLines.some(o=>(0,K1t.isImportStatement)(o,r))||Brn(e,n).some(o=>(0,K1t.isImportStatement)(o,r))}static filterEdit(e,r){let n=e.languageId;return r.filter(s=>!t.isImportChange(s,n,e.documentLinesBeforeEdit))}};tK.IgnoreImportChangesAspect=lbe;function Brn(t,e){return(0,jrn.coalesce)(t.lineRange.mapToLineArray(r=>e[r-1]))}});var nK=m(rK=>{"use strict";Object.defineProperty(rK,"__esModule",{value:!0});rK.DocumentId=void 0;var $rn=g8(),Q1t=Nl(),Vrn=Bi(),ube=class t{static{this._cache=new $rn.CachedFunction({getCacheKey:JSON.stringify},e=>new t(e.uri))}static create(e){return t._cache.get({uri:e})}constructor(e){this.uri=e,this._uri=Vrn.URI.parse(this.uri)}get path(){return this._uri.path}get fragment(){return this._uri.fragment}toString(){return this.uri}get baseName(){return(0,Q1t.basename)(this.uri)}get extension(){return(0,Q1t.extname)(this.uri)}toUri(){return this._uri}};rK.DocumentId=ube});var iK=m(AR=>{"use strict";Object.defineProperty(AR,"__esModule",{value:!0});AR.ResponseTags=AR.PromptTags=void 0;var Z1t;(function(t){t.CURSOR="<|cursor|>";function e(r){return{start:`<|${r}|>`,end:`<|/${r}|>`}}t.EDIT_WINDOW=e("code_to_edit"),t.AREA_AROUND=e("area_around_code_to_edit"),t.CURRENT_FILE=e("current_file_content"),t.EDIT_HISTORY=e("edit_diff_history"),t.RECENT_FILES=e("recently_viewed_code_snippets"),t.RECENT_FILE=e("recently_viewed_code_snippet")})(Z1t||(AR.PromptTags=Z1t={}));var J1t;(function(t){t.NO_CHANGE={start:"<NO_CHANGE>"},t.EDIT={start:"<EDIT>",end:"</EDIT>"},t.INSERT={start:"<INSERT>",end:"</INSERT>"}})(J1t||(AR.ResponseTags=J1t={}))});var pbe=m(vs=>{"use strict";Object.defineProperty(vs,"__esModule",{value:!0});vs.N_LINES_AS_CONTEXT=vs.N_LINES_BELOW=vs.N_LINES_ABOVE=vs.PromptPieces=void 0;vs.getUserPrompt=Yrn;vs.toUniquePath=aK;vs.buildCodeSnippetsUsingPagedClipping=nvt;vs.countTokensForLines=cK;vs.truncateCode=inn;vs.clipPreservingRange=ovt;vs.createTaggedCurrentFileContentUsingPagedClipping=svt;vs.constructTaggedFile=onn;var Hrn=nK(),Grn=og(),wg=S1(),tvt=PW(),sK=jP(),oK=Ui(),zrn=qi(),Wrn=Gr(),Krn=oE(),X1t=Wl(),rvt=zi(),ko=iK(),dbe=class{constructor(e,r,n,o,s,a,c,l,u,d,f){this.currentDocument=e,this.editWindowLinesRange=r,this.areaAroundEditWindowLinesRange=n,this.activeDoc=o,this.xtabHistory=s,this.taggedCurrentDocLines=a,this.areaAroundCodeToEdit=c,this.langCtx=l,this.aggressivenessLevel=u,this.computeTokens=d,this.opts=f}};vs.PromptPieces=dbe;function Yrn(t){let{activeDoc:e,xtabHistory:r,taggedCurrentDocLines:n,areaAroundCodeToEdit:o,langCtx:s,aggressivenessLevel:a,computeTokens:c,opts:l}=t,u=n.join(`
`),{codeSnippets:d,documents:f}=rnn(e,r,s,c,l);f.add(e.id);let p=enn(e,r,f,c,l.diffHistory),h=Xrn(s),_=aK(e.id,e.workspaceRoot?.path),g=t.opts.includePostScript?Jrn(l.promptingStrategy,_,a):"",v=`${ko.PromptTags.RECENT_FILES.start}
${d}
${ko.PromptTags.RECENT_FILES.end}

${ko.PromptTags.CURRENT_FILE.start}
current_file_path: ${_}
${u}
${ko.PromptTags.CURRENT_FILE.end}

${ko.PromptTags.EDIT_HISTORY.start}
${p}
${ko.PromptTags.EDIT_HISTORY.end}

${o}`,y=l.promptingStrategy!==wg.PromptingStrategy.Nes41Miniv3&&l.promptingStrategy!==wg.PromptingStrategy.Codexv21NesUnified?Qrn(v):v;return(Zrn(h,y,l.languageContext.traitPosition)+g).trim()}function Qrn(t){return`\`\`\`
${t}
\`\`\``}function Zrn(t,e,r){return r==="before"?evt(t,e,2):evt(e,t,2)}function evt(t,e,r){let n=0;for(let s=t.length-1;s>=0&&t[s]===`
`;s--)n++;for(let s=0;s<e.length&&e[s]===`
`;s++)n++;let o=Math.max(0,r-n);return(t+`
`.repeat(o)+e).trim()}function Jrn(t,e,r){let n;switch(t){case wg.PromptingStrategy.Codexv21NesUnified:break;case wg.PromptingStrategy.UnifiedModel:n=`The developer was working on a section of code within the tags \`code_to_edit\` in the file located at \`${e}\`. Using the given \`recently_viewed_code_snippets\`, \`current_file_content\`, \`edit_diff_history\`, \`area_around_code_to_edit\`, and the cursor position marked as \`${ko.PromptTags.CURSOR}\`, please continue the developer's work. Update the \`code_to_edit\` section by predicting and completing the changes they would have made next. Start your response with <EDIT>, <INSERT>, or <NO_CHANGE>. If you are making an edit, start with <EDIT> and then provide the rewritten code window followed by </EDIT>. If you are inserting new code, start with <INSERT> and then provide only the new code that will be inserted at the cursor position followed by </INSERT>. If no changes are necessary, reply only with <NO_CHANGE>. Avoid undoing or reverting the developer's last change unless there are obvious typos or errors.`;break;case wg.PromptingStrategy.Nes41Miniv3:n=`The developer was working on a section of code within the tags <|code_to_edit|> in the file located at \`${e}\`. Using the given \`recently_viewed_code_snippets\`, \`current_file_content\`, \`edit_diff_history\`, \`area_around_code_to_edit\`, and the cursor position marked as \`<|cursor|>\`, please continue the developer's work. Update the <|code_to_edit|> section by predicting and completing the changes they would have made next. Start your response with <EDIT> or <NO_CHANGE>. If you are making an edit, start with <EDIT> and then provide the rewritten code window followed by </EDIT>. If no changes are necessary, reply only with <NO_CHANGE>. Avoid undoing or reverting the developer's last change unless there are obvious typos or errors.`;break;case wg.PromptingStrategy.Xtab275:n=`The developer was working on a section of code within the tags \`code_to_edit\` in the file located at \`${e}\`. Using the given \`recently_viewed_code_snippets\`, \`current_file_content\`, \`edit_diff_history\`, \`area_around_code_to_edit\`, and the cursor position marked as \`${ko.PromptTags.CURSOR}\`, please continue the developer's work. Update the \`code_to_edit\` section by predicting and completing the changes they would have made next. Provide the revised code that was between the \`${ko.PromptTags.EDIT_WINDOW.start}\` and \`${ko.PromptTags.EDIT_WINDOW.end}\` tags, but do not include the tags themselves. Avoid undoing or reverting the developer's last change unless there are obvious typos or errors. Don't include the line numbers or the form #| in your response. Do not skip any lines. Do not be lazy.`;break;case wg.PromptingStrategy.XtabAggressiveness:n=`<|aggressive|>${r}<|/aggressive|>`;break;case wg.PromptingStrategy.SimplifiedSystemPrompt:case wg.PromptingStrategy.CopilotNesXtab:case void 0:n=`The developer was working on a section of code within the tags \`code_to_edit\` in the file located at \`${e}\`. Using the given \`recently_viewed_code_snippets\`, \`current_file_content\`, \`edit_diff_history\`, \`area_around_code_to_edit\`, and the cursor position marked as \`${ko.PromptTags.CURSOR}\`, please continue the developer's work. Update the \`code_to_edit\` section by predicting and completing the changes they would have made next. Provide the revised code that was between the \`${ko.PromptTags.EDIT_WINDOW.start}\` and \`${ko.PromptTags.EDIT_WINDOW.end}\` tags with the following format, but do not include the tags themselves.
\`\`\`
// Your revised code goes here
\`\`\``;break;default:(0,zrn.assertNever)(t)}return n===void 0?"":`

${n}`}function Xrn(t){if(t===void 0)return"";let e=t.items.filter(n=>n.context.kind===tvt.ContextKind.Trait).map(n=>n.context);if(e.length===0)return"";let r=[];for(let n of e)r.push(`${n.name}: ${n.value}`);return`Consider this related information:
${r.join(`
`)}`}function enn(t,e,r,n,{onlyForDocsInPrompt:o,maxTokens:s,nEntries:a,useRelativePaths:c}){let l=c?t.workspaceRoot?.path:void 0,u=e.slice().reverse(),d=s,f=[];for(let _ of u){if(f.length>=a)break;if(_.kind==="visibleRanges"||o&&!r.has(_.docId))continue;let g=tnn(_,l);if(g===null)continue;let v=n(g);if(d-=v,d<0)break;f.push(g)}let p=f.reverse(),h=p.join(`

`);return p.length>0&&(h+=`
`),h}function tnn(t,e){let r=[],n=Grn.RootedEdit.toLineEdit(t.edit);for(let c of n.replacements){let l=t.edit.base.getLines().slice(c.lineRange.startLineNumber-1,c.lineRange.endLineNumberExclusive-1),u=c.newLines;if(l.filter(f=>f.trim().length>0).length===0&&u.filter(f=>f.trim().length>0).length===0)continue;let d=c.lineRange.startLineNumber-1;r.push(`@@ -${d},${l.length} +${d},${u.length} @@`),(0,oK.pushMany)(r,l.map(f=>`-${f}`)),(0,oK.pushMany)(r,u.map(f=>`+${f}`))}if(r.length===0)return null;let o=aK(t.docId,e),s=[`--- ${o}`,`+++ ${o}`];return(0,oK.pushMany)(s,r),s.join(`
`)}function aK(t,e){let r=t.path,n=e===void 0?void 0:e.endsWith("/")?e:e+"/",o=n!==void 0&&r.startsWith(n)?r.substring(n.length):r;return t.toUri().scheme===Krn.Schemas.vscodeNotebookCell?`${o}#${t.fragment}`:o}function fbe(t,e,r=!1){let n=aK(t,void 0),o=r?`code_snippet_file_path: ${n} (truncated)`:`code_snippet_file_path: ${n}`;return[ko.PromptTags.RECENT_FILE.start,o,e,ko.PromptTags.RECENT_FILE.end].join(`
`)}function rnn(t,e,r,n,o){let{includeViewedFiles:s,nDocuments:a}=o.recentlyViewedDocuments,c=[];for(let p=e.length-1,h=new Set;p>=0;--p){let _=e[p];if(!(!s&&_.kind==="visibleRanges")&&!(_.docId===t.id||h.has(_.docId))&&(c.push(_),h.add(_.docId),c.length>=a))break}let l=c.map(p=>({id:p.docId,content:p.kind==="edit"?p.edit.edit.applyOnText(p.edit.base):p.documentContent,visibleRanges:p.kind==="visibleRanges"?p.visibleRanges:void 0})),{snippets:u,docsInPrompt:d}=nvt(l,n,o),f=o.languageContext.maxTokens;if(r)for(let p of r.items){if(p.onTimeout)continue;let h=p.context;if(h.kind===tvt.ContextKind.Snippet){let _=h.value,g=f-n(_);if(g<0)break;let v=h.uri,E=Hrn.DocumentId.create(v.toString()),y=fbe(E,h.value,!1);u.push(y),f=g}}return{codeSnippets:u.join(`

`),documents:d}}function nvt(t,e,r){let n=r.pagedClipping?.pageSize;if(n===void 0)throw(0,Wrn.illegalArgument)("Page size must be defined");let o=[],s=new Set,a=r.recentlyViewedDocuments.maxTokens;for(let c of t){let l=c.content.getLines(),u=nnn(l,n);if(c.visibleRanges===void 0){let d=a,f=[];for(let p of u){let h=d-cK(p,e);if(h<0)break;f.push(...p),d=h}if(f.length>0){let p=f.length!==l.length;s.add(c.id),o.push(fbe(c.id,f.join(`
`),p))}a=d}else{let d=c.visibleRanges,f=Math.min(...d.map(S=>S.start)),p=Math.max(...d.map(S=>S.endExclusive-1)),h=c.content.getTransformer(),_=h.getPosition(f),g=h.getPosition(p),{firstPageIdx:v,lastPageIdx:E,budgetLeft:y}=ivt(c.content.getLines(),new rvt.OffsetRange(_.lineNumber-1,g.lineNumber),n,a,e,!1);if(y===a)break;{let S=c.content.getLines().slice(v*n,(E+1)*n);s.add(c.id),o.push(fbe(c.id,S.join(`
`),S.length<l.length)),a=y}}}return{snippets:o.reverse(),docsInPrompt:s}}function cK(t,e){return t.reduce((r,n)=>r+e(n)+1,0)}function*nnn(t,e){for(let r=0;r<t.length;r+=e)yield t.slice(r,r+e)}function inn(t,e,r){if(!t.length)return[0,0];let n=r*4,o=0,s=e?t.length-1:0;for(;o<n;)if(o+=t[s].length+1,e){if(s--,s<0)break}else if(s++,s>=t.length)break;return e?[s+1,t.length]:[0,s]}vs.N_LINES_ABOVE=2;vs.N_LINES_BELOW=5;vs.N_LINES_AS_CONTEXT=15;function ivt(t,e,r,n,o,s){let a=Math.ceil(t.length/r);function c(p){let h=p*r,_=Math.min(h+r,t.length),g=t.slice(h,_);return cK(g,o)}let l=Math.floor(e.start/r),u=Math.floor((e.endExclusive-1)/r),d=n-(0,oK.range)(l,u+1).reduce((p,h)=>p+c(h),0);if(d<0)return{firstPageIdx:l,lastPageIdx:u,budgetLeft:d};let f=d;if(s){f=d;for(let p=l-1;p>=0&&f>0;--p){let h=c(p),_=f-h;if(_<0)break;l=p,f=_}for(let p=u+1;p<=a&&f>0;++p){let h=c(p),_=f-h;if(_<0)break;u=p,f=_}}else{let p=Math.floor(d/2);f=p;for(let h=l-1;h>=0&&f>0;--h){let _=c(h),g=f-_;if(g<0)break;l=h,f=g}f=p;for(let h=u+1;h<=a&&f>0;++h){let _=c(h),g=f-_;if(g<0)break;u=h,f=g}}return{firstPageIdx:l,lastPageIdx:u,budgetLeft:f}}function ovt(t,e,r,n,o){let s=o.maxTokens-cK(t.slice(e.start,e.endExclusive),r);if(s<0)return sK.Result.error("outOfBudget");let{firstPageIdx:a,lastPageIdx:c}=ivt(t,e,n,s,r,o.prioritizeAboveCursor),l=a*n,u=c*n+n;return sK.Result.ok(new rvt.OffsetRange(l,u))}function svt(t,e,r,n,o,s){let a=ovt(t,r,n,o,s);if(a.isError())return sK.Result.error("outOfBudget");let c=a.val,l=[...t.slice(c.start,r.start),e,...t.slice(r.endExclusive,c.endExclusive)];return sK.Result.ok(l)}function onn(t,e,r,n,o,s){let a=X1t.StringEdit.single(X1t.StringReplacement.insert(t.cursorOffset,ko.PromptTags.CURSOR)).applyOnText(t.content).getLines(),c=g=>g.map((v,E)=>`${E}| ${v}`),l=s.includeLineNumbers.areaAroundCodeToEdit?c(a):a,u=l.slice(e.start,e.endExclusive),d=[ko.PromptTags.AREA_AROUND.start,...l.slice(r.start,e.start),ko.PromptTags.EDIT_WINDOW.start,...u,ko.PromptTags.EDIT_WINDOW.end,...l.slice(e.endExclusive,r.endExclusive),ko.PromptTags.AREA_AROUND.end].join(`
`),f=s.includeLineNumbers.currentFileContent?c(a):a,p=s.includeLineNumbers.currentFileContent?c(t.lines):t.lines,h;if(n.currentFile.includeTags&&s.includeLineNumbers.currentFileContent===s.includeLineNumbers.areaAroundCodeToEdit)h=d;else{let g=p.slice(e.start,e.endExclusive);h=[...f.slice(r.start,e.start),...g,...f.slice(e.endExclusive,r.endExclusive)].join(`
`)}return svt(p,h,r,o,n.pagedClipping.pageSize,n.currentFile).map(g=>({taggedCurrentDocLines:g,areaAroundCodeToEdit:d}))}});var avt=m(bd=>{"use strict";Object.defineProperty(bd,"__esModule",{value:!0});bd.xtab275SystemPrompt=bd.simplifiedPrompt=bd.nes41Miniv3SystemPrompt=bd.unifiedModelSystemPrompt=bd.systemPromptTemplate=void 0;var Jv=iK();bd.systemPromptTemplate=`Your role as an AI assistant is to help developers complete their code tasks by assisting in editing specific sections of code marked by the ${Jv.PromptTags.EDIT_WINDOW.start} and ${Jv.PromptTags.EDIT_WINDOW.end} tags, while adhering to Microsoft's content policies and avoiding the creation of content that violates copyrights.

You have access to the following information to help you make informed suggestions:

- recently_viewed_code_snippets: These are code snippets that the developer has recently looked at, which might provide context or examples relevant to the current task. They are listed from oldest to newest, with line numbers in the form #| to help you understand the edit diff history. It's possible these are entirely irrelevant to the developer's change.
- current_file_content: The content of the file the developer is currently working on, providing the broader context of the code. Line numbers in the form #| are included to help you understand the edit diff history.
- edit_diff_history: A record of changes made to the code, helping you understand the evolution of the code and the developer's intentions. These changes are listed from oldest to latest. It's possible a lot of old edit diff history is entirely irrelevant to the developer's change.
- area_around_code_to_edit: The context showing the code surrounding the section to be edited.
- cursor position marked as ${Jv.PromptTags.CURSOR}: Indicates where the developer's cursor is currently located, which can be crucial for understanding what part of the code they are focusing on.

Your task is to predict and complete the changes the developer would have made next in the ${Jv.PromptTags.EDIT_WINDOW.start} section. The developer may have stopped in the middle of typing. Your goal is to keep the developer on the path that you think they're following. Some examples include further implementing a class, method, or variable, or improving the quality of the code. Make sure the developer doesn't get distracted and ensure your suggestion is relevant. Consider what changes need to be made next, if any. If you think changes should be made, ask yourself if this is truly what needs to happen. If you are confident about it, then proceed with the changes.

# Steps

1. **Review Context**: Analyze the context from the resources provided, such as recently viewed snippets, edit history, surrounding code, and cursor location.
2. **Evaluate Current Code**: Determine if the current code within the tags requires any corrections or enhancements.
3. **Suggest Edits**: If changes are required, ensure they align with the developer's patterns and improve code quality.
4. **Maintain Consistency**: Ensure indentation and formatting follow the existing code style.

# Output Format

- Provide only the revised code within the tags. If no changes are necessary, simply return the original code from within the ${Jv.PromptTags.EDIT_WINDOW.start} and ${Jv.PromptTags.EDIT_WINDOW.end} tags.
- There are line numbers in the form #| in the code displayed to you above, but these are just for your reference. Please do not include the numbers of the form #| in your response.
- Ensure that you do not output duplicate code that exists outside of these tags. The output should be the revised code that was between these tags and should not include the ${Jv.PromptTags.EDIT_WINDOW.start} or ${Jv.PromptTags.EDIT_WINDOW.end} tags.

\`\`\`
// Your revised code goes here
\`\`\`

# Notes

- Apologize with "Sorry, I can't assist with that." for requests that may breach Microsoft content guidelines.
- Avoid undoing or reverting the developer's last change unless there are obvious typos or errors.
- Don't include the line numbers of the form #| in your response.`;bd.unifiedModelSystemPrompt=`Your role as an AI assistant is to help developers complete their code tasks by assisting in editing specific sections of code marked by the <|code_to_edit|> and <|/code_to_edit|> tags, while adhering to Microsoft's content policies and avoiding the creation of content that violates copyrights.

You have access to the following information to help you make informed suggestions:

- recently_viewed_code_snippets: These are code snippets that the developer has recently looked at, which might provide context or examples relevant to the current task. They are listed from oldest to newest. It's possible these are entirely irrelevant to the developer's change.
- current_file_content: The content of the file the developer is currently working on, providing the broader context of the code.
- edit_diff_history: A record of changes made to the code, helping you understand the evolution of the code and the developer's intentions. These changes are listed from oldest to latest. It's possible a lot of old edit diff history is entirely irrelevant to the developer's change.
- area_around_code_to_edit: The context showing the code surrounding the section to be edited.
- cursor position marked as <|cursor|>: Indicates where the developer's cursor is currently located, which can be crucial for understanding what part of the code they are focusing on.

Your task is to predict and complete the changes the developer would have made next in the <|code_to_edit|> section. The developer may have stopped in the middle of typing. Your goal is to keep the developer on the path that you think they're following. Some examples include further implementing a class, method, or variable, or improving the quality of the code. Make sure the developer doesn't get distracted and ensure your suggestion is relevant. Consider what changes need to be made next, if any. If you think changes should be made, ask yourself if this is truly what needs to happen. If you are confident about it, then proceed with the changes.

# Steps

1. **Review Context**: Analyze the context from the resources provided, such as recently viewed snippets, edit history, surrounding code, and cursor location.
2. **Evaluate Current Code**: Determine if the current code within the tags requires any corrections or enhancements.
3. **Suggest Edits**: If changes are required, ensure they align with the developer's patterns and improve code quality.
4. **Maintain Consistency**: Ensure indentation and formatting follow the existing code style.

# Output Format
- Your response should start with the word <EDIT>, <INSERT>, or <NO_CHANGE>.
- If your are making an edit, start with <EDIT>, then provide the rewritten code window, then </EDIT>.
- If you are inserting new code, start with <INSERT> and then provide only the new code that will be inserted at the cursor position, then </INSERT>.
- If no changes are necessary, reply only with <NO_CHANGE>.
- Ensure that you do not output duplicate code that exists outside of these tags. The output should be the revised code that was between these tags and should not include the <|code_to_edit|> or <|/code_to_edit|> tags.

# Notes

- Apologize with "Sorry, I can't assist with that." for requests that may breach Microsoft content guidelines.
- Avoid undoing or reverting the developer's last change unless there are obvious typos or errors.`;bd.nes41Miniv3SystemPrompt=`Your role as an AI assistant is to help developers complete their code tasks by assisting in editing specific sections of code marked by the <|code_to_edit|> and <|/code_to_edit|> tags, while adhering to Microsoft's content policies and avoiding the creation of content that violates copyrights.

You have access to the following information to help you make informed suggestions:

- recently_viewed_code_snippets: These are code snippets that the developer has recently looked at, which might provide context or examples relevant to the current task. They are listed from oldest to newest. It's possible these are entirely irrelevant to the developer's change.
- current_file_content: The content of the file the developer is currently working on, providing the broader context of the code.
- edit_diff_history: A record of changes made to the code, helping you understand the evolution of the code and the developer's intentions. These changes are listed from oldest to latest. It's possible a lot of old edit diff history is entirely irrelevant to the developer's change.
- area_around_code_to_edit: The context showing the code surrounding the section to be edited.
- cursor position marked as <|cursor|>: Indicates where the developer's cursor is currently located, which can be crucial for understanding what part of the code they are focusing on.

Your task is to predict and complete the changes the developer would have made next in the <|code_to_edit|> section. The developer may have stopped in the middle of typing. Your goal is to keep the developer on the path that you think they're following. Some examples include further implementing a class, method, or variable, or improving the quality of the code. Make sure the developer doesn't get distracted and ensure your suggestion is relevant. Consider what changes need to be made next, if any. If you think changes should be made, ask yourself if this is truly what needs to happen. If you are confident about it, then proceed with the changes.

# Steps

1. **Review Context**: Analyze the context from the resources provided, such as recently viewed snippets, edit history, surrounding code, and cursor location.
2. **Evaluate Current Code**: Determine if the current code within the tags requires any corrections or enhancements.
3. **Suggest Edits**: If changes are required, ensure they align with the developer's patterns and improve code quality.
4. **Maintain Consistency**: Ensure indentation and formatting follow the existing code style.

# Output Format
- Your response should start with the word <EDIT> or <NO_CHANGE>.
- If your are making an edit, start with <EDIT>, then provide the rewritten code window, then </EDIT>.
- If no changes are necessary, reply only with <NO_CHANGE>.
- Ensure that you do not output duplicate code that exists outside of these tags. The output should be the revised code that was between these tags and should not include the <|code_to_edit|> or <|/code_to_edit|> tags.

# Notes

- Apologize with "Sorry, I can't assist with that." for requests that may breach Microsoft content guidelines.
- Avoid undoing or reverting the developer's last change unless there are obvious typos or errors.`;bd.simplifiedPrompt="Predict next code edit based on the context given by the user.";bd.xtab275SystemPrompt=`Predict the next code edit based on user context, following Microsoft content policies and avoiding copyright violations. If a request may breach guidelines, reply: "Sorry, I can't assist with that."`});var cvt=m(lK=>{"use strict";Object.defineProperty(lK,"__esModule",{value:!0});lK.CurrentDocument=void 0;var hbe=class{constructor(e,r){this.content=e,this.cursorPosition=r,this.lines=e.getLines(),this.transformer=e.getTransformer(),this.cursorOffset=this.transformer.getOffset(r),this.cursorLineOffset=this.cursorPosition.lineNumber-1}};lK.CurrentDocument=hbe});var lvt=m(Ig=>{"use strict";var snn=Ig&&Ig.__decorate||function(t,e,r,n){var o=arguments.length,s=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(o<3?a(s):o>3?a(e,r,s):a(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},a0=Ig&&Ig.__param||function(t,e){return function(r,n){e(r,n,t)}},uK;Object.defineProperty(Ig,"__esModule",{value:!0});Ig.XtabEndpoint=void 0;var ann=ha(),cnn=yg(),mbe=Ni(),lnn=tl(),unn=Hv(),dnn=lC(),fnn=pa(),pnn=tu(),hnn=Vo(),mnn=qa(),gnn=oC(),_nn=sR(),vnn=Nr(),gbe=class extends dnn.ChatEndpoint{static{uK=this}static{this.chatModelInfo={id:"xtab-4o-mini-finetuned",name:"xtab-4o-mini-finetuned",model_picker_enabled:!1,is_chat_default:!1,is_chat_fallback:!1,version:"unknown",capabilities:{type:"chat",family:"xtab-4o-mini-finetuned",tokenizer:_nn.TokenizerType.O200K,limits:{max_prompt_tokens:12285,max_output_tokens:4096},supports:{streaming:!0,parallel_tool_calls:!1,tool_calls:!1,vision:!1,prediction:!0}}}}constructor(e,r,n,o,s,a,c,l,u,d,f,p,h,_){let g=n?{...uK.chatModelInfo,id:n}:uK.chatModelInfo;super(g,s,c,a,l,u,d,f,p,o,h,_),this._url=e,this._apiKey=r,this._configService=o}get urlOrRequestMetadata(){return this._configService.getConfig(mbe.ConfigKey.TeamInternal.InlineEditsXtabProviderUrl)||this._url}getExtraHeaders(){let e=this._configService.getConfig(mbe.ConfigKey.TeamInternal.InlineEditsXtabProviderApiKey)||this._apiKey;if(!e){let r=`Missing API key for custom URL (${this.urlOrRequestMetadata}). Provide the API key using vscode setting \`github.copilot.chat.advanced.inlineEdits.xtabProvider.apiKey\` or, if in simulations using \`--nes-api-key\` or \`--config-file\``;throw console.error(r),new Error(r)}return{Authorization:`Bearer ${e}`,"api-key":e}}};Ig.XtabEndpoint=gbe;Ig.XtabEndpoint=gbe=uK=snn([a0(3,mbe.IConfigurationService),a0(4,unn.IDomainService),a0(5,pnn.IFetcherService),a0(6,lnn.ICAPIClientService),a0(7,mnn.ITelemetryService),a0(8,ann.IAuthenticationService),a0(9,cnn.IChatMLFetcher),a0(10,gnn.ITokenizerProvider),a0(11,vnn.IInstantiationService),a0(12,hnn.IExperimentationService),a0(13,fnn.ILogService)],gbe)});var vbe=m(xR=>{"use strict";Object.defineProperty(xR,"__esModule",{value:!0});xR.toLines=ynn;xR.linesWithBackticksRemoved=Enn;xR.constructMessages=Tnn;xR.charCount=Snn;var _be=ul(),uvt=SL(),dvt=Ua();function ynn(t){return new dvt.AsyncIterableObject(async e=>{let r="";for await(let n of t){r+=n.delta.text;let o=r.split(/\r?\n/);r=o.pop()??"",e.emitMany(o)}r&&e.emitOne(r)})}function Enn(t){return new dvt.AsyncIterableObject(async e=>{let r=-1,n;for await(let o of t)if(++r,n&&(e.emitOne(n),n=void 0),o.match(/^```[a-z]*$/)){if(r===0)continue;n=o}else e.emitOne(o)})}function Tnn({systemMsg:t,userMsg:e}){return[{role:_be.Raw.ChatRole.System,content:(0,uvt.toTextParts)(t)},{role:_be.Raw.ChatRole.User,content:(0,uvt.toTextParts)(e)}]}function Snn(t){return t.reduce((r,n)=>r+n.content.reduce((o,s)=>o+(s.type===_be.Raw.ChatCompletionContentPartKind.Text?s.text.length:0),0),0)}});var fvt=m(Pg=>{"use strict";var bnn=Pg&&Pg.__decorate||function(t,e,r,n){var o=arguments.length,s=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(o<3?a(s):o>3?a(e,r,s):a(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},ybe=Pg&&Pg.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(Pg,"__esModule",{value:!0});Pg.XtabNextCursorPredictor=void 0;var Cnn=(nP(),cn(rP)),Ebe=vg(),gC=Ni(),Ann=lC(),YL=Aj(),xnn=Vo(),wnn=fg(),mC=jP(),Inn=sR(),Pnn=qi(),Rnn=Oh(),Onn=Nr(),Tbe=pbe(),Mnn=vbe(),Sbe=class{constructor(e,r,n,o){this.computeTokens=e,this.instaService=r,this.configService=n,this.expService=o,this.isDisabled=!1}determineEnablement(){if(this.isDisabled)return;let e=this.configService.getExperimentBasedConfig(gC.ConfigKey.TeamInternal.InlineEditsNextCursorPredictionEnabled,this.expService);switch(e){case YL.NextCursorLinePrediction.OnlyWithEdit:case YL.NextCursorLinePrediction.Jump:case void 0:return e;case YL.NextCursorLinePrediction.LabelOnlyWithEdit:return YL.NextCursorLinePrediction.OnlyWithEdit;case!0:return YL.NextCursorLinePrediction.OnlyWithEdit;case!1:return;default:(0,Pnn.assertNever)(e)}}async predictNextCursorPosition(e,r){let n=r.sub("predictNextCursorPosition"),o="Your task is to predict the next line number in the current file where the developer is most likely to make their next edit, using the provided context. If you don't think anywhere is a good next line jump target, just output the current line number of the cursor. Make sure to just output the line number and nothing else (no explanation, reasoning, etc.).",s=this.configService.getExperimentBasedConfig(gC.ConfigKey.Advanced.InlineEditsNextCursorPredictionCurrentFileMaxTokens,this.expService),a=(0,Tbe.constructTaggedFile)(e.currentDocument,e.editWindowLinesRange,e.areaAroundEditWindowLinesRange,{...e.opts,currentFile:{...e.opts.currentFile,maxTokens:s,includeTags:!1}},this.computeTokens,{includeLineNumbers:{areaAroundCodeToEdit:!1,currentFileContent:!0}});if(a.isError())return n.trace(`Failed to construct tagged file: ${a.err}`),mC.Result.fromString(a.err);let{taggedCurrentDocLines:c,areaAroundCodeToEdit:l}=a.val,u=new Tbe.PromptPieces(e.currentDocument,e.editWindowLinesRange,e.areaAroundEditWindowLinesRange,e.activeDoc,e.xtabHistory,c,l,e.langCtx,e.aggressivenessLevel,this.computeTokens,{...e.opts,includePostScript:!1}),d=(0,Tbe.getUserPrompt)(u),f=(0,Mnn.constructMessages)({systemMsg:o,userMsg:d}),p=this.configService.getExperimentBasedConfig(gC.ConfigKey.TeamInternal.InlineEditsNextCursorPredictionModelName,this.expService);if(p===void 0)return n.trace("Model name for cursor prediction is not defined; skipping prediction"),mC.Result.fromString("modelNameNotDefined");let h=this.configService.getConfig(gC.ConfigKey.TeamInternal.InlineEditsNextCursorPredictionUrl),_=this.configService.getConfig(gC.ConfigKey.TeamInternal.InlineEditsNextCursorPredictionApiKey),g=this.instaService.createInstance(Ann.ChatEndpoint,{id:p,name:"nes.nextCursorPosition",urlOrRequestMetadata:h||{type:Cnn.RequestType.ProxyChatCompletions},model_picker_enabled:!1,is_chat_default:!1,is_chat_fallback:!1,version:"",capabilities:{type:"chat",family:"",tokenizer:Inn.TokenizerType.CL100K,limits:void 0,supports:{parallel_tool_calls:!1,tool_calls:!1,streaming:!0,vision:!1,prediction:!1,thinking:!1}}}),E={max_tokens:this.configService.getExperimentBasedConfig(gC.ConfigKey.TeamInternal.InlineEditsNextCursorPredictionMaxResponseTokens,this.expService)};_&&(E={...E,secretKey:_});let y=await g.makeChatRequest2({messages:f,debugName:"nes.nextCursorPosition",finishedCb:void 0,location:Ebe.ChatLocation.Other,requestOptions:E},Rnn.CancellationToken.None);if(y.type!==Ebe.ChatFetchResponseType.Success)return y.type===Ebe.ChatFetchResponseType.NotFound&&(n.trace("Next cursor position prediction endpoint not found; disabling predictor for current session."),this.isDisabled=!0),mC.Result.fromString(`fetchError:${y.type}`);try{let S=y.value.trim(),b=parseInt(S,10);return isNaN(b)?mC.Result.fromString("gotNaN"):b<0?mC.Result.fromString("negativeLineNumber"):mC.Result.ok(b)}catch(S){return n.trace(`Failed to parse predicted line number from response '${y.value}': ${S}`),mC.Result.fromString(`failedToParseLine:"${y.value}". Error ${(0,wnn.fromUnknown)(S).message}`)}}};Pg.XtabNextCursorPredictor=Sbe;Pg.XtabNextCursorPredictor=Sbe=bnn([ybe(1,Onn.IInstantiationService),ybe(2,gC.IConfigurationService),ybe(3,xnn.IExperimentationService)],Sbe)});var yvt=m(Ia=>{"use strict";var Nnn=Ia&&Ia.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),Lnn=Ia&&Ia.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),knn=Ia&&Ia.__decorate||function(t,e,r,n){var o=arguments.length,s=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(o<3?a(s):o>3?a(e,r,s):a(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},gvt=Ia&&Ia.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),o=0;o<n.length;o++)n[o]!=="default"&&Nnn(r,e,n[o]);return Lnn(r,e),r}})(),oh=Ia&&Ia.__param||function(t,e){return function(r,n){e(r,n,t)}},pu;Object.defineProperty(Ia,"__esModule",{value:!0});Ia.XtabProvider=void 0;Ia.findMergeConflictMarkersRange=vvt;var Dnn=yg(),mo=vg(),Mr=Ni(),Unn=sSe(),qnn=G_t(),Fnn=GS(),bbe=Aj(),wa=gvt(S1()),jnn=S1(),Bnn=wW(),$nn=Wle(),Mn=vve(),dK=W_t(),_vt=fV(),Vnn=IW(),pvt=PW(),Hnn=gSe(),Gnn=Vo(),znn=ebe(),Wnn=B1t(),Xv=gvt(fg()),Ei=jP(),QL=qi(),ZL=Ua(),Knn=H2(),JL=uI(),hvt=tf(),mvt=Ya(),fK=um(),hK=zi(),Ynn=Nr(),Qnn=cc(),Znn=V1t(),Jnn=z1t(),Xnn=Y1t(),Rg=pbe(),XL=avt(),ey=iK(),ein=cvt(),tin=lvt(),rin=fvt(),pK=vbe(),Cbe=class{static{pu=this}static{this.ID=Mr.XTabProviderId}static{this.computeTokens=e=>Math.floor(e.length/4)}constructor(e,r,n,o,s,a,c,l,u,d){this.modelService=e,this.simulationCtx=r,this.instaService=n,this.workspaceService=o,this.diffService=s,this.configService=a,this.expService=c,this.langCtxService=l,this.langDiagService=u,this.ignoreService=d,this.ID=pu.ID,this.dependsOnSelection=!0,this.showNextEditPreference="always",this.forceUseDefaultModel=!1,this.userInteractionMonitor=new Jnn.UserInteractionMonitor(this.configService,this.expService),this.nextCursorPredictor=this.instaService.createInstance(rin.XtabNextCursorPredictor,pu.computeTokens)}handleAcceptance(){this.userInteractionMonitor.handleAcceptance()}handleRejection(){this.userInteractionMonitor.handleRejection()}provideNextEdit(e,r,n,o,s){let a=c=>{if(c.isError()){r(c);return}let{edit:l}=c.val;this.filterEdit(e.getActiveDocument(),[l]).length!==0&&r(c)};return this._provideNextEdit(e,a,n,o,s)}filterEdit(e,r){let n=[s=>Xnn.IgnoreImportChangesAspect.filterEdit(e,s),s=>dK.IgnoreEmptyLineAndLeadingTrailingWhitespaceChanges.filterEdit(e,s)];this.configService.getExperimentBasedConfig(Mr.ConfigKey.InlineEditsAllowWhitespaceOnlyChanges,this.expService)||n.push(s=>dK.IgnoreWhitespaceOnlyChanges.filterEdit(e,s));let o=this.configService.getExperimentBasedConfig(Mr.ConfigKey.TeamInternal.InlineEditsUndoInsertionFiltering,this.expService);if(o!==void 0){let s;switch(o){case"v1":s=dK.editWouldDeleteWhatWasJustInserted;break;case"v2":s=dK.editWouldDeleteWhatWasJustInserted2;break;default:(0,QL.assertNever)(o)}n.push(a=>s(e,new JL.LineEdit(a))?[]:a)}return n.reduce((s,a)=>a(s),r)}async _provideNextEdit(e,r,n,o,s){let a=new Mn.StatelessNextEditTelemetryBuilder(e);o.setProviderStartTime();try{if(e.xtabEditHistory.length===0)return Mn.StatelessNextEditResult.noEdit(new Mn.NoNextEditReason.ActiveDocumentHasNoEdits,a);let c=this.userInteractionMonitor.createDelaySession(e.providerRequestStartDateTime),l=await this.doGetNextEdit(e,r,c,n,o,s,a,0);return l.isError()&&l.err instanceof Mn.NoNextEditReason.GotCancelled&&o.setIsSkipped(),new Mn.StatelessNextEditResult(l,a.build(l))}catch(c){return Mn.StatelessNextEditResult.noEdit(new Mn.NoNextEditReason.Unexpected(Xv.fromUnknown(c)),a)}finally{o.setProviderEndTime()}}async doGetNextEdit(e,r,n,o,s,a,c,l){return this.doGetNextEditWithSelection(e,(0,Znn.getOrDeduceSelectionFromLastEdit)(e.getActiveDocument()),r,n,o,s,a,c,l)}async doGetNextEditWithSelection(e,r,n,o,s,a,c,l,u){let d=s.sub(["XtabProvider","doGetNextEditWithSelection"]),f=e.getActiveDocument();if(r===null)return Ei.Result.error(new Mn.NoNextEditReason.Uncategorized(new Error("NoSelection")));let p=this.determineModelConfiguration(f),h=this.getEndpoint(p.modelName);a.setEndpointInfo(typeof h.urlOrRequestMetadata=="string"?h.urlOrRequestMetadata:JSON.stringify(h.urlOrRequestMetadata.type),h.model),l.setModelName(h.model);let _=new hvt.Position(r.endLineNumber,r.endColumn),g=new ein.CurrentDocument(f.documentAfterEdits,_),E=g.lines[g.cursorLineOffset].substring(_.column-1).match(/^\s*$/)!==null;E?(d.trace("Debouncing for cursor at end of line"),o.setExtraDebounce(this.configService.getExperimentBasedConfig(Mr.ConfigKey.TeamInternal.InlineEditsExtraDebounceEndOfLine,this.expService))):d.trace("Debouncing for cursor NOT at end of line"),l.setIsCursorAtLineEnd(E);let y=this.computeAreaAroundEditWindowLinesRange(g),S=this.computeEditWindowLinesRange(g,e,u,d,l),b=Math.max(0,g.cursorLineOffset-S.start),w=g.transformer.getLineLength(S.endExclusive),P=g.transformer.getOffsetRange(new mvt.Range(S.start+1,1,S.endExclusive,w+1)),A=g.lines.slice(S.start,S.endExclusive),O=this.configService.getExperimentBasedConfig(Mr.ConfigKey.TeamInternal.InlineEditsXtabEditWindowMaxTokens,this.expService);if(O!==void 0&&(0,Rg.countTokensForLines)(A,pu.computeTokens)>O)return Ei.Result.error(new Mn.NoNextEditReason.PromptTooLarge("editWindow"));let j=!A.some(He=>He.includes(ey.PromptTags.CURSOR)),$=(0,Rg.constructTaggedFile)(g,S,y,p,pu.computeTokens,{includeLineNumbers:{areaAroundCodeToEdit:!1,currentFileContent:p.promptingStrategy===jnn.PromptingStrategy.XtabAggressiveness}});if($.isError())return Ei.Result.error(new Mn.NoNextEditReason.PromptTooLarge("currentFile"));let{taggedCurrentDocLines:Q,areaAroundCodeToEdit:K}=$.val;l.setNLinesOfCurrentFileInPrompt(Q.length);let N=this.userInteractionMonitor.getAggressivenessLevel(),G=await this.getAndProcessLanguageContext(e,o,f,_,p,d,a,c);if(c.isCancellationRequested)return Ei.Result.error(new Mn.NoNextEditReason.GotCancelled("afterLanguageContextAwait"));let Y=new Rg.PromptPieces(g,S,y,f,e.xtabEditHistory,Q,K,G,N,pu.computeTokens,p),J=(0,Rg.getUserPrompt)(Y),ie=wa.ResponseFormat.fromPromptingStrategy(p.promptingStrategy),oe=this.getPredictedOutput(A,ie),ne=(0,pK.constructMessages)({systemMsg:this.pickSystemPrompt(p.promptingStrategy),userMsg:J});a.setPrompt(ne),l.setPrompt(ne);let de=3e4*4;if((0,pK.charCount)(ne)>de)return Ei.Result.error(new Mn.NoNextEditReason.PromptTooLarge("final"));if(await this.debounce(o,d,l),c.isCancellationRequested)return Ei.Result.error(new Mn.NoNextEditReason.GotCancelled("afterDebounce"));e.fetchIssued=!0;let Me=_.column;return this.streamEdits(e,n,h,ne,P,A,b,Me,S,Y,oe,{shouldRemoveCursorTagFromResponse:j,responseFormat:ie,retryState:u},o,d,l,a,c),Ei.Result.ok(void 0)}getAndProcessLanguageContext(e,r,n,o,s,a,c,l){let u=this.configService.getConfig(Mr.ConfigKey.TeamInternal.InlineEditsLogContextRecorderEnabled);if(!s.languageContext.enabled&&!u)return Promise.resolve(void 0);let d=this.getLanguageContext(e,r,n,o,a,c,l);return u&&(c.setFileDiagnostics(this.langDiagService.getAllDiagnostics()),d.then(f=>{f&&c.setLanguageContext(f)})),s.languageContext.enabled?d:Promise.resolve(void 0)}async getLanguageContext(e,r,n,o,s,a,c){try{let l=this.workspaceService.textDocuments.find(S=>S.uri.toString()===n.id.uri);if(l===void 0||this.langCtxService.getContextProviders(l,_vt.ProviderTarget.NES).length<1)return;let d=r.getDebounceTime(),f=new Qnn.Position(o.lineNumber-1,o.column-1),p={opportunityId:e.opportunityId,completionId:e.id,documentContext:{uri:l.uri.toString(),languageId:l.languageId,version:l.version,offset:l.offsetAt(f),position:f},activeExperiments:new Map,timeBudget:d,timeoutEnd:Date.now()+d,source:"nes"},h=async S=>{let b=[S.uri,...S.additionalUris??[]];return!!await(0,Wnn.raceFilter)(b.map(P=>this.ignoreService.isCopilotIgnored(P)),P=>P)},_=[],g=async()=>{let S=this.langCtxService.getContextItems(l,p,c);for await(let b of S)b.kind===pvt.ContextKind.Snippet&&await h(b)||_.push({context:b,timeStamp:Date.now(),onTimeout:!1})},v=Date.now();await(0,ZL.raceTimeout)(g(),d);let E=Date.now(),y=this.langCtxService.getContextItemsOnTimeout(l,p);for(let S of y)S.kind===pvt.ContextKind.Snippet&&await h(S)||_.push({context:S,timeStamp:E,onTimeout:!0});return{start:v,end:E,items:_}}catch(l){a.setError(Xv.fromUnknown(l)),s.trace(`Failed to fetch language context: ${l}`);return}}async streamEdits(e,r,n,o,s,a,c,l,u,d,f,p,h,_,g,v,E){let y=_.sub("streamEdits"),S=this.configService.getExperimentBasedConfig(Mr.ConfigKey.NextEditSuggestionsFetcher,this.expService)||void 0,b=new Dnn.FetchStreamSource,w=new Knn.StopWatch,P="",A,O,L=new ZL.DeferredPromise;g.setFetchStartedAt(),v.setFetchStartTime();let j=n.makeChatRequest2({debugName:pu.ID,messages:o,finishedCb:async(Y,J,ie)=>{L.isSettled||L.complete(),O===void 0&&Y!==""&&(O=w.elapsed(),v.addLog(`TTFT ${O} ms`)),b.update(Y,ie),P=Y,v.setResponse(P)},location:mo.ChatLocation.Other,source:void 0,requestOptions:{temperature:0,stream:!0,prediction:f},userInitiatedRequest:void 0,telemetryProperties:{requestId:e.id},useFetcher:S},E);g.setResponse(j.then(Y=>({response:Y,ttft:O}))),v.setFullResponse(j.then(Y=>Y.type===mo.ChatFetchResponseType.Success?Y.value:void 0));let $=await Promise.race([L.p,j]);if($&&$.type!==mo.ChatFetchResponseType.Success){if($.type===mo.ChatFetchResponseType.NotFound&&!this.forceUseDefaultModel)return this.forceUseDefaultModel=!0,this.doGetNextEdit(e,r,h,y,v,E,g,p.retryState);r(Ei.Result.error(pu.mapChatFetcherErrorToNoNextEditReason($)));return}j.then(Y=>{A=Y.type!==mo.ChatFetchResponseType.Success?Y:void 0}).catch(Y=>{v.setError(Xv.fromUnknown(Y)),v.addLog("ChatMLFetcher fetch call threw -- this's UNEXPECTED!"),r(Ei.Result.error(new Mn.NoNextEditReason.Unexpected(Xv.fromUnknown(Y))))}).finally(()=>{v.setFetchEndTime(),L.isSettled||L.complete(),b.resolve(),v.setResponse(P)});let Q=(0,pK.toLines)(b.stream),K=(()=>{let Y=0;return Q.map(J=>{let ie=`Line ${Y++} emitted with latency ${w.elapsed()} ms`;return y.trace(ie),p.shouldRemoveCursorTagFromResponse?J.replaceAll(ey.PromptTags.CURSOR,""):J})})(),N;if(p.responseFormat===wa.ResponseFormat.EditWindowOnly)N=K;else if(p.responseFormat===wa.ResponseFormat.UnifiedWithXml){let Y=K[Symbol.asyncIterator](),J=await Y.next();if(A!==void 0){r(Ei.Result.error(new Mn.NoNextEditReason.Unexpected(Xv.fromUnknown(A))));return}if(J.done){r(Ei.Result.error(new Mn.NoNextEditReason.NoSuggestions(e.documentBeforeEdits,s)));return}let ie=J.value.trim();if(ie===ey.ResponseTags.NO_CHANGE.start){await this.pushNoSuggestionsOrRetry(e,s,d,r,h,y,v,E,g,p.retryState);return}if(ie===ey.ResponseTags.INSERT.start){let oe=await Y.next();if(oe.done||oe.value.includes(ey.ResponseTags.INSERT.end)){r(Ei.Result.error(new Mn.NoNextEditReason.NoSuggestions(e.documentBeforeEdits,s)));return}let ne=new JL.LineReplacement(new fK.LineRange(u.start+c+1,u.start+c+2),[a[c].slice(0,l-1)+oe.value+a[c].slice(l-1)]);r(Ei.Result.ok({edit:ne,window:s}));let de=[],Ee=await Y.next();for(;!Ee.done&&!Ee.value.includes(ey.ResponseTags.INSERT.end);)de.push(Ee.value),Ee=await Y.next();let Me=u.start+c+2;r(Ei.Result.ok({edit:new JL.LineReplacement(new fK.LineRange(Me,Me),de),window:s})),r(Ei.Result.error(new Mn.NoNextEditReason.NoSuggestions(e.documentBeforeEdits,s)));return}if(ie===ey.ResponseTags.EDIT.start)N=new ZL.AsyncIterableObject(async oe=>{let ne=await Y.next();for(;!ne.done;){if(ne.value.includes(ey.ResponseTags.EDIT.end))return;oe.emitOne(ne.value),ne=await Y.next()}});else{r(Ei.Result.error(new Mn.NoNextEditReason.Unexpected(new Error(`unexpected tag ${ie}`))));return}}else p.responseFormat===wa.ResponseFormat.CodeBlock?N=(0,pK.linesWithBackticksRemoved)(K):(0,QL.assertNever)(p.responseFormat);let G={emitFastCursorLineChange:this.configService.getExperimentBasedConfig(Mr.ConfigKey.TeamInternal.InlineEditsXtabProviderEmitFastCursorLineChange,this.expService),nLinesToConverge:this.configService.getExperimentBasedConfig(Mr.ConfigKey.TeamInternal.InlineEditsXtabNNonSignificantLinesToConverge,this.expService),nSignificantLinesToConverge:this.configService.getExperimentBasedConfig(Mr.ConfigKey.TeamInternal.InlineEditsXtabNSignificantLinesToConverge,this.expService)};y.trace(`starting to diff stream against edit window lines with latency ${w.elapsed()} ms`),(async()=>{let Y=0,J=!1;try{for await(let oe of $nn.ResponseProcessor.diff(a,N,c,G)){y.trace(`ResponseProcessor streamed edit #${Y} with latency ${w.elapsed()} ms`);let ne=[];if(oe.lineRange.startLineNumber===oe.lineRange.endLineNumberExclusive||oe.newLines.length===0||oe.lineRange.endLineNumberExclusive-oe.lineRange.startLineNumber===1&&oe.newLines.length===1){let de=new JL.LineReplacement(new fK.LineRange(oe.lineRange.startLineNumber+u.start,oe.lineRange.endLineNumberExclusive+u.start),oe.newLines);ne.push(de)}else{let de=a.slice(oe.lineRange.startLineNumber-1,oe.lineRange.endLineNumberExclusive-1).join(`
`),Ee=await this.diffService.computeDiff(de,oe.newLines.join(`
`),{ignoreTrimWhitespace:!1,maxComputationTimeMs:0,computeMoves:!1});y.trace(`Ran diff for #${Y} with latency ${w.elapsed()} ms`);let Me=u.start+oe.lineRange.startLineNumber;for(let He of Ee.changes){let Je=new JL.LineReplacement(new fK.LineRange(Me+He.original.startLineNumber-1,Me+He.original.endLineNumberExclusive-1),oe.newLines.slice(He.modified.startLineNumber-1,He.modified.endLineNumberExclusive-1));ne.push(Je)}}if(A)break;v.setResponse(P);for(let de of ne){if(y.trace(`pushing edit #${Y}:
${de.toString()}`),!J){J=!0;let Ee=this.determineArtificialDelayMs(h,y,g);if(Ee&&(await(0,ZL.timeout)(Ee),y.trace(`Artificial delay of ${Ee} ms completed`),E.isCancellationRequested)){r(Ei.Result.error(new Mn.NoNextEditReason.GotCancelled("afterArtificialDelay")));return}}r(Ei.Result.ok({edit:de,window:s})),Y++}}if(A){r(Ei.Result.error(pu.mapChatFetcherErrorToNoNextEditReason(A)));return}Y>0?r(Ei.Result.error(new Mn.NoNextEditReason.NoSuggestions(e.documentBeforeEdits,s))):await this.pushNoSuggestionsOrRetry(e,s,d,r,h,y,v,E,g,p.retryState)}catch(ie){v.setError(ie),r(Ei.Result.error(new Mn.NoNextEditReason.Unexpected(Xv.fromUnknown(ie))))}})()}async pushNoSuggestionsOrRetry(e,r,n,o,s,a,c,l,u,d){if(this.configService.getExperimentBasedConfig(Mr.ConfigKey.TeamInternal.InlineEditsXtabProviderRetryWithNMoreLinesBelow,this.expService)&&d===0&&e.expandedEditWindowNLines===void 0){this.doGetNextEdit(e,o,s,a,c,l,u,1);return}let p=this.nextCursorPredictor.determineEnablement();if(p!==void 0&&d===0){let h=await this.nextCursorPredictor.predictNextCursorPosition(n,a);if(l.isCancellationRequested){o(Ei.Result.error(new Mn.NoNextEditReason.NoSuggestions(e.documentBeforeEdits,r)));return}if(h.isError())a.trace(`Predicted next cursor line error: ${h.err.message}`),u.setNextCursorLineError(h.err.message);else{let _=h.val,g=_-n.currentDocument.cursorLineOffset;if(u.setNextCursorLineDistance(g),a.trace(`Predicted next cursor line: ${_}`),_>=n.currentDocument.lines.length)a.trace("Predicted next cursor line error: exceedsDocumentLines"),u.setNextCursorLineError("exceedsDocumentLines");else if(n.editWindowLinesRange.contains(_))a.trace("Predicted next cursor line error: withinEditWindow"),u.setNextCursorLineError("withinEditWindow");else{let v=_+1,y=(n.activeDoc.documentAfterEditsLines.at(_)?.length??0)+1;switch(p){case bbe.NextCursorLinePrediction.Jump:{let S=new hvt.Position(v,y);o(Ei.Result.error(new Mn.NoNextEditReason.NoSuggestions(e.documentBeforeEdits,r,S)));return}case bbe.NextCursorLinePrediction.OnlyWithEdit:case bbe.NextCursorLinePrediction.LabelOnlyWithEdit:{this.doGetNextEditWithSelection(e,new mvt.Range(v,y,v,y),o,s,a,c,l,u,1);return}default:(0,QL.assertNever)(p)}}}}o(Ei.Result.error(new Mn.NoNextEditReason.NoSuggestions(e.documentBeforeEdits,r)))}computeAreaAroundEditWindowLinesRange(e){let r=e.cursorLineOffset,n=Math.max(0,r-Rg.N_LINES_AS_CONTEXT),o=Math.min(e.lines.length,r+Rg.N_LINES_AS_CONTEXT+1);return new hK.OffsetRange(n,o)}computeEditWindowLinesRange(e,r,n,o,s){let a=e.lines,c=e.cursorLineOffset,l;if(this.configService.getExperimentBasedConfig(Mr.ConfigKey.TeamInternal.InlineEditsXtabProviderUseVaryingLinesAbove,this.expService)){l=0;for(let _=0;_<8;++_){let g=c-_;if(g<0)break;if(a[g].trim()!==""){l=_;break}}}else l=this.configService.getExperimentBasedConfig(Mr.ConfigKey.TeamInternal.InlineEditsXtabProviderNLinesAbove,this.expService)??Rg.N_LINES_ABOVE;let u;if(r.expandedEditWindowNLines!==void 0)o.trace(`Using expanded nLinesBelow: ${r.expandedEditWindowNLines}`),u=r.expandedEditWindowNLines;else{let h=this.configService.getExperimentBasedConfig(Mr.ConfigKey.TeamInternal.InlineEditsXtabProviderNLinesBelow,this.expService);h!==void 0?(o.trace(`Using overridden nLinesBelow: ${h}`),u=h):(o.trace(`Using default nLinesBelow: ${Rg.N_LINES_BELOW}`),u=Rg.N_LINES_BELOW)}n===1&&(u+=this.configService.getExperimentBasedConfig(Mr.ConfigKey.TeamInternal.InlineEditsXtabProviderRetryWithNMoreLinesBelow,this.expService)??0);let d=Math.max(0,c-l),f=Math.min(a.length,c+u+1),p=this.configService.getExperimentBasedConfig(Mr.ConfigKey.TeamInternal.InlineEditsXtabMaxMergeConflictLines,this.expService);if(p){let h=new hK.OffsetRange(d,f),_=vvt(a,h,p);if(_){let g=this.configService.getExperimentBasedConfig(Mr.ConfigKey.TeamInternal.InlineEditsXtabOnlyMergeConflictLines,this.expService);s.setMergeConflictExpanded(g?"only":"normal"),g?(o.trace(`Expanding edit window to include ONLY merge conflict markers: ${_.toString()}`),d=_.start,f=_.endExclusive):(o.trace(`Expanding edit window to include merge conflict markers: ${_.toString()}; edit window range [${d}, ${f})`),f=Math.max(f,_.endExclusive))}}return new hK.OffsetRange(d,f)}static mapChatFetcherErrorToNoNextEditReason(e){switch(e.type){case mo.ChatFetchResponseType.Canceled:return new Mn.NoNextEditReason.GotCancelled("afterFetchCall");case mo.ChatFetchResponseType.OffTopic:case mo.ChatFetchResponseType.Filtered:case mo.ChatFetchResponseType.PromptFiltered:case mo.ChatFetchResponseType.Length:case mo.ChatFetchResponseType.RateLimited:case mo.ChatFetchResponseType.QuotaExceeded:case mo.ChatFetchResponseType.ExtensionBlocked:case mo.ChatFetchResponseType.AgentUnauthorized:case mo.ChatFetchResponseType.AgentFailedDependency:case mo.ChatFetchResponseType.InvalidStatefulMarker:return new Mn.NoNextEditReason.Uncategorized(Xv.fromUnknown(e));case mo.ChatFetchResponseType.BadRequest:case mo.ChatFetchResponseType.NotFound:case mo.ChatFetchResponseType.Failed:case mo.ChatFetchResponseType.NetworkError:case mo.ChatFetchResponseType.Unknown:return new Mn.NoNextEditReason.FetchFailure(Xv.fromUnknown(e))}}determineModelConfiguration(e){if(this.forceUseDefaultModel){let s={modelName:void 0,...wa.DEFAULT_OPTIONS},a=this.modelService.defaultModelConfiguration();return pu.overrideModelConfig(s,a)}let r={modelName:void 0,promptingStrategy:void 0,currentFile:{maxTokens:this.configService.getExperimentBasedConfig(Mr.ConfigKey.TeamInternal.InlineEditsXtabCurrentFileMaxTokens,this.expService),includeTags:this.configService.getExperimentBasedConfig(Mr.ConfigKey.TeamInternal.InlineEditsXtabIncludeTagsInCurrentFile,this.expService),prioritizeAboveCursor:this.configService.getExperimentBasedConfig(Mr.ConfigKey.TeamInternal.InlineEditsXtabPrioritizeAboveCursor,this.expService)},pagedClipping:{pageSize:this.configService.getExperimentBasedConfig(Mr.ConfigKey.TeamInternal.InlineEditsXtabPageSize,this.expService)},recentlyViewedDocuments:{nDocuments:this.configService.getExperimentBasedConfig(Mr.ConfigKey.TeamInternal.InlineEditsXtabNRecentlyViewedDocuments,this.expService),maxTokens:this.configService.getExperimentBasedConfig(Mr.ConfigKey.TeamInternal.InlineEditsXtabRecentlyViewedDocumentsMaxTokens,this.expService),includeViewedFiles:this.configService.getExperimentBasedConfig(Mr.ConfigKey.TeamInternal.InlineEditsXtabIncludeViewedFiles,this.expService)},languageContext:this.determineLanguageContextOptions(e.languageId,{enabled:this.configService.getExperimentBasedConfig(Mr.ConfigKey.TeamInternal.InlineEditsXtabLanguageContextEnabled,this.expService),enabledLanguages:this.configService.getConfig(Mr.ConfigKey.TeamInternal.InlineEditsXtabLanguageContextEnabledLanguages),enabledDiagnostics:this.configService.getExperimentBasedConfig(Mr.ConfigKey.Advanced.DiagnosticsContextProvider,this.expService),maxTokens:this.configService.getExperimentBasedConfig(Mr.ConfigKey.TeamInternal.InlineEditsXtabLanguageContextMaxTokens,this.expService),traitPosition:this.configService.getExperimentBasedConfig(Mr.ConfigKey.TeamInternal.InlineEditsXtabLanguageContextTraitsPosition,this.expService)}),diffHistory:{nEntries:this.configService.getExperimentBasedConfig(Mr.ConfigKey.TeamInternal.InlineEditsXtabDiffNEntries,this.expService),maxTokens:this.configService.getExperimentBasedConfig(Mr.ConfigKey.TeamInternal.InlineEditsXtabDiffMaxTokens,this.expService),onlyForDocsInPrompt:this.configService.getExperimentBasedConfig(Mr.ConfigKey.TeamInternal.InlineEditsXtabDiffOnlyForDocsInPrompt,this.expService),useRelativePaths:this.configService.getExperimentBasedConfig(Mr.ConfigKey.TeamInternal.InlineEditsXtabDiffUseRelativePaths,this.expService)},includePostScript:!0},n=this.modelService.selectedModelConfiguration(),o=n.promptingStrategy===wa.PromptingStrategy.CopilotNesXtab?{...n,includeTagsInCurrentFile:!0}:n;return pu.overrideModelConfig(r,o)}static overrideModelConfig(e,r){return{...e,modelName:r.modelName,promptingStrategy:r.promptingStrategy,currentFile:{...e.currentFile,includeTags:r.includeTagsInCurrentFile}}}pickSystemPrompt(e){switch(e){case wa.PromptingStrategy.UnifiedModel:return XL.unifiedModelSystemPrompt;case wa.PromptingStrategy.Codexv21NesUnified:case wa.PromptingStrategy.SimplifiedSystemPrompt:return XL.simplifiedPrompt;case wa.PromptingStrategy.Xtab275:case wa.PromptingStrategy.XtabAggressiveness:return XL.xtab275SystemPrompt;case wa.PromptingStrategy.Nes41Miniv3:return XL.nes41Miniv3SystemPrompt;case wa.PromptingStrategy.CopilotNesXtab:case void 0:return XL.systemPromptTemplate;default:(0,QL.assertNever)(e)}}determineLanguageContextOptions(e,{enabled:r,enabledLanguages:n,maxTokens:o,enabledDiagnostics:s,traitPosition:a}){return e in n?{enabled:n[e],maxTokens:o,traitPosition:a}:s?{enabled:!0,maxTokens:o,traitPosition:a}:{enabled:r,maxTokens:o,traitPosition:a}}getEndpoint(e){let r=this.configService.getConfig(Mr.ConfigKey.TeamInternal.InlineEditsXtabProviderUrl),n=this.configService.getConfig(Mr.ConfigKey.TeamInternal.InlineEditsXtabProviderApiKey);return r!==void 0&&n!==void 0?this.instaService.createInstance(tin.XtabEndpoint,r,n,e):(0,qnn.createProxyXtabEndpoint)(this.instaService,e)}getPredictedOutput(e,r){return this.configService.getConfig(Mr.ConfigKey.TeamInternal.InlineEditsXtabProviderUsePrediction)?{type:"content",content:pu.getPredictionContents(e,r)}:void 0}static getPredictionContents(e,r){if(r===wa.ResponseFormat.UnifiedWithXml)return["<EDIT>",...e,"</EDIT>"].join(`
`);if(r===wa.ResponseFormat.EditWindowOnly)return e.join(`
`);if(r===wa.ResponseFormat.CodeBlock)return["```",...e,"```"].join(`
`);(0,QL.assertNever)(r)}async debounce(e,r,n){if(this.simulationCtx.isInSimulationTests)return;let o=e.getDebounceTime();r.trace(`Debouncing for ${o} ms`),n.setDebounceTime(o),await(0,ZL.timeout)(o)}determineArtificialDelayMs(e,r,n){if(this.simulationCtx.isInSimulationTests)return;let o=e.getArtificialDelay();if(!(o<=0))return r.trace(`Enforcing artificial delay of ${o} ms`),n.setArtificialDelay(o),o}};Ia.XtabProvider=Cbe;Ia.XtabProvider=Cbe=pu=knn([oh(0,Bnn.IInlineEditsModelService),oh(1,Hnn.ISimulationTestContext),oh(2,Ynn.IInstantiationService),oh(3,znn.IWorkspaceService),oh(4,Unn.IDiffService),oh(5,Mr.IConfigurationService),oh(6,Gnn.IExperimentationService),oh(7,_vt.ILanguageContextProviderService),oh(8,Vnn.ILanguageDiagnosticsService),oh(9,Fnn.IIgnoreService)],Cbe);function vvt(t,e,r){for(let n=e.start;n<Math.min(t.length,e.endExclusive);++n)if(t[n].startsWith("<<<<<<<")){for(let o=n+1;o<t.length&&o-n<r;++o)if(t[o].startsWith(">>>>>>>"))return new hK.OffsetRange(n,o+1)}}});var Evt=m(sh=>{"use strict";var nin=sh&&sh.__decorate||function(t,e,r,n){var o=arguments.length,s=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(o<3?a(s):o>3?a(e,r,s):a(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},mK=sh&&sh.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(sh,"__esModule",{value:!0});sh.StaticGitHubAuthenticationService=void 0;sh.setCopilotToken=cin;var iin=Ni(),oin=pa(),gK=ha(),sin=UN(),ain=S_(),_K=class extends gK.BaseAuthenticationService{constructor(e,r,n,o,s){super(r,n,o,s),this.tokenProvider=e;let a=this;this._anyGitHubSession=e?{get id(){return a.tokenProvider()},get accessToken(){return a.tokenProvider()},scopes:gK.GITHUB_SCOPE_USER_EMAIL,account:{id:"user",label:"User"}}:void 0,this._permissiveGitHubSession=e?{get id(){return a.tokenProvider()},get accessToken(){return a.tokenProvider()},scopes:gK.GITHUB_SCOPE_ALIGNED,account:{id:"user",label:"User"}}:void 0}getAnyGitHubSession(e){return Promise.resolve(this._anyGitHubSession)}getPermissiveGitHubSession(e){if(this.isMinimalMode){if(e.createIfNone||e.forceNewSession)throw new gK.MinimalModeError;return Promise.resolve(void 0)}return Promise.resolve(this._permissiveGitHubSession)}async getCopilotToken(e){return await super.getCopilotToken(e)}setCopilotToken(e){this._tokenStore.copilotToken=e,this._onDidAuthenticationChange.fire()}getAnyAdoSession(e){return Promise.resolve(void 0)}getAdoAccessTokenBase64(e){return Promise.resolve(void 0)}};sh.StaticGitHubAuthenticationService=_K;sh.StaticGitHubAuthenticationService=_K=nin([mK(1,oin.ILogService),mK(2,ain.ICopilotTokenStore),mK(3,sin.ICopilotTokenManager),mK(4,iin.IConfigurationService)],_K);function cin(t,e){if(!(t instanceof _K))throw new Error("This function should only be used with StaticGitHubAuthenticationService");t.setCopilotToken(e)}});var Svt=m(Og=>{"use strict";Object.defineProperty(Og,"__esModule",{value:!0});Og.makeGitHubAPIRequest=Tvt;Og.makeGitHubGraphQLRequest=vK;Og.makeSearchGraphQLRequest=lin;Og.getPullRequestFromGlobalId=uin;Og.addPullRequestCommentGraphQLRequest=din;Og.closePullRequest=fin;Og.makeGitHubAPIRequestWithPagination=pin;async function Tvt(t,e,r,n,o,s,a,c,l,u="json",d,f=!1){let p={Accept:"application/vnd.github+json"};a&&(p.Authorization=`Bearer ${a}`),l&&(p["X-GitHub-Api-Version"]=l),d&&(p["User-Agent"]=d);let h=await t.fetch(`${n}/${o}`,{method:s,headers:p,body:c?JSON.stringify(c):void 0});if(!h.ok)return e.error(`[GitHubAPI] ${s} ${n}/${o} - Status: ${h?.status}`),f?{status:h.status}:void 0;try{let _=u==="json"?await h.json():await h.text(),g=Number(h.headers.get("x-ratelimit-remaining")),v=`[RateLimit] REST rate limit remaining: ${g}, ${o}`;return g<1e3?(e.warn(v),r.sendMSFTTelemetryEvent("githubAPI.approachingRateLimit",{rateLimit:g.toString()})):e.debug(v),_}catch{return}}async function vK(t,e,r,n,o,s,a){let c={Accept:"application/vnd.github+json","Content-Type":"application/json"};s&&(c.Authorization=`Bearer ${s}`);let l=JSON.stringify({query:o,variables:a}),u=await t.fetch(`${n}/graphql`,{method:"POST",headers:c,body:l});if(u.ok)try{let d=await u.json(),f=Number(u.headers.get("x-ratelimit-remaining")),p=`[RateLimit] GraphQL rate limit remaining: ${f}, query: ${o}`;return f<1e3?(e.warn(p),r.sendMSFTTelemetryEvent("githubAPI.approachingRateLimit",{rateLimit:f.toString()})):e.debug(p),d}catch{return}}async function lin(t,e,r,n,o,s,a=20){let c=`
		query FetchCopilotAgentPullRequests($searchQuery: String!, $first: Int!, $after: String) {
			search(query: $searchQuery, type: ISSUE, first: $first, after: $after) {
				nodes {
					... on PullRequest {
						number
						id
						fullDatabaseId
						headRefOid
						baseRefOid
						title
						state
						url
						createdAt
						updatedAt
						additions
						deletions
						files {
							totalCount
						}
						author {
							login
						}
						repository {
							owner {
								login
							}
							name
						}
						body
					}
				}
				pageInfo {
					hasNextPage
					endCursor
				}
				issueCount
			}
		}
	`;return e.debug(`[FolderRepositoryManager+0] Fetch pull request category ${s}`),(await vK(t,e,r,n,c,o,{searchQuery:s,first:a})).data?.search?.nodes??[]}async function uin(t,e,r,n,o,s){let a=`
		query GetPullRequestGlobal($globalId: ID!) {
			node(id: $globalId) {
				... on PullRequest {
					number
					id
					fullDatabaseId
					headRefOid
					baseRefOid
					title
					state
					url
					createdAt
					updatedAt
					additions
					deletions
					files {
						totalCount
					}
					author {
						login
					}
					repository {
						owner {
							login
						}
						name
					}
					body
				}
			}
		}
	`;return e.debug(`[GitHubAPI] Fetch pull request by global ID ${s}`),(await vK(t,e,r,n,a,o,{globalId:s}))?.data?.node}async function din(t,e,r,n,o,s,a){let c=`
		mutation AddPullRequestComment($pullRequestId: ID!, $body: String!) {
			addComment(input: {subjectId: $pullRequestId, body: $body}) {
				commentEdge {
					node {
						id
						body
						createdAt
						author {
							login
						}
						url
					}
				}
			}
		}
	`;return e.debug(`[GitHubAPI] Adding comment to pull request ${s}`),(await vK(t,e,r,n,c,o,{pullRequestId:s,body:a}))?.data?.addComment?.commentEdge?.node||null}async function fin(t,e,r,n,o,s,a,c){e.debug(`[GitHubAPI] Closing pull request ${s}/${a}#${c}`);let l=await Tvt(t,e,r,n,`repos/${s}/${a}/pulls/${c}`,"POST",o,{state:"closed"},"2022-11-28"),u=l?.state==="closed";return u?e.debug(`[GitHubAPI] Successfully closed pull request ${s}/${a}#${c}`):e.error(`[GitHubAPI] Failed to close pull request ${s}/${a}#${c}. Its state is ${l?.state}`),u}async function pin(t,e,r,n,o,s){let a=!1,c=[],l=20,u=1;do{let d=await t.fetch(`${r}/${n}?page_size=${l}&page_number=${u}&resource_state=draft,open&repo_nwo=${o}`,{headers:{Authorization:`Bearer ${s}`,Accept:"application/json"}});if(!d.ok)return e.error(`[GitHubAPI] Failed to fetch sessions: ${d.status} ${d.statusText}`),c;let f=await d.json();c.push(...f.sessions),a=f.sessions.length===l,u++}while(a);return c}});var xbe=m(ah=>{"use strict";Object.defineProperty(ah,"__esModule",{value:!0});ah.BaseOctoKitService=ah.VSCodeTeamId=ah.IOctoKitService=ah.IGithubRepositoryService=void 0;var Cvt=Qe(),bvt=V1(),ty=Svt();ah.IGithubRepositoryService=(0,Cvt.createServiceIdentifier)("IGithubRepositoryService");ah.IOctoKitService=(0,Cvt.createServiceIdentifier)("IOctoKitService");ah.VSCodeTeamId=1682102;var Abe=class{constructor(e,r,n,o){this._capiClientService=e,this._fetcherService=r,this._logService=n,this._telemetryService=o}async getCurrentAuthedUserWithToken(e){return this._makeGHAPIRequest("user","GET",e)}async getTeamMembershipWithToken(e,r,n){return this._makeGHAPIRequest(`teams/${e}/memberships/${n}`,"GET",r)}async _makeGHAPIRequest(e,r,n,o){return(0,ty.makeGitHubAPIRequest)(this._fetcherService,this._logService,this._telemetryService,this._capiClientService.dotcomAPIURL,e,r,n,o,"2022-11-28")}async getCopilotPullRequestForUserWithToken(e,r,n,o){let s=`repo:${e}/${r} is:open author:copilot-swe-agent[bot] involves:${n}`;return(0,ty.makeSearchGraphQLRequest)(this._fetcherService,this._logService,this._telemetryService,this._capiClientService.dotcomAPIURL,o,s)}async addPullRequestCommentWithToken(e,r,n){return(0,ty.addPullRequestCommentGraphQLRequest)(this._fetcherService,this._logService,this._telemetryService,this._capiClientService.dotcomAPIURL,n,e,r)}async getPullRequestFromSessionWithToken(e,r){return(0,ty.getPullRequestFromGlobalId)(this._fetcherService,this._logService,this._telemetryService,this._capiClientService.dotcomAPIURL,r,e)}async getPullRequestFilesWithToken(e,r,n,o){return await(0,ty.makeGitHubAPIRequest)(this._fetcherService,this._logService,this._telemetryService,this._capiClientService.dotcomAPIURL,`repos/${e}/${r}/pulls/${n}/files`,"GET",o,void 0,"2022-11-28")||[]}async closePullRequestWithToken(e,r,n,o){return(0,ty.closePullRequest)(this._fetcherService,this._logService,this._telemetryService,this._capiClientService.dotcomAPIURL,o,e,r,n)}async getFileContentWithToken(e,r,n,o,s){let a=`repos/${e}/${r}/contents/${o}?ref=${encodeURIComponent(n)}`,c=await(0,ty.makeGitHubAPIRequest)(this._fetcherService,this._logService,this._telemetryService,this._capiClientService.dotcomAPIURL,a,"GET",s,void 0);if(!c||Array.isArray(c))throw new Error("Unable to fetch file content");let l=c;if(l.content&&l.encoding==="base64")return(0,bvt.decodeBase64)(l.content.replace(/\n/g,"")).toString();if(l.sha){let u=await this.getBlobContentWithToken(e,r,l.sha,s);if(u)return u}return this._logService.error(`Failed to get file content for ${e}/${r}/${o} at ref ${n}`),""}async getUserOrganizationsWithToken(e){let r=await this._makeGHAPIRequest("user/orgs","GET",e);return!r||!Array.isArray(r)?[]:r.map(n=>n.login)}async getOrganizationRepositoriesWithToken(e,r){let n=await this._makeGHAPIRequest(`orgs/${e}/repos?per_page=5&sort=updated`,"GET",r);return!n||!Array.isArray(n)||n.length===0?[]:n.map(o=>o.name)}async getBlobContentWithToken(e,r,n,o){let s=`repos/${e}/${r}/git/blobs/${n}`,a=await(0,ty.makeGitHubAPIRequest)(this._fetcherService,this._logService,this._telemetryService,this._capiClientService.dotcomAPIURL,s,"GET",o,void 0,"2022-11-28");if(!a||Array.isArray(a))return;let c=a;if(c.content&&c.encoding==="base64")return(0,bvt.decodeBase64)(c.content.replace(/\n/g,"")).toString()}};ah.BaseOctoKitService=Abe});var Avt=m(yK=>{"use strict";Object.defineProperty(yK,"__esModule",{value:!0});yK.NullBaseOctoKitService=void 0;var hin=xbe(),wbe=class extends hin.BaseOctoKitService{async getCurrentAuthedUserWithToken(e){return{avatar_url:"",login:"NullUser",name:"Null User"}}async getTeamMembershipWithToken(e,r,n){}async _makeGHAPIRequest(e,r,n,o){}};yK.NullBaseOctoKitService=wbe});var Pvt=m(Nn=>{"use strict";var xK=Nn&&Nn.__decorate||function(t,e,r,n){var o=arguments.length,s=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(o<3?a(s):o>3?a(e,r,s):a(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},Zn=Nn&&Nn.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(Nn,"__esModule",{value:!0});Nn.CopilotTokenManagerFromGitHubToken=Nn.CopilotTokenManagerFromDeviceId=Nn.RefreshableCopilotTokenManager=Nn.StaticExtendedTokenInfoCopilotTokenManager=Nn.FixedCopilotTokenManager=Nn.BaseCopilotTokenManager=Nn.tokenErrorString=void 0;Nn.createStaticGitHubTokenProvider=_in;Nn.getOrCreateTestingCopilotTokenManager=vin;var Ibe=(nP(),cn(rP)),min=Fi(),xvt=Ar(),EK=q8(),Ivt=Ni(),wK=tl(),IK=Hv(),IR=Q0(),gin=xbe(),PK=Avt(),RK=pa(),tk=tu(),OK=qa(),wvt=lR(),MK=tB(),TK=UN();Nn.tokenErrorString='Tests: either GITHUB_PAT, GITHUB_OAUTH_TOKEN, or GITHUB_OAUTH_TOKEN+VSCODE_COPILOT_CHAT_TOKEN must be set unless running from an IS_SCENARIO_AUTOMATION environment. Run "npm run get_token" to get credentials.';function _in(){let t=process.env.GITHUB_PAT,e=process.env.GITHUB_OAUTH_TOKEN;if(!(IR.isScenarioAutomation&&!t&&!e))return()=>{if(t)return t;if(e)return e;throw new Error(Nn.tokenErrorString)}}function vin(t){if(process.env.VSCODE_COPILOT_CHAT_TOKEN)return new EK.SyncDescriptor(bK,[process.env.VSCODE_COPILOT_CHAT_TOKEN]);if(process.env.GITHUB_OAUTH_TOKEN)return new EK.SyncDescriptor(AK,[process.env.GITHUB_OAUTH_TOKEN]);if(process.env.GITHUB_PAT)return new EK.SyncDescriptor(SK,[process.env.GITHUB_PAT]);if(IR.isScenarioAutomation)return new EK.SyncDescriptor(CK,[t]);throw new Error(Nn.tokenErrorString)}var wR=class extends xvt.Disposable{constructor(e,r,n,o,s,a,c){super(),this._baseOctokitservice=e,this._logService=r,this._telemetryService=n,this._domainService=o,this._capiClientService=s,this._fetcherService=a,this._envService=c,this._isDisposed=!1,this._copilotTokenRefreshEmitter=this._register(new min.Emitter),this.onDidCopilotTokenRefresh=this._copilotTokenRefreshEmitter.event,this._register((0,xvt.toDisposable)(()=>this._isDisposed=!0))}get copilotToken(){return this._copilotToken}set copilotToken(e){e!==this._copilotToken&&(this._copilotToken=e,this._copilotTokenRefreshEmitter.fire())}resetCopilotToken(e){e!==void 0&&this._telemetryService.sendGHTelemetryEvent("auth.reset_token_"+e),this._logService.debug(`Resetting copilot token on HTTP error ${e||"unknown"}`),this.copilotToken=void 0}async authFromGitHubToken(e,r){return this.doAuthFromGitHubTokenOrDevDeviceId({githubToken:e,ghUsername:r})}async authFromDevDeviceId(e){return this.doAuthFromGitHubTokenOrDevDeviceId({devDeviceId:e})}async doAuthFromGitHubTokenOrDevDeviceId(e){this._telemetryService.sendGHTelemetryEvent("auth.new_login");let r,n,o;if("githubToken"in e?(o=e.ghUsername,[r,n]=await Promise.all([this.fetchCopilotTokenFromGitHubToken(e.githubToken),this.fetchCopilotUserInfo(e.githubToken)])):r=await this.fetchCopilotTokenFromDevDeviceId(e.devDeviceId),!r)return this._logService.warn("Failed to get copilot token"),this._telemetryService.sendGHTelemetryErrorEvent("auth.request_failed"),{kind:"failure",reason:"FailedToGetToken"};let s=await(0,tk.jsonVerboseError)(r);if(!s)return this._logService.warn("Failed to get copilot token"),this._telemetryService.sendGHTelemetryErrorEvent("auth.request_read_failed"),{kind:"failure",reason:"FailedToGetToken"};if(r.status===401)return this._logService.warn("Failed to get copilot token due to 401 status"),this._telemetryService.sendGHTelemetryErrorEvent("auth.unknown_401"),{kind:"failure",reason:"HTTP401"};if(r.status===403&&s.message?.startsWith("API rate limit exceeded"))return this._logService.warn("Failed to get copilot token due to exceeding API rate limit"),this._telemetryService.sendGHTelemetryErrorEvent("auth.rate_limited"),{kind:"failure",reason:"RateLimited"};if(!r.ok||!s.token){this._logService.warn(`Invalid copilot token: missing token: ${r.status} ${r.statusText}`);let f=wvt.TelemetryData.createAndMarkAsIssued({status:r.status.toString(),status_text:r.statusText});return this._telemetryService.sendGHTelemetryErrorEvent("auth.invalid_token",f.properties,f.measurements),{kind:"failure",reason:"NotAuthorized",...s.error_details}}let a=s.expires_at;s.expires_at=(0,TK.nowSeconds)()+s.refresh_in+60;let c=o??"unknown",l=!1;(0,MK.containsInternalOrg)(s.organization_list??[])&&"githubToken"in e&&(l=!!await this._baseOctokitservice.getTeamMembershipWithToken(gin.VSCodeTeamId,e.githubToken,c));let u={...s,copilot_plan:n?.copilot_plan??s.sku??"",quota_snapshots:n?.quota_snapshots,quota_reset_date:n?.quota_reset_date,codex_agent_enabled:n?.codex_agent_enabled,username:c,isVscodeTeamMember:l},d=wvt.TelemetryData.createAndMarkAsIssued({},{adjusted_expires_at:s.expires_at,expires_at:a,current_time:(0,TK.nowSeconds)()});return this._telemetryService.sendGHTelemetryEvent("auth.new_token",d.properties,d.measurements),{kind:"success",...u}}async fetchCopilotTokenFromGitHubToken(e){let r={headers:{Authorization:`token ${e}`,"X-GitHub-Api-Version":"2025-04-01"},retryFallbacks:!0,expectJSON:!0};return await this._capiClientService.makeRequest(r,{type:Ibe.RequestType.CopilotToken})}async fetchCopilotTokenFromDevDeviceId(e){let r={headers:{"X-GitHub-Api-Version":"2025-04-01","Editor-Device-Id":`${e}`},retryFallbacks:!0,expectJSON:!0};return await this._capiClientService.makeRequest(r,{type:Ibe.RequestType.CopilotNLToken})}async fetchCopilotUserInfo(e){let r={headers:{Authorization:`token ${e}`,"X-GitHub-Api-Version":"2025-04-01"},retryFallbacks:!0,expectJSON:!0};return await(await this._capiClientService.makeRequest(r,{type:Ibe.RequestType.CopilotUserInfo})).json()}};Nn.BaseCopilotTokenManager=wR;var SK=class extends wR{constructor(e,r,n,o,s,a,c){super(new PK.NullBaseOctoKitService(o,a,r,n),r,n,s,o,a,c),this._completionsToken=e,this.copilotToken={token:e,expires_at:0,refresh_in:0,username:"fixedTokenManager",isVscodeTeamMember:!1,copilot_plan:"unknown"}}set completionsToken(e){this._completionsToken=e,this.copilotToken={token:e,expires_at:0,refresh_in:0,username:"fixedTokenManager",isVscodeTeamMember:!1,copilot_plan:"unknown"}}get completionsToken(){return this._completionsToken}async getCopilotToken(){return new MK.CopilotToken(this.copilotToken)}async checkCopilotToken(){return{status:"OK"}}};Nn.FixedCopilotTokenManager=SK;Nn.FixedCopilotTokenManager=SK=xK([Zn(1,RK.ILogService),Zn(2,OK.ITelemetryService),Zn(3,wK.ICAPIClientService),Zn(4,IK.IDomainService),Zn(5,tk.IFetcherService),Zn(6,IR.IEnvService)],SK);var bK=class extends wR{constructor(e,r,n,o,s,a,c){super(new PK.NullBaseOctoKitService(o,a,r,n),r,n,s,o,a,c);let l=Buffer.from(e,"base64").toString("utf8");this._initialToken=JSON.parse(l)}async getCopilotToken(){return this.copilotToken||(this.copilotToken={...this._initialToken}),new MK.CopilotToken(this._initialToken)}async checkCopilotToken(){return{status:"OK"}}};Nn.StaticExtendedTokenInfoCopilotTokenManager=bK;Nn.StaticExtendedTokenInfoCopilotTokenManager=bK=xK([Zn(1,RK.ILogService),Zn(2,OK.ITelemetryService),Zn(3,wK.ICAPIClientService),Zn(4,IK.IDomainService),Zn(5,tk.IFetcherService),Zn(6,IR.IEnvService)],bK);var ek=class extends wR{async getCopilotToken(e){if(!this.copilotToken||this.copilotToken.expires_at<(0,TK.nowSeconds)()-300||e){let r=await this.authenticateAndGetToken();if(r.kind==="failure")throw Error(`Failed to get copilot token: ${r.reason.toString()} ${r.message??""}`);this.copilotToken={...r}}return new MK.CopilotToken(this.copilotToken)}async checkCopilotToken(){if(!this.copilotToken||this.copilotToken.expires_at<(0,TK.nowSeconds)()){let r=await this.authenticateAndGetToken();if(r.kind==="failure")return r;this.copilotToken={...r}}return{status:"OK"}}};Nn.RefreshableCopilotTokenManager=ek;var CK=class extends ek{constructor(e,r,n,o,s,a,c,l){super(new PK.NullBaseOctoKitService(s,a,r,n),r,n,o,s,a,c),this.deviceId=e,this.configurationService=l}async authenticateAndGetToken(){return this.authFromDevDeviceId(this.deviceId)}};Nn.CopilotTokenManagerFromDeviceId=CK;Nn.CopilotTokenManagerFromDeviceId=CK=xK([Zn(1,RK.ILogService),Zn(2,OK.ITelemetryService),Zn(3,IK.IDomainService),Zn(4,wK.ICAPIClientService),Zn(5,tk.IFetcherService),Zn(6,IR.IEnvService),Zn(7,Ivt.IConfigurationService)],CK);var AK=class extends ek{constructor(e,r,n,o,s,a,c,l,u){super(new PK.NullBaseOctoKitService(a,c,n,o),n,o,s,a,c,l),this.githubToken=e,this.githubUsername=r,this.configurationService=u}async authenticateAndGetToken(){return this.authFromGitHubToken(this.githubToken,this.githubUsername)}};Nn.CopilotTokenManagerFromGitHubToken=AK;Nn.CopilotTokenManagerFromGitHubToken=AK=xK([Zn(2,RK.ILogService),Zn(3,OK.ITelemetryService),Zn(4,IK.IDomainService),Zn(5,wK.ICAPIClientService),Zn(6,tk.IFetcherService),Zn(7,IR.IEnvService),Zn(8,Ivt.IConfigurationService)],AK)});var Rvt=m(Mg=>{"use strict";var yin=Mg&&Mg.__decorate||function(t,e,r,n){var o=arguments.length,s=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(o<3?a(s):o>3?a(e,r,s):a(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},Ein=Mg&&Mg.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(Mg,"__esModule",{value:!0});Mg.ChatQuotaService=void 0;var Tin=Ar(),Sin=ha(),Pbe=class extends Tin.Disposable{constructor(e){super(),this._authService=e,this._register(this._authService.onDidAuthenticationChange(()=>{this.processUserInfoQuotaSnapshot(this._authService.copilotToken?.quotaInfo)}))}get quotaExhausted(){return this._quotaInfo?this._quotaInfo.used>=this._quotaInfo.quota&&!this._quotaInfo.overageEnabled&&!this._quotaInfo.unlimited:!1}get overagesEnabled(){return this._quotaInfo?this._quotaInfo.overageEnabled:!1}clearQuota(){this._quotaInfo=void 0}processQuotaHeaders(e){let r=this._authService.copilotToken?.isFreeUser?e.get("x-quota-snapshot-chat"):e.get("x-quota-snapshot-premium_models")||e.get("x-quota-snapshot-premium_interactions");if(r)try{let n=new URLSearchParams(r),o=parseInt(n.get("ent")||"0",10),s=parseFloat(n.get("ov")||"0.0"),a=n.get("ovPerm")==="true",c=parseFloat(n.get("rem")||"0.0"),l=n.get("rst"),u;l?u=new Date(l):(u=new Date,u.setMonth(u.getMonth()+1));let d=Math.max(0,o*(1-c/100));this._quotaInfo={quota:o,unlimited:o===-1,used:d,overageUsed:s,overageEnabled:a,resetDate:u}}catch(n){console.error("Failed to parse quota header",n)}}processUserInfoQuotaSnapshot(e){!e||!e.quota_snapshots||!e.quota_reset_date||(this._quotaInfo={unlimited:e.quota_snapshots.premium_interactions.unlimited,overageEnabled:e.quota_snapshots.premium_interactions.overage_permitted,overageUsed:e.quota_snapshots.premium_interactions.overage_count,quota:e.quota_snapshots.premium_interactions.entitlement,resetDate:new Date(e.quota_reset_date),used:Math.max(0,e.quota_snapshots.premium_interactions.entitlement*(1-e.quota_snapshots.premium_interactions.percent_remaining/100))})}};Mg.ChatQuotaService=Pbe;Mg.ChatQuotaService=Pbe=yin([Ein(0,Sin.IAuthenticationService)],Pbe)});var Mvt=m(NK=>{"use strict";Object.defineProperty(NK,"__esModule",{value:!0});NK.DefaultsOnlyConfigurationService=void 0;var Ovt=Ni(),Rbe=class extends Ovt.AbstractConfigurationService{getConfig(e){return this.getDefaultValue(e)}inspectConfig(e,r){return{defaultValue:this.getDefaultValue(e)}}setConfig(){return Promise.resolve()}getNonExtensionConfig(e){}getExperimentBasedConfig(e,r,n){if(e.experimentName){let a=r.getTreatmentVariable(e.experimentName);if(a!==void 0)return a}let o=r.getTreatmentVariable(`copilotchat.config.${e.id}`);if(o!==void 0)return o;let s=r.getTreatmentVariable(`config.${e.fullyQualifiedId}`);if(s!==void 0)return s;if(e.fullyQualifiedOldId){let a=r.getTreatmentVariable(`copilotchat.config.${e.oldId}`);if(a!==void 0)return a;let c=r.getTreatmentVariable(`config.${e.fullyQualifiedOldId}`);if(c!==void 0)return c}return this.getDefaultValue(e)}updateExperimentBasedConfiguration(e){e.length!==0&&this._onDidChangeConfiguration.fire({affectsConfiguration:(r,n)=>{if(e.some(s=>s.startsWith(`config.${r}`)))return!0;let o=Ovt.globalConfigRegistry.configs.get(r)?.fullyQualifiedOldId;return!!(o&&e.some(s=>s.startsWith(`config.${o}`)))}})}dumpConfig(){return{}}};NK.DefaultsOnlyConfigurationService=Rbe});var Lvt=m(LK=>{"use strict";Object.defineProperty(LK,"__esModule",{value:!0});LK.computeDiff=Cin;LK.computeDiffSync=Nvt;var bin=Bve();async function Cin(t,e,r){return Nvt(t,e,r)}function Nvt(t,e,r){let n=t.split(/\r\n|\r|\n/),o=e.split(/\r\n|\r|\n/),a=new bin.DefaultLinesDiffComputer().computeDiff(n,o,r),c=a.changes.length>0?!1:t===e;function l(u){return u.map(d=>[d.original.startLineNumber,d.original.endLineNumberExclusive,d.modified.startLineNumber,d.modified.endLineNumberExclusive,d.innerChanges?.map(f=>[f.originalRange.startLineNumber,f.originalRange.startColumn,f.originalRange.endLineNumber,f.originalRange.endColumn,f.modifiedRange.startLineNumber,f.modifiedRange.startColumn,f.modifiedRange.endLineNumber,f.modifiedRange.endColumn])])}return{identical:c,quitEarly:a.hitTimeout,changes:l(a.changes),moves:a.moves.map(u=>[u.lineRangeMapping.original.startLineNumber,u.lineRangeMapping.original.endLineNumberExclusive,u.lineRangeMapping.modified.startLineNumber,u.lineRangeMapping.modified.endLineNumberExclusive,l(u.changes)])}}});var qvt=m(c0=>{"use strict";var Ain=c0&&c0.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),xin=c0&&c0.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),Uvt=c0&&c0.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),o=0;o<n.length;o++)n[o]!=="default"&&Ain(r,e,n[o]);return xin(r,e),r}})();Object.defineProperty(c0,"__esModule",{value:!0});c0.DiffServiceImpl=void 0;c0.toLineRangeMappings=Nbe;var win=mTe(),Iin=nE(),kvt=Uvt(Nl()),Dvt=Ya(),kK=um(),Pin=require("fs"),Rin=bve(),Obe=GG(),Oin=Uvt(Lvt()),Mbe=class{constructor(e=!0){this._useWorker=e,this._worker=new Iin.Lazy(()=>{let r=Min([kvt.join(__dirname,"diffWorker.js"),kvt.join(__dirname,"../../../../dist/diffWorker.js")]);if(r===void 0)throw new Error("DiffServiceImpl: worker file not found");return new win.WorkerWithRpcProxy(r,{name:"Diff worker"})})}dispose(){this._worker.rawValue?.terminate()}async computeDiff(e,r,n){let o=this._useWorker?await this._worker.value.proxy.computeDiff(e,r,n):await Oin.computeDiff(e,r,n);return{identical:o.identical,quitEarly:o.quitEarly,changes:Nbe(o.changes),moves:o.moves.map(a=>new Rin.MovedText(new Obe.LineRangeMapping(new kK.LineRange(a[0],a[1]),new kK.LineRange(a[2],a[3])),Nbe(a[4])))}}};c0.DiffServiceImpl=Mbe;function Nbe(t){return t.map(e=>new Obe.DetailedLineRangeMapping(new kK.LineRange(e[0],e[1]),new kK.LineRange(e[2],e[3]),e[4]?.map(r=>new Obe.RangeMapping(new Dvt.Range(r[0],r[1],r[2],r[3]),new Dvt.Range(r[4],r[5],r[6],r[7])))))}function Min(t){for(let e of t)if((0,Pin.existsSync)(e))return e}});var jvt=m(Ng=>{"use strict";var Nin=Ng&&Ng.__decorate||function(t,e,r,n){var o=arguments.length,s=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(o<3?a(s):o>3?a(e,r,s):a(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},Fvt=Ng&&Ng.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(Ng,"__esModule",{value:!0});Ng.CAPIClientImpl=void 0;var Lin=Q0(),kin=tu(),Din=tl(),Lbe=class extends Din.BaseCAPIClientService{constructor(e,r){super(process.env.HMAC_SECRET,process.env.VSCODE_COPILOT_INTEGRATION_ID,e,r)}};Ng.CAPIClientImpl=Lbe;Ng.CAPIClientImpl=Lbe=Nin([Fvt(0,kin.IFetcherService),Fvt(1,Lin.IEnvService)],Lbe)});var $vt=m(Lg=>{"use strict";var Uin=Lg&&Lg.__decorate||function(t,e,r,n){var o=arguments.length,s=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(o<3?a(s):o>3?a(e,r,s):a(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},kbe=Lg&&Lg.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(Lg,"__esModule",{value:!0});Lg.DomainService=void 0;var qin=Fi(),Fin=Ar(),jin=S_(),PR=Ni(),Bin=tl(),Bvt="github-enterprise.uri",Dbe=class extends Fin.Disposable{constructor(e,r,n){super(),this._configurationService=e,this._tokenStore=r,this._capiClientService=n,this._onDidChangeDomains=this._register(new qin.Emitter),this.onDidChangeDomains=this._onDidChangeDomains.event,this._register(this._configurationService.onDidChangeConfiguration(o=>this._onDidConfigChangeHandler(o))),this._processCopilotToken(this._tokenStore.copilotToken),this._register(this._tokenStore.onDidStoreUpdate(()=>this._processCopilotToken(this._tokenStore.copilotToken)))}_onDidConfigChangeHandler(e){(e.affectsConfiguration(`${PR.CopilotConfigPrefix}.advanced`)||e.affectsConfiguration(Bvt))&&this._processCAPIModuleChange(this._tokenStore.copilotToken)}_processCAPIModuleChange(e){let r=this._configurationService.getConfig(PR.ConfigKey.Shared.DebugOverrideCAPIUrl);r&&r.endsWith("/")&&(r=r.slice(0,-1));let n=this._configurationService.getConfig(PR.ConfigKey.Shared.DebugOverrideProxyUrl);n&&(n=n.replace(/\/$/,""));let o=this._configurationService.getConfig(PR.ConfigKey.Shared.AuthProvider)===PR.AuthProviderId.GitHubEnterprise?this._configurationService.getNonExtensionConfig(Bvt):void 0,s={endpoints:{api:r||e?.endpoints?.api,proxy:n||e?.endpoints?.proxy,telemetry:e?.endpoints?.telemetry,"origin-tracker":e?.endpoints?.["origin-tracker"]},sku:e?.sku||"unknown"},a=this._capiClientService.updateDomains(s,o);(a.capiUrlChanged||a.proxyUrlChanged||a.telemetryUrlChanged||a.dotcomUrlChanged)&&this._onDidChangeDomains.fire({capiUrlChanged:a.capiUrlChanged,telemetryUrlChanged:a.telemetryUrlChanged,proxyUrlChanged:a.proxyUrlChanged,dotcomUrlChanged:a.dotcomUrlChanged})}_processCopilotToken(e){this._processCAPIModuleChange(e)}};Lg.DomainService=Dbe;Lg.DomainService=Dbe=Uin([kbe(0,PR.IConfigurationService),kbe(1,jin.ICopilotTokenStore),kbe(2,Bin.ICAPIClientService)],Dbe)});var Vvt=m(RR=>{"use strict";Object.defineProperty(RR,"__esModule",{value:!0});RR.NullNativeEnvService=RR.NullEnvService=void 0;var $in=Bi(),DK=Q0(),Vin=aN(),UK=class t extends DK.AbstractEnvService{constructor(){super(...arguments),this.language="en"}static{this.Instance=new t}get extensionId(){return"test-extension-id"}get vscodeVersion(){return"test-version"}get isActive(){return!0}get sessionId(){return"test-session"}get machineId(){return"test-machine"}get devDeviceId(){return"test-dev-device"}get remoteName(){}get uiKind(){return"desktop"}get uriScheme(){return"code-null"}get appRoot(){return""}get shell(){return"zsh"}get OS(){return DK.OperatingSystem.Linux}getEditorInfo(){return new DK.NameAndVersion("simulation-tests-editor",Vin.packageJson.engines.vscode.match(/\d+\.\d+/)?.[0]??"1.89")}getEditorPluginInfo(){return new DK.NameAndVersion("simulation-tests-plugin","2")}openExternal(e){return Promise.resolve(!1)}};RR.NullEnvService=UK;var Ube=class extends UK{get userHome(){return $in.URI.file("/home/testuser")}};RR.NullNativeEnvService=Ube});var qbe=m(qK=>{"use strict";Object.defineProperty(qK,"__esModule",{value:!0});qK.IGitExtensionService=void 0;var Hin=Qe();qK.IGitExtensionService=(0,Hin.createServiceIdentifier)("IGitExtensionService")});var Hvt=m(FK=>{"use strict";Object.defineProperty(FK,"__esModule",{value:!0});FK.NullGitExtensionService=void 0;var Gin=Fi(),Fbe=class{constructor(){this.onDidChange=Gin.Event.None,this.extensionAvailable=!1}getExtensionApi(){}};FK.NullGitExtensionService=Fbe});var nn=m(Bs=>{"use strict";var jbe=Symbol.for("yaml.alias"),Gvt=Symbol.for("yaml.document"),jK=Symbol.for("yaml.map"),zvt=Symbol.for("yaml.pair"),Bbe=Symbol.for("yaml.scalar"),BK=Symbol.for("yaml.seq"),kg=Symbol.for("yaml.node.type"),zin=t=>!!t&&typeof t=="object"&&t[kg]===jbe,Win=t=>!!t&&typeof t=="object"&&t[kg]===Gvt,Kin=t=>!!t&&typeof t=="object"&&t[kg]===jK,Yin=t=>!!t&&typeof t=="object"&&t[kg]===zvt,Wvt=t=>!!t&&typeof t=="object"&&t[kg]===Bbe,Qin=t=>!!t&&typeof t=="object"&&t[kg]===BK;function Kvt(t){if(t&&typeof t=="object")switch(t[kg]){case jK:case BK:return!0}return!1}function Zin(t){if(t&&typeof t=="object")switch(t[kg]){case jbe:case jK:case Bbe:case BK:return!0}return!1}var Jin=t=>(Wvt(t)||Kvt(t))&&!!t.anchor;Bs.ALIAS=jbe;Bs.DOC=Gvt;Bs.MAP=jK;Bs.NODE_TYPE=kg;Bs.PAIR=zvt;Bs.SCALAR=Bbe;Bs.SEQ=BK;Bs.hasAnchor=Jin;Bs.isAlias=zin;Bs.isCollection=Kvt;Bs.isDocument=Win;Bs.isMap=Kin;Bs.isNode=Zin;Bs.isPair=Yin;Bs.isScalar=Wvt;Bs.isSeq=Qin});var rk=m($be=>{"use strict";var Ko=nn(),Tl=Symbol("break visit"),Yvt=Symbol("skip children"),ch=Symbol("remove node");function $K(t,e){let r=Qvt(e);Ko.isDocument(t)?OR(null,t.contents,r,Object.freeze([t]))===ch&&(t.contents=null):OR(null,t,r,Object.freeze([]))}$K.BREAK=Tl;$K.SKIP=Yvt;$K.REMOVE=ch;function OR(t,e,r,n){let o=Zvt(t,e,r,n);if(Ko.isNode(o)||Ko.isPair(o))return Jvt(t,n,o),OR(t,o,r,n);if(typeof o!="symbol"){if(Ko.isCollection(e)){n=Object.freeze(n.concat(e));for(let s=0;s<e.items.length;++s){let a=OR(s,e.items[s],r,n);if(typeof a=="number")s=a-1;else{if(a===Tl)return Tl;a===ch&&(e.items.splice(s,1),s-=1)}}}else if(Ko.isPair(e)){n=Object.freeze(n.concat(e));let s=OR("key",e.key,r,n);if(s===Tl)return Tl;s===ch&&(e.key=null);let a=OR("value",e.value,r,n);if(a===Tl)return Tl;a===ch&&(e.value=null)}}return o}async function VK(t,e){let r=Qvt(e);Ko.isDocument(t)?await MR(null,t.contents,r,Object.freeze([t]))===ch&&(t.contents=null):await MR(null,t,r,Object.freeze([]))}VK.BREAK=Tl;VK.SKIP=Yvt;VK.REMOVE=ch;async function MR(t,e,r,n){let o=await Zvt(t,e,r,n);if(Ko.isNode(o)||Ko.isPair(o))return Jvt(t,n,o),MR(t,o,r,n);if(typeof o!="symbol"){if(Ko.isCollection(e)){n=Object.freeze(n.concat(e));for(let s=0;s<e.items.length;++s){let a=await MR(s,e.items[s],r,n);if(typeof a=="number")s=a-1;else{if(a===Tl)return Tl;a===ch&&(e.items.splice(s,1),s-=1)}}}else if(Ko.isPair(e)){n=Object.freeze(n.concat(e));let s=await MR("key",e.key,r,n);if(s===Tl)return Tl;s===ch&&(e.key=null);let a=await MR("value",e.value,r,n);if(a===Tl)return Tl;a===ch&&(e.value=null)}}return o}function Qvt(t){return typeof t=="object"&&(t.Collection||t.Node||t.Value)?Object.assign({Alias:t.Node,Map:t.Node,Scalar:t.Node,Seq:t.Node},t.Value&&{Map:t.Value,Scalar:t.Value,Seq:t.Value},t.Collection&&{Map:t.Collection,Seq:t.Collection},t):t}function Zvt(t,e,r,n){if(typeof r=="function")return r(t,e,n);if(Ko.isMap(e))return r.Map?.(t,e,n);if(Ko.isSeq(e))return r.Seq?.(t,e,n);if(Ko.isPair(e))return r.Pair?.(t,e,n);if(Ko.isScalar(e))return r.Scalar?.(t,e,n);if(Ko.isAlias(e))return r.Alias?.(t,e,n)}function Jvt(t,e,r){let n=e[e.length-1];if(Ko.isCollection(n))n.items[t]=r;else if(Ko.isPair(n))t==="key"?n.key=r:n.value=r;else if(Ko.isDocument(n))n.contents=r;else{let o=Ko.isAlias(n)?"alias":"scalar";throw new Error(`Cannot replace node with ${o} parent`)}}$be.visit=$K;$be.visitAsync=VK});var Vbe=m(eyt=>{"use strict";var Xvt=nn(),Xin=rk(),eon={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"},ton=t=>t.replace(/[!,[\]{}]/g,e=>eon[e]),nk=class t{constructor(e,r){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},t.defaultYaml,e),this.tags=Object.assign({},t.defaultTags,r)}clone(){let e=new t(this.yaml,this.tags);return e.docStart=this.docStart,e}atDocument(){let e=new t(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:t.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},t.defaultTags);break}return e}add(e,r){this.atNextDocument&&(this.yaml={explicit:t.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},t.defaultTags),this.atNextDocument=!1);let n=e.trim().split(/[ \t]+/),o=n.shift();switch(o){case"%TAG":{if(n.length!==2&&(r(0,"%TAG directive should contain exactly two parts"),n.length<2))return!1;let[s,a]=n;return this.tags[s]=a,!0}case"%YAML":{if(this.yaml.explicit=!0,n.length!==1)return r(0,"%YAML directive should contain exactly one part"),!1;let[s]=n;if(s==="1.1"||s==="1.2")return this.yaml.version=s,!0;{let a=/^\d+\.\d+$/.test(s);return r(6,`Unsupported YAML version ${s}`,a),!1}}default:return r(0,`Unknown directive ${o}`,!0),!1}}tagName(e,r){if(e==="!")return"!";if(e[0]!=="!")return r(`Not a valid tag: ${e}`),null;if(e[1]==="<"){let a=e.slice(2,-1);return a==="!"||a==="!!"?(r(`Verbatim tags aren't resolved, so ${e} is invalid.`),null):(e[e.length-1]!==">"&&r("Verbatim tags must end with a >"),a)}let[,n,o]=e.match(/^(.*!)([^!]*)$/s);o||r(`The ${e} tag has no suffix`);let s=this.tags[n];if(s)try{return s+decodeURIComponent(o)}catch(a){return r(String(a)),null}return n==="!"?e:(r(`Could not resolve tag: ${e}`),null)}tagString(e){for(let[r,n]of Object.entries(this.tags))if(e.startsWith(n))return r+ton(e.substring(n.length));return e[0]==="!"?e:`!<${e}>`}toString(e){let r=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],n=Object.entries(this.tags),o;if(e&&n.length>0&&Xvt.isNode(e.contents)){let s={};Xin.visit(e.contents,(a,c)=>{Xvt.isNode(c)&&c.tag&&(s[c.tag]=!0)}),o=Object.keys(s)}else o=[];for(let[s,a]of n)s==="!!"&&a==="tag:yaml.org,2002:"||(!e||o.some(c=>c.startsWith(a)))&&r.push(`%TAG ${s} ${a}`);return r.join(`
`)}};nk.defaultYaml={explicit:!1,version:"1.2"};nk.defaultTags={"!!":"tag:yaml.org,2002:"};eyt.Directives=nk});var HK=m(ik=>{"use strict";var tyt=nn(),ron=rk();function non(t){if(/[\x00-\x19\s,[\]{}]/.test(t)){let r=`Anchor must not contain whitespace or control characters: ${JSON.stringify(t)}`;throw new Error(r)}return!0}function ryt(t){let e=new Set;return ron.visit(t,{Value(r,n){n.anchor&&e.add(n.anchor)}}),e}function nyt(t,e){for(let r=1;;++r){let n=`${t}${r}`;if(!e.has(n))return n}}function ion(t,e){let r=[],n=new Map,o=null;return{onAnchor:s=>{r.push(s),o??(o=ryt(t));let a=nyt(e,o);return o.add(a),a},setAnchors:()=>{for(let s of r){let a=n.get(s);if(typeof a=="object"&&a.anchor&&(tyt.isScalar(a.node)||tyt.isCollection(a.node)))a.node.anchor=a.anchor;else{let c=new Error("Failed to resolve repeated object (this should not happen)");throw c.source=s,c}}},sourceObjects:n}}ik.anchorIsValid=non;ik.anchorNames=ryt;ik.createNodeAnchors=ion;ik.findNewAnchor=nyt});var Hbe=m(iyt=>{"use strict";function ok(t,e,r,n){if(n&&typeof n=="object")if(Array.isArray(n))for(let o=0,s=n.length;o<s;++o){let a=n[o],c=ok(t,n,String(o),a);c===void 0?delete n[o]:c!==a&&(n[o]=c)}else if(n instanceof Map)for(let o of Array.from(n.keys())){let s=n.get(o),a=ok(t,n,o,s);a===void 0?n.delete(o):a!==s&&n.set(o,a)}else if(n instanceof Set)for(let o of Array.from(n)){let s=ok(t,n,o,o);s===void 0?n.delete(o):s!==o&&(n.delete(o),n.add(s))}else for(let[o,s]of Object.entries(n)){let a=ok(t,n,o,s);a===void 0?delete n[o]:a!==s&&(n[o]=a)}return t.call(e,r,n)}iyt.applyReviver=ok});var ry=m(syt=>{"use strict";var oon=nn();function oyt(t,e,r){if(Array.isArray(t))return t.map((n,o)=>oyt(n,String(o),r));if(t&&typeof t.toJSON=="function"){if(!r||!oon.hasAnchor(t))return t.toJSON(e,r);let n={aliasCount:0,count:1,res:void 0};r.anchors.set(t,n),r.onCreate=s=>{n.res=s,delete r.onCreate};let o=t.toJSON(e,r);return r.onCreate&&r.onCreate(o),o}return typeof t=="bigint"&&!r?.keep?Number(t):t}syt.toJS=oyt});var GK=m(cyt=>{"use strict";var son=Hbe(),ayt=nn(),aon=ry(),Gbe=class{constructor(e){Object.defineProperty(this,ayt.NODE_TYPE,{value:e})}clone(){let e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(e.range=this.range.slice()),e}toJS(e,{mapAsMap:r,maxAliasCount:n,onAnchor:o,reviver:s}={}){if(!ayt.isDocument(e))throw new TypeError("A document argument is required");let a={anchors:new Map,doc:e,keep:!0,mapAsMap:r===!0,mapKeyWarned:!1,maxAliasCount:typeof n=="number"?n:100},c=aon.toJS(this,"",a);if(typeof o=="function")for(let{count:l,res:u}of a.anchors.values())o(u,l);return typeof s=="function"?son.applyReviver(s,{"":c},"",c):c}};cyt.NodeBase=Gbe});var sk=m(lyt=>{"use strict";var con=HK(),lon=rk(),NR=nn(),uon=GK(),don=ry(),zbe=class extends uon.NodeBase{constructor(e){super(NR.ALIAS),this.source=e,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(e,r){let n;r?.aliasResolveCache?n=r.aliasResolveCache:(n=[],lon.visit(e,{Node:(s,a)=>{(NR.isAlias(a)||NR.hasAnchor(a))&&n.push(a)}}),r&&(r.aliasResolveCache=n));let o;for(let s of n){if(s===this)break;s.anchor===this.source&&(o=s)}return o}toJSON(e,r){if(!r)return{source:this.source};let{anchors:n,doc:o,maxAliasCount:s}=r,a=this.resolve(o,r);if(!a){let l=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(l)}let c=n.get(a);if(c||(don.toJS(a,null,r),c=n.get(a)),c?.res===void 0){let l="This should not happen: Alias anchor was not resolved?";throw new ReferenceError(l)}if(s>=0&&(c.count+=1,c.aliasCount===0&&(c.aliasCount=zK(o,a,n)),c.count*c.aliasCount>s)){let l="Excessive alias count indicates a resource exhaustion attack";throw new ReferenceError(l)}return c.res}toString(e,r,n){let o=`*${this.source}`;if(e){if(con.anchorIsValid(this.source),e.options.verifyAliasOrder&&!e.anchors.has(this.source)){let s=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(s)}if(e.implicitKey)return`${o} `}return o}};function zK(t,e,r){if(NR.isAlias(e)){let n=e.resolve(t),o=r&&n&&r.get(n);return o?o.count*o.aliasCount:0}else if(NR.isCollection(e)){let n=0;for(let o of e.items){let s=zK(t,o,r);s>n&&(n=s)}return n}else if(NR.isPair(e)){let n=zK(t,e.key,r),o=zK(t,e.value,r);return Math.max(n,o)}return 1}lyt.Alias=zbe});var Do=m(Wbe=>{"use strict";var fon=nn(),pon=GK(),hon=ry(),mon=t=>!t||typeof t!="function"&&typeof t!="object",ny=class extends pon.NodeBase{constructor(e){super(fon.SCALAR),this.value=e}toJSON(e,r){return r?.keep?this.value:hon.toJS(this.value,e,r)}toString(){return String(this.value)}};ny.BLOCK_FOLDED="BLOCK_FOLDED";ny.BLOCK_LITERAL="BLOCK_LITERAL";ny.PLAIN="PLAIN";ny.QUOTE_DOUBLE="QUOTE_DOUBLE";ny.QUOTE_SINGLE="QUOTE_SINGLE";Wbe.Scalar=ny;Wbe.isScalarValue=mon});var ak=m(dyt=>{"use strict";var gon=sk(),_C=nn(),uyt=Do(),_on="tag:yaml.org,2002:";function von(t,e,r){if(e){let n=r.filter(s=>s.tag===e),o=n.find(s=>!s.format)??n[0];if(!o)throw new Error(`Tag ${e} not found`);return o}return r.find(n=>n.identify?.(t)&&!n.format)}function yon(t,e,r){if(_C.isDocument(t)&&(t=t.contents),_C.isNode(t))return t;if(_C.isPair(t)){let f=r.schema[_C.MAP].createNode?.(r.schema,null,r);return f.items.push(t),f}(t instanceof String||t instanceof Number||t instanceof Boolean||typeof BigInt<"u"&&t instanceof BigInt)&&(t=t.valueOf());let{aliasDuplicateObjects:n,onAnchor:o,onTagObj:s,schema:a,sourceObjects:c}=r,l;if(n&&t&&typeof t=="object"){if(l=c.get(t),l)return l.anchor??(l.anchor=o(t)),new gon.Alias(l.anchor);l={anchor:null,node:null},c.set(t,l)}e?.startsWith("!!")&&(e=_on+e.slice(2));let u=von(t,e,a.tags);if(!u){if(t&&typeof t.toJSON=="function"&&(t=t.toJSON()),!t||typeof t!="object"){let f=new uyt.Scalar(t);return l&&(l.node=f),f}u=t instanceof Map?a[_C.MAP]:Symbol.iterator in Object(t)?a[_C.SEQ]:a[_C.MAP]}s&&(s(u),delete r.onTagObj);let d=u?.createNode?u.createNode(r.schema,t,r):typeof u?.nodeClass?.from=="function"?u.nodeClass.from(r.schema,t,r):new uyt.Scalar(t);return e?d.tag=e:u.default||(d.tag=u.tag),l&&(l.node=d),d}dyt.createNode=yon});var KK=m(WK=>{"use strict";var Eon=ak(),lh=nn(),Ton=GK();function Kbe(t,e,r){let n=r;for(let o=e.length-1;o>=0;--o){let s=e[o];if(typeof s=="number"&&Number.isInteger(s)&&s>=0){let a=[];a[s]=n,n=a}else n=new Map([[s,n]])}return Eon.createNode(n,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:t,sourceObjects:new Map})}var fyt=t=>t==null||typeof t=="object"&&!!t[Symbol.iterator]().next().done,Ybe=class extends Ton.NodeBase{constructor(e,r){super(e),Object.defineProperty(this,"schema",{value:r,configurable:!0,enumerable:!1,writable:!0})}clone(e){let r=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return e&&(r.schema=e),r.items=r.items.map(n=>lh.isNode(n)||lh.isPair(n)?n.clone(e):n),this.range&&(r.range=this.range.slice()),r}addIn(e,r){if(fyt(e))this.add(r);else{let[n,...o]=e,s=this.get(n,!0);if(lh.isCollection(s))s.addIn(o,r);else if(s===void 0&&this.schema)this.set(n,Kbe(this.schema,o,r));else throw new Error(`Expected YAML collection at ${n}. Remaining path: ${o}`)}}deleteIn(e){let[r,...n]=e;if(n.length===0)return this.delete(r);let o=this.get(r,!0);if(lh.isCollection(o))return o.deleteIn(n);throw new Error(`Expected YAML collection at ${r}. Remaining path: ${n}`)}getIn(e,r){let[n,...o]=e,s=this.get(n,!0);return o.length===0?!r&&lh.isScalar(s)?s.value:s:lh.isCollection(s)?s.getIn(o,r):void 0}hasAllNullValues(e){return this.items.every(r=>{if(!lh.isPair(r))return!1;let n=r.value;return n==null||e&&lh.isScalar(n)&&n.value==null&&!n.commentBefore&&!n.comment&&!n.tag})}hasIn(e){let[r,...n]=e;if(n.length===0)return this.has(r);let o=this.get(r,!0);return lh.isCollection(o)?o.hasIn(n):!1}setIn(e,r){let[n,...o]=e;if(o.length===0)this.set(n,r);else{let s=this.get(n,!0);if(lh.isCollection(s))s.setIn(o,r);else if(s===void 0&&this.schema)this.set(n,Kbe(this.schema,o,r));else throw new Error(`Expected YAML collection at ${n}. Remaining path: ${o}`)}}};WK.Collection=Ybe;WK.collectionFromPath=Kbe;WK.isEmptyPath=fyt});var ck=m(YK=>{"use strict";var Son=t=>t.replace(/^(?!$)(?: $)?/gm,"#");function Qbe(t,e){return/^\n+$/.test(t)?t.substring(1):e?t.replace(/^(?! *$)/gm,e):t}var bon=(t,e,r)=>t.endsWith(`
`)?Qbe(r,e):r.includes(`
`)?`
`+Qbe(r,e):(t.endsWith(" ")?"":" ")+r;YK.indentComment=Qbe;YK.lineComment=bon;YK.stringifyComment=Son});var hyt=m(lk=>{"use strict";var Con="flow",Zbe="block",QK="quoted";function Aon(t,e,r="flow",{indentAtStart:n,lineWidth:o=80,minContentWidth:s=20,onFold:a,onOverflow:c}={}){if(!o||o<0)return t;o<s&&(s=0);let l=Math.max(1+s,1+o-e.length);if(t.length<=l)return t;let u=[],d={},f=o-e.length;typeof n=="number"&&(n>o-Math.max(2,s)?u.push(0):f=o-n);let p,h,_=!1,g=-1,v=-1,E=-1;r===Zbe&&(g=pyt(t,g,e.length),g!==-1&&(f=g+l));for(let S;S=t[g+=1];){if(r===QK&&S==="\\"){switch(v=g,t[g+1]){case"x":g+=3;break;case"u":g+=5;break;case"U":g+=9;break;default:g+=1}E=g}if(S===`
`)r===Zbe&&(g=pyt(t,g,e.length)),f=g+e.length+l,p=void 0;else{if(S===" "&&h&&h!==" "&&h!==`
`&&h!=="	"){let b=t[g+1];b&&b!==" "&&b!==`
`&&b!=="	"&&(p=g)}if(g>=f)if(p)u.push(p),f=p+l,p=void 0;else if(r===QK){for(;h===" "||h==="	";)h=S,S=t[g+=1],_=!0;let b=g>E+1?g-2:v-1;if(d[b])return t;u.push(b),d[b]=!0,f=b+l,p=void 0}else _=!0}h=S}if(_&&c&&c(),u.length===0)return t;a&&a();let y=t.slice(0,u[0]);for(let S=0;S<u.length;++S){let b=u[S],w=u[S+1]||t.length;b===0?y=`
${e}${t.slice(0,w)}`:(r===QK&&d[b]&&(y+=`${t[b]}\\`),y+=`
${e}${t.slice(b+1,w)}`)}return y}function pyt(t,e,r){let n=e,o=e+1,s=t[o];for(;s===" "||s==="	";)if(e<o+r)s=t[++e];else{do s=t[++e];while(s&&s!==`
`);n=e,o=e+1,s=t[o]}return n}lk.FOLD_BLOCK=Zbe;lk.FOLD_FLOW=Con;lk.FOLD_QUOTED=QK;lk.foldFlowLines=Aon});var dk=m(myt=>{"use strict";var l0=Do(),iy=hyt(),JK=(t,e)=>({indentAtStart:e?t.indent.length:t.indentAtStart,lineWidth:t.options.lineWidth,minContentWidth:t.options.minContentWidth}),XK=t=>/^(%|---|\.\.\.)/m.test(t);function xon(t,e,r){if(!e||e<0)return!1;let n=e-r,o=t.length;if(o<=n)return!1;for(let s=0,a=0;s<o;++s)if(t[s]===`
`){if(s-a>n)return!0;if(a=s+1,o-a<=n)return!1}return!0}function uk(t,e){let r=JSON.stringify(t);if(e.options.doubleQuotedAsJSON)return r;let{implicitKey:n}=e,o=e.options.doubleQuotedMinMultiLineLength,s=e.indent||(XK(t)?"  ":""),a="",c=0;for(let l=0,u=r[l];u;u=r[++l])if(u===" "&&r[l+1]==="\\"&&r[l+2]==="n"&&(a+=r.slice(c,l)+"\\ ",l+=1,c=l,u="\\"),u==="\\")switch(r[l+1]){case"u":{a+=r.slice(c,l);let d=r.substr(l+2,4);switch(d){case"0000":a+="\\0";break;case"0007":a+="\\a";break;case"000b":a+="\\v";break;case"001b":a+="\\e";break;case"0085":a+="\\N";break;case"00a0":a+="\\_";break;case"2028":a+="\\L";break;case"2029":a+="\\P";break;default:d.substr(0,2)==="00"?a+="\\x"+d.substr(2):a+=r.substr(l,6)}l+=5,c=l+1}break;case"n":if(n||r[l+2]==='"'||r.length<o)l+=1;else{for(a+=r.slice(c,l)+`

`;r[l+2]==="\\"&&r[l+3]==="n"&&r[l+4]!=='"';)a+=`
`,l+=2;a+=s,r[l+2]===" "&&(a+="\\"),l+=1,c=l+1}break;default:l+=1}return a=c?a+r.slice(c):r,n?a:iy.foldFlowLines(a,s,iy.FOLD_QUOTED,JK(e,!1))}function Jbe(t,e){if(e.options.singleQuote===!1||e.implicitKey&&t.includes(`
`)||/[ \t]\n|\n[ \t]/.test(t))return uk(t,e);let r=e.indent||(XK(t)?"  ":""),n="'"+t.replace(/'/g,"''").replace(/\n+/g,`$&
${r}`)+"'";return e.implicitKey?n:iy.foldFlowLines(n,r,iy.FOLD_FLOW,JK(e,!1))}function LR(t,e){let{singleQuote:r}=e.options,n;if(r===!1)n=uk;else{let o=t.includes('"'),s=t.includes("'");o&&!s?n=Jbe:s&&!o?n=uk:n=r?Jbe:uk}return n(t,e)}var Xbe;try{Xbe=new RegExp(`(^|(?<!
))
+(?!
|$)`,"g")}catch{Xbe=/\n+(?!\n|$)/g}function ZK({comment:t,type:e,value:r},n,o,s){let{blockQuote:a,commentString:c,lineWidth:l}=n.options;if(!a||/\n[\t ]+$/.test(r))return LR(r,n);let u=n.indent||(n.forceBlockIndent||XK(r)?"  ":""),d=a==="literal"?!0:a==="folded"||e===l0.Scalar.BLOCK_FOLDED?!1:e===l0.Scalar.BLOCK_LITERAL?!0:!xon(r,l,u.length);if(!r)return d?`|
`:`>
`;let f,p;for(p=r.length;p>0;--p){let w=r[p-1];if(w!==`
`&&w!=="	"&&w!==" ")break}let h=r.substring(p),_=h.indexOf(`
`);_===-1?f="-":r===h||_!==h.length-1?(f="+",s&&s()):f="",h&&(r=r.slice(0,-h.length),h[h.length-1]===`
`&&(h=h.slice(0,-1)),h=h.replace(Xbe,`$&${u}`));let g=!1,v,E=-1;for(v=0;v<r.length;++v){let w=r[v];if(w===" ")g=!0;else if(w===`
`)E=v;else break}let y=r.substring(0,E<v?E+1:v);y&&(r=r.substring(y.length),y=y.replace(/\n+/g,`$&${u}`));let b=(g?u?"2":"1":"")+f;if(t&&(b+=" "+c(t.replace(/ ?[\r\n]+/g," ")),o&&o()),!d){let w=r.replace(/\n+/g,`
$&`).replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${u}`),P=!1,A=JK(n,!0);a!=="folded"&&e!==l0.Scalar.BLOCK_FOLDED&&(A.onOverflow=()=>{P=!0});let O=iy.foldFlowLines(`${y}${w}${h}`,u,iy.FOLD_BLOCK,A);if(!P)return`>${b}
${u}${O}`}return r=r.replace(/\n+/g,`$&${u}`),`|${b}
${u}${y}${r}${h}`}function won(t,e,r,n){let{type:o,value:s}=t,{actualString:a,implicitKey:c,indent:l,indentStep:u,inFlow:d}=e;if(c&&s.includes(`
`)||d&&/[[\]{},]/.test(s))return LR(s,e);if(/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(s))return c||d||!s.includes(`
`)?LR(s,e):ZK(t,e,r,n);if(!c&&!d&&o!==l0.Scalar.PLAIN&&s.includes(`
`))return ZK(t,e,r,n);if(XK(s)){if(l==="")return e.forceBlockIndent=!0,ZK(t,e,r,n);if(c&&l===u)return LR(s,e)}let f=s.replace(/\n+/g,`$&
${l}`);if(a){let p=g=>g.default&&g.tag!=="tag:yaml.org,2002:str"&&g.test?.test(f),{compat:h,tags:_}=e.doc.schema;if(_.some(p)||h?.some(p))return LR(s,e)}return c?f:iy.foldFlowLines(f,l,iy.FOLD_FLOW,JK(e,!1))}function Ion(t,e,r,n){let{implicitKey:o,inFlow:s}=e,a=typeof t.value=="string"?t:Object.assign({},t,{value:String(t.value)}),{type:c}=t;c!==l0.Scalar.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(a.value)&&(c=l0.Scalar.QUOTE_DOUBLE);let l=d=>{switch(d){case l0.Scalar.BLOCK_FOLDED:case l0.Scalar.BLOCK_LITERAL:return o||s?LR(a.value,e):ZK(a,e,r,n);case l0.Scalar.QUOTE_DOUBLE:return uk(a.value,e);case l0.Scalar.QUOTE_SINGLE:return Jbe(a.value,e);case l0.Scalar.PLAIN:return won(a,e,r,n);default:return null}},u=l(c);if(u===null){let{defaultKeyType:d,defaultStringType:f}=e.options,p=o&&d||f;if(u=l(p),u===null)throw new Error(`Unsupported default string type ${p}`)}return u}myt.stringifyString=Ion});var fk=m(eCe=>{"use strict";var Pon=HK(),oy=nn(),Ron=ck(),Oon=dk();function Mon(t,e){let r=Object.assign({blockQuote:!0,commentString:Ron.stringifyComment,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},t.schema.toStringOptions,e),n;switch(r.collectionStyle){case"block":n=!1;break;case"flow":n=!0;break;default:n=null}return{anchors:new Set,doc:t,flowCollectionPadding:r.flowCollectionPadding?" ":"",indent:"",indentStep:typeof r.indent=="number"?" ".repeat(r.indent):"  ",inFlow:n,options:r}}function Non(t,e){if(e.tag){let o=t.filter(s=>s.tag===e.tag);if(o.length>0)return o.find(s=>s.format===e.format)??o[0]}let r,n;if(oy.isScalar(e)){n=e.value;let o=t.filter(s=>s.identify?.(n));if(o.length>1){let s=o.filter(a=>a.test);s.length>0&&(o=s)}r=o.find(s=>s.format===e.format)??o.find(s=>!s.format)}else n=e,r=t.find(o=>o.nodeClass&&n instanceof o.nodeClass);if(!r){let o=n?.constructor?.name??(n===null?"null":typeof n);throw new Error(`Tag not resolved for ${o} value`)}return r}function Lon(t,e,{anchors:r,doc:n}){if(!n.directives)return"";let o=[],s=(oy.isScalar(t)||oy.isCollection(t))&&t.anchor;s&&Pon.anchorIsValid(s)&&(r.add(s),o.push(`&${s}`));let a=t.tag??(e.default?null:e.tag);return a&&o.push(n.directives.tagString(a)),o.join(" ")}function kon(t,e,r,n){if(oy.isPair(t))return t.toString(e,r,n);if(oy.isAlias(t)){if(e.doc.directives)return t.toString(e);if(e.resolvedAliases?.has(t))throw new TypeError("Cannot stringify circular structure without alias nodes");e.resolvedAliases?e.resolvedAliases.add(t):e.resolvedAliases=new Set([t]),t=t.resolve(e.doc)}let o,s=oy.isNode(t)?t:e.doc.createNode(t,{onTagObj:l=>o=l});o??(o=Non(e.doc.schema.tags,s));let a=Lon(s,o,e);a.length>0&&(e.indentAtStart=(e.indentAtStart??0)+a.length+1);let c=typeof o.stringify=="function"?o.stringify(s,e,r,n):oy.isScalar(s)?Oon.stringifyString(s,e,r,n):s.toString(e,r,n);return a?oy.isScalar(s)||c[0]==="{"||c[0]==="["?`${a} ${c}`:`${a}
${e.indent}${c}`:c}eCe.createStringifyContext=Mon;eCe.stringify=kon});var yyt=m(vyt=>{"use strict";var Dg=nn(),gyt=Do(),_yt=fk(),pk=ck();function Don({key:t,value:e},r,n,o){let{allNullValues:s,doc:a,indent:c,indentStep:l,options:{commentString:u,indentSeq:d,simpleKeys:f}}=r,p=Dg.isNode(t)&&t.comment||null;if(f){if(p)throw new Error("With simple keys, key nodes cannot have comments");if(Dg.isCollection(t)||!Dg.isNode(t)&&typeof t=="object"){let A="With simple keys, collection cannot be used as a key value";throw new Error(A)}}let h=!f&&(!t||p&&e==null&&!r.inFlow||Dg.isCollection(t)||(Dg.isScalar(t)?t.type===gyt.Scalar.BLOCK_FOLDED||t.type===gyt.Scalar.BLOCK_LITERAL:typeof t=="object"));r=Object.assign({},r,{allNullValues:!1,implicitKey:!h&&(f||!s),indent:c+l});let _=!1,g=!1,v=_yt.stringify(t,r,()=>_=!0,()=>g=!0);if(!h&&!r.inFlow&&v.length>1024){if(f)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");h=!0}if(r.inFlow){if(s||e==null)return _&&n&&n(),v===""?"?":h?`? ${v}`:v}else if(s&&!f||e==null&&h)return v=`? ${v}`,p&&!_?v+=pk.lineComment(v,r.indent,u(p)):g&&o&&o(),v;_&&(p=null),h?(p&&(v+=pk.lineComment(v,r.indent,u(p))),v=`? ${v}
${c}:`):(v=`${v}:`,p&&(v+=pk.lineComment(v,r.indent,u(p))));let E,y,S;Dg.isNode(e)?(E=!!e.spaceBefore,y=e.commentBefore,S=e.comment):(E=!1,y=null,S=null,e&&typeof e=="object"&&(e=a.createNode(e))),r.implicitKey=!1,!h&&!p&&Dg.isScalar(e)&&(r.indentAtStart=v.length+1),g=!1,!d&&l.length>=2&&!r.inFlow&&!h&&Dg.isSeq(e)&&!e.flow&&!e.tag&&!e.anchor&&(r.indent=r.indent.substring(2));let b=!1,w=_yt.stringify(e,r,()=>b=!0,()=>g=!0),P=" ";if(p||E||y){if(P=E?`
`:"",y){let A=u(y);P+=`
${pk.indentComment(A,r.indent)}`}w===""&&!r.inFlow?P===`
`&&S&&(P=`

`):P+=`
${r.indent}`}else if(!h&&Dg.isCollection(e)){let A=w[0],O=w.indexOf(`
`),L=O!==-1,j=r.inFlow??e.flow??e.items.length===0;if(L||!j){let $=!1;if(L&&(A==="&"||A==="!")){let Q=w.indexOf(" ");A==="&"&&Q!==-1&&Q<O&&w[Q+1]==="!"&&(Q=w.indexOf(" ",Q+1)),(Q===-1||O<Q)&&($=!0)}$||(P=`
${r.indent}`)}}else(w===""||w[0]===`
`)&&(P="");return v+=P+w,r.inFlow?b&&n&&n():S&&!b?v+=pk.lineComment(v,r.indent,u(S)):g&&o&&o(),v}vyt.stringifyPair=Don});var rCe=m(tCe=>{"use strict";var Eyt=require("process");function Uon(t,...e){t==="debug"&&console.log(...e)}function qon(t,e){(t==="debug"||t==="warn")&&(typeof Eyt.emitWarning=="function"?Eyt.emitWarning(e):console.warn(e))}tCe.debug=Uon;tCe.warn=qon});var nY=m(rY=>{"use strict";var hk=nn(),Tyt=Do(),eY="<<",tY={identify:t=>t===eY||typeof t=="symbol"&&t.description===eY,default:"key",tag:"tag:yaml.org,2002:merge",test:/^<<$/,resolve:()=>Object.assign(new Tyt.Scalar(Symbol(eY)),{addToJSMap:Syt}),stringify:()=>eY},Fon=(t,e)=>(tY.identify(e)||hk.isScalar(e)&&(!e.type||e.type===Tyt.Scalar.PLAIN)&&tY.identify(e.value))&&t?.doc.schema.tags.some(r=>r.tag===tY.tag&&r.default);function Syt(t,e,r){if(r=t&&hk.isAlias(r)?r.resolve(t.doc):r,hk.isSeq(r))for(let n of r.items)nCe(t,e,n);else if(Array.isArray(r))for(let n of r)nCe(t,e,n);else nCe(t,e,r)}function nCe(t,e,r){let n=t&&hk.isAlias(r)?r.resolve(t.doc):r;if(!hk.isMap(n))throw new Error("Merge sources must be maps or map aliases");let o=n.toJSON(null,t,Map);for(let[s,a]of o)e instanceof Map?e.has(s)||e.set(s,a):e instanceof Set?e.add(s):Object.prototype.hasOwnProperty.call(e,s)||Object.defineProperty(e,s,{value:a,writable:!0,enumerable:!0,configurable:!0});return e}rY.addMergeToJSMap=Syt;rY.isMergeKey=Fon;rY.merge=tY});var oCe=m(Ayt=>{"use strict";var jon=rCe(),byt=nY(),Bon=fk(),Cyt=nn(),iCe=ry();function $on(t,e,{key:r,value:n}){if(Cyt.isNode(r)&&r.addToJSMap)r.addToJSMap(t,e,n);else if(byt.isMergeKey(t,r))byt.addMergeToJSMap(t,e,n);else{let o=iCe.toJS(r,"",t);if(e instanceof Map)e.set(o,iCe.toJS(n,o,t));else if(e instanceof Set)e.add(o);else{let s=Von(r,o,t),a=iCe.toJS(n,s,t);s in e?Object.defineProperty(e,s,{value:a,writable:!0,enumerable:!0,configurable:!0}):e[s]=a}}return e}function Von(t,e,r){if(e===null)return"";if(typeof e!="object")return String(e);if(Cyt.isNode(t)&&r?.doc){let n=Bon.createStringifyContext(r.doc,{});n.anchors=new Set;for(let s of r.anchors.keys())n.anchors.add(s.anchor);n.inFlow=!0,n.inStringifyKey=!0;let o=t.toString(n);if(!r.mapKeyWarned){let s=JSON.stringify(o);s.length>40&&(s=s.substring(0,36)+'..."'),jon.warn(r.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${s}. Set mapAsMap: true to use object keys.`),r.mapKeyWarned=!0}return o}return JSON.stringify(e)}Ayt.addPairToJSMap=$on});var sy=m(sCe=>{"use strict";var xyt=ak(),Hon=yyt(),Gon=oCe(),iY=nn();function zon(t,e,r){let n=xyt.createNode(t,void 0,r),o=xyt.createNode(e,void 0,r);return new oY(n,o)}var oY=class t{constructor(e,r=null){Object.defineProperty(this,iY.NODE_TYPE,{value:iY.PAIR}),this.key=e,this.value=r}clone(e){let{key:r,value:n}=this;return iY.isNode(r)&&(r=r.clone(e)),iY.isNode(n)&&(n=n.clone(e)),new t(r,n)}toJSON(e,r){let n=r?.mapAsMap?new Map:{};return Gon.addPairToJSMap(r,n,this)}toString(e,r,n){return e?.doc?Hon.stringifyPair(this,e,r,n):JSON.stringify(this)}};sCe.Pair=oY;sCe.createPair=zon});var aCe=m(Iyt=>{"use strict";var vC=nn(),wyt=fk(),sY=ck();function Won(t,e,r){return(e.inFlow??t.flow?Yon:Kon)(t,e,r)}function Kon({comment:t,items:e},r,{blockItemPrefix:n,flowChars:o,itemIndent:s,onChompKeep:a,onComment:c}){let{indent:l,options:{commentString:u}}=r,d=Object.assign({},r,{indent:s,type:null}),f=!1,p=[];for(let _=0;_<e.length;++_){let g=e[_],v=null;if(vC.isNode(g))!f&&g.spaceBefore&&p.push(""),aY(r,p,g.commentBefore,f),g.comment&&(v=g.comment);else if(vC.isPair(g)){let y=vC.isNode(g.key)?g.key:null;y&&(!f&&y.spaceBefore&&p.push(""),aY(r,p,y.commentBefore,f))}f=!1;let E=wyt.stringify(g,d,()=>v=null,()=>f=!0);v&&(E+=sY.lineComment(E,s,u(v))),f&&v&&(f=!1),p.push(n+E)}let h;if(p.length===0)h=o.start+o.end;else{h=p[0];for(let _=1;_<p.length;++_){let g=p[_];h+=g?`
${l}${g}`:`
`}}return t?(h+=`
`+sY.indentComment(u(t),l),c&&c()):f&&a&&a(),h}function Yon({items:t},e,{flowChars:r,itemIndent:n}){let{indent:o,indentStep:s,flowCollectionPadding:a,options:{commentString:c}}=e;n+=s;let l=Object.assign({},e,{indent:n,inFlow:!0,type:null}),u=!1,d=0,f=[];for(let _=0;_<t.length;++_){let g=t[_],v=null;if(vC.isNode(g))g.spaceBefore&&f.push(""),aY(e,f,g.commentBefore,!1),g.comment&&(v=g.comment);else if(vC.isPair(g)){let y=vC.isNode(g.key)?g.key:null;y&&(y.spaceBefore&&f.push(""),aY(e,f,y.commentBefore,!1),y.comment&&(u=!0));let S=vC.isNode(g.value)?g.value:null;S?(S.comment&&(v=S.comment),S.commentBefore&&(u=!0)):g.value==null&&y?.comment&&(v=y.comment)}v&&(u=!0);let E=wyt.stringify(g,l,()=>v=null);_<t.length-1&&(E+=","),v&&(E+=sY.lineComment(E,n,c(v))),!u&&(f.length>d||E.includes(`
`))&&(u=!0),f.push(E),d=f.length}let{start:p,end:h}=r;if(f.length===0)return p+h;if(!u){let _=f.reduce((g,v)=>g+v.length+2,2);u=e.options.lineWidth>0&&_>e.options.lineWidth}if(u){let _=p;for(let g of f)_+=g?`
${s}${o}${g}`:`
`;return`${_}
${o}${h}`}else return`${p}${a}${f.join(" ")}${a}${h}`}function aY({indent:t,options:{commentString:e}},r,n,o){if(n&&o&&(n=n.replace(/^\n+/,"")),n){let s=sY.indentComment(e(n),t);r.push(s.trimStart())}}Iyt.stringifyCollection=Won});var cy=m(lCe=>{"use strict";var Qon=aCe(),Zon=oCe(),Jon=KK(),ay=nn(),cY=sy(),Xon=Do();function mk(t,e){let r=ay.isScalar(e)?e.value:e;for(let n of t)if(ay.isPair(n)&&(n.key===e||n.key===r||ay.isScalar(n.key)&&n.key.value===r))return n}var cCe=class extends Jon.Collection{static get tagName(){return"tag:yaml.org,2002:map"}constructor(e){super(ay.MAP,e),this.items=[]}static from(e,r,n){let{keepUndefined:o,replacer:s}=n,a=new this(e),c=(l,u)=>{if(typeof s=="function")u=s.call(r,l,u);else if(Array.isArray(s)&&!s.includes(l))return;(u!==void 0||o)&&a.items.push(cY.createPair(l,u,n))};if(r instanceof Map)for(let[l,u]of r)c(l,u);else if(r&&typeof r=="object")for(let l of Object.keys(r))c(l,r[l]);return typeof e.sortMapEntries=="function"&&a.items.sort(e.sortMapEntries),a}add(e,r){let n;ay.isPair(e)?n=e:!e||typeof e!="object"||!("key"in e)?n=new cY.Pair(e,e?.value):n=new cY.Pair(e.key,e.value);let o=mk(this.items,n.key),s=this.schema?.sortMapEntries;if(o){if(!r)throw new Error(`Key ${n.key} already set`);ay.isScalar(o.value)&&Xon.isScalarValue(n.value)?o.value.value=n.value:o.value=n.value}else if(s){let a=this.items.findIndex(c=>s(n,c)<0);a===-1?this.items.push(n):this.items.splice(a,0,n)}else this.items.push(n)}delete(e){let r=mk(this.items,e);return r?this.items.splice(this.items.indexOf(r),1).length>0:!1}get(e,r){let o=mk(this.items,e)?.value;return(!r&&ay.isScalar(o)?o.value:o)??void 0}has(e){return!!mk(this.items,e)}set(e,r){this.add(new cY.Pair(e,r),!0)}toJSON(e,r,n){let o=n?new n:r?.mapAsMap?new Map:{};r?.onCreate&&r.onCreate(o);for(let s of this.items)Zon.addPairToJSMap(r,o,s);return o}toString(e,r,n){if(!e)return JSON.stringify(this);for(let o of this.items)if(!ay.isPair(o))throw new Error(`Map items must all be pairs; found ${JSON.stringify(o)} instead`);return!e.allNullValues&&this.hasAllNullValues(!1)&&(e=Object.assign({},e,{allNullValues:!0})),Qon.stringifyCollection(this,e,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:e.indent||"",onChompKeep:n,onComment:r})}};lCe.YAMLMap=cCe;lCe.findPair=mk});var kR=m(Ryt=>{"use strict";var esn=nn(),Pyt=cy(),tsn={collection:"map",default:!0,nodeClass:Pyt.YAMLMap,tag:"tag:yaml.org,2002:map",resolve(t,e){return esn.isMap(t)||e("Expected a mapping for this tag"),t},createNode:(t,e,r)=>Pyt.YAMLMap.from(t,e,r)};Ryt.map=tsn});var ly=m(Oyt=>{"use strict";var rsn=ak(),nsn=aCe(),isn=KK(),uY=nn(),osn=Do(),ssn=ry(),uCe=class extends isn.Collection{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(e){super(uY.SEQ,e),this.items=[]}add(e){this.items.push(e)}delete(e){let r=lY(e);return typeof r!="number"?!1:this.items.splice(r,1).length>0}get(e,r){let n=lY(e);if(typeof n!="number")return;let o=this.items[n];return!r&&uY.isScalar(o)?o.value:o}has(e){let r=lY(e);return typeof r=="number"&&r<this.items.length}set(e,r){let n=lY(e);if(typeof n!="number")throw new Error(`Expected a valid index, not ${e}.`);let o=this.items[n];uY.isScalar(o)&&osn.isScalarValue(r)?o.value=r:this.items[n]=r}toJSON(e,r){let n=[];r?.onCreate&&r.onCreate(n);let o=0;for(let s of this.items)n.push(ssn.toJS(s,String(o++),r));return n}toString(e,r,n){return e?nsn.stringifyCollection(this,e,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(e.indent||"")+"  ",onChompKeep:n,onComment:r}):JSON.stringify(this)}static from(e,r,n){let{replacer:o}=n,s=new this(e);if(r&&Symbol.iterator in Object(r)){let a=0;for(let c of r){if(typeof o=="function"){let l=r instanceof Set?c:String(a++);c=o.call(r,l,c)}s.items.push(rsn.createNode(c,void 0,n))}}return s}};function lY(t){let e=uY.isScalar(t)?t.value:t;return e&&typeof e=="string"&&(e=Number(e)),typeof e=="number"&&Number.isInteger(e)&&e>=0?e:null}Oyt.YAMLSeq=uCe});var DR=m(Nyt=>{"use strict";var asn=nn(),Myt=ly(),csn={collection:"seq",default:!0,nodeClass:Myt.YAMLSeq,tag:"tag:yaml.org,2002:seq",resolve(t,e){return asn.isSeq(t)||e("Expected a sequence for this tag"),t},createNode:(t,e,r)=>Myt.YAMLSeq.from(t,e,r)};Nyt.seq=csn});var gk=m(Lyt=>{"use strict";var lsn=dk(),usn={identify:t=>typeof t=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify(t,e,r,n){return e=Object.assign({actualString:!0},e),lsn.stringifyString(t,e,r,n)}};Lyt.string=usn});var dY=m(Uyt=>{"use strict";var kyt=Do(),Dyt={identify:t=>t==null,createNode:()=>new kyt.Scalar(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new kyt.Scalar(null),stringify:({source:t},e)=>typeof t=="string"&&Dyt.test.test(t)?t:e.options.nullStr};Uyt.nullTag=Dyt});var dCe=m(Fyt=>{"use strict";var dsn=Do(),qyt={identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:t=>new dsn.Scalar(t[0]==="t"||t[0]==="T"),stringify({source:t,value:e},r){if(t&&qyt.test.test(t)){let n=t[0]==="t"||t[0]==="T";if(e===n)return t}return e?r.options.trueStr:r.options.falseStr}};Fyt.boolTag=qyt});var UR=m(jyt=>{"use strict";function fsn({format:t,minFractionDigits:e,tag:r,value:n}){if(typeof n=="bigint")return String(n);let o=typeof n=="number"?n:Number(n);if(!isFinite(o))return isNaN(o)?".nan":o<0?"-.inf":".inf";let s=Object.is(n,-0)?"-0":JSON.stringify(n);if(!t&&e&&(!r||r==="tag:yaml.org,2002:float")&&/^\d/.test(s)){let a=s.indexOf(".");a<0&&(a=s.length,s+=".");let c=e-(s.length-a-1);for(;c-- >0;)s+="0"}return s}jyt.stringifyNumber=fsn});var pCe=m(fY=>{"use strict";var psn=Do(),fCe=UR(),hsn={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:t=>t.slice(-3).toLowerCase()==="nan"?NaN:t[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:fCe.stringifyNumber},msn={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t),stringify(t){let e=Number(t.value);return isFinite(e)?e.toExponential():fCe.stringifyNumber(t)}},gsn={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(t){let e=new psn.Scalar(parseFloat(t)),r=t.indexOf(".");return r!==-1&&t[t.length-1]==="0"&&(e.minFractionDigits=t.length-r-1),e},stringify:fCe.stringifyNumber};fY.float=gsn;fY.floatExp=msn;fY.floatNaN=hsn});var mCe=m(hY=>{"use strict";var Byt=UR(),pY=t=>typeof t=="bigint"||Number.isInteger(t),hCe=(t,e,r,{intAsBigInt:n})=>n?BigInt(t):parseInt(t.substring(e),r);function $yt(t,e,r){let{value:n}=t;return pY(n)&&n>=0?r+n.toString(e):Byt.stringifyNumber(t)}var _sn={identify:t=>pY(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(t,e,r)=>hCe(t,2,8,r),stringify:t=>$yt(t,8,"0o")},vsn={identify:pY,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(t,e,r)=>hCe(t,0,10,r),stringify:Byt.stringifyNumber},ysn={identify:t=>pY(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(t,e,r)=>hCe(t,2,16,r),stringify:t=>$yt(t,16,"0x")};hY.int=vsn;hY.intHex=ysn;hY.intOct=_sn});var Hyt=m(Vyt=>{"use strict";var Esn=kR(),Tsn=dY(),Ssn=DR(),bsn=gk(),Csn=dCe(),gCe=pCe(),_Ce=mCe(),Asn=[Esn.map,Ssn.seq,bsn.string,Tsn.nullTag,Csn.boolTag,_Ce.intOct,_Ce.int,_Ce.intHex,gCe.floatNaN,gCe.floatExp,gCe.float];Vyt.schema=Asn});var Wyt=m(zyt=>{"use strict";var xsn=Do(),wsn=kR(),Isn=DR();function Gyt(t){return typeof t=="bigint"||Number.isInteger(t)}var mY=({value:t})=>JSON.stringify(t),Psn=[{identify:t=>typeof t=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify:mY},{identify:t=>t==null,createNode:()=>new xsn.Scalar(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:mY},{identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^true$|^false$/,resolve:t=>t==="true",stringify:mY},{identify:Gyt,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(t,e,{intAsBigInt:r})=>r?BigInt(t):parseInt(t,10),stringify:({value:t})=>Gyt(t)?t.toString():JSON.stringify(t)},{identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:t=>parseFloat(t),stringify:mY}],Rsn={default:!0,tag:"",test:/^/,resolve(t,e){return e(`Unresolved plain scalar ${JSON.stringify(t)}`),t}},Osn=[wsn.map,Isn.seq].concat(Psn,Rsn);zyt.schema=Osn});var yCe=m(Kyt=>{"use strict";var _k=require("buffer"),vCe=Do(),Msn=dk(),Nsn={identify:t=>t instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(t,e){if(typeof _k.Buffer=="function")return _k.Buffer.from(t,"base64");if(typeof atob=="function"){let r=atob(t.replace(/[\n\r]/g,"")),n=new Uint8Array(r.length);for(let o=0;o<r.length;++o)n[o]=r.charCodeAt(o);return n}else return e("This environment does not support reading binary tags; either Buffer or atob is required"),t},stringify({comment:t,type:e,value:r},n,o,s){if(!r)return"";let a=r,c;if(typeof _k.Buffer=="function")c=a instanceof _k.Buffer?a.toString("base64"):_k.Buffer.from(a.buffer).toString("base64");else if(typeof btoa=="function"){let l="";for(let u=0;u<a.length;++u)l+=String.fromCharCode(a[u]);c=btoa(l)}else throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");if(e??(e=vCe.Scalar.BLOCK_LITERAL),e!==vCe.Scalar.QUOTE_DOUBLE){let l=Math.max(n.options.lineWidth-n.indent.length,n.options.minContentWidth),u=Math.ceil(c.length/l),d=new Array(u);for(let f=0,p=0;f<u;++f,p+=l)d[f]=c.substr(p,l);c=d.join(e===vCe.Scalar.BLOCK_LITERAL?`
`:" ")}return Msn.stringifyString({comment:t,type:e,value:c},n,o,s)}};Kyt.binary=Nsn});var vY=m(_Y=>{"use strict";var gY=nn(),ECe=sy(),Lsn=Do(),ksn=ly();function Yyt(t,e){if(gY.isSeq(t))for(let r=0;r<t.items.length;++r){let n=t.items[r];if(!gY.isPair(n)){if(gY.isMap(n)){n.items.length>1&&e("Each pair must have its own sequence indicator");let o=n.items[0]||new ECe.Pair(new Lsn.Scalar(null));if(n.commentBefore&&(o.key.commentBefore=o.key.commentBefore?`${n.commentBefore}
${o.key.commentBefore}`:n.commentBefore),n.comment){let s=o.value??o.key;s.comment=s.comment?`${n.comment}
${s.comment}`:n.comment}n=o}t.items[r]=gY.isPair(n)?n:new ECe.Pair(n)}}else e("Expected a sequence for this tag");return t}function Qyt(t,e,r){let{replacer:n}=r,o=new ksn.YAMLSeq(t);o.tag="tag:yaml.org,2002:pairs";let s=0;if(e&&Symbol.iterator in Object(e))for(let a of e){typeof n=="function"&&(a=n.call(e,String(s++),a));let c,l;if(Array.isArray(a))if(a.length===2)c=a[0],l=a[1];else throw new TypeError(`Expected [key, value] tuple: ${a}`);else if(a&&a instanceof Object){let u=Object.keys(a);if(u.length===1)c=u[0],l=a[c];else throw new TypeError(`Expected tuple with one key, not ${u.length} keys`)}else c=a;o.items.push(ECe.createPair(c,l,r))}return o}var Dsn={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:Yyt,createNode:Qyt};_Y.createPairs=Qyt;_Y.pairs=Dsn;_Y.resolvePairs=Yyt});var bCe=m(SCe=>{"use strict";var Zyt=nn(),TCe=ry(),vk=cy(),Usn=ly(),Jyt=vY(),yC=class t extends Usn.YAMLSeq{constructor(){super(),this.add=vk.YAMLMap.prototype.add.bind(this),this.delete=vk.YAMLMap.prototype.delete.bind(this),this.get=vk.YAMLMap.prototype.get.bind(this),this.has=vk.YAMLMap.prototype.has.bind(this),this.set=vk.YAMLMap.prototype.set.bind(this),this.tag=t.tag}toJSON(e,r){if(!r)return super.toJSON(e);let n=new Map;r?.onCreate&&r.onCreate(n);for(let o of this.items){let s,a;if(Zyt.isPair(o)?(s=TCe.toJS(o.key,"",r),a=TCe.toJS(o.value,s,r)):s=TCe.toJS(o,"",r),n.has(s))throw new Error("Ordered maps must not include duplicate keys");n.set(s,a)}return n}static from(e,r,n){let o=Jyt.createPairs(e,r,n),s=new this;return s.items=o.items,s}};yC.tag="tag:yaml.org,2002:omap";var qsn={collection:"seq",identify:t=>t instanceof Map,nodeClass:yC,default:!1,tag:"tag:yaml.org,2002:omap",resolve(t,e){let r=Jyt.resolvePairs(t,e),n=[];for(let{key:o}of r.items)Zyt.isScalar(o)&&(n.includes(o.value)?e(`Ordered maps must not include duplicate keys: ${o.value}`):n.push(o.value));return Object.assign(new yC,r)},createNode:(t,e,r)=>yC.from(t,e,r)};SCe.YAMLOMap=yC;SCe.omap=qsn});var nEt=m(CCe=>{"use strict";var Xyt=Do();function eEt({value:t,source:e},r){return e&&(t?tEt:rEt).test.test(e)?e:t?r.options.trueStr:r.options.falseStr}var tEt={identify:t=>t===!0,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new Xyt.Scalar(!0),stringify:eEt},rEt={identify:t=>t===!1,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/,resolve:()=>new Xyt.Scalar(!1),stringify:eEt};CCe.falseTag=rEt;CCe.trueTag=tEt});var iEt=m(yY=>{"use strict";var Fsn=Do(),ACe=UR(),jsn={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:t=>t.slice(-3).toLowerCase()==="nan"?NaN:t[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:ACe.stringifyNumber},Bsn={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t.replace(/_/g,"")),stringify(t){let e=Number(t.value);return isFinite(e)?e.toExponential():ACe.stringifyNumber(t)}},$sn={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(t){let e=new Fsn.Scalar(parseFloat(t.replace(/_/g,""))),r=t.indexOf(".");if(r!==-1){let n=t.substring(r+1).replace(/_/g,"");n[n.length-1]==="0"&&(e.minFractionDigits=n.length)}return e},stringify:ACe.stringifyNumber};yY.float=$sn;yY.floatExp=Bsn;yY.floatNaN=jsn});var sEt=m(Ek=>{"use strict";var oEt=UR(),yk=t=>typeof t=="bigint"||Number.isInteger(t);function EY(t,e,r,{intAsBigInt:n}){let o=t[0];if((o==="-"||o==="+")&&(e+=1),t=t.substring(e).replace(/_/g,""),n){switch(r){case 2:t=`0b${t}`;break;case 8:t=`0o${t}`;break;case 16:t=`0x${t}`;break}let a=BigInt(t);return o==="-"?BigInt(-1)*a:a}let s=parseInt(t,r);return o==="-"?-1*s:s}function xCe(t,e,r){let{value:n}=t;if(yk(n)){let o=n.toString(e);return n<0?"-"+r+o.substr(1):r+o}return oEt.stringifyNumber(t)}var Vsn={identify:yk,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(t,e,r)=>EY(t,2,2,r),stringify:t=>xCe(t,2,"0b")},Hsn={identify:yk,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(t,e,r)=>EY(t,1,8,r),stringify:t=>xCe(t,8,"0")},Gsn={identify:yk,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(t,e,r)=>EY(t,0,10,r),stringify:oEt.stringifyNumber},zsn={identify:yk,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(t,e,r)=>EY(t,2,16,r),stringify:t=>xCe(t,16,"0x")};Ek.int=Gsn;Ek.intBin=Vsn;Ek.intHex=zsn;Ek.intOct=Hsn});var ICe=m(wCe=>{"use strict";var bY=nn(),TY=sy(),SY=cy(),EC=class t extends SY.YAMLMap{constructor(e){super(e),this.tag=t.tag}add(e){let r;bY.isPair(e)?r=e:e&&typeof e=="object"&&"key"in e&&"value"in e&&e.value===null?r=new TY.Pair(e.key,null):r=new TY.Pair(e,null),SY.findPair(this.items,r.key)||this.items.push(r)}get(e,r){let n=SY.findPair(this.items,e);return!r&&bY.isPair(n)?bY.isScalar(n.key)?n.key.value:n.key:n}set(e,r){if(typeof r!="boolean")throw new Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof r}`);let n=SY.findPair(this.items,e);n&&!r?this.items.splice(this.items.indexOf(n),1):!n&&r&&this.items.push(new TY.Pair(e))}toJSON(e,r){return super.toJSON(e,r,Set)}toString(e,r,n){if(!e)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},e,{allNullValues:!0}),r,n);throw new Error("Set items must all have null values")}static from(e,r,n){let{replacer:o}=n,s=new this(e);if(r&&Symbol.iterator in Object(r))for(let a of r)typeof o=="function"&&(a=o.call(r,a,a)),s.items.push(TY.createPair(a,null,n));return s}};EC.tag="tag:yaml.org,2002:set";var Wsn={collection:"map",identify:t=>t instanceof Set,nodeClass:EC,default:!1,tag:"tag:yaml.org,2002:set",createNode:(t,e,r)=>EC.from(t,e,r),resolve(t,e){if(bY.isMap(t)){if(t.hasAllNullValues(!0))return Object.assign(new EC,t);e("Set items must all have null values")}else e("Expected a mapping for this tag");return t}};wCe.YAMLSet=EC;wCe.set=Wsn});var RCe=m(CY=>{"use strict";var Ksn=UR();function PCe(t,e){let r=t[0],n=r==="-"||r==="+"?t.substring(1):t,o=a=>e?BigInt(a):Number(a),s=n.replace(/_/g,"").split(":").reduce((a,c)=>a*o(60)+o(c),o(0));return r==="-"?o(-1)*s:s}function aEt(t){let{value:e}=t,r=a=>a;if(typeof e=="bigint")r=a=>BigInt(a);else if(isNaN(e)||!isFinite(e))return Ksn.stringifyNumber(t);let n="";e<0&&(n="-",e*=r(-1));let o=r(60),s=[e%o];return e<60?s.unshift(0):(e=(e-s[0])/o,s.unshift(e%o),e>=60&&(e=(e-s[0])/o,s.unshift(e))),n+s.map(a=>String(a).padStart(2,"0")).join(":").replace(/000000\d*$/,"")}var Ysn={identify:t=>typeof t=="bigint"||Number.isInteger(t),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(t,e,{intAsBigInt:r})=>PCe(t,r),stringify:aEt},Qsn={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:t=>PCe(t,!1),stringify:aEt},cEt={identify:t=>t instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(t){let e=t.match(cEt.test);if(!e)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");let[,r,n,o,s,a,c]=e.map(Number),l=e[7]?Number((e[7]+"00").substr(1,3)):0,u=Date.UTC(r,n-1,o,s||0,a||0,c||0,l),d=e[8];if(d&&d!=="Z"){let f=PCe(d,!1);Math.abs(f)<30&&(f*=60),u-=6e4*f}return new Date(u)},stringify:({value:t})=>t?.toISOString().replace(/(T00:00:00)?\.000Z$/,"")??""};CY.floatTime=Qsn;CY.intTime=Ysn;CY.timestamp=cEt});var dEt=m(uEt=>{"use strict";var Zsn=kR(),Jsn=dY(),Xsn=DR(),ean=gk(),tan=yCe(),lEt=nEt(),OCe=iEt(),AY=sEt(),ran=nY(),nan=bCe(),ian=vY(),oan=ICe(),MCe=RCe(),san=[Zsn.map,Xsn.seq,ean.string,Jsn.nullTag,lEt.trueTag,lEt.falseTag,AY.intBin,AY.intOct,AY.int,AY.intHex,OCe.floatNaN,OCe.floatExp,OCe.float,tan.binary,ran.merge,nan.omap,ian.pairs,oan.set,MCe.intTime,MCe.floatTime,MCe.timestamp];uEt.schema=san});var TEt=m(kCe=>{"use strict";var mEt=kR(),aan=dY(),gEt=DR(),can=gk(),lan=dCe(),NCe=pCe(),LCe=mCe(),uan=Hyt(),dan=Wyt(),_Et=yCe(),Tk=nY(),vEt=bCe(),yEt=vY(),fEt=dEt(),EEt=ICe(),xY=RCe(),pEt=new Map([["core",uan.schema],["failsafe",[mEt.map,gEt.seq,can.string]],["json",dan.schema],["yaml11",fEt.schema],["yaml-1.1",fEt.schema]]),hEt={binary:_Et.binary,bool:lan.boolTag,float:NCe.float,floatExp:NCe.floatExp,floatNaN:NCe.floatNaN,floatTime:xY.floatTime,int:LCe.int,intHex:LCe.intHex,intOct:LCe.intOct,intTime:xY.intTime,map:mEt.map,merge:Tk.merge,null:aan.nullTag,omap:vEt.omap,pairs:yEt.pairs,seq:gEt.seq,set:EEt.set,timestamp:xY.timestamp},fan={"tag:yaml.org,2002:binary":_Et.binary,"tag:yaml.org,2002:merge":Tk.merge,"tag:yaml.org,2002:omap":vEt.omap,"tag:yaml.org,2002:pairs":yEt.pairs,"tag:yaml.org,2002:set":EEt.set,"tag:yaml.org,2002:timestamp":xY.timestamp};function pan(t,e,r){let n=pEt.get(e);if(n&&!t)return r&&!n.includes(Tk.merge)?n.concat(Tk.merge):n.slice();let o=n;if(!o)if(Array.isArray(t))o=[];else{let s=Array.from(pEt.keys()).filter(a=>a!=="yaml11").map(a=>JSON.stringify(a)).join(", ");throw new Error(`Unknown schema "${e}"; use one of ${s} or define customTags array`)}if(Array.isArray(t))for(let s of t)o=o.concat(s);else typeof t=="function"&&(o=t(o.slice()));return r&&(o=o.concat(Tk.merge)),o.reduce((s,a)=>{let c=typeof a=="string"?hEt[a]:a;if(!c){let l=JSON.stringify(a),u=Object.keys(hEt).map(d=>JSON.stringify(d)).join(", ");throw new Error(`Unknown custom tag ${l}; use one of ${u}`)}return s.includes(c)||s.push(c),s},[])}kCe.coreKnownTags=fan;kCe.getTags=pan});var qCe=m(SEt=>{"use strict";var DCe=nn(),han=kR(),man=DR(),gan=gk(),wY=TEt(),_an=(t,e)=>t.key<e.key?-1:t.key>e.key?1:0,UCe=class t{constructor({compat:e,customTags:r,merge:n,resolveKnownTags:o,schema:s,sortMapEntries:a,toStringDefaults:c}){this.compat=Array.isArray(e)?wY.getTags(e,"compat"):e?wY.getTags(null,e):null,this.name=typeof s=="string"&&s||"core",this.knownTags=o?wY.coreKnownTags:{},this.tags=wY.getTags(r,this.name,n),this.toStringOptions=c??null,Object.defineProperty(this,DCe.MAP,{value:han.map}),Object.defineProperty(this,DCe.SCALAR,{value:gan.string}),Object.defineProperty(this,DCe.SEQ,{value:man.seq}),this.sortMapEntries=typeof a=="function"?a:a===!0?_an:null}clone(){let e=Object.create(t.prototype,Object.getOwnPropertyDescriptors(this));return e.tags=this.tags.slice(),e}};SEt.Schema=UCe});var CEt=m(bEt=>{"use strict";var van=nn(),FCe=fk(),Sk=ck();function yan(t,e){let r=[],n=e.directives===!0;if(e.directives!==!1&&t.directives){let l=t.directives.toString(t);l?(r.push(l),n=!0):t.directives.docStart&&(n=!0)}n&&r.push("---");let o=FCe.createStringifyContext(t,e),{commentString:s}=o.options;if(t.commentBefore){r.length!==1&&r.unshift("");let l=s(t.commentBefore);r.unshift(Sk.indentComment(l,""))}let a=!1,c=null;if(t.contents){if(van.isNode(t.contents)){if(t.contents.spaceBefore&&n&&r.push(""),t.contents.commentBefore){let d=s(t.contents.commentBefore);r.push(Sk.indentComment(d,""))}o.forceBlockIndent=!!t.comment,c=t.contents.comment}let l=c?void 0:()=>a=!0,u=FCe.stringify(t.contents,o,()=>c=null,l);c&&(u+=Sk.lineComment(u,"",s(c))),(u[0]==="|"||u[0]===">")&&r[r.length-1]==="---"?r[r.length-1]=`--- ${u}`:r.push(u)}else r.push(FCe.stringify(t.contents,o));if(t.directives?.docEnd)if(t.comment){let l=s(t.comment);l.includes(`
`)?(r.push("..."),r.push(Sk.indentComment(l,""))):r.push(`... ${l}`)}else r.push("...");else{let l=t.comment;l&&a&&(l=l.replace(/^\n+/,"")),l&&((!a||c)&&r[r.length-1]!==""&&r.push(""),r.push(Sk.indentComment(s(l),"")))}return r.join(`
`)+`
`}bEt.stringifyDocument=yan});var bk=m(AEt=>{"use strict";var Ean=sk(),qR=KK(),Cd=nn(),Tan=sy(),San=ry(),ban=qCe(),Can=CEt(),jCe=HK(),Aan=Hbe(),xan=ak(),BCe=Vbe(),$Ce=class t{constructor(e,r,n){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,Cd.NODE_TYPE,{value:Cd.DOC});let o=null;typeof r=="function"||Array.isArray(r)?o=r:n===void 0&&r&&(n=r,r=void 0);let s=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,stringKeys:!1,uniqueKeys:!0,version:"1.2"},n);this.options=s;let{version:a}=s;n?._directives?(this.directives=n._directives.atDocument(),this.directives.yaml.explicit&&(a=this.directives.yaml.version)):this.directives=new BCe.Directives({version:a}),this.setSchema(a,n),this.contents=e===void 0?null:this.createNode(e,o,n)}clone(){let e=Object.create(t.prototype,{[Cd.NODE_TYPE]:{value:Cd.DOC}});return e.commentBefore=this.commentBefore,e.comment=this.comment,e.errors=this.errors.slice(),e.warnings=this.warnings.slice(),e.options=Object.assign({},this.options),this.directives&&(e.directives=this.directives.clone()),e.schema=this.schema.clone(),e.contents=Cd.isNode(this.contents)?this.contents.clone(e.schema):this.contents,this.range&&(e.range=this.range.slice()),e}add(e){FR(this.contents)&&this.contents.add(e)}addIn(e,r){FR(this.contents)&&this.contents.addIn(e,r)}createAlias(e,r){if(!e.anchor){let n=jCe.anchorNames(this);e.anchor=!r||n.has(r)?jCe.findNewAnchor(r||"a",n):r}return new Ean.Alias(e.anchor)}createNode(e,r,n){let o;if(typeof r=="function")e=r.call({"":e},"",e),o=r;else if(Array.isArray(r)){let v=y=>typeof y=="number"||y instanceof String||y instanceof Number,E=r.filter(v).map(String);E.length>0&&(r=r.concat(E)),o=r}else n===void 0&&r&&(n=r,r=void 0);let{aliasDuplicateObjects:s,anchorPrefix:a,flow:c,keepUndefined:l,onTagObj:u,tag:d}=n??{},{onAnchor:f,setAnchors:p,sourceObjects:h}=jCe.createNodeAnchors(this,a||"a"),_={aliasDuplicateObjects:s??!0,keepUndefined:l??!1,onAnchor:f,onTagObj:u,replacer:o,schema:this.schema,sourceObjects:h},g=xan.createNode(e,d,_);return c&&Cd.isCollection(g)&&(g.flow=!0),p(),g}createPair(e,r,n={}){let o=this.createNode(e,null,n),s=this.createNode(r,null,n);return new Tan.Pair(o,s)}delete(e){return FR(this.contents)?this.contents.delete(e):!1}deleteIn(e){return qR.isEmptyPath(e)?this.contents==null?!1:(this.contents=null,!0):FR(this.contents)?this.contents.deleteIn(e):!1}get(e,r){return Cd.isCollection(this.contents)?this.contents.get(e,r):void 0}getIn(e,r){return qR.isEmptyPath(e)?!r&&Cd.isScalar(this.contents)?this.contents.value:this.contents:Cd.isCollection(this.contents)?this.contents.getIn(e,r):void 0}has(e){return Cd.isCollection(this.contents)?this.contents.has(e):!1}hasIn(e){return qR.isEmptyPath(e)?this.contents!==void 0:Cd.isCollection(this.contents)?this.contents.hasIn(e):!1}set(e,r){this.contents==null?this.contents=qR.collectionFromPath(this.schema,[e],r):FR(this.contents)&&this.contents.set(e,r)}setIn(e,r){qR.isEmptyPath(e)?this.contents=r:this.contents==null?this.contents=qR.collectionFromPath(this.schema,Array.from(e),r):FR(this.contents)&&this.contents.setIn(e,r)}setSchema(e,r={}){typeof e=="number"&&(e=String(e));let n;switch(e){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new BCe.Directives({version:"1.1"}),n={resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":case"next":this.directives?this.directives.yaml.version=e:this.directives=new BCe.Directives({version:e}),n={resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,n=null;break;default:{let o=JSON.stringify(e);throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${o}`)}}if(r.schema instanceof Object)this.schema=r.schema;else if(n)this.schema=new ban.Schema(Object.assign(n,r));else throw new Error("With a null YAML version, the { schema: Schema } option is required")}toJS({json:e,jsonArg:r,mapAsMap:n,maxAliasCount:o,onAnchor:s,reviver:a}={}){let c={anchors:new Map,doc:this,keep:!e,mapAsMap:n===!0,mapKeyWarned:!1,maxAliasCount:typeof o=="number"?o:100},l=San.toJS(this.contents,r??"",c);if(typeof s=="function")for(let{count:u,res:d}of c.anchors.values())s(d,u);return typeof a=="function"?Aan.applyReviver(a,{"":l},"",l):l}toJSON(e,r){return this.toJS({json:!0,jsonArg:e,mapAsMap:!1,onAnchor:r})}toString(e={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in e&&(!Number.isInteger(e.indent)||Number(e.indent)<=0)){let r=JSON.stringify(e.indent);throw new Error(`"indent" option must be a positive integer, not ${r}`)}return Can.stringifyDocument(this,e)}};function FR(t){if(Cd.isCollection(t))return!0;throw new Error("Expected a YAML collection as document contents")}AEt.Document=$Ce});var xk=m(Ak=>{"use strict";var Ck=class extends Error{constructor(e,r,n,o){super(),this.name=e,this.code=n,this.message=o,this.pos=r}},VCe=class extends Ck{constructor(e,r,n){super("YAMLParseError",e,r,n)}},HCe=class extends Ck{constructor(e,r,n){super("YAMLWarning",e,r,n)}},wan=(t,e)=>r=>{if(r.pos[0]===-1)return;r.linePos=r.pos.map(c=>e.linePos(c));let{line:n,col:o}=r.linePos[0];r.message+=` at line ${n}, column ${o}`;let s=o-1,a=t.substring(e.lineStarts[n-1],e.lineStarts[n]).replace(/[\n\r]+$/,"");if(s>=60&&a.length>80){let c=Math.min(s-39,a.length-79);a="\u2026"+a.substring(c),s-=c-1}if(a.length>80&&(a=a.substring(0,79)+"\u2026"),n>1&&/^ *$/.test(a.substring(0,s))){let c=t.substring(e.lineStarts[n-2],e.lineStarts[n-1]);c.length>80&&(c=c.substring(0,79)+`\u2026
`),a=c+a}if(/[^ ]/.test(a)){let c=1,l=r.linePos[1];l?.line===n&&l.col>o&&(c=Math.max(1,Math.min(l.col-o,80-s)));let u=" ".repeat(s)+"^".repeat(c);r.message+=`:

${a}
${u}
`}};Ak.YAMLError=Ck;Ak.YAMLParseError=VCe;Ak.YAMLWarning=HCe;Ak.prettifyError=wan});var wk=m(xEt=>{"use strict";function Ian(t,{flow:e,indicator:r,next:n,offset:o,onError:s,parentIndent:a,startOnNewline:c}){let l=!1,u=c,d=c,f="",p="",h=!1,_=!1,g=null,v=null,E=null,y=null,S=null,b=null,w=null;for(let O of t)switch(_&&(O.type!=="space"&&O.type!=="newline"&&O.type!=="comma"&&s(O.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),_=!1),g&&(u&&O.type!=="comment"&&O.type!=="newline"&&s(g,"TAB_AS_INDENT","Tabs are not allowed as indentation"),g=null),O.type){case"space":!e&&(r!=="doc-start"||n?.type!=="flow-collection")&&O.source.includes("	")&&(g=O),d=!0;break;case"comment":{d||s(O,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");let L=O.source.substring(1)||" ";f?f+=p+L:f=L,p="",u=!1;break}case"newline":u?f?f+=O.source:(!b||r!=="seq-item-ind")&&(l=!0):p+=O.source,u=!0,h=!0,(v||E)&&(y=O),d=!0;break;case"anchor":v&&s(O,"MULTIPLE_ANCHORS","A node can have at most one anchor"),O.source.endsWith(":")&&s(O.offset+O.source.length-1,"BAD_ALIAS","Anchor ending in : is ambiguous",!0),v=O,w??(w=O.offset),u=!1,d=!1,_=!0;break;case"tag":{E&&s(O,"MULTIPLE_TAGS","A node can have at most one tag"),E=O,w??(w=O.offset),u=!1,d=!1,_=!0;break}case r:(v||E)&&s(O,"BAD_PROP_ORDER",`Anchors and tags must be after the ${O.source} indicator`),b&&s(O,"UNEXPECTED_TOKEN",`Unexpected ${O.source} in ${e??"collection"}`),b=O,u=r==="seq-item-ind"||r==="explicit-key-ind",d=!1;break;case"comma":if(e){S&&s(O,"UNEXPECTED_TOKEN",`Unexpected , in ${e}`),S=O,u=!1,d=!1;break}default:s(O,"UNEXPECTED_TOKEN",`Unexpected ${O.type} token`),u=!1,d=!1}let P=t[t.length-1],A=P?P.offset+P.source.length:o;return _&&n&&n.type!=="space"&&n.type!=="newline"&&n.type!=="comma"&&(n.type!=="scalar"||n.source!=="")&&s(n.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),g&&(u&&g.indent<=a||n?.type==="block-map"||n?.type==="block-seq")&&s(g,"TAB_AS_INDENT","Tabs are not allowed as indentation"),{comma:S,found:b,spaceBefore:l,comment:f,hasNewline:h,anchor:v,tag:E,newlineAfterProp:y,end:A,start:w??A}}xEt.resolveProps=Ian});var IY=m(wEt=>{"use strict";function GCe(t){if(!t)return null;switch(t.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(t.source.includes(`
`))return!0;if(t.end){for(let e of t.end)if(e.type==="newline")return!0}return!1;case"flow-collection":for(let e of t.items){for(let r of e.start)if(r.type==="newline")return!0;if(e.sep){for(let r of e.sep)if(r.type==="newline")return!0}if(GCe(e.key)||GCe(e.value))return!0}return!1;default:return!0}}wEt.containsNewline=GCe});var zCe=m(IEt=>{"use strict";var Pan=IY();function Ran(t,e,r){if(e?.type==="flow-collection"){let n=e.end[0];n.indent===t&&(n.source==="]"||n.source==="}")&&Pan.containsNewline(e)&&r(n,"BAD_INDENT","Flow end indicator should be more indented than parent",!0)}}IEt.flowIndentCheck=Ran});var WCe=m(REt=>{"use strict";var PEt=nn();function Oan(t,e,r){let{uniqueKeys:n}=t.options;if(n===!1)return!1;let o=typeof n=="function"?n:(s,a)=>s===a||PEt.isScalar(s)&&PEt.isScalar(a)&&s.value===a.value;return e.some(s=>o(s.key,r))}REt.mapIncludes=Oan});var DEt=m(kEt=>{"use strict";var OEt=sy(),Man=cy(),MEt=wk(),Nan=IY(),NEt=zCe(),Lan=WCe(),LEt="All mapping items must start at the same column";function kan({composeNode:t,composeEmptyNode:e},r,n,o,s){let a=s?.nodeClass??Man.YAMLMap,c=new a(r.schema);r.atRoot&&(r.atRoot=!1);let l=n.offset,u=null;for(let d of n.items){let{start:f,key:p,sep:h,value:_}=d,g=MEt.resolveProps(f,{indicator:"explicit-key-ind",next:p??h?.[0],offset:l,onError:o,parentIndent:n.indent,startOnNewline:!0}),v=!g.found;if(v){if(p&&(p.type==="block-seq"?o(l,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in p&&p.indent!==n.indent&&o(l,"BAD_INDENT",LEt)),!g.anchor&&!g.tag&&!h){u=g.end,g.comment&&(c.comment?c.comment+=`
`+g.comment:c.comment=g.comment);continue}(g.newlineAfterProp||Nan.containsNewline(p))&&o(p??f[f.length-1],"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line")}else g.found?.indent!==n.indent&&o(l,"BAD_INDENT",LEt);r.atKey=!0;let E=g.end,y=p?t(r,p,g,o):e(r,E,f,null,g,o);r.schema.compat&&NEt.flowIndentCheck(n.indent,p,o),r.atKey=!1,Lan.mapIncludes(r,c.items,y)&&o(E,"DUPLICATE_KEY","Map keys must be unique");let S=MEt.resolveProps(h??[],{indicator:"map-value-ind",next:_,offset:y.range[2],onError:o,parentIndent:n.indent,startOnNewline:!p||p.type==="block-scalar"});if(l=S.end,S.found){v&&(_?.type==="block-map"&&!S.hasNewline&&o(l,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),r.options.strict&&g.start<S.found.offset-1024&&o(y.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));let b=_?t(r,_,S,o):e(r,l,h,null,S,o);r.schema.compat&&NEt.flowIndentCheck(n.indent,_,o),l=b.range[2];let w=new OEt.Pair(y,b);r.options.keepSourceTokens&&(w.srcToken=d),c.items.push(w)}else{v&&o(y.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),S.comment&&(y.comment?y.comment+=`
`+S.comment:y.comment=S.comment);let b=new OEt.Pair(y);r.options.keepSourceTokens&&(b.srcToken=d),c.items.push(b)}}return u&&u<l&&o(u,"IMPOSSIBLE","Map comment with trailing content"),c.range=[n.offset,l,u??l],c}kEt.resolveBlockMap=kan});var qEt=m(UEt=>{"use strict";var Dan=ly(),Uan=wk(),qan=zCe();function Fan({composeNode:t,composeEmptyNode:e},r,n,o,s){let a=s?.nodeClass??Dan.YAMLSeq,c=new a(r.schema);r.atRoot&&(r.atRoot=!1),r.atKey&&(r.atKey=!1);let l=n.offset,u=null;for(let{start:d,value:f}of n.items){let p=Uan.resolveProps(d,{indicator:"seq-item-ind",next:f,offset:l,onError:o,parentIndent:n.indent,startOnNewline:!0});if(!p.found)if(p.anchor||p.tag||f)f?.type==="block-seq"?o(p.end,"BAD_INDENT","All sequence items must start at the same column"):o(l,"MISSING_CHAR","Sequence item without - indicator");else{u=p.end,p.comment&&(c.comment=p.comment);continue}let h=f?t(r,f,p,o):e(r,p.end,d,null,p,o);r.schema.compat&&qan.flowIndentCheck(n.indent,f,o),l=h.range[2],c.items.push(h)}return c.range=[n.offset,l,u??l],c}UEt.resolveBlockSeq=Fan});var jR=m(FEt=>{"use strict";function jan(t,e,r,n){let o="";if(t){let s=!1,a="";for(let c of t){let{source:l,type:u}=c;switch(u){case"space":s=!0;break;case"comment":{r&&!s&&n(c,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");let d=l.substring(1)||" ";o?o+=a+d:o=d,a="";break}case"newline":o&&(a+=l),s=!0;break;default:n(c,"UNEXPECTED_TOKEN",`Unexpected ${u} at node end`)}e+=l.length}}return{comment:o,offset:e}}FEt.resolveEnd=jan});var VEt=m($Et=>{"use strict";var Ban=nn(),$an=sy(),jEt=cy(),Van=ly(),Han=jR(),BEt=wk(),Gan=IY(),zan=WCe(),KCe="Block collections are not allowed within flow collections",YCe=t=>t&&(t.type==="block-map"||t.type==="block-seq");function Wan({composeNode:t,composeEmptyNode:e},r,n,o,s){let a=n.start.source==="{",c=a?"flow map":"flow sequence",l=s?.nodeClass??(a?jEt.YAMLMap:Van.YAMLSeq),u=new l(r.schema);u.flow=!0;let d=r.atRoot;d&&(r.atRoot=!1),r.atKey&&(r.atKey=!1);let f=n.offset+n.start.source.length;for(let v=0;v<n.items.length;++v){let E=n.items[v],{start:y,key:S,sep:b,value:w}=E,P=BEt.resolveProps(y,{flow:c,indicator:"explicit-key-ind",next:S??b?.[0],offset:f,onError:o,parentIndent:n.indent,startOnNewline:!1});if(!P.found){if(!P.anchor&&!P.tag&&!b&&!w){v===0&&P.comma?o(P.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${c}`):v<n.items.length-1&&o(P.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${c}`),P.comment&&(u.comment?u.comment+=`
`+P.comment:u.comment=P.comment),f=P.end;continue}!a&&r.options.strict&&Gan.containsNewline(S)&&o(S,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(v===0)P.comma&&o(P.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${c}`);else if(P.comma||o(P.start,"MISSING_CHAR",`Missing , between ${c} items`),P.comment){let A="";e:for(let O of y)switch(O.type){case"comma":case"space":break;case"comment":A=O.source.substring(1);break e;default:break e}if(A){let O=u.items[u.items.length-1];Ban.isPair(O)&&(O=O.value??O.key),O.comment?O.comment+=`
`+A:O.comment=A,P.comment=P.comment.substring(A.length+1)}}if(!a&&!b&&!P.found){let A=w?t(r,w,P,o):e(r,P.end,b,null,P,o);u.items.push(A),f=A.range[2],YCe(w)&&o(A.range,"BLOCK_IN_FLOW",KCe)}else{r.atKey=!0;let A=P.end,O=S?t(r,S,P,o):e(r,A,y,null,P,o);YCe(S)&&o(O.range,"BLOCK_IN_FLOW",KCe),r.atKey=!1;let L=BEt.resolveProps(b??[],{flow:c,indicator:"map-value-ind",next:w,offset:O.range[2],onError:o,parentIndent:n.indent,startOnNewline:!1});if(L.found){if(!a&&!P.found&&r.options.strict){if(b)for(let Q of b){if(Q===L.found)break;if(Q.type==="newline"){o(Q,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}P.start<L.found.offset-1024&&o(L.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else w&&("source"in w&&w.source?.[0]===":"?o(w,"MISSING_CHAR",`Missing space after : in ${c}`):o(L.start,"MISSING_CHAR",`Missing , or : between ${c} items`));let j=w?t(r,w,L,o):L.found?e(r,L.end,b,null,L,o):null;j?YCe(w)&&o(j.range,"BLOCK_IN_FLOW",KCe):L.comment&&(O.comment?O.comment+=`
`+L.comment:O.comment=L.comment);let $=new $an.Pair(O,j);if(r.options.keepSourceTokens&&($.srcToken=E),a){let Q=u;zan.mapIncludes(r,Q.items,O)&&o(A,"DUPLICATE_KEY","Map keys must be unique"),Q.items.push($)}else{let Q=new jEt.YAMLMap(r.schema);Q.flow=!0,Q.items.push($);let K=(j??O).range;Q.range=[O.range[0],K[1],K[2]],u.items.push(Q)}f=j?j.range[2]:L.end}}let p=a?"}":"]",[h,..._]=n.end,g=f;if(h?.source===p)g=h.offset+h.source.length;else{let v=c[0].toUpperCase()+c.substring(1),E=d?`${v} must end with a ${p}`:`${v} in block collection must be sufficiently indented and end with a ${p}`;o(f,d?"MISSING_CHAR":"BAD_INDENT",E),h&&h.source.length!==1&&_.unshift(h)}if(_.length>0){let v=Han.resolveEnd(_,g,r.options.strict,o);v.comment&&(u.comment?u.comment+=`
`+v.comment:u.comment=v.comment),u.range=[n.offset,g,v.offset]}else u.range=[n.offset,g,g];return u}$Et.resolveFlowCollection=Wan});var GEt=m(HEt=>{"use strict";var Kan=nn(),Yan=Do(),Qan=cy(),Zan=ly(),Jan=DEt(),Xan=qEt(),ecn=VEt();function QCe(t,e,r,n,o,s){let a=r.type==="block-map"?Jan.resolveBlockMap(t,e,r,n,s):r.type==="block-seq"?Xan.resolveBlockSeq(t,e,r,n,s):ecn.resolveFlowCollection(t,e,r,n,s),c=a.constructor;return o==="!"||o===c.tagName?(a.tag=c.tagName,a):(o&&(a.tag=o),a)}function tcn(t,e,r,n,o){let s=n.tag,a=s?e.directives.tagName(s.source,p=>o(s,"TAG_RESOLVE_FAILED",p)):null;if(r.type==="block-seq"){let{anchor:p,newlineAfterProp:h}=n,_=p&&s?p.offset>s.offset?p:s:p??s;_&&(!h||h.offset<_.offset)&&o(_,"MISSING_CHAR","Missing newline after block sequence props")}let c=r.type==="block-map"?"map":r.type==="block-seq"?"seq":r.start.source==="{"?"map":"seq";if(!s||!a||a==="!"||a===Qan.YAMLMap.tagName&&c==="map"||a===Zan.YAMLSeq.tagName&&c==="seq")return QCe(t,e,r,o,a);let l=e.schema.tags.find(p=>p.tag===a&&p.collection===c);if(!l){let p=e.schema.knownTags[a];if(p?.collection===c)e.schema.tags.push(Object.assign({},p,{default:!1})),l=p;else return p?o(s,"BAD_COLLECTION_TYPE",`${p.tag} used for ${c} collection, but expects ${p.collection??"scalar"}`,!0):o(s,"TAG_RESOLVE_FAILED",`Unresolved tag: ${a}`,!0),QCe(t,e,r,o,a)}let u=QCe(t,e,r,o,a,l),d=l.resolve?.(u,p=>o(s,"TAG_RESOLVE_FAILED",p),e.options)??u,f=Kan.isNode(d)?d:new Yan.Scalar(d);return f.range=u.range,f.tag=a,l?.format&&(f.format=l.format),f}HEt.composeCollection=tcn});var JCe=m(zEt=>{"use strict";var ZCe=Do();function rcn(t,e,r){let n=e.offset,o=ncn(e,t.options.strict,r);if(!o)return{value:"",type:null,comment:"",range:[n,n,n]};let s=o.mode===">"?ZCe.Scalar.BLOCK_FOLDED:ZCe.Scalar.BLOCK_LITERAL,a=e.source?icn(e.source):[],c=a.length;for(let g=a.length-1;g>=0;--g){let v=a[g][1];if(v===""||v==="\r")c=g;else break}if(c===0){let g=o.chomp==="+"&&a.length>0?`
`.repeat(Math.max(1,a.length-1)):"",v=n+o.length;return e.source&&(v+=e.source.length),{value:g,type:s,comment:o.comment,range:[n,v,v]}}let l=e.indent+o.indent,u=e.offset+o.length,d=0;for(let g=0;g<c;++g){let[v,E]=a[g];if(E===""||E==="\r")o.indent===0&&v.length>l&&(l=v.length);else{v.length<l&&r(u+v.length,"MISSING_CHAR","Block scalars with more-indented leading empty lines must use an explicit indentation indicator"),o.indent===0&&(l=v.length),d=g,l===0&&!t.atRoot&&r(u,"BAD_INDENT","Block scalar values in collections must be indented");break}u+=v.length+E.length+1}for(let g=a.length-1;g>=c;--g)a[g][0].length>l&&(c=g+1);let f="",p="",h=!1;for(let g=0;g<d;++g)f+=a[g][0].slice(l)+`
`;for(let g=d;g<c;++g){let[v,E]=a[g];u+=v.length+E.length+1;let y=E[E.length-1]==="\r";if(y&&(E=E.slice(0,-1)),E&&v.length<l){let b=`Block scalar lines must not be less indented than their ${o.indent?"explicit indentation indicator":"first line"}`;r(u-E.length-(y?2:1),"BAD_INDENT",b),v=""}s===ZCe.Scalar.BLOCK_LITERAL?(f+=p+v.slice(l)+E,p=`
`):v.length>l||E[0]==="	"?(p===" "?p=`
`:!h&&p===`
`&&(p=`

`),f+=p+v.slice(l)+E,p=`
`,h=!0):E===""?p===`
`?f+=`
`:p=`
`:(f+=p+E,p=" ",h=!1)}switch(o.chomp){case"-":break;case"+":for(let g=c;g<a.length;++g)f+=`
`+a[g][0].slice(l);f[f.length-1]!==`
`&&(f+=`
`);break;default:f+=`
`}let _=n+o.length+e.source.length;return{value:f,type:s,comment:o.comment,range:[n,_,_]}}function ncn({offset:t,props:e},r,n){if(e[0].type!=="block-scalar-header")return n(e[0],"IMPOSSIBLE","Block scalar header not found"),null;let{source:o}=e[0],s=o[0],a=0,c="",l=-1;for(let p=1;p<o.length;++p){let h=o[p];if(!c&&(h==="-"||h==="+"))c=h;else{let _=Number(h);!a&&_?a=_:l===-1&&(l=t+p)}}l!==-1&&n(l,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${o}`);let u=!1,d="",f=o.length;for(let p=1;p<e.length;++p){let h=e[p];switch(h.type){case"space":u=!0;case"newline":f+=h.source.length;break;case"comment":r&&!u&&n(h,"MISSING_CHAR","Comments must be separated from other tokens by white space characters"),f+=h.source.length,d=h.source.substring(1);break;case"error":n(h,"UNEXPECTED_TOKEN",h.message),f+=h.source.length;break;default:{let _=`Unexpected token in block scalar header: ${h.type}`;n(h,"UNEXPECTED_TOKEN",_);let g=h.source;g&&typeof g=="string"&&(f+=g.length)}}}return{mode:s,indent:a,chomp:c,comment:d,length:f}}function icn(t){let e=t.split(/\n( *)/),r=e[0],n=r.match(/^( *)/),s=[n?.[1]?[n[1],r.slice(n[1].length)]:["",r]];for(let a=1;a<e.length;a+=2)s.push([e[a],e[a+1]]);return s}zEt.resolveBlockScalar=rcn});var eAe=m(KEt=>{"use strict";var XCe=Do(),ocn=jR();function scn(t,e,r){let{offset:n,type:o,source:s,end:a}=t,c,l,u=(p,h,_)=>r(n+p,h,_);switch(o){case"scalar":c=XCe.Scalar.PLAIN,l=acn(s,u);break;case"single-quoted-scalar":c=XCe.Scalar.QUOTE_SINGLE,l=ccn(s,u);break;case"double-quoted-scalar":c=XCe.Scalar.QUOTE_DOUBLE,l=lcn(s,u);break;default:return r(t,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${o}`),{value:"",type:null,comment:"",range:[n,n+s.length,n+s.length]}}let d=n+s.length,f=ocn.resolveEnd(a,d,e,r);return{value:l,type:c,comment:f.comment,range:[n,d,f.offset]}}function acn(t,e){let r="";switch(t[0]){case"	":r="a tab character";break;case",":r="flow indicator character ,";break;case"%":r="directive indicator character %";break;case"|":case">":{r=`block scalar indicator ${t[0]}`;break}case"@":case"`":{r=`reserved character ${t[0]}`;break}}return r&&e(0,"BAD_SCALAR_START",`Plain value cannot start with ${r}`),WEt(t)}function ccn(t,e){return(t[t.length-1]!=="'"||t.length===1)&&e(t.length,"MISSING_CHAR","Missing closing 'quote"),WEt(t.slice(1,-1)).replace(/''/g,"'")}function WEt(t){let e,r;try{e=new RegExp(`(.*?)(?<![ 	])[ 	]*\r?
`,"sy"),r=new RegExp(`[ 	]*(.*?)(?:(?<![ 	])[ 	]*)?\r?
`,"sy")}catch{e=/(.*?)[ \t]*\r?\n/sy,r=/[ \t]*(.*?)[ \t]*\r?\n/sy}let n=e.exec(t);if(!n)return t;let o=n[1],s=" ",a=e.lastIndex;for(r.lastIndex=a;n=r.exec(t);)n[1]===""?s===`
`?o+=s:s=`
`:(o+=s+n[1],s=" "),a=r.lastIndex;let c=/[ \t]*(.*)/sy;return c.lastIndex=a,n=c.exec(t),o+s+(n?.[1]??"")}function lcn(t,e){let r="";for(let n=1;n<t.length-1;++n){let o=t[n];if(!(o==="\r"&&t[n+1]===`
`))if(o===`
`){let{fold:s,offset:a}=ucn(t,n);r+=s,n=a}else if(o==="\\"){let s=t[++n],a=dcn[s];if(a)r+=a;else if(s===`
`)for(s=t[n+1];s===" "||s==="	";)s=t[++n+1];else if(s==="\r"&&t[n+1]===`
`)for(s=t[++n+1];s===" "||s==="	";)s=t[++n+1];else if(s==="x"||s==="u"||s==="U"){let c={x:2,u:4,U:8}[s];r+=fcn(t,n+1,c,e),n+=c}else{let c=t.substr(n-1,2);e(n-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${c}`),r+=c}}else if(o===" "||o==="	"){let s=n,a=t[n+1];for(;a===" "||a==="	";)a=t[++n+1];a!==`
`&&!(a==="\r"&&t[n+2]===`
`)&&(r+=n>s?t.slice(s,n+1):o)}else r+=o}return(t[t.length-1]!=='"'||t.length===1)&&e(t.length,"MISSING_CHAR",'Missing closing "quote'),r}function ucn(t,e){let r="",n=t[e+1];for(;(n===" "||n==="	"||n===`
`||n==="\r")&&!(n==="\r"&&t[e+2]!==`
`);)n===`
`&&(r+=`
`),e+=1,n=t[e+1];return r||(r=" "),{fold:r,offset:e}}var dcn={0:"\0",a:"\x07",b:"\b",e:"\x1B",f:"\f",n:`
`,r:"\r",t:"	",v:"\v",N:"\x85",_:"\xA0",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","	":"	"};function fcn(t,e,r,n){let o=t.substr(e,r),a=o.length===r&&/^[0-9a-fA-F]+$/.test(o)?parseInt(o,16):NaN;if(isNaN(a)){let c=t.substr(e-2,r+2);return n(e-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${c}`),c}return String.fromCodePoint(a)}KEt.resolveFlowScalar=scn});var ZEt=m(QEt=>{"use strict";var TC=nn(),YEt=Do(),pcn=JCe(),hcn=eAe();function mcn(t,e,r,n){let{value:o,type:s,comment:a,range:c}=e.type==="block-scalar"?pcn.resolveBlockScalar(t,e,n):hcn.resolveFlowScalar(e,t.options.strict,n),l=r?t.directives.tagName(r.source,f=>n(r,"TAG_RESOLVE_FAILED",f)):null,u;t.options.stringKeys&&t.atKey?u=t.schema[TC.SCALAR]:l?u=gcn(t.schema,o,l,r,n):e.type==="scalar"?u=_cn(t,o,e,n):u=t.schema[TC.SCALAR];let d;try{let f=u.resolve(o,p=>n(r??e,"TAG_RESOLVE_FAILED",p),t.options);d=TC.isScalar(f)?f:new YEt.Scalar(f)}catch(f){let p=f instanceof Error?f.message:String(f);n(r??e,"TAG_RESOLVE_FAILED",p),d=new YEt.Scalar(o)}return d.range=c,d.source=o,s&&(d.type=s),l&&(d.tag=l),u.format&&(d.format=u.format),a&&(d.comment=a),d}function gcn(t,e,r,n,o){if(r==="!")return t[TC.SCALAR];let s=[];for(let c of t.tags)if(!c.collection&&c.tag===r)if(c.default&&c.test)s.push(c);else return c;for(let c of s)if(c.test?.test(e))return c;let a=t.knownTags[r];return a&&!a.collection?(t.tags.push(Object.assign({},a,{default:!1,test:void 0})),a):(o(n,"TAG_RESOLVE_FAILED",`Unresolved tag: ${r}`,r!=="tag:yaml.org,2002:str"),t[TC.SCALAR])}function _cn({atKey:t,directives:e,schema:r},n,o,s){let a=r.tags.find(c=>(c.default===!0||t&&c.default==="key")&&c.test?.test(n))||r[TC.SCALAR];if(r.compat){let c=r.compat.find(l=>l.default&&l.test?.test(n))??r[TC.SCALAR];if(a.tag!==c.tag){let l=e.tagString(a.tag),u=e.tagString(c.tag),d=`Value may be parsed as either ${l} or ${u}`;s(o,"TAG_RESOLVE_FAILED",d,!0)}}return a}QEt.composeScalar=mcn});var XEt=m(JEt=>{"use strict";function vcn(t,e,r){if(e){r??(r=e.length);for(let n=r-1;n>=0;--n){let o=e[n];switch(o.type){case"space":case"comment":case"newline":t-=o.source.length;continue}for(o=e[++n];o?.type==="space";)t+=o.source.length,o=e[++n];break}}return t}JEt.emptyScalarPosition=vcn});var rTt=m(rAe=>{"use strict";var ycn=sk(),Ecn=nn(),Tcn=GEt(),eTt=ZEt(),Scn=jR(),bcn=XEt(),Ccn={composeNode:tTt,composeEmptyNode:tAe};function tTt(t,e,r,n){let o=t.atKey,{spaceBefore:s,comment:a,anchor:c,tag:l}=r,u,d=!0;switch(e.type){case"alias":u=Acn(t,e,n),(c||l)&&n(e,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":u=eTt.composeScalar(t,e,l,n),c&&(u.anchor=c.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":u=Tcn.composeCollection(Ccn,t,e,r,n),c&&(u.anchor=c.source.substring(1));break;default:{let f=e.type==="error"?e.message:`Unsupported token (type: ${e.type})`;n(e,"UNEXPECTED_TOKEN",f),u=tAe(t,e.offset,void 0,null,r,n),d=!1}}return c&&u.anchor===""&&n(c,"BAD_ALIAS","Anchor cannot be an empty string"),o&&t.options.stringKeys&&(!Ecn.isScalar(u)||typeof u.value!="string"||u.tag&&u.tag!=="tag:yaml.org,2002:str")&&n(l??e,"NON_STRING_KEY","With stringKeys, all keys must be strings"),s&&(u.spaceBefore=!0),a&&(e.type==="scalar"&&e.source===""?u.comment=a:u.commentBefore=a),t.options.keepSourceTokens&&d&&(u.srcToken=e),u}function tAe(t,e,r,n,{spaceBefore:o,comment:s,anchor:a,tag:c,end:l},u){let d={type:"scalar",offset:bcn.emptyScalarPosition(e,r,n),indent:-1,source:""},f=eTt.composeScalar(t,d,c,u);return a&&(f.anchor=a.source.substring(1),f.anchor===""&&u(a,"BAD_ALIAS","Anchor cannot be an empty string")),o&&(f.spaceBefore=!0),s&&(f.comment=s,f.range[2]=l),f}function Acn({options:t},{offset:e,source:r,end:n},o){let s=new ycn.Alias(r.substring(1));s.source===""&&o(e,"BAD_ALIAS","Alias cannot be an empty string"),s.source.endsWith(":")&&o(e+r.length-1,"BAD_ALIAS","Alias ending in : is ambiguous",!0);let a=e+r.length,c=Scn.resolveEnd(n,a,t.strict,o);return s.range=[e,a,c.offset],c.comment&&(s.comment=c.comment),s}rAe.composeEmptyNode=tAe;rAe.composeNode=tTt});var oTt=m(iTt=>{"use strict";var xcn=bk(),nTt=rTt(),wcn=jR(),Icn=wk();function Pcn(t,e,{offset:r,start:n,value:o,end:s},a){let c=Object.assign({_directives:e},t),l=new xcn.Document(void 0,c),u={atKey:!1,atRoot:!0,directives:l.directives,options:l.options,schema:l.schema},d=Icn.resolveProps(n,{indicator:"doc-start",next:o??s?.[0],offset:r,onError:a,parentIndent:0,startOnNewline:!0});d.found&&(l.directives.docStart=!0,o&&(o.type==="block-map"||o.type==="block-seq")&&!d.hasNewline&&a(d.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),l.contents=o?nTt.composeNode(u,o,d,a):nTt.composeEmptyNode(u,d.end,n,null,d,a);let f=l.contents.range[2],p=wcn.resolveEnd(s,f,!1,a);return p.comment&&(l.comment=p.comment),l.range=[r,f,p.offset],l}iTt.composeDoc=Pcn});var iAe=m(cTt=>{"use strict";var Rcn=require("process"),Ocn=Vbe(),Mcn=bk(),Ik=xk(),sTt=nn(),Ncn=oTt(),Lcn=jR();function Pk(t){if(typeof t=="number")return[t,t+1];if(Array.isArray(t))return t.length===2?t:[t[0],t[1]];let{offset:e,source:r}=t;return[e,e+(typeof r=="string"?r.length:1)]}function aTt(t){let e="",r=!1,n=!1;for(let o=0;o<t.length;++o){let s=t[o];switch(s[0]){case"#":e+=(e===""?"":n?`

`:`
`)+(s.substring(1)||" "),r=!0,n=!1;break;case"%":t[o+1]?.[0]!=="#"&&(o+=1),r=!1;break;default:r||(n=!0),r=!1}}return{comment:e,afterEmptyLine:n}}var nAe=class{constructor(e={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(r,n,o,s)=>{let a=Pk(r);s?this.warnings.push(new Ik.YAMLWarning(a,n,o)):this.errors.push(new Ik.YAMLParseError(a,n,o))},this.directives=new Ocn.Directives({version:e.version||"1.2"}),this.options=e}decorate(e,r){let{comment:n,afterEmptyLine:o}=aTt(this.prelude);if(n){let s=e.contents;if(r)e.comment=e.comment?`${e.comment}
${n}`:n;else if(o||e.directives.docStart||!s)e.commentBefore=n;else if(sTt.isCollection(s)&&!s.flow&&s.items.length>0){let a=s.items[0];sTt.isPair(a)&&(a=a.key);let c=a.commentBefore;a.commentBefore=c?`${n}
${c}`:n}else{let a=s.commentBefore;s.commentBefore=a?`${n}
${a}`:n}}r?(Array.prototype.push.apply(e.errors,this.errors),Array.prototype.push.apply(e.warnings,this.warnings)):(e.errors=this.errors,e.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:aTt(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(e,r=!1,n=-1){for(let o of e)yield*this.next(o);yield*this.end(r,n)}*next(e){switch(Rcn.env.LOG_STREAM&&console.dir(e,{depth:null}),e.type){case"directive":this.directives.add(e.source,(r,n,o)=>{let s=Pk(e);s[0]+=r,this.onError(s,"BAD_DIRECTIVE",n,o)}),this.prelude.push(e.source),this.atDirectives=!0;break;case"document":{let r=Ncn.composeDoc(this.options,this.directives,e,this.onError);this.atDirectives&&!r.directives.docStart&&this.onError(e,"MISSING_CHAR","Missing directives-end/doc-start indicator line"),this.decorate(r,!1),this.doc&&(yield this.doc),this.doc=r,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(e.source);break;case"error":{let r=e.source?`${e.message}: ${JSON.stringify(e.source)}`:e.message,n=new Ik.YAMLParseError(Pk(e),"UNEXPECTED_TOKEN",r);this.atDirectives||!this.doc?this.errors.push(n):this.doc.errors.push(n);break}case"doc-end":{if(!this.doc){let n="Unexpected doc-end without preceding document";this.errors.push(new Ik.YAMLParseError(Pk(e),"UNEXPECTED_TOKEN",n));break}this.doc.directives.docEnd=!0;let r=Lcn.resolveEnd(e.end,e.offset+e.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),r.comment){let n=this.doc.comment;this.doc.comment=n?`${n}
${r.comment}`:r.comment}this.doc.range[2]=r.offset;break}default:this.errors.push(new Ik.YAMLParseError(Pk(e),"UNEXPECTED_TOKEN",`Unsupported token ${e.type}`))}}*end(e=!1,r=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(e){let n=Object.assign({_directives:this.directives},this.options),o=new Mcn.Document(void 0,n);this.atDirectives&&this.onError(r,"MISSING_CHAR","Missing directives-end indicator line"),o.range=[0,r,r],this.decorate(o,!1),yield o}}};cTt.Composer=nAe});var dTt=m(PY=>{"use strict";var kcn=JCe(),Dcn=eAe(),Ucn=xk(),lTt=dk();function qcn(t,e=!0,r){if(t){let n=(o,s,a)=>{let c=typeof o=="number"?o:Array.isArray(o)?o[0]:o.offset;if(r)r(c,s,a);else throw new Ucn.YAMLParseError([c,c+1],s,a)};switch(t.type){case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return Dcn.resolveFlowScalar(t,e,n);case"block-scalar":return kcn.resolveBlockScalar({options:{strict:e}},t,n)}}return null}function Fcn(t,e){let{implicitKey:r=!1,indent:n,inFlow:o=!1,offset:s=-1,type:a="PLAIN"}=e,c=lTt.stringifyString({type:a,value:t},{implicitKey:r,indent:n>0?" ".repeat(n):"",inFlow:o,options:{blockQuote:!0,lineWidth:-1}}),l=e.end??[{type:"newline",offset:-1,indent:n,source:`
`}];switch(c[0]){case"|":case">":{let u=c.indexOf(`
`),d=c.substring(0,u),f=c.substring(u+1)+`
`,p=[{type:"block-scalar-header",offset:s,indent:n,source:d}];return uTt(p,l)||p.push({type:"newline",offset:-1,indent:n,source:`
`}),{type:"block-scalar",offset:s,indent:n,props:p,source:f}}case'"':return{type:"double-quoted-scalar",offset:s,indent:n,source:c,end:l};case"'":return{type:"single-quoted-scalar",offset:s,indent:n,source:c,end:l};default:return{type:"scalar",offset:s,indent:n,source:c,end:l}}}function jcn(t,e,r={}){let{afterKey:n=!1,implicitKey:o=!1,inFlow:s=!1,type:a}=r,c="indent"in t?t.indent:null;if(n&&typeof c=="number"&&(c+=2),!a)switch(t.type){case"single-quoted-scalar":a="QUOTE_SINGLE";break;case"double-quoted-scalar":a="QUOTE_DOUBLE";break;case"block-scalar":{let u=t.props[0];if(u.type!=="block-scalar-header")throw new Error("Invalid block scalar header");a=u.source[0]===">"?"BLOCK_FOLDED":"BLOCK_LITERAL";break}default:a="PLAIN"}let l=lTt.stringifyString({type:a,value:e},{implicitKey:o||c===null,indent:c!==null&&c>0?" ".repeat(c):"",inFlow:s,options:{blockQuote:!0,lineWidth:-1}});switch(l[0]){case"|":case">":Bcn(t,l);break;case'"':oAe(t,l,"double-quoted-scalar");break;case"'":oAe(t,l,"single-quoted-scalar");break;default:oAe(t,l,"scalar")}}function Bcn(t,e){let r=e.indexOf(`
`),n=e.substring(0,r),o=e.substring(r+1)+`
`;if(t.type==="block-scalar"){let s=t.props[0];if(s.type!=="block-scalar-header")throw new Error("Invalid block scalar header");s.source=n,t.source=o}else{let{offset:s}=t,a="indent"in t?t.indent:-1,c=[{type:"block-scalar-header",offset:s,indent:a,source:n}];uTt(c,"end"in t?t.end:void 0)||c.push({type:"newline",offset:-1,indent:a,source:`
`});for(let l of Object.keys(t))l!=="type"&&l!=="offset"&&delete t[l];Object.assign(t,{type:"block-scalar",indent:a,props:c,source:o})}}function uTt(t,e){if(e)for(let r of e)switch(r.type){case"space":case"comment":t.push(r);break;case"newline":return t.push(r),!0}return!1}function oAe(t,e,r){switch(t.type){case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":t.type=r,t.source=e;break;case"block-scalar":{let n=t.props.slice(1),o=e.length;t.props[0].type==="block-scalar-header"&&(o-=t.props[0].source.length);for(let s of n)s.offset+=o;delete t.props,Object.assign(t,{type:r,source:e,end:n});break}case"block-map":case"block-seq":{let o={type:"newline",offset:t.offset+e.length,indent:t.indent,source:`
`};delete t.items,Object.assign(t,{type:r,source:e,end:[o]});break}default:{let n="indent"in t?t.indent:-1,o="end"in t&&Array.isArray(t.end)?t.end.filter(s=>s.type==="space"||s.type==="comment"||s.type==="newline"):[];for(let s of Object.keys(t))s!=="type"&&s!=="offset"&&delete t[s];Object.assign(t,{type:r,indent:n,source:e,end:o})}}}PY.createScalarToken=Fcn;PY.resolveAsScalar=qcn;PY.setScalarValue=jcn});var pTt=m(fTt=>{"use strict";var $cn=t=>"type"in t?OY(t):RY(t);function OY(t){switch(t.type){case"block-scalar":{let e="";for(let r of t.props)e+=OY(r);return e+t.source}case"block-map":case"block-seq":{let e="";for(let r of t.items)e+=RY(r);return e}case"flow-collection":{let e=t.start.source;for(let r of t.items)e+=RY(r);for(let r of t.end)e+=r.source;return e}case"document":{let e=RY(t);if(t.end)for(let r of t.end)e+=r.source;return e}default:{let e=t.source;if("end"in t&&t.end)for(let r of t.end)e+=r.source;return e}}}function RY({start:t,key:e,sep:r,value:n}){let o="";for(let s of t)o+=s.source;if(e&&(o+=OY(e)),r)for(let s of r)o+=s.source;return n&&(o+=OY(n)),o}fTt.stringify=$cn});var _Tt=m(gTt=>{"use strict";var sAe=Symbol("break visit"),Vcn=Symbol("skip children"),hTt=Symbol("remove item");function SC(t,e){"type"in t&&t.type==="document"&&(t={start:t.start,value:t.value}),mTt(Object.freeze([]),t,e)}SC.BREAK=sAe;SC.SKIP=Vcn;SC.REMOVE=hTt;SC.itemAtPath=(t,e)=>{let r=t;for(let[n,o]of e){let s=r?.[n];if(s&&"items"in s)r=s.items[o];else return}return r};SC.parentCollection=(t,e)=>{let r=SC.itemAtPath(t,e.slice(0,-1)),n=e[e.length-1][0],o=r?.[n];if(o&&"items"in o)return o;throw new Error("Parent collection not found")};function mTt(t,e,r){let n=r(e,t);if(typeof n=="symbol")return n;for(let o of["key","value"]){let s=e[o];if(s&&"items"in s){for(let a=0;a<s.items.length;++a){let c=mTt(Object.freeze(t.concat([[o,a]])),s.items[a],r);if(typeof c=="number")a=c-1;else{if(c===sAe)return sAe;c===hTt&&(s.items.splice(a,1),a-=1)}}typeof n=="function"&&o==="key"&&(n=n(e,t))}}return typeof n=="function"?n(e,t):n}gTt.visit=SC});var MY=m(Sl=>{"use strict";var aAe=dTt(),Hcn=pTt(),Gcn=_Tt(),cAe="\uFEFF",lAe="",uAe="",dAe="",zcn=t=>!!t&&"items"in t,Wcn=t=>!!t&&(t.type==="scalar"||t.type==="single-quoted-scalar"||t.type==="double-quoted-scalar"||t.type==="block-scalar");function Kcn(t){switch(t){case cAe:return"<BOM>";case lAe:return"<DOC>";case uAe:return"<FLOW_END>";case dAe:return"<SCALAR>";default:return JSON.stringify(t)}}function Ycn(t){switch(t){case cAe:return"byte-order-mark";case lAe:return"doc-mode";case uAe:return"flow-error-end";case dAe:return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case`
`:case`\r
`:return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(t[0]){case" ":case"	":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}Sl.createScalarToken=aAe.createScalarToken;Sl.resolveAsScalar=aAe.resolveAsScalar;Sl.setScalarValue=aAe.setScalarValue;Sl.stringify=Hcn.stringify;Sl.visit=Gcn.visit;Sl.BOM=cAe;Sl.DOCUMENT=lAe;Sl.FLOW_END=uAe;Sl.SCALAR=dAe;Sl.isCollection=zcn;Sl.isScalar=Wcn;Sl.prettyToken=Kcn;Sl.tokenType=Ycn});var hAe=m(yTt=>{"use strict";var Rk=MY();function u0(t){switch(t){case void 0:case" ":case`
`:case"\r":case"	":return!0;default:return!1}}var vTt=new Set("0123456789ABCDEFabcdef"),Qcn=new Set("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()"),NY=new Set(",[]{}"),Zcn=new Set(` ,[]{}
\r	`),fAe=t=>!t||Zcn.has(t),pAe=class{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.lineEndPos=null,this.next=null,this.pos=0}*lex(e,r=!1){if(e){if(typeof e!="string")throw TypeError("source is not a string");this.buffer=this.buffer?this.buffer+e:e,this.lineEndPos=null}this.atEnd=!r;let n=this.next??"stream";for(;n&&(r||this.hasChars(1));)n=yield*this.parseNext(n)}atLineEnd(){let e=this.pos,r=this.buffer[e];for(;r===" "||r==="	";)r=this.buffer[++e];return!r||r==="#"||r===`
`?!0:r==="\r"?this.buffer[e+1]===`
`:!1}charAt(e){return this.buffer[this.pos+e]}continueScalar(e){let r=this.buffer[e];if(this.indentNext>0){let n=0;for(;r===" ";)r=this.buffer[++n+e];if(r==="\r"){let o=this.buffer[n+e+1];if(o===`
`||!o&&!this.atEnd)return e+n+1}return r===`
`||n>=this.indentNext||!r&&!this.atEnd?e+n:-1}if(r==="-"||r==="."){let n=this.buffer.substr(e,3);if((n==="---"||n==="...")&&u0(this.buffer[e+3]))return-1}return e}getLine(){let e=this.lineEndPos;return(typeof e!="number"||e!==-1&&e<this.pos)&&(e=this.buffer.indexOf(`
`,this.pos),this.lineEndPos=e),e===-1?this.atEnd?this.buffer.substring(this.pos):null:(this.buffer[e-1]==="\r"&&(e-=1),this.buffer.substring(this.pos,e))}hasChars(e){return this.pos+e<=this.buffer.length}setNext(e){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.lineEndPos=null,this.next=e,null}peek(e){return this.buffer.substr(this.pos,e)}*parseNext(e){switch(e){case"stream":return yield*this.parseStream();case"line-start":return yield*this.parseLineStart();case"block-start":return yield*this.parseBlockStart();case"doc":return yield*this.parseDocument();case"flow":return yield*this.parseFlowCollection();case"quoted-scalar":return yield*this.parseQuotedScalar();case"block-scalar":return yield*this.parseBlockScalar();case"plain-scalar":return yield*this.parsePlainScalar()}}*parseStream(){let e=this.getLine();if(e===null)return this.setNext("stream");if(e[0]===Rk.BOM&&(yield*this.pushCount(1),e=e.substring(1)),e[0]==="%"){let r=e.length,n=e.indexOf("#");for(;n!==-1;){let s=e[n-1];if(s===" "||s==="	"){r=n-1;break}else n=e.indexOf("#",n+1)}for(;;){let s=e[r-1];if(s===" "||s==="	")r-=1;else break}let o=(yield*this.pushCount(r))+(yield*this.pushSpaces(!0));return yield*this.pushCount(e.length-o),this.pushNewline(),"stream"}if(this.atLineEnd()){let r=yield*this.pushSpaces(!0);return yield*this.pushCount(e.length-r),yield*this.pushNewline(),"stream"}return yield Rk.DOCUMENT,yield*this.parseLineStart()}*parseLineStart(){let e=this.charAt(0);if(!e&&!this.atEnd)return this.setNext("line-start");if(e==="-"||e==="."){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");let r=this.peek(3);if((r==="---"||r==="...")&&u0(this.charAt(3)))return yield*this.pushCount(3),this.indentValue=0,this.indentNext=0,r==="---"?"doc":"stream"}return this.indentValue=yield*this.pushSpaces(!1),this.indentNext>this.indentValue&&!u0(this.charAt(1))&&(this.indentNext=this.indentValue),yield*this.parseBlockStart()}*parseBlockStart(){let[e,r]=this.peek(2);if(!r&&!this.atEnd)return this.setNext("block-start");if((e==="-"||e==="?"||e===":")&&u0(r)){let n=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));return this.indentNext=this.indentValue+1,this.indentValue+=n,yield*this.parseBlockStart()}return"doc"}*parseDocument(){yield*this.pushSpaces(!0);let e=this.getLine();if(e===null)return this.setNext("doc");let r=yield*this.pushIndicators();switch(e[r]){case"#":yield*this.pushCount(e.length-r);case void 0:return yield*this.pushNewline(),yield*this.parseLineStart();case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*this.pushCount(1),"doc";case"*":return yield*this.pushUntil(fAe),"doc";case'"':case"'":return yield*this.parseQuotedScalar();case"|":case">":return r+=yield*this.parseBlockScalarHeader(),r+=yield*this.pushSpaces(!0),yield*this.pushCount(e.length-r),yield*this.pushNewline(),yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let e,r,n=-1;do e=yield*this.pushNewline(),e>0?(r=yield*this.pushSpaces(!1),this.indentValue=n=r):r=0,r+=yield*this.pushSpaces(!0);while(e+r>0);let o=this.getLine();if(o===null)return this.setNext("flow");if((n!==-1&&n<this.indentNext&&o[0]!=="#"||n===0&&(o.startsWith("---")||o.startsWith("..."))&&u0(o[3]))&&!(n===this.indentNext-1&&this.flowLevel===1&&(o[0]==="]"||o[0]==="}")))return this.flowLevel=0,yield Rk.FLOW_END,yield*this.parseLineStart();let s=0;for(;o[s]===",";)s+=yield*this.pushCount(1),s+=yield*this.pushSpaces(!0),this.flowKey=!1;switch(s+=yield*this.pushIndicators(),o[s]){case void 0:return"flow";case"#":return yield*this.pushCount(o.length-s),"flow";case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return yield*this.pushUntil(fAe),"flow";case'"':case"'":return this.flowKey=!0,yield*this.parseQuotedScalar();case":":{let a=this.charAt(1);if(this.flowKey||u0(a)||a===",")return this.flowKey=!1,yield*this.pushCount(1),yield*this.pushSpaces(!0),"flow"}default:return this.flowKey=!1,yield*this.parsePlainScalar()}}*parseQuotedScalar(){let e=this.charAt(0),r=this.buffer.indexOf(e,this.pos+1);if(e==="'")for(;r!==-1&&this.buffer[r+1]==="'";)r=this.buffer.indexOf("'",r+2);else for(;r!==-1;){let s=0;for(;this.buffer[r-1-s]==="\\";)s+=1;if(s%2===0)break;r=this.buffer.indexOf('"',r+1)}let n=this.buffer.substring(0,r),o=n.indexOf(`
`,this.pos);if(o!==-1){for(;o!==-1;){let s=this.continueScalar(o+1);if(s===-1)break;o=n.indexOf(`
`,s)}o!==-1&&(r=o-(n[o-1]==="\r"?2:1))}if(r===-1){if(!this.atEnd)return this.setNext("quoted-scalar");r=this.buffer.length}return yield*this.pushToIndex(r+1,!1),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let e=this.pos;for(;;){let r=this.buffer[++e];if(r==="+")this.blockScalarKeep=!0;else if(r>"0"&&r<="9")this.blockScalarIndent=Number(r)-1;else if(r!=="-")break}return yield*this.pushUntil(r=>u0(r)||r==="#")}*parseBlockScalar(){let e=this.pos-1,r=0,n;e:for(let s=this.pos;n=this.buffer[s];++s)switch(n){case" ":r+=1;break;case`
`:e=s,r=0;break;case"\r":{let a=this.buffer[s+1];if(!a&&!this.atEnd)return this.setNext("block-scalar");if(a===`
`)break}default:break e}if(!n&&!this.atEnd)return this.setNext("block-scalar");if(r>=this.indentNext){this.blockScalarIndent===-1?this.indentNext=r:this.indentNext=this.blockScalarIndent+(this.indentNext===0?1:this.indentNext);do{let s=this.continueScalar(e+1);if(s===-1)break;e=this.buffer.indexOf(`
`,s)}while(e!==-1);if(e===-1){if(!this.atEnd)return this.setNext("block-scalar");e=this.buffer.length}}let o=e+1;for(n=this.buffer[o];n===" ";)n=this.buffer[++o];if(n==="	"){for(;n==="	"||n===" "||n==="\r"||n===`
`;)n=this.buffer[++o];e=o-1}else if(!this.blockScalarKeep)do{let s=e-1,a=this.buffer[s];a==="\r"&&(a=this.buffer[--s]);let c=s;for(;a===" ";)a=this.buffer[--s];if(a===`
`&&s>=this.pos&&s+1+r>c)e=s;else break}while(!0);return yield Rk.SCALAR,yield*this.pushToIndex(e+1,!0),yield*this.parseLineStart()}*parsePlainScalar(){let e=this.flowLevel>0,r=this.pos-1,n=this.pos-1,o;for(;o=this.buffer[++n];)if(o===":"){let s=this.buffer[n+1];if(u0(s)||e&&NY.has(s))break;r=n}else if(u0(o)){let s=this.buffer[n+1];if(o==="\r"&&(s===`
`?(n+=1,o=`
`,s=this.buffer[n+1]):r=n),s==="#"||e&&NY.has(s))break;if(o===`
`){let a=this.continueScalar(n+1);if(a===-1)break;n=Math.max(n,a-2)}}else{if(e&&NY.has(o))break;r=n}return!o&&!this.atEnd?this.setNext("plain-scalar"):(yield Rk.SCALAR,yield*this.pushToIndex(r+1,!0),e?"flow":"doc")}*pushCount(e){return e>0?(yield this.buffer.substr(this.pos,e),this.pos+=e,e):0}*pushToIndex(e,r){let n=this.buffer.slice(this.pos,e);return n?(yield n,this.pos+=n.length,n.length):(r&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":return(yield*this.pushTag())+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"&":return(yield*this.pushUntil(fAe))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"-":case"?":case":":{let e=this.flowLevel>0,r=this.charAt(1);if(u0(r)||e&&NY.has(r))return e?this.flowKey&&(this.flowKey=!1):this.indentNext=this.indentValue+1,(yield*this.pushCount(1))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators())}}return 0}*pushTag(){if(this.charAt(1)==="<"){let e=this.pos+2,r=this.buffer[e];for(;!u0(r)&&r!==">";)r=this.buffer[++e];return yield*this.pushToIndex(r===">"?e+1:e,!1)}else{let e=this.pos+1,r=this.buffer[e];for(;r;)if(Qcn.has(r))r=this.buffer[++e];else if(r==="%"&&vTt.has(this.buffer[e+1])&&vTt.has(this.buffer[e+2]))r=this.buffer[e+=3];else break;return yield*this.pushToIndex(e,!1)}}*pushNewline(){let e=this.buffer[this.pos];return e===`
`?yield*this.pushCount(1):e==="\r"&&this.charAt(1)===`
`?yield*this.pushCount(2):0}*pushSpaces(e){let r=this.pos-1,n;do n=this.buffer[++r];while(n===" "||e&&n==="	");let o=r-this.pos;return o>0&&(yield this.buffer.substr(this.pos,o),this.pos=r),o}*pushUntil(e){let r=this.pos,n=this.buffer[r];for(;!e(n);)n=this.buffer[++r];return yield*this.pushToIndex(r,!1)}};yTt.Lexer=pAe});var gAe=m(ETt=>{"use strict";var mAe=class{constructor(){this.lineStarts=[],this.addNewLine=e=>this.lineStarts.push(e),this.linePos=e=>{let r=0,n=this.lineStarts.length;for(;r<n;){let s=r+n>>1;this.lineStarts[s]<e?r=s+1:n=s}if(this.lineStarts[r]===e)return{line:r+1,col:1};if(r===0)return{line:0,col:e};let o=this.lineStarts[r-1];return{line:r,col:e-o+1}}}};ETt.LineCounter=mAe});var vAe=m(ATt=>{"use strict";var Jcn=require("process"),TTt=MY(),Xcn=hAe();function uy(t,e){for(let r=0;r<t.length;++r)if(t[r].type===e)return!0;return!1}function STt(t){for(let e=0;e<t.length;++e)switch(t[e].type){case"space":case"comment":case"newline":break;default:return e}return-1}function CTt(t){switch(t?.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function LY(t){switch(t.type){case"document":return t.start;case"block-map":{let e=t.items[t.items.length-1];return e.sep??e.start}case"block-seq":return t.items[t.items.length-1].start;default:return[]}}function BR(t){if(t.length===0)return[];let e=t.length;e:for(;--e>=0;)switch(t[e].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break e}for(;t[++e]?.type==="space";);return t.splice(e,t.length)}function bTt(t){if(t.start.type==="flow-seq-start")for(let e of t.items)e.sep&&!e.value&&!uy(e.start,"explicit-key-ind")&&!uy(e.sep,"map-value-ind")&&(e.key&&(e.value=e.key),delete e.key,CTt(e.value)?e.value.end?Array.prototype.push.apply(e.value.end,e.sep):e.value.end=e.sep:Array.prototype.push.apply(e.start,e.sep),delete e.sep)}var _Ae=class{constructor(e){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new Xcn.Lexer,this.onNewLine=e}*parse(e,r=!1){this.onNewLine&&this.offset===0&&this.onNewLine(0);for(let n of this.lexer.lex(e,r))yield*this.next(n);r||(yield*this.end())}*next(e){if(this.source=e,Jcn.env.LOG_TOKENS&&console.log("|",TTt.prettyToken(e)),this.atScalar){this.atScalar=!1,yield*this.step(),this.offset+=e.length;return}let r=TTt.tokenType(e);if(r)if(r==="scalar")this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=r,yield*this.step(),r){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+e.length);break;case"space":this.atNewLine&&e[0]===" "&&(this.indent+=e.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=e.length);break;case"doc-mode":case"flow-error-end":return;default:this.atNewLine=!1}this.offset+=e.length}else{let n=`Not a YAML token: ${e}`;yield*this.pop({type:"error",offset:this.offset,message:n,source:e}),this.offset+=e.length}}*end(){for(;this.stack.length>0;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){let e=this.peek(1);if(this.type==="doc-end"&&e?.type!=="doc-end"){for(;this.stack.length>0;)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source});return}if(!e)return yield*this.stream();switch(e.type){case"document":return yield*this.document(e);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(e);case"block-scalar":return yield*this.blockScalar(e);case"block-map":return yield*this.blockMap(e);case"block-seq":return yield*this.blockSequence(e);case"flow-collection":return yield*this.flowCollection(e);case"doc-end":return yield*this.documentEnd(e)}yield*this.pop()}peek(e){return this.stack[this.stack.length-e]}*pop(e){let r=e??this.stack.pop();if(!r)yield{type:"error",offset:this.offset,source:"",message:"Tried to pop an empty stack"};else if(this.stack.length===0)yield r;else{let n=this.peek(1);switch(r.type==="block-scalar"?r.indent="indent"in n?n.indent:0:r.type==="flow-collection"&&n.type==="document"&&(r.indent=0),r.type==="flow-collection"&&bTt(r),n.type){case"document":n.value=r;break;case"block-scalar":n.props.push(r);break;case"block-map":{let o=n.items[n.items.length-1];if(o.value){n.items.push({start:[],key:r,sep:[]}),this.onKeyLine=!0;return}else if(o.sep)o.value=r;else{Object.assign(o,{key:r,sep:[]}),this.onKeyLine=!o.explicitKey;return}break}case"block-seq":{let o=n.items[n.items.length-1];o.value?n.items.push({start:[],value:r}):o.value=r;break}case"flow-collection":{let o=n.items[n.items.length-1];!o||o.value?n.items.push({start:[],key:r,sep:[]}):o.sep?o.value=r:Object.assign(o,{key:r,sep:[]});return}default:yield*this.pop(),yield*this.pop(r)}if((n.type==="document"||n.type==="block-map"||n.type==="block-seq")&&(r.type==="block-map"||r.type==="block-seq")){let o=r.items[r.items.length-1];o&&!o.sep&&!o.value&&o.start.length>0&&STt(o.start)===-1&&(r.indent===0||o.start.every(s=>s.type!=="comment"||s.indent<r.indent))&&(n.type==="document"?n.end=o.start:n.items.push({start:o.start}),r.items.splice(-1,1))}}}*stream(){switch(this.type){case"directive-line":yield{type:"directive",offset:this.offset,source:this.source};return;case"byte-order-mark":case"space":case"comment":case"newline":yield this.sourceToken;return;case"doc-mode":case"doc-start":{let e={type:"document",offset:this.offset,start:[]};this.type==="doc-start"&&e.start.push(this.sourceToken),this.stack.push(e);return}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(e){if(e.value)return yield*this.lineEnd(e);switch(this.type){case"doc-start":{STt(e.start)!==-1?(yield*this.pop(),yield*this.step()):e.start.push(this.sourceToken);return}case"anchor":case"tag":case"space":case"comment":case"newline":e.start.push(this.sourceToken);return}let r=this.startBlockValue(e);r?this.stack.push(r):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(e){if(this.type==="map-value-ind"){let r=LY(this.peek(2)),n=BR(r),o;e.end?(o=e.end,o.push(this.sourceToken),delete e.end):o=[this.sourceToken];let s={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:n,key:e,sep:o}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=s}else yield*this.lineEnd(e)}*blockScalar(e){switch(this.type){case"space":case"comment":case"newline":e.props.push(this.sourceToken);return;case"scalar":if(e.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let r=this.source.indexOf(`
`)+1;for(;r!==0;)this.onNewLine(this.offset+r),r=this.source.indexOf(`
`,r)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(e){let r=e.items[e.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,r.value){let n="end"in r.value?r.value.end:void 0;(Array.isArray(n)?n[n.length-1]:void 0)?.type==="comment"?n?.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else r.sep?r.sep.push(this.sourceToken):r.start.push(this.sourceToken);return;case"space":case"comment":if(r.value)e.items.push({start:[this.sourceToken]});else if(r.sep)r.sep.push(this.sourceToken);else{if(this.atIndentedComment(r.start,e.indent)){let o=e.items[e.items.length-2]?.value?.end;if(Array.isArray(o)){Array.prototype.push.apply(o,r.start),o.push(this.sourceToken),e.items.pop();return}}r.start.push(this.sourceToken)}return}if(this.indent>=e.indent){let n=!this.onKeyLine&&this.indent===e.indent,o=n&&(r.sep||r.explicitKey)&&this.type!=="seq-item-ind",s=[];if(o&&r.sep&&!r.value){let a=[];for(let c=0;c<r.sep.length;++c){let l=r.sep[c];switch(l.type){case"newline":a.push(c);break;case"space":break;case"comment":l.indent>e.indent&&(a.length=0);break;default:a.length=0}}a.length>=2&&(s=r.sep.splice(a[1]))}switch(this.type){case"anchor":case"tag":o||r.value?(s.push(this.sourceToken),e.items.push({start:s}),this.onKeyLine=!0):r.sep?r.sep.push(this.sourceToken):r.start.push(this.sourceToken);return;case"explicit-key-ind":!r.sep&&!r.explicitKey?(r.start.push(this.sourceToken),r.explicitKey=!0):o||r.value?(s.push(this.sourceToken),e.items.push({start:s,explicitKey:!0})):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken],explicitKey:!0}]}),this.onKeyLine=!0;return;case"map-value-ind":if(r.explicitKey)if(r.sep)if(r.value)e.items.push({start:[],key:null,sep:[this.sourceToken]});else if(uy(r.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:s,key:null,sep:[this.sourceToken]}]});else if(CTt(r.key)&&!uy(r.sep,"newline")){let a=BR(r.start),c=r.key,l=r.sep;l.push(this.sourceToken),delete r.key,delete r.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:a,key:c,sep:l}]})}else s.length>0?r.sep=r.sep.concat(s,this.sourceToken):r.sep.push(this.sourceToken);else if(uy(r.start,"newline"))Object.assign(r,{key:null,sep:[this.sourceToken]});else{let a=BR(r.start);this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:a,key:null,sep:[this.sourceToken]}]})}else r.sep?r.value||o?e.items.push({start:s,key:null,sep:[this.sourceToken]}):uy(r.sep,"map-value-ind")?this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]}):r.sep.push(this.sourceToken):Object.assign(r,{key:null,sep:[this.sourceToken]});this.onKeyLine=!0;return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{let a=this.flowScalar(this.type);o||r.value?(e.items.push({start:s,key:a,sep:[]}),this.onKeyLine=!0):r.sep?this.stack.push(a):(Object.assign(r,{key:a,sep:[]}),this.onKeyLine=!0);return}default:{let a=this.startBlockValue(e);if(a){if(a.type==="block-seq"){if(!r.explicitKey&&r.sep&&!uy(r.sep,"newline")){yield*this.pop({type:"error",offset:this.offset,message:"Unexpected block-seq-ind on same line with key",source:this.source});return}}else n&&e.items.push({start:s});this.stack.push(a);return}}}}yield*this.pop(),yield*this.step()}*blockSequence(e){let r=e.items[e.items.length-1];switch(this.type){case"newline":if(r.value){let n="end"in r.value?r.value.end:void 0;(Array.isArray(n)?n[n.length-1]:void 0)?.type==="comment"?n?.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else r.start.push(this.sourceToken);return;case"space":case"comment":if(r.value)e.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(r.start,e.indent)){let o=e.items[e.items.length-2]?.value?.end;if(Array.isArray(o)){Array.prototype.push.apply(o,r.start),o.push(this.sourceToken),e.items.pop();return}}r.start.push(this.sourceToken)}return;case"anchor":case"tag":if(r.value||this.indent<=e.indent)break;r.start.push(this.sourceToken);return;case"seq-item-ind":if(this.indent!==e.indent)break;r.value||uy(r.start,"seq-item-ind")?e.items.push({start:[this.sourceToken]}):r.start.push(this.sourceToken);return}if(this.indent>e.indent){let n=this.startBlockValue(e);if(n){this.stack.push(n);return}}yield*this.pop(),yield*this.step()}*flowCollection(e){let r=e.items[e.items.length-1];if(this.type==="flow-error-end"){let n;do yield*this.pop(),n=this.peek(1);while(n?.type==="flow-collection")}else if(e.end.length===0){switch(this.type){case"comma":case"explicit-key-ind":!r||r.sep?e.items.push({start:[this.sourceToken]}):r.start.push(this.sourceToken);return;case"map-value-ind":!r||r.value?e.items.push({start:[],key:null,sep:[this.sourceToken]}):r.sep?r.sep.push(this.sourceToken):Object.assign(r,{key:null,sep:[this.sourceToken]});return;case"space":case"comment":case"newline":case"anchor":case"tag":!r||r.value?e.items.push({start:[this.sourceToken]}):r.sep?r.sep.push(this.sourceToken):r.start.push(this.sourceToken);return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{let o=this.flowScalar(this.type);!r||r.value?e.items.push({start:[],key:o,sep:[]}):r.sep?this.stack.push(o):Object.assign(r,{key:o,sep:[]});return}case"flow-map-end":case"flow-seq-end":e.end.push(this.sourceToken);return}let n=this.startBlockValue(e);n?this.stack.push(n):(yield*this.pop(),yield*this.step())}else{let n=this.peek(2);if(n.type==="block-map"&&(this.type==="map-value-ind"&&n.indent===e.indent||this.type==="newline"&&!n.items[n.items.length-1].sep))yield*this.pop(),yield*this.step();else if(this.type==="map-value-ind"&&n.type!=="flow-collection"){let o=LY(n),s=BR(o);bTt(e);let a=e.end.splice(1,e.end.length);a.push(this.sourceToken);let c={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:s,key:e,sep:a}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=c}else yield*this.lineEnd(e)}}flowScalar(e){if(this.onNewLine){let r=this.source.indexOf(`
`)+1;for(;r!==0;)this.onNewLine(this.offset+r),r=this.source.indexOf(`
`,r)+1}return{type:e,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(e){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;let r=LY(e),n=BR(r);return n.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:n,explicitKey:!0}]}}case"map-value-ind":{this.onKeyLine=!0;let r=LY(e),n=BR(r);return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:n,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(e,r){return this.type!=="comment"||this.indent<=r?!1:e.every(n=>n.type==="newline"||n.type==="space")}*documentEnd(e){this.type!=="doc-mode"&&(e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop()))}*lineEnd(e){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop(),yield*this.step();break;case"newline":this.onKeyLine=!1;case"space":case"comment":default:e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop())}}};ATt.Parser=_Ae});var RTt=m(Mk=>{"use strict";var xTt=iAe(),eln=bk(),Ok=xk(),tln=rCe(),rln=nn(),nln=gAe(),wTt=vAe();function ITt(t){let e=t.prettyErrors!==!1;return{lineCounter:t.lineCounter||e&&new nln.LineCounter||null,prettyErrors:e}}function iln(t,e={}){let{lineCounter:r,prettyErrors:n}=ITt(e),o=new wTt.Parser(r?.addNewLine),s=new xTt.Composer(e),a=Array.from(s.compose(o.parse(t)));if(n&&r)for(let c of a)c.errors.forEach(Ok.prettifyError(t,r)),c.warnings.forEach(Ok.prettifyError(t,r));return a.length>0?a:Object.assign([],{empty:!0},s.streamInfo())}function PTt(t,e={}){let{lineCounter:r,prettyErrors:n}=ITt(e),o=new wTt.Parser(r?.addNewLine),s=new xTt.Composer(e),a=null;for(let c of s.compose(o.parse(t),!0,t.length))if(!a)a=c;else if(a.options.logLevel!=="silent"){a.errors.push(new Ok.YAMLParseError(c.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}return n&&r&&(a.errors.forEach(Ok.prettifyError(t,r)),a.warnings.forEach(Ok.prettifyError(t,r))),a}function oln(t,e,r){let n;typeof e=="function"?n=e:r===void 0&&e&&typeof e=="object"&&(r=e);let o=PTt(t,r);if(!o)return null;if(o.warnings.forEach(s=>tln.warn(o.options.logLevel,s)),o.errors.length>0){if(o.options.logLevel!=="silent")throw o.errors[0];o.errors=[]}return o.toJS(Object.assign({reviver:n},r))}function sln(t,e,r){let n=null;if(typeof e=="function"||Array.isArray(e)?n=e:r===void 0&&e&&(r=e),typeof r=="string"&&(r=r.length),typeof r=="number"){let o=Math.round(r);r=o<1?void 0:o>8?{indent:8}:{indent:o}}if(t===void 0){let{keepUndefined:o}=r??e??{};if(!o)return}return rln.isDocument(t)&&!n?t.toString(r):new eln.Document(t,n,r).toString(r)}Mk.parse=oln;Mk.parseAllDocuments=iln;Mk.parseDocument=PTt;Mk.stringify=sln});var MTt=m(yn=>{"use strict";var aln=iAe(),cln=bk(),lln=qCe(),yAe=xk(),uln=sk(),dy=nn(),dln=sy(),fln=Do(),pln=cy(),hln=ly(),mln=MY(),gln=hAe(),_ln=gAe(),vln=vAe(),kY=RTt(),OTt=rk();yn.Composer=aln.Composer;yn.Document=cln.Document;yn.Schema=lln.Schema;yn.YAMLError=yAe.YAMLError;yn.YAMLParseError=yAe.YAMLParseError;yn.YAMLWarning=yAe.YAMLWarning;yn.Alias=uln.Alias;yn.isAlias=dy.isAlias;yn.isCollection=dy.isCollection;yn.isDocument=dy.isDocument;yn.isMap=dy.isMap;yn.isNode=dy.isNode;yn.isPair=dy.isPair;yn.isScalar=dy.isScalar;yn.isSeq=dy.isSeq;yn.Pair=dln.Pair;yn.Scalar=fln.Scalar;yn.YAMLMap=pln.YAMLMap;yn.YAMLSeq=hln.YAMLSeq;yn.CST=mln;yn.Lexer=gln.Lexer;yn.LineCounter=_ln.LineCounter;yn.Parser=vln.Parser;yn.parse=kY.parse;yn.parseAllDocuments=kY.parseAllDocuments;yn.parseDocument=kY.parseDocument;yn.stringify=kY.stringify;yn.visit=OTt.visit;yn.visitAsync=OTt.visitAsync});var NTt=m(DY=>{"use strict";Object.defineProperty(DY,"__esModule",{value:!0});DY.FetchCancellationError=void 0;var yln=Gr(),EAe=class extends yln.CancellationError{constructor(e){super(),this.extraInformation=e}};DY.FetchCancellationError=EAe});var kTt=m(UY=>{"use strict";Object.defineProperty(UY,"__esModule",{value:!0});UY.serializeLanguageContext=Eln;UY.serializeFileDiagnostics=Aln;var LTt=PW();function Eln(t){return{start:t.start,end:t.end,items:t.items.map(e=>({context:Tln(e.context),timeStamp:e.timeStamp,onTimeout:e.onTimeout}))}}function Tln(t){switch(t.kind){case LTt.ContextKind.Snippet:return Sln(t);case LTt.ContextKind.Trait:return bln(t)}}function Sln(t){return{kind:t.kind,priority:t.priority,uri:t.uri.toString(),additionalUris:t.additionalUris?.map(e=>e.toString()),value:t.value}}function bln(t){return{kind:t.kind,priority:t.priority,name:t.name,value:t.value}}function Cln(t,e){return{uri:e.toString(),severity:t.severity,message:t.message,source:t.source||""}}function Aln(t){return t.flatMap(([e,r])=>r.map(n=>Cln(n,e)))}});var FTt=m(uh=>{"use strict";var xln=uh&&uh.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),wln=uh&&uh.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),qTt=uh&&uh.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),o=0;o<n.length;o++)n[o]!=="default"&&xln(r,e,n[o]);return wln(r,e),r}})();Object.defineProperty(uh,"__esModule",{value:!0});uh.InlineEditRequestLogContext=void 0;var DTt=qTt(MTt()),qY=qTt(fg()),Iln=Gr(),Pln=NTt(),UTt=kTt(),Rln=fve(),Ad=lG(),TAe=class t{static{this._id=0}get includeInLogTree(){return this._isVisible}constructor(e,r,n){this.filePath=e,this.version=r,this._context=n,this.requestId=t._id++,this.time=(0,Ad.now)(),this._isVisible=!1,this.recordingBookmark=void 0,this._statelessNextEditProviderId=void 0,this._nextEditRequest=void 0,this._resultEdit=void 0,this._diagnosticsResultEdit=void 0,this._logContextOfCachedEdit=void 0,this._prompt=void 0,this.error=void 0,this.response=void 0,this.fullResponsePromise=void 0,this.fullResponse=void 0,this.providerStartTime=void 0,this.providerEndTime=void 0,this.fetchStartTime=void 0,this.fetchEndTime=void 0,this._responseResults=void 0,this._recentEdit=void 0,this._trace=[],this._logs=[],this._isAccepted=void 0}toLogDocument(){let e=[];e.push("# "+this.getMarkdownTitle()+` (Request #${this.requestId})`),e.push(`\u{1F4A1} Tip: double-click anywhere to open this file as text to copy-paste content into an issue.
`),e.push(`<details><summary>Explanation for icons</summary>
`),e.push(`- ${Ad.Icon.lightbulbFull.svg} - model had suggestions
`),e.push(`- ${Ad.Icon.circleSlash.svg} - model had NO suggestions
`),e.push(`- ${Ad.Icon.database.svg} - response is from cache
`),e.push(`- ${Ad.Icon.error.svg} - error happened
`),e.push(`- ${Ad.Icon.skipped.svg} - fetching started but got cancelled
`),e.push(`</details>
`),e.push(`Inline Edit Provider: ${this._statelessNextEditProviderId??"<NOT-SET>"}
`),e.push("Chat Endpoint"),e.push("```"),e.push(`Model name: ${this._endpointInfo?.modelName??"<NOT-SET>"}`),e.push(`URL: ${this._endpointInfo?.url??"<NOT-SET>"}`),e.push("```"),e.push(`Opportunity ID: ${this._context?this._context.requestUuid:"<NOT-SET>"}`);let r=this._logContextOfCachedEdit?`(cached #${this._logContextOfCachedEdit.requestId})`:"(not cached)";if(this._nextEditRequest&&(e.push(`## Latest user edits ${r}`),e.push(`<details open><summary>Edit</summary>
`),e.push(this._nextEditRequest.toMarkdown()),e.push(`
</details>
`)),this._diagnosticsResultEdit&&(e.push(`## Proposed diagnostics suggestion ${this._nesTypePicked==="diagnostics"?"(Picked)":"(Not Picked)"}`),e.push(`<details open><summary>Edit</summary>
`),e.push("``` patch"),e.push(this._diagnosticsResultEdit.toString()),e.push("```"),e.push(`
</details>
`)),this._resultEdit&&(e.push(`## Proposed inline suggestion ${r}`),e.push(`<details open><summary>Edit</summary>
`),e.push("``` patch"),e.push(this._resultEdit.toString()),e.push("```"),e.push(`
</details>
`)),this.prompt){e.push(`## Prompt ${r}`),e.push(`<details><summary>Click to view</summary>
`);let n=this.prompt;e.push("````"),e.push(...n.split(`
`)),e.push("````"),e.push(`
</details>
`)}return this.error&&(e.push(`## Error ${r}`),e.push("```"),e.push(qY.toString(qY.fromUnknown(this.error))),e.push("```")),this.response&&(e.push(`## Response ${r}`),e.push(`<details><summary>Click to view</summary>
`),e.push("````"),e.push(this.response),e.push("````"),e.push(`
</details>
`)),this._responseResults&&(e.push(`## Response Results ${r}`),e.push(`<details><summary>Click to view</summary>
`),e.push("```"),e.push(DTt.stringify(this._responseResults,null,"	")),e.push("```"),e.push(`
</details>
`)),this._isAccepted!==void 0&&e.push(`## Accepted : ${this._isAccepted?"Yes":"No"}`),this._logs.length>0&&(e.push("## Logs"),e.push(`<details open><summary>Logs</summary>
`),e.push(...this._logs),e.push(`
</details>
`)),this._trace.length>0&&(e.push("## Trace"),e.push(`<details open><summary>Trace</summary>
`),e.push("```"),e.push(...this._trace),e.push("```"),e.push(`
</details>
`)),e.join(`
`)}toMinimalLog(){let e=[];return this._nesTypePicked==="diagnostics"&&this._diagnosticsResultEdit?(e.push("## Result (Diagnostics):"),e.push("``` patch"),e.push(this._diagnosticsResultEdit.toString()),e.push("```")):this._nesTypePicked==="llm"&&this._resultEdit?(e.push("## Result:"),e.push("``` patch"),e.push(this._resultEdit.toString()),e.push("```")):e.push("## Result: <NOT-SET>"),this.error&&(e.push("## Error:"),e.push("```"),e.push(qY.toString(qY.fromUnknown(this.error))),e.push("```")),e.push("### Info:"),e.push(`**From cache:** ${this._logContextOfCachedEdit?`YES (Request: ${this._logContextOfCachedEdit.requestId})`:"NO"}`),this._context&&(e.push(`**Trigger Kind:** ${this._context.triggerKind===0?"Manual":"Automatic"}`),e.push(`**Request UUID:** ${this._context.requestUuid}`)),e.join(`
`)}setStatelessNextEditProviderId(e){this._statelessNextEditProviderId=e}setRequestInput(e){this._isVisible=!0,this._nextEditRequest=e}setResult(e){this._isVisible=!0,this._resultEdit=e}setDiagnosticsResult(e){this._isVisible=!0,this._diagnosticsResultEdit=e}setPickedNESType(e){return this._nesTypePicked=e,this}setIsCachedResult(e){this._logContextOfCachedEdit=e,this.recordingBookmark=e.recordingBookmark,e._nextEditRequest&&(this._nextEditRequest=e._nextEditRequest),e._resultEdit&&this.setResult(e._resultEdit),e._diagnosticsResultEdit&&this.setDiagnosticsResult(e._diagnosticsResultEdit),e._endpointInfo&&this.setEndpointInfo(e._endpointInfo.url,e._endpointInfo.modelName),e.prompt&&this.setPrompt(e.prompt),e.response&&this.setResponse(e.response),e.responseResults&&this.setResponseResults(e.responseResults),e.fullResponsePromise&&this.setFullResponse(e.fullResponsePromise),e.error&&this.setError(e.error),this._isVisible=!0,this._icon=Ad.Icon.database}setEndpointInfo(e,r){this._endpointInfo={url:e,modelName:r}}get prompt(){return this._prompt}setPrompt(e){this._isVisible=!0,typeof e=="string"?this._prompt=e:this._prompt=(0,Rln.stringifyChatMessages)(e)}getIcon(){return this._icon?.themeIcon}setIsSkipped(){this._isVisible=!1,this._icon=Ad.Icon.skipped}markAsNoSuggestions(){this._isVisible=!0,this._icon=Ad.Icon.circleSlash}setError(e){this._isVisible=!0,this.error=e,this.error instanceof Pln.FetchCancellationError?this._icon=Ad.Icon.skipped:(0,Iln.isCancellationError)(this.error)?this._isVisible=!1:this._icon=Ad.Icon.error}setResponse(e){this._isVisible=!0,this.response=e}setFullResponse(e){this.fullResponsePromise=e,e.then(r=>this.fullResponse=r)}async allPromisesResolved(){await this.fullResponsePromise}setProviderStartTime(){this.providerStartTime=Date.now()}setProviderEndTime(){this.providerEndTime=Date.now()}setFetchStartTime(){this.fetchStartTime=Date.now()}setFetchEndTime(){this.fetchEndTime=Date.now()}get responseResults(){return this._responseResults}setResponseResults(e){this._isVisible=!0,this._responseResults=e,this._icon=Ad.Icon.lightbulbFull}getDebugName(){return`NES | ${Oln(this.filePath)} (v${this.version})`}getMarkdownTitle(){return(this._icon?`${this._icon.svg} `:"")+this.getDebugName()}setRecentEdit(e){this._recentEdit=e}trace(e){this._trace.push(e)}addLog(e){this._logs.push(e.replace(`
`,"\\n").replace("	","\\t").replace("`","`")+`
`)}setAccepted(e){this._isAccepted=e}addListToLog(e){e.forEach(r=>this.addLog(`- ${r}`))}addCodeblockToLog(e,r=""){this._logs.push(`\`\`\`${r}
${e}
\`\`\`
`)}setFileDiagnostics(e){this._fileDiagnostics=e}_getDiagnosticsForTrackedFiles(){if(!this._fileDiagnostics||!this._nextEditRequest?.documents)return;let e=this._fileDiagnostics.filter(([r])=>this._nextEditRequest.documents.some(n=>n.id.toString()===r.toString()));return(0,UTt.serializeFileDiagnostics)(e)}setLanguageContext(e){this._languageContext=e}toJSON(){return{requestId:this.requestId,time:this.time,filePath:this.filePath,version:this.version,statelessNextEditProviderId:this._statelessNextEditProviderId,nextEditRequest:this._nextEditRequest?.serialize(),diagnosticsResultEdit:this._diagnosticsResultEdit?.toString(),resultEdit:this._resultEdit?.toString(),isCachedResult:!!this._logContextOfCachedEdit,prompt:this.prompt,error:String(this.error),response:this.fullResponse,responseResults:DTt.stringify(this._responseResults,null,"	"),providerStartTime:this.providerStartTime,providerEndTime:this.providerEndTime,fetchStartTime:this.fetchStartTime,fetchEndTime:this.fetchEndTime,logs:this._logs,isAccepted:this._isAccepted,languageContext:this._languageContext?(0,UTt.serializeLanguageContext)(this._languageContext):void 0,diagnostics:this._getDiagnosticsForTrackedFiles()}}};uh.InlineEditRequestLogContext=TAe;function Oln(t){let e=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return e===-1?t:t.slice(e+1)}});var jTt=m(Ug=>{"use strict";var Mln=Ug&&Ug.__decorate||function(t,e,r,n){var o=arguments.length,s=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(o<3?a(s):o>3?a(e,r,s):a(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},Nln=Ug&&Ug.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(Ug,"__esModule",{value:!0});Ug.ObservableGit=void 0;var Lln=Ar(),fy=cp(),kln=qbe(),SAe=class extends Lln.Disposable{constructor(e){super(),this._gitExtensionService=e,this._gitApi=(0,fy.observableFromEvent)(this,r=>this._gitExtensionService.onDidChange(r),()=>this._gitExtensionService.getExtensionApi()),this.branch=(0,fy.observableValue)("branchName",void 0),this.init()}async init(){let e=await(0,fy.waitForState)(this._gitApi);if(this._store.isDisposed)return;let r=(0,fy.observableFromEvent)(this,n=>e.onDidOpenRepository(n),()=>e.repositories);await(0,fy.waitForState)(r,n=>n.length>0,void 0),!this._store.isDisposed&&(0,fy.mapObservableArrayCached)(this,r,(n,o)=>{let s=(0,fy.observableFromEvent)(a=>n.state.onDidChange(a),()=>n.state.HEAD?.name);o.add((0,fy.autorunWithStore)((a,c)=>{this.branch.set(s.read(a),void 0)}))},n=>n.rootUri.toString()).recomputeInitiallyAndOnChange(this._store)}};Ug.ObservableGit=SAe;Ug.ObservableGit=SAe=Mln([Nln(0,kln.IGitExtensionService)],SAe)});var jY=m(Ln=>{"use strict";Object.defineProperty(Ln,"__esModule",{value:!0});Ln.lengthZero=void 0;Ln.lengthDiff=qln;Ln.lengthIsZero=Fln;Ln.toLength=bC;Ln.lengthToObj=jln;Ln.lengthGetLineCount=Bln;Ln.lengthGetColumnCountIfZeroLineCount=$ln;Ln.lengthAdd=$Tt;Ln.sumLengths=Vln;Ln.lengthEquals=Hln;Ln.lengthDiffNonNegative=Gln;Ln.lengthLessThan=zln;Ln.lengthLessThanEqual=Wln;Ln.lengthGreaterThanEqual=Kln;Ln.lengthToPosition=Yln;Ln.positionToLength=Qln;Ln.lengthsToRange=Zln;Ln.lengthOfRange=Jln;Ln.lengthCompare=Xln;Ln.lengthOfString=eun;Ln.lengthOfStringObj=tun;Ln.lengthHash=nun;Ln.lengthMax=iun;var BTt=Fo(),Dln=tf(),Uln=Ya(),FY=oI();function qln(t,e,r,n){return t!==r?bC(r-t,n):bC(0,n-e)}Ln.lengthZero=0;function Fln(t){return t===0}var Pa=2**26;function bC(t,e){return t*Pa+e}function jln(t){let e=t,r=Math.floor(e/Pa),n=e-r*Pa;return new FY.TextLength(r,n)}function Bln(t){return Math.floor(t/Pa)}function $ln(t){return t}function $Tt(t,e){let r=t+e;return e>=Pa&&(r=r-t%Pa),r}function Vln(t,e){return t.reduce((r,n)=>$Tt(r,e(n)),Ln.lengthZero)}function Hln(t,e){return t===e}function Gln(t,e){let r=t,n=e;if(n-r<=0)return Ln.lengthZero;let s=Math.floor(r/Pa),a=Math.floor(n/Pa),c=n-a*Pa;if(s===a){let l=r-s*Pa;return bC(0,c-l)}else return bC(a-s,c)}function zln(t,e){return t<e}function Wln(t,e){return t<=e}function Kln(t,e){return t>=e}function Yln(t){let e=t,r=Math.floor(e/Pa),n=e-r*Pa;return new Dln.Position(r+1,n+1)}function Qln(t){return bC(t.lineNumber-1,t.column-1)}function Zln(t,e){let r=t,n=Math.floor(r/Pa),o=r-n*Pa,s=e,a=Math.floor(s/Pa),c=s-a*Pa;return new Uln.Range(n+1,o+1,a+1,c+1)}function Jln(t){return t.startLineNumber===t.endLineNumber?new FY.TextLength(0,t.endColumn-t.startColumn):new FY.TextLength(t.endLineNumber-t.startLineNumber,t.endColumn-1)}function Xln(t,e){return t-e}function eun(t){let e=(0,BTt.splitLines)(t);return bC(e.length-1,e[e.length-1].length)}function tun(t){let e=(0,BTt.splitLines)(t);return new FY.TextLength(e.length-1,e[e.length-1].length)}function nun(t){return t}function iun(t,e){return t>e?t:e}});var AAe=m(BY=>{"use strict";Object.defineProperty(BY,"__esModule",{value:!0});BY.TextEditInfo=void 0;var bAe=jY(),CAe=class{constructor(e,r,n){this.startOffset=e,this.endOffset=r,this.newLength=n}toString(){return`[${(0,bAe.lengthToObj)(this.startOffset)}...${(0,bAe.lengthToObj)(this.endOffset)}) -> ${(0,bAe.lengthToObj)(this.newLength)}`}};BY.TextEditInfo=CAe});var HTt=m(xAe=>{"use strict";Object.defineProperty(xAe,"__esModule",{value:!0});xAe.combineTextEditInfos=aun;var oun=Ui(),Yo=jY(),sun=AAe();function aun(t,e){if(t.length===0)return e;if(e.length===0)return t;let r=new oun.ArrayQueue(VTt(t)),n=VTt(e);n.push({modified:!1,lengthBefore:void 0,lengthAfter:void 0});let o=r.dequeue();function s(u){if(u===void 0){let f=r.takeWhile(p=>!0)||[];return o&&f.unshift(o),f}let d=[];for(;o&&!(0,Yo.lengthIsZero)(u);){let[f,p]=o.splitAt(u);d.push(f),u=(0,Yo.lengthDiffNonNegative)(f.lengthAfter,u),o=p??r.dequeue()}return(0,Yo.lengthIsZero)(u)||d.push(new Nk(!1,u,u)),d}let a=[];function c(u,d,f){if(a.length>0&&(0,Yo.lengthEquals)(a[a.length-1].endOffset,u)){let p=a[a.length-1];a[a.length-1]=new sun.TextEditInfo(p.startOffset,d,(0,Yo.lengthAdd)(p.newLength,f))}else a.push({startOffset:u,endOffset:d,newLength:f})}let l=Yo.lengthZero;for(let u of n){let d=s(u.lengthBefore);if(u.modified){let f=(0,Yo.sumLengths)(d,h=>h.lengthBefore),p=(0,Yo.lengthAdd)(l,f);c(l,p,u.lengthAfter),l=p}else for(let f of d){let p=l;l=(0,Yo.lengthAdd)(l,f.lengthBefore),f.modified&&c(p,l,f.lengthAfter)}}return a}var Nk=class t{constructor(e,r,n){this.modified=e,this.lengthBefore=r,this.lengthAfter=n}splitAt(e){let r=(0,Yo.lengthDiffNonNegative)(e,this.lengthAfter);return(0,Yo.lengthEquals)(r,Yo.lengthZero)?[this,void 0]:this.modified?[new t(this.modified,this.lengthBefore,e),new t(this.modified,Yo.lengthZero,r)]:[new t(this.modified,e,e),new t(this.modified,r,r)]}toString(){return`${this.modified?"M":"U"}:${(0,Yo.lengthToObj)(this.lengthBefore)} -> ${(0,Yo.lengthToObj)(this.lengthAfter)}`}};function VTt(t){let e=[],r=Yo.lengthZero;for(let n of t){let o=(0,Yo.lengthDiffNonNegative)(r,n.startOffset);(0,Yo.lengthIsZero)(o)||e.push(new Nk(!1,o,o));let s=(0,Yo.lengthDiffNonNegative)(n.startOffset,n.endOffset);e.push(new Nk(!0,s,n.newLength)),r=n.endOffset}return e}});var zTt=m($R=>{"use strict";Object.defineProperty($R,"__esModule",{value:!0});$R.SingleTextEditLength=$R.TextLengthEdit=void 0;var cun=Ya(),GTt=oI(),lun=HTt(),Lk=jY(),uun=AAe(),wAe=class t{static{this.empty=new t([])}static fromTextEdit(e){let r=e.replacements.map(n=>new kk(n.range,GTt.TextLength.ofText(n.text)));return new t(r)}static _fromTextEditInfo(e){let r=e.map(n=>{let o=(0,Lk.lengthToObj)(n.newLength);return new kk((0,Lk.lengthsToRange)(n.startOffset,n.endOffset),new GTt.TextLength(o.lineCount,o.columnCount))});return new t(r)}constructor(e){this.edits=e}_toTextEditInfo(){return this.edits.map(e=>new uun.TextEditInfo((0,Lk.toLength)(e.range.startLineNumber-1,e.range.startColumn-1),(0,Lk.toLength)(e.range.endLineNumber-1,e.range.endColumn-1),(0,Lk.toLength)(e.newLength.lineCount,e.newLength.columnCount)))}compose(e){let r=this._toTextEditInfo(),n=e._toTextEditInfo(),o=(0,lun.combineTextEditInfos)(r,n);return t._fromTextEditInfo(o)}getRange(){if(this.edits.length!==0)return cun.Range.fromPositions(this.edits[0].range.getStartPosition(),this.edits.at(-1).range.getEndPosition())}toString(){return`[${this.edits.join(", ")}]`}};$R.TextLengthEdit=wAe;var kk=class{constructor(e,r){this.range=e,this.newLength=r}toString(){return`{ range: ${this.range}, newLength: ${this.newLength} }`}};$R.SingleTextEditLength=kk});var WTt=m(VR=>{"use strict";Object.defineProperty(VR,"__esModule",{value:!0});VR.DocumentHistory=VR.HistoryContext=void 0;var dun=qi(),fun=og(),IAe=class{constructor(e){this.documents=e,(0,dun.assert)(e.length>0)}getMostRecentDocument(){return this.documents.at(-1)}getDocument(e){return this.documents.find(r=>r.docId===e)}getDocumentAndIdx(e){let r=this.documents.findIndex(n=>n.docId===e);if(r!==-1)return{doc:this.documents[r],idx:r}}};VR.HistoryContext=IAe;var PAe=class{constructor(e,r,n,o,s){this.docId=e,this.languageId=r,this.base=n,this.lastEdits=o,this.lastSelection=s,this.lastEdit=new fun.RootedEdit(this.base,this.lastEdits.compose())}};VR.DocumentHistory=PAe});var XTt=m(HR=>{"use strict";Object.defineProperty(HR,"__esModule",{value:!0});HR.NesHistoryContextProvider=void 0;HR.sum=Uk;HR.editExtends=JTt;var KTt=Ar(),YTt=cp(),pun=Ol(),Dk=Wl(),hun=NN(),mun=up(),$Y=og(),gun=iG(),QTt=zTt(),_un=Km(),qk=lG(),ZTt=WTt(),RAe=class extends KTt.Disposable{constructor(e,r){super(),this._documentState=new Map,this._lastDocuments=new MAe(50),this._register((0,YTt.autorun)(n=>{n.readObservable(r.branch)!==void 0&&(this._lastGitCheckout=(0,qk.now)(),this._documentState.forEach(s=>s.applyAllEdits()))})),(0,YTt.mapObservableArrayCached)(this,e.openDocuments,(n,o)=>{let s=n.selection.get().at(0),a=new OAe(n.id,n.value.get().value,n.languageId.get(),s);this._documentState.set(a.docId,a),s&&this._lastDocuments.push(a),o.add((0,_un.autorunWithChanges)(this,{value:n.value,selection:n.selection,languageId:n.languageId},c=>{c.languageId.changes.length>0&&(a.languageId=c.languageId.value);let l=this._isAwaitingGitCheckoutCooldown();for(let u of c.value.changes)this._lastDocuments.push(a),a.handleEdit(u,l);c.selection.changes.length>0&&(a.handleSelection(c.selection.value.at(0)),this._lastDocuments.push(a))})),o.add((0,KTt.toDisposable)(()=>{let c=this._documentState.get(n.id);c&&this._lastDocuments.remove(c),this._documentState.delete(n.id)}))},n=>n.id).recomputeInitiallyAndOnChange(this._store)}getHistoryContext(e){let r=this._documentState.get(e);if(!r||!this._lastDocuments.has(r))return;let n=[],o=!1,s=5;for(let a of this._lastDocuments.getItemsReversed()){let c=a.getRecentEdit(s);if(c!==void 0&&(c.editCount===0&&o||(a.docId===e&&(o=!0),n.push(c.history),s-=c.editCount,s<=0)))break}if(n.reverse(),!!n.some(a=>a.docId===e))return new ZTt.HistoryContext(n)}_isAwaitingGitCheckoutCooldown(){if(!this._lastGitCheckout)return!1;let e=(0,qk.now)()-this._lastGitCheckout<2*1e3;return e||(this._lastGitCheckout=void 0),e}};HR.NesHistoryContextProvider=RAe;var OAe=class t{static{this.MAX_EDITED_LINES_PER_EDIT=10}static{this.MAX_EDITED_CHARS_PER_EDIT=5e3}constructor(e,r,n,o){this.docId=e,this.languageId=n,this._edits=[],this._isUserDocument=!1,this._baseValue=new mun.StringText(r),this._currentValue=this._baseValue,this.handleSelection(o)}getSelection(){return this._selection}handleSelection(e){e&&(this._isUserDocument=!0),this._selection=e}handleEdit(e,r){if(e.isEmpty())return;this._currentValue=e.applyOnText(this._currentValue);let n=hun.TextEdit.fromStringEdit(e,this._currentValue),o=QTt.TextLengthEdit.fromTextEdit(n);if(r){this._baseValue=this._currentValue,this._edits=[];return}function s(c){return Uk(c.replacements,l=>l.newText.length)}let a=this._edits.at(-1);a&&s(a.edit)<200&&JTt(e,a.edit)?(a.edit=a.edit.compose(e),a.textLengthEdit=a.textLengthEdit.compose(o),a.instant=(0,qk.now)(),a.edit.isEmpty()&&this._edits.pop()):this._edits.push({edit:e,textLengthEdit:o,instant:(0,qk.now)()})}getRecentEdit(e){if(!this._isUserDocument)return;let{editCount:r}=this._applyStaleEdits(e),n=new $Y.Edits(Dk.StringEdit,this._edits.map(o=>o.edit));return{history:new ZTt.DocumentHistory(this.docId,this.languageId,this._baseValue,n,this._selection),editCount:r}}applyAllEdits(){this._baseValue=this._currentValue,this._edits=[]}_applyStaleEdits(e){let r=this._currentValue,n=Dk.StringEdit.empty,o=QTt.TextLengthEdit.empty,s,a=0,c=Dk.StringEdit.empty;for(s=this._edits.length-1;s>=0;s--){let l=this._edits[s];if((0,qk.now)()-l.instant>600*1e3)break;let u=l.textLengthEdit.compose(o),d=u.getRange();if((0,pun.assertType)(d,"we only compose non-empty Edits"),d.endLineNumber-d.startLineNumber>100)break;let f=Uk(l.textLengthEdit.edits,S=>S.range.endLineNumber-S.range.startLineNumber+S.newLength.lineCount);if(f>t.MAX_EDITED_LINES_PER_EDIT||Uk(l.edit.replacements,S=>S.newText.length)>t.MAX_EDITED_CHARS_PER_EDIT||Uk(l.edit.replacements,S=>S.replaceRange.length)>t.MAX_EDITED_CHARS_PER_EDIT)break;if(s===this._edits.length-1)c=l.edit;else{let S=Dk.StringEdit.trySwap(l.edit,c);if(S)c=S.e1;else{if(f>=2)break;c=l.edit.compose(c)}}r=l.edit.inverse(r.value).applyOnText(r);let g=l.edit.compose(n),v=$Y.RootedEdit.toLineEdit(new $Y.RootedEdit(r,g)),y=new gun.RootedLineEdit(r,v).removeCommonSuffixPrefixLines().edit.replacements.length;if(y>e)break;a=y,n=g,o=u}for(let l=0;l<=s;l++){let u=this._edits[l];this._baseValue=u.edit.applyOnText(this._baseValue)}return this._edits=this._edits.slice(s+1),{editCount:a}}toString(){return new $Y.Edits(Dk.StringEdit,this._edits.map(e=>e.edit)).toHumanReadablePatch(this._baseValue)}};function Uk(t,e){let r=0;for(let n of t)r+=e(n);return r}function JTt(t,e){let r=e.getNewRanges();return t.replacements.every(n=>vun(n.replaceRange,r))}function vun(t,e){return e.some(r=>t.start===r.endExclusive||t.endExclusive===r.start)}var MAe=class{constructor(e){this.maxSize=e,this._arr=[]}push(e){let r=this._arr.indexOf(e);r!==-1?this._arr.splice(r,1):this._arr.length>=this.maxSize&&this._arr.shift(),this._arr.push(e)}remove(e){let r=this._arr.indexOf(e);r!==-1&&this._arr.splice(r,1)}getItemsReversed(){let e=[...this._arr];return e.reverse(),e}has(e){return this._arr.indexOf(e)!==-1}}});var tSt=m(HY=>{"use strict";Object.defineProperty(HY,"__esModule",{value:!0});HY.NesXtabHistoryTracker=void 0;var eSt=qi(),yun=Ar(),Eun=V2(),Tun=cp(),VY=og(),Sun=Km(),NAe=class t extends yun.Disposable{static{this.MAX_HISTORY_SIZE=50}constructor(e,r=t.MAX_HISTORY_SIZE){super(),this.maxHistorySize=r,this.idToEntry=new Map,this.history=new Eun.LinkedList,(0,Tun.mapObservableArrayCached)(this,e.openDocuments,(n,o)=>{o.add((0,Sun.autorunWithChanges)(this,{rootedEdits:n.value,visibleRanges:n.visibleRanges},s=>{s.rootedEdits.changes.length>0&&s.rootedEdits.previous!==void 0?this.handleEdits(n,s.rootedEdits):this.handleVisibleRangesChange(n,s.visibleRanges)}))},n=>n.id).recomputeInitiallyAndOnChange(this._store)}getHistory(){return[...this.history]}handleVisibleRangesChange(e,r){if(r.value.length===0)return;let n=this.idToEntry.get(e.id);if(n!==void 0){if(n.entry.kind==="edit")return;n.removeFromHistory()}let o={docId:e.id,kind:"visibleRanges",visibleRanges:r.value,documentContent:e.value.get()},s=this.history.push(o);this.idToEntry.set(e.id,{entry:o,removeFromHistory:s}),this.compactHistory()}handleEdits(e,r){(0,eSt.assert)(r.previous!==void 0,"Document has previous version"),(0,eSt.assert)(r.changes.length===1,`Expected 1 edit change but got ${r.changes.length}`);let n=r.changes[0];if(n.replacements.length===0)return;let o=this.idToEntry.get(e.id),s=r.previous,a=new VY.RootedEdit(s,n);if(o===void 0){this.pushToHistory(e.id,a);return}if(o.entry.kind==="visibleRanges"){o.removeFromHistory(),this.pushToHistory(e.id,a);return}let c=o.entry.edit,l=VY.RootedEdit.toLineEdit(c),u=VY.RootedEdit.toLineEdit(a);if(!u.isEmpty()&&!l.isEmpty()&&l.replacements[0].lineRange.startLineNumber===u.replacements[0].lineRange.startLineNumber){o.removeFromHistory();let d=c.edit.compose(n),f=new VY.RootedEdit(c.base,d);this.pushToHistory(e.id,f)}else this.pushToHistory(e.id,a)}pushToHistory(e,r){let n={docId:e,kind:"edit",edit:r},o=this.history.push(n);this.idToEntry.set(e,{entry:n,removeFromHistory:o}),this.compactHistory()}compactHistory(){if(this.history.size>this.maxHistorySize){let e=this.history.shift();if(e!==void 0){let r=this.idToEntry.get(e.docId);r!==void 0&&e===r.entry&&this.idToEntry.delete(e.docId)}}}};HY.NesXtabHistoryTracker=NAe});var rSt=m(CC=>{"use strict";Object.defineProperty(CC,"__esModule",{value:!0});CC.count=bun;CC.findInsertionIndexInSortedArray=Cun;CC.max=Aun;CC.filterMap=xun;CC.min=wun;function bun(t,e){let r=0;for(let n of t)e(n)&&r++;return r}function Cun(t,e,r){let n=0,o=t.length;for(;n<o;){let s=n+o>>>1;r(t[s],e)?n=s+1:o=s}return n}function Aun(t,e){if(t.length===0)return;let r=t[0];for(let n=1;n<t.length;n++){let o=t[n];e(o,r)>0&&(r=o)}return r}function xun(t,e){let r=[];for(let n of t){let o=e(n);o!=null&&r.push(o)}return r}function wun(t){if(t.length===0)return 1/0;let e=t[0];for(let r=1;r<t.length;r++)e=Math.min(e,t[r]);return e}});var nSt=m(GY=>{"use strict";Object.defineProperty(GY,"__esModule",{value:!0});GY.IVSCodeExtensionContext=void 0;var Iun=Qe();GY.IVSCodeExtensionContext=(0,Iun.createServiceIdentifier)("IVSCodeExtensionContext")});var kAe=m(GR=>{"use strict";Object.defineProperty(GR,"__esModule",{value:!0});GR.NullProxyModelsService=GR.IProxyModelsService=void 0;var Pun=Qe(),Run=Fi();GR.IProxyModelsService=(0,Pun.createServiceIdentifier)("IProxyModelsService");var LAe=class{constructor(){this.onModelListUpdated=Run.Event.None}get models(){}get nesModels(){}get instantApplyModels(){}};GR.NullProxyModelsService=LAe});var cSt=m($s=>{"use strict";var Oun=$s&&$s.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),Mun=$s&&$s.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),aSt=$s&&$s.__decorate||function(t,e,r,n){var o=arguments.length,s=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(o<3?a(s):o>3?a(e,r,s):a(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},Nun=$s&&$s.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),o=0;o<n.length;o++)n[o]!=="default"&&Oun(r,e,n[o]);return Mun(r,e),r}})(),py=$s&&$s.__param||function(t,e){return function(r,n){e(r,n,t)}},jk;Object.defineProperty($s,"__esModule",{value:!0});$s.UndesiredModels=$s.InlineEditsModelService=void 0;var Lun=rSt(),iSt=Nun(fg()),kun=aL(),Dun=Ui(),oSt=qi(),Uun=Fi(),qun=Ar(),Fk=cp(),Fun=S_(),d0=Ni(),jun=nSt(),$un=pa(),Vun=kAe(),Hun=Vo(),Gun=qa(),zY=S1(),zun=wW(),DAe=class extends qun.Disposable{static{jk=this}static{this.COPILOT_NES_XTAB_MODEL={modelName:"copilot-nes-xtab",promptingStrategy:zY.PromptingStrategy.CopilotNesXtab,includeTagsInCurrentFile:!0,source:"hardCodedDefault"}}static{this.COPILOT_NES_OCT={modelName:"copilot-nes-oct",promptingStrategy:zY.PromptingStrategy.Xtab275,includeTagsInCurrentFile:!1,source:"hardCodedDefault"}}static{this.COPILOT_NES_CALLISTO={modelName:"nes-callisto",promptingStrategy:zY.PromptingStrategy.Xtab275,includeTagsInCurrentFile:!1,source:"hardCodedDefault"}}constructor(e,r,n,o,s,a,c){super(),this._tokenStore=e,this._proxyModelsService=r,this._undesiredModelsManager=n,this._configService=o,this._expService=s,this._telemetryService=a,this._logService=c,this._copilotTokenObs=(0,Fk.observableFromEvent)(this,this._tokenStore.onDidStoreUpdate,()=>this._tokenStore.copilotToken),this._fetchedModelsObs=(0,Fk.observableFromEvent)(this,this._proxyModelsService.onModelListUpdated,()=>this._proxyModelsService.nesModels),this._preferredModelNameObs=this._configService.getExperimentBasedConfigObservable(d0.ConfigKey.Advanced.InlineEditsPreferredModel,this._expService),this._localModelConfigObs=this._configService.getConfigObservable(d0.ConfigKey.TeamInternal.InlineEditsXtabProviderModelConfiguration),this._expBasedModelConfigObs=this._configService.getExperimentBasedConfigObservable(d0.ConfigKey.TeamInternal.InlineEditsXtabProviderModelConfigurationString,this._expService),this._defaultModelConfigObs=this._configService.getExperimentBasedConfigObservable(d0.ConfigKey.TeamInternal.InlineEditsXtabProviderDefaultModelConfigurationString,this._expService),this._tracer=(0,kun.createTracer)(["NES","ModelsService"],u=>this._logService.trace(u));let l=this._tracer.sub("constructor");this._modelsObs=(0,Fk.derived)(u=>(l.trace("computing models"),this.aggregateModels({copilotToken:this._copilotTokenObs.read(u),fetchedNesModels:this._fetchedModelsObs.read(u),localModelConfig:this._localModelConfigObs.read(u),modelConfigString:this._expBasedModelConfigObs.read(u),defaultModelConfigString:this._defaultModelConfigObs.read(u)}))).recomputeInitiallyAndOnChange(this._store),this._currentModelObs=(0,Fk.derived)(u=>(l.trace("computing current model"),this._pickModel({preferredModelName:this._preferredModelNameObs.read(u),models:this._modelsObs.read(u)}))).recomputeInitiallyAndOnChange(this._store),this._modelInfoObs=(0,Fk.derived)(u=>(l.trace("computing model info"),{models:this._modelsObs.read(u),currentModelId:this._currentModelObs.read(u).modelName})).recomputeInitiallyAndOnChange(this._store),this.onModelListUpdated=Uun.Event.fromObservableLight(this._modelInfoObs)}get modelInfo(){let e=this._modelsObs.get().map(n=>({id:n.modelName,name:n.modelName})),r=this._currentModelObs.get();return{models:e,currentModelId:r.modelName}}async setCurrentModelId(e){if(this._configService.getExperimentBasedConfig(d0.ConfigKey.Advanced.InlineEditsPreferredModel,this._expService)===e)return;let o=this._currentModelObs.get(),s=this._modelsObs.get(),a=s.find(l=>l.modelName===e);if(a===void 0){this._logService.error(`New preferred model id ${e} not found in model list.`);return}o.source==="expConfig"&&await this._undesiredModelsManager.addUndesiredModelId(o.modelName),this._undesiredModelsManager.isUndesiredModelId(e)&&await this._undesiredModelsManager.removeUndesiredModelId(e);let c=this._pickModel({preferredModelName:"none",models:s});a.source==="expConfig"||e===c.modelName&&!s.some(l=>l.source==="expConfig")?(this._tracer.trace(`New preferred model id ${e} is the same as the default model, resetting user setting.`),await this._configService.setConfig(d0.ConfigKey.Advanced.InlineEditsPreferredModel,"none")):(this._tracer.trace(`New preferred model id ${e} is different from the default model, updating user setting to ${e}.`),await this._configService.setConfig(d0.ConfigKey.Advanced.InlineEditsPreferredModel,e))}aggregateModels({copilotToken:e,fetchedNesModels:r,localModelConfig:n,modelConfigString:o,defaultModelConfigString:s}){let a=this._tracer.sub("aggregateModels"),c=[];if(n&&(c.some(u=>u.modelName===n.modelName)?a.trace("Local model configuration already exists in the model list, skipping."):(a.trace(`Adding local model configuration: ${n.modelName}`),c.push({...n,source:"localConfig"}))),o){a.trace("Parsing modelConfigurationString...");let u=this.parseModelConfigStringSetting(d0.ConfigKey.TeamInternal.InlineEditsXtabProviderModelConfigurationString);u&&!c.some(d=>d.modelName===u.modelName)?(a.trace(`Adding model from modelConfigurationString: ${u.modelName}`),c.push({...u,source:"expConfig"})):a.trace("No valid model found in modelConfigurationString.")}let l=this._configService.getExperimentBasedConfig(d0.ConfigKey.TeamInternal.InlineEditsUseSlashModels,this._expService);if(l&&r&&r.length>0){a.trace(`Processing ${r.length} fetched models...`);let u=(0,Lun.filterMap)(r,d=>{if((0,zY.isPromptingStrategy)(d.capabilities.promptStrategy)){if(c.some(f=>f.modelName===d.name)){a.trace(`Fetched model ${d.name} already exists in the model list, skipping.`);return}return{modelName:d.name,promptingStrategy:d.capabilities.promptStrategy,includeTagsInCurrentFile:!1,source:"fetched"}}});a.trace(`Adding ${u.length} fetched models after filtering.`),(0,Dun.pushMany)(c,u)}else{a.trace(`adding built-in default model: useSlashModels ${l}, fetchedNesModels ${r}`);let u=this.determineDefaultModel(e,s);u&&(c.some(d=>d.modelName===u.modelName)?a.trace("Default model configuration already exists in the model list, skipping."):(a.trace(`Adding default model configuration: ${u.modelName}`),c.push(u)))}return c}selectedModelConfiguration(){let e=this._tracer.sub("selectedModelConfiguration"),r=this._currentModelObs.get();return r?(e.trace(`Selected model found: ${r.modelName}`),{modelName:r.modelName,promptingStrategy:r.promptingStrategy,includeTagsInCurrentFile:r.includeTagsInCurrentFile}):(e.trace("No selected model found, using default model."),this.determineDefaultModel(this._copilotTokenObs.get(),this._defaultModelConfigObs.get()))}defaultModelConfiguration(){let e=this._modelsObs.get();if(e&&e.length>0){let r=e.filter(n=>!this.isConfiguredModel(n));if(r.length>0)return r[0]}return this.determineDefaultModel(this._copilotTokenObs.get(),this._defaultModelConfigObs.get())}isConfiguredModel(e){switch(e.source){case"localConfig":case"expConfig":case"expDefaultConfig":return!0;case"fetched":case"hardCodedDefault":return!1;default:(0,oSt.assertNever)(e.source)}}determineDefaultModel(e,r){if(r){let n=this.parseModelConfigStringSetting(d0.ConfigKey.TeamInternal.InlineEditsXtabProviderDefaultModelConfigurationString);if(n)return{...n,source:"expDefaultConfig"}}return e?.isFcv1()?jk.COPILOT_NES_XTAB_MODEL:e?.isFreeUser||e?.isNoAuthUser?jk.COPILOT_NES_CALLISTO:jk.COPILOT_NES_OCT}_pickModel({preferredModelName:e,models:r}){let n=r.find(a=>a.source==="expConfig");if(n)if(this._undesiredModelsManager.isUndesiredModelId(n.modelName))this._tracer.trace(`Exp-configured model ${n.modelName} is marked as undesired by the user. Skipping.`);else return n;if(e!=="none"){let a=r.find(c=>c.modelName===e);if(a)return a}(0,oSt.softAssert)(r.length>0,"InlineEdits model list should have at least one model");let s=r.at(0);return s||this.determineDefaultModel(this._copilotTokenObs.get(),this._defaultModelConfigObs.get())}parseModelConfigStringSetting(e){let r=this._configService.getExperimentBasedConfig(e,this._expService);if(r===void 0)return;let n;try{n=JSON.parse(r)}catch(o){this._telemetryService.sendMSFTTelemetryEvent("incorrectNesModelConfig",{configName:e.id,errorMessage:iSt.toString(iSt.fromUnknown(o)),configValue:r})}return n}};$s.InlineEditsModelService=DAe;$s.InlineEditsModelService=DAe=jk=aSt([py(0,Fun.ICopilotTokenStore),py(1,Vun.IProxyModelsService),py(2,zun.IUndesiredModelsManager),py(3,d0.IConfigurationService),py(4,Hun.IExperimentationService),py(5,Gun.ITelemetryService),py(6,$un.ILogService)],DAe);var sSt;(function(t){let e="copilot.chat.nextEdits.undesiredModelIds",r=class{constructor(o){this._vscodeExtensionContext=o}isUndesiredModelId(o){return this._getModels().includes(o)}addUndesiredModelId(o){let s=this._getModels();return s.includes(o)?Promise.resolve():(s.push(o),this._setModels(s))}removeUndesiredModelId(o){let s=this._getModels(),a=s.indexOf(o);return a!==-1?(s.splice(a,1),this._setModels(s)):Promise.resolve()}_getModels(){return this._vscodeExtensionContext.globalState.get(e)??[]}_setModels(o){return new Promise((s,a)=>{this._vscodeExtensionContext.globalState.update(e,o).then(s,a)})}};r=aSt([py(0,jun.IVSCodeExtensionContext)],r),t.Manager=r})(sSt||($s.UndesiredModels=sSt={}))});var lSt=m(WY=>{"use strict";Object.defineProperty(WY,"__esModule",{value:!0});WY.NullLanguageContextProviderService=void 0;var Wun=Ar(),UAe=class{registerContextProvider(e,r){return Wun.Disposable.None}getAllProviders(){return[]}getContextProviders(e){return[]}getContextItems(e,r,n){return{[Symbol.asyncIterator]:async function*(){}}}getContextItemsOnTimeout(e,r){return[]}};WY.NullLanguageContextProviderService=UAe});var uSt=m(KY=>{"use strict";Object.defineProperty(KY,"__esModule",{value:!0});KY.TestLanguageDiagnosticsService=void 0;var Kun=Fi(),Yun=f_(),Qun=IW(),qAe=class extends Qun.AbstractLanguageDiagnosticsService{constructor(){super(...arguments),this.diagnosticsMap=new Yun.ResourceMap,this._onDidChangeDiagnostics=new Kun.Emitter,this.onDidChangeDiagnostics=this._onDidChangeDiagnostics.event}setDiagnostics(e,r){this.diagnosticsMap.set(e,r),this._onDidChangeDiagnostics.fire({uris:[e]})}getDiagnostics(e){return this.diagnosticsMap.get(e)||[]}getAllDiagnostics(){return Array.from(this.diagnosticsMap.entries())}};KY.TestLanguageDiagnosticsService=qAe});var fSt=m(YY=>{"use strict";Object.defineProperty(YY,"__esModule",{value:!0});YY.WireTypes=void 0;var hy=xj(),dSt;(function(t){let e;(function(o){function s(a){return!!a&&typeof a=="object"&&typeof a.promptStrategy=="string"}o.is=s,o.validator=(0,hy.vObj)({promptStrategy:(0,hy.vString)()})})(e=t.Capabilities||(t.Capabilities={}));let r;(function(o){o.validator=(0,hy.vObj)({serviceType:(0,hy.vString)(),name:(0,hy.vString)(),provider:(0,hy.vString)(),capabilities:e.validator});function s(a){return!!a&&typeof a=="object"&&typeof a.serviceType=="string"&&typeof a.name=="string"&&typeof a.provider=="string"&&e.is(a.capabilities)}o.is=s})(r=t.Model||(t.Model={}));let n;(function(o){o.validator=(0,hy.vObj)({models:(0,hy.vArray)(r.validator)});function s(a){return!!a&&typeof a=="object"&&Array.isArray(a.models)&&a.models.every(r.is)}o.is=s})(n=t.ModelList||(t.ModelList={}))})(dSt||(YY.WireTypes=dSt={}))});var hSt=m(dc=>{"use strict";var Zun=dc&&dc.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),Jun=dc&&dc.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),Xun=dc&&dc.__decorate||function(t,e,r,n){var o=arguments.length,s=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(o<3?a(s):o>3?a(e,r,s):a(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},edn=dc&&dc.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),o=0;o<n.length;o++)n[o]!=="default"&&Zun(r,e,n[o]);return Jun(r,e),r}})(),QY=dc&&dc.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(dc,"__esModule",{value:!0});dc.ProxyModelsService=void 0;var tdn=require("util"),FAe=edn(fg()),rdn=Oh(),ndn=Fi(),idn=Ar(),pSt=cp(),odn=S_(),sdn=tl(),adn=fSt(),cdn=pa(),ldn=tu(),jAe=class extends idn.Disposable{constructor(e,r,n,o){super(),this._tokenStore=e,this._capiClient=r,this._fetchService=n,this._logService=o,this._onModelListUpdated=this._register(new ndn.Emitter),this.onModelListUpdated=this._onModelListUpdated.event;let s=(0,pSt.observableFromEvent)(this,this._tokenStore.onDidStoreUpdate,()=>this._tokenStore.copilotToken);this._register((0,pSt.autorun)(a=>{let c=s.read(a),l=new rdn.CancellationTokenSource;this._fetchLatestModels(c,l.token).then(u=>{u!==void 0&&(l.token.isCancellationRequested||(0,tdn.isDeepStrictEqual)(this._models,u)||(this._models=u,this._onModelListUpdated.fire()))}).catch(u=>{let d=FAe.fromUnknown(u);this._logService.error(d,"Failed to fetch models in autorun")}),a.store.add({dispose:()=>l.dispose(!0)})}))}get models(){return this._models}get nesModels(){return this._models?.models.filter(e=>e.serviceType==="NESChat")}get instantApplyModels(){return this._models?.models.filter(e=>e.serviceType==="InstantApplyChat")}async _fetchLatestModels(e,r){if(!e)return;let n=`${this._capiClient.proxyBaseURL}/models`,o=this._fetchService.makeAbortController(),s=r.onCancellationRequested(()=>o.abort()),a;try{a=await this._fetchService.fetch(n,{headers:{Authorization:`Bearer ${e.token}`},method:"GET",timeout:1e4,signal:o.signal})}catch(c){let l=FAe.fromUnknown(c);this._logService.error(l,"Failed to fetch model list");return}finally{s.dispose()}if(!a.ok){this._logService.error(`Failed to fetch model list: ${a.status} ${a.statusText}`);return}try{let c=await a.json(),l=adn.WireTypes.ModelList.validator.validate(c);if(l.error)throw new Error(`Invalid /models response data: ${l.error.message}`);return l.content}catch(c){let l=FAe.fromUnknown(c);this._logService.error(l,"Failed to process /models response");return}}};dc.ProxyModelsService=jAe;dc.ProxyModelsService=jAe=Xun([QY(0,odn.ICopilotTokenStore),QY(1,sdn.ICAPIClientService),QY(2,ldn.IFetcherService),QY(3,cdn.ILogService)],jAe)});var mSt=m(ZY=>{"use strict";Object.defineProperty(ZY,"__esModule",{value:!0});ZY.NullRequestLogger=void 0;var udn=yW(),ddn=Fi(),BAe=class extends udn.AbstractRequestLogger{constructor(){super(...arguments),this.onDidChangeRequests=ddn.Event.None}addPromptTrace(){}addEntry(e){}getRequests(){return[]}logModelListCall(e,r,n){}logToolCall(e,r,n){}};ZY.NullRequestLogger=BAe});var JAe=m(di=>{"use strict";var KAe=di&&di.__decorate||function(t,e,r,n){var o=arguments.length,s=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(s=(o<3?a(s):o>3?a(e,r,s):a(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},my=di&&di.__param||function(t,e){return function(r,n){e(r,n,t)}};Object.defineProperty(di,"__esModule",{value:!0});di.SimpleExperimentationService=di.LogLevel=di.ILanguageContextProviderService=di.IIgnoreService=di.IExperimentationService=di.IEndpointProvider=di.ICAPIClientService=di.IAuthenticationService=void 0;di.createNESProvider=tfn;di.createInlineCompletionsProvider=nfn;var gSt=RT(),_St=zet(),vSt=gI(),fdn=rB(),ySt=V0e(),pdn=H0e(),dh=Gl(),ESt=Q0e(),hdn=Lst(),mdn=Wa(),TSt=$pe(),gdn=G1(),SSt=Kpe(),bSt=Zpe(),CSt=mhe(),ASt=e_e(),xSt=J_e(),VAe=yH(),_dn=Oft(),vdn=Mft(),Bk=An(),ydn=tP(),Edn=W0e(),wSt=sV(),ISt=ype(),PSt=iV(),RSt=Fge(),OSt=MV(),$k=OV(),MSt=ib(),NSt=cH(),Tdn=Dft(),Sdn=oH(),LSt=due(),kSt=Xl(),DSt=qN(),USt=QS(),bdn=e0t(),Cdn=aht(),qSt=hgt(),Adn=H_t(),xdn=yvt(),YAe=ha();Object.defineProperty(di,"IAuthenticationService",{enumerable:!0,get:function(){return YAe.IAuthenticationService}});var wdn=UN(),FSt=S_(),Idn=Evt(),Pdn=Pvt(),Rdn=yg(),Odn=uTe(),Mdn=Rvt(),Ndn=dTe(),jSt=pTe(),Hk=Ni(),GSt=Mvt(),Ldn=sSe(),kdn=qvt(),QAe=tl();Object.defineProperty(di,"ICAPIClientService",{enumerable:!0,get:function(){return QAe.ICAPIClientService}});var Ddn=Hv(),zSt=A$();Object.defineProperty(di,"IEndpointProvider",{enumerable:!0,get:function(){return zSt.IEndpointProvider}});var WSt=jvt(),Udn=$vt(),AC=Q0(),qdn=Vvt(),Fdn=qbe(),KSt=Hvt(),Vk=GS();Object.defineProperty(di,"IIgnoreService",{enumerable:!0,get:function(){return Vk.IIgnoreService}});var jdn=nK(),Bdn=FTt(),$Ae=wW(),$dn=jTt(),Vdn=XTt(),Hdn=tSt(),Gdn=cSt(),ZAe=fV();Object.defineProperty(di,"ILanguageContextProviderService",{enumerable:!0,get:function(){return ZAe.ILanguageContextProviderService}});var YSt=lSt(),zdn=IW(),Wdn=uSt(),zR=pa(),QSt=tu(),Kdn=kAe(),Ydn=hSt(),Qdn=mSt(),Zdn=yW(),BSt=gSe(),$St=Eve(),Gk=Vo();Object.defineProperty(di,"IExperimentationService",{enumerable:!0,get:function(){return Gk.IExperimentationService}});var ZSt=qa(),VSt=lR(),Jdn=sae(),HSt=oC(),HAe=ebe(),JSt=Qe(),Xdn=Fi(),eQ=Ar(),efn=ws(),Bt=q8(),XSt=Nr(),xC;(function(t){t[t.Off=0]="Off",t[t.Trace=1]="Trace",t[t.Debug=2]="Debug",t[t.Info=3]="Info",t[t.Warning=4]="Warning",t[t.Error=5]="Error"})(xC||(di.LogLevel=xC={}));function tfn(t){return rfn(t).createInstance(GAe,t)}var GAe=class extends eQ.Disposable{constructor(e,r,n,o,s){super(),this._options=e,this._expService=n,this._configurationService=o,this._workspaceService=s;let a=r.createInstance(xdn.XtabProvider),c=r.createInstance($dn.ObservableGit),l=new Vdn.NesHistoryContextProvider(this._options.workspace,c),u=this._configurationService.getExperimentBasedConfig(Hk.ConfigKey.TeamInternal.InlineEditsXtabDiffNEntries,this._expService),d=new Hdn.NesXtabHistoryTracker(this._options.workspace,u);this._debugRecorder=this._register(new bdn.DebugRecorder(this._options.workspace)),this._nextEditProvider=r.createInstance(Cdn.NextEditProvider,this._options.workspace,a,l,d,this._debugRecorder),this._telemetrySender=this._register(r.createInstance(qSt.TelemetrySender))}getId(){return this._nextEditProvider.ID}handleShown(e){e.telemetryBuilder.setAsShown(),this._nextEditProvider.handleShown(e.internalResult)}handleAcceptance(e){e.telemetryBuilder.setAcceptance("accepted"),e.telemetryBuilder.setStatus("accepted"),this._nextEditProvider.handleAcceptance(e.docId,e.internalResult),this.handleEndOfLifetime(e)}handleRejection(e){e.telemetryBuilder.setAcceptance("rejected"),e.telemetryBuilder.setStatus("rejected"),this._nextEditProvider.handleRejection(e.docId,e.internalResult),this.handleEndOfLifetime(e)}handleIgnored(e,r){r&&e.telemetryBuilder.setSupersededBy(r.requestUuid),this._nextEditProvider.handleIgnored(e.docId,e.internalResult,r?.internalResult),this.handleEndOfLifetime(e)}handleEndOfLifetime(e){try{this._telemetrySender.sendTelemetryForBuilder(e.telemetryBuilder)}finally{e.telemetryBuilder.dispose()}}async getNextEdit(e,r){let n=jdn.DocumentId.create(e.toString()),o={triggerKind:1,selectedCompletionInfo:void 0,requestUuid:(0,efn.generateUuid)(),requestIssuedDateTime:Date.now(),earliestShownDateTime:Date.now()+200,enforceCacheDelay:!0},s=new Bdn.InlineEditRequestLogContext(e.toString(),1,o),a=this._options.workspace.getDocument(n);if(!a)throw new Error("DocumentNotFound");let c=new qSt.NextEditProviderTelemetryBuilder(new KSt.NullGitExtensionService,void 0,this._workspaceService,this._nextEditProvider.ID,a,this._debugRecorder,s.recordingBookmark);c.setOpportunityId(o.requestUuid);try{let l=await this._nextEditProvider.getNextEdit(n,o,s,r,c.nesBuilder);return{result:l.result?.edit?{newText:l.result.edit.newText,range:l.result.edit.replaceRange}:void 0,docId:n,requestUuid:o.requestUuid,internalResult:l,telemetryBuilder:c}}catch(l){try{this._telemetrySender.sendTelemetryForBuilder(c)}finally{c.dispose()}throw l}}updateTreatmentVariables(e){this._expService instanceof wC&&this._expService.updateTreatmentVariables(e)}};GAe=KAe([my(1,XSt.IInstantiationService),my(2,Gk.IExperimentationService),my(3,Hk.IConfigurationService),my(4,HAe.IWorkspaceService)],GAe);function rfn(t){let{fetcher:e,copilotTokenManager:r,telemetrySender:n,logTarget:o}=t,s=new JSt.InstantiationServiceBuilder;return s.define(Hk.IConfigurationService,new Bt.SyncDescriptor(GSt.DefaultsOnlyConfigurationService)),s.define(Gk.IExperimentationService,new Bt.SyncDescriptor(wC,[t.waitForTreatmentVariables])),s.define(BSt.ISimulationTestContext,new Bt.SyncDescriptor(BSt.NulSimulationTestContext)),s.define(HAe.IWorkspaceService,new Bt.SyncDescriptor(HAe.NullWorkspaceService)),s.define(Ldn.IDiffService,new Bt.SyncDescriptor(kdn.DiffServiceImpl,[!1])),s.define(zR.ILogService,new Bt.SyncDescriptor(zR.LogServiceImpl,[[o||new zR.ConsoleLog(void 0,zR.LogLevel.Trace)]])),s.define(Fdn.IGitExtensionService,new Bt.SyncDescriptor(KSt.NullGitExtensionService)),s.define(ZAe.ILanguageContextProviderService,new Bt.SyncDescriptor(YSt.NullLanguageContextProviderService)),s.define(zdn.ILanguageDiagnosticsService,new Bt.SyncDescriptor(Wdn.TestLanguageDiagnosticsService)),s.define(Vk.IIgnoreService,new Bt.SyncDescriptor(Vk.NullIgnoreService)),s.define($St.ISnippyService,new Bt.SyncDescriptor($St.NullSnippyService)),s.define(Ddn.IDomainService,new Bt.SyncDescriptor(Udn.DomainService)),s.define(QAe.ICAPIClientService,new Bt.SyncDescriptor(WSt.CAPIClientImpl)),s.define(FSt.ICopilotTokenStore,new Bt.SyncDescriptor(FSt.CopilotTokenStore)),s.define(AC.IEnvService,new Bt.SyncDescriptor(qdn.NullEnvService)),s.define(QSt.IFetcherService,new Bt.SyncDescriptor(JY,[e])),s.define(ZSt.ITelemetryService,new Bt.SyncDescriptor(XY,[n])),s.define(YAe.IAuthenticationService,new Bt.SyncDescriptor(Idn.StaticGitHubAuthenticationService,[(0,Pdn.createStaticGitHubTokenProvider)()])),s.define(wdn.ICopilotTokenManager,r),s.define(Rdn.IChatMLFetcher,new Bt.SyncDescriptor(Adn.ChatMLFetcherImpl)),s.define(Odn.IChatQuotaService,new Bt.SyncDescriptor(Mdn.ChatQuotaService)),s.define(jSt.IInteractionService,new Bt.SyncDescriptor(jSt.InteractionService)),s.define(Zdn.IRequestLogger,new Bt.SyncDescriptor(Qdn.NullRequestLogger)),s.define(HSt.ITokenizerProvider,new Bt.SyncDescriptor(HSt.TokenizerProvider,[!1])),s.define(Ndn.IConversationOptions,{_serviceBrand:void 0,maxResponseTokens:void 0,temperature:.1,topP:1,rejectionMessage:"Sorry, but I can only assist with programming related questions."}),s.define(Kdn.IProxyModelsService,new Bt.SyncDescriptor(Ydn.ProxyModelsService)),s.define($Ae.IInlineEditsModelService,new Bt.SyncDescriptor(Gdn.InlineEditsModelService)),s.define($Ae.IUndesiredModelsManager,t.undesiredModelsManager||new Bt.SyncDescriptor($Ae.NullUndesiredModelsManager)),s.seal()}var wC=class extends eQ.Disposable{constructor(e,r){if(super(),this._configurationService=r,this.variables={},this._onDidTreatmentsChange=this._register(new Xdn.Emitter),this.onDidTreatmentsChange=this._onDidTreatmentsChange.event,e){let n;this.waitFor=new Promise(o=>{n=o}),this.resolveWaitFor=n}else this.waitFor=Promise.resolve(),this.resolveWaitFor=()=>{}}async hasTreatments(){return this.waitFor}getTreatmentVariable(e){return this.variables[e]}async setCompletionsFilters(e){}updateTreatmentVariables(e){let r=[];for(let[n,o]of Object.entries(e))this.variables[n]!==o&&(this.variables[n]=o,r.push(n));for(let n of Object.keys(this.variables))Object.hasOwn(e,n)||(delete this.variables[n],r.push(n));r.length>0&&(this._onDidTreatmentsChange.fire({affectedTreatmentVariables:r}),this._configurationService.updateExperimentBasedConfiguration(r)),this.resolveWaitFor()}};di.SimpleExperimentationService=wC;di.SimpleExperimentationService=wC=KAe([my(1,Hk.IConfigurationService)],wC);var JY=class{constructor(e){this._fetcher=e}fetchWithPagination(e,r){return this._fetcher.fetchWithPagination(e,r)}getUserAgentLibrary(){return this._fetcher.getUserAgentLibrary()}fetch(e,r){return this._fetcher.fetch(e,r)}disconnectAll(){return this._fetcher.disconnectAll()}makeAbortController(){return this._fetcher.makeAbortController()}isAbortError(e){return this._fetcher.isAbortError(e)}isInternetDisconnectedError(e){return this._fetcher.isInternetDisconnectedError(e)}isFetcherError(e){return this._fetcher.isFetcherError(e)}getUserMessageForFetcherError(e){return this._fetcher.getUserMessageForFetcherError(e)}},XY=class{constructor(e){this._telemetrySender=e}dispose(){}sendInternalMSFTTelemetryEvent(e,r,n){}sendMSFTTelemetryEvent(e,r,n){}sendMSFTTelemetryErrorEvent(e,r,n){}sendGHTelemetryEvent(e,r,n){this._telemetrySender.sendTelemetryEvent(e,(0,VSt.eventPropertiesToSimpleObject)(r),n)}sendGHTelemetryErrorEvent(e,r,n){}sendGHTelemetryException(e,r){}sendTelemetryEvent(e,r,n,o){}sendTelemetryErrorEvent(e,r,n,o){}setSharedProperty(e,r){}setAdditionalExpAssignments(e){}postEvent(e,r){}sendEnhancedGHTelemetryEvent(e,r,n){this._telemetrySender.sendEnhancedTelemetryEvent&&this._telemetrySender.sendEnhancedTelemetryEvent(e,(0,VSt.eventPropertiesToSimpleObject)(r),n)}sendEnhancedGHTelemetryErrorEvent(e,r,n){}};function nfn(t){return ifn(t).createInstance(zAe)}var zAe=class extends eQ.Disposable{constructor(e,r,n){super(),this._insta=e,this._expService=r,this._speculativeRequestCache=n,this._register(e)}updateTreatmentVariables(e){this._expService instanceof wC&&this._expService.updateTreatmentVariables(e)}async getInlineCompletions(e,r,n,o){return await this._insta.invokeFunction(_dn.getInlineCompletions,e,r,n,o)}async inlineCompletionShown(e){return await this._speculativeRequestCache.request(e)}};zAe=KAe([my(0,XSt.IInstantiationService),my(1,Gk.IExperimentationService),my(2,VAe.ICompletionsSpeculativeRequestCache)],zAe);var WAe=class{constructor(e){this.sender=e}sendTelemetryEvent(e,r,n){this.sender.sendTelemetryEvent(this.normalizeEventName(e),r,n)}sendEnhancedTelemetryEvent(e,r,n){this.sender.sendEnhancedTelemetryEvent&&this.sender.sendEnhancedTelemetryEvent(this.normalizeEventName(e),r,n)}normalizeEventName(e){let r=(0,Jdn.unwrapEventNameFromPrefix)(e),n=r.match(/^[^/]+\/(.*)/);return n?n[1]:r}};function ifn(t){let{fetcher:e,authService:r,statusHandler:n,documentManager:o,workspace:s,telemetrySender:a,urlOpener:c,editorSession:l}=t,u=t.logTarget||new zR.ConsoleLog(void 0,zR.LogLevel.Trace),d=new JSt.InstantiationServiceBuilder;return d.define(Bk.ICompletionsLogTargetService,new class{logIt(f,p,...h){u.logIt(this.toExternalLogLevel(f),p,...h)}toExternalLogLevel(f){switch(f){case Bk.LogLevel.DEBUG:return xC.Debug;case Bk.LogLevel.INFO:return xC.Info;case Bk.LogLevel.WARN:return xC.Warning;case Bk.LogLevel.ERROR:return xC.Error;default:return xC.Info}}}),d.define(YAe.IAuthenticationService,r),d.define(Vk.IIgnoreService,t.ignoreService||new Vk.NullIgnoreService),d.define(ZSt.ITelemetryService,new Bt.SyncDescriptor(XY,[new WAe(a)])),d.define(Hk.IConfigurationService,new Bt.SyncDescriptor(GSt.DefaultsOnlyConfigurationService)),d.define(Gk.IExperimentationService,new Bt.SyncDescriptor(wC,[t.waitForTreatmentVariables])),d.define(zSt.IEndpointProvider,t.endpointProvider),d.define(QAe.ICAPIClientService,t.capiClientService||new Bt.SyncDescriptor(WSt.CAPIClientImpl)),d.define(QSt.IFetcherService,new Bt.SyncDescriptor(JY,[e])),d.define(gSt.ICompletionsTelemetryService,new Bt.SyncDescriptor(gSt.CompletionsTelemetryServiceBridge)),d.define(USt.ICompletionsRuntimeModeService,USt.RuntimeMode.fromEnvironment(t.isRunningInTest??!1)),d.define(bSt.ICompletionsCacheService,new bSt.CompletionsCache),d.define(dh.ICompletionsConfigProvider,new dh.InMemoryConfigProvider(new dh.DefaultsOnlyConfigProvider)),d.define(xSt.ICompletionsLastGhostText,new xSt.LastGhostText),d.define(ASt.ICompletionsCurrentGhostText,new ASt.CurrentGhostText),d.define(VAe.ICompletionsSpeculativeRequestCache,new VAe.SpeculativeRequestCache),d.define(Edn.ICompletionsNotificationSender,new class{async showWarningMessage(f,...p){return await t.notificationSender.showWarningMessage(f,...p)}}),d.define(dh.ICompletionsEditorAndPluginInfo,new class{getEditorInfo(){return t.editorInfo}getEditorPluginInfo(){return t.editorPluginInfo}getRelatedPluginInfo(){return t.relatedPluginInfo}}),d.define(_St.ICompletionsExtensionStatus,new _St.CopilotExtensionStatus),d.define(mdn.ICompletionsFeaturesService,new Bt.SyncDescriptor(hdn.Features)),d.define(pdn.ICompletionsObservableWorkspace,new class{get openDocuments(){return s.openDocuments}getWorkspaceRoot(f){return s.getWorkspaceRoot(f)}getFirstOpenDocument(){return s.getFirstOpenDocument()}getDocument(f){return s.getDocument(f)}}),d.define(PSt.ICompletionsStatusReporter,new class extends PSt.StatusReporter{didChange(f){n.didChange(f)}}),d.define(vSt.ICompletionsCopilotTokenManager,new Bt.SyncDescriptor(vSt.CopilotTokenManagerImpl,[!1])),d.define(kSt.ICompletionsTextDocumentManagerService,new Bt.SyncDescriptor(class extends kSt.TextDocumentManager{constructor(){super(...arguments),this.onDidChangeTextDocument=o.onDidChangeTextDocument,this.onDidOpenTextDocument=o.onDidOpenTextDocument,this.onDidCloseTextDocument=o.onDidCloseTextDocument,this.onDidFocusTextDocument=o.onDidFocusTextDocument,this.onDidChangeWorkspaceFolders=o.onDidChangeWorkspaceFolders}getTextDocumentsUnsafe(){return o.getTextDocumentsUnsafe()}findNotebook(f){return o.findNotebook(f)}getWorkspaceFolders(){return o.getWorkspaceFolders()}})),d.define(TSt.ICompletionsFileReaderService,new Bt.SyncDescriptor(TSt.FileReader)),d.define(CSt.ICompletionsBlockModeConfig,new Bt.SyncDescriptor(CSt.ConfigBlockModeConfig)),d.define(LSt.ICompletionsTelemetryUserConfigService,new Bt.SyncDescriptor(LSt.TelemetryUserConfig)),d.define(NSt.ICompletionsRecentEditsProviderService,new Bt.SyncDescriptor(NSt.FullRecentEditsProvider,[void 0])),d.define(ySt.ICompletionsNotifierService,new Bt.SyncDescriptor(ySt.CompletionNotifier)),d.define(wSt.ICompletionsOpenAIFetcherService,new Bt.SyncDescriptor(wSt.LiveOpenAIFetcher)),d.define(ISt.ICompletionsModelManagerService,new Bt.SyncDescriptor(ISt.AvailableModelsManager,[!0])),d.define(SSt.ICompletionsAsyncManagerService,new Bt.SyncDescriptor(SSt.AsyncCompletionManager)),d.define(OSt.ICompletionsContextProviderBridgeService,new Bt.SyncDescriptor(OSt.ContextProviderBridge)),d.define(ESt.ICompletionsUserErrorNotifierService,new Bt.SyncDescriptor(ESt.UserErrorNotifier)),d.define(Sdn.ICompletionsRelatedFilesProviderService,new Bt.SyncDescriptor(Tdn.CompositeRelatedFilesProvider)),d.define(gdn.ICompletionsFileSystemService,new vdn.LocalFileSystem),d.define($k.ICompletionsContextProviderRegistryService,new Bt.SyncDescriptor($k.CachedContextProviderRegistry,[$k.CoreContextProviderRegistry,(f,p,h)=>t.contextProviderMatch(p,h)])),d.define(DSt.ICompletionsPromiseQueueService,new DSt.PromiseQueue),d.define(fdn.ICompletionsCitationManager,new class{register(){return eQ.Disposable.None}async handleIPCodeCitation(f){if(t.citationHandler)return await t.citationHandler.handleIPCodeCitation(f)}}),d.define(MSt.ICompletionsContextProviderService,new MSt.ContextProviderStatistics),d.define(RSt.ICompletionsPromptFactoryService,new Bt.SyncDescriptor(RSt.CompletionsPromptFactory)),d.define(ydn.ICompletionsFetcherService,new class{getImplementation(){return this}fetch(f,p){return e.fetch(f,p)}disconnectAll(){return e.disconnectAll()}}),d.define($k.ICompletionsDefaultContextProviders,new $k.DefaultContextProvidersContainer),d.define(AC.IEnvService,new class{constructor(){this.language=void 0,this.sessionId=l.sessionId,this.machineId=l.machineId,this.devDeviceId=l.machineId,this.vscodeVersion=t.editorInfo.version,this.isActive=!0,this.remoteName=l.remoteName,this.uiKind=l.uiKind==="web"?"web":"desktop",this.OS=process.platform==="darwin"?AC.OperatingSystem.Macintosh:process.platform==="win32"?AC.OperatingSystem.Windows:AC.OperatingSystem.Linux,this.uriScheme="",this.extensionId=t.editorPluginInfo.name,this.appRoot=t.editorInfo.root??"",this.shell=""}isProduction(){return dh.BuildInfo.isProduction()}isPreRelease(){return dh.BuildInfo.isPreRelease()}isSimulation(){return t.isRunningInTest===!0}getBuildType(){return dh.BuildInfo.getBuildType()===dh.BuildType.DEV?"dev":"prod"}getVersion(){return dh.BuildInfo.getVersion()}getBuild(){return dh.BuildInfo.getBuild()}getName(){return t.editorInfo.name}getEditorInfo(){return new AC.NameAndVersion(t.editorInfo.name,t.editorInfo.version)}getEditorPluginInfo(){return new AC.NameAndVersion(t.editorPluginInfo.name,t.editorPluginInfo.version)}async openExternal(f){return await c.open(f.toString()),!0}}),d.define(ZAe.ILanguageContextProviderService,t.languageContextProvider??new YSt.NullLanguageContextProviderService),d.seal()}});var XAe=m(tQ=>{"use strict";Object.defineProperty(tQ,"__esModule",{value:!0});tQ.LanguageId=void 0;var ebt;(function(t){t.PlainText="plaintext";function e(r){return r}t.create=e})(ebt||(tQ.LanguageId=ebt={}))});var rbt=m(gy=>{"use strict";Object.defineProperty(gy,"__esModule",{value:!0});gy.EditReasons=gy.TextModelEditReason=gy.EditReason=void 0;var exe=class t{static create(e){return e?new t(e):t.unknown}constructor(e){this.metadata=e}static{this.unknown=new t({source:"unknown",name:void 0})}toKey(e){return new zk(this.metadata,tbt).toKey(e)}};gy.EditReason=exe;var tbt=Symbol("TextModelEditReason"),zk=class{constructor(e,r){this.metadata=e}toString(){return`${this.metadata.source}`}getType(){let e=this.metadata;switch(e.source){case"cursor":return e.kind;case"inlineCompletionAccept":return e.source+(e.$nes?":nes":"");case"unknown":return e.name||"unknown";default:return e.source}}toKey(e){let r=this.metadata;return Object.entries(r).filter(([o,s])=>(o.match(/\$/g)||[]).length<=e&&s!==void 0&&s!==null&&s!=="").map(([o,s])=>`${o}:${s}`).join("-")}};gy.TextModelEditReason=zk;function xd(t){return new zk(t,tbt)}gy.EditReasons={unknown(t){return xd({source:"unknown",name:t.name})},chatApplyEdits(t){return xd({source:"Chat.applyEdits",$modelId:t.modelId})},inlineCompletionAccept(t){return xd({source:"inlineCompletionAccept",$nes:t.nes,$extensionId:t.extensionId,$$requestUuid:t.requestUuid})},inlineCompletionPartialAccept(t){return xd({source:"inlineCompletionPartialAccept",type:t.type,$extensionId:t.extensionId,$$requestUuid:t.requestUuid})},inlineChatApplyEdit(t){return xd({source:"inlineChat.applyEdits",$modelId:t.modelId})},reloadFromDisk:()=>xd({source:"reloadFromDisk"}),cursor(t){return xd({source:"cursor",kind:t.kind,detailedSource:t.detailedSource})},setValue:()=>xd({source:"setValue"}),eolChange:()=>xd({source:"eolChange"}),applyEdits:()=>xd({source:"applyEdits"}),snippet:()=>xd({source:"snippet"}),suggest:t=>xd({source:"suggest",$extensionId:t.extensionId})}});var rxe=m(fh=>{"use strict";Object.defineProperty(fh,"__esModule",{value:!0});fh.MutableObservableDocument=fh.MutableObservableWorkspace=fh.StringEditWithReason=fh.ObservableWorkspace=void 0;var ofn=qi(),nbt=Ar(),bl=bT(),obt=Wl(),sfn=zi(),afn=up(),cfn=XAe(),ibt=rbt(),rQ=class{constructor(){this._version=0,this.onDidOpenDocumentChange=(0,bl.derivedHandleChanges)({owner:this,changeTracker:{createChangeSummary:()=>({didChange:!1}),handleChange:(e,r)=>(e.didChange(this.openDocuments)||(r.didChange=!0),!0)}},(e,r)=>{let n=this.openDocuments.read(e);for(let o of n)o.value.read(e);return r.didChange&&this._version++,this._version}),this.lastActiveDocument=(0,bl.derivedWithStore)((e,r)=>{let n=(0,bl.observableValue)("lastActiveDocument",void 0);return r.add((0,bl.autorunWithStore)((o,s)=>{let a=this.openDocuments.read(o);for(let c of a)s.add((0,bl.runOnChange)(c.value,()=>{n.set(c,void 0)}))})),n}).flatten()}getFirstOpenDocument(){return this.openDocuments.get()[0]}getDocument(e){return this.openDocuments.get().find(r=>r.id===e)}};fh.ObservableWorkspace=rQ;var WR=class extends obt.StringEdit{constructor(e,r){super(e),this.reason=r}};fh.StringEditWithReason=WR;var txe=class extends rQ{constructor(){super(...arguments),this._openDocuments=(0,bl.observableValue)(this,[]),this.openDocuments=this._openDocuments,this._documents=new Map}addDocument(e,r=void 0){(0,ofn.assert)(!this._documents.has(e.id));let n=new nQ(e.id,new afn.StringText(e.initialValue??""),[],e.languageId??cfn.LanguageId.PlainText,()=>{this._documents.delete(e.id);let o=this._openDocuments.get(),s=o.filter(a=>a.id!==n.id);s.length!==o.length&&this._openDocuments.set(s,r,{added:[],removed:[n]})},e.initialVersionId??0,e.workspaceRoot);return this._documents.set(e.id,n),this._openDocuments.set([...this._openDocuments.get(),n],r,{added:[n],removed:[]}),n}getDocument(e){return this._documents.get(e)}clear(){this._openDocuments.set([],void 0,{added:[],removed:this._openDocuments.get()});for(let e of this._documents.values())e.dispose();this._documents.clear()}getWorkspaceRoot(e){return this._documents.get(e)?.workspaceRoot}};fh.MutableObservableWorkspace=txe;var nQ=class extends nbt.Disposable{get value(){return this._value}get selection(){return this._selection}get visibleRanges(){return this._visibleRanges}get languageId(){return this._languageId}get version(){return this._version}get diagnostics(){return this._diagnostics}constructor(e,r,n,o,s,a,c){super(),this.id=e,this.workspaceRoot=c,this._value=(0,bl.observableValue)(this,r),this._selection=(0,bl.observableValue)(this,n),this._visibleRanges=(0,bl.observableValue)(this,[]),this._languageId=(0,bl.observableValue)(this,o),this._version=(0,bl.observableValue)(this,a),this._diagnostics=(0,bl.observableValue)(this,[]),this._register((0,nbt.toDisposable)(s))}setSelection(e,r=void 0){this._selection.set(e,r)}setVisibleRange(e,r=void 0){this._visibleRanges.set(e,r)}applyEdit(e,r=void 0,n=void 0){let o=e.applyOnText(this.value.get()),s=e instanceof WR?e:new WR(e.replacements,ibt.EditReason.unknown);(0,bl.subtransaction)(r,a=>{this._value.set(o,a,s),this._version.set(n??this._version.get()+1,a)})}updateSelection(e,r=void 0){this._selection.set(e,r)}setValue(e,r=void 0,n=void 0){let o=ibt.EditReason.unknown,s=new WR([obt.StringReplacement.replace(new sfn.OffsetRange(0,this.value.get().value.length),e.value)],o);(0,bl.subtransaction)(r,a=>{this._value.set(e,a,s),this._version.set(n??this._version.get()+1,a)})}updateDiagnostics(e,r=void 0){this._diagnostics.set(e,r)}};fh.MutableObservableDocument=nQ});var Al,ve,bi=q(()=>{"use strict";Al=yt(require("vscode")),ve=class t{static outputChannel;static initialize(e="Copilot ++"){t.outputChannel=Al.window.createOutputChannel(e,{log:!0})}static checkAndPromptLogLevel(){if(!t.outputChannel)return;let e=t.outputChannel.logLevel,r=Al.env.logLevel;t.info("VS Code log level status:"),t.info(`  - Output channel level: ${Al.LogLevel[e]} (${e})`),t.info(`  - Editor environment level: ${Al.LogLevel[r]} (${r})`),e>Al.LogLevel.Debug?(t.warn(`Current VS Code log level is ${Al.LogLevel[e]}, detailed debug information may not be displayed`),t.info('To view detailed debug logs, please execute command: "Developer: Set Log Level" \u2192 select "Debug"'),Al.window.showInformationMessage(`Copilot ++: Current VS Code log level is ${Al.LogLevel[e]}`,"Set Log Level","Ignore").then(n=>{n==="Set Log Level"&&Al.commands.executeCommand("workbench.action.setLogLevel")})):t.info(`VS Code log level is set to ${Al.LogLevel[e]}, detailed debug information can be viewed`)}static trace(e,...r){t.outputChannel&&t.outputChannel.trace(e,...r)}static debug(e,...r){t.outputChannel&&t.outputChannel.debug(e,...r)}static info(e,...r){t.outputChannel&&t.outputChannel.info(e,...r)}static warn(e,...r){t.outputChannel&&t.outputChannel.warn(e,...r)}static error(e,...r){t.outputChannel&&t.outputChannel.error(e,...r)}static dispose(){t.outputChannel&&t.outputChannel.dispose()}}});var Hbt,Vbt=q(()=>{Hbt={displayName:"Antigravity (Google Cloud Code)",baseUrl:"https://api.antigravity.com/v1",apiKeyTemplate:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",models:[{id:"claude-opus-4-5-thinking",name:"Claude Opus 4.5 Thinking",tooltip:"Claude Opus 4.5 v\u1EDBi kh\u1EA3 n\u0103ng suy lu\u1EADn m\u1EDF r\u1ED9ng",sdkMode:"anthropic",maxInputTokens:2e5,maxOutputTokens:64e3,includeThinking:!0,capabilities:{toolCalling:!0,imageInput:!0}},{id:"claude-sonnet-4-5",name:"Claude Sonnet 4.5",tooltip:"Claude Sonnet 4.5 - m\xF4 h\xECnh c\xE2n b\u1EB1ng gi\u1EEFa hi\u1EC7u su\u1EA5t v\xE0 chi ph\xED",sdkMode:"anthropic",maxInputTokens:2e5,maxOutputTokens:8192,capabilities:{toolCalling:!0,imageInput:!0}},{id:"claude-sonnet-4-5-thinking",name:"Claude Sonnet 4.5 Thinking",tooltip:"Claude Sonnet 4.5 v\u1EDBi kh\u1EA3 n\u0103ng suy lu\u1EADn m\u1EDF r\u1ED9ng",sdkMode:"anthropic",maxInputTokens:2e5,maxOutputTokens:64e3,includeThinking:!0,capabilities:{toolCalling:!0,imageInput:!0}},{id:"gemini-3-flash",name:"Gemini 3 Flash",tooltip:"Gemini 3 Flash - m\xF4 h\xECnh nhanh v\xE0 hi\u1EC7u qu\u1EA3",sdkMode:"anthropic",maxInputTokens:1e6,maxOutputTokens:8192,capabilities:{toolCalling:!0,imageInput:!0}},{id:"gemini-3-pro-high",name:"Gemini 3 Pro High",tooltip:"Gemini 3 Pro v\u1EDBi ch\u1EBF \u0111\u1ED9 ch\u1EA5t l\u01B0\u1EE3ng cao",sdkMode:"anthropic",maxInputTokens:2e6,maxOutputTokens:32768,capabilities:{toolCalling:!0,imageInput:!0}},{id:"gemini-3-pro-image",name:"Gemini 3 Pro Image",tooltip:"Gemini 3 Pro t\u1ED1i \u01B0u cho x\u1EED l\xFD h\xECnh \u1EA3nh",sdkMode:"anthropic",maxInputTokens:2e6,maxOutputTokens:8192,capabilities:{toolCalling:!0,imageInput:!0}},{id:"gemini-3-pro-low",name:"Gemini 3 Pro Low",tooltip:"Gemini 3 Pro v\u1EDBi ch\u1EBF \u0111\u1ED9 ti\u1EBFt ki\u1EC7m chi ph\xED",sdkMode:"anthropic",maxInputTokens:2e6,maxOutputTokens:8192,capabilities:{toolCalling:!0,imageInput:!0}},{id:"gpt-oss-120b-medium",name:"GPT OSS 120B Medium",tooltip:"GPT Open Source 120B - m\xF4 h\xECnh m\xE3 ngu\u1ED3n m\u1EDF",sdkMode:"anthropic",maxInputTokens:128e3,maxOutputTokens:8192,capabilities:{toolCalling:!0,imageInput:!1}}]}});var zbt,Gbt=q(()=>{zbt={displayName:"Chutes",baseUrl:"https://llm.chutes.ai/v1",apiKeyTemplate:"sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",models:[{id:"qwen-qwen3-32b",name:"Qwen/Qwen3-32B",tooltip:"Qwen/Qwen3-32B by Chutes",maxInputTokens:1,maxOutputTokens:40960,model:"Qwen/Qwen3-32B",capabilities:{toolCalling:!0,imageInput:!1}},{id:"deepseek-ai-deepseek-v3-0324-tee",name:"deepseek-ai/DeepSeek-V3-0324-TEE",tooltip:"deepseek-ai/DeepSeek-V3-0324-TEE by Chutes",maxInputTokens:98304,maxOutputTokens:65536,model:"deepseek-ai/DeepSeek-V3-0324-TEE",capabilities:{toolCalling:!0,imageInput:!1}},{id:"deepseek-ai-deepseek-v3-2-tee",name:"deepseek-ai/DeepSeek-V3.2-TEE",tooltip:"deepseek-ai/DeepSeek-V3.2-TEE by Chutes",maxInputTokens:98304,maxOutputTokens:65536,model:"deepseek-ai/DeepSeek-V3.2-TEE",capabilities:{toolCalling:!0,imageInput:!1}},{id:"chutesai-mistral-small-3-1-24b-instruct-2503",name:"chutesai/Mistral-Small-3.1-24B-Instruct-2503",tooltip:"chutesai/Mistral-Small-3.1-24B-Instruct-2503 by Chutes",maxInputTokens:1,maxOutputTokens:131072,model:"chutesai/Mistral-Small-3.1-24B-Instruct-2503",capabilities:{toolCalling:!0,imageInput:!0}},{id:"unsloth-mistral-nemo-instruct-2407",name:"unsloth/Mistral-Nemo-Instruct-2407",tooltip:"unsloth/Mistral-Nemo-Instruct-2407 by Chutes",maxInputTokens:1,maxOutputTokens:131072,model:"unsloth/Mistral-Nemo-Instruct-2407",capabilities:{toolCalling:!1,imageInput:!1}},{id:"unsloth-gemma-3-27b-it",name:"unsloth/gemma-3-27b-it",tooltip:"unsloth/gemma-3-27b-it by Chutes",maxInputTokens:62464,maxOutputTokens:65536,model:"unsloth/gemma-3-27b-it",capabilities:{toolCalling:!0,imageInput:!0}},{id:"qwen-qwen3-235b-a22b-instruct-2507-tee",name:"Qwen/Qwen3-235B-A22B-Instruct-2507-TEE",tooltip:"Qwen/Qwen3-235B-A22B-Instruct-2507-TEE by Chutes",maxInputTokens:196608,maxOutputTokens:65536,model:"Qwen/Qwen3-235B-A22B-Instruct-2507-TEE",capabilities:{toolCalling:!0,imageInput:!1}},{id:"tngtech-deepseek-tng-r1t2-chimera",name:"tngtech/DeepSeek-TNG-R1T2-Chimera",tooltip:"tngtech/DeepSeek-TNG-R1T2-Chimera by Chutes",maxInputTokens:1,maxOutputTokens:163840,model:"tngtech/DeepSeek-TNG-R1T2-Chimera",capabilities:{toolCalling:!0,imageInput:!1}},{id:"qwen-qwen3-next-80b-a3b-instruct",name:"Qwen/Qwen3-Next-80B-A3B-Instruct",tooltip:"Qwen/Qwen3-Next-80B-A3B-Instruct by Chutes",maxInputTokens:1,maxOutputTokens:262144,model:"Qwen/Qwen3-Next-80B-A3B-Instruct",capabilities:{toolCalling:!0,imageInput:!1}},{id:"openai-gpt-oss-120b-tee",name:"openai/gpt-oss-120b-TEE",tooltip:"openai/gpt-oss-120b-TEE by Chutes",maxInputTokens:65536,maxOutputTokens:65536,model:"openai/gpt-oss-120b-TEE",capabilities:{toolCalling:!0,imageInput:!1}},{id:"zai-org-glm-4-6-tee",name:"zai-org/GLM-4.6-TEE",tooltip:"zai-org/GLM-4.6-TEE by Chutes",maxInputTokens:137216,maxOutputTokens:65536,model:"zai-org/GLM-4.6-TEE",capabilities:{toolCalling:!0,imageInput:!1}},{id:"zai-org-glm-4-7-tee",name:"zai-org/GLM-4.7-TEE",tooltip:"zai-org/GLM-4.7-TEE by Chutes",maxInputTokens:137217,maxOutputTokens:65535,model:"zai-org/GLM-4.7-TEE",capabilities:{toolCalling:!0,imageInput:!1}},{id:"nousresearch-hermes-4-70b",name:"NousResearch/Hermes-4-70B",tooltip:"NousResearch/Hermes-4-70B by Chutes",maxInputTokens:1,maxOutputTokens:131072,model:"NousResearch/Hermes-4-70B",capabilities:{toolCalling:!0,imageInput:!1}},{id:"deepseek-ai-deepseek-v3-1-tee",name:"deepseek-ai/DeepSeek-V3.1-TEE",tooltip:"deepseek-ai/DeepSeek-V3.1-TEE by Chutes",maxInputTokens:98304,maxOutputTokens:65536,model:"deepseek-ai/DeepSeek-V3.1-TEE",capabilities:{toolCalling:!0,imageInput:!1}},{id:"qwen-qwen3-30b-a3b-instruct-2507",name:"Qwen/Qwen3-30B-A3B-Instruct-2507",tooltip:"Qwen/Qwen3-30B-A3B-Instruct-2507 by Chutes",maxInputTokens:1,maxOutputTokens:262144,model:"Qwen/Qwen3-30B-A3B-Instruct-2507",capabilities:{toolCalling:!0,imageInput:!1}},{id:"deepseek-ai-deepseek-v3",name:"deepseek-ai/DeepSeek-V3",tooltip:"deepseek-ai/DeepSeek-V3 by Chutes",maxInputTokens:1,maxOutputTokens:163840,model:"deepseek-ai/DeepSeek-V3",capabilities:{toolCalling:!1,imageInput:!1}},{id:"nousresearch-hermes-4-3-36b",name:"NousResearch/Hermes-4.3-36B",tooltip:"NousResearch/Hermes-4.3-36B by Chutes",maxInputTokens:508288,maxOutputTokens:16e3,model:"NousResearch/Hermes-4.3-36B",capabilities:{toolCalling:!1,imageInput:!1}},{id:"nousresearch-hermes-4-405b-fp8-tee",name:"NousResearch/Hermes-4-405B-FP8-TEE",tooltip:"NousResearch/Hermes-4-405B-FP8-TEE by Chutes",maxInputTokens:65536,maxOutputTokens:65536,model:"NousResearch/Hermes-4-405B-FP8-TEE",capabilities:{toolCalling:!0,imageInput:!1}},{id:"chutesai-mistral-small-3-2-24b-instruct-2506",name:"chutesai/Mistral-Small-3.2-24B-Instruct-2506",tooltip:"chutesai/Mistral-Small-3.2-24B-Instruct-2506 by Chutes",maxInputTokens:1,maxOutputTokens:131072,model:"chutesai/Mistral-Small-3.2-24B-Instruct-2506",capabilities:{toolCalling:!0,imageInput:!0}},{id:"qwen-qwen3-14b",name:"Qwen/Qwen3-14B",tooltip:"Qwen/Qwen3-14B by Chutes",maxInputTokens:1,maxOutputTokens:40960,model:"Qwen/Qwen3-14B",capabilities:{toolCalling:!0,imageInput:!1}},{id:"moonshotai-kimi-k2-5-tee",name:"moonshotai/Kimi-K2.5-TEE",tooltip:"moonshotai/Kimi-K2.5-TEE by Chutes",maxInputTokens:196609,maxOutputTokens:65535,model:"moonshotai/Kimi-K2.5-TEE",capabilities:{toolCalling:!0,imageInput:!0}},{id:"deepseek-ai-deepseek-v3-1-terminus-tee",name:"deepseek-ai/DeepSeek-V3.1-Terminus-TEE",tooltip:"deepseek-ai/DeepSeek-V3.1-Terminus-TEE by Chutes",maxInputTokens:98304,maxOutputTokens:65536,model:"deepseek-ai/DeepSeek-V3.1-Terminus-TEE",capabilities:{toolCalling:!0,imageInput:!1}},{id:"xiaomimimo-mimo-v2-flash",name:"XiaomiMiMo/MiMo-V2-Flash",tooltip:"XiaomiMiMo/MiMo-V2-Flash by Chutes",maxInputTokens:246144,maxOutputTokens:16e3,model:"XiaomiMiMo/MiMo-V2-Flash",capabilities:{toolCalling:!1,imageInput:!1}},{id:"unsloth-gemma-3-4b-it",name:"unsloth/gemma-3-4b-it",tooltip:"unsloth/gemma-3-4b-it by Chutes",maxInputTokens:1,maxOutputTokens:96e3,model:"unsloth/gemma-3-4b-it",capabilities:{toolCalling:!1,imageInput:!0}},{id:"deepseek-ai-deepseek-r1-0528-tee",name:"deepseek-ai/DeepSeek-R1-0528-TEE",tooltip:"deepseek-ai/DeepSeek-R1-0528-TEE by Chutes",maxInputTokens:98304,maxOutputTokens:65536,model:"deepseek-ai/DeepSeek-R1-0528-TEE",capabilities:{toolCalling:!0,imageInput:!1}},{id:"qwen-qwen3-coder-480b-a35b-instruct-fp8-tee",name:"Qwen/Qwen3-Coder-480B-A35B-Instruct-FP8-TEE",tooltip:"Qwen/Qwen3-Coder-480B-A35B-Instruct-FP8-TEE by Chutes",maxInputTokens:1,maxOutputTokens:262144,model:"Qwen/Qwen3-Coder-480B-A35B-Instruct-FP8-TEE",capabilities:{toolCalling:!0,imageInput:!1}},{id:"opengvlab-internvl3-78b-tee",name:"OpenGVLab/InternVL3-78B-TEE",tooltip:"OpenGVLab/InternVL3-78B-TEE by Chutes",maxInputTokens:1,maxOutputTokens:32768,model:"OpenGVLab/InternVL3-78B-TEE",capabilities:{toolCalling:!1,imageInput:!0}},{id:"unsloth-gemma-3-12b-it",name:"unsloth/gemma-3-12b-it",tooltip:"unsloth/gemma-3-12b-it by Chutes",maxInputTokens:1,maxOutputTokens:131072,model:"unsloth/gemma-3-12b-it",capabilities:{toolCalling:!1,imageInput:!0}},{id:"qwen-qwen2-5-coder-32b-instruct",name:"Qwen/Qwen2.5-Coder-32B-Instruct",tooltip:"Qwen/Qwen2.5-Coder-32B-Instruct by Chutes",maxInputTokens:1,maxOutputTokens:32768,model:"Qwen/Qwen2.5-Coder-32B-Instruct",capabilities:{toolCalling:!1,imageInput:!1}},{id:"qwen-qwen3-235b-a22b-thinking-2507",name:"Qwen/Qwen3-235B-A22B-Thinking-2507",tooltip:"Qwen/Qwen3-235B-A22B-Thinking-2507 by Chutes",maxInputTokens:1,maxOutputTokens:262144,model:"Qwen/Qwen3-235B-A22B-Thinking-2507",capabilities:{toolCalling:!0,imageInput:!1}},{id:"tngtech-deepseek-r1t-chimera",name:"tngtech/DeepSeek-R1T-Chimera",tooltip:"tngtech/DeepSeek-R1T-Chimera by Chutes",maxInputTokens:1,maxOutputTokens:163840,model:"tngtech/DeepSeek-R1T-Chimera",capabilities:{toolCalling:!1,imageInput:!1}},{id:"qwen-qwen3-coder-next",name:"Qwen/Qwen3-Coder-Next",tooltip:"Qwen/Qwen3-Coder-Next by Chutes",maxInputTokens:196608,maxOutputTokens:65536,model:"Qwen/Qwen3-Coder-Next",capabilities:{toolCalling:!0,imageInput:!1}},{id:"qwen-qwen2-5-72b-instruct",name:"Qwen/Qwen2.5-72B-Instruct",tooltip:"Qwen/Qwen2.5-72B-Instruct by Chutes",maxInputTokens:1,maxOutputTokens:32768,model:"Qwen/Qwen2.5-72B-Instruct",capabilities:{toolCalling:!0,imageInput:!1}},{id:"moonshotai-kimi-k2-thinking-tee",name:"moonshotai/Kimi-K2-Thinking-TEE",tooltip:"moonshotai/Kimi-K2-Thinking-TEE by Chutes",maxInputTokens:196609,maxOutputTokens:65535,model:"moonshotai/Kimi-K2-Thinking-TEE",capabilities:{toolCalling:!0,imageInput:!1}},{id:"unsloth-mistral-small-24b-instruct-2501",name:"unsloth/Mistral-Small-24B-Instruct-2501",tooltip:"unsloth/Mistral-Small-24B-Instruct-2501 by Chutes",maxInputTokens:1,maxOutputTokens:32768,model:"unsloth/Mistral-Small-24B-Instruct-2501",capabilities:{toolCalling:!0,imageInput:!0}},{id:"qwen-qwen2-5-vl-72b-instruct-tee",name:"Qwen/Qwen2.5-VL-72B-Instruct-TEE",tooltip:"Qwen/Qwen2.5-VL-72B-Instruct-TEE by Chutes",maxInputTokens:1,maxOutputTokens:32768,model:"Qwen/Qwen2.5-VL-72B-Instruct-TEE",capabilities:{toolCalling:!1,imageInput:!0}},{id:"deepseek-ai-deepseek-r1-distill-llama-70b",name:"deepseek-ai/DeepSeek-R1-Distill-Llama-70B",tooltip:"deepseek-ai/DeepSeek-R1-Distill-Llama-70B by Chutes",maxInputTokens:1,maxOutputTokens:131072,model:"deepseek-ai/DeepSeek-R1-Distill-Llama-70B",capabilities:{toolCalling:!0,imageInput:!1}},{id:"minimaxai-minimax-m2-1-tee",name:"MiniMaxAI/MiniMax-M2.1-TEE",tooltip:"MiniMaxAI/MiniMax-M2.1-TEE by Chutes",maxInputTokens:131072,maxOutputTokens:65536,model:"MiniMaxAI/MiniMax-M2.1-TEE",capabilities:{toolCalling:!0,imageInput:!1}},{id:"zai-org-glm-4-7-fp8",name:"zai-org/GLM-4.7-FP8",tooltip:"zai-org/GLM-4.7-FP8 by Chutes",maxInputTokens:137217,maxOutputTokens:65535,model:"zai-org/GLM-4.7-FP8",capabilities:{toolCalling:!0,imageInput:!1}},{id:"zai-org-glm-4-5-tee",name:"zai-org/GLM-4.5-TEE",tooltip:"zai-org/GLM-4.5-TEE by Chutes",maxInputTokens:65536,maxOutputTokens:65536,model:"zai-org/GLM-4.5-TEE",capabilities:{toolCalling:!0,imageInput:!1}},{id:"qwen-qwen3-vl-235b-a22b-instruct",name:"Qwen/Qwen3-VL-235B-A22B-Instruct",tooltip:"Qwen/Qwen3-VL-235B-A22B-Instruct by Chutes",maxInputTokens:1,maxOutputTokens:262144,model:"Qwen/Qwen3-VL-235B-A22B-Instruct",capabilities:{toolCalling:!0,imageInput:!0}},{id:"nousresearch-deephermes-3-mistral-24b-preview",name:"NousResearch/DeepHermes-3-Mistral-24B-Preview",tooltip:"NousResearch/DeepHermes-3-Mistral-24B-Preview by Chutes",maxInputTokens:1,maxOutputTokens:32768,model:"NousResearch/DeepHermes-3-Mistral-24B-Preview",capabilities:{toolCalling:!0,imageInput:!1}},{id:"mistralai-devstral-2-123b-instruct-2512-tee",name:"mistralai/Devstral-2-123B-Instruct-2512-TEE",tooltip:"mistralai/Devstral-2-123B-Instruct-2512-TEE by Chutes",maxInputTokens:196608,maxOutputTokens:65536,model:"mistralai/Devstral-2-123B-Instruct-2512-TEE",capabilities:{toolCalling:!0,imageInput:!1}},{id:"deepseek-ai-deepseek-r1-tee",name:"deepseek-ai/DeepSeek-R1-TEE",tooltip:"deepseek-ai/DeepSeek-R1-TEE by Chutes",maxInputTokens:1,maxOutputTokens:163840,model:"deepseek-ai/DeepSeek-R1-TEE",capabilities:{toolCalling:!1,imageInput:!1}},{id:"openai-gpt-oss-20b",name:"openai/gpt-oss-20b",tooltip:"openai/gpt-oss-20b by Chutes",maxInputTokens:1,maxOutputTokens:131072,model:"openai/gpt-oss-20b",capabilities:{toolCalling:!0,imageInput:!1}},{id:"zai-org-glm-4-5-air",name:"zai-org/GLM-4.5-Air",tooltip:"zai-org/GLM-4.5-Air by Chutes",maxInputTokens:1,maxOutputTokens:131072,model:"zai-org/GLM-4.5-Air",capabilities:{toolCalling:!0,imageInput:!1}},{id:"qwen-qwen2-5-vl-32b-instruct",name:"Qwen/Qwen2.5-VL-32B-Instruct",tooltip:"Qwen/Qwen2.5-VL-32B-Instruct by Chutes",maxInputTokens:1,maxOutputTokens:16384,model:"Qwen/Qwen2.5-VL-32B-Instruct",capabilities:{toolCalling:!1,imageInput:!0}},{id:"zai-org-glm-4-6v",name:"zai-org/GLM-4.6V",tooltip:"zai-org/GLM-4.6V by Chutes",maxInputTokens:65536,maxOutputTokens:65536,model:"zai-org/GLM-4.6V",capabilities:{toolCalling:!0,imageInput:!0}},{id:"qwen-qwen3-235b-a22b",name:"Qwen/Qwen3-235B-A22B",tooltip:"Qwen/Qwen3-235B-A22B by Chutes",maxInputTokens:1,maxOutputTokens:40960,model:"Qwen/Qwen3-235B-A22B",capabilities:{toolCalling:!0,imageInput:!1}},{id:"zai-org-glm-4-6-fp8",name:"zai-org/GLM-4.6-FP8",tooltip:"zai-org/GLM-4.6-FP8 by Chutes",maxInputTokens:137217,maxOutputTokens:65535,model:"zai-org/GLM-4.6-FP8",capabilities:{toolCalling:!0,imageInput:!1}},{id:"zai-org-glm-4-7-flash",name:"zai-org/GLM-4.7-Flash",tooltip:"zai-org/GLM-4.7-Flash by Chutes",maxInputTokens:137217,maxOutputTokens:65535,model:"zai-org/GLM-4.7-Flash",capabilities:{toolCalling:!0,imageInput:!1}},{id:"qwen-qwen3-30b-a3b",name:"Qwen/Qwen3-30B-A3B",tooltip:"Qwen/Qwen3-30B-A3B by Chutes",maxInputTokens:1,maxOutputTokens:40960,model:"Qwen/Qwen3-30B-A3B",capabilities:{toolCalling:!0,imageInput:!1}},{id:"tngtech-tng-r1t-chimera-tee",name:"tngtech/TNG-R1T-Chimera-TEE",tooltip:"tngtech/TNG-R1T-Chimera-TEE by Chutes",maxInputTokens:98304,maxOutputTokens:65536,model:"tngtech/TNG-R1T-Chimera-TEE",capabilities:{toolCalling:!0,imageInput:!1}},{id:"deepseek-ai-deepseek-v3-2-speciale-tee",name:"deepseek-ai/DeepSeek-V3.2-Speciale-TEE",tooltip:"deepseek-ai/DeepSeek-V3.2-Speciale-TEE by Chutes",maxInputTokens:98304,maxOutputTokens:65536,model:"deepseek-ai/DeepSeek-V3.2-Speciale-TEE",capabilities:{toolCalling:!1,imageInput:!1}},{id:"nvidia-nvidia-nemotron-3-nano-30b-a3b-bf16",name:"nvidia/NVIDIA-Nemotron-3-Nano-30B-A3B-BF16",tooltip:"nvidia/NVIDIA-Nemotron-3-Nano-30B-A3B-BF16 by Chutes",maxInputTokens:1,maxOutputTokens:262144,model:"nvidia/NVIDIA-Nemotron-3-Nano-30B-A3B-BF16",capabilities:{toolCalling:!0,imageInput:!1}},{id:"zai-org-glm-4-5-fp8",name:"zai-org/GLM-4.5-FP8",tooltip:"zai-org/GLM-4.5-FP8 by Chutes",maxInputTokens:65536,maxOutputTokens:65536,model:"zai-org/GLM-4.5-FP8",capabilities:{toolCalling:!0,imageInput:!1}},{id:"tngtech-r1t2-chimera-speed",name:"tngtech/R1T2-Chimera-Speed",tooltip:"tngtech/R1T2-Chimera-Speed by Chutes",maxInputTokens:65536,maxOutputTokens:65536,model:"tngtech/R1T2-Chimera-Speed",capabilities:{toolCalling:!0,imageInput:!1}},{id:"miromind-ai-mirothinker-v1-5-235b",name:"miromind-ai/MiroThinker-v1.5-235B",tooltip:"miromind-ai/MiroThinker-v1.5-235B by Chutes",maxInputTokens:246144,maxOutputTokens:16e3,model:"miromind-ai/MiroThinker-v1.5-235B",capabilities:{toolCalling:!1,imageInput:!1}},{id:"nousresearch-hermes-4-14b",name:"NousResearch/Hermes-4-14B",tooltip:"NousResearch/Hermes-4-14B by Chutes",maxInputTokens:1,maxOutputTokens:40960,model:"NousResearch/Hermes-4-14B",capabilities:{toolCalling:!0,imageInput:!1}},{id:"qwen-qwen3guard-gen-0-6b",name:"Qwen/Qwen3Guard-Gen-0.6B",tooltip:"Qwen/Qwen3Guard-Gen-0.6B by Chutes",maxInputTokens:16768,maxOutputTokens:16e3,model:"Qwen/Qwen3Guard-Gen-0.6B",capabilities:{toolCalling:!1,imageInput:!1}},{id:"unsloth-llama-3-2-1b-instruct",name:"unsloth/Llama-3.2-1B-Instruct",tooltip:"unsloth/Llama-3.2-1B-Instruct by Chutes",maxInputTokens:384,maxOutputTokens:16e3,model:"unsloth/Llama-3.2-1B-Instruct",capabilities:{toolCalling:!1,imageInput:!1}},{id:"rednote-hilab-dots-ocr",name:"rednote-hilab/dots.ocr",tooltip:"rednote-hilab/dots.ocr by Chutes",maxInputTokens:1,maxOutputTokens:131072,model:"rednote-hilab/dots.ocr",capabilities:{toolCalling:!1,imageInput:!0}},{id:"tngtech-tng-r1t-chimera-turbo",name:"tngtech/TNG-R1T-Chimera-Turbo",tooltip:"tngtech/TNG-R1T-Chimera-Turbo by Chutes",maxInputTokens:98304,maxOutputTokens:65536,model:"tngtech/TNG-R1T-Chimera-Turbo",capabilities:{toolCalling:!0,imageInput:!1}},{id:"unsloth-llama-3-2-3b-instruct",name:"unsloth/Llama-3.2-3B-Instruct",tooltip:"unsloth/Llama-3.2-3B-Instruct by Chutes",maxInputTokens:384,maxOutputTokens:16e3,model:"unsloth/Llama-3.2-3B-Instruct",capabilities:{toolCalling:!1,imageInput:!1}},{id:"moonshotai-kimi-k2-instruct-0905",name:"moonshotai/Kimi-K2-Instruct-0905",tooltip:"moonshotai/Kimi-K2-Instruct-0905 by Chutes",maxInputTokens:1,maxOutputTokens:262144,model:"moonshotai/Kimi-K2-Instruct-0905",capabilities:{toolCalling:!0,imageInput:!1}}]}});var Kbt,Wbt=q(()=>{Kbt={displayName:"Codex",baseUrl:"https://chatgpt.com/backend-api/codex",apiKeyTemplate:"",models:[{id:"gpt-5.2-codex-low",name:"GPT-5.2 Codex (Low Reasoning)",model:"gpt-5.2-codex",tooltip:"GPT-5.2 Codex with low reasoning effort - faster responses",maxInputTokens:4e5,maxOutputTokens:128e3,capabilities:{toolCalling:!0,imageInput:!0}},{id:"gpt-5.2-codex-medium",name:"GPT-5.2 Codex (Medium Reasoning)",model:"gpt-5.2-codex",tooltip:"GPT-5.2 Codex with medium reasoning effort - balanced",maxInputTokens:4e5,maxOutputTokens:128e3,capabilities:{toolCalling:!0,imageInput:!0}},{id:"gpt-5.2-codex-high",name:"GPT-5.2 Codex (High Reasoning)",model:"gpt-5.2-codex",tooltip:"GPT-5.2 Codex with high reasoning effort - most thorough",maxInputTokens:4e5,maxOutputTokens:128e3,capabilities:{toolCalling:!0,imageInput:!0}},{id:"gpt-5.2",name:"GPT-5.2",model:"gpt-5.2",tooltip:"GPT-5.2 - OpenAI's latest model",maxInputTokens:4e5,maxOutputTokens:128e3,capabilities:{toolCalling:!0,imageInput:!0}},{id:"gpt-5.2-low",name:"GPT-5.2 (Low Reasoning)",model:"gpt-5.2",tooltip:"GPT-5.2 with low reasoning effort",maxInputTokens:4e5,maxOutputTokens:128e3,capabilities:{toolCalling:!0,imageInput:!0}},{id:"gpt-5.2-medium",name:"GPT-5.2 (Medium Reasoning)",model:"gpt-5.2",tooltip:"GPT-5.2 with medium reasoning effort",maxInputTokens:4e5,maxOutputTokens:128e3,capabilities:{toolCalling:!0,imageInput:!0}},{id:"gpt-5.2-high",name:"GPT-5.2 (High Reasoning)",model:"gpt-5.2",tooltip:"GPT-5.2 with high reasoning effort",maxInputTokens:4e5,maxOutputTokens:128e3,capabilities:{toolCalling:!0,imageInput:!0}},{id:"gpt-5.1-codex-mini",name:"GPT-5.1 Codex Mini",model:"gpt-5.1-codex-mini",tooltip:"GPT-5.1 Codex Mini - OpenAI's optimized model",maxInputTokens:128e3,maxOutputTokens:8192,capabilities:{toolCalling:!0,imageInput:!0}}]}});var Qbt,Ybt=q(()=>{Qbt={displayName:"DeepInfra",baseUrl:"https://api.deepinfra.com/v1/openai",apiKeyTemplate:"di-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",models:[{id:"meta-llama/Meta-Llama-3.1-70B-Instruct",name:"Meta Llama 3.1 70B Instruct",tooltip:"Meta Llama 3.1 70B - Instruct by DeepInfra",maxInputTokens:2e5,maxOutputTokens:8192,capabilities:{toolCalling:!0,imageInput:!1}},{id:"Qwen/Qwen2-7B-Instruct",name:"Qwen 2 7B Instruct",tooltip:"Qwen2 7B - Instruct by DeepInfra",maxInputTokens:128e3,maxOutputTokens:8192,capabilities:{toolCalling:!0,imageInput:!1}}]}});var Jbt,Zbt=q(()=>{Jbt={displayName:"DeepSeek",baseUrl:"https://api.deepseek.com/v1",apiKeyTemplate:"sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",models:[{id:"deepseek-chat",name:"DeepSeek-V3.2",tooltip:"DeepSeek V3.2 official model. DeepSeek-V3.2 aims to balance reasoning capability with output length, suitable for daily use such as Q&A and general Agent tasks. In public reasoning benchmarks, DeepSeek-V3.2 reached GPT-5 levels, slightly below Gemini-3.0-Pro; compared to Kimi-K2-Thinking, V3.2's output length is significantly reduced, notably decreasing computational overhead and user wait time.",sdkMode:"anthropic",baseUrl:"https://api.deepseek.com/anthropic",maxInputTokens:128e3,maxOutputTokens:8192,capabilities:{toolCalling:!0,imageInput:!1}},{id:"deepseek-reasoner",name:"DeepSeek-V3.2 (Reasoner)",tooltip:"DeepSeek V3.2 reasoning mode. DeepSeek-V3.2 aims to balance reasoning capability with output length, suitable for daily use such as Q&A and general Agent tasks. In public reasoning benchmarks, DeepSeek-V3.2 reached GPT-5 levels, slightly below Gemini-3.0-Pro; compared to Kimi-K2-Thinking, V3.2's output length is significantly reduced, notably decreasing computational overhead and user wait time.",sdkMode:"anthropic",baseUrl:"https://api.deepseek.com/anthropic",maxInputTokens:128e3,maxOutputTokens:64e3,includeThinking:!0,capabilities:{toolCalling:!0,imageInput:!1}}]}});var eCt,Xbt=q(()=>{eCt={displayName:"Gemini CLI",baseUrl:"https://cloudcode-pa.googleapis.com/v1internal",apiKeyTemplate:"OAuth via Gemini CLI",models:[{id:"gemini-2.5-pro",name:"Gemini 2.5 Pro",tooltip:"Gemini 2.5 Pro via CLI",maxInputTokens:1e6,maxOutputTokens:65536,sdkMode:"openai",capabilities:{toolCalling:!0,imageInput:!0}},{id:"gemini-2.5-flash",name:"Gemini 2.5 Flash",tooltip:"Gemini 2.5 Flash via CLI",maxInputTokens:1e6,maxOutputTokens:65536,sdkMode:"openai",capabilities:{toolCalling:!0,imageInput:!0}},{id:"gemini-2.5-flash-lite",name:"Gemini 2.5 Flash Lite",tooltip:"Gemini 2.5 Flash Lite via CLI",maxInputTokens:1e6,maxOutputTokens:65536,sdkMode:"openai",capabilities:{toolCalling:!0,imageInput:!0}},{id:"gemini-3-pro-preview",name:"Gemini 3 Pro Preview",tooltip:"Gemini 3 Pro Preview via CLI",maxInputTokens:1e6,maxOutputTokens:65536,sdkMode:"openai",capabilities:{toolCalling:!0,imageInput:!0}},{id:"gemini-3-flash-preview",name:"Gemini 3 Flash Preview",tooltip:"Gemini 3 Flash Preview via CLI",maxInputTokens:1e6,maxOutputTokens:65536,sdkMode:"openai",capabilities:{toolCalling:!0,imageInput:!0}}]}});var rCt,tCt=q(()=>{rCt={displayName:"Hugging Face",baseUrl:"https://router.huggingface.co/v1",apiKeyTemplate:"hf_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",models:[]}});var iCt,nCt=q(()=>{iCt={displayName:"Lightning AI",baseUrl:"https://lightning.ai/api/v1",apiKeyTemplate:"sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",models:[{id:"openai/o3",name:"o3",tooltip:"o3 is a versatile, high-performing model across many domains. It raises the bar in math, science, coding, and visual reasoning, and it\u2019s excellent at technical writing and following instructions. Use it to tackle multi-step problems that combine text, code, and images.",maxInputTokens:184e3,maxOutputTokens:16e3,model:"openai/o3",capabilities:{toolCalling:!0,imageInput:!0}},{id:"openai/gpt-4o",name:"GPT 4o",tooltip:"GPT-4o is OpenAI\u2019s multimodal model, handling both text and image inputs with text outputs. It matches the intelligence of GPT-4 Turbo but runs twice as fast at half the cost. The model also brings stronger non-English language support and improved visual understanding.",maxInputTokens:112e3,maxOutputTokens:16e3,model:"openai/gpt-4o",capabilities:{toolCalling:!0,imageInput:!0}},{id:"openai/gpt-4",name:"GPT 4",tooltip:"The default GPT-4 model with an 8,192-token context window.",maxInputTokens:1,maxOutputTokens:16e3,model:"openai/gpt-4",capabilities:{toolCalling:!0,imageInput:!1}},{id:"google/gemini-2.5-flash-lite-preview-06-17",name:"Gemini 2.5 Flash Lite",tooltip:`Gemini 2.5 Flash-Lite is a model developed by Google DeepMind, designed to handle various tasks including reasoning, science, mathematics, code generation, and more. It features advanced capabilities in multilingual performance and long context understanding. It is optimized for low latency use cases, supporting multimodal input with a 1 million-token context length.

`,maxInputTokens:1032576,maxOutputTokens:16e3,model:"google/gemini-2.5-flash-lite-preview-06-17",capabilities:{toolCalling:!0,imageInput:!0}},{id:"lightning-ai/llama-3.3-70b",name:"llama-3.3-70b",tooltip:"Llama 3.3 is a text-only 70B instruction-tuned model that provides enhanced performance relative to Llama 3.1 70B\u2013and relative to Llama 3.2 90B when used for text-only applications. Moreover, for some applications, Llama 3.3 70B approaches the performance of Llama 3.1 405B.",maxInputTokens:112e3,maxOutputTokens:16e3,model:"lightning-ai/llama-3.3-70b",capabilities:{toolCalling:!0,imageInput:!1}},{id:"lightning-ai/DeepSeek-V3.1",name:"DeepSeek-V3.1",tooltip:"DeepSeek-V3.1 is a hybrid model that supports both thinking mode and non-thinking mode, switching between them with a simple chat template. It brings smarter tool calling, with much better performance in tool usage and agent tasks thanks to post-training optimization. The model also delivers higher thinking efficiency, reaching answer quality similar to DeepSeek-R1-0528 but with faster responses.",maxInputTokens:147840,maxOutputTokens:16e3,model:"lightning-ai/DeepSeek-V3.1",capabilities:{toolCalling:!0,imageInput:!1}},{id:"anthropic/claude-haiku-4-5-20251001",name:"Claude Haiku 4.5",tooltip:"Claude Haiku 4.5 delivers near-frontier performance with exceptional speed and cost-efficiency. It excels at real-time tasks like chat assistants, coding, and multi-agent workflows. Use it alone or alongside Sonnet 4.5 for fast, scalable execution.",maxInputTokens:136e3,maxOutputTokens:64e3,model:"anthropic/claude-haiku-4-5-20251001",capabilities:{toolCalling:!0,imageInput:!0}},{id:"anthropic/claude-sonnet-4-5-20250929",name:"Claude Sonnet 4.5",tooltip:"Claude Sonnet 4.5 is a frontier AI model that excels at coding, creating complex agents, and using computers for real-world tasks. It also features significant improvements in reasoning, math, and alignment, making it the most powerful model in its series.",maxInputTokens:184e3,maxOutputTokens:16e3,model:"anthropic/claude-sonnet-4-5-20250929",capabilities:{toolCalling:!0,imageInput:!0}},{id:"anthropic/claude-opus-4-5-20251101",name:"Claude Opus 4.5",tooltip:"Anthropic's Premium model combining maximum intelligence with practical performance",maxInputTokens:184e3,maxOutputTokens:16e3,model:"anthropic/claude-opus-4-5-20251101",capabilities:{toolCalling:!0,imageInput:!0}},{id:"openai/o3-mini",name:"o3 mini",tooltip:"OpenAI o3-mini is a lightweight, cost-efficient model built for STEM reasoning tasks like math, science, and coding. It lets you adjust its reasoning effort to balance speed and depth.The model delivers strong accuracy, matching the larger o1 on tough benchmarks while running faster and cheaper.",maxInputTokens:184e3,maxOutputTokens:16e3,model:"openai/o3-mini",capabilities:{toolCalling:!0,imageInput:!1}},{id:"anthropic/claude-sonnet-4-20250514",name:"Claude Sonnet 4",tooltip:`Claude Sonnet 4 improves on Sonnet 3.7 with stronger coding and reasoning skills, better precision, and greater reliability. It scores 72.7% on SWE-bench while staying efficient, making it ideal for both everyday coding and complex software projects.
`,maxInputTokens:184e3,maxOutputTokens:16e3,model:"anthropic/claude-sonnet-4-20250514",capabilities:{toolCalling:!0,imageInput:!0}},{id:"lightning-ai/gpt-oss-120b",name:"gpt-oss-120b",tooltip:"gpt-oss-120B is a 117 billion parameter language model, using a mixture-of-experts approach but activating only 5.1 billion per token for efficiency. It supports long contexts of up to 128k tokens, enabling it to handle extended conversations or documents smoothly. The model performs nearly at the level of o4-mini on reasoning tasks and surpasses many other open models in quality.",maxInputTokens:1,maxOutputTokens:131072,model:"lightning-ai/gpt-oss-120b",capabilities:{toolCalling:!0,imageInput:!1}},{id:"lightning-ai/gpt-oss-20b",name:"gpt-oss-20b",tooltip:"gpt-oss-20B is a 21-billion parameter language model built with a mixture-of-experts design that activates only about 3.6 billion parameters per token. This efficiency allows it to run on devices with as little as 16 GB of memory, making it well-suited for local setups or edge devices.",maxInputTokens:112e3,maxOutputTokens:16e3,model:"lightning-ai/gpt-oss-20b",capabilities:{toolCalling:!0,imageInput:!1}},{id:"anthropic/claude-opus-4-1-20250805",name:"Claude Opus 4.1",tooltip:"Claude Opus 4.1 is an enhanced version of Anthropic\u2019s flagship model, with stronger coding, reasoning, and agentic capabilities. It scores 74.5% on SWE-bench Verified and improves at multi-file refactoring, debugging, and detailed reasoning. With support for extended thinking up to 64K tokens, it\u2019s well-suited for research, data analysis, and tool-assisted problem solving.",maxInputTokens:168e3,maxOutputTokens:32e3,model:"anthropic/claude-opus-4-1-20250805",capabilities:{toolCalling:!0,imageInput:!0}},{id:"openai/gpt-5",name:"GPT 5",tooltip:`GPT-5 is OpenAI model that is built for complex, step-by-step tasks that demand precise instruction following and high-stakes accuracy. It supports test-time routing plus prompts like \u201Cthink hard about this.\u201D It also reduces hallucinations and sycophancy while improving performance in coding, writing, and health-related tasks.
`,maxInputTokens:384e3,maxOutputTokens:16e3,model:"openai/gpt-5",capabilities:{toolCalling:!0,imageInput:!1}},{id:"openai/gpt-5-mini",name:"GPT 5 mini",tooltip:"GPT-5 Mini is a smaller, more efficient variant of GPT-5 built for lighter reasoning tasks. It maintains the strong instruction-following and safety features of GPT-5 while offering faster responses and lower costs.",maxInputTokens:384e3,maxOutputTokens:16e3,model:"openai/gpt-5-mini",capabilities:{toolCalling:!0,imageInput:!1}},{id:"openai/gpt-5-nano",name:"GPT 5 nano",tooltip:"GPT-5-Nano is the smallest and fastest variant in the GPT-5 system, built as a unified system that can decide when to respond quickly or dig deeper depending on what you ask it. It gets much better across a wide range of skills \u2014 writing, coding, math, health, and visual tasks \u2014 and is more reliable and accurate in real-world scenarios. Compared to earlier models, it hallucinates less, follows instructions more faithfully, and understands the context better.",maxInputTokens:384e3,maxOutputTokens:16e3,model:"openai/gpt-5-nano",capabilities:{toolCalling:!0,imageInput:!1}},{id:"google/gemini-2.5-pro",name:"Gemini 2.5 Pro",tooltip:"Gemini 2.5 Pro is Google\u2019s AI model built for advanced reasoning, coding, math, and scientific work. With integrated \u201Cthinking\u201D capabilities, it delivers more accurate answers and handles context with greater nuance. It ranks at the top of multiple benchmarks, including first place on the LMArena leaderboard, showcasing strong human-preference alignment and exceptional problem-solving skills.",maxInputTokens:1032576,maxOutputTokens:16e3,model:"google/gemini-2.5-pro",capabilities:{toolCalling:!0,imageInput:!0}},{id:"google/gemini-2.5-flash",name:"Gemini 2.5 Flash",tooltip:"Gemini 2.5 Flash is Google\u2019s powerful model built for complex reasoning, coding, math, and scientific challenges. With integrated \u201Cthinking\u201D capabilities, it delivers more accurate answers and handles context with greater nuance.",maxInputTokens:1032576,maxOutputTokens:16e3,model:"google/gemini-2.5-flash",capabilities:{toolCalling:!0,imageInput:!0}},{id:"openai/gpt-5.2-2025-12-11",name:"GPT 5.2",tooltip:"GPT-5.2 is OpenAI's  flagship model for coding and agentic tasks across industries. ",maxInputTokens:384e3,maxOutputTokens:16e3,model:"openai/gpt-5.2-2025-12-11",capabilities:{toolCalling:!0,imageInput:!0}},{id:"openai/gpt-4.1",name:"GPT 4.1",tooltip:"OpenAI\u2019s fast and capable model for reasoning, coding, and chat. It responds quickly, supports long context (128k tokens), and runs efficiently at scale\u2014ideal for advanced API applications.",maxInputTokens:1031576,maxOutputTokens:16e3,model:"openai/gpt-4.1",capabilities:{toolCalling:!0,imageInput:!0}},{id:"openai/gpt-4-turbo-preview",name:"Lightning SDK expert",tooltip:"openai/gpt-4-turbo-preview by Lightning AI",maxInputTokens:112e3,maxOutputTokens:16e3,model:"openai/gpt-4-turbo-preview",capabilities:{toolCalling:!0,imageInput:!1}},{id:"openai/gpt-4-turbo-preview",name:"LitLogger helper",tooltip:"openai/gpt-4-turbo-preview by Lightning AI",maxInputTokens:112e3,maxOutputTokens:16e3,model:"openai/gpt-4-turbo-preview",capabilities:{toolCalling:!0,imageInput:!1}},{id:"anthropic/claude-opus-4-6",name:"Claude Opus 4.6",tooltip:"Claude Opus 4.6 is Anthropic\u2019s most intelligent model for building agents and coding",maxInputTokens:184e3,maxOutputTokens:16e3,model:"anthropic/claude-opus-4-6",capabilities:{toolCalling:!0,imageInput:!0}},{id:"lightning-ai/kimi-k2.5",name:"kimi-k2.5",tooltip:"Kimi K2.5 is an open-source, native multimodal agentic model built through continual pretraining on approximately 15 trillion mixed visual and text tokens atop Kimi-K2-Base. It seamlessly integrates vision and language understanding with advanced agentic capabilities, instant and thinking modes, as well as conversational and agentic paradigms.",maxInputTokens:24e4,maxOutputTokens:16e3,model:"lightning-ai/kimi-k2.5",capabilities:{toolCalling:!0,imageInput:!1}},{id:"google/gemini-3-flash-preview",name:"Gemini 3 Flash",tooltip:"Gemini 3 Flash Preview is designed to deliver strong agentic capabilities (near-Pro level) at substantial speed and value.",maxInputTokens:1032576,maxOutputTokens:16e3,model:"google/gemini-3-flash-preview",capabilities:{toolCalling:!0,imageInput:!0}},{id:"openai/gpt-4-turbo",name:"GPT 4 turbo",tooltip:"GPT-4 Turbo is an upgraded version of GPT-4, designed to deliver the same high intelligence while being faster and more cost-effective.",maxInputTokens:112e3,maxOutputTokens:16e3,model:"openai/gpt-4-turbo",capabilities:{toolCalling:!0,imageInput:!1}},{id:"google/gemini-3-pro-preview",name:"Gemini 3 Pro Preview",tooltip:"The best model in the world for multimodal understanding, and our most powerful agentic and vibe-coding model yet",maxInputTokens:1032576,maxOutputTokens:16e3,model:"google/gemini-3-pro-preview",capabilities:{toolCalling:!0,imageInput:!0}},{id:"anthropic/claude-opus-4-20250514",name:"Claude Opus 4",tooltip:"Claude Opus 4 is Anthropic\u2019s coding model, built for complex, long-running tasks and agent workflows. It leads in software engineering benchmarks with 72.5% on SWE-bench and 43.2% on Terminal-bench. The model is designed for extended use, sustaining thousands of task steps over hours without performance drop.",maxInputTokens:184e3,maxOutputTokens:16e3,model:"anthropic/claude-opus-4-20250514",capabilities:{toolCalling:!0,imageInput:!0}},{id:"openai/gpt-3.5-turbo",name:"GPT 3.5 turbo",tooltip:"GPT-3.5 Turbo is OpenAI's fastest model. It can understand and generate natural language or code, and is optimized for chat and traditional completion tasks.",maxInputTokens:385,maxOutputTokens:16e3,model:"openai/gpt-3.5-turbo",capabilities:{toolCalling:!0,imageInput:!1}}]}});var sCt,oCt=q(()=>{sCt={displayName:"MiniMax",baseUrl:"https://api.minimaxi.com/v1",apiKeyTemplate:"This ApiKey is a long string with a JWT-like structure",models:[{id:"MiniMax-M2.1-Coding-Plan",name:"MiniMax-M2.1 (Coding Plan)",model:"MiniMax-M2.1",sdkMode:"anthropic",baseUrl:"https://api.minimaxi.com/anthropic",tooltip:"MiniMax-M2.1 - Strong multi-language programming capabilities, fully upgraded programming experience",provider:"minimax-coding",maxInputTokens:204800,maxOutputTokens:64e3,includeThinking:!0,capabilities:{toolCalling:!0,imageInput:!1}},{id:"MiniMax-M2-Coding-Plan",name:"MiniMax-M2 (Coding Plan)",model:"MiniMax-M2",sdkMode:"anthropic",baseUrl:"https://api.minimaxi.com/anthropic",tooltip:"MiniMax-M2 - Born for efficient coding and Agent workflows",provider:"minimax-coding",maxInputTokens:204800,maxOutputTokens:64e3,includeThinking:!0,capabilities:{toolCalling:!0,imageInput:!1}},{id:"MiniMax-M2.1",name:"MiniMax-M2.1 (Pay-per-use)",sdkMode:"anthropic",baseUrl:"https://api.minimaxi.com/anthropic",tooltip:"MiniMax-M2.1 - Strong multi-language programming capabilities, fully upgraded programming experience",maxInputTokens:204800,maxOutputTokens:128e3,includeThinking:!0,capabilities:{toolCalling:!0,imageInput:!1}},{id:"MiniMax-M2.1-Lightning",name:"MiniMax-M2.1-Lightning (2x Speed Rate)",sdkMode:"anthropic",baseUrl:"https://api.minimaxi.com/anthropic",tooltip:"MiniMax-M2.1 - Faster, more efficient - Strong multi-language programming capabilities, fully upgraded programming experience",maxInputTokens:204800,maxOutputTokens:128e3,includeThinking:!0,capabilities:{toolCalling:!0,imageInput:!1}},{id:"MiniMax-M2",name:"MiniMax-M2 (Pay-per-use)",sdkMode:"anthropic",baseUrl:"https://api.minimaxi.com/anthropic",tooltip:"MiniMax-M2 - Born for efficient coding and Agent workflows",maxInputTokens:204800,maxOutputTokens:64e3,includeThinking:!0,capabilities:{toolCalling:!0,imageInput:!1}}]}});var cCt,aCt=q(()=>{cCt={displayName:"Mistral AI",baseUrl:"https://api.mistral.ai/v1",apiKeyTemplate:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",models:[{id:"devstral-small-latest",name:"Devstral Small 2",tooltip:"Devstral Small 2 - Latest version",maxInputTokens:256e3,maxOutputTokens:65536,capabilities:{toolCalling:!0,imageInput:!0}},{id:"devstral-latest",name:"Devstral 2",tooltip:"Devstral 2 - Latest version",maxInputTokens:256e3,maxOutputTokens:65536,capabilities:{toolCalling:!0,imageInput:!1}}]}});var uCt,lCt=q(()=>{uCt={displayName:"MoonshotAI",baseUrl:"https://api.moonshot.cn/v1",apiKeyTemplate:"sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",models:[{id:"kimi-for-coding",name:"Kimi For Coding",sdkMode:"anthropic",baseUrl:"https://api.kimi.com/coding",provider:"kimi",tooltip:"Kimi For Coding - Professional programming model by Moonshot AI, providing strong code generation and understanding capabilities",maxInputTokens:256e3,maxOutputTokens:32e3,capabilities:{toolCalling:!0,imageInput:!1},customHeader:{"HTTP-Referer":"https://github.com/RooVetGit/Roo-Cline","X-Title":"Roo Code","User-Agent":"RooCode/3.36.16"}},{id:"kimi-k2-thinking",name:"Kimi-K2-Thinking",tooltip:"Moonshot AI Kimi-K2-Thinking - Model context length 256k, a thinking model with general Agentic and reasoning capabilities, excels at deep reasoning",maxInputTokens:256e3,maxOutputTokens:16e3,includeThinking:!0,capabilities:{toolCalling:!0,imageInput:!1},extraBody:{temperature:1,top_p:1}},{id:"kimi-k2-thinking-turbo",name:"Kimi-K2-Thinking-Turbo",tooltip:"Moonshot AI Kimi-K2-Thinking-Turbo - Model context length 256k, high-speed version of kimi-k2-thinking, suitable for scenarios requiring deep reasoning and extreme speed",maxInputTokens:256e3,maxOutputTokens:16e3,includeThinking:!0,capabilities:{toolCalling:!0,imageInput:!1},extraBody:{temperature:1,top_p:1}},{id:"kimi-k2-0905-preview",name:"Kimi-K2-0905-Preview",sdkMode:"anthropic",baseUrl:"https://api.moonshot.cn/anthropic",tooltip:"Moonshot AI Kimi-K2-0905-Preview - Stronger Agentic Coding capabilities, more prominent frontend code aesthetics and practicality, 256K context",maxInputTokens:256e3,maxOutputTokens:8192,capabilities:{toolCalling:!0,imageInput:!1}},{id:"kimi-k2-turbo-preview",name:"Kimi-K2-Turbo-Preview",sdkMode:"anthropic",baseUrl:"https://api.moonshot.cn/anthropic",tooltip:"Moonshot AI Kimi-K2-Turbo-Preview - High-speed version model, output speed 60-100 tokens/sec, 256K context",maxInputTokens:256e3,maxOutputTokens:8192,capabilities:{toolCalling:!0,imageInput:!1}},{id:"kimi-k2-0711-preview",name:"Kimi-K2-0711-Preview",sdkMode:"anthropic",baseUrl:"https://api.moonshot.cn/anthropic",tooltip:"Moonshot AI Kimi-K2-0711-Preview - K2 series base version, 128K context",maxInputTokens:128e3,maxOutputTokens:8192,version:"kimi-k2-0711-previw",capabilities:{toolCalling:!0,imageInput:!1}},{id:"kimi-latest",name:"Kimi-Latest",tooltip:"Moonshot AI Kimi-Latest - Latest generation visual model, 128K context, supports image understanding, automatic context caching, intelligent selection of 8K/32K/128K billing models",maxInputTokens:128e3,maxOutputTokens:8192,capabilities:{toolCalling:!0,imageInput:!0}}]}});var fCt,dCt=q(()=>{fCt={displayName:"OpenCode",baseUrl:"https://opencode.ai/zen/v1",apiKeyTemplate:"sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",models:[{id:"claude-opus-4-6",name:"claude-opus-4-6",tooltip:"claude-opus-4-6 by OpenCode",maxInputTokens:112e3,maxOutputTokens:16e3,model:"claude-opus-4-6",capabilities:{toolCalling:!0,imageInput:!1}},{id:"claude-opus-4-5",name:"claude-opus-4-5",tooltip:"claude-opus-4-5 by OpenCode",maxInputTokens:112e3,maxOutputTokens:16e3,model:"claude-opus-4-5",capabilities:{toolCalling:!0,imageInput:!1}},{id:"claude-opus-4-1",name:"claude-opus-4-1",tooltip:"claude-opus-4-1 by OpenCode",maxInputTokens:112e3,maxOutputTokens:16e3,model:"claude-opus-4-1",capabilities:{toolCalling:!0,imageInput:!1}},{id:"claude-sonnet-4",name:"claude-sonnet-4",tooltip:"claude-sonnet-4 by OpenCode",maxInputTokens:112e3,maxOutputTokens:16e3,model:"claude-sonnet-4",capabilities:{toolCalling:!0,imageInput:!1}},{id:"claude-sonnet-4-5",name:"claude-sonnet-4-5",tooltip:"claude-sonnet-4-5 by OpenCode",maxInputTokens:112e3,maxOutputTokens:16e3,model:"claude-sonnet-4-5",capabilities:{toolCalling:!0,imageInput:!1}},{id:"claude-3-5-haiku",name:"claude-3-5-haiku",tooltip:"claude-3-5-haiku by OpenCode",maxInputTokens:112e3,maxOutputTokens:16e3,model:"claude-3-5-haiku",capabilities:{toolCalling:!0,imageInput:!1}},{id:"claude-haiku-4-5",name:"claude-haiku-4-5",tooltip:"claude-haiku-4-5 by OpenCode",maxInputTokens:112e3,maxOutputTokens:16e3,model:"claude-haiku-4-5",capabilities:{toolCalling:!0,imageInput:!1}},{id:"gemini-3-pro",name:"gemini-3-pro",tooltip:"gemini-3-pro by OpenCode",maxInputTokens:112e3,maxOutputTokens:16e3,model:"gemini-3-pro",capabilities:{toolCalling:!0,imageInput:!1}},{id:"gemini-3-flash",name:"gemini-3-flash",tooltip:"gemini-3-flash by OpenCode",maxInputTokens:112e3,maxOutputTokens:16e3,model:"gemini-3-flash",capabilities:{toolCalling:!0,imageInput:!1}},{id:"gpt-5.2",name:"gpt-5.2",tooltip:"gpt-5.2 by OpenCode",maxInputTokens:112e3,maxOutputTokens:16e3,model:"gpt-5.2",capabilities:{toolCalling:!0,imageInput:!1}},{id:"gpt-5.2-codex",name:"gpt-5.2-codex",tooltip:"gpt-5.2-codex by OpenCode",maxInputTokens:112e3,maxOutputTokens:16e3,model:"gpt-5.2-codex",capabilities:{toolCalling:!0,imageInput:!1}},{id:"gpt-5.1",name:"gpt-5.1",tooltip:"gpt-5.1 by OpenCode",maxInputTokens:112e3,maxOutputTokens:16e3,model:"gpt-5.1",capabilities:{toolCalling:!0,imageInput:!1}},{id:"gpt-5.1-codex-max",name:"gpt-5.1-codex-max",tooltip:"gpt-5.1-codex-max by OpenCode",maxInputTokens:112e3,maxOutputTokens:16e3,model:"gpt-5.1-codex-max",capabilities:{toolCalling:!0,imageInput:!1}},{id:"gpt-5.1-codex",name:"gpt-5.1-codex",tooltip:"gpt-5.1-codex by OpenCode",maxInputTokens:112e3,maxOutputTokens:16e3,model:"gpt-5.1-codex",capabilities:{toolCalling:!0,imageInput:!1}},{id:"gpt-5.1-codex-mini",name:"gpt-5.1-codex-mini",tooltip:"gpt-5.1-codex-mini by OpenCode",maxInputTokens:112e3,maxOutputTokens:16e3,model:"gpt-5.1-codex-mini",capabilities:{toolCalling:!0,imageInput:!1}},{id:"gpt-5",name:"gpt-5",tooltip:"gpt-5 by OpenCode",maxInputTokens:112e3,maxOutputTokens:16e3,model:"gpt-5",capabilities:{toolCalling:!0,imageInput:!1}},{id:"gpt-5-codex",name:"gpt-5-codex",tooltip:"gpt-5-codex by OpenCode",maxInputTokens:112e3,maxOutputTokens:16e3,model:"gpt-5-codex",capabilities:{toolCalling:!0,imageInput:!1}},{id:"gpt-5-nano",name:"gpt-5-nano",tooltip:"gpt-5-nano by OpenCode",maxInputTokens:112e3,maxOutputTokens:16e3,model:"gpt-5-nano",capabilities:{toolCalling:!0,imageInput:!1}},{id:"glm-4.7",name:"glm-4.7",tooltip:"glm-4.7 by OpenCode",maxInputTokens:112e3,maxOutputTokens:16e3,model:"glm-4.7",capabilities:{toolCalling:!0,imageInput:!1}},{id:"glm-4.6",name:"glm-4.6",tooltip:"glm-4.6 by OpenCode",maxInputTokens:112e3,maxOutputTokens:16e3,model:"glm-4.6",capabilities:{toolCalling:!0,imageInput:!1}},{id:"minimax-m2.1",name:"minimax-m2.1",tooltip:"minimax-m2.1 by OpenCode",maxInputTokens:112e3,maxOutputTokens:16e3,model:"minimax-m2.1",capabilities:{toolCalling:!0,imageInput:!1}},{id:"minimax-m2.5-free",name:"minimax-m2.5-free",tooltip:"minimax-m2.5-free by OpenCode",maxInputTokens:112e3,maxOutputTokens:16e3,model:"minimax-m2.5-free",capabilities:{toolCalling:!0,imageInput:!1}},{id:"minimax-m2.1-free",name:"minimax-m2.1-free",tooltip:"minimax-m2.1-free by OpenCode",maxInputTokens:112e3,maxOutputTokens:16e3,model:"minimax-m2.1-free",capabilities:{toolCalling:!0,imageInput:!1}},{id:"kimi-k2.5",name:"kimi-k2.5",tooltip:"kimi-k2.5 by OpenCode",maxInputTokens:112e3,maxOutputTokens:16e3,model:"kimi-k2.5",capabilities:{toolCalling:!0,imageInput:!1}},{id:"kimi-k2.5-free",name:"kimi-k2.5-free",tooltip:"kimi-k2.5-free by OpenCode",maxInputTokens:112e3,maxOutputTokens:16e3,model:"kimi-k2.5-free",capabilities:{toolCalling:!0,imageInput:!1}},{id:"kimi-k2",name:"kimi-k2",tooltip:"kimi-k2 by OpenCode",maxInputTokens:112e3,maxOutputTokens:16e3,model:"kimi-k2",capabilities:{toolCalling:!0,imageInput:!1}},{id:"kimi-k2-thinking",name:"kimi-k2-thinking",tooltip:"kimi-k2-thinking by OpenCode",maxInputTokens:112e3,maxOutputTokens:16e3,model:"kimi-k2-thinking",capabilities:{toolCalling:!0,imageInput:!1}},{id:"trinity-large-preview-free",name:"trinity-large-preview-free",tooltip:"trinity-large-preview-free by OpenCode",maxInputTokens:112e3,maxOutputTokens:16e3,model:"trinity-large-preview-free",capabilities:{toolCalling:!0,imageInput:!1}},{id:"glm-4.7-free",name:"glm-4.7-free",tooltip:"glm-4.7-free by OpenCode",maxInputTokens:112e3,maxOutputTokens:16e3,model:"glm-4.7-free",capabilities:{toolCalling:!0,imageInput:!1}},{id:"big-pickle",name:"big-pickle",tooltip:"big-pickle by OpenCode",maxInputTokens:112e3,maxOutputTokens:16e3,model:"big-pickle",capabilities:{toolCalling:!0,imageInput:!1}},{id:"alpha-g5",name:"alpha-g5",tooltip:"alpha-g5 by OpenCode",maxInputTokens:112e3,maxOutputTokens:16e3,model:"alpha-g5",capabilities:{toolCalling:!0,imageInput:!1}}]}});var hCt,pCt=q(()=>{hCt={displayName:"Ollama Cloud",baseUrl:"https://ollama.com/v1",apiKeyTemplate:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx.xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",models:[{id:"cogito-2.1:671b",name:"cogito-2.1:671b",tooltip:"128K context window",maxInputTokens:128e3,maxOutputTokens:128e3,model:"cogito-2.1:671b",capabilities:{toolCalling:!0,imageInput:!1}},{id:"glm-4.6",name:"glm-4.6",tooltip:"Context expanded from 128K to 200K tokens",maxInputTokens:2e5,maxOutputTokens:131072,model:"glm-4.6",capabilities:{toolCalling:!0,imageInput:!1}},{id:"glm-4.7",name:"glm-4.7",tooltip:"200K+ token context window",maxInputTokens:204800,maxOutputTokens:131072,model:"glm-4.7",capabilities:{toolCalling:!0,imageInput:!1}},{id:"kimi-k2:1t",name:"kimi-k2:1t",tooltip:"Instruct variant, 128K context",maxInputTokens:128e3,maxOutputTokens:16384,model:"kimi-k2:1t",capabilities:{toolCalling:!0,imageInput:!1}},{id:"kimi-k2-thinking",name:"kimi-k2-thinking",tooltip:"256K context window with reasoning capabilities",maxInputTokens:256e3,maxOutputTokens:262144,model:"kimi-k2-thinking",capabilities:{toolCalling:!0,imageInput:!1}},{id:"kimi-k2.5",name:"kimi-k2.5",tooltip:"256K context window with reasoning capabilities",maxInputTokens:256e3,maxOutputTokens:262144,model:"kimi-k2.5",capabilities:{toolCalling:!0,imageInput:!1}},{id:"qwen3-coder:480b",name:"qwen3-coder:480b",tooltip:"Native 256K, extensible to 1M with Yarn",maxInputTokens:262144,maxOutputTokens:131072,model:"qwen3-coder:480b",capabilities:{toolCalling:!0,imageInput:!1}},{id:"qwen3-next:80b",name:"qwen3-next:80b",tooltip:"Native 262K tokens, extensible to 1M",maxInputTokens:262144,maxOutputTokens:65536,model:"qwen3-next:80b",capabilities:{toolCalling:!0,imageInput:!1}},{id:"deepseek-v3.2",name:"deepseek-v3.2",tooltip:"128K context, default max output 4K, maximum 8K",maxInputTokens:131072,maxOutputTokens:8192,model:"deepseek-v3.2",capabilities:{toolCalling:!0,imageInput:!1}},{id:"deepseek-v3.1:671b",name:"deepseek-v3.1:671b",tooltip:"128K context window, 671B total parameters, 37B active",maxInputTokens:131072,maxOutputTokens:8192,model:"deepseek-v3.1:671b",capabilities:{toolCalling:!0,imageInput:!1}},{id:"gpt-oss:120b",name:"gpt-oss:120b",tooltip:"128K context using RoPE, extended to 131K with YaRN",maxInputTokens:131072,maxOutputTokens:131072,model:"gpt-oss:120b",capabilities:{toolCalling:!0,imageInput:!1}},{id:"nemotron-3-nano:30b",name:"nemotron-3-nano:30b",tooltip:"1M token context window, output limit not specified",maxInputTokens:1e6,maxOutputTokens:131072,model:"nemotron-3-nano:30b",capabilities:{toolCalling:!0,imageInput:!1}},{id:"gpt-oss:20b",name:"gpt-oss:20b",tooltip:"Same 128K context as 120B variant",maxInputTokens:131072,maxOutputTokens:131072,model:"gpt-oss:20b",capabilities:{toolCalling:!0,imageInput:!1}},{id:"qwen3-vl:235b-instruct",name:"qwen3-vl:235b-instruct",tooltip:"256K context (262,144), vision-language model",maxInputTokens:262144,maxOutputTokens:32768,model:"qwen3-vl:235b-instruct",capabilities:{toolCalling:!0,imageInput:!0}},{id:"qwen3-vl:235b",name:"qwen3-vl:235b",tooltip:"256K context, base model variant",maxInputTokens:262144,maxOutputTokens:262144,model:"qwen3-vl:235b",capabilities:{toolCalling:!0,imageInput:!0}},{id:"minimax-m2",name:"minimax-m2",tooltip:"197K context length, 128K max output",maxInputTokens:196608,maxOutputTokens:131072,model:"minimax-m2",capabilities:{toolCalling:!0,imageInput:!1}},{id:"minimax-m2.1",name:"minimax-m2.1",tooltip:"204.8K context, enhanced from M2",maxInputTokens:204800,maxOutputTokens:131072,model:"minimax-m2.1",capabilities:{toolCalling:!0,imageInput:!1}},{id:"ministral-3:3b",name:"ministral-3:3b",tooltip:"256K context window",maxInputTokens:262144,maxOutputTokens:8192,model:"ministral-3:3b",capabilities:{toolCalling:!0,imageInput:!1}},{id:"ministral-3:8b",name:"ministral-3:8b",tooltip:"256K context window",maxInputTokens:262144,maxOutputTokens:8192,model:"ministral-3:8b",capabilities:{toolCalling:!0,imageInput:!1}},{id:"ministral-3:14b",name:"ministral-3:14b",tooltip:"256K context window",maxInputTokens:262144,maxOutputTokens:8192,model:"ministral-3:14b",capabilities:{toolCalling:!0,imageInput:!1}},{id:"mistral-large-3:675b",name:"mistral-large-3:675b",tooltip:"128K context, 262K max output capacity",maxInputTokens:131072,maxOutputTokens:262144,model:"mistral-large-3:675b",capabilities:{toolCalling:!0,imageInput:!1}},{id:"devstral-2:123b",name:"devstral-2:123b",tooltip:"256K context window, coding-focused",maxInputTokens:262144,maxOutputTokens:4096,model:"devstral-2:123b",capabilities:{toolCalling:!0,imageInput:!1}},{id:"devstral-small-2:24b",name:"devstral-small-2:24b",tooltip:"256K context window",maxInputTokens:262144,maxOutputTokens:4096,model:"devstral-small-2:24b",capabilities:{toolCalling:!0,imageInput:!0}},{id:"gemini-3-pro-preview",name:"gemini-3-pro-preview",tooltip:"1M input tokens, 64K output limit",maxInputTokens:1048576,maxOutputTokens:65536,model:"gemini-3-pro-preview",capabilities:{toolCalling:!0,imageInput:!0}},{id:"gemini-3-flash-preview",name:"gemini-3-flash-preview",tooltip:"1M input tokens, 64K output limit",maxInputTokens:1048576,maxOutputTokens:65536,model:"gemini-3-flash-preview",capabilities:{toolCalling:!0,imageInput:!0}},{id:"gemma3:4b",name:"gemma3:4b",tooltip:"128K context window",maxInputTokens:131072,maxOutputTokens:8192,model:"gemma3:4b",capabilities:{toolCalling:!0,imageInput:!1}},{id:"gemma3:12b",name:"gemma3:12b",tooltip:"128K context window",maxInputTokens:131072,maxOutputTokens:8192,model:"gemma3:12b",capabilities:{toolCalling:!0,imageInput:!1}},{id:"gemma3:27b",name:"gemma3:27b",tooltip:"128K context window",maxInputTokens:131072,maxOutputTokens:8192,model:"gemma3:27b",capabilities:{toolCalling:!0,imageInput:!1}},{id:"rnj-1:8b",name:"rnj-1:8b",tooltip:"32K context with YaRN extension, max output not specified",maxInputTokens:32768,maxOutputTokens:16e3,model:"rnj-1:8b",capabilities:{toolCalling:!0,imageInput:!1}}]}});var gCt,mCt=q(()=>{gCt={displayName:"Qwen Code CLI",baseUrl:"https://dashscope.aliyuncs.com/compatible-mode/v1",apiKeyTemplate:"OAuth via Qwen CLI",models:[{id:"coder-model",name:"Qwen Coder (CLI Default)",tooltip:"Qwen Coder via CLI",maxInputTokens:1e6,maxOutputTokens:65536,model:"coder-model",capabilities:{toolCalling:!0,imageInput:!1}},{id:"vision-model",name:"Qwen Vision",tooltip:"Qwen Vision model via CLI",maxInputTokens:1e6,maxOutputTokens:65536,model:"vision-model",capabilities:{toolCalling:!0,imageInput:!0}},{id:"qwen3-coder-plus",name:"Qwen3 Coder Plus",tooltip:"Qwen3 Coder Plus via CLI",maxInputTokens:1e6,maxOutputTokens:65536,model:"qwen3-coder-plus",capabilities:{toolCalling:!0,imageInput:!1}}]}});var vCt,_Ct=q(()=>{vCt={displayName:"Zenmux",baseUrl:"https://zenmux.ai/api/v1",apiKeyTemplate:"zm-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",models:[{id:"kuaishou-kat-coder-pro-v1-free",name:"KwaiKAT: KAT-Coder-Pro-V1 Free",tooltip:"KwaiKAT: KAT-Coder-Pro-V1 Free by Zenmux",maxInputTokens:24e4,maxOutputTokens:16e3,model:"kuaishou/kat-coder-pro-v1-free",capabilities:{toolCalling:!0,imageInput:!1}},{id:"z-ai-glm-4-6v-flash-free",name:"Z.AI: GLM 4.6V Flash (Free)",tooltip:"Z.AI: GLM 4.6V Flash (Free) by Zenmux",maxInputTokens:184e3,maxOutputTokens:16e3,model:"z-ai/glm-4.6v-flash-free",capabilities:{toolCalling:!0,imageInput:!0}},{id:"xiaomi-mimo-v2-flash-free",name:"Xiaomi: MiMo-V2-Flash Free",tooltip:"Xiaomi: MiMo-V2-Flash Free by Zenmux",maxInputTokens:246144,maxOutputTokens:16e3,model:"xiaomi/mimo-v2-flash-free",capabilities:{toolCalling:!0,imageInput:!1}},{id:"openai-gpt-4-1-mini",name:"OpenAI: GPT-4.1 Mini",tooltip:"OpenAI: GPT-4.1 Mini by Zenmux",maxInputTokens:1031576,maxOutputTokens:16e3,model:"openai/gpt-4.1-mini",capabilities:{toolCalling:!0,imageInput:!0}},{id:"anthropic-claude-opus-4",name:"Anthropic: Claude Opus 4",tooltip:"Anthropic: Claude Opus 4 by Zenmux",maxInputTokens:184e3,maxOutputTokens:16e3,model:"anthropic/claude-opus-4",capabilities:{toolCalling:!0,imageInput:!0}},{id:"openai-gpt-4-1-nano",name:"OpenAI: GPT-4.1 Nano",tooltip:"OpenAI: GPT-4.1 Nano by Zenmux",maxInputTokens:1031576,maxOutputTokens:16e3,model:"openai/gpt-4.1-nano",capabilities:{toolCalling:!0,imageInput:!0}},{id:"openai-o4-mini",name:"OpenAI: o4 Mini",tooltip:"OpenAI: o4 Mini by Zenmux",maxInputTokens:184e3,maxOutputTokens:16e3,model:"openai/o4-mini",capabilities:{toolCalling:!0,imageInput:!0}},{id:"openai-gpt-5",name:"OpenAI: GPT-5",tooltip:"OpenAI: GPT-5 by Zenmux",maxInputTokens:384e3,maxOutputTokens:16e3,model:"openai/gpt-5",capabilities:{toolCalling:!0,imageInput:!0}},{id:"openai-gpt-4o",name:"OpenAI: GPT-4o",tooltip:"OpenAI: GPT-4o by Zenmux",maxInputTokens:112e3,maxOutputTokens:16e3,model:"openai/gpt-4o",capabilities:{toolCalling:!0,imageInput:!0}},{id:"openai-gpt-5-nano",name:"OpenAI: GPT-5 Nano",tooltip:"OpenAI: GPT-5 Nano by Zenmux",maxInputTokens:384e3,maxOutputTokens:16e3,model:"openai/gpt-5-nano",capabilities:{toolCalling:!0,imageInput:!0}},{id:"openai-gpt-4-1",name:"OpenAI: GPT-4.1",tooltip:"OpenAI: GPT-4.1 by Zenmux",maxInputTokens:1031576,maxOutputTokens:16e3,model:"openai/gpt-4.1",capabilities:{toolCalling:!0,imageInput:!0}},{id:"anthropic-claude-3-5-haiku",name:"Anthropic: Claude 3.5 Haiku",tooltip:"Anthropic: Claude 3.5 Haiku by Zenmux",maxInputTokens:184e3,maxOutputTokens:16e3,model:"anthropic/claude-3.5-haiku",capabilities:{toolCalling:!0,imageInput:!0}},{id:"google-gemini-2-5-flash-lite",name:"Google: Gemini 2.5 Flash Lite",tooltip:"Google: Gemini 2.5 Flash Lite by Zenmux",maxInputTokens:1032576,maxOutputTokens:16e3,model:"google/gemini-2.5-flash-lite",capabilities:{toolCalling:!0,imageInput:!0}},{id:"anthropic-claude-3-7-sonnet",name:"Anthropic: Claude 3.7 Sonnet",tooltip:"Anthropic: Claude 3.7 Sonnet by Zenmux",maxInputTokens:184e3,maxOutputTokens:16e3,model:"anthropic/claude-3.7-sonnet",capabilities:{toolCalling:!0,imageInput:!0}},{id:"deepseek-deepseek-r1-0528",name:"DeepSeek: R1 0528",tooltip:"DeepSeek: R1 0528 by Zenmux",maxInputTokens:48e3,maxOutputTokens:16e3,model:"deepseek/deepseek-r1-0528",capabilities:{toolCalling:!0,imageInput:!1}},{id:"anthropic-claude-opus-4-1",name:"Anthropic: Claude Opus 4.1",tooltip:"Anthropic: Claude Opus 4.1 by Zenmux",maxInputTokens:184e3,maxOutputTokens:16e3,model:"anthropic/claude-opus-4.1",capabilities:{toolCalling:!0,imageInput:!0}},{id:"anthropic-claude-sonnet-4",name:"Anthropic: Claude Sonnet 4",tooltip:"Anthropic: Claude Sonnet 4 by Zenmux",maxInputTokens:984e3,maxOutputTokens:16e3,model:"anthropic/claude-sonnet-4",capabilities:{toolCalling:!0,imageInput:!0}},{id:"openai-gpt-5-mini",name:"OpenAI: GPT-5 Mini",tooltip:"OpenAI: GPT-5 Mini by Zenmux",maxInputTokens:384e3,maxOutputTokens:16e3,model:"openai/gpt-5-mini",capabilities:{toolCalling:!0,imageInput:!0}},{id:"openai-gpt-5-chat",name:"OpenAI: GPT-5 Chat",tooltip:"OpenAI: GPT-5 Chat by Zenmux",maxInputTokens:112e3,maxOutputTokens:16e3,model:"openai/gpt-5-chat",capabilities:{toolCalling:!0,imageInput:!0}},{id:"google-gemini-2-5-flash",name:"Google: Gemini 2.5 Flash",tooltip:"Google: Gemini 2.5 Flash by Zenmux",maxInputTokens:1032576,maxOutputTokens:16e3,model:"google/gemini-2.5-flash",capabilities:{toolCalling:!0,imageInput:!0}},{id:"deepseek-deepseek-chat-v3-1",name:"DeepSeek: DeepSeek V3.1",tooltip:"DeepSeek: DeepSeek V3.1 by Zenmux",maxInputTokens:112e3,maxOutputTokens:16e3,model:"deepseek/deepseek-chat-v3.1",capabilities:{toolCalling:!0,imageInput:!1}},{id:"google-gemini-2-5-pro",name:"Google: Gemini 2.5 Pro",tooltip:"Google: Gemini 2.5 Pro by Zenmux",maxInputTokens:1032576,maxOutputTokens:16e3,model:"google/gemini-2.5-pro",capabilities:{toolCalling:!0,imageInput:!0}},{id:"google-gemini-2-0-flash",name:"Google: Gemini 2.0 Flash",tooltip:"Google: Gemini 2.0 Flash by Zenmux",maxInputTokens:1032576,maxOutputTokens:16e3,model:"google/gemini-2.0-flash",capabilities:{toolCalling:!0,imageInput:!0}},{id:"x-ai-grok-4",name:"xAI: Grok 4",tooltip:"xAI: Grok 4 by Zenmux",maxInputTokens:24e4,maxOutputTokens:16e3,model:"x-ai/grok-4",capabilities:{toolCalling:!0,imageInput:!0}},{id:"qwen-qwen3-235b-a22b-2507",name:"Qwen: Qwen3 235B A22B Instruct 2507",tooltip:"Qwen: Qwen3 235B A22B Instruct 2507 by Zenmux",maxInputTokens:24e4,maxOutputTokens:16e3,model:"qwen/qwen3-235b-a22b-2507",capabilities:{toolCalling:!0,imageInput:!1}},{id:"openai-gpt-4o-mini",name:"OpenAI: GPT-4o-mini",tooltip:"OpenAI: GPT-4o-mini by Zenmux",maxInputTokens:112e3,maxOutputTokens:16e3,model:"openai/gpt-4o-mini",capabilities:{toolCalling:!0,imageInput:!0}},{id:"qwen-qwen3-235b-a22b-thinking-2507",name:"Qwen: Qwen3 235B A22B Thinking 2507",tooltip:"Qwen: Qwen3 235B A22B Thinking 2507 by Zenmux",maxInputTokens:24e4,maxOutputTokens:16e3,model:"qwen/qwen3-235b-a22b-thinking-2507",capabilities:{toolCalling:!0,imageInput:!1}},{id:"qwen-qwen3-coder",name:"Qwen: Qwen3-Coder",tooltip:"Qwen: Qwen3-Coder by Zenmux",maxInputTokens:24e4,maxOutputTokens:16e3,model:"qwen/qwen3-coder",capabilities:{toolCalling:!0,imageInput:!1}},{id:"google-gemini-2-0-flash-lite-001",name:"Google: Gemini 2.0 Flash Lite",tooltip:"Google: Gemini 2.0 Flash Lite by Zenmux",maxInputTokens:1032576,maxOutputTokens:16e3,model:"google/gemini-2.0-flash-lite-001",capabilities:{toolCalling:!0,imageInput:!0}},{id:"z-ai-glm-4-5-air",name:"Z.AI: GLM 4.5 Air",tooltip:"Z.AI: GLM 4.5 Air by Zenmux",maxInputTokens:112e3,maxOutputTokens:16e3,model:"z-ai/glm-4.5-air",capabilities:{toolCalling:!0,imageInput:!1}},{id:"qwen-qwen3-coder-plus",name:"Qwen: Qwen3-Coder-Plus",tooltip:"Qwen: Qwen3-Coder-Plus by Zenmux",maxInputTokens:984e3,maxOutputTokens:16e3,model:"qwen/qwen3-coder-plus",capabilities:{toolCalling:!0,imageInput:!1}},{id:"deepseek-deepseek-chat",name:"DeepSeek: DeepSeek-V3.2 (Non-thinking Mode)",tooltip:"DeepSeek: DeepSeek-V3.2 (Non-thinking Mode) by Zenmux",maxInputTokens:112e3,maxOutputTokens:16e3,model:"deepseek/deepseek-chat",capabilities:{toolCalling:!0,imageInput:!1}},{id:"inclusionai-ring-mini-2-0",name:"inclusionAI: Ring-mini-2.0",tooltip:"inclusionAI: Ring-mini-2.0 by Zenmux",maxInputTokens:112e3,maxOutputTokens:16e3,model:"inclusionai/ring-mini-2.0",capabilities:{toolCalling:!0,imageInput:!1}},{id:"moonshotai-kimi-k2-0905",name:"MoonshotAI: Kimi K2 0905",tooltip:"MoonshotAI: Kimi K2 0905 by Zenmux",maxInputTokens:246100,maxOutputTokens:16e3,model:"moonshotai/kimi-k2-0905",capabilities:{toolCalling:!0,imageInput:!1}},{id:"inclusionai-ling-mini-2-0",name:"inclusionAI: Ling-mini-2.0",tooltip:"inclusionAI: Ling-mini-2.0 by Zenmux",maxInputTokens:112e3,maxOutputTokens:16e3,model:"inclusionai/ling-mini-2.0",capabilities:{toolCalling:!0,imageInput:!1}},{id:"z-ai-glm-4-5",name:"Z.AI: GLM 4.5",tooltip:"Z.AI: GLM 4.5 by Zenmux",maxInputTokens:112e3,maxOutputTokens:16e3,model:"z-ai/glm-4.5",capabilities:{toolCalling:!0,imageInput:!1}},{id:"moonshotai-kimi-k2-0711",name:"MoonshotAI: Kimi K2 0711",tooltip:"MoonshotAI: Kimi K2 0711 by Zenmux",maxInputTokens:112e3,maxOutputTokens:16e3,model:"moonshotai/kimi-k2-0711",capabilities:{toolCalling:!0,imageInput:!1}},{id:"inclusionai-ling-flash-2-0",name:"inclusionAI: Ling-flash-2.0",tooltip:"inclusionAI: Ling-flash-2.0 by Zenmux",maxInputTokens:112e3,maxOutputTokens:16e3,model:"inclusionai/ling-flash-2.0",capabilities:{toolCalling:!0,imageInput:!1}},{id:"inclusionai-ring-flash-2-0",name:"inclusionAI: Ring-flash-2.0",tooltip:"inclusionAI: Ring-flash-2.0 by Zenmux",maxInputTokens:112e3,maxOutputTokens:16e3,model:"inclusionai/ring-flash-2.0",capabilities:{toolCalling:!0,imageInput:!1}},{id:"x-ai-grok-code-fast-1",name:"xAI: Grok Code Fast 1",tooltip:"xAI: Grok Code Fast 1 by Zenmux",maxInputTokens:24e4,maxOutputTokens:16e3,model:"x-ai/grok-code-fast-1",capabilities:{toolCalling:!0,imageInput:!1}},{id:"x-ai-grok-4-fast",name:"xAI: Grok 4 Fast",tooltip:"xAI: Grok 4 Fast by Zenmux",maxInputTokens:1984e3,maxOutputTokens:16e3,model:"x-ai/grok-4-fast",capabilities:{toolCalling:!0,imageInput:!0}},{id:"x-ai-grok-4-fast-non-reasoning",name:"xAI: Grok 4 Fast None Reasoning",tooltip:"xAI: Grok 4 Fast None Reasoning by Zenmux",maxInputTokens:1984e3,maxOutputTokens:16e3,model:"x-ai/grok-4-fast-non-reasoning",capabilities:{toolCalling:!0,imageInput:!0}},{id:"qwen-qwen3-vl-plus",name:"Qwen: Qwen3-VL-Plus",tooltip:"Qwen: Qwen3-VL-Plus by Zenmux",maxInputTokens:246144,maxOutputTokens:16e3,model:"qwen/qwen3-vl-plus",capabilities:{toolCalling:!0,imageInput:!0}},{id:"qwen-qwen3-max",name:"Qwen: Qwen3-Max-Thinking",tooltip:"Qwen: Qwen3-Max-Thinking by Zenmux",maxInputTokens:24e4,maxOutputTokens:16e3,model:"qwen/qwen3-max",capabilities:{toolCalling:!0,imageInput:!1}},{id:"z-ai-glm-4-6",name:"Z.AI: GLM 4.6",tooltip:"Z.AI: GLM 4.6 by Zenmux",maxInputTokens:184e3,maxOutputTokens:16e3,model:"z-ai/glm-4.6",capabilities:{toolCalling:!0,imageInput:!1}},{id:"inclusionai-ling-1t",name:"inclusionAI: Ling-1T",tooltip:"inclusionAI: Ling-1T by Zenmux",maxInputTokens:112e3,maxOutputTokens:16e3,model:"inclusionai/ling-1t",capabilities:{toolCalling:!0,imageInput:!1}},{id:"inclusionai-ring-1t",name:"inclusionAI: Ring-1T",tooltip:"inclusionAI: Ring-1T by Zenmux",maxInputTokens:112e3,maxOutputTokens:16e3,model:"inclusionai/ring-1t",capabilities:{toolCalling:!0,imageInput:!1}},{id:"anthropic-claude-sonnet-4-5",name:"Anthropic: Claude Sonnet 4.5",tooltip:"Anthropic: Claude Sonnet 4.5 by Zenmux",maxInputTokens:984e3,maxOutputTokens:16e3,model:"anthropic/claude-sonnet-4.5",capabilities:{toolCalling:!0,imageInput:!0}},{id:"anthropic-claude-haiku-4-5",name:"Anthropic: Claude Haiku 4.5",tooltip:"Anthropic: Claude Haiku 4.5 by Zenmux",maxInputTokens:184e3,maxOutputTokens:16e3,model:"anthropic/claude-haiku-4.5",capabilities:{toolCalling:!0,imageInput:!0}},{id:"openai-gpt-5-pro",name:"OpenAI: GPT-5 Pro",tooltip:"OpenAI: GPT-5 Pro by Zenmux",maxInputTokens:384e3,maxOutputTokens:16e3,model:"openai/gpt-5-pro",capabilities:{toolCalling:!0,imageInput:!0}},{id:"openai-gpt-5-codex",name:"OpenAI: GPT-5 Codex",tooltip:"OpenAI: GPT-5 Codex by Zenmux",maxInputTokens:384e3,maxOutputTokens:16e3,model:"openai/gpt-5-codex",capabilities:{toolCalling:!0,imageInput:!0}},{id:"deepseek-deepseek-reasoner",name:"DeepSeek: DeepSeek-V3.2 (Thinking Mode)",tooltip:"DeepSeek: DeepSeek-V3.2 (Thinking Mode) by Zenmux",maxInputTokens:112e3,maxOutputTokens:16e3,model:"deepseek/deepseek-reasoner",capabilities:{toolCalling:!0,imageInput:!1}},{id:"kuaishou-kat-coder-pro-v1",name:"KwaiKAT: KAT-Coder-Pro-V1",tooltip:"KwaiKAT: KAT-Coder-Pro-V1 by Zenmux",maxInputTokens:24e4,maxOutputTokens:16e3,model:"kuaishou/kat-coder-pro-v1",capabilities:{toolCalling:!0,imageInput:!1}},{id:"minimax-minimax-m2",name:"MiniMax: MiniMax M2",tooltip:"MiniMax: MiniMax M2 by Zenmux",maxInputTokens:188800,maxOutputTokens:16e3,model:"minimax/minimax-m2",capabilities:{toolCalling:!0,imageInput:!1}},{id:"moonshotai-kimi-k2-thinking",name:"MoonshotAI: Kimi K2 Thinking",tooltip:"MoonshotAI: Kimi K2 Thinking by Zenmux",maxInputTokens:246144,maxOutputTokens:16e3,model:"moonshotai/kimi-k2-thinking",capabilities:{toolCalling:!0,imageInput:!1}},{id:"moonshotai-kimi-k2-thinking-turbo",name:"MoonshotAI: Kimi K2 Thinking Turbo",tooltip:"MoonshotAI: Kimi K2 Thinking Turbo by Zenmux",maxInputTokens:246144,maxOutputTokens:16e3,model:"moonshotai/kimi-k2-thinking-turbo",capabilities:{toolCalling:!0,imageInput:!1}},{id:"qwen-qwen3-max-preview",name:"Qwen: Qwen3 Max Thinking Preview",tooltip:"Qwen: Qwen3 Max Thinking Preview by Zenmux",maxInputTokens:246144,maxOutputTokens:16e3,model:"qwen/qwen3-max-preview",capabilities:{toolCalling:!0,imageInput:!1}},{id:"baidu-ernie-5-0-thinking-preview",name:"Baidu: ERNIE 5.0",tooltip:"Baidu: ERNIE 5.0 by Zenmux",maxInputTokens:112e3,maxOutputTokens:16e3,model:"baidu/ernie-5.0-thinking-preview",capabilities:{toolCalling:!0,imageInput:!0}},{id:"openai-gpt-5-1-codex",name:"OpenAI: GPT-5.1-Codex",tooltip:"OpenAI: GPT-5.1-Codex by Zenmux",maxInputTokens:384e3,maxOutputTokens:16e3,model:"openai/gpt-5.1-codex",capabilities:{toolCalling:!0,imageInput:!0}},{id:"openai-gpt-5-1-chat",name:"OpenAI: GPT-5.1 Chat",tooltip:"OpenAI: GPT-5.1 Chat by Zenmux",maxInputTokens:112e3,maxOutputTokens:16e3,model:"openai/gpt-5.1-chat",capabilities:{toolCalling:!0,imageInput:!0}},{id:"qwen-qwen3-14b",name:"Qwen: Qwen3 14B",tooltip:"Qwen: Qwen3 14B by Zenmux",maxInputTokens:16e3,maxOutputTokens:16e3,model:"qwen/qwen3-14b",capabilities:{toolCalling:!0,imageInput:!1}},{id:"openai-gpt-5-1-codex-mini",name:"OpenAI: GPT-5.1-Codex-Mini",tooltip:"OpenAI: GPT-5.1-Codex-Mini by Zenmux",maxInputTokens:384e3,maxOutputTokens:16e3,model:"openai/gpt-5.1-codex-mini",capabilities:{toolCalling:!0,imageInput:!0}},{id:"volcengine-doubao-seed-code",name:"VolcanoEngine: Doubao-Seed-Code",tooltip:"VolcanoEngine: Doubao-Seed-Code by Zenmux",maxInputTokens:24e4,maxOutputTokens:16e3,model:"volcengine/doubao-seed-code",capabilities:{toolCalling:!0,imageInput:!0}},{id:"openai-gpt-5-1",name:"OpenAI: GPT-5.1",tooltip:"OpenAI: GPT-5.1 by Zenmux",maxInputTokens:384e3,maxOutputTokens:16e3,model:"openai/gpt-5.1",capabilities:{toolCalling:!0,imageInput:!0}},{id:"x-ai-grok-4-1-fast",name:"xAI: Grok 4.1 Fast",tooltip:"xAI: Grok 4.1 Fast by Zenmux",maxInputTokens:1984e3,maxOutputTokens:16e3,model:"x-ai/grok-4.1-fast",capabilities:{toolCalling:!0,imageInput:!0}},{id:"x-ai-grok-4-1-fast-non-reasoning",name:"xAI: Grok 4.1 Fast Non Reasoning",tooltip:"xAI: Grok 4.1 Fast Non Reasoning by Zenmux",maxInputTokens:1984e3,maxOutputTokens:16e3,model:"x-ai/grok-4.1-fast-non-reasoning",capabilities:{toolCalling:!0,imageInput:!0}},{id:"google-gemini-3-pro-preview",name:"Google: Gemini 3 Pro Preview",tooltip:"Google: Gemini 3 Pro Preview by Zenmux",maxInputTokens:1032576,maxOutputTokens:16e3,model:"google/gemini-3-pro-preview",capabilities:{toolCalling:!0,imageInput:!0}},{id:"volcengine-doubao-seed-1-6-vision",name:"VolcanoEngine: Doubao-Seed-1.6-vision",tooltip:"VolcanoEngine: Doubao-Seed-1.6-vision by Zenmux",maxInputTokens:24e4,maxOutputTokens:16e3,model:"volcengine/doubao-seed-1-6-vision",capabilities:{toolCalling:!0,imageInput:!0}},{id:"google-gemma-3-12b-it",name:"Google: Gemma 3 12B",tooltip:"Google: Gemma 3 12B by Zenmux",maxInputTokens:112e3,maxOutputTokens:16e3,model:"google/gemma-3-12b-it",capabilities:{toolCalling:!0,imageInput:!0}},{id:"anthropic-claude-opus-4-5",name:"Anthropic: Claude Opus 4.5",tooltip:"Anthropic: Claude Opus 4.5 by Zenmux",maxInputTokens:184e3,maxOutputTokens:16e3,model:"anthropic/claude-opus-4.5",capabilities:{toolCalling:!0,imageInput:!0}},{id:"deepseek-deepseek-v3-2-exp",name:"DeepSeek: DeepSeek-V3.2-Exp",tooltip:"DeepSeek: DeepSeek-V3.2-Exp by Zenmux",maxInputTokens:147840,maxOutputTokens:16e3,model:"deepseek/deepseek-v3.2-exp",capabilities:{toolCalling:!0,imageInput:!1}},{id:"meta-llama-3-3-70b-instruct",name:"Meta: Llama 3.3 70B Instruct",tooltip:"Meta: Llama 3.3 70B Instruct by Zenmux",maxInputTokens:112e3,maxOutputTokens:16e3,model:"meta/llama-3.3-70b-instruct",capabilities:{toolCalling:!0,imageInput:!1}},{id:"mistralai-mistral-large-2512",name:"Mistral: Mistral Large 3",tooltip:"Mistral: Mistral Large 3 by Zenmux",maxInputTokens:24e4,maxOutputTokens:16e3,model:"mistralai/mistral-large-2512",capabilities:{toolCalling:!0,imageInput:!0}},{id:"meta-llama-4-scout-17b-16e-instruct",name:"Meta: Llama 4 Scout Instruct",tooltip:"Meta: Llama 4 Scout Instruct by Zenmux",maxInputTokens:115072,maxOutputTokens:16e3,model:"meta/llama-4-scout-17b-16e-instruct",capabilities:{toolCalling:!0,imageInput:!0}},{id:"baidu-ernie-x1-1-preview",name:"Baidu: ERNIE-X1.1-Preview",tooltip:"Baidu: ERNIE-X1.1-Preview by Zenmux",maxInputTokens:49536,maxOutputTokens:16e3,model:"baidu/ernie-x1.1-preview",capabilities:{toolCalling:!0,imageInput:!1}},{id:"z-ai-glm-4-6v-flash",name:"Z.AI: GLM 4.6V FlashX",tooltip:"Z.AI: GLM 4.6V FlashX by Zenmux",maxInputTokens:184e3,maxOutputTokens:16e3,model:"z-ai/glm-4.6v-flash",capabilities:{toolCalling:!0,imageInput:!0}},{id:"z-ai-glm-4-6v",name:"Z.AI: GLM 4.6V",tooltip:"Z.AI: GLM 4.6V by Zenmux",maxInputTokens:184e3,maxOutputTokens:16e3,model:"z-ai/glm-4.6v",capabilities:{toolCalling:!0,imageInput:!0}},{id:"deepseek-deepseek-v3-2",name:"DeepSeek: DeepSeek V3.2",tooltip:"DeepSeek: DeepSeek V3.2 by Zenmux",maxInputTokens:112e3,maxOutputTokens:16e3,model:"deepseek/deepseek-v3.2",capabilities:{toolCalling:!0,imageInput:!1}},{id:"openai-gpt-5-2-pro",name:"OpenAI: GPT-5.2 Pro",tooltip:"OpenAI: GPT-5.2 Pro by Zenmux",maxInputTokens:384e3,maxOutputTokens:16e3,model:"openai/gpt-5.2-pro",capabilities:{toolCalling:!0,imageInput:!0}},{id:"openai-gpt-5-2",name:"OpenAI: GPT-5.2",tooltip:"OpenAI: GPT-5.2 by Zenmux",maxInputTokens:384e3,maxOutputTokens:16e3,model:"openai/gpt-5.2",capabilities:{toolCalling:!0,imageInput:!0}},{id:"openai-gpt-5-2-chat",name:"OpenAI: GPT-5.2 Chat",tooltip:"OpenAI: GPT-5.2 Chat by Zenmux",maxInputTokens:112e3,maxOutputTokens:16e3,model:"openai/gpt-5.2-chat",capabilities:{toolCalling:!0,imageInput:!0}},{id:"google-gemini-3-flash-preview",name:"Google: Gemini 3 Flash Preview",tooltip:"Google: Gemini 3 Flash Preview by Zenmux",maxInputTokens:1032576,maxOutputTokens:16e3,model:"google/gemini-3-flash-preview",capabilities:{toolCalling:!0,imageInput:!0}},{id:"stepfun-step-3",name:"StepFun: Step-3",tooltip:"StepFun: Step-3 by Zenmux",maxInputTokens:49536,maxOutputTokens:16e3,model:"stepfun/step-3",capabilities:{toolCalling:!0,imageInput:!0}},{id:"inclusionai-llada2-0-flash-cap",name:"inclusionAI: LLaDA2-flash-CAP",tooltip:"inclusionAI: LLaDA2-flash-CAP by Zenmux",maxInputTokens:16e3,maxOutputTokens:16e3,model:"inclusionai/llada2.0-flash-cap",capabilities:{toolCalling:!0,imageInput:!1}},{id:"openai-gpt-5-2-codex",name:"OpenAI: GPT-5.2-Codex",tooltip:"OpenAI: GPT-5.2-Codex by Zenmux",maxInputTokens:384e3,maxOutputTokens:16e3,model:"openai/gpt-5.2-codex",capabilities:{toolCalling:!0,imageInput:!0}},{id:"xiaomi-mimo-v2-flash",name:"Xiaomi: MiMo-V2-Flash",tooltip:"Xiaomi: MiMo-V2-Flash by Zenmux",maxInputTokens:246144,maxOutputTokens:16e3,model:"xiaomi/mimo-v2-flash",capabilities:{toolCalling:!0,imageInput:!1}},{id:"volcengine-doubao-seed-1-8",name:"VolcanoEngine: Doubao-Seed-1.8",tooltip:"VolcanoEngine: Doubao-Seed-1.8 by Zenmux",maxInputTokens:24e4,maxOutputTokens:16e3,model:"volcengine/doubao-seed-1.8",capabilities:{toolCalling:!0,imageInput:!0}},{id:"minimax-minimax-m2-1",name:"MiniMax: MiniMax M2.1",tooltip:"MiniMax: MiniMax M2.1 by Zenmux",maxInputTokens:188800,maxOutputTokens:16e3,model:"minimax/minimax-m2.1",capabilities:{toolCalling:!0,imageInput:!1}},{id:"z-ai-glm-4-7",name:"Z.AI: GLM 4.7",tooltip:"Z.AI: GLM 4.7 by Zenmux",maxInputTokens:184e3,maxOutputTokens:16e3,model:"z-ai/glm-4.7",capabilities:{toolCalling:!0,imageInput:!1}},{id:"z-ai-glm-4-7-flash-free",name:"Z.AI: GLM 4.7 Flash (Free)",tooltip:"Z.AI: GLM 4.7 Flash (Free) by Zenmux",maxInputTokens:184e3,maxOutputTokens:16e3,model:"z-ai/glm-4.7-flash-free",capabilities:{toolCalling:!0,imageInput:!1}},{id:"z-ai-glm-4-7-flashx",name:"Z.AI: GLM 4.7 FlashX",tooltip:"Z.AI: GLM 4.7 FlashX by Zenmux",maxInputTokens:184e3,maxOutputTokens:16e3,model:"z-ai/glm-4.7-flashx",capabilities:{toolCalling:!0,imageInput:!1}},{id:"minimax-minimax-m2-her",name:"MiniMax: MiniMax M2-her",tooltip:"MiniMax: MiniMax M2-her by Zenmux",maxInputTokens:48e3,maxOutputTokens:16e3,model:"minimax/minimax-m2-her",capabilities:{toolCalling:!0,imageInput:!1}},{id:"moonshotai-kimi-k2-5",name:"MoonshotAI: Kimi K2.5",tooltip:"MoonshotAI: Kimi K2.5 by Zenmux",maxInputTokens:246144,maxOutputTokens:16e3,model:"moonshotai/kimi-k2.5",capabilities:{toolCalling:!0,imageInput:!0}},{id:"anthropic-claude-opus-4-6",name:"Anthropic: Claude Opus 4.6",tooltip:"Anthropic: Claude Opus 4.6 by Zenmux",maxInputTokens:984e3,maxOutputTokens:16e3,model:"anthropic/claude-opus-4.6",capabilities:{toolCalling:!0,imageInput:!0}},{id:"tencent-hunyuan-2-0-thinking",name:"Tencent: HY 2.0 Think",tooltip:"Tencent: HY 2.0 Think by Zenmux",maxInputTokens:112e3,maxOutputTokens:16e3,model:"tencent/hunyuan-2.0-thinking",capabilities:{toolCalling:!0,imageInput:!1}},{id:"stepfun-step-3-5-flash-free",name:"StepFun: Step 3.5 Flash (Free)",tooltip:"StepFun: Step 3.5 Flash (Free) by Zenmux",maxInputTokens:24e4,maxOutputTokens:16e3,model:"stepfun/step-3.5-flash-free",capabilities:{toolCalling:!0,imageInput:!1}},{id:"stepfun-step-3-5-flash",name:"StepFun: Step 3.5 Flash",tooltip:"StepFun: Step 3.5 Flash by Zenmux",maxInputTokens:24e4,maxOutputTokens:16e3,model:"stepfun/step-3.5-flash",capabilities:{toolCalling:!0,imageInput:!1}},{id:"z-ai-glm-5",name:"Z.AI: GLM 5",tooltip:"Z.AI: GLM 5 by Zenmux",maxInputTokens:184e3,maxOutputTokens:16e3,model:"z-ai/glm-5",capabilities:{toolCalling:!0,imageInput:!1}},{id:"inclusionai-ming-flash-omni-2-0",name:"inclusionAI: Ming-flash-omni-2.0",tooltip:"inclusionAI: Ming-flash-omni-2.0 by Zenmux",maxInputTokens:48e3,maxOutputTokens:16e3,model:"inclusionai/ming-flash-omni-2.0",capabilities:{toolCalling:!0,imageInput:!0}},{id:"minimax-minimax-m2-5",name:"MiniMax: MiniMax M2.5",tooltip:"MiniMax: MiniMax M2.5 by Zenmux",maxInputTokens:188800,maxOutputTokens:16e3,model:"minimax/minimax-m2.5",capabilities:{toolCalling:!0,imageInput:!1}},{id:"minimax-minimax-m2-5-lightning",name:"MiniMax: MiniMax M2.5 highspeed",tooltip:"MiniMax: MiniMax M2.5 highspeed by Zenmux",maxInputTokens:188800,maxOutputTokens:16e3,model:"minimax/minimax-m2.5-lightning",capabilities:{toolCalling:!0,imageInput:!1}}]}});var ECt,yCt=q(()=>{ECt={displayName:"ZhipuAI",baseUrl:"https://api.z.ai/api/paas/v4",apiKeyTemplate:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx.xxxxxxxxxxxxxxxx",models:[{id:"glm-4.5",name:"GLM-4.5",tooltip:"glm-4.5 by ZhipuAI",maxInputTokens:1e5,maxOutputTokens:28e3,model:"glm-4.5",sdkMode:"openai",baseUrl:"https://api.z.ai/api/paas/v4",capabilities:{toolCalling:!0,imageInput:!1}},{id:"glm-4.5-air",name:"GLM-4.5-Air",tooltip:"glm-4.5-air by ZhipuAI",maxInputTokens:1e5,maxOutputTokens:28e3,model:"glm-4.5-air",sdkMode:"openai",baseUrl:"https://api.z.ai/api/paas/v4",capabilities:{toolCalling:!0,imageInput:!1}},{id:"glm-4.6",name:"GLM-4.6",tooltip:"glm-4.6 by ZhipuAI",maxInputTokens:186e3,maxOutputTokens:16752,model:"glm-4.6",sdkMode:"openai",baseUrl:"https://api.z.ai/api/paas/v4",capabilities:{toolCalling:!0,imageInput:!1}},{id:"glm-4.7",name:"GLM-4.7",tooltip:"glm-4.7 by ZhipuAI",maxInputTokens:186e3,maxOutputTokens:16752,model:"glm-4.7",sdkMode:"openai",baseUrl:"https://api.z.ai/api/paas/v4",capabilities:{toolCalling:!0,imageInput:!1}},{id:"glm-5",name:"GLM-5 (Latest)",tooltip:"glm-5 by ZhipuAI",maxInputTokens:186e3,maxOutputTokens:16752,model:"glm-5",sdkMode:"openai",baseUrl:"https://api.z.ai/api/paas/v4",capabilities:{toolCalling:!0,imageInput:!1}},{id:"glm-4.7-flash",name:"GLM-4.7-Flash (Free, 1 Concurrent)",tooltip:"glm-4.7-flash by ZhipuAI",maxInputTokens:186e3,maxOutputTokens:16752,model:"glm-4.7-flash",sdkMode:"openai",baseUrl:"https://api.z.ai/api/paas/v4",capabilities:{toolCalling:!0,imageInput:!1}},{id:"glm-4.7-flashx",name:"GLM-4.7-FlashX (Paid)",tooltip:"glm-4.7-flashx by ZhipuAI",maxInputTokens:186e3,maxOutputTokens:16752,model:"glm-4.7-flashx",sdkMode:"openai",baseUrl:"https://api.z.ai/api/paas/v4",capabilities:{toolCalling:!0,imageInput:!1}}]}});var wxe={};Xs(wxe,{configProviders:()=>Rd});var o0n,Rd,Gg=q(()=>{"use strict";Vbt();Gbt();Wbt();Ybt();Zbt();Xbt();tCt();nCt();oCt();aCt();lCt();dCt();pCt();mCt();_Ct();yCt();o0n={zhipu:ECt,minimax:sCt,moonshot:uCt,deepseek:Jbt,codex:Kbt,antigravity:Hbt,chutes:zbt,opencode:fCt,ollama:hCt,qwencli:gCt,geminicli:eCt,huggingface:rCt,lightningai:iCt,deepinfra:Qbt,mistral:cCt,zenmux:vCt},Rd=o0n});var gO,Hs,gu=q(()=>{"use strict";gO=yt(require("vscode"));bi();Hs=class t{static context;static builtinProviders=null;static initialize(e){t.context=e}static async getBuiltinProviders(){if(t.builtinProviders!==null)return t.builtinProviders;try{let{configProviders:e}=await Promise.resolve().then(()=>(Gg(),wxe));t.builtinProviders=new Set(Object.keys(e))}catch(e){ve.warn("Failed to get built-in provider list:",e),t.builtinProviders=new Set}return t.builtinProviders}static getSecretKey(e){return`${e}.apiKey`}static async hasValidApiKey(e){let r=t.getSecretKey(e),n=await t.context.secrets.get(r);return n!==void 0&&n.trim().length>0}static async getApiKey(e){let r=t.getSecretKey(e);return await t.context.secrets.get(r)}static validateApiKey(e,r){return!e||e.trim().length===0?{isValid:!0,isEmpty:!0}:{isValid:!0}}static async setApiKey(e,r){let n=t.getSecretKey(e);await t.context.secrets.store(n,r)}static async deleteApiKey(e){let r=t.getSecretKey(e);await t.context.secrets.delete(r)}static async ensureApiKey(e,r,n=!0){if(await t.hasValidApiKey(e))return!0;if((await t.getBuiltinProviders()).has(e)){let a=`chp.${e}.setApiKey`;await gO.commands.executeCommand(a)}else await t.promptAndSetApiKey(e,e,"sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx");let s=await t.hasValidApiKey(e);if(!s&&n)throw new Error(`API key required to use ${r} model`);return s}static processCustomHeader(e,r){if(!e)return{};let n={};for(let[o,s]of Object.entries(e)){let a=s.replace(/\$\{\s*APIKEY\s*\}/gi,r);n[o]=a}return n}static async promptAndSetApiKey(e,r,n){let o=await gO.window.showInputBox({prompt:`Please enter your ${r} API key (leave empty to clear key)`,password:!0,placeHolder:n});o!==void 0&&(t.validateApiKey(o,e).isEmpty?(await t.deleteApiKey(e),gO.window.showInformationMessage(`${r} API key cleared`)):(await t.setApiKey(e,o.trim()),gO.window.showInformationMessage(`${r} API key set`)),ve.debug(`API key updated: ${e}`))}}});var Ixe,fc,_u=q(()=>{"use strict";Ixe=yt(require("vscode"));Gg();bi();fc=class t{static CONFIG_SECTION="chp";static cache=null;static configListener=null;static initialize(){return t.configListener&&t.configListener.dispose(),t.configListener=Ixe.workspace.onDidChangeConfiguration(e=>{e.affectsConfiguration(t.CONFIG_SECTION)&&(t.cache=null,ve.info("Copilot ++ updated, cache cleared"))}),ve.debug("Configuration manager initialized"),t.configListener}static getConfig(){if(t.cache)return t.cache;let e=Ixe.workspace.getConfiguration(t.CONFIG_SECTION),r=t.buildProviderOverrides(e);return t.cache={temperature:t.validateTemperature(e.get("temperature",.1)),topP:t.validateTopP(e.get("topP",1)),maxTokens:t.validateMaxTokens(e.get("maxTokens",256e3)),rememberLastModel:e.get("rememberLastModel",!0),zhipu:{search:{enableMCP:e.get("zhipu.search.enableMCP",!0)},endpoint:e.get("zhipu.endpoint","open.bigmodel.cn"),plan:e.get("zhipu.plan","coding"),thinking:e.get("zhipu.thinking","auto"),clearThinking:e.get("zhipu.clearThinking",!0)},minimax:{endpoint:e.get("minimax.endpoint","minimaxi.com")},fimCompletion:{enabled:e.get("fimCompletion.enabled",!1),debounceMs:t.validateNESDebounceMs(e.get("fimCompletion.debounceMs",500)),timeoutMs:t.validateNESTimeoutMs(e.get("fimCompletion.timeoutMs",5e3)),modelConfig:{provider:e.get("fimCompletion.modelConfig.provider",""),baseUrl:e.get("fimCompletion.modelConfig.baseUrl",""),model:e.get("fimCompletion.modelConfig.model",""),maxTokens:t.validateNESMaxTokens(e.get("fimCompletion.modelConfig.maxTokens",200)),extraBody:e.get("fimCompletion.modelConfig.extraBody")}},nesCompletion:{enabled:e.get("nesCompletion.enabled",!1),debounceMs:t.validateNESDebounceMs(e.get("nesCompletion.debounceMs",500)),timeoutMs:t.validateNESTimeoutMs(e.get("nesCompletion.timeoutMs",5e3)),manualOnly:e.get("nesCompletion.manualOnly",!1),modelConfig:{provider:e.get("nesCompletion.modelConfig.provider",""),baseUrl:e.get("nesCompletion.modelConfig.baseUrl",""),model:e.get("nesCompletion.modelConfig.model",""),maxTokens:t.validateNESMaxTokens(e.get("nesCompletion.modelConfig.maxTokens",200)),extraBody:e.get("nesCompletion.modelConfig.extraBody")}},providerOverrides:r},ve.debug("Configuration loaded",t.cache),t.cache}static getTemperature(){return t.getConfig().temperature}static getTopP(){return t.getConfig().topP}static getMaxTokens(){return t.getConfig().maxTokens}static getRememberLastModel(){return t.getConfig().rememberLastModel}static getZhipuSearchConfig(){return t.getConfig().zhipu.search}static getZhipuConfig(){return t.getConfig().zhipu}static getZhipuEndpoint(){return t.getConfig().zhipu.endpoint}static getZhipuPlan(){return t.getConfig().zhipu.plan}static getZhipuThinking(){return t.getConfig().zhipu.thinking}static getZhipuClearThinking(){return t.getConfig().zhipu.clearThinking}static getMinimaxEndpoint(){return t.getConfig().minimax.endpoint}static getFIMConfig(){return t.getConfig().fimCompletion}static getNESConfig(){return t.getConfig().nesCompletion}static getMaxTokensForModel(e){let r=t.getMaxTokens();return Math.min(e,r)}static validateTemperature(e){return Number.isNaN(e)||e<0||e>2?(ve.warn(`Invalid temperature value: ${e}, using default value 0.1`),.1):e}static validateTopP(e){return Number.isNaN(e)||e<0||e>1?(ve.warn(`Invalid topP value: ${e}, using default value 1.0`),1):e}static validateMaxTokens(e){return Number.isNaN(e)||e<32||e>256e3?(ve.warn(`Invalid maxTokens value: ${e}, using default value 8192`),8192):Math.floor(e)}static validateNESDebounceMs(e){return Number.isNaN(e)||e<50||e>2e3?(ve.warn(`Invalid debounceMs value: ${e}, using default value 500`),500):Math.floor(e)}static validateNESTimeoutMs(e){return Number.isNaN(e)||e<1e3||e>3e4?(ve.warn(`Invalid timeoutMs value: ${e}, using default value 5000`),5e3):Math.floor(e)}static validateNESMaxTokens(e){return Number.isNaN(e)||e<50||e>16e3?(ve.warn(`Invalid NES maxTokens value: ${e}, using default value 200`),200):Math.floor(e)}static getConfigProvider(){return Rd}static getProviderOverrides(){return t.getConfig().providerOverrides}static buildProviderOverrides(e){let r=e.get("providerOverrides",{}),n={};for(let s of Object.keys(Rd)){let a=e.get(`${s}.baseUrl`,"").trim();a&&(n[s]={baseUrl:a})}let o={...n};for(let[s,a]of Object.entries(r)){let c=o[s]?{...o[s]}:{},l=a.baseUrl?.trim(),u={...c,...a};!l&&c.baseUrl&&(u.baseUrl=c.baseUrl),o[s]=u}return o}static applyProviderOverrides(e,r){let o=t.getProviderOverrides()[e];if(!o)return r;ve.info(`Applying provider ${e} configuration override`);let s=JSON.parse(JSON.stringify(r));if(o.baseUrl){s.baseUrl=o.baseUrl,ve.debug(`  Override baseUrl: ${o.baseUrl}`);for(let a of s.models)a.baseUrl=o.baseUrl}if(o.customHeader)for(let a of s.models)a.customHeader={...o.customHeader,...a.customHeader};if(o.models&&o.models.length>0)for(let a of o.models){let c=s.models.findIndex(l=>l.id===a.id);if(c>=0){let l=s.models[c];a.model!==void 0&&(l.model=a.model,ve.debug(`  Model ${a.id}: Override model = ${a.model}`)),a.maxInputTokens!==void 0&&(l.maxInputTokens=a.maxInputTokens,ve.debug(`  Model ${a.id}: Override maxInputTokens = ${a.maxInputTokens}`)),a.maxOutputTokens!==void 0&&(l.maxOutputTokens=a.maxOutputTokens,ve.debug(`  Model ${a.id}: Override maxOutputTokens = ${a.maxOutputTokens}`)),a.sdkMode!==void 0&&(l.sdkMode=a.sdkMode,ve.debug(`  Model ${a.id}: Override sdkMode = ${a.sdkMode}`)),a.baseUrl!==void 0&&(l.baseUrl=a.baseUrl,ve.debug(`  Model ${a.id}: Override baseUrl = ${a.baseUrl}`)),a.capabilities&&(l.capabilities={...l.capabilities,...a.capabilities},ve.debug(`  Model ${a.id}: Merge capabilities = ${JSON.stringify(l.capabilities)}`)),a.customHeader&&(l.customHeader={...l.customHeader,...a.customHeader},ve.debug(`  Model ${a.id}: Merge customHeader = ${JSON.stringify(l.customHeader)}`)),a.extraBody&&(l.extraBody={...l.extraBody,...a.extraBody},ve.debug(`  Model ${a.id}: Merge extraBody = ${JSON.stringify(l.extraBody)}`)),a.outputThinking!==void 0&&(l.outputThinking=a.outputThinking,ve.debug(`  Model ${a.id}: Override outputThinking = ${a.outputThinking}`))}else{let l=a,u={id:a.id,name:l?.name||a.id,tooltip:l?.tooltip||`User custom model: ${a.id}`,maxInputTokens:a.maxInputTokens||128e3,maxOutputTokens:a.maxOutputTokens||8192,capabilities:{toolCalling:a.capabilities?.toolCalling??!1,imageInput:a.capabilities?.imageInput??!1},...a.model&&{model:a.model},...a.sdkMode&&{sdkMode:a.sdkMode},...a.baseUrl&&{baseUrl:a.baseUrl},...o.baseUrl&&!a.baseUrl&&{baseUrl:o.baseUrl},...a.customHeader&&{customHeader:a.customHeader},...o.customHeader&&!a.customHeader&&{customHeader:o.customHeader},...a.extraBody&&{extraBody:a.extraBody},...a.outputThinking!==void 0&&{outputThinking:a.outputThinking}};s.models.push(u),ve.info(`  Add new model: ${a.id}`)}}if(o.customHeader){for(let a of s.models)a.customHeader?a.customHeader={...o.customHeader,...a.customHeader}:a.customHeader={...o.customHeader};ve.debug(`  Provider ${e}: Merge provider level customHeader into all models`)}return s}static dispose(){t.configListener&&(t.configListener.dispose(),t.configListener=null),t.cache=null,ve.trace("Configuration manager disposed")}}});var xAt,CAt,AAt,Od,a2=q(()=>{"use strict";xAt=yt(require("vscode"));bi();CAt="chp.accountQuotaCache",AAt=1,Od=class t{static instance;context;cache=new Map;_onQuotaStateChange=new xAt.EventEmitter;onQuotaStateChange=this._onQuotaStateChange.event;constructor(){}static initialize(e){return t.instance||(t.instance=new t),t.instance.context=e,t.instance.loadFromStorage(),ve.info("AccountQuotaCache initialized"),t.instance}static getInstance(){return t.instance||(t.instance=new t),t.instance}loadFromStorage(){if(this.context)try{let e=this.context.globalState.get(CAt);if(e&&e.version===AAt){this.cache.clear();for(let r of e.accounts)r.quotaExceeded&&r.quotaResetAt&&Date.now()>=r.quotaResetAt&&(r.quotaExceeded=!1,r.quotaResetAt=void 0,r.backoffLevel=0,r.lastError=void 0),this.cache.set(r.accountId,r);ve.debug(`Loaded ${this.cache.size} account quota states from storage`)}}catch(e){ve.error("Failed to load quota cache from storage:",e)}}async saveToStorage(){if(this.context)try{let e={version:AAt,accounts:Array.from(this.cache.values()),updatedAt:Date.now()};await this.context.globalState.update(CAt,e),ve.debug("Quota cache saved to storage")}catch(e){ve.error("Failed to save quota cache to storage:",e)}}getOrCreateState(e,r,n){e||(ve.warn(`[AccountQuotaCache] getOrCreateState called with empty accountId! provider: ${r}, accountName: ${n}`),ve.warn("[AccountQuotaCache] Stack trace:",new Error().stack));let o=this.cache.get(e);return o?n&&o.accountName!==n&&(o.accountName=n):(ve.debug(`[AccountQuotaCache] Creating new state for accountId: ${e}, provider: ${r}`),o={accountId:e,accountName:n,provider:r,quotaExceeded:!1,backoffLevel:0,updatedAt:Date.now(),successCount:0,failureCount:0},this.cache.set(e,o)),o}async markQuotaExceeded(e,r,n){if(!e||e==="undefined"){ve.error(`[AccountQuotaCache] markQuotaExceeded called with invalid accountId: "${e}", provider: ${r}, accountName: ${n?.accountName}`),ve.error("[AccountQuotaCache] Stack trace:",new Error().stack);return}ve.debug(`[AccountQuotaCache] markQuotaExceeded - accountId: ${e}, provider: ${r}, accountName: ${n?.accountName}`);let o=this.getOrCreateState(e,r,n?.accountName),{cooldown:s,newLevel:a}=this.calculateCooldown(o.backoffLevel,n?.resetDelayMs);o.quotaExceeded=!0,o.quotaResetAt=Date.now()+s,o.backoffLevel=a,o.affectedModel=n?.affectedModel,o.lastError=n?.error||`Quota exceeded, retry after ${Math.round(s/1e3)}s`,o.updatedAt=Date.now(),o.failureCount++,o.lastFailureAt=Date.now(),ve.debug(`[AccountQuotaCache] Updated state for ${e}: failureCount=${o.failureCount}, quotaResetAt=${o.quotaResetAt}`),await this.saveToStorage(),this._onQuotaStateChange.fire({accountId:e,provider:r,state:o}),ve.debug(`[AccountQuotaCache] Account ${e} quota exceeded, cooldown ${Math.round(s/1e3)}s (level ${a})`)}async clearQuotaExceeded(e){let r=this.cache.get(e);r&&(r.quotaExceeded=!1,r.quotaResetAt=void 0,r.backoffLevel=0,r.lastError=void 0,r.updatedAt=Date.now(),await this.saveToStorage(),this._onQuotaStateChange.fire({accountId:e,provider:r.provider,state:r}))}async recordSuccess(e,r,n){if(!e||e==="undefined"){ve.error(`[AccountQuotaCache] recordSuccess called with invalid accountId: "${e}", provider: ${r}, accountName: ${n}`),ve.error("[AccountQuotaCache] Stack trace:",new Error().stack);return}ve.debug(`[AccountQuotaCache] recordSuccess - accountId: ${e}, provider: ${r}, accountName: ${n}`);let o=this.getOrCreateState(e,r,n);ve.debug(`[AccountQuotaCache] Current state for ${e}: successCount=${o.successCount}, failureCount=${o.failureCount}`),o.quotaExceeded&&(o.quotaExceeded=!1,o.quotaResetAt=void 0,o.backoffLevel=0,o.lastError=void 0),o.successCount++,o.lastSuccessAt=Date.now(),o.updatedAt=Date.now(),ve.debug(`[AccountQuotaCache] Updated state for ${e}: successCount=${o.successCount}`),await this.saveToStorage(),this._onQuotaStateChange.fire({accountId:e,provider:r,state:o})}async recordFailure(e,r,n,o){let s=this.getOrCreateState(e,r,o);s.failureCount++,s.lastFailureAt=Date.now(),s.lastError=n,s.updatedAt=Date.now(),await this.saveToStorage(),this._onQuotaStateChange.fire({accountId:e,provider:r,state:s})}isInCooldown(e){let r=this.cache.get(e);return!r||!r.quotaExceeded?!1:r.quotaResetAt&&Date.now()>=r.quotaResetAt?(this.clearQuotaExceeded(e),!1):!0}getRemainingCooldown(e){let r=this.cache.get(e);if(!r||!r.quotaExceeded||!r.quotaResetAt)return 0;let n=r.quotaResetAt-Date.now();return n>0?n:0}getState(e){return this.cache.get(e)}getAllStates(){let e=Array.from(this.cache.values());return ve.debug(`[AccountQuotaCache] getAllStates returning ${e.length} states:`,e.map(r=>({accountId:r.accountId,provider:r.provider,successCount:r.successCount,failureCount:r.failureCount}))),e}getStatesByProvider(e){return Array.from(this.cache.values()).filter(r=>r.provider===e)}getAvailableAccounts(e){return Array.from(this.cache.values()).filter(r=>r.provider===e&&!this.isInCooldown(r.accountId)).map(r=>r.accountId)}getAccountWithShortestCooldown(e){return this.getStatesByProvider(e).filter(n=>n.quotaExceeded&&n.quotaResetAt).sort((n,o)=>(n.quotaResetAt||0)-(o.quotaResetAt||0))[0]?.accountId}calculateCooldown(e,r){e<0&&(e=0);let s=1e3*2**e;return s<1e3&&(s=1e3),r&&r>s&&(s=r),s>=18e5?{cooldown:18e5,newLevel:e}:{cooldown:s,newLevel:e+1}}async removeAccount(e){this.cache.has(e)&&(this.cache.delete(e),await this.saveToStorage())}async clearAll(){this.cache.clear(),await this.saveToStorage()}dispose(){this._onQuotaStateChange.dispose()}}});var aZ=q(()=>{"use strict"});var ywe,bii,Ewe=q(()=>{"use strict";ywe=yt(require("vscode"));aZ();gu();_u();Gg();bii="antigravity"});var RAt,IAt,PAt,Twe,OAt=q(()=>{"use strict";RAt=yt(require("vscode"));aZ();bi();a2();IAt="chp.accounts",PAt=1,Twe=class t{static instance;context;accounts=new Map;activeAccounts={};routingConfig={};_onAccountChange=new RAt.EventEmitter;onAccountChange=this._onAccountChange.event;static providerConfigs=new Map([["antigravity",{supportsMultiAccount:!0,supportsOAuth:!0,supportsApiKey:!1}],["zhipu",{supportsMultiAccount:!0,supportsOAuth:!1,supportsApiKey:!0}],["moonshot",{supportsMultiAccount:!0,supportsOAuth:!1,supportsApiKey:!0}],["minimax",{supportsMultiAccount:!0,supportsOAuth:!1,supportsApiKey:!0}],["compatible",{supportsMultiAccount:!0,supportsOAuth:!1,supportsApiKey:!0}],["deepseek",{supportsMultiAccount:!0,supportsOAuth:!1,supportsApiKey:!0}],["deepinfra",{supportsMultiAccount:!0,supportsOAuth:!1,supportsApiKey:!0}],["chutes",{supportsMultiAccount:!0,supportsOAuth:!1,supportsApiKey:!0}],["opencode",{supportsMultiAccount:!0,supportsOAuth:!1,supportsApiKey:!0}],["huggingface",{supportsMultiAccount:!0,supportsOAuth:!1,supportsApiKey:!0}],["mistral",{supportsMultiAccount:!0,supportsOAuth:!1,supportsApiKey:!0}],["openai",{supportsMultiAccount:!0,supportsOAuth:!1,supportsApiKey:!0}],["kimi",{supportsMultiAccount:!0,supportsOAuth:!1,supportsApiKey:!0}],["minimax-coding",{supportsMultiAccount:!0,supportsOAuth:!1,supportsApiKey:!0}],["qwencli",{supportsMultiAccount:!0,supportsOAuth:!0,supportsApiKey:!1}],["geminicli",{supportsMultiAccount:!0,supportsOAuth:!0,supportsApiKey:!1}]]);constructor(e){this.context=e}static initialize(e){return t.instance||(t.instance=new t(e),t.instance.loadFromStorage(),ve.info("AccountManager initialized")),t.instance}static getInstance(){if(!t.instance)throw new Error("AccountManager not initialized. Call initialize() first.");return t.instance}generateAccountId(){let e=Date.now().toString(36),r=Math.random().toString(36).substring(2,8);return`acc_${e}_${r}`}async loadFromStorage(){try{let e=this.context.globalState.get(IAt);if(e&&e.version===PAt){this.accounts.clear();for(let r of e.accounts)this.accounts.set(r.id,r);this.activeAccounts=e.activeAccounts||{},this.routingConfig=e.routingConfig||{},this.syncIsDefaultWithActiveAccounts(),ve.debug(`Loaded ${this.accounts.size} accounts from storage`)}}catch(e){ve.error("Failed to load accounts from storage:",e)}}syncIsDefaultWithActiveAccounts(){for(let e of this.accounts.values())e.isDefault=!1;for(let[e,r]of Object.entries(this.activeAccounts)){let n=this.accounts.get(r);n&&n.provider===e&&(n.isDefault=!0)}}async saveToStorage(){try{let e={version:PAt,accounts:Array.from(this.accounts.values()),activeAccounts:this.activeAccounts,routingConfig:this.routingConfig};await this.context.globalState.update(IAt,e),ve.debug("Accounts saved to storage")}catch(e){ve.error("Failed to save accounts to storage:",e)}}async saveCredentials(e,r){let n=`chp.account.${e}.credentials`;await this.context.secrets.store(n,JSON.stringify(r))}async getCredentials(e){let r=`chp.account.${e}.credentials`,n=await this.context.secrets.get(r);if(n)try{return JSON.parse(n)}catch{return}}async deleteCredentials(e){let r=`chp.account.${e}.credentials`;await this.context.secrets.delete(r)}async addApiKeyAccount(e,r,n,o){try{let s=this.generateAccountId(),a=new Date().toISOString(),c={id:s,displayName:r,provider:e,authType:"apiKey",status:"active",createdAt:a,updatedAt:a,metadata:o?.metadata,isDefault:this.getAccountsByProvider(e).length===0},l={apiKey:n,endpoint:o?.endpoint,customHeaders:o?.customHeaders};return this.accounts.set(s,c),await this.saveCredentials(s,l),await this.saveToStorage(),c.isDefault&&(this.activeAccounts[e]=s),this._onAccountChange.fire({type:"added",account:c,provider:e}),ve.info(`Added API Key account: ${r} for ${e}`),{success:!0,account:c}}catch(s){let a=s instanceof Error?s.message:"Unknown error";return ve.error("Failed to add API Key account:",s),{success:!1,error:a}}}async addOAuthAccount(e,r,n,o,s){try{let a=this.generateAccountId(),c=new Date().toISOString(),l={id:a,displayName:r,provider:e,authType:"oauth",email:n,status:"active",createdAt:c,updatedAt:c,expiresAt:o.expiresAt,metadata:s,isDefault:this.getAccountsByProvider(e).length===0};return this.accounts.set(a,l),await this.saveCredentials(a,o),await this.saveToStorage(),l.isDefault&&(this.activeAccounts[e]=a),this._onAccountChange.fire({type:"added",account:l,provider:e}),ve.info(`Added OAuth account: ${r} (${n}) for ${e}`),{success:!0,account:l}}catch(a){let c=a instanceof Error?a.message:"Unknown error";return ve.error("Failed to add OAuth account:",a),{success:!1,error:c}}}async removeAccount(e){let r=this.accounts.get(e);if(!r)return ve.warn(`Account not found: ${e}`),!1;try{if(await this.deleteCredentials(e),this.accounts.delete(e),this.activeAccounts[r.provider]===e){let o=this.getAccountsByProvider(r.provider);o.length>0?this.activeAccounts[r.provider]=o[0].id:delete this.activeAccounts[r.provider]}let n=this.routingConfig[r.provider];if(n?.modelAssignments)for(let[o,s]of Object.entries(n.modelAssignments))s===e&&delete n.modelAssignments[o];try{await Od.getInstance().removeAccount(e)}catch{}return await this.saveToStorage(),this._onAccountChange.fire({type:"removed",account:r,provider:r.provider}),ve.info(`Removed account: ${r.displayName}`),!0}catch(n){return ve.error("Failed to remove account:",n),!1}}async switchAccount(e,r){let n=this.accounts.get(r);if(!n||n.provider!==e)return ve.warn(`Account not found or provider mismatch: ${r}`),!1;try{let o=this.activeAccounts[e];if(o){let s=this.accounts.get(o);s&&(s.isDefault=!1)}return this.activeAccounts[e]=r,n.isDefault=!0,n.updatedAt=new Date().toISOString(),await this.saveToStorage(),this._onAccountChange.fire({type:"switched",account:n,provider:e}),ve.info(`Switched to account: ${n.displayName} for ${e}`),!0}catch(o){return ve.error("Failed to switch account:",o),!1}}getActiveAccount(e){let r=this.activeAccounts[e];if(r)return this.accounts.get(r)}async getActiveCredentials(e){let r=this.getActiveAccount(e);if(r)return this.getCredentials(r.id)}async getActiveApiKey(e){let r=await this.getActiveCredentials(e);if(r&&"apiKey"in r)return r.apiKey}async getActiveOAuthToken(e){let r=await this.getActiveCredentials(e);if(r&&"accessToken"in r)return r.accessToken}getAccountsByProvider(e){return Array.from(this.accounts.values()).filter(r=>r.provider===e)}getAllAccounts(){return Array.from(this.accounts.values())}getAccount(e){return this.accounts.get(e)}async updateAccount(e,r){let n=this.accounts.get(e);if(!n)return!1;try{return Object.assign(n,r,{updatedAt:new Date().toISOString()}),await this.saveToStorage(),this._onAccountChange.fire({type:"updated",account:n,provider:n.provider}),!0}catch(o){return ve.error("Failed to update account:",o),!1}}async updateCredentials(e,r){let n=this.accounts.get(e);if(!n)return!1;try{return await this.saveCredentials(e,r),n.updatedAt=new Date().toISOString(),"expiresAt"in r&&(n.expiresAt=r.expiresAt),await this.saveToStorage(),!0}catch(o){return ve.error("Failed to update credentials:",o),!1}}getModelAccountAssignments(e){return{...this.routingConfig[e]?.modelAssignments||{}}}getAccountIdForModel(e,r){return this.routingConfig[e]?.modelAssignments?.[r]}async setAccountForModel(e,r,n){let o=this.ensureProviderRoutingConfig(e);n?o.modelAssignments[r]=n:delete o.modelAssignments[r],await this.saveToStorage()}getLoadBalanceEnabled(e){let r=e==="antigravity";return this.routingConfig[e]?.loadBalanceEnabled??r}async setLoadBalanceEnabled(e,r){let n=this.ensureProviderRoutingConfig(e);n.loadBalanceEnabled=r,await this.saveToStorage()}ensureProviderRoutingConfig(e){return this.routingConfig[e]?this.routingConfig[e].modelAssignments||(this.routingConfig[e].modelAssignments={}):this.routingConfig[e]={modelAssignments:{},loadBalanceEnabled:!1},this.routingConfig[e]}static supportsMultiAccount(e){return t.providerConfigs.get(e)?.supportsMultiAccount??!0}static getProviderConfig(e){return t.providerConfigs.get(e)??{supportsMultiAccount:!0,supportsOAuth:!1,supportsApiKey:!0}}static registerProviderConfig(e,r){t.providerConfigs.set(e,r)}isAccountExpired(e){let r=this.accounts.get(e);return!r||!r.expiresAt?!1:new Date(r.expiresAt)<new Date}async markAccountExpired(e){await this.updateAccount(e,{status:"expired"})}async markAccountError(e,r){await this.updateAccount(e,{status:"error",metadata:{...this.accounts.get(e)?.metadata,lastError:r}})}isAccountQuotaLimited(e){try{return Od.getInstance().isInCooldown(e)}catch{return!1}}getAccountQuotaCooldown(e){try{return Od.getInstance().getRemainingCooldown(e)}catch{return 0}}getAvailableAccountsForProvider(e){return this.getAccountsByProvider(e).filter(n=>n.status==="active"&&!this.isAccountExpired(n.id)&&!this.isAccountQuotaLimited(n.id))}getNextAvailableAccount(e,r){let n=this.getAvailableAccountsForProvider(e);if(n.length===0){try{let s=Od.getInstance().getAccountWithShortestCooldown(e);if(s)return this.accounts.get(s)}catch{}return}if(n.length===0){try{let s=Od.getInstance().getAccountWithShortestCooldown(e);if(s)return this.accounts.get(s)}catch{}return}if(r){let o=n.findIndex(s=>s.id===r);if(o>=0&&o<n.length-1)return n[o+1]}return n[0]}dispose(){this._onAccountChange.dispose()}}});var By,UD=q(()=>{"use strict";By={aihubmix:{displayName:"AIHubMix",customHeader:{"APP-Code":"TFUV4759"},openai:{baseUrl:"https://aihubmix.com/v1"},anthropic:{baseUrl:"https://aihubmix.com",extraBody:{top_p:null}}},aiping:{displayName:"AIPing"},codex:{displayName:"Codex"},modelscope:{displayName:"ModelScope"},openrouter:{displayName:"OpenRouter"},siliconflow:{displayName:"SiliconFlow"},tbox:{displayName:"Bailian"},chutes:{displayName:"Chutes"},opencode:{displayName:"OpenCode"},huggingface:{displayName:"Hugging Face"},lightningai:{displayName:"Lightning AI",openai:{baseUrl:"https://lightning.ai/api/v1"}},zenmux:{displayName:"Zenmux",openai:{baseUrl:"https://zenmux.ai/api/v1"}},deepinfra:{displayName:"DeepInfra",openai:{baseUrl:"https://api.deepinfra.com/v1/openai"}},mistral:{displayName:"Mistral AI",openai:{baseUrl:"https://api.mistral.ai/v1"}},qwencli:{displayName:"Qwen Code CLI"}}});var LAt,kAt=q(()=>{LAt=`body {
	font-family: var(--vscode-font-family);
	font-size: var(--vscode-font-size);
	color: var(--vscode-foreground);
	background-color: var(--vscode-editor-background);
	padding: 15px 15px 60px 15px;
	line-height: 1.4;
	margin: 0;
}

.container {
	max-width: 680px;
	margin: 20px auto 80px;
}

.form-group {
	margin-bottom: 15px;
}

.form-group.no-bottom {
	margin-bottom: 0;
}

label {
	display: block;
	margin-bottom: 3px;
	font-weight: 500;
	color: var(--vscode-foreground);
	font-size: 1em;
}

.field-name {
	font-weight: normal;
	color: var(--vscode-descriptionForeground);
	font-size: 1em;
	margin-left: 4px;
}

input,
select,
textarea {
	width: 100%;
	padding: 6px 8px;
	border: 1px solid var(--vscode-input-border);
	background-color: var(--vscode-input-background);
	color: var(--vscode-input-foreground);
	border-radius: 3px;
	font-family: var(--vscode-font-family);
	font-size: 1em;
	box-sizing: border-box;
}

input.invalid,
select.invalid,
textarea.invalid {
	border-color: var(--vscode-inputValidation-errorBorder);
}

input[list] {
	background-color: var(--vscode-input-background);
	color: var(--vscode-input-foreground);
}

input:focus,
select:focus,
textarea:focus {
	outline: none;
	border-color: var(--vscode-focusBorder);
}

textarea {
	resize: none;
	min-height: 60px;
	font-family: monospace;
	overflow: hidden;
	box-sizing: border-box;
}

.checkbox-group {
	display: flex;
	align-items: center;
	gap: 8px;
	margin: 0;
}

input[type="checkbox"] {
	width: auto;
	margin: 0;
}

.button-group {
	position: fixed;
	bottom: 0;
	left: 0;
	right: 0;
	margin: 0;
	padding: 10px 15px;
	border-top: 1px solid var(--vscode-panel-border);
	background-color: var(--vscode-editor-background);
	z-index: 100;
}

.button-group-inner {
	max-width: 650px;
	margin: 0 auto;
	width: 100%;
	display: flex;
	gap: 10px;
	justify-content: space-between;
}

button {
	padding: 8px 16px;
	border: none;
	border-radius: 3px;
	cursor: pointer;
	font-size: 1.1em;
	min-width: 80px;
}

.primary-button {
	background-color: var(--vscode-button-background);
	color: var(--vscode-button-foreground);
}

.primary-button:hover {
	background-color: var(--vscode-button-hoverBackground);
}

.secondary-button {
	background-color: var(--vscode-button-secondaryBackground);
	color: var(--vscode-button-secondaryForeground);
}

.secondary-button:hover {
	background-color: var(--vscode-button-secondaryHoverBackground);
}

.delete-button {
	background-color: var(--vscode-inputValidation-errorBackground);
	color: var(--vscode-inputValidation-errorForeground);
}

.delete-button:hover {
	opacity: 0.8;
}

.section {
	margin-bottom: 15px;
	padding: 12px;
	border: 1px solid var(--vscode-panel-border);
	border-radius: 4px;
}

.section h3 {
	margin: 0 0 10px 0;
	color: var(--vscode-foreground);
	font-size: 1.2em;
	font-weight: 600;
}

.help-text {
	font-size: 1em;
	color: var(--vscode-descriptionForeground);
	margin-top: 2px;
}

.help-text.detailed {
	white-space: pre-wrap;
	word-wrap: break-word;
}

.readonly {
	background-color: var(--vscode-inputValidation-infoBackground);
	color: var(--vscode-inputValidation-infoForeground);
}

.json-input {
	font-family: monospace;
	font-size: 1em;
	min-height: 80px;
	padding: 8px;
	background-color: var(--vscode-editor-background);
	border: 2px solid var(--vscode-input-border);
	line-height: 1.5;
	tab-size: 2;
	resize: none;
	overflow: hidden;
	box-sizing: border-box;
}

.json-input:focus {
	border-color: var(--vscode-focusBorder);
}

.json-input.json-invalid {
	border-color: var(--vscode-inputValidation-errorBorder);
}

.json-container {
	position: relative;
}

.json-toolbar {
	display: flex;
	gap: 8px;
	margin-bottom: 6px;
	align-items: center;
}

.json-button {
	padding: 4px 10px;
	font-size: 1em;
	border: 1px solid var(--vscode-button-border);
	border-radius: 2px;
	background-color: var(--vscode-button-secondaryBackground);
	color: var(--vscode-button-secondaryForeground);
	cursor: pointer;
	transition: background-color 0.2s;
}

.json-button:hover {
	background-color: var(--vscode-button-secondaryHoverBackground);
}

.json-status {
	display: flex;
	align-items: center;
	gap: 6px;
	font-size: 1em;
	height: 16px;
}

.json-status-indicator {
	display: inline-block;
	width: 8px;
	height: 8px;
	border-radius: 50%;
	background-color: var(--vscode-descriptionForeground);
}

.json-status-indicator.invalid {
	background-color: var(--vscode-inputValidation-errorForeground);
}

.json-error {
	color: var(--vscode-testing-failed-foreground);
	font-size: 1em;
	margin-top: 2px;
	display: none;
}

.json-error.show {
	display: block;
}

.provider-dropdown {
	position: relative;
}

.provider-input {
	position: relative;
	z-index: 10;
}

.provider-list {
	position: absolute;
	top: 100%;
	left: 0;
	right: 0;
	background-color: var(--vscode-input-background);
	border: 1px solid var(--vscode-input-border);
	border-top: none;
	border-radius: 0 0 3px 3px;
	max-height: 200px;
	overflow-y: auto;
	box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
	display: none;
	z-index: 1000;
	margin-top: -1px;
}

.provider-list.show {
	display: block;
}

.provider-list-item {
	padding: 6px 8px;
	cursor: pointer;
	color: var(--vscode-input-foreground);
	user-select: none;
}

.provider-list-item:hover {
	background-color: var(--vscode-list-hoverBackground);
}

.provider-list-item.selected {
	background-color: var(--vscode-list-activeSelectionBackground);
	color: var(--vscode-list-activeSelectionForeground);
}

/* Global error banner styles */
.error-banner {
	display: none;
	position: sticky;
	top: 0;
	left: 0;
	right: 0;
	padding: 12px 16px;
	background-color: var(--vscode-inputValidation-errorBackground);
	color: var(--vscode-inputValidation-errorForeground);
	border: 1px solid var(--vscode-inputValidation-errorBorder);
	border-radius: 4px;
	margin-bottom: 16px;
	align-items: center;
	justify-content: space-between;
	gap: 12px;
	z-index: 200;
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
	animation: slideDown 0.3s ease-out;
}

@keyframes slideDown {
	from {
		opacity: 0;
		transform: translateY(-10px);
	}

	to {
		opacity: 1;
		transform: translateY(0);
	}
}

.error-banner span {
	flex: 1;
	white-space: pre-wrap;
	word-wrap: break-word;
	font-size: 1em;
	line-height: 1.5;
}

.error-banner-close {
	background: transparent;
	color: var(--vscode-inputValidation-errorForeground);
	border: 1px solid var(--vscode-inputValidation-errorBorder);
	border-radius: 3px;
	padding: 4px 10px;
	font-size: 1.2em;
	cursor: pointer;
	min-width: auto;
	line-height: 1;
	flex-shrink: 0;
}

.error-banner-close:hover {
	background-color: rgba(255, 255, 255, 0.1);
}
`});var DAt,UAt=q(()=>{DAt=`\uFEFF/**
 * Model Editor - Client Script
 * Responsible for DOM creation, event binding and communication with VSCode
 */

// VSCode API
const vscode = acquireVsCodeApi();

// Type definitions
/**
 * @typedef {Object} Provider
 * @property {string} id - Provider ID
 * @property {string} name - Provider Name
 */

/**
 * @typedef {Object} ModelCapabilities
 * @property {boolean} toolCalling - Whether tool calling is supported
 * @property {boolean} imageInput - Whether image input is supported
 */

/**
 * @typedef {Object} ModelData
 * @property {string} id - Model ID
 * @property {string} name - Display Name
 * @property {string} [tooltip] - Description (optional)
 * @property {string} provider - Provider identifier
 * @property {string} [baseUrl] - API base URL (optional)
 * @property {string} [model] - Request model ID (optional)
 * @property {'openai'|'openai-sse'|'anthropic'} sdkMode - SDK compatibility mode
 * @property {number} maxInputTokens - Maximum input tokens
 * @property {number} maxOutputTokens - Maximum output tokens
 * @property {ModelCapabilities} capabilities - Capability configuration
 * @property {boolean} outputThinking - Whether to show thinking process in chat interface (recommended for thinking models)
 * @property {boolean} includeThinking - Whether to inject thinking content into context for multi-turn conversations (required for thinking models)
 * @property {Object} [customHeader] - Custom HTTP header (optional)
 * @property {Object} [extraBody] - Extra request body parameters (optional)
 */

// Global variables
/** @type {Provider[]} */
let allProviders = [];
/** @type {ModelData} */
let modelData = {};
/** @type {boolean} */
let isCreateMode = false;

/**
 * Initialize editor
 * @param {ModelData} data - Model data
 * @param {boolean} createMode - Whether it is in creation mode
 * @returns {void}
 */
function _initializeEditor(data, createMode) {
	modelData = data;
	isCreateMode = createMode;

	// Create DOM
	createDOM();

	// Bind events
	bindEvents();

	// Request providers list
	vscode.postMessage({ command: "getProviders" });

	// Initialize JSON validation
	validateJSON_UI("customHeader");
	validateJSON_UI("extraBody");
}

/**
 * Create DOM structure
 * @returns {void}
 */
function createDOM() {
	const container = document.getElementById("app");

	// Create basic information section
	const basicSection = createSection("Basic Information", [
		createFormGroup(
			"modelId",
			\`Model ID\${isCreateMode ? " *" : ""}\`,
			"id",
			"input",
			{
				type: "text",
				placeholder: "Example: zhipu:glm-4.6",
				value: modelData.id,
				readonly: !isCreateMode,
			},
			isCreateMode
				? "Unique model identifier, cannot be changed after creation"
				: "Unique model identifier, cannot be changed, please edit config file directly if modification needed.",
		),
		createFormGroup(
			"modelName",
			"Display Name *",
			"name",
			"input",
			{
				type: "text",
				placeholder: "Example: GLM-4.6 (Zhipu AI)",
				value: modelData.name,
			},
			"Name displayed in model selector",
		),
		createFormGroup(
			"modelTooltip",
			"Description",
			"tooltip",
			"textarea",
			{
				rows: 2,
				placeholder: "Detailed model description (optional)",
				value: modelData.tooltip,
			},
			"Tooltip displayed on hover",
		),
		createFormGroup(
			"requestModel",
			"Request Model ID",
			"model",
			"input",
			{
				type: "text",
				placeholder: "Example: gpt-4",
				value: modelData.model,
			},
			"Model ID used when making requests (optional), uses Model ID (id) value if left empty",
		),
	]);

	// Create API configuration section
	const apiSection = createSection("API Configuration", [
		createProviderFormGroup(),
		createFormGroup(
			"sdkMode",
			"SDK Mode",
			"sdkMode",
			"select",
			{
				options: [
					{
						value: "openai",
						label:
							"OpenAI SDK (use official SDK for streaming data processing)",
						selected: modelData.sdkMode === "openai",
					},
					{
						value: "openai-sse",
						label:
							"OpenAI SSE (use built-in compatible parser for streaming data processing)",
						selected: modelData.sdkMode === "openai-sse",
					},
					{
						value: "anthropic",
						label:
							"Anthropic SDK (use official SDK for streaming data processing)",
						selected: modelData.sdkMode === "anthropic",
					},
				],
			},
			"Compatibility mode used for model communication",
		),
		createFormGroup(
			"baseUrl",
			"BASE URL *",
			"baseUrl",
			"input",
			{
				type: "url",
				placeholder:
					"Example: https://api.openai.com/v1 or https://api.anthropic.com",
				value: modelData.baseUrl,
			},
			"Base URL address for API requests, must start with http:// or https://\\nExample: https://api.openai.com/v1 or https://api.anthropic.com",
		),
	]);

	// Create performance settings section
	const perfSection = createSection("Model Performance", [
		createFormGroup(
			"maxInputTokens",
			"Max Input Tokens",
			"maxInputTokens",
			"input",
			{
				type: "number",
				min: 128,
				value: modelData.maxInputTokens,
			},
			"Maximum input context limit supported by the model",
		),
		createFormGroup(
			"maxOutputTokens",
			"Max Output Tokens",
			"maxOutputTokens",
			"input",
			{
				type: "number",
				min: 8,
				value: modelData.maxOutputTokens,
			},
			"Maximum output token limit supported by the model",
		),
	]);

	// Create capability configuration section
	const capSection = createSection("Model Capabilities", [
		createCheckboxFormGroup(
			"toolCalling",
			"Support Tool Calling",
			"capabilities.toolCalling",
			modelData.toolCalling,
		),
		createCheckboxFormGroup(
			"imageInput",
			"Support Image Input",
			"capabilities.imageInput",
			modelData.imageInput,
		),
	]);

	// Create advanced settings section
	const advSection = createSection("Advanced Settings", [
		createCheckboxFormGroup(
			"outputThinking",
			"Show Thinking Process in Chat UI",
			"outputThinking",
			modelData.outputThinking,
			"Display model's thinking process in chat interface. Enable this to see <thinking> tags in responses. Recommended for thinking models like Claude Sonnet/Opus 4.5.",
		),
		createCheckboxFormGroup(
			"includeThinking",
			"Inject Thinking into Multi-turn Conversations",
			"includeThinking",
			modelData.includeThinking,
			"Include thinking content when sending conversation history to model. Required for thinking models to maintain context. Enable this for Claude Sonnet/Opus 4.5 thinking models.",
		),
		createJSONFormGroup(
			"customHeader",
			"Custom HTTP Header (JSON format)",
			"customHeader",
			modelData.customHeader,
			'{"Authorization": "Bearer \${APIKEY}", "X-Custom-Header": "value"}',
			"Optional custom HTTP header configuration. Supports \${APIKEY} placeholder to auto-replace with actual API key.",
		),
		createJSONFormGroup(
			"extraBody",
			"Extra Request Body Parameters (JSON format)",
			"extraBody",
			modelData.extraBody,
			'{"temperature": 1, "top_p": null}',
			"Extra request body parameters, will be merged into request body in API. If model doesn't support certain parameters, can set to null to remove corresponding values.",
		),
	]);

	// Create button group
	const buttonGroup = createButtonGroup();

	// Create global error banner
	const errorBanner = createErrorBanner();

	// Add to container (error banner at the very top)
	container.appendChild(errorBanner);
	container.appendChild(basicSection);
	container.appendChild(apiSection);
	container.appendChild(perfSection);
	container.appendChild(capSection);
	container.appendChild(advSection);
	container.appendChild(buttonGroup);
}

/**
 * Create section element
 * @param {string} title - Section title
 * @param {Array<HTMLElement>} formGroups - Array of form group elements
 * @returns {HTMLElement} Created section element
 */
function createSection(title, formGroups) {
	const section = document.createElement("div");
	section.className = "section";

	const h3 = document.createElement("h3");
	h3.textContent = title;
	section.appendChild(h3);

	for (const group of formGroups) {
		section.appendChild(group);
	}

	return section;
}

/**
 * Create form group
 * @param {string} id - ID of the form element
 * @param {string} labelText - Label display text
 * @param {string} fieldName - Field name (displayed in parentheses)
 * @param {string} elementType - Element type: 'input', 'textarea' or 'select'
 * @param {Object} attrs - Element attributes object
 * @param {string} [helpText] - Help text (optional)
 * @returns {HTMLElement} Created form group element
 */
function createFormGroup(
	id,
	labelText,
	fieldName,
	elementType,
	attrs,
	helpText,
) {
	const group = document.createElement("div");
	group.className = "form-group";

	const label = document.createElement("label");
	label.htmlFor = id;
	label.innerHTML = \`\${labelText} <span class="field-name">(\${fieldName})</span>\`;
	group.appendChild(label);

	let element;
	if (elementType === "input") {
		element = document.createElement("input");
		Object.entries(attrs).forEach(([key, value]) => {
			if (key === "readonly" && value) {
				element.setAttribute("readonly", "");
				element.classList.add("readonly");
			} else if (key !== "readonly") {
				element.setAttribute(key, value || "");
			}
		});
	} else if (elementType === "textarea") {
		element = document.createElement("textarea");
		Object.entries(attrs).forEach(([key, value]) => {
			if (key === "value") {
				element.textContent = value || "";
			} else {
				element.setAttribute(key, value || "");
			}
		});
	} else if (elementType === "select") {
		element = document.createElement("select");
		attrs.options.forEach((opt) => {
			const option = document.createElement("option");
			option.value = opt.value;
			option.textContent = opt.label;
			if (opt.selected) option.selected = true;
			element.appendChild(option);
		});
	}

	element.id = id;
	group.appendChild(element);

	if (helpText) {
		const help = document.createElement("div");
		help.className = "help-text detailed";
		help.textContent = helpText;
		group.appendChild(help);
	}

	return group;
}

/**
 * Create checkbox form group
 * @param {string} id - ID of the checkbox element
 * @param {string} labelText - Label display text
 * @param {string} fieldName - Field name (displayed in parentheses)
 * @param {boolean} checked - Whether the checkbox is checked
 * @param {string} [detailedHelp] - Detailed help text (optional)
 * @returns {HTMLElement} Created checkbox form group element
 */
function createCheckboxFormGroup(
	id,
	labelText,
	fieldName,
	checked,
	detailedHelp,
) {
	const group = document.createElement("div");
	group.className = "form-group";

	const checkboxGroup = document.createElement("div");
	checkboxGroup.className = "checkbox-group";

	const checkbox = document.createElement("input");
	checkbox.type = "checkbox";
	checkbox.id = id;
	checkbox.checked = checked || false;

	const label = document.createElement("label");
	label.htmlFor = id;
	label.innerHTML = \`\${labelText} <span class="field-name">(\${fieldName})</span>\`;

	checkboxGroup.appendChild(checkbox);
	checkboxGroup.appendChild(label);
	group.appendChild(checkboxGroup);

	if (detailedHelp) {
		const help = document.createElement("div");
		help.className = "help-text detailed";
		help.textContent = detailedHelp;
		group.appendChild(help);
	} else {
		group.classList.add("no-bottom");
	}

	return group;
}

/**
 * Create provider form group
 * @returns {HTMLElement} Created provider form group element
 */
function createProviderFormGroup() {
	const group = document.createElement("div");
	group.className = "form-group";

	const label = document.createElement("label");
	label.htmlFor = "provider";
	label.innerHTML = 'Provider * <span class="field-name">(provider)</span>';
	group.appendChild(label);

	const dropdown = document.createElement("div");
	dropdown.className = "provider-dropdown";

	const input = document.createElement("input");
	input.type = "text";
	input.id = "provider";
	input.className = "provider-input";
	input.value = modelData.provider;
	input.placeholder = "Example: zhipu";
	input.autocomplete = "off";

	const list = document.createElement("div");
	list.className = "provider-list";
	list.id = "providerList";

	dropdown.appendChild(input);
	dropdown.appendChild(list);
	group.appendChild(dropdown);

	const help = document.createElement("div");
	help.className = "help-text";
	help.textContent =
		"Model provider identifier (can select built-in/known providers or custom input)";
	group.appendChild(help);

	return group;
}

/**
 * Create JSON form group
 * @param {string} id - ID of the form element
 * @param {string} labelText - Label display text
 * @param {string} fieldName - Field name (displayed in parentheses)
 * @param {string} value - JSON string value
 * @param {string} placeholder - Placeholder text
 * @param {string} helpText - Help text
 * @returns {HTMLElement} Created JSON form group element
 */
function createJSONFormGroup(
	id,
	labelText,
	fieldName,
	value,
	placeholder,
	helpText,
) {
	const group = document.createElement("div");
	group.className = "form-group";

	const label = document.createElement("label");
	label.htmlFor = id;
	label.innerHTML = \`\${labelText} <span class="field-name">(\${fieldName})</span>\`;
	group.appendChild(label);

	const container = document.createElement("div");
	container.className = "json-container";

	const toolbar = document.createElement("div");
	toolbar.className = "json-toolbar";

	const formatBtn = document.createElement("button");
	formatBtn.type = "button";
	formatBtn.className = "json-button";
	formatBtn.textContent = "Format";
	formatBtn.onclick = (e) => {
		e.preventDefault();
		formatJSON(id);
	};

	const clearBtn = document.createElement("button");
	clearBtn.type = "button";
	clearBtn.className = "json-button";
	clearBtn.textContent = "Clear";
	clearBtn.onclick = (e) => {
		e.preventDefault();
		clearJSON(id);
	};

	const status = document.createElement("div");
	status.className = "json-status";
	status.id = \`\${id}Status\`;

	const indicator = document.createElement("span");
	indicator.className = "json-status-indicator";

	const statusText = document.createElement("span");
	statusText.id = \`\${id}StatusText\`;
	statusText.textContent = "No content";

	status.appendChild(indicator);
	status.appendChild(statusText);

	toolbar.appendChild(formatBtn);
	toolbar.appendChild(clearBtn);
	toolbar.appendChild(status);
	container.appendChild(toolbar);

	const textarea = document.createElement("textarea");
	textarea.id = id;
	textarea.className = "json-input";
	textarea.placeholder = placeholder;
	textarea.value = value || "";

	container.appendChild(textarea);

	const error = document.createElement("div");
	error.className = "json-error";
	error.id = \`\${id}Error\`;
	container.appendChild(error);

	group.appendChild(container);

	const help = document.createElement("div");
	help.className = "help-text detailed";
	help.textContent = helpText;
	group.appendChild(help);

	return group;
}

/**
 * Create global error notification area
 * @returns {HTMLElement} Created error notification element
 */
function createErrorBanner() {
	const banner = document.createElement("div");
	banner.id = "globalErrorBanner";
	banner.className = "error-banner";
	banner.style.display = "none";

	const messageSpan = document.createElement("span");
	messageSpan.id = "globalErrorMessage";

	const closeBtn = document.createElement("button");
	closeBtn.className = "error-banner-close";
	closeBtn.textContent = "\xD7";
	closeBtn.onclick = hideGlobalError;

	banner.appendChild(messageSpan);
	banner.appendChild(closeBtn);

	return banner;
}

/**
 * Create button group
 * @returns {HTMLElement} Created button group element
 */
function createButtonGroup() {
	const group = document.createElement("div");
	group.className = "button-group";

	// Create internal container for center alignment
	const inner = document.createElement("div");
	inner.className = "button-group-inner";

	// Left buttons container (Delete button)
	const leftButtons = document.createElement("div");
	leftButtons.style.display = "flex";
	leftButtons.style.gap = "10px";

	// Right buttons container (Save and Cancel buttons)
	const rightButtons = document.createElement("div");
	rightButtons.style.display = "flex";
	rightButtons.style.gap = "10px";

	// If in edit mode, add delete button to the left
	if (!isCreateMode) {
		const deleteBtn = document.createElement("button");
		deleteBtn.className = "delete-button";
		deleteBtn.textContent = "Delete";
		deleteBtn.onclick = deleteModel;
		leftButtons.appendChild(deleteBtn);
	}

	const saveBtn = document.createElement("button");
	saveBtn.className = "primary-button";
	saveBtn.textContent = isCreateMode ? "Create" : "Update";
	saveBtn.onclick = saveModel;

	const cancelBtn = document.createElement("button");
	cancelBtn.className = "secondary-button";
	cancelBtn.textContent = "Cancel";
	cancelBtn.onclick = cancelEdit;

	rightButtons.appendChild(saveBtn);
	rightButtons.appendChild(cancelBtn);

	inner.appendChild(leftButtons);
	inner.appendChild(rightButtons);
	group.appendChild(inner);

	return group;
}

/**
 * Automatically adjust height of a single textarea to fit content
 * @param {HTMLTextAreaElement} textarea - textarea element
 * @returns {void}
 */
function autoResizeTextarea(textarea) {
	if (!textarea) return;

	// Reset height to get correct scrollHeight
	textarea.style.height = "auto";

	// Set new height (scrollHeight + border)
	const newHeight = textarea.scrollHeight;
	textarea.style.height = \`\${newHeight}px\`;
}

/**
 * Add auto-expanding height functionality to all textarea elements
 * @returns {void}
 */
function autoResizeAllTextareas() {
	const textareas = document.querySelectorAll("textarea");

	textareas.forEach((textarea) => {
		// Adjust height once during initialization
		autoResizeTextarea(textarea);

		// Listen to input events, adjust height in real time
		textarea.addEventListener("input", function () {
			autoResizeTextarea(this);
		});

		// Listen to change events (e.g. after pasting)
		textarea.addEventListener("change", function () {
			autoResizeTextarea(this);
		});

		// Listen to paste events
		textarea.addEventListener("paste", function () {
			// Use setTimeout to ensure content has been pasted
			setTimeout(() => {
				autoResizeTextarea(this);
			}, 0);
		});
	});
}

/**
 * General input validation - non-empty validation
 * @param {HTMLElement} element - Input element to validate
 * @returns {void}
 */
function addSimpleValidation(element) {
	element.addEventListener("input", function () {
		if (this.value.trim()) {
			this.classList.remove("invalid");
		} else {
			this.classList.add("invalid");
		}
	});
}

/**
 * General number validation - must be a positive integer
 * @param {HTMLElement} element - Input element to validate
 * @returns {void}
 */
function addNumberValidation(element) {
	element.addEventListener("input", function () {
		const value = parseInt(this.value, 10);
		if (value && value > 0) {
			this.classList.remove("invalid");
		} else {
			this.classList.add("invalid");
		}
	});
}

/**
 * Check if it is a valid JSON object (not an array, not null, not a primitive type)
 * @param {*} parsed - Parsed JSON data
 * @returns {boolean} Whether it is a valid JSON object
 */
function isValidJSONObject(parsed) {
	return (
		typeof parsed === "object" && parsed !== null && !Array.isArray(parsed)
	);
}

/**
 * Bind event listeners
 * @returns {void}
 */
function bindEvents() {
	// Real-time validation for required fields
	const modelId = document.getElementById("modelId");
	const modelName = document.getElementById("modelName");
	const provider = document.getElementById("provider");
	const baseUrl = document.getElementById("baseUrl");
	const maxInputTokens = document.getElementById("maxInputTokens");
	const maxOutputTokens = document.getElementById("maxOutputTokens");

	// Add auto-expanding height functionality to all textarea elements
	autoResizeAllTextareas();

	// Model ID validation
	if (modelId && !modelId.readOnly) {
		addSimpleValidation(modelId);
	}

	// Display name validation
	addSimpleValidation(modelName);

	// Provider validation
	addSimpleValidation(provider);

	// baseUrl validation (required + URL format)
	baseUrl.addEventListener("input", function () {
		const value = this.value.trim();
		if (!value) {
			this.classList.add("invalid");
			return;
		}
		try {
			const urlObj = new URL(value);
			if (urlObj.protocol === "http:" || urlObj.protocol === "https:") {
				this.classList.remove("invalid");
			} else {
				this.classList.add("invalid");
			}
		} catch (_e) {
			this.classList.add("invalid");
		}
	});

	// Token count validation
	addNumberValidation(maxInputTokens);
	addNumberValidation(maxOutputTokens);

	// JSON validation events
	const customHeader = document.getElementById("customHeader");
	const extraBody = document.getElementById("extraBody");

	customHeader.addEventListener("input", () => validateJSON_UI("customHeader"));
	customHeader.addEventListener("change", () =>
		validateJSON_UI("customHeader"),
	);

	extraBody.addEventListener("input", () => validateJSON_UI("extraBody"));
	extraBody.addEventListener("change", () => validateJSON_UI("extraBody"));

	// Provider input events
	const providerInput = document.getElementById("provider");
	const providerList = document.getElementById("providerList");

	providerInput.addEventListener("input", function () {
		const searchText = this.value.toLowerCase();
		if (searchText) {
			const filtered = allProviders.filter(
				(p) =>
					p.id.toLowerCase().includes(searchText) ||
					p.name.toLowerCase().includes(searchText),
			);
			renderProviderList(filtered);
			providerList.classList.add("show");
		} else {
			providerList.classList.remove("show");
		}
	});

	providerInput.addEventListener("focus", () => {
		if (allProviders && allProviders.length > 0) {
			renderProviderList(allProviders);
			providerList.classList.add("show");
		}
	});

	document.addEventListener("click", (event) => {
		if (!event.target.closest(".provider-dropdown")) {
			providerList.classList.remove("show");
		}
	});

	// VSCode message events
	window.addEventListener("message", (event) => {
		const message = event.data;
		if (message.command === "setProviders") {
			updateProviderList(message.providers);
		}
	});
}

/**
 * Validate JSON string format
 * @param {string} jsonString - JSON string to validate
 * @returns {boolean} Whether JSON is valid
 */
function validateJSON(jsonString) {
	if (!jsonString || jsonString.trim() === "") {
		return true;
	}
	try {
		const parsed = JSON.parse(jsonString);
		// Must be object type, cannot be array, string, number, etc.
		return isValidJSONObject(parsed);
	} catch (_e) {
		return false;
	}
}

/**
 * Parse JSON string
 * @param {string} jsonString - JSON string to parse
 * @returns {Object|undefined} Parsed object, returns undefined if parsing fails or not an object
 */
function parseJSON(jsonString) {
	if (!jsonString || jsonString.trim() === "") {
		return undefined;
	}
	try {
		const parsed = JSON.parse(jsonString);
		// Must be object type, cannot be array, string, number, etc.
		if (isValidJSONObject(parsed)) {
			return parsed;
		}
		return undefined;
	} catch (_e) {
		return undefined;
	}
}

/**
 * Validate JSON and update UI state (visual feedback only, does not take focus)
 * @param {string} fieldId - Form field ID
 * @returns {boolean} Whether JSON is valid
 */
function validateJSON_UI(fieldId) {
	const textarea = document.getElementById(fieldId);
	const statusDiv = document.getElementById(\`\${fieldId}Status\`);
	const statusText = document.getElementById(\`\${fieldId}StatusText\`);
	const errorDiv = document.getElementById(\`\${fieldId}Error\`);
	const content = textarea.value.trim();

	// Remove all validation state classes
	textarea.classList.remove("json-valid", "json-invalid");
	if (errorDiv) {
		errorDiv.classList.remove("show");
	}

	if (!content) {
		const indicator = statusDiv.querySelector(".json-status-indicator");
		indicator.className = "json-status-indicator";
		statusText.textContent = "No content";
		return true;
	}

	try {
		const parsed = JSON.parse(content);
		// Must be object type, consistent with validateJSON logic
		if (isValidJSONObject(parsed)) {
			// Validation passed - restore default state (no green style added)
			const indicator = statusDiv.querySelector(".json-status-indicator");
			indicator.className = "json-status-indicator";
			statusText.textContent = "Valid";
			return true;
		} else {
			// Not an object type - show red error state
			textarea.classList.add("json-invalid");
			const indicator = statusDiv.querySelector(".json-status-indicator");
			indicator.className = "json-status-indicator invalid";
			statusText.textContent = "Invalid";
			if (errorDiv) {
				errorDiv.textContent =
					'Must be object type (like {"key": "value"}), cannot be array, number or string';
				errorDiv.classList.add("show");
			}
			return false;
		}
	} catch (e) {
		// JSON parsing error - show red error state
		textarea.classList.add("json-invalid");
		const indicator = statusDiv.querySelector(".json-status-indicator");
		indicator.className = "json-status-indicator invalid";
		statusText.textContent = "Invalid";
		if (errorDiv) {
			errorDiv.textContent = \`Error: \${e.message}\`;
			errorDiv.classList.add("show");
		}
		return false;
	}
}

/**
 * Format JSON string
 * @param {string} fieldId - Form field ID
 * @returns {void}
 */
function formatJSON(fieldId) {
	const textarea = document.getElementById(fieldId);
	const content = textarea.value.trim();

	if (!content) {
		showGlobalError("No content to format");
		return;
	}

	try {
		const parsed = JSON.parse(content);
		// Must be object type, consistent with validateJSON logic
		if (!isValidJSONObject(parsed)) {
			showGlobalError(
				'JSON format error: Must be object type (like {"key": "value"}), cannot be array, number or string',
			);
			return;
		}
		textarea.value = JSON.stringify(parsed, null, 2);
		validateJSON_UI(fieldId);
		// Adjust height after formatting
		autoResizeTextarea(textarea);
		textarea.style.opacity = "0.7";
		setTimeout(() => {
			textarea.style.opacity = "1";
		}, 200);
		// Clear error prompt when formatting is successful
		hideGlobalError();
	} catch (e) {
		showGlobalError(\`JSON format error, cannot format:\\n\${e.message}\`);
	}
}

/**
 * Clear JSON field content
 * @param {string} fieldId - Form field ID
 * @returns {void}
 */
function clearJSON(fieldId) {
	const textarea = document.getElementById(fieldId);
	// Clear directly without confirmation (user can restore via cancel save or Ctrl+Z)
	textarea.value = "";
	validateJSON_UI(fieldId);
	// Adjust height after clearing
	autoResizeTextarea(textarea);
}

/**
 * Provider list management
 * @param {Provider[]} providers - Provider list
 * @returns {void}
 */
function updateProviderList(providers) {
	allProviders = providers || [];
	renderProviderList(allProviders);
}

/**
 * Render provider list
 * @param {Provider[]} providers - Provider list
 * @returns {void}
 */
function renderProviderList(providers) {
	const providerListDiv = document.getElementById("providerList");
	const currentValue = document.getElementById("provider").value;

	providerListDiv.innerHTML = "";

	if (!providers || providers.length === 0) {
		const item = document.createElement("div");
		item.className = "provider-list-item";
		item.textContent = "No matching providers";
		item.style.pointerEvents = "none";
		item.style.opacity = "0.5";
		providerListDiv.appendChild(item);
		return;
	}

	providers.forEach((provider) => {
		const item = document.createElement("div");
		item.className = "provider-list-item";
		if (provider.id === currentValue) {
			item.classList.add("selected");
		}
		item.textContent = \`\${provider.name} (\${provider.id})\`;
		item.addEventListener("click", () => {
			const providerInput = document.getElementById("provider");
			providerInput.value = provider.id;
			// Remove error style (if any)
			providerInput.classList.remove("invalid");
			providerListDiv.classList.remove("show");
		});
		providerListDiv.appendChild(item);
	});
}

/**
 * Form validation
 */
/**
 * Show global error info
 * @param {string} message - Error message
 * @returns {void}
 */
function showGlobalError(message) {
	const banner = document.getElementById("globalErrorBanner");
	const messageSpan = document.getElementById("globalErrorMessage");

	if (banner && messageSpan) {
		messageSpan.textContent = message;
		banner.style.display = "flex";
		// Auto-scroll to top to ensure user sees error prompt
		banner.scrollIntoView({ behavior: "smooth", block: "nearest" });
	}
}

/**
 * Hide global error info
 * @returns {void}
 */
function hideGlobalError() {
	const banner = document.getElementById("globalErrorBanner");
	if (banner) {
		banner.style.display = "none";
	}
}

/**
 * Validate form data
 * @returns {boolean} Whether form is valid
 */
function validateForm() {
	const modelId = document.getElementById("modelId").value.trim();
	const modelName = document.getElementById("modelName").value.trim();
	const provider = document.getElementById("provider").value.trim();
	const baseUrl = document.getElementById("baseUrl").value.trim();
	const maxInputTokens = document.getElementById("maxInputTokens").value.trim();
	const maxOutputTokens = document
		.getElementById("maxOutputTokens")
		.value.trim();

	// Validate required fields
	if (!modelId) {
		showGlobalError("Please enter Model ID");
		document.getElementById("modelId").focus();
		return false;
	}
	if (!modelName) {
		showGlobalError("Please enter display name");
		document.getElementById("modelName").focus();
		return false;
	}
	if (!provider) {
		showGlobalError("Please enter provider");
		document.getElementById("provider").focus();
		return false;
	}
	if (!baseUrl) {
		showGlobalError("Please enter BASE URL");
		document.getElementById("baseUrl").focus();
		return false;
	}

	// Validate URL format
	if (baseUrl) {
		try {
			const urlObj = new URL(baseUrl);
			if (urlObj.protocol !== "http:" && urlObj.protocol !== "https:") {
				showGlobalError("BASE URL must start with http:// or https://");
				document.getElementById("baseUrl").focus();
				return false;
			}
		} catch (_e) {
			showGlobalError("BASE URL format is incorrect, please enter a valid URL");
			document.getElementById("baseUrl").focus();
			return false;
		}
	}

	// Validate token count
	if (
		!maxInputTokens ||
		Number.isNaN(parseInt(maxInputTokens, 10)) ||
		parseInt(maxInputTokens, 10) <= 0
	) {
		showGlobalError("Input token must be a number greater than 0");
		document.getElementById("maxInputTokens").focus();
		return false;
	}
	if (
		!maxOutputTokens ||
		Number.isNaN(parseInt(maxOutputTokens, 10)) ||
		parseInt(maxOutputTokens, 10) <= 0
	) {
		showGlobalError("Output token must be a number greater than 0");
		document.getElementById("maxOutputTokens").focus();
		return false;
	}

	// Validate JSON format
	const customHeaderJson = document.getElementById("customHeader").value.trim();
	if (customHeaderJson && !validateJSON(customHeaderJson)) {
		showGlobalError(
			"Custom HTTP header JSON format is incorrect, must be object type",
		);
		document.getElementById("customHeader").focus();
		return false;
	}

	const extraBodyJson = document.getElementById("extraBody").value.trim();
	if (extraBodyJson && !validateJSON(extraBodyJson)) {
		showGlobalError(
			"Extra request body parameters JSON format is incorrect, must be object type",
		);
		document.getElementById("extraBody").focus();
		return false;
	}

	return true;
}

/**
 * Save model configuration
 * @returns {void}
 */
function saveModel() {
	// Clear previous errors
	hideGlobalError();

	if (!validateForm()) {
		return;
	}

	const modelId = document.getElementById("modelId").value.trim();
	const modelName = document.getElementById("modelName").value.trim();
	const provider = document.getElementById("provider").value.trim();

	if (!modelId || !modelName || !provider) {
		showGlobalError("Please enter all required fields");
		return;
	}

	const tooltipText = document.getElementById("modelTooltip").value.trim();
	const requestModelText = document.getElementById("requestModel").value.trim();
	const baseUrlText = document.getElementById("baseUrl").value.trim();

	const model = {
		id: modelId,
		name: modelName,
		// tooltip: use null to clear (undefined will be ignored when JSON serializing)
		tooltip: tooltipText || null,
		provider: provider,
		// baseUrl: use null to clear
		baseUrl: baseUrlText || null,
		// model: use null to clear
		model: requestModelText || null,
		sdkMode: document.getElementById("sdkMode").value || "openai",
		maxInputTokens:
			parseInt(document.getElementById("maxInputTokens").value, 10) || 12800,
		maxOutputTokens:
			parseInt(document.getElementById("maxOutputTokens").value, 10) || 8192,
		capabilities: {
			toolCalling: document.getElementById("toolCalling").checked,
			imageInput: document.getElementById("imageInput").checked,
		},
		outputThinking: document.getElementById("outputThinking").checked,
		includeThinking: document.getElementById("includeThinking").checked,
	};

	const customHeaderText = document.getElementById("customHeader").value.trim();
	const customHeader = parseJSON(customHeaderText);
	// Explicitly set customHeader, use null to clear (undefined will be ignored when JSON serializing)
	model.customHeader = customHeader || null;

	const extraBodyText = document.getElementById("extraBody").value.trim();
	const extraBody = parseJSON(extraBodyText);
	// Explicitly set extraBody, use null to clear
	model.extraBody = extraBody || null;

	if (!model.id || !model.name || !model.provider) {
		showGlobalError("Model configuration is incomplete, please try again");
		return;
	}

	vscode.postMessage({
		command: "save",
		model: model,
	});
}

/**
 * Cancel editing
 * @returns {void}
 */
function cancelEdit() {
	vscode.postMessage({
		command: "cancel",
	});
}

/**
 * Delete model
 * @returns {void}
 */
function deleteModel() {
	// Send delete request to VSCode side, VSCode will show confirmation dialog
	vscode.postMessage({
		command: "delete",
		modelId: document.getElementById("modelId").value.trim(),
		modelName: document.getElementById("modelName").value.trim(),
	});
}
`});var iA,dZ,qAt=q(()=>{"use strict";iA=yt(require("vscode"));Gg();UD();kAt();UAt();dZ=class t{static async show(e,r=!1){let n=iA.window.createWebviewPanel("compatibleModelEditor",r?"Create New Model":`Edit Model: ${e.name||"Unnamed Model"}`,iA.ViewColumn.One,{enableScripts:!0,retainContextWhenHidden:!0});return n.webview.html=t.generateHTML(e,r,n.webview),new Promise(o=>{let s=[];s.push(n.webview.onDidReceiveMessage(async a=>{switch(a.command){case"getProviders":t.sendProvidersList(n.webview);break;case"save":a.model&&typeof a.model=="object"&&a.model.id&&a.model.name&&a.model.provider?o(a.model):(iA.window.showErrorMessage("Invalid saved model data"),o(void 0)),n.dispose();break;case"delete":if(a.modelId&&typeof a.modelId=="string"){let c=a.modelName||"this model";await iA.window.showWarningMessage(`Are you sure you want to delete model "${c}"?`,{modal:!0},"Delete")==="Delete"&&(o({_deleteModel:!0,modelId:a.modelId}),n.dispose())}else iA.window.showErrorMessage("Delete failed: Invalid model ID");break;case"cancel":o(void 0),n.dispose();break}},void 0,s)),s.push(n.onDidDispose(()=>{s.forEach(a=>{a.dispose()})},void 0,s))})}static generateHTML(e,r,n){let o=n.cspSource||"",s={id:e?.id||"",name:e?.name||"",provider:e?.provider||"",sdkMode:e?.sdkMode||"openai",tooltip:e?.tooltip||"",baseUrl:e?.baseUrl||"",model:e?.model||"",maxInputTokens:e?.maxInputTokens||128e3,maxOutputTokens:e?.maxOutputTokens||4096,toolCalling:e?.capabilities?.toolCalling||!1,imageInput:e?.capabilities?.imageInput||!1,outputThinking:e?.outputThinking!==!1,includeThinking:e?.includeThinking!==!1,customHeader:e?.customHeader?JSON.stringify(e.customHeader,null,2):"",extraBody:e?.extraBody?JSON.stringify(e.extraBody,null,2):""};return`<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>${r?"Create New Model":`Edit Model: ${t.escapeHtml(s.name)}`}</title>
        <meta http-equiv="Content-Security-Policy" content="default-src 'none'; style-src 'unsafe-inline' ${o}; script-src 'unsafe-inline' ${o};" />
        <style>
            ${LAt}
        </style>
    </head>
    <body>
        <div class="container">
            <div id="app"></div>
        </div>
        <script>
            ${DAt}

            // Initialize data
            const initialModelData = ${JSON.stringify(s)};
            const initialIsCreateMode = ${r};

            // Start editor
            document.addEventListener('DOMContentLoaded', function() {
                initializeEditor(initialModelData, initialIsCreateMode);
            });
        </script>
    </body>
</html>`}static escapeHtml(e){if(!e)return"";let r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return e.replace(/[&<>"']/g,n=>r[n])}static sendProvidersList(e){let r=new Map;Object.entries(Rd).forEach(([n,o])=>{r.set(n,{id:n,name:o.displayName||n})}),Object.entries(By).forEach(([n,o])=>{r.has(n)||r.set(n,{id:n,name:o.displayName||n})}),e.postMessage({command:"setProviders",providers:Array.from(r.values())})}}});function Lpn(t){return typeof t=="object"&&t?.back===!0}var $n,fZ,Awe=q(()=>{"use strict";$n=yt(require("vscode"));Gg();qAt();gu();UD();bi();fZ=class t{static models=[];static configListener=null;static _onDidChangeModels=new $n.EventEmitter;static onDidChangeModels=t._onDidChangeModels.event;static isSaving=!1;static initialize(){t.loadModels(),t.setupConfigListener(),ve.debug("Custom model manager initialized")}static dispose(){t.configListener&&(t.configListener.dispose(),t.configListener=null),t._onDidChangeModels.dispose(),ve.trace("Custom model manager disposed")}static setupConfigListener(){t.configListener&&t.configListener.dispose(),t.configListener=$n.workspace.onDidChangeConfiguration(e=>{if(e.affectsConfiguration("chp.compatibleModels")){if(t.isSaving){ve.debug("Saving configuration, skipping reload");return}ve.info("Detected custom model configuration changes, reloading..."),t.loadModels(),t._onDidChangeModels.fire()}})}static loadModels(){try{let r=$n.workspace.getConfiguration("chp").get("compatibleModels",[]);t.models=(r||[]).filter(n=>n!=null&&typeof n=="object"&&n.id&&n.name&&n.provider),ve.debug(`Loaded ${t.models.length} custom models`)}catch(e){ve.error("Failed to load custom models:",e),t.models=[]}}static async saveModels(){try{t.isSaving=!0;let e=$n.workspace.getConfiguration("chp"),r=t.models.filter(n=>n!=null&&typeof n=="object").map(n=>{let{_isFromWizard:o,...s}=n,a={};for(let[c,l]of Object.entries(s))l!=null&&(a[c]=l);return a});ve.debug("Preparing to save models, cleaned data:",JSON.stringify(r,null,2)),await e.update("compatibleModels",r,$n.ConfigurationTarget.Global),ve.debug("Custom models saved to configuration"),t.loadModels(),t._onDidChangeModels.fire(),ve.debug("Model change event triggered")}catch(e){throw ve.error("Failed to save custom models:",e),e}finally{setTimeout(()=>{t.isSaving=!1},100)}}static getModels(){return t.models}static getRawModelFromConfig(e){try{return $n.workspace.getConfiguration("chp").get("compatibleModels",[]).find(s=>s&&s.id===e)}catch(r){ve.error("Failed to read raw model data from configuration file:",r);return}}static async addModel(e){if(!e)throw new Error("Model configuration cannot be empty");if(!e.id||!e.name||!e.provider)throw new Error("Model configuration missing required fields (id, name, provider)");if(t.models.some(r=>r.id===e.id))throw new Error(`Model ID "${e.id}" already exists`);if(typeof e!="object")throw new Error("Model configuration must be a valid object");(!e.capabilities||typeof e.capabilities!="object")&&(e.capabilities={toolCalling:!1,imageInput:!1}),t.models.push(e),await t.saveModels(),ve.info(`Added custom model: ${e.name} (${e.provider}, ${e.sdkMode})`)}static async updateModel(e,r){if(!r)throw new Error("Update data cannot be empty");let n=t.models.findIndex(o=>o.id===e);if(n===-1)throw new Error(`Model ID "${e}" not found`);if(!t.models[n])throw new Error(`Model data corrupted, cannot update model ID "${e}"`);t.models[n]={...t.models[n],...r},await t.saveModels(),ve.info(`Updated custom model: ${e}`)}static async removeModel(e){let r=t.models.findIndex(o=>o.id===e);if(r===-1)throw new Error(`Model ID "${e}" not found`);let n=t.models[r];if(!n)throw new Error(`Model data corrupted, cannot delete model ID "${e}"`);t.models.splice(r,1),await t.saveModels(),ve.info(`Deleted custom model: ${n.name}`)}static async removeModels(e){let r=0,n=0,o=e.filter(s=>t.models.some(a=>a.id===s));for(let s of o){let a=t.models.findIndex(c=>c.id===s);if(a!==-1){let c=t.models[a];t.models.splice(a,1),ve.info(`Deleted custom model: ${c?.name||s}`),r++}else n++}return r>0&&await t.saveModels(),{success:r,failed:n}}static async configureModelOrUpdateAPIKey(){if(t.models.length===0){ve.info("No custom models, directly entering add flow"),await t.configureModels();return}let e=[{label:"$(key) Manage API Keys",detail:"Update or configure provider or model API keys",action:"apiKey"},{label:"$(settings-gear) Configure Models",detail:"Add, edit, or delete model configurations",action:"configureModels"}],r=$n.window.createQuickPick();r.title="Manage OpenAI / Anthropic Compatible Models",r.placeholder="Select an action",r.items=e,r.ignoreFocusOut=!0;let n=await new Promise(o=>{r.onDidAccept(()=>{let s=r.selectedItems[0];o(s),r.hide()}),r.onDidHide(()=>{o(void 0)}),r.show()});n?.action==="apiKey"?await t.promptAndSetApiKey():n?.action==="configureModels"&&await t.configureModels()}static async promptAndSetApiKey(){try{let e=await t.getUniqueProviders();if(e.length===0){$n.window.showWarningMessage("No custom model configurations, please add a model first");return}if(e.length===1){await t.setApiKeyForProvider(e[0]);return}let r=await t.getHistoricalCustomProviders(),n=[],o=[],s=[];e.forEach(l=>{r.includes(l)?n.push(l):l in By?o.push(l):l in Rd?s.push(l):n.push(l)});let a=[];n.length>0&&a.push(...n.map(l=>({label:l}))),o.length>0&&(n.length>0&&a.push({label:"Known Providers",kind:$n.QuickPickItemKind.Separator}),a.push(...o.map(l=>({label:l,description:By[l]?.displayName})))),s.length>0&&((n.length>0||o.length>0)&&a.push({label:"Built-in Providers",kind:$n.QuickPickItemKind.Separator}),a.push(...s.map(l=>({label:l,description:Rd[l]?.displayName}))));let c=await $n.window.showQuickPick(a,{placeHolder:"Select provider to set API key for"});if(!c)return;await t.setApiKeyForProvider(c.label)}catch(e){ve.error("Failed to set API key:",e),$n.window.showErrorMessage(`Failed to set API key: ${e instanceof Error?e.message:"Unknown error"}`)}}static async getUniqueProviders(){let e=new Set;for(let r of t.models)r.provider?.trim()?e.add(r.provider.trim()):e.add("compatible");return Array.from(e).sort()}static async setApiKeyForProvider(e){let r=await $n.window.showInputBox({prompt:`Please enter API key for "${e}" (leave empty to clear key)`,placeHolder:"sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",password:!0});r!==void 0&&(r.trim().length===0?(await Hs.deleteApiKey(e),ve.info(`API key for provider "${e}" has been cleared`)):(await Hs.setApiKey(e,r.trim()),ve.info(`API key for provider "${e}" has been set`)))}static async configureModels(){for(;;){let e=[];for(let o of t.models){let s=[`$(arrow-up) ${o.maxInputTokens} $(arrow-down) ${o.maxOutputTokens}`,`$(chip) ${o.sdkMode==="openai"?"OpenAI":"Anthropic"}`];o.capabilities.toolCalling&&s.push("$(plug) Tool calling"),o.capabilities.imageInput&&s.push("$(circuit-board) Image understanding"),e.push({label:o.name,description:o.id,detail:s.join("	"),modelId:o.id,action:"edit"})}if(e.length===0){let o=await t.showVisualModelEditorForCreate();o&&await t.addModel(o);return}if(e.length>0){let o={label:"",kind:$n.QuickPickItemKind.Separator};e.push(o)}e.push({label:"$(add) Add New Model",detail:"Create new custom model configuration",action:"add"}),e.push({label:"$(trash) Bulk Delete Models",detail:"Select multiple models to delete at once",action:"bulkDelete"});let r=$n.window.createQuickPick();r.title="Custom Model Configuration",r.placeholder="Select a model to edit or add new model",r.items=e,r.ignoreFocusOut=!0;let n=await new Promise(o=>{let s=[];s.push(r.onDidAccept(()=>{let a=r.selectedItems[0];o(a),r.hide()})),s.push(r.onDidHide(()=>{o(void 0),s.forEach(a=>{a.dispose()})})),r.show()});if(!n||Lpn(n))return;if(n.action==="add"){let o=await t.showVisualModelEditorForCreate();o&&await t.addModel(o)}else if(n.action==="bulkDelete")await t.showBulkDeletePicker();else if(n.action==="edit"&&n.modelId){let o=t.models.find(s=>s.id===n.modelId);if(o){let s=await t._editModel(n.modelId,o);s&&(s.action==="update"&&s.config?await t.updateModel(s.id,s.config):s.action==="delete"&&await t.removeModel(s.id))}}}}static async showBulkDeletePicker(){let e=t.models.map(l=>({label:l.name,description:l.id,detail:`$(chip) ${l.sdkMode==="openai"?"OpenAI":"Anthropic"} | Provider: ${l.provider||"compatible"}`,modelId:l.id}));if(e.length===0){$n.window.showInformationMessage("No models to delete");return}let r=$n.window.createQuickPick();r.title="Bulk Delete Models",r.placeholder="Select models to delete (use Space to select, Enter to confirm)",r.items=e,r.canSelectMany=!0,r.ignoreFocusOut=!0;let n=await new Promise(l=>{r.onDidAccept(()=>{l([...r.selectedItems]),r.hide()}),r.onDidHide(()=>{l(void 0)}),r.show()});if(!n||n.length===0)return;let o=n.length===1?`Are you sure you want to delete "${n[0].label}"?`:`Are you sure you want to delete ${n.length} models?`;if(await $n.window.showWarningMessage(o,{modal:!0},"Delete")!=="Delete")return;let a=n.map(l=>l.modelId),c=await t.removeModels(a);if(c.success>0){let l=c.failed>0?`Deleted ${c.success} model(s), ${c.failed} failed`:`Successfully deleted ${c.success} model(s)`;$n.window.showInformationMessage(l)}else $n.window.showErrorMessage("Failed to delete models")}static async _editModel(e,r){let o=t.getRawModelFromConfig(e)||r,s=await t.showVisualModelEditor(o);if(s)return{action:"update",id:e,config:s}}static async showVisualModelEditorForCreate(){let e={id:"",name:"",provider:"",sdkMode:"openai",maxInputTokens:128e3,maxOutputTokens:4096,capabilities:{toolCalling:!0,imageInput:!1},outputThinking:!0,includeThinking:!0};return t.showVisualModelEditor(e,!0)}static async showVisualModelEditor(e,r=!1){let n=await dZ.show(e,r);if(n&&"_deleteModel"in n&&n._deleteModel){try{await t.removeModel(n.modelId),$n.window.showInformationMessage("Model deleted")}catch(o){$n.window.showErrorMessage(`Failed to delete model: ${o instanceof Error?o.message:"Unknown error"}`)}return}return n}static async getHistoricalCustomProviders(){try{let{configProviders:e}=await Promise.resolve().then(()=>(Gg(),wxe)),r=Object.keys(e),n=Object.keys(By),o=t.models.map(a=>a.provider).filter(a=>a&&a.trim()!=="");return[...new Set(o)].filter(a=>a!=="compatible"&&!r.includes(a)&&!n.includes(a))}catch(e){return ve.error("Failed to get historical custom providers:",e),[]}}}});var n6=m(sn=>{"use strict";Object.defineProperty(sn,"__esModule",{value:!0});sn.regexpCode=sn.getEsmExportName=sn.getProperty=sn.safeStringify=sn.stringify=sn.strConcat=sn.addCodeArg=sn.str=sn._=sn.nil=sn._Code=sn.Name=sn.IDENTIFIER=sn._CodeOrName=void 0;var t6=class{};sn._CodeOrName=t6;sn.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var cA=class extends t6{constructor(e){if(super(),!sn.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};sn.Name=cA;var Ld=class extends t6{constructor(e){super(),this._items=typeof e=="string"?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let e=this._items[0];return e===""||e==='""'}get str(){var e;return(e=this._str)!==null&&e!==void 0?e:this._str=this._items.reduce((r,n)=>`${r}${n}`,"")}get names(){var e;return(e=this._names)!==null&&e!==void 0?e:this._names=this._items.reduce((r,n)=>(n instanceof cA&&(r[n.str]=(r[n.str]||0)+1),r),{})}};sn._Code=Ld;sn.nil=new Ld("");function NPt(t,...e){let r=[t[0]],n=0;for(;n<e.length;)FIe(r,e[n]),r.push(t[++n]);return new Ld(r)}sn._=NPt;var qIe=new Ld("+");function LPt(t,...e){let r=[r6(t[0])],n=0;for(;n<e.length;)r.push(qIe),FIe(r,e[n]),r.push(qIe,r6(t[++n]));return Qgn(r),new Ld(r)}sn.str=LPt;function FIe(t,e){e instanceof Ld?t.push(...e._items):e instanceof cA?t.push(e):t.push(Xgn(e))}sn.addCodeArg=FIe;function Qgn(t){let e=1;for(;e<t.length-1;){if(t[e]===qIe){let r=Zgn(t[e-1],t[e+1]);if(r!==void 0){t.splice(e-1,3,r);continue}t[e++]="+"}e++}}function Zgn(t,e){if(e==='""')return t;if(t==='""')return e;if(typeof t=="string")return e instanceof cA||t[t.length-1]!=='"'?void 0:typeof e!="string"?`${t.slice(0,-1)}${e}"`:e[0]==='"'?t.slice(0,-1)+e.slice(1):void 0;if(typeof e=="string"&&e[0]==='"'&&!(t instanceof cA))return`"${t}${e.slice(1)}`}function Jgn(t,e){return e.emptyStr()?t:t.emptyStr()?e:LPt`${t}${e}`}sn.strConcat=Jgn;function Xgn(t){return typeof t=="number"||typeof t=="boolean"||t===null?t:r6(Array.isArray(t)?t.join(","):t)}function e_n(t){return new Ld(r6(t))}sn.stringify=e_n;function r6(t){return JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}sn.safeStringify=r6;function t_n(t){return typeof t=="string"&&sn.IDENTIFIER.test(t)?new Ld(`.${t}`):NPt`[${t}]`}sn.getProperty=t_n;function r_n(t){if(typeof t=="string"&&sn.IDENTIFIER.test(t))return new Ld(`${t}`);throw new Error(`CodeGen: invalid export name: ${t}, use explicit $id name mapping`)}sn.getEsmExportName=r_n;function n_n(t){return new Ld(t.toString())}sn.regexpCode=n_n});var $Ie=m(Il=>{"use strict";Object.defineProperty(Il,"__esModule",{value:!0});Il.ValueScope=Il.ValueScopeName=Il.Scope=Il.varKinds=Il.UsedValueState=void 0;var wl=n6(),jIe=class extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}},kZ;(function(t){t[t.Started=0]="Started",t[t.Completed=1]="Completed"})(kZ||(Il.UsedValueState=kZ={}));Il.varKinds={const:new wl.Name("const"),let:new wl.Name("let"),var:new wl.Name("var")};var DZ=class{constructor({prefixes:e,parent:r}={}){this._names={},this._prefixes=e,this._parent=r}toName(e){return e instanceof wl.Name?e:this.name(e)}name(e){return new wl.Name(this._newName(e))}_newName(e){let r=this._names[e]||this._nameGroup(e);return`${e}${r.index++}`}_nameGroup(e){var r,n;if(!((n=(r=this._parent)===null||r===void 0?void 0:r._prefixes)===null||n===void 0)&&n.has(e)||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}};Il.Scope=DZ;var UZ=class extends wl.Name{constructor(e,r){super(r),this.prefix=e}setValue(e,{property:r,itemIndex:n}){this.value=e,this.scopePath=(0,wl._)`.${new wl.Name(r)}[${n}]`}};Il.ValueScopeName=UZ;var i_n=(0,wl._)`\n`,BIe=class extends DZ{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?i_n:wl.nil}}get(){return this._scope}name(e){return new UZ(e,this._newName(e))}value(e,r){var n;if(r.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let o=this.toName(e),{prefix:s}=o,a=(n=r.key)!==null&&n!==void 0?n:r.ref,c=this._values[s];if(c){let d=c.get(a);if(d)return d}else c=this._values[s]=new Map;c.set(a,o);let l=this._scope[s]||(this._scope[s]=[]),u=l.length;return l[u]=r.ref,o.setValue(r,{property:s,itemIndex:u}),o}getValue(e,r){let n=this._values[e];if(n)return n.get(r)}scopeRefs(e,r=this._values){return this._reduceValues(r,n=>{if(n.scopePath===void 0)throw new Error(`CodeGen: name "${n}" has no value`);return(0,wl._)`${e}${n.scopePath}`})}scopeCode(e=this._values,r,n){return this._reduceValues(e,o=>{if(o.value===void 0)throw new Error(`CodeGen: name "${o}" has no value`);return o.value.code},r,n)}_reduceValues(e,r,n={},o){let s=wl.nil;for(let a in e){let c=e[a];if(!c)continue;let l=n[a]=n[a]||new Map;c.forEach(u=>{if(l.has(u))return;l.set(u,kZ.Started);let d=r(u);if(d){let f=this.opts.es5?Il.varKinds.var:Il.varKinds.const;s=(0,wl._)`${s}${f} ${u} = ${d};${this.opts._n}`}else if(d=o?.(u))s=(0,wl._)`${s}${d}${this.opts._n}`;else throw new jIe(u);l.set(u,kZ.Completed)})}return s}};Il.ValueScope=BIe});var Sr=m(Cr=>{"use strict";Object.defineProperty(Cr,"__esModule",{value:!0});Cr.or=Cr.and=Cr.not=Cr.CodeGen=Cr.operators=Cr.varKinds=Cr.ValueScopeName=Cr.ValueScope=Cr.Scope=Cr.Name=Cr.regexpCode=Cr.stringify=Cr.getProperty=Cr.nil=Cr.strConcat=Cr.str=Cr._=void 0;var Xr=n6(),T0=$Ie(),Vy=n6();Object.defineProperty(Cr,"_",{enumerable:!0,get:function(){return Vy._}});Object.defineProperty(Cr,"str",{enumerable:!0,get:function(){return Vy.str}});Object.defineProperty(Cr,"strConcat",{enumerable:!0,get:function(){return Vy.strConcat}});Object.defineProperty(Cr,"nil",{enumerable:!0,get:function(){return Vy.nil}});Object.defineProperty(Cr,"getProperty",{enumerable:!0,get:function(){return Vy.getProperty}});Object.defineProperty(Cr,"stringify",{enumerable:!0,get:function(){return Vy.stringify}});Object.defineProperty(Cr,"regexpCode",{enumerable:!0,get:function(){return Vy.regexpCode}});Object.defineProperty(Cr,"Name",{enumerable:!0,get:function(){return Vy.Name}});var BZ=$Ie();Object.defineProperty(Cr,"Scope",{enumerable:!0,get:function(){return BZ.Scope}});Object.defineProperty(Cr,"ValueScope",{enumerable:!0,get:function(){return BZ.ValueScope}});Object.defineProperty(Cr,"ValueScopeName",{enumerable:!0,get:function(){return BZ.ValueScopeName}});Object.defineProperty(Cr,"varKinds",{enumerable:!0,get:function(){return BZ.varKinds}});Cr.operators={GT:new Xr._Code(">"),GTE:new Xr._Code(">="),LT:new Xr._Code("<"),LTE:new Xr._Code("<="),EQ:new Xr._Code("==="),NEQ:new Xr._Code("!=="),NOT:new Xr._Code("!"),OR:new Xr._Code("||"),AND:new Xr._Code("&&"),ADD:new Xr._Code("+")};var i_=class{optimizeNodes(){return this}optimizeNames(e,r){return this}},VIe=class extends i_{constructor(e,r,n){super(),this.varKind=e,this.name=r,this.rhs=n}render({es5:e,_n:r}){let n=e?T0.varKinds.var:this.varKind,o=this.rhs===void 0?"":` = ${this.rhs}`;return`${n} ${this.name}${o};`+r}optimizeNames(e,r){if(e[this.name.str])return this.rhs&&(this.rhs=y2(this.rhs,e,r)),this}get names(){return this.rhs instanceof Xr._CodeOrName?this.rhs.names:{}}},qZ=class extends i_{constructor(e,r,n){super(),this.lhs=e,this.rhs=r,this.sideEffects=n}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,r){if(!(this.lhs instanceof Xr.Name&&!e[this.lhs.str]&&!this.sideEffects))return this.rhs=y2(this.rhs,e,r),this}get names(){let e=this.lhs instanceof Xr.Name?{}:{...this.lhs.names};return jZ(e,this.rhs)}},HIe=class extends qZ{constructor(e,r,n,o){super(e,n,o),this.op=r}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}},GIe=class extends i_{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}},zIe=class extends i_{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}},WIe=class extends i_{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}},KIe=class extends i_{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,r){return this.code=y2(this.code,e,r),this}get names(){return this.code instanceof Xr._CodeOrName?this.code.names:{}}},i6=class extends i_{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce((r,n)=>r+n.render(e),"")}optimizeNodes(){let{nodes:e}=this,r=e.length;for(;r--;){let n=e[r].optimizeNodes();Array.isArray(n)?e.splice(r,1,...n):n?e[r]=n:e.splice(r,1)}return e.length>0?this:void 0}optimizeNames(e,r){let{nodes:n}=this,o=n.length;for(;o--;){let s=n[o];s.optimizeNames(e,r)||(o_n(e,s.names),n.splice(o,1))}return n.length>0?this:void 0}get names(){return this.nodes.reduce((e,r)=>dA(e,r.names),{})}},o_=class extends i6{render(e){return"{"+e._n+super.render(e)+"}"+e._n}},YIe=class extends i6{},v2=class extends o_{};v2.kind="else";var lA=class t extends o_{constructor(e,r){super(r),this.condition=e}render(e){let r=`if(${this.condition})`+super.render(e);return this.else&&(r+="else "+this.else.render(e)),r}optimizeNodes(){super.optimizeNodes();let e=this.condition;if(e===!0)return this.nodes;let r=this.else;if(r){let n=r.optimizeNodes();r=this.else=Array.isArray(n)?new v2(n):n}if(r)return e===!1?r instanceof t?r:r.nodes:this.nodes.length?this:new t(kPt(e),r instanceof t?[r]:r.nodes);if(!(e===!1||!this.nodes.length))return this}optimizeNames(e,r){var n;if(this.else=(n=this.else)===null||n===void 0?void 0:n.optimizeNames(e,r),!!(super.optimizeNames(e,r)||this.else))return this.condition=y2(this.condition,e,r),this}get names(){let e=super.names;return jZ(e,this.condition),this.else&&dA(e,this.else.names),e}};lA.kind="if";var uA=class extends o_{};uA.kind="for";var QIe=class extends uA{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iteration=y2(this.iteration,e,r),this}get names(){return dA(super.names,this.iteration.names)}},ZIe=class extends uA{constructor(e,r,n,o){super(),this.varKind=e,this.name=r,this.from=n,this.to=o}render(e){let r=e.es5?T0.varKinds.var:this.varKind,{name:n,from:o,to:s}=this;return`for(${r} ${n}=${o}; ${n}<${s}; ${n}++)`+super.render(e)}get names(){let e=jZ(super.names,this.from);return jZ(e,this.to)}},FZ=class extends uA{constructor(e,r,n,o){super(),this.loop=e,this.varKind=r,this.name=n,this.iterable=o}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iterable=y2(this.iterable,e,r),this}get names(){return dA(super.names,this.iterable.names)}},o6=class extends o_{constructor(e,r,n){super(),this.name=e,this.args=r,this.async=n}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}};o6.kind="func";var s6=class extends i6{render(e){return"return "+super.render(e)}};s6.kind="return";var JIe=class extends o_{render(e){let r="try"+super.render(e);return this.catch&&(r+=this.catch.render(e)),this.finally&&(r+=this.finally.render(e)),r}optimizeNodes(){var e,r;return super.optimizeNodes(),(e=this.catch)===null||e===void 0||e.optimizeNodes(),(r=this.finally)===null||r===void 0||r.optimizeNodes(),this}optimizeNames(e,r){var n,o;return super.optimizeNames(e,r),(n=this.catch)===null||n===void 0||n.optimizeNames(e,r),(o=this.finally)===null||o===void 0||o.optimizeNames(e,r),this}get names(){let e=super.names;return this.catch&&dA(e,this.catch.names),this.finally&&dA(e,this.finally.names),e}},a6=class extends o_{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}};a6.kind="catch";var c6=class extends o_{render(e){return"finally"+super.render(e)}};c6.kind="finally";var XIe=class{constructor(e,r={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...r,_n:r.lines?`
`:""},this._extScope=e,this._scope=new T0.Scope({parent:e}),this._nodes=[new YIe]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,r){let n=this._extScope.value(e,r);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}getScopeValue(e,r){return this._extScope.getValue(e,r)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,r,n,o){let s=this._scope.toName(r);return n!==void 0&&o&&(this._constants[s.str]=n),this._leafNode(new VIe(e,s,n)),s}const(e,r,n){return this._def(T0.varKinds.const,e,r,n)}let(e,r,n){return this._def(T0.varKinds.let,e,r,n)}var(e,r,n){return this._def(T0.varKinds.var,e,r,n)}assign(e,r,n){return this._leafNode(new qZ(e,r,n))}add(e,r){return this._leafNode(new HIe(e,Cr.operators.ADD,r))}code(e){return typeof e=="function"?e():e!==Xr.nil&&this._leafNode(new KIe(e)),this}object(...e){let r=["{"];for(let[n,o]of e)r.length>1&&r.push(","),r.push(n),(n!==o||this.opts.es5)&&(r.push(":"),(0,Xr.addCodeArg)(r,o));return r.push("}"),new Xr._Code(r)}if(e,r,n){if(this._blockNode(new lA(e)),r&&n)this.code(r).else().code(n).endIf();else if(r)this.code(r).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new lA(e))}else(){return this._elseNode(new v2)}endIf(){return this._endBlockNode(lA,v2)}_for(e,r){return this._blockNode(e),r&&this.code(r).endFor(),this}for(e,r){return this._for(new QIe(e),r)}forRange(e,r,n,o,s=this.opts.es5?T0.varKinds.var:T0.varKinds.let){let a=this._scope.toName(e);return this._for(new ZIe(s,a,r,n),()=>o(a))}forOf(e,r,n,o=T0.varKinds.const){let s=this._scope.toName(e);if(this.opts.es5){let a=r instanceof Xr.Name?r:this.var("_arr",r);return this.forRange("_i",0,(0,Xr._)`${a}.length`,c=>{this.var(s,(0,Xr._)`${a}[${c}]`),n(s)})}return this._for(new FZ("of",o,s,r),()=>n(s))}forIn(e,r,n,o=this.opts.es5?T0.varKinds.var:T0.varKinds.const){if(this.opts.ownProperties)return this.forOf(e,(0,Xr._)`Object.keys(${r})`,n);let s=this._scope.toName(e);return this._for(new FZ("in",o,s,r),()=>n(s))}endFor(){return this._endBlockNode(uA)}label(e){return this._leafNode(new GIe(e))}break(e){return this._leafNode(new zIe(e))}return(e){let r=new s6;if(this._blockNode(r),this.code(e),r.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(s6)}try(e,r,n){if(!r&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');let o=new JIe;if(this._blockNode(o),this.code(e),r){let s=this.name("e");this._currNode=o.catch=new a6(s),r(s)}return n&&(this._currNode=o.finally=new c6,this.code(n)),this._endBlockNode(a6,c6)}throw(e){return this._leafNode(new WIe(e))}block(e,r){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(r),this}endBlock(e){let r=this._blockStarts.pop();if(r===void 0)throw new Error("CodeGen: not in self-balancing block");let n=this._nodes.length-r;if(n<0||e!==void 0&&n!==e)throw new Error(`CodeGen: wrong number of nodes: ${n} vs ${e} expected`);return this._nodes.length=r,this}func(e,r=Xr.nil,n,o){return this._blockNode(new o6(e,r,n)),o&&this.code(o).endFunc(),this}endFunc(){return this._endBlockNode(o6)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,r){let n=this._currNode;if(n instanceof e||r&&n instanceof r)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${r?`${e.kind}/${r.kind}`:e.kind}"`)}_elseNode(e){let r=this._currNode;if(!(r instanceof lA))throw new Error('CodeGen: "else" without "if"');return this._currNode=r.else=e,this}get _root(){return this._nodes[0]}get _currNode(){let e=this._nodes;return e[e.length-1]}set _currNode(e){let r=this._nodes;r[r.length-1]=e}};Cr.CodeGen=XIe;function dA(t,e){for(let r in e)t[r]=(t[r]||0)+(e[r]||0);return t}function jZ(t,e){return e instanceof Xr._CodeOrName?dA(t,e.names):t}function y2(t,e,r){if(t instanceof Xr.Name)return n(t);if(!o(t))return t;return new Xr._Code(t._items.reduce((s,a)=>(a instanceof Xr.Name&&(a=n(a)),a instanceof Xr._Code?s.push(...a._items):s.push(a),s),[]));function n(s){let a=r[s.str];return a===void 0||e[s.str]!==1?s:(delete e[s.str],a)}function o(s){return s instanceof Xr._Code&&s._items.some(a=>a instanceof Xr.Name&&e[a.str]===1&&r[a.str]!==void 0)}}function o_n(t,e){for(let r in e)t[r]=(t[r]||0)-(e[r]||0)}function kPt(t){return typeof t=="boolean"||typeof t=="number"||t===null?!t:(0,Xr._)`!${ePe(t)}`}Cr.not=kPt;var s_n=DPt(Cr.operators.AND);function a_n(...t){return t.reduce(s_n)}Cr.and=a_n;var c_n=DPt(Cr.operators.OR);function l_n(...t){return t.reduce(c_n)}Cr.or=l_n;function DPt(t){return(e,r)=>e===Xr.nil?r:r===Xr.nil?e:(0,Xr._)`${ePe(e)} ${t} ${ePe(r)}`}function ePe(t){return t instanceof Xr.Name?t:(0,Xr._)`(${t})`}});var an=m(Ir=>{"use strict";Object.defineProperty(Ir,"__esModule",{value:!0});Ir.checkStrictMode=Ir.getErrorPath=Ir.Type=Ir.useFunc=Ir.setEvaluated=Ir.evaluatedPropsToName=Ir.mergeEvaluated=Ir.eachItem=Ir.unescapeJsonPointer=Ir.escapeJsonPointer=Ir.escapeFragment=Ir.unescapeFragment=Ir.schemaRefOrVal=Ir.schemaHasRulesButRef=Ir.schemaHasRules=Ir.checkUnknownRules=Ir.alwaysValidSchema=Ir.toHash=void 0;var Hn=Sr(),u_n=n6();function d_n(t){let e={};for(let r of t)e[r]=!0;return e}Ir.toHash=d_n;function f_n(t,e){return typeof e=="boolean"?e:Object.keys(e).length===0?!0:(FPt(t,e),!jPt(e,t.self.RULES.all))}Ir.alwaysValidSchema=f_n;function FPt(t,e=t.schema){let{opts:r,self:n}=t;if(!r.strictSchema||typeof e=="boolean")return;let o=n.RULES.keywords;for(let s in e)o[s]||VPt(t,`unknown keyword: "${s}"`)}Ir.checkUnknownRules=FPt;function jPt(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(e[r])return!0;return!1}Ir.schemaHasRules=jPt;function p_n(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(r!=="$ref"&&e.all[r])return!0;return!1}Ir.schemaHasRulesButRef=p_n;function h_n({topSchemaRef:t,schemaPath:e},r,n,o){if(!o){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,Hn._)`${r}`}return(0,Hn._)`${t}${e}${(0,Hn.getProperty)(n)}`}Ir.schemaRefOrVal=h_n;function m_n(t){return BPt(decodeURIComponent(t))}Ir.unescapeFragment=m_n;function g_n(t){return encodeURIComponent(rPe(t))}Ir.escapeFragment=g_n;function rPe(t){return typeof t=="number"?`${t}`:t.replace(/~/g,"~0").replace(/\//g,"~1")}Ir.escapeJsonPointer=rPe;function BPt(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}Ir.unescapeJsonPointer=BPt;function __n(t,e){if(Array.isArray(t))for(let r of t)e(r);else e(t)}Ir.eachItem=__n;function UPt({mergeNames:t,mergeToName:e,mergeValues:r,resultToName:n}){return(o,s,a,c)=>{let l=a===void 0?s:a instanceof Hn.Name?(s instanceof Hn.Name?t(o,s,a):e(o,s,a),a):s instanceof Hn.Name?(e(o,a,s),s):r(s,a);return c===Hn.Name&&!(l instanceof Hn.Name)?n(o,l):l}}Ir.mergeEvaluated={props:UPt({mergeNames:(t,e,r)=>t.if((0,Hn._)`${r} !== true && ${e} !== undefined`,()=>{t.if((0,Hn._)`${e} === true`,()=>t.assign(r,!0),()=>t.assign(r,(0,Hn._)`${r} || {}`).code((0,Hn._)`Object.assign(${r}, ${e})`))}),mergeToName:(t,e,r)=>t.if((0,Hn._)`${r} !== true`,()=>{e===!0?t.assign(r,!0):(t.assign(r,(0,Hn._)`${r} || {}`),nPe(t,r,e))}),mergeValues:(t,e)=>t===!0?!0:{...t,...e},resultToName:$Pt}),items:UPt({mergeNames:(t,e,r)=>t.if((0,Hn._)`${r} !== true && ${e} !== undefined`,()=>t.assign(r,(0,Hn._)`${e} === true ? true : ${r} > ${e} ? ${r} : ${e}`)),mergeToName:(t,e,r)=>t.if((0,Hn._)`${r} !== true`,()=>t.assign(r,e===!0?!0:(0,Hn._)`${r} > ${e} ? ${r} : ${e}`)),mergeValues:(t,e)=>t===!0?!0:Math.max(t,e),resultToName:(t,e)=>t.var("items",e)})};function $Pt(t,e){if(e===!0)return t.var("props",!0);let r=t.var("props",(0,Hn._)`{}`);return e!==void 0&&nPe(t,r,e),r}Ir.evaluatedPropsToName=$Pt;function nPe(t,e,r){Object.keys(r).forEach(n=>t.assign((0,Hn._)`${e}${(0,Hn.getProperty)(n)}`,!0))}Ir.setEvaluated=nPe;var qPt={};function v_n(t,e){return t.scopeValue("func",{ref:e,code:qPt[e.code]||(qPt[e.code]=new u_n._Code(e.code))})}Ir.useFunc=v_n;var tPe;(function(t){t[t.Num=0]="Num",t[t.Str=1]="Str"})(tPe||(Ir.Type=tPe={}));function y_n(t,e,r){if(t instanceof Hn.Name){let n=e===tPe.Num;return r?n?(0,Hn._)`"[" + ${t} + "]"`:(0,Hn._)`"['" + ${t} + "']"`:n?(0,Hn._)`"/" + ${t}`:(0,Hn._)`"/" + ${t}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,Hn.getProperty)(t).toString():"/"+rPe(t)}Ir.getErrorPath=y_n;function VPt(t,e,r=t.opts.strictSchema){if(r){if(e=`strict mode: ${e}`,r===!0)throw new Error(e);t.self.logger.warn(e)}}Ir.checkStrictMode=VPt});var s_=m(iPe=>{"use strict";Object.defineProperty(iPe,"__esModule",{value:!0});var Ma=Sr(),E_n={data:new Ma.Name("data"),valCxt:new Ma.Name("valCxt"),instancePath:new Ma.Name("instancePath"),parentData:new Ma.Name("parentData"),parentDataProperty:new Ma.Name("parentDataProperty"),rootData:new Ma.Name("rootData"),dynamicAnchors:new Ma.Name("dynamicAnchors"),vErrors:new Ma.Name("vErrors"),errors:new Ma.Name("errors"),this:new Ma.Name("this"),self:new Ma.Name("self"),scope:new Ma.Name("scope"),json:new Ma.Name("json"),jsonPos:new Ma.Name("jsonPos"),jsonLen:new Ma.Name("jsonLen"),jsonPart:new Ma.Name("jsonPart")};iPe.default=E_n});var l6=m(Na=>{"use strict";Object.defineProperty(Na,"__esModule",{value:!0});Na.extendErrors=Na.resetErrorsCount=Na.reportExtraError=Na.reportError=Na.keyword$DataError=Na.keywordError=void 0;var on=Sr(),$Z=an(),hc=s_();Na.keywordError={message:({keyword:t})=>(0,on.str)`must pass "${t}" keyword validation`};Na.keyword$DataError={message:({keyword:t,schemaType:e})=>e?(0,on.str)`"${t}" keyword must be ${e} ($data)`:(0,on.str)`"${t}" keyword is invalid ($data)`};function T_n(t,e=Na.keywordError,r,n){let{it:o}=t,{gen:s,compositeRule:a,allErrors:c}=o,l=zPt(t,e,r);n??(a||c)?HPt(s,l):GPt(o,(0,on._)`[${l}]`)}Na.reportError=T_n;function S_n(t,e=Na.keywordError,r){let{it:n}=t,{gen:o,compositeRule:s,allErrors:a}=n,c=zPt(t,e,r);HPt(o,c),s||a||GPt(n,hc.default.vErrors)}Na.reportExtraError=S_n;function b_n(t,e){t.assign(hc.default.errors,e),t.if((0,on._)`${hc.default.vErrors} !== null`,()=>t.if(e,()=>t.assign((0,on._)`${hc.default.vErrors}.length`,e),()=>t.assign(hc.default.vErrors,null)))}Na.resetErrorsCount=b_n;function C_n({gen:t,keyword:e,schemaValue:r,data:n,errsCount:o,it:s}){if(o===void 0)throw new Error("ajv implementation error");let a=t.name("err");t.forRange("i",o,hc.default.errors,c=>{t.const(a,(0,on._)`${hc.default.vErrors}[${c}]`),t.if((0,on._)`${a}.instancePath === undefined`,()=>t.assign((0,on._)`${a}.instancePath`,(0,on.strConcat)(hc.default.instancePath,s.errorPath))),t.assign((0,on._)`${a}.schemaPath`,(0,on.str)`${s.errSchemaPath}/${e}`),s.opts.verbose&&(t.assign((0,on._)`${a}.schema`,r),t.assign((0,on._)`${a}.data`,n))})}Na.extendErrors=C_n;function HPt(t,e){let r=t.const("err",e);t.if((0,on._)`${hc.default.vErrors} === null`,()=>t.assign(hc.default.vErrors,(0,on._)`[${r}]`),(0,on._)`${hc.default.vErrors}.push(${r})`),t.code((0,on._)`${hc.default.errors}++`)}function GPt(t,e){let{gen:r,validateName:n,schemaEnv:o}=t;o.$async?r.throw((0,on._)`new ${t.ValidationError}(${e})`):(r.assign((0,on._)`${n}.errors`,e),r.return(!1))}var fA={keyword:new on.Name("keyword"),schemaPath:new on.Name("schemaPath"),params:new on.Name("params"),propertyName:new on.Name("propertyName"),message:new on.Name("message"),schema:new on.Name("schema"),parentSchema:new on.Name("parentSchema")};function zPt(t,e,r){let{createErrors:n}=t.it;return n===!1?(0,on._)`{}`:A_n(t,e,r)}function A_n(t,e,r={}){let{gen:n,it:o}=t,s=[x_n(o,r),w_n(t,r)];return I_n(t,e,s),n.object(...s)}function x_n({errorPath:t},{instancePath:e}){let r=e?(0,on.str)`${t}${(0,$Z.getErrorPath)(e,$Z.Type.Str)}`:t;return[hc.default.instancePath,(0,on.strConcat)(hc.default.instancePath,r)]}function w_n({keyword:t,it:{errSchemaPath:e}},{schemaPath:r,parentSchema:n}){let o=n?e:(0,on.str)`${e}/${t}`;return r&&(o=(0,on.str)`${o}${(0,$Z.getErrorPath)(r,$Z.Type.Str)}`),[fA.schemaPath,o]}function I_n(t,{params:e,message:r},n){let{keyword:o,data:s,schemaValue:a,it:c}=t,{opts:l,propertyName:u,topSchemaRef:d,schemaPath:f}=c;n.push([fA.keyword,o],[fA.params,typeof e=="function"?e(t):e||(0,on._)`{}`]),l.messages&&n.push([fA.message,typeof r=="function"?r(t):r]),l.verbose&&n.push([fA.schema,a],[fA.parentSchema,(0,on._)`${d}${f}`],[hc.default.data,s]),u&&n.push([fA.propertyName,u])}});var KPt=m(E2=>{"use strict";Object.defineProperty(E2,"__esModule",{value:!0});E2.boolOrEmptySchema=E2.topBoolOrEmptySchema=void 0;var P_n=l6(),R_n=Sr(),O_n=s_(),M_n={message:"boolean schema is false"};function N_n(t){let{gen:e,schema:r,validateName:n}=t;r===!1?WPt(t,!1):typeof r=="object"&&r.$async===!0?e.return(O_n.default.data):(e.assign((0,R_n._)`${n}.errors`,null),e.return(!0))}E2.topBoolOrEmptySchema=N_n;function L_n(t,e){let{gen:r,schema:n}=t;n===!1?(r.var(e,!1),WPt(t)):r.var(e,!0)}E2.boolOrEmptySchema=L_n;function WPt(t,e){let{gen:r,data:n}=t,o={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,P_n.reportError)(o,M_n,void 0,e)}});var oPe=m(T2=>{"use strict";Object.defineProperty(T2,"__esModule",{value:!0});T2.getRules=T2.isJSONType=void 0;var k_n=["string","number","integer","boolean","null","object","array"],D_n=new Set(k_n);function U_n(t){return typeof t=="string"&&D_n.has(t)}T2.isJSONType=U_n;function q_n(){let t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}T2.getRules=q_n});var sPe=m(Hy=>{"use strict";Object.defineProperty(Hy,"__esModule",{value:!0});Hy.shouldUseRule=Hy.shouldUseGroup=Hy.schemaHasRulesForType=void 0;function F_n({schema:t,self:e},r){let n=e.RULES.types[r];return n&&n!==!0&&YPt(t,n)}Hy.schemaHasRulesForType=F_n;function YPt(t,e){return e.rules.some(r=>QPt(t,r))}Hy.shouldUseGroup=YPt;function QPt(t,e){var r;return t[e.keyword]!==void 0||((r=e.definition.implements)===null||r===void 0?void 0:r.some(n=>t[n]!==void 0))}Hy.shouldUseRule=QPt});var u6=m(La=>{"use strict";Object.defineProperty(La,"__esModule",{value:!0});La.reportTypeError=La.checkDataTypes=La.checkDataType=La.coerceAndCheckDataType=La.getJSONTypes=La.getSchemaTypes=La.DataType=void 0;var j_n=oPe(),B_n=sPe(),$_n=l6(),gr=Sr(),ZPt=an(),S2;(function(t){t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong"})(S2||(La.DataType=S2={}));function V_n(t){let e=JPt(t.type);if(e.includes("null")){if(t.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&t.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');t.nullable===!0&&e.push("null")}return e}La.getSchemaTypes=V_n;function JPt(t){let e=Array.isArray(t)?t:t?[t]:[];if(e.every(j_n.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}La.getJSONTypes=JPt;function H_n(t,e){let{gen:r,data:n,opts:o}=t,s=G_n(e,o.coerceTypes),a=e.length>0&&!(s.length===0&&e.length===1&&(0,B_n.schemaHasRulesForType)(t,e[0]));if(a){let c=cPe(e,n,o.strictNumbers,S2.Wrong);r.if(c,()=>{s.length?z_n(t,e,s):lPe(t)})}return a}La.coerceAndCheckDataType=H_n;var XPt=new Set(["string","number","integer","boolean","null"]);function G_n(t,e){return e?t.filter(r=>XPt.has(r)||e==="array"&&r==="array"):[]}function z_n(t,e,r){let{gen:n,data:o,opts:s}=t,a=n.let("dataType",(0,gr._)`typeof ${o}`),c=n.let("coerced",(0,gr._)`undefined`);s.coerceTypes==="array"&&n.if((0,gr._)`${a} == 'object' && Array.isArray(${o}) && ${o}.length == 1`,()=>n.assign(o,(0,gr._)`${o}[0]`).assign(a,(0,gr._)`typeof ${o}`).if(cPe(e,o,s.strictNumbers),()=>n.assign(c,o))),n.if((0,gr._)`${c} !== undefined`);for(let u of r)(XPt.has(u)||u==="array"&&s.coerceTypes==="array")&&l(u);n.else(),lPe(t),n.endIf(),n.if((0,gr._)`${c} !== undefined`,()=>{n.assign(o,c),W_n(t,c)});function l(u){switch(u){case"string":n.elseIf((0,gr._)`${a} == "number" || ${a} == "boolean"`).assign(c,(0,gr._)`"" + ${o}`).elseIf((0,gr._)`${o} === null`).assign(c,(0,gr._)`""`);return;case"number":n.elseIf((0,gr._)`${a} == "boolean" || ${o} === null
              || (${a} == "string" && ${o} && ${o} == +${o})`).assign(c,(0,gr._)`+${o}`);return;case"integer":n.elseIf((0,gr._)`${a} === "boolean" || ${o} === null
              || (${a} === "string" && ${o} && ${o} == +${o} && !(${o} % 1))`).assign(c,(0,gr._)`+${o}`);return;case"boolean":n.elseIf((0,gr._)`${o} === "false" || ${o} === 0 || ${o} === null`).assign(c,!1).elseIf((0,gr._)`${o} === "true" || ${o} === 1`).assign(c,!0);return;case"null":n.elseIf((0,gr._)`${o} === "" || ${o} === 0 || ${o} === false`),n.assign(c,null);return;case"array":n.elseIf((0,gr._)`${a} === "string" || ${a} === "number"
              || ${a} === "boolean" || ${o} === null`).assign(c,(0,gr._)`[${o}]`)}}}function W_n({gen:t,parentData:e,parentDataProperty:r},n){t.if((0,gr._)`${e} !== undefined`,()=>t.assign((0,gr._)`${e}[${r}]`,n))}function aPe(t,e,r,n=S2.Correct){let o=n===S2.Correct?gr.operators.EQ:gr.operators.NEQ,s;switch(t){case"null":return(0,gr._)`${e} ${o} null`;case"array":s=(0,gr._)`Array.isArray(${e})`;break;case"object":s=(0,gr._)`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":s=a((0,gr._)`!(${e} % 1) && !isNaN(${e})`);break;case"number":s=a();break;default:return(0,gr._)`typeof ${e} ${o} ${t}`}return n===S2.Correct?s:(0,gr.not)(s);function a(c=gr.nil){return(0,gr.and)((0,gr._)`typeof ${e} == "number"`,c,r?(0,gr._)`isFinite(${e})`:gr.nil)}}La.checkDataType=aPe;function cPe(t,e,r,n){if(t.length===1)return aPe(t[0],e,r,n);let o,s=(0,ZPt.toHash)(t);if(s.array&&s.object){let a=(0,gr._)`typeof ${e} != "object"`;o=s.null?a:(0,gr._)`!${e} || ${a}`,delete s.null,delete s.array,delete s.object}else o=gr.nil;s.number&&delete s.integer;for(let a in s)o=(0,gr.and)(o,aPe(a,e,r,n));return o}La.checkDataTypes=cPe;var K_n={message:({schema:t})=>`must be ${t}`,params:({schema:t,schemaValue:e})=>typeof t=="string"?(0,gr._)`{type: ${t}}`:(0,gr._)`{type: ${e}}`};function lPe(t){let e=Y_n(t);(0,$_n.reportError)(e,K_n)}La.reportTypeError=lPe;function Y_n(t){let{gen:e,data:r,schema:n}=t,o=(0,ZPt.schemaRefOrVal)(t,n,"type");return{gen:e,keyword:"type",data:r,schema:n.type,schemaCode:o,schemaValue:o,parentSchema:n,params:{},it:t}}});var tRt=m(VZ=>{"use strict";Object.defineProperty(VZ,"__esModule",{value:!0});VZ.assignDefaults=void 0;var b2=Sr(),Q_n=an();function Z_n(t,e){let{properties:r,items:n}=t.schema;if(e==="object"&&r)for(let o in r)eRt(t,o,r[o].default);else e==="array"&&Array.isArray(n)&&n.forEach((o,s)=>eRt(t,s,o.default))}VZ.assignDefaults=Z_n;function eRt(t,e,r){let{gen:n,compositeRule:o,data:s,opts:a}=t;if(r===void 0)return;let c=(0,b2._)`${s}${(0,b2.getProperty)(e)}`;if(o){(0,Q_n.checkStrictMode)(t,`default is ignored for: ${c}`);return}let l=(0,b2._)`${c} === undefined`;a.useDefaults==="empty"&&(l=(0,b2._)`${l} || ${c} === null || ${c} === ""`),n.if(l,(0,b2._)`${c} = ${(0,b2.stringify)(r)}`)}});var kd=m(kn=>{"use strict";Object.defineProperty(kn,"__esModule",{value:!0});kn.validateUnion=kn.validateArray=kn.usePattern=kn.callValidateCode=kn.schemaProperties=kn.allSchemaProperties=kn.noPropertyInData=kn.propertyInData=kn.isOwnProperty=kn.hasPropFunc=kn.reportMissingProp=kn.checkMissingProp=kn.checkReportMissingProp=void 0;var pi=Sr(),uPe=an(),Gy=s_(),J_n=an();function X_n(t,e){let{gen:r,data:n,it:o}=t;r.if(fPe(r,n,e,o.opts.ownProperties),()=>{t.setParams({missingProperty:(0,pi._)`${e}`},!0),t.error()})}kn.checkReportMissingProp=X_n;function e1n({gen:t,data:e,it:{opts:r}},n,o){return(0,pi.or)(...n.map(s=>(0,pi.and)(fPe(t,e,s,r.ownProperties),(0,pi._)`${o} = ${s}`)))}kn.checkMissingProp=e1n;function t1n(t,e){t.setParams({missingProperty:e},!0),t.error()}kn.reportMissingProp=t1n;function rRt(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,pi._)`Object.prototype.hasOwnProperty`})}kn.hasPropFunc=rRt;function dPe(t,e,r){return(0,pi._)`${rRt(t)}.call(${e}, ${r})`}kn.isOwnProperty=dPe;function r1n(t,e,r,n){let o=(0,pi._)`${e}${(0,pi.getProperty)(r)} !== undefined`;return n?(0,pi._)`${o} && ${dPe(t,e,r)}`:o}kn.propertyInData=r1n;function fPe(t,e,r,n){let o=(0,pi._)`${e}${(0,pi.getProperty)(r)} === undefined`;return n?(0,pi.or)(o,(0,pi.not)(dPe(t,e,r))):o}kn.noPropertyInData=fPe;function nRt(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}kn.allSchemaProperties=nRt;function n1n(t,e){return nRt(e).filter(r=>!(0,uPe.alwaysValidSchema)(t,e[r]))}kn.schemaProperties=n1n;function i1n({schemaCode:t,data:e,it:{gen:r,topSchemaRef:n,schemaPath:o,errorPath:s},it:a},c,l,u){let d=u?(0,pi._)`${t}, ${e}, ${n}${o}`:e,f=[[Gy.default.instancePath,(0,pi.strConcat)(Gy.default.instancePath,s)],[Gy.default.parentData,a.parentData],[Gy.default.parentDataProperty,a.parentDataProperty],[Gy.default.rootData,Gy.default.rootData]];a.opts.dynamicRef&&f.push([Gy.default.dynamicAnchors,Gy.default.dynamicAnchors]);let p=(0,pi._)`${d}, ${r.object(...f)}`;return l!==pi.nil?(0,pi._)`${c}.call(${l}, ${p})`:(0,pi._)`${c}(${p})`}kn.callValidateCode=i1n;var o1n=(0,pi._)`new RegExp`;function s1n({gen:t,it:{opts:e}},r){let n=e.unicodeRegExp?"u":"",{regExp:o}=e.code,s=o(r,n);return t.scopeValue("pattern",{key:s.toString(),ref:s,code:(0,pi._)`${o.code==="new RegExp"?o1n:(0,J_n.useFunc)(t,o)}(${r}, ${n})`})}kn.usePattern=s1n;function a1n(t){let{gen:e,data:r,keyword:n,it:o}=t,s=e.name("valid");if(o.allErrors){let c=e.let("valid",!0);return a(()=>e.assign(c,!1)),c}return e.var(s,!0),a(()=>e.break()),s;function a(c){let l=e.const("len",(0,pi._)`${r}.length`);e.forRange("i",0,l,u=>{t.subschema({keyword:n,dataProp:u,dataPropType:uPe.Type.Num},s),e.if((0,pi.not)(s),c)})}}kn.validateArray=a1n;function c1n(t){let{gen:e,schema:r,keyword:n,it:o}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(l=>(0,uPe.alwaysValidSchema)(o,l))&&!o.opts.unevaluated)return;let a=e.let("valid",!1),c=e.name("_valid");e.block(()=>r.forEach((l,u)=>{let d=t.subschema({keyword:n,schemaProp:u,compositeRule:!0},c);e.assign(a,(0,pi._)`${a} || ${c}`),t.mergeValidEvaluated(d,c)||e.if((0,pi.not)(a))})),t.result(a,()=>t.reset(),()=>t.error(!0))}kn.validateUnion=c1n});var sRt=m(Sh=>{"use strict";Object.defineProperty(Sh,"__esModule",{value:!0});Sh.validateKeywordUsage=Sh.validSchemaType=Sh.funcKeywordCode=Sh.macroKeywordCode=void 0;var mc=Sr(),pA=s_(),l1n=kd(),u1n=l6();function d1n(t,e){let{gen:r,keyword:n,schema:o,parentSchema:s,it:a}=t,c=e.macro.call(a.self,o,s,a),l=oRt(r,n,c);a.opts.validateSchema!==!1&&a.self.validateSchema(c,!0);let u=r.name("valid");t.subschema({schema:c,schemaPath:mc.nil,errSchemaPath:`${a.errSchemaPath}/${n}`,topSchemaRef:l,compositeRule:!0},u),t.pass(u,()=>t.error(!0))}Sh.macroKeywordCode=d1n;function f1n(t,e){var r;let{gen:n,keyword:o,schema:s,parentSchema:a,$data:c,it:l}=t;h1n(l,e);let u=!c&&e.compile?e.compile.call(l.self,s,a,l):e.validate,d=oRt(n,o,u),f=n.let("valid");t.block$data(f,p),t.ok((r=e.valid)!==null&&r!==void 0?r:f);function p(){if(e.errors===!1)g(),e.modifying&&iRt(t),v(()=>t.error());else{let E=e.async?h():_();e.modifying&&iRt(t),v(()=>p1n(t,E))}}function h(){let E=n.let("ruleErrs",null);return n.try(()=>g((0,mc._)`await `),y=>n.assign(f,!1).if((0,mc._)`${y} instanceof ${l.ValidationError}`,()=>n.assign(E,(0,mc._)`${y}.errors`),()=>n.throw(y))),E}function _(){let E=(0,mc._)`${d}.errors`;return n.assign(E,null),g(mc.nil),E}function g(E=e.async?(0,mc._)`await `:mc.nil){let y=l.opts.passContext?pA.default.this:pA.default.self,S=!("compile"in e&&!c||e.schema===!1);n.assign(f,(0,mc._)`${E}${(0,l1n.callValidateCode)(t,d,y,S)}`,e.modifying)}function v(E){var y;n.if((0,mc.not)((y=e.valid)!==null&&y!==void 0?y:f),E)}}Sh.funcKeywordCode=f1n;function iRt(t){let{gen:e,data:r,it:n}=t;e.if(n.parentData,()=>e.assign(r,(0,mc._)`${n.parentData}[${n.parentDataProperty}]`))}function p1n(t,e){let{gen:r}=t;r.if((0,mc._)`Array.isArray(${e})`,()=>{r.assign(pA.default.vErrors,(0,mc._)`${pA.default.vErrors} === null ? ${e} : ${pA.default.vErrors}.concat(${e})`).assign(pA.default.errors,(0,mc._)`${pA.default.vErrors}.length`),(0,u1n.extendErrors)(t)},()=>t.error())}function h1n({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}function oRt(t,e,r){if(r===void 0)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,mc.stringify)(r)})}function m1n(t,e,r=!1){return!e.length||e.some(n=>n==="array"?Array.isArray(t):n==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==n||r&&typeof t>"u")}Sh.validSchemaType=m1n;function g1n({schema:t,opts:e,self:r,errSchemaPath:n},o,s){if(Array.isArray(o.keyword)?!o.keyword.includes(s):o.keyword!==s)throw new Error("ajv implementation error");let a=o.dependencies;if(a?.some(c=>!Object.prototype.hasOwnProperty.call(t,c)))throw new Error(`parent schema must have dependencies of ${s}: ${a.join(",")}`);if(o.validateSchema&&!o.validateSchema(t[s])){let l=`keyword "${s}" value is invalid at path "${n}": `+r.errorsText(o.validateSchema.errors);if(e.validateSchema==="log")r.logger.error(l);else throw new Error(l)}}Sh.validateKeywordUsage=g1n});var cRt=m(zy=>{"use strict";Object.defineProperty(zy,"__esModule",{value:!0});zy.extendSubschemaMode=zy.extendSubschemaData=zy.getSubschema=void 0;var bh=Sr(),aRt=an();function _1n(t,{keyword:e,schemaProp:r,schema:n,schemaPath:o,errSchemaPath:s,topSchemaRef:a}){if(e!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){let c=t.schema[e];return r===void 0?{schema:c,schemaPath:(0,bh._)`${t.schemaPath}${(0,bh.getProperty)(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:c[r],schemaPath:(0,bh._)`${t.schemaPath}${(0,bh.getProperty)(e)}${(0,bh.getProperty)(r)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${(0,aRt.escapeFragment)(r)}`}}if(n!==void 0){if(o===void 0||s===void 0||a===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:o,topSchemaRef:a,errSchemaPath:s}}throw new Error('either "keyword" or "schema" must be passed')}zy.getSubschema=_1n;function v1n(t,e,{dataProp:r,dataPropType:n,data:o,dataTypes:s,propertyName:a}){if(o!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:c}=e;if(r!==void 0){let{errorPath:u,dataPathArr:d,opts:f}=e,p=c.let("data",(0,bh._)`${e.data}${(0,bh.getProperty)(r)}`,!0);l(p),t.errorPath=(0,bh.str)`${u}${(0,aRt.getErrorPath)(r,n,f.jsPropertySyntax)}`,t.parentDataProperty=(0,bh._)`${r}`,t.dataPathArr=[...d,t.parentDataProperty]}if(o!==void 0){let u=o instanceof bh.Name?o:c.let("data",o,!0);l(u),a!==void 0&&(t.propertyName=a)}s&&(t.dataTypes=s);function l(u){t.data=u,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,u]}}zy.extendSubschemaData=v1n;function y1n(t,{jtdDiscriminator:e,jtdMetadata:r,compositeRule:n,createErrors:o,allErrors:s}){n!==void 0&&(t.compositeRule=n),o!==void 0&&(t.createErrors=o),s!==void 0&&(t.allErrors=s),t.jtdDiscriminator=e,t.jtdMetadata=r}zy.extendSubschemaMode=y1n});var pPe=m((zdi,lRt)=>{"use strict";lRt.exports=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,o,s;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(o=n;o--!==0;)if(!t(e[o],r[o]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(s=Object.keys(e),n=s.length,n!==Object.keys(r).length)return!1;for(o=n;o--!==0;)if(!Object.prototype.hasOwnProperty.call(r,s[o]))return!1;for(o=n;o--!==0;){var a=s[o];if(!t(e[a],r[a]))return!1}return!0}return e!==e&&r!==r}});var dRt=m((Wdi,uRt)=>{"use strict";var Wy=uRt.exports=function(t,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var n=typeof r=="function"?r:r.pre||function(){},o=r.post||function(){};HZ(e,n,o,t,"",t)};Wy.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Wy.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Wy.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Wy.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function HZ(t,e,r,n,o,s,a,c,l,u){if(n&&typeof n=="object"&&!Array.isArray(n)){e(n,o,s,a,c,l,u);for(var d in n){var f=n[d];if(Array.isArray(f)){if(d in Wy.arrayKeywords)for(var p=0;p<f.length;p++)HZ(t,e,r,f[p],o+"/"+d+"/"+p,s,o,d,n,p)}else if(d in Wy.propsKeywords){if(f&&typeof f=="object")for(var h in f)HZ(t,e,r,f[h],o+"/"+d+"/"+E1n(h),s,o,d,n,h)}else(d in Wy.keywords||t.allKeys&&!(d in Wy.skipKeywords))&&HZ(t,e,r,f,o+"/"+d,s,o,d,n)}r(n,o,s,a,c,l,u)}}function E1n(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}});var d6=m(Pl=>{"use strict";Object.defineProperty(Pl,"__esModule",{value:!0});Pl.getSchemaRefs=Pl.resolveUrl=Pl.normalizeId=Pl._getFullPath=Pl.getFullPath=Pl.inlineRef=void 0;var T1n=an(),S1n=pPe(),b1n=dRt(),C1n=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function A1n(t,e=!0){return typeof t=="boolean"?!0:e===!0?!hPe(t):e?fRt(t)<=e:!1}Pl.inlineRef=A1n;var x1n=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function hPe(t){for(let e in t){if(x1n.has(e))return!0;let r=t[e];if(Array.isArray(r)&&r.some(hPe)||typeof r=="object"&&hPe(r))return!0}return!1}function fRt(t){let e=0;for(let r in t){if(r==="$ref")return 1/0;if(e++,!C1n.has(r)&&(typeof t[r]=="object"&&(0,T1n.eachItem)(t[r],n=>e+=fRt(n)),e===1/0))return 1/0}return e}function pRt(t,e="",r){r!==!1&&(e=C2(e));let n=t.parse(e);return hRt(t,n)}Pl.getFullPath=pRt;function hRt(t,e){return t.serialize(e).split("#")[0]+"#"}Pl._getFullPath=hRt;var w1n=/#\/?$/;function C2(t){return t?t.replace(w1n,""):""}Pl.normalizeId=C2;function I1n(t,e,r){return r=C2(r),t.resolve(e,r)}Pl.resolveUrl=I1n;var P1n=/^[a-z_][-a-z0-9._]*$/i;function R1n(t,e){if(typeof t=="boolean")return{};let{schemaId:r,uriResolver:n}=this.opts,o=C2(t[r]||e),s={"":o},a=pRt(n,o,!1),c={},l=new Set;return b1n(t,{allKeys:!0},(f,p,h,_)=>{if(_===void 0)return;let g=a+p,v=s[_];typeof f[r]=="string"&&(v=E.call(this,f[r])),y.call(this,f.$anchor),y.call(this,f.$dynamicAnchor),s[p]=v;function E(S){let b=this.opts.uriResolver.resolve;if(S=C2(v?b(v,S):S),l.has(S))throw d(S);l.add(S);let w=this.refs[S];return typeof w=="string"&&(w=this.refs[w]),typeof w=="object"?u(f,w.schema,S):S!==C2(g)&&(S[0]==="#"?(u(f,c[S],S),c[S]=f):this.refs[S]=g),S}function y(S){if(typeof S=="string"){if(!P1n.test(S))throw new Error(`invalid anchor "${S}"`);E.call(this,`#${S}`)}}}),c;function u(f,p,h){if(p!==void 0&&!S1n(f,p))throw d(h)}function d(f){return new Error(`reference "${f}" resolves to more than one schema`)}}Pl.getSchemaRefs=R1n});var h6=m(Ky=>{"use strict";Object.defineProperty(Ky,"__esModule",{value:!0});Ky.getData=Ky.KeywordCxt=Ky.validateFunctionCode=void 0;var yRt=KPt(),mRt=u6(),gPe=sPe(),GZ=u6(),O1n=tRt(),p6=sRt(),mPe=cRt(),_t=Sr(),Gt=s_(),M1n=d6(),a_=an(),f6=l6();function N1n(t){if(SRt(t)&&(bRt(t),TRt(t))){D1n(t);return}ERt(t,()=>(0,yRt.topBoolOrEmptySchema)(t))}Ky.validateFunctionCode=N1n;function ERt({gen:t,validateName:e,schema:r,schemaEnv:n,opts:o},s){o.code.es5?t.func(e,(0,_t._)`${Gt.default.data}, ${Gt.default.valCxt}`,n.$async,()=>{t.code((0,_t._)`"use strict"; ${gRt(r,o)}`),k1n(t,o),t.code(s)}):t.func(e,(0,_t._)`${Gt.default.data}, ${L1n(o)}`,n.$async,()=>t.code(gRt(r,o)).code(s))}function L1n(t){return(0,_t._)`{${Gt.default.instancePath}="", ${Gt.default.parentData}, ${Gt.default.parentDataProperty}, ${Gt.default.rootData}=${Gt.default.data}${t.dynamicRef?(0,_t._)`, ${Gt.default.dynamicAnchors}={}`:_t.nil}}={}`}function k1n(t,e){t.if(Gt.default.valCxt,()=>{t.var(Gt.default.instancePath,(0,_t._)`${Gt.default.valCxt}.${Gt.default.instancePath}`),t.var(Gt.default.parentData,(0,_t._)`${Gt.default.valCxt}.${Gt.default.parentData}`),t.var(Gt.default.parentDataProperty,(0,_t._)`${Gt.default.valCxt}.${Gt.default.parentDataProperty}`),t.var(Gt.default.rootData,(0,_t._)`${Gt.default.valCxt}.${Gt.default.rootData}`),e.dynamicRef&&t.var(Gt.default.dynamicAnchors,(0,_t._)`${Gt.default.valCxt}.${Gt.default.dynamicAnchors}`)},()=>{t.var(Gt.default.instancePath,(0,_t._)`""`),t.var(Gt.default.parentData,(0,_t._)`undefined`),t.var(Gt.default.parentDataProperty,(0,_t._)`undefined`),t.var(Gt.default.rootData,Gt.default.data),e.dynamicRef&&t.var(Gt.default.dynamicAnchors,(0,_t._)`{}`)})}function D1n(t){let{schema:e,opts:r,gen:n}=t;ERt(t,()=>{r.$comment&&e.$comment&&ARt(t),B1n(t),n.let(Gt.default.vErrors,null),n.let(Gt.default.errors,0),r.unevaluated&&U1n(t),CRt(t),H1n(t)})}function U1n(t){let{gen:e,validateName:r}=t;t.evaluated=e.const("evaluated",(0,_t._)`${r}.evaluated`),e.if((0,_t._)`${t.evaluated}.dynamicProps`,()=>e.assign((0,_t._)`${t.evaluated}.props`,(0,_t._)`undefined`)),e.if((0,_t._)`${t.evaluated}.dynamicItems`,()=>e.assign((0,_t._)`${t.evaluated}.items`,(0,_t._)`undefined`))}function gRt(t,e){let r=typeof t=="object"&&t[e.schemaId];return r&&(e.code.source||e.code.process)?(0,_t._)`/*# sourceURL=${r} */`:_t.nil}function q1n(t,e){if(SRt(t)&&(bRt(t),TRt(t))){F1n(t,e);return}(0,yRt.boolOrEmptySchema)(t,e)}function TRt({schema:t,self:e}){if(typeof t=="boolean")return!t;for(let r in t)if(e.RULES.all[r])return!0;return!1}function SRt(t){return typeof t.schema!="boolean"}function F1n(t,e){let{schema:r,gen:n,opts:o}=t;o.$comment&&r.$comment&&ARt(t),$1n(t),V1n(t);let s=n.const("_errs",Gt.default.errors);CRt(t,s),n.var(e,(0,_t._)`${s} === ${Gt.default.errors}`)}function bRt(t){(0,a_.checkUnknownRules)(t),j1n(t)}function CRt(t,e){if(t.opts.jtd)return _Rt(t,[],!1,e);let r=(0,mRt.getSchemaTypes)(t.schema),n=(0,mRt.coerceAndCheckDataType)(t,r);_Rt(t,r,!n,e)}function j1n(t){let{schema:e,errSchemaPath:r,opts:n,self:o}=t;e.$ref&&n.ignoreKeywordsWithRef&&(0,a_.schemaHasRulesButRef)(e,o.RULES)&&o.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function B1n(t){let{schema:e,opts:r}=t;e.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,a_.checkStrictMode)(t,"default is ignored in the schema root")}function $1n(t){let e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,M1n.resolveUrl)(t.opts.uriResolver,t.baseId,e))}function V1n(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function ARt({gen:t,schemaEnv:e,schema:r,errSchemaPath:n,opts:o}){let s=r.$comment;if(o.$comment===!0)t.code((0,_t._)`${Gt.default.self}.logger.log(${s})`);else if(typeof o.$comment=="function"){let a=(0,_t.str)`${n}/$comment`,c=t.scopeValue("root",{ref:e.root});t.code((0,_t._)`${Gt.default.self}.opts.$comment(${s}, ${a}, ${c}.schema)`)}}function H1n(t){let{gen:e,schemaEnv:r,validateName:n,ValidationError:o,opts:s}=t;r.$async?e.if((0,_t._)`${Gt.default.errors} === 0`,()=>e.return(Gt.default.data),()=>e.throw((0,_t._)`new ${o}(${Gt.default.vErrors})`)):(e.assign((0,_t._)`${n}.errors`,Gt.default.vErrors),s.unevaluated&&G1n(t),e.return((0,_t._)`${Gt.default.errors} === 0`))}function G1n({gen:t,evaluated:e,props:r,items:n}){r instanceof _t.Name&&t.assign((0,_t._)`${e}.props`,r),n instanceof _t.Name&&t.assign((0,_t._)`${e}.items`,n)}function _Rt(t,e,r,n){let{gen:o,schema:s,data:a,allErrors:c,opts:l,self:u}=t,{RULES:d}=u;if(s.$ref&&(l.ignoreKeywordsWithRef||!(0,a_.schemaHasRulesButRef)(s,d))){o.block(()=>wRt(t,"$ref",d.all.$ref.definition));return}l.jtd||z1n(t,e),o.block(()=>{for(let p of d.rules)f(p);f(d.post)});function f(p){(0,gPe.shouldUseGroup)(s,p)&&(p.type?(o.if((0,GZ.checkDataType)(p.type,a,l.strictNumbers)),vRt(t,p),e.length===1&&e[0]===p.type&&r&&(o.else(),(0,GZ.reportTypeError)(t)),o.endIf()):vRt(t,p),c||o.if((0,_t._)`${Gt.default.errors} === ${n||0}`))}}function vRt(t,e){let{gen:r,schema:n,opts:{useDefaults:o}}=t;o&&(0,O1n.assignDefaults)(t,e.type),r.block(()=>{for(let s of e.rules)(0,gPe.shouldUseRule)(n,s)&&wRt(t,s.keyword,s.definition,e.type)})}function z1n(t,e){t.schemaEnv.meta||!t.opts.strictTypes||(W1n(t,e),t.opts.allowUnionTypes||K1n(t,e),Y1n(t,t.dataTypes))}function W1n(t,e){if(e.length){if(!t.dataTypes.length){t.dataTypes=e;return}e.forEach(r=>{xRt(t.dataTypes,r)||_Pe(t,`type "${r}" not allowed by context "${t.dataTypes.join(",")}"`)}),Z1n(t,e)}}function K1n(t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&_Pe(t,"use allowUnionTypes to allow union type keyword")}function Y1n(t,e){let r=t.self.RULES.all;for(let n in r){let o=r[n];if(typeof o=="object"&&(0,gPe.shouldUseRule)(t.schema,o)){let{type:s}=o.definition;s.length&&!s.some(a=>Q1n(e,a))&&_Pe(t,`missing type "${s.join(",")}" for keyword "${n}"`)}}}function Q1n(t,e){return t.includes(e)||e==="number"&&t.includes("integer")}function xRt(t,e){return t.includes(e)||e==="integer"&&t.includes("number")}function Z1n(t,e){let r=[];for(let n of t.dataTypes)xRt(e,n)?r.push(n):e.includes("integer")&&n==="number"&&r.push("integer");t.dataTypes=r}function _Pe(t,e){let r=t.schemaEnv.baseId+t.errSchemaPath;e+=` at "${r}" (strictTypes)`,(0,a_.checkStrictMode)(t,e,t.opts.strictTypes)}var zZ=class{constructor(e,r,n){if((0,p6.validateKeywordUsage)(e,r,n),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=n,this.data=e.data,this.schema=e.schema[n],this.$data=r.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,a_.schemaRefOrVal)(e,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=r,this.$data)this.schemaCode=e.gen.const("vSchema",IRt(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,p6.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=e.gen.const("_errs",Gt.default.errors))}result(e,r,n){this.failResult((0,_t.not)(e),r,n)}failResult(e,r,n){this.gen.if(e),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,r){this.failResult((0,_t.not)(e),void 0,r)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);let{schemaCode:r}=this;this.fail((0,_t._)`${r} !== undefined && (${(0,_t.or)(this.invalid$data(),e)})`)}error(e,r,n){if(r){this.setParams(r),this._error(e,n),this.setParams({});return}this._error(e,n)}_error(e,r){(e?f6.reportExtraError:f6.reportError)(this,this.def.error,r)}$dataError(){(0,f6.reportError)(this,this.def.$dataError||f6.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,f6.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,r){r?Object.assign(this.params,e):this.params=e}block$data(e,r,n=_t.nil){this.gen.block(()=>{this.check$data(e,n),r()})}check$data(e=_t.nil,r=_t.nil){if(!this.$data)return;let{gen:n,schemaCode:o,schemaType:s,def:a}=this;n.if((0,_t.or)((0,_t._)`${o} === undefined`,r)),e!==_t.nil&&n.assign(e,!0),(s.length||a.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==_t.nil&&n.assign(e,!1)),n.else()}invalid$data(){let{gen:e,schemaCode:r,schemaType:n,def:o,it:s}=this;return(0,_t.or)(a(),c());function a(){if(n.length){if(!(r instanceof _t.Name))throw new Error("ajv implementation error");let l=Array.isArray(n)?n:[n];return(0,_t._)`${(0,GZ.checkDataTypes)(l,r,s.opts.strictNumbers,GZ.DataType.Wrong)}`}return _t.nil}function c(){if(o.validateSchema){let l=e.scopeValue("validate$data",{ref:o.validateSchema});return(0,_t._)`!${l}(${r})`}return _t.nil}}subschema(e,r){let n=(0,mPe.getSubschema)(this.it,e);(0,mPe.extendSubschemaData)(n,this.it,e),(0,mPe.extendSubschemaMode)(n,e);let o={...this.it,...n,items:void 0,props:void 0};return q1n(o,r),o}mergeEvaluated(e,r){let{it:n,gen:o}=this;n.opts.unevaluated&&(n.props!==!0&&e.props!==void 0&&(n.props=a_.mergeEvaluated.props(o,e.props,n.props,r)),n.items!==!0&&e.items!==void 0&&(n.items=a_.mergeEvaluated.items(o,e.items,n.items,r)))}mergeValidEvaluated(e,r){let{it:n,gen:o}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return o.if(r,()=>this.mergeEvaluated(e,_t.Name)),!0}};Ky.KeywordCxt=zZ;function wRt(t,e,r,n){let o=new zZ(t,r,e);"code"in r?r.code(o,n):o.$data&&r.validate?(0,p6.funcKeywordCode)(o,r):"macro"in r?(0,p6.macroKeywordCode)(o,r):(r.compile||r.validate)&&(0,p6.funcKeywordCode)(o,r)}var J1n=/^\/(?:[^~]|~0|~1)*$/,X1n=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function IRt(t,{dataLevel:e,dataNames:r,dataPathArr:n}){let o,s;if(t==="")return Gt.default.rootData;if(t[0]==="/"){if(!J1n.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);o=t,s=Gt.default.rootData}else{let u=X1n.exec(t);if(!u)throw new Error(`Invalid JSON-pointer: ${t}`);let d=+u[1];if(o=u[2],o==="#"){if(d>=e)throw new Error(l("property/index",d));return n[e-d]}if(d>e)throw new Error(l("data",d));if(s=r[e-d],!o)return s}let a=s,c=o.split("/");for(let u of c)u&&(s=(0,_t._)`${s}${(0,_t.getProperty)((0,a_.unescapeJsonPointer)(u))}`,a=(0,_t._)`${a} && ${s}`);return a;function l(u,d){return`Cannot access ${u} ${d} levels up, current level is ${e}`}}Ky.getData=IRt});var WZ=m(yPe=>{"use strict";Object.defineProperty(yPe,"__esModule",{value:!0});var vPe=class extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}};yPe.default=vPe});var m6=m(SPe=>{"use strict";Object.defineProperty(SPe,"__esModule",{value:!0});var EPe=d6(),TPe=class extends Error{constructor(e,r,n,o){super(o||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,EPe.resolveUrl)(e,r,n),this.missingSchema=(0,EPe.normalizeId)((0,EPe.getFullPath)(e,this.missingRef))}};SPe.default=TPe});var YZ=m(Dd=>{"use strict";Object.defineProperty(Dd,"__esModule",{value:!0});Dd.resolveSchema=Dd.getCompilingSchema=Dd.resolveRef=Dd.compileSchema=Dd.SchemaEnv=void 0;var S0=Sr(),evn=WZ(),hA=s_(),b0=d6(),PRt=an(),tvn=h6(),A2=class{constructor(e){var r;this.refs={},this.dynamicAnchors={};let n;typeof e.schema=="object"&&(n=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(r=e.baseId)!==null&&r!==void 0?r:(0,b0.normalizeId)(n?.[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=n?.$async,this.refs={}}};Dd.SchemaEnv=A2;function CPe(t){let e=RRt.call(this,t);if(e)return e;let r=(0,b0.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:n,lines:o}=this.opts.code,{ownProperties:s}=this.opts,a=new S0.CodeGen(this.scope,{es5:n,lines:o,ownProperties:s}),c;t.$async&&(c=a.scopeValue("Error",{ref:evn.default,code:(0,S0._)`require("ajv/dist/runtime/validation_error").default`}));let l=a.scopeName("validate");t.validateName=l;let u={gen:a,allErrors:this.opts.allErrors,data:hA.default.data,parentData:hA.default.parentData,parentDataProperty:hA.default.parentDataProperty,dataNames:[hA.default.data],dataPathArr:[S0.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:a.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,S0.stringify)(t.schema)}:{ref:t.schema}),validateName:l,ValidationError:c,schema:t.schema,schemaEnv:t,rootId:r,baseId:t.baseId||r,schemaPath:S0.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,S0._)`""`,opts:this.opts,self:this},d;try{this._compilations.add(t),(0,tvn.validateFunctionCode)(u),a.optimize(this.opts.code.optimize);let f=a.toString();d=`${a.scopeRefs(hA.default.scope)}return ${f}`,this.opts.code.process&&(d=this.opts.code.process(d,t));let h=new Function(`${hA.default.self}`,`${hA.default.scope}`,d)(this,this.scope.get());if(this.scope.value(l,{ref:h}),h.errors=null,h.schema=t.schema,h.schemaEnv=t,t.$async&&(h.$async=!0),this.opts.code.source===!0&&(h.source={validateName:l,validateCode:f,scopeValues:a._values}),this.opts.unevaluated){let{props:_,items:g}=u;h.evaluated={props:_ instanceof S0.Name?void 0:_,items:g instanceof S0.Name?void 0:g,dynamicProps:_ instanceof S0.Name,dynamicItems:g instanceof S0.Name},h.source&&(h.source.evaluated=(0,S0.stringify)(h.evaluated))}return t.validate=h,t}catch(f){throw delete t.validate,delete t.validateName,d&&this.logger.error("Error compiling schema, function code:",d),f}finally{this._compilations.delete(t)}}Dd.compileSchema=CPe;function rvn(t,e,r){var n;r=(0,b0.resolveUrl)(this.opts.uriResolver,e,r);let o=t.refs[r];if(o)return o;let s=ovn.call(this,t,r);if(s===void 0){let a=(n=t.localRefs)===null||n===void 0?void 0:n[r],{schemaId:c}=this.opts;a&&(s=new A2({schema:a,schemaId:c,root:t,baseId:e}))}if(s!==void 0)return t.refs[r]=nvn.call(this,s)}Dd.resolveRef=rvn;function nvn(t){return(0,b0.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:CPe.call(this,t)}function RRt(t){for(let e of this._compilations)if(ivn(e,t))return e}Dd.getCompilingSchema=RRt;function ivn(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function ovn(t,e){let r;for(;typeof(r=this.refs[e])=="string";)e=r;return r||this.schemas[e]||KZ.call(this,t,e)}function KZ(t,e){let r=this.opts.uriResolver.parse(e),n=(0,b0._getFullPath)(this.opts.uriResolver,r),o=(0,b0.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&n===o)return bPe.call(this,r,t);let s=(0,b0.normalizeId)(n),a=this.refs[s]||this.schemas[s];if(typeof a=="string"){let c=KZ.call(this,t,a);return typeof c?.schema!="object"?void 0:bPe.call(this,r,c)}if(typeof a?.schema=="object"){if(a.validate||CPe.call(this,a),s===(0,b0.normalizeId)(e)){let{schema:c}=a,{schemaId:l}=this.opts,u=c[l];return u&&(o=(0,b0.resolveUrl)(this.opts.uriResolver,o,u)),new A2({schema:c,schemaId:l,root:t,baseId:o})}return bPe.call(this,r,a)}}Dd.resolveSchema=KZ;var svn=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function bPe(t,{baseId:e,schema:r,root:n}){var o;if(((o=t.fragment)===null||o===void 0?void 0:o[0])!=="/")return;for(let c of t.fragment.slice(1).split("/")){if(typeof r=="boolean")return;let l=r[(0,PRt.unescapeFragment)(c)];if(l===void 0)return;r=l;let u=typeof r=="object"&&r[this.opts.schemaId];!svn.has(c)&&u&&(e=(0,b0.resolveUrl)(this.opts.uriResolver,e,u))}let s;if(typeof r!="boolean"&&r.$ref&&!(0,PRt.schemaHasRulesButRef)(r,this.RULES)){let c=(0,b0.resolveUrl)(this.opts.uriResolver,e,r.$ref);s=KZ.call(this,n,c)}let{schemaId:a}=this.opts;if(s=s||new A2({schema:r,schemaId:a,root:n,baseId:e}),s.schema!==s.root.schema)return s}});var ORt=m((Xdi,avn)=>{avn.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var xPe=m((efi,kRt)=>{"use strict";var cvn=RegExp.prototype.test.bind(/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu),NRt=RegExp.prototype.test.bind(/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u);function APe(t){let e="",r=0,n=0;for(n=0;n<t.length;n++)if(r=t[n].charCodeAt(0),r!==48){if(!(r>=48&&r<=57||r>=65&&r<=70||r>=97&&r<=102))return"";e+=t[n];break}for(n+=1;n<t.length;n++){if(r=t[n].charCodeAt(0),!(r>=48&&r<=57||r>=65&&r<=70||r>=97&&r<=102))return"";e+=t[n]}return e}var lvn=RegExp.prototype.test.bind(/[^!"$&'()*+,\-.;=_`a-z{}~]/u);function MRt(t){return t.length=0,!0}function uvn(t,e,r){if(t.length){let n=APe(t);if(n!=="")e.push(n);else return r.error=!0,!1;t.length=0}return!0}function dvn(t){let e=0,r={error:!1,address:"",zone:""},n=[],o=[],s=!1,a=!1,c=uvn;for(let l=0;l<t.length;l++){let u=t[l];if(!(u==="["||u==="]"))if(u===":"){if(s===!0&&(a=!0),!c(o,n,r))break;if(++e>7){r.error=!0;break}l>0&&t[l-1]===":"&&(s=!0),n.push(":");continue}else if(u==="%"){if(!c(o,n,r))break;c=MRt}else{o.push(u);continue}}return o.length&&(c===MRt?r.zone=o.join(""):a?n.push(o.join("")):n.push(APe(o))),r.address=n.join(""),r}function LRt(t){if(fvn(t,":")<2)return{host:t,isIPV6:!1};let e=dvn(t);if(e.error)return{host:t,isIPV6:!1};{let r=e.address,n=e.address;return e.zone&&(r+="%"+e.zone,n+="%25"+e.zone),{host:r,isIPV6:!0,escapedHost:n}}}function fvn(t,e){let r=0;for(let n=0;n<t.length;n++)t[n]===e&&r++;return r}function pvn(t){let e=t,r=[],n=-1,o=0;for(;o=e.length;){if(o===1){if(e===".")break;if(e==="/"){r.push("/");break}else{r.push(e);break}}else if(o===2){if(e[0]==="."){if(e[1]===".")break;if(e[1]==="/"){e=e.slice(2);continue}}else if(e[0]==="/"&&(e[1]==="."||e[1]==="/")){r.push("/");break}}else if(o===3&&e==="/.."){r.length!==0&&r.pop(),r.push("/");break}if(e[0]==="."){if(e[1]==="."){if(e[2]==="/"){e=e.slice(3);continue}}else if(e[1]==="/"){e=e.slice(2);continue}}else if(e[0]==="/"&&e[1]==="."){if(e[2]==="/"){e=e.slice(2);continue}else if(e[2]==="."&&e[3]==="/"){e=e.slice(3),r.length!==0&&r.pop();continue}}if((n=e.indexOf("/",1))===-1){r.push(e);break}else r.push(e.slice(0,n)),e=e.slice(n)}return r.join("")}function hvn(t,e){let r=e!==!0?escape:unescape;return t.scheme!==void 0&&(t.scheme=r(t.scheme)),t.userinfo!==void 0&&(t.userinfo=r(t.userinfo)),t.host!==void 0&&(t.host=r(t.host)),t.path!==void 0&&(t.path=r(t.path)),t.query!==void 0&&(t.query=r(t.query)),t.fragment!==void 0&&(t.fragment=r(t.fragment)),t}function mvn(t){let e=[];if(t.userinfo!==void 0&&(e.push(t.userinfo),e.push("@")),t.host!==void 0){let r=unescape(t.host);if(!NRt(r)){let n=LRt(r);n.isIPV6===!0?r=`[${n.escapedHost}]`:r=t.host}e.push(r)}return(typeof t.port=="number"||typeof t.port=="string")&&(e.push(":"),e.push(String(t.port))),e.length?e.join(""):void 0}kRt.exports={nonSimpleDomain:lvn,recomposeAuthority:mvn,normalizeComponentEncoding:hvn,removeDotSegments:pvn,isIPv4:NRt,isUUID:cvn,normalizeIPv6:LRt,stringArrayToHexStripped:APe}});var jRt=m((tfi,FRt)=>{"use strict";var{isUUID:gvn}=xPe(),_vn=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu,vvn=["http","https","ws","wss","urn","urn:uuid"];function yvn(t){return vvn.indexOf(t)!==-1}function wPe(t){return t.secure===!0?!0:t.secure===!1?!1:t.scheme?t.scheme.length===3&&(t.scheme[0]==="w"||t.scheme[0]==="W")&&(t.scheme[1]==="s"||t.scheme[1]==="S")&&(t.scheme[2]==="s"||t.scheme[2]==="S"):!1}function DRt(t){return t.host||(t.error=t.error||"HTTP URIs must have a host."),t}function URt(t){let e=String(t.scheme).toLowerCase()==="https";return(t.port===(e?443:80)||t.port==="")&&(t.port=void 0),t.path||(t.path="/"),t}function Evn(t){return t.secure=wPe(t),t.resourceName=(t.path||"/")+(t.query?"?"+t.query:""),t.path=void 0,t.query=void 0,t}function Tvn(t){if((t.port===(wPe(t)?443:80)||t.port==="")&&(t.port=void 0),typeof t.secure=="boolean"&&(t.scheme=t.secure?"wss":"ws",t.secure=void 0),t.resourceName){let[e,r]=t.resourceName.split("?");t.path=e&&e!=="/"?e:void 0,t.query=r,t.resourceName=void 0}return t.fragment=void 0,t}function Svn(t,e){if(!t.path)return t.error="URN can not be parsed",t;let r=t.path.match(_vn);if(r){let n=e.scheme||t.scheme||"urn";t.nid=r[1].toLowerCase(),t.nss=r[2];let o=`${n}:${e.nid||t.nid}`,s=IPe(o);t.path=void 0,s&&(t=s.parse(t,e))}else t.error=t.error||"URN can not be parsed.";return t}function bvn(t,e){if(t.nid===void 0)throw new Error("URN without nid cannot be serialized");let r=e.scheme||t.scheme||"urn",n=t.nid.toLowerCase(),o=`${r}:${e.nid||n}`,s=IPe(o);s&&(t=s.serialize(t,e));let a=t,c=t.nss;return a.path=`${n||e.nid}:${c}`,e.skipEscape=!0,a}function Cvn(t,e){let r=t;return r.uuid=r.nss,r.nss=void 0,!e.tolerant&&(!r.uuid||!gvn(r.uuid))&&(r.error=r.error||"UUID is not valid."),r}function Avn(t){let e=t;return e.nss=(t.uuid||"").toLowerCase(),e}var qRt={scheme:"http",domainHost:!0,parse:DRt,serialize:URt},xvn={scheme:"https",domainHost:qRt.domainHost,parse:DRt,serialize:URt},QZ={scheme:"ws",domainHost:!0,parse:Evn,serialize:Tvn},wvn={scheme:"wss",domainHost:QZ.domainHost,parse:QZ.parse,serialize:QZ.serialize},Ivn={scheme:"urn",parse:Svn,serialize:bvn,skipNormalize:!0},Pvn={scheme:"urn:uuid",parse:Cvn,serialize:Avn,skipNormalize:!0},ZZ={http:qRt,https:xvn,ws:QZ,wss:wvn,urn:Ivn,"urn:uuid":Pvn};Object.setPrototypeOf(ZZ,null);function IPe(t){return t&&(ZZ[t]||ZZ[t.toLowerCase()])||void 0}FRt.exports={wsIsSecure:wPe,SCHEMES:ZZ,isValidSchemeName:yvn,getSchemeHandler:IPe}});var VRt=m((rfi,XZ)=>{"use strict";var{normalizeIPv6:Rvn,removeDotSegments:g6,recomposeAuthority:Ovn,normalizeComponentEncoding:JZ,isIPv4:Mvn,nonSimpleDomain:Nvn}=xPe(),{SCHEMES:Lvn,getSchemeHandler:BRt}=jRt();function kvn(t,e){return typeof t=="string"?t=Ch(c_(t,e),e):typeof t=="object"&&(t=c_(Ch(t,e),e)),t}function Dvn(t,e,r){let n=r?Object.assign({scheme:"null"},r):{scheme:"null"},o=$Rt(c_(t,n),c_(e,n),n,!0);return n.skipEscape=!0,Ch(o,n)}function $Rt(t,e,r,n){let o={};return n||(t=c_(Ch(t,r),r),e=c_(Ch(e,r),r)),r=r||{},!r.tolerant&&e.scheme?(o.scheme=e.scheme,o.userinfo=e.userinfo,o.host=e.host,o.port=e.port,o.path=g6(e.path||""),o.query=e.query):(e.userinfo!==void 0||e.host!==void 0||e.port!==void 0?(o.userinfo=e.userinfo,o.host=e.host,o.port=e.port,o.path=g6(e.path||""),o.query=e.query):(e.path?(e.path[0]==="/"?o.path=g6(e.path):((t.userinfo!==void 0||t.host!==void 0||t.port!==void 0)&&!t.path?o.path="/"+e.path:t.path?o.path=t.path.slice(0,t.path.lastIndexOf("/")+1)+e.path:o.path=e.path,o.path=g6(o.path)),o.query=e.query):(o.path=t.path,e.query!==void 0?o.query=e.query:o.query=t.query),o.userinfo=t.userinfo,o.host=t.host,o.port=t.port),o.scheme=t.scheme),o.fragment=e.fragment,o}function Uvn(t,e,r){return typeof t=="string"?(t=unescape(t),t=Ch(JZ(c_(t,r),!0),{...r,skipEscape:!0})):typeof t=="object"&&(t=Ch(JZ(t,!0),{...r,skipEscape:!0})),typeof e=="string"?(e=unescape(e),e=Ch(JZ(c_(e,r),!0),{...r,skipEscape:!0})):typeof e=="object"&&(e=Ch(JZ(e,!0),{...r,skipEscape:!0})),t.toLowerCase()===e.toLowerCase()}function Ch(t,e){let r={host:t.host,scheme:t.scheme,userinfo:t.userinfo,port:t.port,path:t.path,query:t.query,nid:t.nid,nss:t.nss,uuid:t.uuid,fragment:t.fragment,reference:t.reference,resourceName:t.resourceName,secure:t.secure,error:""},n=Object.assign({},e),o=[],s=BRt(n.scheme||r.scheme);s&&s.serialize&&s.serialize(r,n),r.path!==void 0&&(n.skipEscape?r.path=unescape(r.path):(r.path=escape(r.path),r.scheme!==void 0&&(r.path=r.path.split("%3A").join(":")))),n.reference!=="suffix"&&r.scheme&&o.push(r.scheme,":");let a=Ovn(r);if(a!==void 0&&(n.reference!=="suffix"&&o.push("//"),o.push(a),r.path&&r.path[0]!=="/"&&o.push("/")),r.path!==void 0){let c=r.path;!n.absolutePath&&(!s||!s.absolutePath)&&(c=g6(c)),a===void 0&&c[0]==="/"&&c[1]==="/"&&(c="/%2F"+c.slice(2)),o.push(c)}return r.query!==void 0&&o.push("?",r.query),r.fragment!==void 0&&o.push("#",r.fragment),o.join("")}var qvn=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function c_(t,e){let r=Object.assign({},e),n={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},o=!1;r.reference==="suffix"&&(r.scheme?t=r.scheme+":"+t:t="//"+t);let s=t.match(qvn);if(s){if(n.scheme=s[1],n.userinfo=s[3],n.host=s[4],n.port=parseInt(s[5],10),n.path=s[6]||"",n.query=s[7],n.fragment=s[8],isNaN(n.port)&&(n.port=s[5]),n.host)if(Mvn(n.host)===!1){let l=Rvn(n.host);n.host=l.host.toLowerCase(),o=l.isIPV6}else o=!0;n.scheme===void 0&&n.userinfo===void 0&&n.host===void 0&&n.port===void 0&&n.query===void 0&&!n.path?n.reference="same-document":n.scheme===void 0?n.reference="relative":n.fragment===void 0?n.reference="absolute":n.reference="uri",r.reference&&r.reference!=="suffix"&&r.reference!==n.reference&&(n.error=n.error||"URI is not a "+r.reference+" reference.");let a=BRt(r.scheme||n.scheme);if(!r.unicodeSupport&&(!a||!a.unicodeSupport)&&n.host&&(r.domainHost||a&&a.domainHost)&&o===!1&&Nvn(n.host))try{n.host=URL.domainToASCII(n.host.toLowerCase())}catch(c){n.error=n.error||"Host's domain name can not be converted to ASCII: "+c}(!a||a&&!a.skipNormalize)&&(t.indexOf("%")!==-1&&(n.scheme!==void 0&&(n.scheme=unescape(n.scheme)),n.host!==void 0&&(n.host=unescape(n.host))),n.path&&(n.path=escape(unescape(n.path))),n.fragment&&(n.fragment=encodeURI(decodeURIComponent(n.fragment)))),a&&a.parse&&a.parse(n,r)}else n.error=n.error||"URI can not be parsed.";return n}var PPe={SCHEMES:Lvn,normalize:kvn,resolve:Dvn,resolveComponent:$Rt,equal:Uvn,serialize:Ch,parse:c_};XZ.exports=PPe;XZ.exports.default=PPe;XZ.exports.fastUri=PPe});var GRt=m(RPe=>{"use strict";Object.defineProperty(RPe,"__esModule",{value:!0});var HRt=VRt();HRt.code='require("ajv/dist/runtime/uri").default';RPe.default=HRt});var XRt=m(Qs=>{"use strict";Object.defineProperty(Qs,"__esModule",{value:!0});Qs.CodeGen=Qs.Name=Qs.nil=Qs.stringify=Qs.str=Qs._=Qs.KeywordCxt=void 0;var Fvn=h6();Object.defineProperty(Qs,"KeywordCxt",{enumerable:!0,get:function(){return Fvn.KeywordCxt}});var x2=Sr();Object.defineProperty(Qs,"_",{enumerable:!0,get:function(){return x2._}});Object.defineProperty(Qs,"str",{enumerable:!0,get:function(){return x2.str}});Object.defineProperty(Qs,"stringify",{enumerable:!0,get:function(){return x2.stringify}});Object.defineProperty(Qs,"nil",{enumerable:!0,get:function(){return x2.nil}});Object.defineProperty(Qs,"Name",{enumerable:!0,get:function(){return x2.Name}});Object.defineProperty(Qs,"CodeGen",{enumerable:!0,get:function(){return x2.CodeGen}});var jvn=WZ(),QRt=m6(),Bvn=oPe(),_6=YZ(),$vn=Sr(),v6=d6(),eJ=u6(),MPe=an(),zRt=ORt(),Vvn=GRt(),ZRt=(t,e)=>new RegExp(t,e);ZRt.code="new RegExp";var Hvn=["removeAdditional","useDefaults","coerceTypes"],Gvn=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),zvn={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},Wvn={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},WRt=200;function Kvn(t){var e,r,n,o,s,a,c,l,u,d,f,p,h,_,g,v,E,y,S,b,w,P,A,O,L;let j=t.strict,$=(e=t.code)===null||e===void 0?void 0:e.optimize,Q=$===!0||$===void 0?1:$||0,K=(n=(r=t.code)===null||r===void 0?void 0:r.regExp)!==null&&n!==void 0?n:ZRt,N=(o=t.uriResolver)!==null&&o!==void 0?o:Vvn.default;return{strictSchema:(a=(s=t.strictSchema)!==null&&s!==void 0?s:j)!==null&&a!==void 0?a:!0,strictNumbers:(l=(c=t.strictNumbers)!==null&&c!==void 0?c:j)!==null&&l!==void 0?l:!0,strictTypes:(d=(u=t.strictTypes)!==null&&u!==void 0?u:j)!==null&&d!==void 0?d:"log",strictTuples:(p=(f=t.strictTuples)!==null&&f!==void 0?f:j)!==null&&p!==void 0?p:"log",strictRequired:(_=(h=t.strictRequired)!==null&&h!==void 0?h:j)!==null&&_!==void 0?_:!1,code:t.code?{...t.code,optimize:Q,regExp:K}:{optimize:Q,regExp:K},loopRequired:(g=t.loopRequired)!==null&&g!==void 0?g:WRt,loopEnum:(v=t.loopEnum)!==null&&v!==void 0?v:WRt,meta:(E=t.meta)!==null&&E!==void 0?E:!0,messages:(y=t.messages)!==null&&y!==void 0?y:!0,inlineRefs:(S=t.inlineRefs)!==null&&S!==void 0?S:!0,schemaId:(b=t.schemaId)!==null&&b!==void 0?b:"$id",addUsedSchema:(w=t.addUsedSchema)!==null&&w!==void 0?w:!0,validateSchema:(P=t.validateSchema)!==null&&P!==void 0?P:!0,validateFormats:(A=t.validateFormats)!==null&&A!==void 0?A:!0,unicodeRegExp:(O=t.unicodeRegExp)!==null&&O!==void 0?O:!0,int32range:(L=t.int32range)!==null&&L!==void 0?L:!0,uriResolver:N}}var y6=class{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...Kvn(e)};let{es5:r,lines:n}=this.opts.code;this.scope=new $vn.ValueScope({scope:{},prefixes:Gvn,es5:r,lines:n}),this.logger=eyn(e.logger);let o=e.validateFormats;e.validateFormats=!1,this.RULES=(0,Bvn.getRules)(),KRt.call(this,zvn,e,"NOT SUPPORTED"),KRt.call(this,Wvn,e,"DEPRECATED","warn"),this._metaOpts=Jvn.call(this),e.formats&&Qvn.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&Zvn.call(this,e.keywords),typeof e.meta=="object"&&this.addMetaSchema(e.meta),Yvn.call(this),e.validateFormats=o}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:e,meta:r,schemaId:n}=this.opts,o=zRt;n==="id"&&(o={...zRt},o.id=o.$id,delete o.$id),r&&e&&this.addMetaSchema(o,o[n],!1)}defaultMeta(){let{meta:e,schemaId:r}=this.opts;return this.opts.defaultMeta=typeof e=="object"?e[r]||e:void 0}validate(e,r){let n;if(typeof e=="string"){if(n=this.getSchema(e),!n)throw new Error(`no schema with key or ref "${e}"`)}else n=this.compile(e);let o=n(r);return"$async"in n||(this.errors=n.errors),o}compile(e,r){let n=this._addSchema(e,r);return n.validate||this._compileSchemaEnv(n)}compileAsync(e,r){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:n}=this.opts;return o.call(this,e,r);async function o(d,f){await s.call(this,d.$schema);let p=this._addSchema(d,f);return p.validate||a.call(this,p)}async function s(d){d&&!this.getSchema(d)&&await o.call(this,{$ref:d},!0)}async function a(d){try{return this._compileSchemaEnv(d)}catch(f){if(!(f instanceof QRt.default))throw f;return c.call(this,f),await l.call(this,f.missingSchema),a.call(this,d)}}function c({missingSchema:d,missingRef:f}){if(this.refs[d])throw new Error(`AnySchema ${d} is loaded but ${f} cannot be resolved`)}async function l(d){let f=await u.call(this,d);this.refs[d]||await s.call(this,f.$schema),this.refs[d]||this.addSchema(f,d,r)}async function u(d){let f=this._loading[d];if(f)return f;try{return await(this._loading[d]=n(d))}finally{delete this._loading[d]}}}addSchema(e,r,n,o=this.opts.validateSchema){if(Array.isArray(e)){for(let a of e)this.addSchema(a,void 0,n,o);return this}let s;if(typeof e=="object"){let{schemaId:a}=this.opts;if(s=e[a],s!==void 0&&typeof s!="string")throw new Error(`schema ${a} must be string`)}return r=(0,v6.normalizeId)(r||s),this._checkUnique(r),this.schemas[r]=this._addSchema(e,n,r,o,!0),this}addMetaSchema(e,r,n=this.opts.validateSchema){return this.addSchema(e,r,!0,n),this}validateSchema(e,r){if(typeof e=="boolean")return!0;let n;if(n=e.$schema,n!==void 0&&typeof n!="string")throw new Error("$schema must be a string");if(n=n||this.opts.defaultMeta||this.defaultMeta(),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let o=this.validate(n,e);if(!o&&r){let s="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(s);else throw new Error(s)}return o}getSchema(e){let r;for(;typeof(r=YRt.call(this,e))=="string";)e=r;if(r===void 0){let{schemaId:n}=this.opts,o=new _6.SchemaEnv({schema:{},schemaId:n});if(r=_6.resolveSchema.call(this,o,e),!r)return;this.refs[e]=r}return r.validate||this._compileSchemaEnv(r)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let r=YRt.call(this,e);return typeof r=="object"&&this._cache.delete(r.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{let r=e;this._cache.delete(r);let n=e[this.opts.schemaId];return n&&(n=(0,v6.normalizeId)(n),delete this.schemas[n],delete this.refs[n]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(let r of e)this.addKeyword(r);return this}addKeyword(e,r){let n;if(typeof e=="string")n=e,typeof r=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),r.keyword=n);else if(typeof e=="object"&&r===void 0){if(r=e,n=r.keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(ryn.call(this,n,r),!r)return(0,MPe.eachItem)(n,s=>OPe.call(this,s)),this;iyn.call(this,r);let o={...r,type:(0,eJ.getJSONTypes)(r.type),schemaType:(0,eJ.getJSONTypes)(r.schemaType)};return(0,MPe.eachItem)(n,o.type.length===0?s=>OPe.call(this,s,o):s=>o.type.forEach(a=>OPe.call(this,s,o,a))),this}getKeyword(e){let r=this.RULES.all[e];return typeof r=="object"?r.definition:!!r}removeKeyword(e){let{RULES:r}=this;delete r.keywords[e],delete r.all[e];for(let n of r.rules){let o=n.rules.findIndex(s=>s.keyword===e);o>=0&&n.rules.splice(o,1)}return this}addFormat(e,r){return typeof r=="string"&&(r=new RegExp(r)),this.formats[e]=r,this}errorsText(e=this.errors,{separator:r=", ",dataVar:n="data"}={}){return!e||e.length===0?"No errors":e.map(o=>`${n}${o.instancePath} ${o.message}`).reduce((o,s)=>o+r+s)}$dataMetaSchema(e,r){let n=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(let o of r){let s=o.split("/").slice(1),a=e;for(let c of s)a=a[c];for(let c in n){let l=n[c];if(typeof l!="object")continue;let{$data:u}=l.definition,d=a[c];u&&d&&(a[c]=JRt(d))}}return e}_removeAllSchemas(e,r){for(let n in e){let o=e[n];(!r||r.test(n))&&(typeof o=="string"?delete e[n]:o&&!o.meta&&(this._cache.delete(o.schema),delete e[n]))}}_addSchema(e,r,n,o=this.opts.validateSchema,s=this.opts.addUsedSchema){let a,{schemaId:c}=this.opts;if(typeof e=="object")a=e[c];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof e!="boolean")throw new Error("schema must be object or boolean")}let l=this._cache.get(e);if(l!==void 0)return l;n=(0,v6.normalizeId)(a||n);let u=v6.getSchemaRefs.call(this,e,n);return l=new _6.SchemaEnv({schema:e,schemaId:c,meta:r,baseId:n,localRefs:u}),this._cache.set(l.schema,l),s&&!n.startsWith("#")&&(n&&this._checkUnique(n),this.refs[n]=l),o&&this.validateSchema(e,!0),l}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):_6.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){let r=this.opts;this.opts=this._metaOpts;try{_6.compileSchema.call(this,e)}finally{this.opts=r}}};y6.ValidationError=jvn.default;y6.MissingRefError=QRt.default;Qs.default=y6;function KRt(t,e,r,n="error"){for(let o in t){let s=o;s in e&&this.logger[n](`${r}: option ${o}. ${t[s]}`)}}function YRt(t){return t=(0,v6.normalizeId)(t),this.schemas[t]||this.refs[t]}function Yvn(){let t=this.opts.schemas;if(t)if(Array.isArray(t))this.addSchema(t);else for(let e in t)this.addSchema(t[e],e)}function Qvn(){for(let t in this.opts.formats){let e=this.opts.formats[t];e&&this.addFormat(t,e)}}function Zvn(t){if(Array.isArray(t)){this.addVocabulary(t);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let e in t){let r=t[e];r.keyword||(r.keyword=e),this.addKeyword(r)}}function Jvn(){let t={...this.opts};for(let e of Hvn)delete t[e];return t}var Xvn={log(){},warn(){},error(){}};function eyn(t){if(t===!1)return Xvn;if(t===void 0)return console;if(t.log&&t.warn&&t.error)return t;throw new Error("logger must implement log, warn and error methods")}var tyn=/^[a-z_$][a-z0-9_$:-]*$/i;function ryn(t,e){let{RULES:r}=this;if((0,MPe.eachItem)(t,n=>{if(r.keywords[n])throw new Error(`Keyword ${n} is already defined`);if(!tyn.test(n))throw new Error(`Keyword ${n} has invalid name`)}),!!e&&e.$data&&!("code"in e||"validate"in e))throw new Error('$data keyword must have "code" or "validate" function')}function OPe(t,e,r){var n;let o=e?.post;if(r&&o)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:s}=this,a=o?s.post:s.rules.find(({type:l})=>l===r);if(a||(a={type:r,rules:[]},s.rules.push(a)),s.keywords[t]=!0,!e)return;let c={keyword:t,definition:{...e,type:(0,eJ.getJSONTypes)(e.type),schemaType:(0,eJ.getJSONTypes)(e.schemaType)}};e.before?nyn.call(this,a,c,e.before):a.rules.push(c),s.all[t]=c,(n=e.implements)===null||n===void 0||n.forEach(l=>this.addKeyword(l))}function nyn(t,e,r){let n=t.rules.findIndex(o=>o.keyword===r);n>=0?t.rules.splice(n,0,e):(t.rules.push(e),this.logger.warn(`rule ${r} is not defined`))}function iyn(t){let{metaSchema:e}=t;e!==void 0&&(t.$data&&this.opts.$data&&(e=JRt(e)),t.validateSchema=this.compile(e,!0))}var oyn={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function JRt(t){return{anyOf:[t,oyn]}}});var eOt=m(NPe=>{"use strict";Object.defineProperty(NPe,"__esModule",{value:!0});var syn={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};NPe.default=syn});var iOt=m(mA=>{"use strict";Object.defineProperty(mA,"__esModule",{value:!0});mA.callRef=mA.getValidate=void 0;var ayn=m6(),tOt=kd(),Rl=Sr(),w2=s_(),rOt=YZ(),tJ=an(),cyn={keyword:"$ref",schemaType:"string",code(t){let{gen:e,schema:r,it:n}=t,{baseId:o,schemaEnv:s,validateName:a,opts:c,self:l}=n,{root:u}=s;if((r==="#"||r==="#/")&&o===u.baseId)return f();let d=rOt.resolveRef.call(l,u,o,r);if(d===void 0)throw new ayn.default(n.opts.uriResolver,o,r);if(d instanceof rOt.SchemaEnv)return p(d);return h(d);function f(){if(s===u)return rJ(t,a,s,s.$async);let _=e.scopeValue("root",{ref:u});return rJ(t,(0,Rl._)`${_}.validate`,u,u.$async)}function p(_){let g=nOt(t,_);rJ(t,g,_,_.$async)}function h(_){let g=e.scopeValue("schema",c.code.source===!0?{ref:_,code:(0,Rl.stringify)(_)}:{ref:_}),v=e.name("valid"),E=t.subschema({schema:_,dataTypes:[],schemaPath:Rl.nil,topSchemaRef:g,errSchemaPath:r},v);t.mergeEvaluated(E),t.ok(v)}}};function nOt(t,e){let{gen:r}=t;return e.validate?r.scopeValue("validate",{ref:e.validate}):(0,Rl._)`${r.scopeValue("wrapper",{ref:e})}.validate`}mA.getValidate=nOt;function rJ(t,e,r,n){let{gen:o,it:s}=t,{allErrors:a,schemaEnv:c,opts:l}=s,u=l.passContext?w2.default.this:Rl.nil;n?d():f();function d(){if(!c.$async)throw new Error("async schema referenced by sync schema");let _=o.let("valid");o.try(()=>{o.code((0,Rl._)`await ${(0,tOt.callValidateCode)(t,e,u)}`),h(e),a||o.assign(_,!0)},g=>{o.if((0,Rl._)`!(${g} instanceof ${s.ValidationError})`,()=>o.throw(g)),p(g),a||o.assign(_,!1)}),t.ok(_)}function f(){t.result((0,tOt.callValidateCode)(t,e,u),()=>h(e),()=>p(e))}function p(_){let g=(0,Rl._)`${_}.errors`;o.assign(w2.default.vErrors,(0,Rl._)`${w2.default.vErrors} === null ? ${g} : ${w2.default.vErrors}.concat(${g})`),o.assign(w2.default.errors,(0,Rl._)`${w2.default.vErrors}.length`)}function h(_){var g;if(!s.opts.unevaluated)return;let v=(g=r?.validate)===null||g===void 0?void 0:g.evaluated;if(s.props!==!0)if(v&&!v.dynamicProps)v.props!==void 0&&(s.props=tJ.mergeEvaluated.props(o,v.props,s.props));else{let E=o.var("props",(0,Rl._)`${_}.evaluated.props`);s.props=tJ.mergeEvaluated.props(o,E,s.props,Rl.Name)}if(s.items!==!0)if(v&&!v.dynamicItems)v.items!==void 0&&(s.items=tJ.mergeEvaluated.items(o,v.items,s.items));else{let E=o.var("items",(0,Rl._)`${_}.evaluated.items`);s.items=tJ.mergeEvaluated.items(o,E,s.items,Rl.Name)}}}mA.callRef=rJ;mA.default=cyn});var oOt=m(LPe=>{"use strict";Object.defineProperty(LPe,"__esModule",{value:!0});var lyn=eOt(),uyn=iOt(),dyn=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",lyn.default,uyn.default];LPe.default=dyn});var sOt=m(kPe=>{"use strict";Object.defineProperty(kPe,"__esModule",{value:!0});var nJ=Sr(),Yy=nJ.operators,iJ={maximum:{okStr:"<=",ok:Yy.LTE,fail:Yy.GT},minimum:{okStr:">=",ok:Yy.GTE,fail:Yy.LT},exclusiveMaximum:{okStr:"<",ok:Yy.LT,fail:Yy.GTE},exclusiveMinimum:{okStr:">",ok:Yy.GT,fail:Yy.LTE}},fyn={message:({keyword:t,schemaCode:e})=>(0,nJ.str)`must be ${iJ[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,nJ._)`{comparison: ${iJ[t].okStr}, limit: ${e}}`},pyn={keyword:Object.keys(iJ),type:"number",schemaType:"number",$data:!0,error:fyn,code(t){let{keyword:e,data:r,schemaCode:n}=t;t.fail$data((0,nJ._)`${r} ${iJ[e].fail} ${n} || isNaN(${r})`)}};kPe.default=pyn});var aOt=m(DPe=>{"use strict";Object.defineProperty(DPe,"__esModule",{value:!0});var E6=Sr(),hyn={message:({schemaCode:t})=>(0,E6.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,E6._)`{multipleOf: ${t}}`},myn={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:hyn,code(t){let{gen:e,data:r,schemaCode:n,it:o}=t,s=o.opts.multipleOfPrecision,a=e.let("res"),c=s?(0,E6._)`Math.abs(Math.round(${a}) - ${a}) > 1e-${s}`:(0,E6._)`${a} !== parseInt(${a})`;t.fail$data((0,E6._)`(${n} === 0 || (${a} = ${r}/${n}, ${c}))`)}};DPe.default=myn});var lOt=m(UPe=>{"use strict";Object.defineProperty(UPe,"__esModule",{value:!0});function cOt(t){let e=t.length,r=0,n=0,o;for(;n<e;)r++,o=t.charCodeAt(n++),o>=55296&&o<=56319&&n<e&&(o=t.charCodeAt(n),(o&64512)===56320&&n++);return r}UPe.default=cOt;cOt.code='require("ajv/dist/runtime/ucs2length").default'});var uOt=m(qPe=>{"use strict";Object.defineProperty(qPe,"__esModule",{value:!0});var gA=Sr(),gyn=an(),_yn=lOt(),vyn={message({keyword:t,schemaCode:e}){let r=t==="maxLength"?"more":"fewer";return(0,gA.str)`must NOT have ${r} than ${e} characters`},params:({schemaCode:t})=>(0,gA._)`{limit: ${t}}`},yyn={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:vyn,code(t){let{keyword:e,data:r,schemaCode:n,it:o}=t,s=e==="maxLength"?gA.operators.GT:gA.operators.LT,a=o.opts.unicode===!1?(0,gA._)`${r}.length`:(0,gA._)`${(0,gyn.useFunc)(t.gen,_yn.default)}(${r})`;t.fail$data((0,gA._)`${a} ${s} ${n}`)}};qPe.default=yyn});var dOt=m(FPe=>{"use strict";Object.defineProperty(FPe,"__esModule",{value:!0});var Eyn=kd(),oJ=Sr(),Tyn={message:({schemaCode:t})=>(0,oJ.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,oJ._)`{pattern: ${t}}`},Syn={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:Tyn,code(t){let{data:e,$data:r,schema:n,schemaCode:o,it:s}=t,a=s.opts.unicodeRegExp?"u":"",c=r?(0,oJ._)`(new RegExp(${o}, ${a}))`:(0,Eyn.usePattern)(t,n);t.fail$data((0,oJ._)`!${c}.test(${e})`)}};FPe.default=Syn});var fOt=m(jPe=>{"use strict";Object.defineProperty(jPe,"__esModule",{value:!0});var T6=Sr(),byn={message({keyword:t,schemaCode:e}){let r=t==="maxProperties"?"more":"fewer";return(0,T6.str)`must NOT have ${r} than ${e} properties`},params:({schemaCode:t})=>(0,T6._)`{limit: ${t}}`},Cyn={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:byn,code(t){let{keyword:e,data:r,schemaCode:n}=t,o=e==="maxProperties"?T6.operators.GT:T6.operators.LT;t.fail$data((0,T6._)`Object.keys(${r}).length ${o} ${n}`)}};jPe.default=Cyn});var pOt=m(BPe=>{"use strict";Object.defineProperty(BPe,"__esModule",{value:!0});var S6=kd(),b6=Sr(),Ayn=an(),xyn={message:({params:{missingProperty:t}})=>(0,b6.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,b6._)`{missingProperty: ${t}}`},wyn={keyword:"required",type:"object",schemaType:"array",$data:!0,error:xyn,code(t){let{gen:e,schema:r,schemaCode:n,data:o,$data:s,it:a}=t,{opts:c}=a;if(!s&&r.length===0)return;let l=r.length>=c.loopRequired;if(a.allErrors?u():d(),c.strictRequired){let h=t.parentSchema.properties,{definedProperties:_}=t.it;for(let g of r)if(h?.[g]===void 0&&!_.has(g)){let v=a.schemaEnv.baseId+a.errSchemaPath,E=`required property "${g}" is not defined at "${v}" (strictRequired)`;(0,Ayn.checkStrictMode)(a,E,a.opts.strictRequired)}}function u(){if(l||s)t.block$data(b6.nil,f);else for(let h of r)(0,S6.checkReportMissingProp)(t,h)}function d(){let h=e.let("missing");if(l||s){let _=e.let("valid",!0);t.block$data(_,()=>p(h,_)),t.ok(_)}else e.if((0,S6.checkMissingProp)(t,r,h)),(0,S6.reportMissingProp)(t,h),e.else()}function f(){e.forOf("prop",n,h=>{t.setParams({missingProperty:h}),e.if((0,S6.noPropertyInData)(e,o,h,c.ownProperties),()=>t.error())})}function p(h,_){t.setParams({missingProperty:h}),e.forOf(h,n,()=>{e.assign(_,(0,S6.propertyInData)(e,o,h,c.ownProperties)),e.if((0,b6.not)(_),()=>{t.error(),e.break()})},b6.nil)}}};BPe.default=wyn});var hOt=m($Pe=>{"use strict";Object.defineProperty($Pe,"__esModule",{value:!0});var C6=Sr(),Iyn={message({keyword:t,schemaCode:e}){let r=t==="maxItems"?"more":"fewer";return(0,C6.str)`must NOT have ${r} than ${e} items`},params:({schemaCode:t})=>(0,C6._)`{limit: ${t}}`},Pyn={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:Iyn,code(t){let{keyword:e,data:r,schemaCode:n}=t,o=e==="maxItems"?C6.operators.GT:C6.operators.LT;t.fail$data((0,C6._)`${r}.length ${o} ${n}`)}};$Pe.default=Pyn});var sJ=m(VPe=>{"use strict";Object.defineProperty(VPe,"__esModule",{value:!0});var mOt=pPe();mOt.code='require("ajv/dist/runtime/equal").default';VPe.default=mOt});var gOt=m(GPe=>{"use strict";Object.defineProperty(GPe,"__esModule",{value:!0});var HPe=u6(),Zs=Sr(),Ryn=an(),Oyn=sJ(),Myn={message:({params:{i:t,j:e}})=>(0,Zs.str)`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>(0,Zs._)`{i: ${t}, j: ${e}}`},Nyn={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:Myn,code(t){let{gen:e,data:r,$data:n,schema:o,parentSchema:s,schemaCode:a,it:c}=t;if(!n&&!o)return;let l=e.let("valid"),u=s.items?(0,HPe.getSchemaTypes)(s.items):[];t.block$data(l,d,(0,Zs._)`${a} === false`),t.ok(l);function d(){let _=e.let("i",(0,Zs._)`${r}.length`),g=e.let("j");t.setParams({i:_,j:g}),e.assign(l,!0),e.if((0,Zs._)`${_} > 1`,()=>(f()?p:h)(_,g))}function f(){return u.length>0&&!u.some(_=>_==="object"||_==="array")}function p(_,g){let v=e.name("item"),E=(0,HPe.checkDataTypes)(u,v,c.opts.strictNumbers,HPe.DataType.Wrong),y=e.const("indices",(0,Zs._)`{}`);e.for((0,Zs._)`;${_}--;`,()=>{e.let(v,(0,Zs._)`${r}[${_}]`),e.if(E,(0,Zs._)`continue`),u.length>1&&e.if((0,Zs._)`typeof ${v} == "string"`,(0,Zs._)`${v} += "_"`),e.if((0,Zs._)`typeof ${y}[${v}] == "number"`,()=>{e.assign(g,(0,Zs._)`${y}[${v}]`),t.error(),e.assign(l,!1).break()}).code((0,Zs._)`${y}[${v}] = ${_}`)})}function h(_,g){let v=(0,Ryn.useFunc)(e,Oyn.default),E=e.name("outer");e.label(E).for((0,Zs._)`;${_}--;`,()=>e.for((0,Zs._)`${g} = ${_}; ${g}--;`,()=>e.if((0,Zs._)`${v}(${r}[${_}], ${r}[${g}])`,()=>{t.error(),e.assign(l,!1).break(E)})))}}};GPe.default=Nyn});var _Ot=m(WPe=>{"use strict";Object.defineProperty(WPe,"__esModule",{value:!0});var zPe=Sr(),Lyn=an(),kyn=sJ(),Dyn={message:"must be equal to constant",params:({schemaCode:t})=>(0,zPe._)`{allowedValue: ${t}}`},Uyn={keyword:"const",$data:!0,error:Dyn,code(t){let{gen:e,data:r,$data:n,schemaCode:o,schema:s}=t;n||s&&typeof s=="object"?t.fail$data((0,zPe._)`!${(0,Lyn.useFunc)(e,kyn.default)}(${r}, ${o})`):t.fail((0,zPe._)`${s} !== ${r}`)}};WPe.default=Uyn});var vOt=m(KPe=>{"use strict";Object.defineProperty(KPe,"__esModule",{value:!0});var A6=Sr(),qyn=an(),Fyn=sJ(),jyn={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,A6._)`{allowedValues: ${t}}`},Byn={keyword:"enum",schemaType:"array",$data:!0,error:jyn,code(t){let{gen:e,data:r,$data:n,schema:o,schemaCode:s,it:a}=t;if(!n&&o.length===0)throw new Error("enum must have non-empty array");let c=o.length>=a.opts.loopEnum,l,u=()=>l??(l=(0,qyn.useFunc)(e,Fyn.default)),d;if(c||n)d=e.let("valid"),t.block$data(d,f);else{if(!Array.isArray(o))throw new Error("ajv implementation error");let h=e.const("vSchema",s);d=(0,A6.or)(...o.map((_,g)=>p(h,g)))}t.pass(d);function f(){e.assign(d,!1),e.forOf("v",s,h=>e.if((0,A6._)`${u()}(${r}, ${h})`,()=>e.assign(d,!0).break()))}function p(h,_){let g=o[_];return typeof g=="object"&&g!==null?(0,A6._)`${u()}(${r}, ${h}[${_}])`:(0,A6._)`${r} === ${g}`}}};KPe.default=Byn});var yOt=m(YPe=>{"use strict";Object.defineProperty(YPe,"__esModule",{value:!0});var $yn=sOt(),Vyn=aOt(),Hyn=uOt(),Gyn=dOt(),zyn=fOt(),Wyn=pOt(),Kyn=hOt(),Yyn=gOt(),Qyn=_Ot(),Zyn=vOt(),Jyn=[$yn.default,Vyn.default,Hyn.default,Gyn.default,zyn.default,Wyn.default,Kyn.default,Yyn.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},Qyn.default,Zyn.default];YPe.default=Jyn});var ZPe=m(x6=>{"use strict";Object.defineProperty(x6,"__esModule",{value:!0});x6.validateAdditionalItems=void 0;var _A=Sr(),QPe=an(),Xyn={message:({params:{len:t}})=>(0,_A.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,_A._)`{limit: ${t}}`},eEn={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:Xyn,code(t){let{parentSchema:e,it:r}=t,{items:n}=e;if(!Array.isArray(n)){(0,QPe.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}EOt(t,n)}};function EOt(t,e){let{gen:r,schema:n,data:o,keyword:s,it:a}=t;a.items=!0;let c=r.const("len",(0,_A._)`${o}.length`);if(n===!1)t.setParams({len:e.length}),t.pass((0,_A._)`${c} <= ${e.length}`);else if(typeof n=="object"&&!(0,QPe.alwaysValidSchema)(a,n)){let u=r.var("valid",(0,_A._)`${c} <= ${e.length}`);r.if((0,_A.not)(u),()=>l(u)),t.ok(u)}function l(u){r.forRange("i",e.length,c,d=>{t.subschema({keyword:s,dataProp:d,dataPropType:QPe.Type.Num},u),a.allErrors||r.if((0,_A.not)(u),()=>r.break())})}}x6.validateAdditionalItems=EOt;x6.default=eEn});var JPe=m(w6=>{"use strict";Object.defineProperty(w6,"__esModule",{value:!0});w6.validateTuple=void 0;var TOt=Sr(),aJ=an(),tEn=kd(),rEn={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){let{schema:e,it:r}=t;if(Array.isArray(e))return SOt(t,"additionalItems",e);r.items=!0,!(0,aJ.alwaysValidSchema)(r,e)&&t.ok((0,tEn.validateArray)(t))}};function SOt(t,e,r=t.schema){let{gen:n,parentSchema:o,data:s,keyword:a,it:c}=t;d(o),c.opts.unevaluated&&r.length&&c.items!==!0&&(c.items=aJ.mergeEvaluated.items(n,r.length,c.items));let l=n.name("valid"),u=n.const("len",(0,TOt._)`${s}.length`);r.forEach((f,p)=>{(0,aJ.alwaysValidSchema)(c,f)||(n.if((0,TOt._)`${u} > ${p}`,()=>t.subschema({keyword:a,schemaProp:p,dataProp:p},l)),t.ok(l))});function d(f){let{opts:p,errSchemaPath:h}=c,_=r.length,g=_===f.minItems&&(_===f.maxItems||f[e]===!1);if(p.strictTuples&&!g){let v=`"${a}" is ${_}-tuple, but minItems or maxItems/${e} are not specified or different at path "${h}"`;(0,aJ.checkStrictMode)(c,v,p.strictTuples)}}}w6.validateTuple=SOt;w6.default=rEn});var bOt=m(XPe=>{"use strict";Object.defineProperty(XPe,"__esModule",{value:!0});var nEn=JPe(),iEn={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,nEn.validateTuple)(t,"items")};XPe.default=iEn});var AOt=m(eRe=>{"use strict";Object.defineProperty(eRe,"__esModule",{value:!0});var COt=Sr(),oEn=an(),sEn=kd(),aEn=ZPe(),cEn={message:({params:{len:t}})=>(0,COt.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,COt._)`{limit: ${t}}`},lEn={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:cEn,code(t){let{schema:e,parentSchema:r,it:n}=t,{prefixItems:o}=r;n.items=!0,!(0,oEn.alwaysValidSchema)(n,e)&&(o?(0,aEn.validateAdditionalItems)(t,o):t.ok((0,sEn.validateArray)(t)))}};eRe.default=lEn});var xOt=m(tRe=>{"use strict";Object.defineProperty(tRe,"__esModule",{value:!0});var Ud=Sr(),cJ=an(),uEn={message:({params:{min:t,max:e}})=>e===void 0?(0,Ud.str)`must contain at least ${t} valid item(s)`:(0,Ud.str)`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?(0,Ud._)`{minContains: ${t}}`:(0,Ud._)`{minContains: ${t}, maxContains: ${e}}`},dEn={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:uEn,code(t){let{gen:e,schema:r,parentSchema:n,data:o,it:s}=t,a,c,{minContains:l,maxContains:u}=n;s.opts.next?(a=l===void 0?1:l,c=u):a=1;let d=e.const("len",(0,Ud._)`${o}.length`);if(t.setParams({min:a,max:c}),c===void 0&&a===0){(0,cJ.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(c!==void 0&&a>c){(0,cJ.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,cJ.alwaysValidSchema)(s,r)){let g=(0,Ud._)`${d} >= ${a}`;c!==void 0&&(g=(0,Ud._)`${g} && ${d} <= ${c}`),t.pass(g);return}s.items=!0;let f=e.name("valid");c===void 0&&a===1?h(f,()=>e.if(f,()=>e.break())):a===0?(e.let(f,!0),c!==void 0&&e.if((0,Ud._)`${o}.length > 0`,p)):(e.let(f,!1),p()),t.result(f,()=>t.reset());function p(){let g=e.name("_valid"),v=e.let("count",0);h(g,()=>e.if(g,()=>_(v)))}function h(g,v){e.forRange("i",0,d,E=>{t.subschema({keyword:"contains",dataProp:E,dataPropType:cJ.Type.Num,compositeRule:!0},g),v()})}function _(g){e.code((0,Ud._)`${g}++`),c===void 0?e.if((0,Ud._)`${g} >= ${a}`,()=>e.assign(f,!0).break()):(e.if((0,Ud._)`${g} > ${c}`,()=>e.assign(f,!1).break()),a===1?e.assign(f,!0):e.if((0,Ud._)`${g} >= ${a}`,()=>e.assign(f,!0)))}}};tRe.default=dEn});var POt=m(Ah=>{"use strict";Object.defineProperty(Ah,"__esModule",{value:!0});Ah.validateSchemaDeps=Ah.validatePropertyDeps=Ah.error=void 0;var rRe=Sr(),fEn=an(),I6=kd();Ah.error={message:({params:{property:t,depsCount:e,deps:r}})=>{let n=e===1?"property":"properties";return(0,rRe.str)`must have ${n} ${r} when property ${t} is present`},params:({params:{property:t,depsCount:e,deps:r,missingProperty:n}})=>(0,rRe._)`{property: ${t},
    missingProperty: ${n},
    depsCount: ${e},
    deps: ${r}}`};var pEn={keyword:"dependencies",type:"object",schemaType:"object",error:Ah.error,code(t){let[e,r]=hEn(t);wOt(t,e),IOt(t,r)}};function hEn({schema:t}){let e={},r={};for(let n in t){if(n==="__proto__")continue;let o=Array.isArray(t[n])?e:r;o[n]=t[n]}return[e,r]}function wOt(t,e=t.schema){let{gen:r,data:n,it:o}=t;if(Object.keys(e).length===0)return;let s=r.let("missing");for(let a in e){let c=e[a];if(c.length===0)continue;let l=(0,I6.propertyInData)(r,n,a,o.opts.ownProperties);t.setParams({property:a,depsCount:c.length,deps:c.join(", ")}),o.allErrors?r.if(l,()=>{for(let u of c)(0,I6.checkReportMissingProp)(t,u)}):(r.if((0,rRe._)`${l} && (${(0,I6.checkMissingProp)(t,c,s)})`),(0,I6.reportMissingProp)(t,s),r.else())}}Ah.validatePropertyDeps=wOt;function IOt(t,e=t.schema){let{gen:r,data:n,keyword:o,it:s}=t,a=r.name("valid");for(let c in e)(0,fEn.alwaysValidSchema)(s,e[c])||(r.if((0,I6.propertyInData)(r,n,c,s.opts.ownProperties),()=>{let l=t.subschema({keyword:o,schemaProp:c},a);t.mergeValidEvaluated(l,a)},()=>r.var(a,!0)),t.ok(a))}Ah.validateSchemaDeps=IOt;Ah.default=pEn});var OOt=m(nRe=>{"use strict";Object.defineProperty(nRe,"__esModule",{value:!0});var ROt=Sr(),mEn=an(),gEn={message:"property name must be valid",params:({params:t})=>(0,ROt._)`{propertyName: ${t.propertyName}}`},_En={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:gEn,code(t){let{gen:e,schema:r,data:n,it:o}=t;if((0,mEn.alwaysValidSchema)(o,r))return;let s=e.name("valid");e.forIn("key",n,a=>{t.setParams({propertyName:a}),t.subschema({keyword:"propertyNames",data:a,dataTypes:["string"],propertyName:a,compositeRule:!0},s),e.if((0,ROt.not)(s),()=>{t.error(!0),o.allErrors||e.break()})}),t.ok(s)}};nRe.default=_En});var oRe=m(iRe=>{"use strict";Object.defineProperty(iRe,"__esModule",{value:!0});var lJ=kd(),C0=Sr(),vEn=s_(),uJ=an(),yEn={message:"must NOT have additional properties",params:({params:t})=>(0,C0._)`{additionalProperty: ${t.additionalProperty}}`},EEn={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:yEn,code(t){let{gen:e,schema:r,parentSchema:n,data:o,errsCount:s,it:a}=t;if(!s)throw new Error("ajv implementation error");let{allErrors:c,opts:l}=a;if(a.props=!0,l.removeAdditional!=="all"&&(0,uJ.alwaysValidSchema)(a,r))return;let u=(0,lJ.allSchemaProperties)(n.properties),d=(0,lJ.allSchemaProperties)(n.patternProperties);f(),t.ok((0,C0._)`${s} === ${vEn.default.errors}`);function f(){e.forIn("key",o,v=>{!u.length&&!d.length?_(v):e.if(p(v),()=>_(v))})}function p(v){let E;if(u.length>8){let y=(0,uJ.schemaRefOrVal)(a,n.properties,"properties");E=(0,lJ.isOwnProperty)(e,y,v)}else u.length?E=(0,C0.or)(...u.map(y=>(0,C0._)`${v} === ${y}`)):E=C0.nil;return d.length&&(E=(0,C0.or)(E,...d.map(y=>(0,C0._)`${(0,lJ.usePattern)(t,y)}.test(${v})`))),(0,C0.not)(E)}function h(v){e.code((0,C0._)`delete ${o}[${v}]`)}function _(v){if(l.removeAdditional==="all"||l.removeAdditional&&r===!1){h(v);return}if(r===!1){t.setParams({additionalProperty:v}),t.error(),c||e.break();return}if(typeof r=="object"&&!(0,uJ.alwaysValidSchema)(a,r)){let E=e.name("valid");l.removeAdditional==="failing"?(g(v,E,!1),e.if((0,C0.not)(E),()=>{t.reset(),h(v)})):(g(v,E),c||e.if((0,C0.not)(E),()=>e.break()))}}function g(v,E,y){let S={keyword:"additionalProperties",dataProp:v,dataPropType:uJ.Type.Str};y===!1&&Object.assign(S,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(S,E)}}};iRe.default=EEn});var LOt=m(aRe=>{"use strict";Object.defineProperty(aRe,"__esModule",{value:!0});var TEn=h6(),MOt=kd(),sRe=an(),NOt=oRe(),SEn={keyword:"properties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,parentSchema:n,data:o,it:s}=t;s.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&NOt.default.code(new TEn.KeywordCxt(s,NOt.default,"additionalProperties"));let a=(0,MOt.allSchemaProperties)(r);for(let f of a)s.definedProperties.add(f);s.opts.unevaluated&&a.length&&s.props!==!0&&(s.props=sRe.mergeEvaluated.props(e,(0,sRe.toHash)(a),s.props));let c=a.filter(f=>!(0,sRe.alwaysValidSchema)(s,r[f]));if(c.length===0)return;let l=e.name("valid");for(let f of c)u(f)?d(f):(e.if((0,MOt.propertyInData)(e,o,f,s.opts.ownProperties)),d(f),s.allErrors||e.else().var(l,!0),e.endIf()),t.it.definedProperties.add(f),t.ok(l);function u(f){return s.opts.useDefaults&&!s.compositeRule&&r[f].default!==void 0}function d(f){t.subschema({keyword:"properties",schemaProp:f,dataProp:f},l)}}};aRe.default=SEn});var qOt=m(cRe=>{"use strict";Object.defineProperty(cRe,"__esModule",{value:!0});var kOt=kd(),dJ=Sr(),DOt=an(),UOt=an(),bEn={keyword:"patternProperties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,data:n,parentSchema:o,it:s}=t,{opts:a}=s,c=(0,kOt.allSchemaProperties)(r),l=c.filter(g=>(0,DOt.alwaysValidSchema)(s,r[g]));if(c.length===0||l.length===c.length&&(!s.opts.unevaluated||s.props===!0))return;let u=a.strictSchema&&!a.allowMatchingProperties&&o.properties,d=e.name("valid");s.props!==!0&&!(s.props instanceof dJ.Name)&&(s.props=(0,UOt.evaluatedPropsToName)(e,s.props));let{props:f}=s;p();function p(){for(let g of c)u&&h(g),s.allErrors?_(g):(e.var(d,!0),_(g),e.if(d))}function h(g){for(let v in u)new RegExp(g).test(v)&&(0,DOt.checkStrictMode)(s,`property ${v} matches pattern ${g} (use allowMatchingProperties)`)}function _(g){e.forIn("key",n,v=>{e.if((0,dJ._)`${(0,kOt.usePattern)(t,g)}.test(${v})`,()=>{let E=l.includes(g);E||t.subschema({keyword:"patternProperties",schemaProp:g,dataProp:v,dataPropType:UOt.Type.Str},d),s.opts.unevaluated&&f!==!0?e.assign((0,dJ._)`${f}[${v}]`,!0):!E&&!s.allErrors&&e.if((0,dJ.not)(d),()=>e.break())})})}}};cRe.default=bEn});var FOt=m(lRe=>{"use strict";Object.defineProperty(lRe,"__esModule",{value:!0});var CEn=an(),AEn={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){let{gen:e,schema:r,it:n}=t;if((0,CEn.alwaysValidSchema)(n,r)){t.fail();return}let o=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},o),t.failResult(o,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};lRe.default=AEn});var jOt=m(uRe=>{"use strict";Object.defineProperty(uRe,"__esModule",{value:!0});var xEn=kd(),wEn={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:xEn.validateUnion,error:{message:"must match a schema in anyOf"}};uRe.default=wEn});var BOt=m(dRe=>{"use strict";Object.defineProperty(dRe,"__esModule",{value:!0});var fJ=Sr(),IEn=an(),PEn={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,fJ._)`{passingSchemas: ${t.passing}}`},REn={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:PEn,code(t){let{gen:e,schema:r,parentSchema:n,it:o}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(o.opts.discriminator&&n.discriminator)return;let s=r,a=e.let("valid",!1),c=e.let("passing",null),l=e.name("_valid");t.setParams({passing:c}),e.block(u),t.result(a,()=>t.reset(),()=>t.error(!0));function u(){s.forEach((d,f)=>{let p;(0,IEn.alwaysValidSchema)(o,d)?e.var(l,!0):p=t.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},l),f>0&&e.if((0,fJ._)`${l} && ${a}`).assign(a,!1).assign(c,(0,fJ._)`[${c}, ${f}]`).else(),e.if(l,()=>{e.assign(a,!0),e.assign(c,f),p&&t.mergeEvaluated(p,fJ.Name)})})}}};dRe.default=REn});var $Ot=m(fRe=>{"use strict";Object.defineProperty(fRe,"__esModule",{value:!0});var OEn=an(),MEn={keyword:"allOf",schemaType:"array",code(t){let{gen:e,schema:r,it:n}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");let o=e.name("valid");r.forEach((s,a)=>{if((0,OEn.alwaysValidSchema)(n,s))return;let c=t.subschema({keyword:"allOf",schemaProp:a},o);t.ok(o),t.mergeEvaluated(c)})}};fRe.default=MEn});var GOt=m(pRe=>{"use strict";Object.defineProperty(pRe,"__esModule",{value:!0});var pJ=Sr(),HOt=an(),NEn={message:({params:t})=>(0,pJ.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,pJ._)`{failingKeyword: ${t.ifClause}}`},LEn={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:NEn,code(t){let{gen:e,parentSchema:r,it:n}=t;r.then===void 0&&r.else===void 0&&(0,HOt.checkStrictMode)(n,'"if" without "then" and "else" is ignored');let o=VOt(n,"then"),s=VOt(n,"else");if(!o&&!s)return;let a=e.let("valid",!0),c=e.name("_valid");if(l(),t.reset(),o&&s){let d=e.let("ifClause");t.setParams({ifClause:d}),e.if(c,u("then",d),u("else",d))}else o?e.if(c,u("then")):e.if((0,pJ.not)(c),u("else"));t.pass(a,()=>t.error(!0));function l(){let d=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},c);t.mergeEvaluated(d)}function u(d,f){return()=>{let p=t.subschema({keyword:d},c);e.assign(a,c),t.mergeValidEvaluated(p,a),f?e.assign(f,(0,pJ._)`${d}`):t.setParams({ifClause:d})}}}};function VOt(t,e){let r=t.schema[e];return r!==void 0&&!(0,HOt.alwaysValidSchema)(t,r)}pRe.default=LEn});var zOt=m(hRe=>{"use strict";Object.defineProperty(hRe,"__esModule",{value:!0});var kEn=an(),DEn={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:r}){e.if===void 0&&(0,kEn.checkStrictMode)(r,`"${t}" without "if" is ignored`)}};hRe.default=DEn});var WOt=m(mRe=>{"use strict";Object.defineProperty(mRe,"__esModule",{value:!0});var UEn=ZPe(),qEn=bOt(),FEn=JPe(),jEn=AOt(),BEn=xOt(),$En=POt(),VEn=OOt(),HEn=oRe(),GEn=LOt(),zEn=qOt(),WEn=FOt(),KEn=jOt(),YEn=BOt(),QEn=$Ot(),ZEn=GOt(),JEn=zOt();function XEn(t=!1){let e=[WEn.default,KEn.default,YEn.default,QEn.default,ZEn.default,JEn.default,VEn.default,HEn.default,$En.default,GEn.default,zEn.default];return t?e.push(qEn.default,jEn.default):e.push(UEn.default,FEn.default),e.push(BEn.default),e}mRe.default=XEn});var KOt=m(gRe=>{"use strict";Object.defineProperty(gRe,"__esModule",{value:!0});var _o=Sr(),eTn={message:({schemaCode:t})=>(0,_o.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,_o._)`{format: ${t}}`},tTn={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:eTn,code(t,e){let{gen:r,data:n,$data:o,schema:s,schemaCode:a,it:c}=t,{opts:l,errSchemaPath:u,schemaEnv:d,self:f}=c;if(!l.validateFormats)return;o?p():h();function p(){let _=r.scopeValue("formats",{ref:f.formats,code:l.code.formats}),g=r.const("fDef",(0,_o._)`${_}[${a}]`),v=r.let("fType"),E=r.let("format");r.if((0,_o._)`typeof ${g} == "object" && !(${g} instanceof RegExp)`,()=>r.assign(v,(0,_o._)`${g}.type || "string"`).assign(E,(0,_o._)`${g}.validate`),()=>r.assign(v,(0,_o._)`"string"`).assign(E,g)),t.fail$data((0,_o.or)(y(),S()));function y(){return l.strictSchema===!1?_o.nil:(0,_o._)`${a} && !${E}`}function S(){let b=d.$async?(0,_o._)`(${g}.async ? await ${E}(${n}) : ${E}(${n}))`:(0,_o._)`${E}(${n})`,w=(0,_o._)`(typeof ${E} == "function" ? ${b} : ${E}.test(${n}))`;return(0,_o._)`${E} && ${E} !== true && ${v} === ${e} && !${w}`}}function h(){let _=f.formats[s];if(!_){y();return}if(_===!0)return;let[g,v,E]=S(_);g===e&&t.pass(b());function y(){if(l.strictSchema===!1){f.logger.warn(w());return}throw new Error(w());function w(){return`unknown format "${s}" ignored in schema at path "${u}"`}}function S(w){let P=w instanceof RegExp?(0,_o.regexpCode)(w):l.code.formats?(0,_o._)`${l.code.formats}${(0,_o.getProperty)(s)}`:void 0,A=r.scopeValue("formats",{key:s,ref:w,code:P});return typeof w=="object"&&!(w instanceof RegExp)?[w.type||"string",w.validate,(0,_o._)`${A}.validate`]:["string",w,A]}function b(){if(typeof _=="object"&&!(_ instanceof RegExp)&&_.async){if(!d.$async)throw new Error("async format in sync schema");return(0,_o._)`await ${E}(${n})`}return typeof v=="function"?(0,_o._)`${E}(${n})`:(0,_o._)`${E}.test(${n})`}}}};gRe.default=tTn});var YOt=m(_Re=>{"use strict";Object.defineProperty(_Re,"__esModule",{value:!0});var rTn=KOt(),nTn=[rTn.default];_Re.default=nTn});var QOt=m(I2=>{"use strict";Object.defineProperty(I2,"__esModule",{value:!0});I2.contentVocabulary=I2.metadataVocabulary=void 0;I2.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];I2.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var JOt=m(vRe=>{"use strict";Object.defineProperty(vRe,"__esModule",{value:!0});var iTn=oOt(),oTn=yOt(),sTn=WOt(),aTn=YOt(),ZOt=QOt(),cTn=[iTn.default,oTn.default,(0,sTn.default)(),aTn.default,ZOt.metadataVocabulary,ZOt.contentVocabulary];vRe.default=cTn});var e2t=m(hJ=>{"use strict";Object.defineProperty(hJ,"__esModule",{value:!0});hJ.DiscrError=void 0;var XOt;(function(t){t.Tag="tag",t.Mapping="mapping"})(XOt||(hJ.DiscrError=XOt={}))});var r2t=m(ERe=>{"use strict";Object.defineProperty(ERe,"__esModule",{value:!0});var P2=Sr(),yRe=e2t(),t2t=YZ(),lTn=m6(),uTn=an(),dTn={message:({params:{discrError:t,tagName:e}})=>t===yRe.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:r}})=>(0,P2._)`{error: ${t}, tag: ${r}, tagValue: ${e}}`},fTn={keyword:"discriminator",type:"object",schemaType:"object",error:dTn,code(t){let{gen:e,data:r,schema:n,parentSchema:o,it:s}=t,{oneOf:a}=o;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");let c=n.propertyName;if(typeof c!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!a)throw new Error("discriminator: requires oneOf keyword");let l=e.let("valid",!1),u=e.const("tag",(0,P2._)`${r}${(0,P2.getProperty)(c)}`);e.if((0,P2._)`typeof ${u} == "string"`,()=>d(),()=>t.error(!1,{discrError:yRe.DiscrError.Tag,tag:u,tagName:c})),t.ok(l);function d(){let h=p();e.if(!1);for(let _ in h)e.elseIf((0,P2._)`${u} === ${_}`),e.assign(l,f(h[_]));e.else(),t.error(!1,{discrError:yRe.DiscrError.Mapping,tag:u,tagName:c}),e.endIf()}function f(h){let _=e.name("valid"),g=t.subschema({keyword:"oneOf",schemaProp:h},_);return t.mergeEvaluated(g,P2.Name),_}function p(){var h;let _={},g=E(o),v=!0;for(let b=0;b<a.length;b++){let w=a[b];if(w?.$ref&&!(0,uTn.schemaHasRulesButRef)(w,s.self.RULES)){let A=w.$ref;if(w=t2t.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,A),w instanceof t2t.SchemaEnv&&(w=w.schema),w===void 0)throw new lTn.default(s.opts.uriResolver,s.baseId,A)}let P=(h=w?.properties)===null||h===void 0?void 0:h[c];if(typeof P!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${c}"`);v=v&&(g||E(w)),y(P,b)}if(!v)throw new Error(`discriminator: "${c}" must be required`);return _;function E({required:b}){return Array.isArray(b)&&b.includes(c)}function y(b,w){if(b.const)S(b.const,w);else if(b.enum)for(let P of b.enum)S(P,w);else throw new Error(`discriminator: "properties/${c}" must have "const" or "enum"`)}function S(b,w){if(typeof b!="string"||b in _)throw new Error(`discriminator: "${c}" values must be unique strings`);_[b]=w}}}};ERe.default=fTn});var n2t=m((Hfi,pTn)=>{pTn.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var SRe=m((hi,TRe)=>{"use strict";Object.defineProperty(hi,"__esModule",{value:!0});hi.MissingRefError=hi.ValidationError=hi.CodeGen=hi.Name=hi.nil=hi.stringify=hi.str=hi._=hi.KeywordCxt=hi.Ajv=void 0;var hTn=XRt(),mTn=JOt(),gTn=r2t(),i2t=n2t(),_Tn=["/properties"],mJ="http://json-schema.org/draft-07/schema",R2=class extends hTn.default{_addVocabularies(){super._addVocabularies(),mTn.default.forEach(e=>this.addVocabulary(e)),this.opts.discriminator&&this.addKeyword(gTn.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let e=this.opts.$data?this.$dataMetaSchema(i2t,_Tn):i2t;this.addMetaSchema(e,mJ,!1),this.refs["http://json-schema.org/schema"]=mJ}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(mJ)?mJ:void 0)}};hi.Ajv=R2;TRe.exports=hi=R2;TRe.exports.Ajv=R2;Object.defineProperty(hi,"__esModule",{value:!0});hi.default=R2;var vTn=h6();Object.defineProperty(hi,"KeywordCxt",{enumerable:!0,get:function(){return vTn.KeywordCxt}});var O2=Sr();Object.defineProperty(hi,"_",{enumerable:!0,get:function(){return O2._}});Object.defineProperty(hi,"str",{enumerable:!0,get:function(){return O2.str}});Object.defineProperty(hi,"stringify",{enumerable:!0,get:function(){return O2.stringify}});Object.defineProperty(hi,"nil",{enumerable:!0,get:function(){return O2.nil}});Object.defineProperty(hi,"Name",{enumerable:!0,get:function(){return O2.Name}});Object.defineProperty(hi,"CodeGen",{enumerable:!0,get:function(){return O2.CodeGen}});var yTn=WZ();Object.defineProperty(hi,"ValidationError",{enumerable:!0,get:function(){return yTn.default}});var ETn=m6();Object.defineProperty(hi,"MissingRefError",{enumerable:!0,get:function(){return ETn.default}})});var f2t=m(wh=>{"use strict";Object.defineProperty(wh,"__esModule",{value:!0});wh.formatNames=wh.fastFormats=wh.fullFormats=void 0;function xh(t,e){return{validate:t,compare:e}}wh.fullFormats={date:xh(c2t,xRe),time:xh(CRe(!0),wRe),"date-time":xh(o2t(!0),u2t),"iso-time":xh(CRe(),l2t),"iso-date-time":xh(o2t(),d2t),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:xTn,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:NTn,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:wTn,int32:{type:"number",validate:RTn},int64:{type:"number",validate:OTn},float:{type:"number",validate:a2t},double:{type:"number",validate:a2t},password:!0,binary:!0};wh.fastFormats={...wh.fullFormats,date:xh(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,xRe),time:xh(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,wRe),"date-time":xh(/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,u2t),"iso-time":xh(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,l2t),"iso-date-time":xh(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,d2t),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i};wh.formatNames=Object.keys(wh.fullFormats);function TTn(t){return t%4===0&&(t%100!==0||t%400===0)}var STn=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,bTn=[0,31,28,31,30,31,30,31,31,30,31,30,31];function c2t(t){let e=STn.exec(t);if(!e)return!1;let r=+e[1],n=+e[2],o=+e[3];return n>=1&&n<=12&&o>=1&&o<=(n===2&&TTn(r)?29:bTn[n])}function xRe(t,e){if(t&&e)return t>e?1:t<e?-1:0}var bRe=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function CRe(t){return function(r){let n=bRe.exec(r);if(!n)return!1;let o=+n[1],s=+n[2],a=+n[3],c=n[4],l=n[5]==="-"?-1:1,u=+(n[6]||0),d=+(n[7]||0);if(u>23||d>59||t&&!c)return!1;if(o<=23&&s<=59&&a<60)return!0;let f=s-d*l,p=o-u*l-(f<0?1:0);return(p===23||p===-1)&&(f===59||f===-1)&&a<61}}function wRe(t,e){if(!(t&&e))return;let r=new Date("2020-01-01T"+t).valueOf(),n=new Date("2020-01-01T"+e).valueOf();if(r&&n)return r-n}function l2t(t,e){if(!(t&&e))return;let r=bRe.exec(t),n=bRe.exec(e);if(r&&n)return t=r[1]+r[2]+r[3],e=n[1]+n[2]+n[3],t>e?1:t<e?-1:0}var ARe=/t|\s/i;function o2t(t){let e=CRe(t);return function(n){let o=n.split(ARe);return o.length===2&&c2t(o[0])&&e(o[1])}}function u2t(t,e){if(!(t&&e))return;let r=new Date(t).valueOf(),n=new Date(e).valueOf();if(r&&n)return r-n}function d2t(t,e){if(!(t&&e))return;let[r,n]=t.split(ARe),[o,s]=e.split(ARe),a=xRe(r,o);if(a!==void 0)return a||wRe(n,s)}var CTn=/\/|:/,ATn=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function xTn(t){return CTn.test(t)&&ATn.test(t)}var s2t=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function wTn(t){return s2t.lastIndex=0,s2t.test(t)}var ITn=-(2**31),PTn=2**31-1;function RTn(t){return Number.isInteger(t)&&t<=PTn&&t>=ITn}function OTn(t){return Number.isInteger(t)}function a2t(){return!0}var MTn=/[^\\]\\Z/;function NTn(t){if(MTn.test(t))return!1;try{return new RegExp(t),!0}catch{return!1}}});var p2t=m(M2=>{"use strict";Object.defineProperty(M2,"__esModule",{value:!0});M2.formatLimitDefinition=void 0;var LTn=SRe(),A0=Sr(),Qy=A0.operators,gJ={formatMaximum:{okStr:"<=",ok:Qy.LTE,fail:Qy.GT},formatMinimum:{okStr:">=",ok:Qy.GTE,fail:Qy.LT},formatExclusiveMaximum:{okStr:"<",ok:Qy.LT,fail:Qy.GTE},formatExclusiveMinimum:{okStr:">",ok:Qy.GT,fail:Qy.LTE}},kTn={message:({keyword:t,schemaCode:e})=>(0,A0.str)`should be ${gJ[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,A0._)`{comparison: ${gJ[t].okStr}, limit: ${e}}`};M2.formatLimitDefinition={keyword:Object.keys(gJ),type:"string",schemaType:"string",$data:!0,error:kTn,code(t){let{gen:e,data:r,schemaCode:n,keyword:o,it:s}=t,{opts:a,self:c}=s;if(!a.validateFormats)return;let l=new LTn.KeywordCxt(s,c.RULES.all.format.definition,"format");l.$data?u():d();function u(){let p=e.scopeValue("formats",{ref:c.formats,code:a.code.formats}),h=e.const("fmt",(0,A0._)`${p}[${l.schemaCode}]`);t.fail$data((0,A0.or)((0,A0._)`typeof ${h} != "object"`,(0,A0._)`${h} instanceof RegExp`,(0,A0._)`typeof ${h}.compare != "function"`,f(h)))}function d(){let p=l.schema,h=c.formats[p];if(!h||h===!0)return;if(typeof h!="object"||h instanceof RegExp||typeof h.compare!="function")throw new Error(`"${o}": format "${p}" does not define "compare" function`);let _=e.scopeValue("formats",{key:p,ref:h,code:a.code.formats?(0,A0._)`${a.code.formats}${(0,A0.getProperty)(p)}`:void 0});t.fail$data(f(_))}function f(p){return(0,A0._)`${p}.compare(${r}, ${n}) ${gJ[o].fail} 0`}},dependencies:["format"]};var DTn=t=>(t.addKeyword(M2.formatLimitDefinition),t);M2.default=DTn});var _2t=m((P6,g2t)=>{"use strict";Object.defineProperty(P6,"__esModule",{value:!0});var N2=f2t(),UTn=p2t(),IRe=Sr(),h2t=new IRe.Name("fullFormats"),qTn=new IRe.Name("fastFormats"),PRe=(t,e={keywords:!0})=>{if(Array.isArray(e))return m2t(t,e,N2.fullFormats,h2t),t;let[r,n]=e.mode==="fast"?[N2.fastFormats,qTn]:[N2.fullFormats,h2t],o=e.formats||N2.formatNames;return m2t(t,o,r,n),e.keywords&&(0,UTn.default)(t),t};PRe.get=(t,e="full")=>{let n=(e==="fast"?N2.fastFormats:N2.fullFormats)[t];if(!n)throw new Error(`Unknown format "${t}"`);return n};function m2t(t,e,r,n){var o,s;(o=(s=t.opts.code).formats)!==null&&o!==void 0||(s.formats=(0,IRe._)`require("ajv-formats/dist/formats").${n}`);for(let a of e)t.addFormat(a,r[a])}g2t.exports=P6=PRe;Object.defineProperty(P6,"__esModule",{value:!0});P6.default=PRe});var XTn={};Xs(XTn,{InlineCompletionProvider:()=>xJ});module.exports=cn(XTn);var wJ=yt(JAe()),R2t=yt(zI()),O2t=yt(rxe()),Xi=yt(require("vscode"));function Xe(t,e,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(t,r):o?o.value=r:e.set(t,r),r}function re(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}var nxe=function(){let{crypto:t}=globalThis;if(t?.randomUUID)return nxe=t.randomUUID.bind(t),t.randomUUID();let e=new Uint8Array(1),r=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,n=>(+n^r()&15>>+n/4).toString(16))};function qg(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}var Wk=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){let e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};var Pt=class extends Error{},ys=class t extends Pt{constructor(e,r,n,o){super(`${t.makeMessage(e,r,n)}`),this.status=e,this.headers=o,this.requestID=o?.get("request-id"),this.error=r}static makeMessage(e,r,n){let o=r?.message?typeof r.message=="string"?r.message:JSON.stringify(r.message):r?JSON.stringify(r):n;return e&&o?`${e} ${o}`:e?`${e} status code (no body)`:o||"(no status code or body)"}static generate(e,r,n,o){if(!e||!o)return new _y({message:n,cause:Wk(r)});let s=r;return e===400?new YR(e,s,n,o):e===401?new QR(e,s,n,o):e===403?new ZR(e,s,n,o):e===404?new JR(e,s,n,o):e===409?new XR(e,s,n,o):e===422?new eO(e,s,n,o):e===429?new tO(e,s,n,o):e>=500?new rO(e,s,n,o):new t(e,s,n,o)}},Vs=class extends ys{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}},_y=class extends ys{constructor({message:e,cause:r}){super(void 0,void 0,e||"Connection error.",void 0),r&&(this.cause=r)}},KR=class extends _y{constructor({message:e}={}){super({message:e??"Request timed out."})}},YR=class extends ys{},QR=class extends ys{},ZR=class extends ys{},JR=class extends ys{},XR=class extends ys{},eO=class extends ys{},tO=class extends ys{},rO=class extends ys{};var ufn=/^[a-z][a-z0-9+.-]*:/i,sbt=t=>ufn.test(t),ixe=t=>(ixe=Array.isArray,ixe(t)),oxe=ixe;function iQ(t){return typeof t!="object"?{}:t??{}}function abt(t){if(!t)return!0;for(let e in t)return!1;return!0}function cbt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var lbt=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Pt(`${t} must be an integer`);if(e<0)throw new Pt(`${t} must be a positive integer`);return e};var oQ=t=>{try{return JSON.parse(t)}catch{return}};var ubt=t=>new Promise(e=>setTimeout(e,t));var vy="0.67.0";var hbt=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function dfn(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}var ffn=()=>{let t=dfn();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":vy,"X-Stainless-OS":fbt(Deno.build.os),"X-Stainless-Arch":dbt(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":vy,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":vy,"X-Stainless-OS":fbt(globalThis.process.platform??"unknown"),"X-Stainless-Arch":dbt(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};let e=pfn();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":vy,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":vy,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function pfn(){if(typeof navigator>"u"||!navigator)return null;let t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(let{key:e,pattern:r}of t){let n=r.exec(navigator.userAgent);if(n){let o=n[1]||0,s=n[2]||0,a=n[3]||0;return{browser:e,version:`${o}.${s}.${a}`}}}return null}var dbt=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",fbt=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown"),pbt,mbt=()=>pbt??(pbt=ffn());function gbt(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new Anthropic({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function sxe(...t){let e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function sQ(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return sxe({start(){},async pull(r){let{done:n,value:o}=await e.next();n?r.close():r.enqueue(o)},async cancel(){await e.return?.()}})}function Kk(t){if(t[Symbol.asyncIterator])return t;let e=t.getReader();return{async next(){try{let r=await e.read();return r?.done&&e.releaseLock(),r}catch(r){throw e.releaseLock(),r}},async return(){let r=e.cancel();return e.releaseLock(),await r,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function _bt(t){if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await t[Symbol.asyncIterator]().return?.();return}let e=t.getReader(),r=e.cancel();e.releaseLock(),await r}var vbt=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});function Tbt(t){let e=0;for(let o of t)e+=o.length;let r=new Uint8Array(e),n=0;for(let o of t)r.set(o,n),n+=o.length;return r}var ybt;function Yk(t){let e;return(ybt??(e=new globalThis.TextEncoder,ybt=e.encode.bind(e)))(t)}var Ebt;function axe(t){let e;return(Ebt??(e=new globalThis.TextDecoder,Ebt=e.decode.bind(e)))(t)}var hu,mu,Fg=class{constructor(){hu.set(this,void 0),mu.set(this,void 0),Xe(this,hu,new Uint8Array,"f"),Xe(this,mu,null,"f")}decode(e){if(e==null)return[];let r=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Yk(e):e;Xe(this,hu,Tbt([re(this,hu,"f"),r]),"f");let n=[],o;for(;(o=gfn(re(this,hu,"f"),re(this,mu,"f")))!=null;){if(o.carriage&&re(this,mu,"f")==null){Xe(this,mu,o.index,"f");continue}if(re(this,mu,"f")!=null&&(o.index!==re(this,mu,"f")+1||o.carriage)){n.push(axe(re(this,hu,"f").subarray(0,re(this,mu,"f")-1))),Xe(this,hu,re(this,hu,"f").subarray(re(this,mu,"f")),"f"),Xe(this,mu,null,"f");continue}let s=re(this,mu,"f")!==null?o.preceding-1:o.preceding,a=axe(re(this,hu,"f").subarray(0,s));n.push(a),Xe(this,hu,re(this,hu,"f").subarray(o.index),"f"),Xe(this,mu,null,"f")}return n}flush(){return re(this,hu,"f").length?this.decode(`
`):[]}};hu=new WeakMap,mu=new WeakMap;Fg.NEWLINE_CHARS=new Set([`
`,"\r"]);Fg.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function gfn(t,e){for(let o=e??0;o<t.length;o++){if(t[o]===10)return{preceding:o,index:o+1,carriage:!1};if(t[o]===13)return{preceding:o,index:o+1,carriage:!0}}return null}function Sbt(t){for(let n=0;n<t.length-1;n++){if(t[n]===10&&t[n+1]===10||t[n]===13&&t[n+1]===13)return n+2;if(t[n]===13&&t[n+1]===10&&n+3<t.length&&t[n+2]===13&&t[n+3]===10)return n+4}return-1}var cQ={off:0,error:200,warn:300,info:400,debug:500},cxe=(t,e,r)=>{if(t){if(cbt(cQ,t))return t;Es(r).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(cQ))}`)}};function Qk(){}function aQ(t,e,r){return!e||cQ[t]>cQ[r]?Qk:e[t].bind(e)}var _fn={error:Qk,warn:Qk,info:Qk,debug:Qk},bbt=new WeakMap;function Es(t){let e=t.logger,r=t.logLevel??"off";if(!e)return _fn;let n=bbt.get(e);if(n&&n[0]===r)return n[1];let o={error:aQ("error",e,r),warn:aQ("warn",e,r),info:aQ("info",e,r),debug:aQ("debug",e,r)};return bbt.set(e,[r,o]),o}var jg=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,r])=>[e,e.toLowerCase()==="x-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":r]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var Zk,ph=class t{constructor(e,r,n){this.iterator=e,Zk.set(this,void 0),this.controller=r,Xe(this,Zk,n,"f")}static fromSSEResponse(e,r,n){let o=!1,s=n?Es(n):console;async function*a(){if(o)throw new Pt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let c=!1;try{for await(let l of vfn(e,r)){if(l.event==="completion")try{yield JSON.parse(l.data)}catch(u){throw s.error("Could not parse message into JSON:",l.data),s.error("From chunk:",l.raw),u}if(l.event==="message_start"||l.event==="message_delta"||l.event==="message_stop"||l.event==="content_block_start"||l.event==="content_block_delta"||l.event==="content_block_stop")try{yield JSON.parse(l.data)}catch(u){throw s.error("Could not parse message into JSON:",l.data),s.error("From chunk:",l.raw),u}if(l.event!=="ping"&&l.event==="error")throw new ys(void 0,oQ(l.data)??l.data,void 0,e.headers)}c=!0}catch(l){if(qg(l))return;throw l}finally{c||r.abort()}}return new t(a,r,n)}static fromReadableStream(e,r,n){let o=!1;async function*s(){let c=new Fg,l=Kk(e);for await(let u of l)for(let d of c.decode(u))yield d;for(let u of c.flush())yield u}async function*a(){if(o)throw new Pt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let c=!1;try{for await(let l of s())c||l&&(yield JSON.parse(l));c=!0}catch(l){if(qg(l))return;throw l}finally{c||r.abort()}}return new t(a,r,n)}[(Zk=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){let e=[],r=[],n=this.iterator(),o=s=>({next:()=>{if(s.length===0){let a=n.next();e.push(a),r.push(a)}return s.shift()}});return[new t(()=>o(e),this.controller,re(this,Zk,"f")),new t(()=>o(r),this.controller,re(this,Zk,"f"))]}toReadableStream(){let e=this,r;return sxe({async start(){r=e[Symbol.asyncIterator]()},async pull(n){try{let{value:o,done:s}=await r.next();if(s)return n.close();let a=Yk(JSON.stringify(o)+`
`);n.enqueue(a)}catch(o){n.error(o)}},async cancel(){await r.return?.()}})}};async function*vfn(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Pt("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Pt("Attempted to iterate over a response with no body");let r=new lxe,n=new Fg,o=Kk(t.body);for await(let s of yfn(o))for(let a of n.decode(s)){let c=r.decode(a);c&&(yield c)}for(let s of n.flush()){let a=r.decode(s);a&&(yield a)}}async function*yfn(t){let e=new Uint8Array;for await(let r of t){if(r==null)continue;let n=r instanceof ArrayBuffer?new Uint8Array(r):typeof r=="string"?Yk(r):r,o=new Uint8Array(e.length+n.length);o.set(e),o.set(n,e.length),e=o;let s;for(;(s=Sbt(e))!==-1;)yield e.slice(0,s),e=e.slice(s)}e.length>0&&(yield e)}var lxe=class{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;let s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[r,n,o]=Efn(e,":");return o.startsWith(" ")&&(o=o.substring(1)),r==="event"?this.event=o:r==="data"&&this.data.push(o),null}};function Efn(t,e){let r=t.indexOf(e);return r!==-1?[t.substring(0,r),e,t.substring(r+e.length)]:[t,"",""]}async function lQ(t,e){let{response:r,requestLogID:n,retryOfRequestLogID:o,startTime:s}=e,a=await(async()=>{if(e.options.stream)return Es(t).debug("response",r.status,r.url,r.headers,r.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(r,e.controller):ph.fromSSEResponse(r,e.controller);if(r.status===204)return null;if(e.options.__binaryResponse)return r;let l=r.headers.get("content-type")?.split(";")[0]?.trim();if(l?.includes("application/json")||l?.endsWith("+json")){let f=await r.json();return uxe(f,r)}return await r.text()})();return Es(t).debug(`[${n}] response parsed`,jg({retryOfRequestLogID:o,url:r.url,status:r.status,body:a,durationMs:Date.now()-s})),a}function uxe(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("request-id"),enumerable:!1})}var Jk,IC=class t extends Promise{constructor(e,r,n=lQ){super(o=>{o(null)}),this.responsePromise=r,this.parseResponse=n,Jk.set(this,void 0),Xe(this,Jk,e,"f")}_thenUnwrap(e){return new t(re(this,Jk,"f"),this.responsePromise,async(r,n)=>uxe(e(await this.parseResponse(r,n),n),n.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){let[e,r]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:r,request_id:r.headers.get("request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(re(this,Jk,"f"),e))),this.parsedPromise}then(e,r){return this.parse().then(e,r)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}};Jk=new WeakMap;var uQ,dQ=class{constructor(e,r,n,o){uQ.set(this,void 0),Xe(this,uQ,e,"f"),this.options=o,this.response=r,this.body=n}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){let e=this.nextPageRequestOptions();if(!e)throw new Pt("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await re(this,uQ,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(uQ=new WeakMap,Symbol.asyncIterator)](){for await(let e of this.iterPages())for(let r of e.getPaginatedItems())yield r}},Xk=class extends IC{constructor(e,r,n){super(e,r,async(o,s)=>new n(o,s.response,await lQ(o,s),s.options))}async*[Symbol.asyncIterator](){let e=await this;for await(let r of e)yield r}},wd=class extends dQ{constructor(e,r,n,o){super(e,r,n,o),this.data=n.data||[],this.has_more=n.has_more||!1,this.first_id=n.first_id||null,this.last_id=n.last_id||null}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){if(this.options.query?.before_id){let r=this.first_id;return r?{...this.options,query:{...iQ(this.options.query),before_id:r}}:null}let e=this.last_id;return e?{...this.options,query:{...iQ(this.options.query),after_id:e}}:null}};var nO=class extends dQ{constructor(e,r,n,o){super(e,r,n,o),this.data=n.data||[],this.has_more=n.has_more||!1,this.next_page=n.next_page||null}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){let e=this.next_page;return e?{...this.options,query:{...iQ(this.options.query),page:e}}:null}};var fxe=()=>{if(typeof File>"u"){let{process:t}=globalThis,e=typeof t?.versions?.node=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(e?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function PC(t,e,r){return fxe(),new File(t,e??"unknown_file",r)}function eD(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}var pxe=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";var iO=async(t,e)=>({...t,body:await bfn(t.body,e)}),Cbt=new WeakMap;function Sfn(t){let e=typeof t=="function"?t:t.fetch,r=Cbt.get(e);if(r)return r;let n=(async()=>{try{let o="Response"in e?e.Response:(await e("data:,")).constructor,s=new FormData;return s.toString()!==await new o(s).text()}catch{return!0}})();return Cbt.set(e,n),n}var bfn=async(t,e)=>{if(!await Sfn(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");let r=new FormData;return await Promise.all(Object.entries(t||{}).map(([n,o])=>dxe(r,n,o))),r},Cfn=t=>t instanceof Blob&&"name"in t;var dxe=async(t,e,r)=>{if(r!==void 0){if(r==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")t.append(e,String(r));else if(r instanceof Response){let n={},o=r.headers.get("Content-Type");o&&(n={type:o}),t.append(e,PC([await r.blob()],eD(r),n))}else if(pxe(r))t.append(e,PC([await new Response(sQ(r)).blob()],eD(r)));else if(Cfn(r))t.append(e,PC([r],eD(r),{type:r.type}));else if(Array.isArray(r))await Promise.all(r.map(n=>dxe(t,e+"[]",n)));else if(typeof r=="object")await Promise.all(Object.entries(r).map(([n,o])=>dxe(t,`${e}[${n}]`,o)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${r} instead`)}};var Abt=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",Afn=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&Abt(t),xfn=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function fQ(t,e,r){if(fxe(),t=await t,e||(e=eD(t)),Afn(t))return t instanceof File&&e==null&&r==null?t:PC([await t.arrayBuffer()],e??t.name,{type:t.type,lastModified:t.lastModified,...r});if(xfn(t)){let o=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),PC(await hxe(o),e,r)}let n=await hxe(t);if(!r?.type){let o=n.find(s=>typeof s=="object"&&"type"in s&&s.type);typeof o=="string"&&(r={...r,type:o})}return PC(n,e,r)}async function hxe(t){let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(Abt(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(pxe(t))for await(let r of t)e.push(...await hxe(r));else{let r=t?.constructor?.name;throw new Error(`Unexpected data type: ${typeof t}${r?`; constructor: ${r}`:""}${wfn(t)}`)}return e}function wfn(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(r=>`"${r}"`).join(", ")}]`}var Ti=class{constructor(e){this._client=e}};var xbt=Symbol.for("brand.privateNullableHeaders");function*Pfn(t){if(!t)return;if(xbt in t){let{values:n,nulls:o}=t;yield*n.entries();for(let s of o)yield[s,null];return}let e=!1,r;t instanceof Headers?r=t.entries():oxe(t)?r=t:(e=!0,r=Object.entries(t??{}));for(let n of r){let o=n[0];if(typeof o!="string")throw new TypeError("expected header name to be a string");let s=oxe(n[1])?n[1]:[n[1]],a=!1;for(let c of s)c!==void 0&&(e&&!a&&(a=!0,yield[o,null]),yield[o,c])}}var nr=t=>{let e=new Headers,r=new Set;for(let n of t){let o=new Set;for(let[s,a]of Pfn(n)){let c=s.toLowerCase();o.has(c)||(e.delete(s),o.add(c)),a===null?(e.delete(s),r.add(c)):(e.append(s,a),r.delete(c))}}return{[xbt]:!0,values:e,nulls:r}};function Ibt(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}var wbt=Object.freeze(Object.create(null)),Rfn=(t=Ibt)=>function(r,...n){if(r.length===1)return r[0];let o=!1,s=[],a=r.reduce((d,f,p)=>{/[?#]/.test(f)&&(o=!0);let h=n[p],_=(o?encodeURIComponent:t)(""+h);return p!==n.length&&(h==null||typeof h=="object"&&h.toString===Object.getPrototypeOf(Object.getPrototypeOf(h.hasOwnProperty??wbt)??wbt)?.toString)&&(_=h+"",s.push({start:d.length+f.length,length:_.length,error:`Value of type ${Object.prototype.toString.call(h).slice(8,-1)} is not a valid path parameter`})),d+f+(p===n.length?"":_)},""),c=a.split(/[?#]/,1)[0],l=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi,u;for(;(u=l.exec(c))!==null;)s.push({start:u.index,length:u[0].length,error:`Value "${u[0]}" can't be safely passed as a path parameter`});if(s.sort((d,f)=>d.start-f.start),s.length>0){let d=0,f=s.reduce((p,h)=>{let _=" ".repeat(h.start-d),g="^".repeat(h.length);return d=h.start+h.length,p+_+g},"");throw new Pt(`Path parameters result in path with invalid segments:
${s.map(p=>p.error).join(`
`)}
${a}
${f}`)}return a},Si=Rfn(Ibt);var oO=class extends Ti{list(e={},r){let{betas:n,...o}=e??{};return this._client.getAPIList("/v1/files",wd,{query:o,...r,headers:nr([{"anthropic-beta":[...n??[],"files-api-2025-04-14"].toString()},r?.headers])})}delete(e,r={},n){let{betas:o}=r??{};return this._client.delete(Si`/v1/files/${e}`,{...n,headers:nr([{"anthropic-beta":[...o??[],"files-api-2025-04-14"].toString()},n?.headers])})}download(e,r={},n){let{betas:o}=r??{};return this._client.get(Si`/v1/files/${e}/content`,{...n,headers:nr([{"anthropic-beta":[...o??[],"files-api-2025-04-14"].toString(),Accept:"application/binary"},n?.headers]),__binaryResponse:!0})}retrieveMetadata(e,r={},n){let{betas:o}=r??{};return this._client.get(Si`/v1/files/${e}`,{...n,headers:nr([{"anthropic-beta":[...o??[],"files-api-2025-04-14"].toString()},n?.headers])})}upload(e,r){let{betas:n,...o}=e;return this._client.post("/v1/files",iO({body:o,...r,headers:nr([{"anthropic-beta":[...n??[],"files-api-2025-04-14"].toString()},r?.headers])},this._client))}};var sO=class extends Ti{retrieve(e,r={},n){let{betas:o}=r??{};return this._client.get(Si`/v1/models/${e}?beta=true`,{...n,headers:nr([{...o?.toString()!=null?{"anthropic-beta":o?.toString()}:void 0},n?.headers])})}list(e={},r){let{betas:n,...o}=e??{};return this._client.getAPIList("/v1/models?beta=true",wd,{query:o,...r,headers:nr([{...n?.toString()!=null?{"anthropic-beta":n?.toString()}:void 0},r?.headers])})}};var aO=class t{constructor(e,r){this.iterator=e,this.controller=r}async*decoder(){let e=new Fg;for await(let r of this.iterator)for(let n of e.decode(r))yield JSON.parse(n);for(let r of e.flush())yield JSON.parse(r)}[Symbol.asyncIterator](){return this.decoder()}static fromResponse(e,r){if(!e.body)throw r.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Pt("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Pt("Attempted to iterate over a response with no body");return new t(Kk(e.body),r)}};var cO=class extends Ti{create(e,r){let{betas:n,...o}=e;return this._client.post("/v1/messages/batches?beta=true",{body:o,...r,headers:nr([{"anthropic-beta":[...n??[],"message-batches-2024-09-24"].toString()},r?.headers])})}retrieve(e,r={},n){let{betas:o}=r??{};return this._client.get(Si`/v1/messages/batches/${e}?beta=true`,{...n,headers:nr([{"anthropic-beta":[...o??[],"message-batches-2024-09-24"].toString()},n?.headers])})}list(e={},r){let{betas:n,...o}=e??{};return this._client.getAPIList("/v1/messages/batches?beta=true",wd,{query:o,...r,headers:nr([{"anthropic-beta":[...n??[],"message-batches-2024-09-24"].toString()},r?.headers])})}delete(e,r={},n){let{betas:o}=r??{};return this._client.delete(Si`/v1/messages/batches/${e}?beta=true`,{...n,headers:nr([{"anthropic-beta":[...o??[],"message-batches-2024-09-24"].toString()},n?.headers])})}cancel(e,r={},n){let{betas:o}=r??{};return this._client.post(Si`/v1/messages/batches/${e}/cancel?beta=true`,{...n,headers:nr([{"anthropic-beta":[...o??[],"message-batches-2024-09-24"].toString()},n?.headers])})}async results(e,r={},n){let o=await this.retrieve(e);if(!o.results_url)throw new Pt(`No batch \`results_url\`; Has it finished processing? ${o.processing_status} - ${o.id}`);let{betas:s}=r??{};return this._client.get(o.results_url,{...n,headers:nr([{"anthropic-beta":[...s??[],"message-batches-2024-09-24"].toString(),Accept:"application/binary"},n?.headers]),stream:!0,__binaryResponse:!0})._thenUnwrap((a,c)=>aO.fromResponse(c.response,c.controller))}};var Lfn=t=>{let e=0,r=[];for(;e<t.length;){let n=t[e];if(n==="\\"){e++;continue}if(n==="{"){r.push({type:"brace",value:"{"}),e++;continue}if(n==="}"){r.push({type:"brace",value:"}"}),e++;continue}if(n==="["){r.push({type:"paren",value:"["}),e++;continue}if(n==="]"){r.push({type:"paren",value:"]"}),e++;continue}if(n===":"){r.push({type:"separator",value:":"}),e++;continue}if(n===","){r.push({type:"delimiter",value:","}),e++;continue}if(n==='"'){let c="",l=!1;for(n=t[++e];n!=='"';){if(e===t.length){l=!0;break}if(n==="\\"){if(e++,e===t.length){l=!0;break}c+=n+t[e],n=t[++e]}else c+=n,n=t[++e]}n=t[++e],l||r.push({type:"string",value:c});continue}if(n&&/\s/.test(n)){e++;continue}let s=/[0-9]/;if(n&&s.test(n)||n==="-"||n==="."){let c="";for(n==="-"&&(c+=n,n=t[++e]);n&&s.test(n)||n===".";)c+=n,n=t[++e];r.push({type:"number",value:c});continue}let a=/[a-z]/i;if(n&&a.test(n)){let c="";for(;n&&a.test(n)&&e!==t.length;)c+=n,n=t[++e];if(c=="true"||c=="false"||c==="null")r.push({type:"name",value:c});else{e++;continue}continue}e++}return r},lO=t=>{if(t.length===0)return t;let e=t[t.length-1];switch(e.type){case"separator":return t=t.slice(0,t.length-1),lO(t);break;case"number":let r=e.value[e.value.length-1];if(r==="."||r==="-")return t=t.slice(0,t.length-1),lO(t);case"string":let n=t[t.length-2];if(n?.type==="delimiter")return t=t.slice(0,t.length-1),lO(t);if(n?.type==="brace"&&n.value==="{")return t=t.slice(0,t.length-1),lO(t);break;case"delimiter":return t=t.slice(0,t.length-1),lO(t);break}return t},kfn=t=>{let e=[];return t.map(r=>{r.type==="brace"&&(r.value==="{"?e.push("}"):e.splice(e.lastIndexOf("}"),1)),r.type==="paren"&&(r.value==="["?e.push("]"):e.splice(e.lastIndexOf("]"),1))}),e.length>0&&e.reverse().map(r=>{r==="}"?t.push({type:"brace",value:"}"}):r==="]"&&t.push({type:"paren",value:"]"})}),t},Dfn=t=>{let e="";return t.map(r=>{switch(r.type){case"string":e+='"'+r.value+'"';break;default:e+=r.value;break}}),e},pQ=t=>JSON.parse(Dfn(kfn(lO(Lfn(t)))));var Id,yy,tD,hQ,rD,nD,mQ,iD,Bg,oD,gQ,_Q,uO,vQ,yQ,mxe,Pbt,EQ,gxe,_xe,vxe,Rbt,Obt="__json_buf";function Mbt(t){return t.type==="tool_use"||t.type==="server_tool_use"||t.type==="mcp_tool_use"}var TQ=class t{constructor(){Id.add(this),this.messages=[],this.receivedMessages=[],yy.set(this,void 0),this.controller=new AbortController,tD.set(this,void 0),hQ.set(this,()=>{}),rD.set(this,()=>{}),nD.set(this,void 0),mQ.set(this,()=>{}),iD.set(this,()=>{}),Bg.set(this,{}),oD.set(this,!1),gQ.set(this,!1),_Q.set(this,!1),uO.set(this,!1),vQ.set(this,void 0),yQ.set(this,void 0),EQ.set(this,e=>{if(Xe(this,gQ,!0,"f"),qg(e)&&(e=new Vs),e instanceof Vs)return Xe(this,_Q,!0,"f"),this._emit("abort",e);if(e instanceof Pt)return this._emit("error",e);if(e instanceof Error){let r=new Pt(e.message);return r.cause=e,this._emit("error",r)}return this._emit("error",new Pt(String(e)))}),Xe(this,tD,new Promise((e,r)=>{Xe(this,hQ,e,"f"),Xe(this,rD,r,"f")}),"f"),Xe(this,nD,new Promise((e,r)=>{Xe(this,mQ,e,"f"),Xe(this,iD,r,"f")}),"f"),re(this,tD,"f").catch(()=>{}),re(this,nD,"f").catch(()=>{})}get response(){return re(this,vQ,"f")}get request_id(){return re(this,yQ,"f")}async withResponse(){let e=await re(this,tD,"f");if(!e)throw new Error("Could not resolve a `Response` object");return{data:this,response:e,request_id:e.headers.get("request-id")}}static fromReadableStream(e){let r=new t;return r._run(()=>r._fromReadableStream(e)),r}static createMessage(e,r,n){let o=new t;for(let s of r.messages)o._addMessageParam(s);return o._run(()=>o._createMessage(e,{...r,stream:!0},{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),o}_run(e){e().then(()=>{this._emitFinal(),this._emit("end")},re(this,EQ,"f"))}_addMessageParam(e){this.messages.push(e)}_addMessage(e,r=!0){this.receivedMessages.push(e),r&&this._emit("message",e)}async _createMessage(e,r,n){let o=n?.signal,s;o&&(o.aborted&&this.controller.abort(),s=this.controller.abort.bind(this.controller),o.addEventListener("abort",s));try{re(this,Id,"m",gxe).call(this);let{response:a,data:c}=await e.create({...r,stream:!0},{...n,signal:this.controller.signal}).withResponse();this._connected(a);for await(let l of c)re(this,Id,"m",_xe).call(this,l);if(c.controller.signal?.aborted)throw new Vs;re(this,Id,"m",vxe).call(this)}finally{o&&s&&o.removeEventListener("abort",s)}}_connected(e){this.ended||(Xe(this,vQ,e,"f"),Xe(this,yQ,e?.headers.get("request-id"),"f"),re(this,hQ,"f").call(this,e),this._emit("connect"))}get ended(){return re(this,oD,"f")}get errored(){return re(this,gQ,"f")}get aborted(){return re(this,_Q,"f")}abort(){this.controller.abort()}on(e,r){return(re(this,Bg,"f")[e]||(re(this,Bg,"f")[e]=[])).push({listener:r}),this}off(e,r){let n=re(this,Bg,"f")[e];if(!n)return this;let o=n.findIndex(s=>s.listener===r);return o>=0&&n.splice(o,1),this}once(e,r){return(re(this,Bg,"f")[e]||(re(this,Bg,"f")[e]=[])).push({listener:r,once:!0}),this}emitted(e){return new Promise((r,n)=>{Xe(this,uO,!0,"f"),e!=="error"&&this.once("error",n),this.once(e,r)})}async done(){Xe(this,uO,!0,"f"),await re(this,nD,"f")}get currentMessage(){return re(this,yy,"f")}async finalMessage(){return await this.done(),re(this,Id,"m",mxe).call(this)}async finalText(){return await this.done(),re(this,Id,"m",Pbt).call(this)}_emit(e,...r){if(re(this,oD,"f"))return;e==="end"&&(Xe(this,oD,!0,"f"),re(this,mQ,"f").call(this));let n=re(this,Bg,"f")[e];if(n&&(re(this,Bg,"f")[e]=n.filter(o=>!o.once),n.forEach(({listener:o})=>o(...r))),e==="abort"){let o=r[0];!re(this,uO,"f")&&!n?.length&&Promise.reject(o),re(this,rD,"f").call(this,o),re(this,iD,"f").call(this,o),this._emit("end");return}if(e==="error"){let o=r[0];!re(this,uO,"f")&&!n?.length&&Promise.reject(o),re(this,rD,"f").call(this,o),re(this,iD,"f").call(this,o),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalMessage",re(this,Id,"m",mxe).call(this))}async _fromReadableStream(e,r){let n=r?.signal,o;n&&(n.aborted&&this.controller.abort(),o=this.controller.abort.bind(this.controller),n.addEventListener("abort",o));try{re(this,Id,"m",gxe).call(this),this._connected(null);let s=ph.fromReadableStream(e,this.controller);for await(let a of s)re(this,Id,"m",_xe).call(this,a);if(s.controller.signal?.aborted)throw new Vs;re(this,Id,"m",vxe).call(this)}finally{n&&o&&n.removeEventListener("abort",o)}}[(yy=new WeakMap,tD=new WeakMap,hQ=new WeakMap,rD=new WeakMap,nD=new WeakMap,mQ=new WeakMap,iD=new WeakMap,Bg=new WeakMap,oD=new WeakMap,gQ=new WeakMap,_Q=new WeakMap,uO=new WeakMap,vQ=new WeakMap,yQ=new WeakMap,EQ=new WeakMap,Id=new WeakSet,mxe=function(){if(this.receivedMessages.length===0)throw new Pt("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},Pbt=function(){if(this.receivedMessages.length===0)throw new Pt("stream ended without producing a Message with role=assistant");let r=this.receivedMessages.at(-1).content.filter(n=>n.type==="text").map(n=>n.text);if(r.length===0)throw new Pt("stream ended without producing a content block with type=text");return r.join(" ")},gxe=function(){this.ended||Xe(this,yy,void 0,"f")},_xe=function(r){if(this.ended)return;let n=re(this,Id,"m",Rbt).call(this,r);switch(this._emit("streamEvent",r,n),r.type){case"content_block_delta":{let o=n.content.at(-1);switch(r.delta.type){case"text_delta":{o.type==="text"&&this._emit("text",r.delta.text,o.text||"");break}case"citations_delta":{o.type==="text"&&this._emit("citation",r.delta.citation,o.citations??[]);break}case"input_json_delta":{Mbt(o)&&o.input&&this._emit("inputJson",r.delta.partial_json,o.input);break}case"thinking_delta":{o.type==="thinking"&&this._emit("thinking",r.delta.thinking,o.thinking);break}case"signature_delta":{o.type==="thinking"&&this._emit("signature",o.signature);break}default:r.delta}break}case"message_stop":{this._addMessageParam(n),this._addMessage(n,!0);break}case"content_block_stop":{this._emit("contentBlock",n.content.at(-1));break}case"message_start":{Xe(this,yy,n,"f");break}case"content_block_start":case"message_delta":break}},vxe=function(){if(this.ended)throw new Pt("stream has ended, this shouldn't happen");let r=re(this,yy,"f");if(!r)throw new Pt("request ended without sending any chunks");return Xe(this,yy,void 0,"f"),r},Rbt=function(r){let n=re(this,yy,"f");if(r.type==="message_start"){if(n)throw new Pt(`Unexpected event order, got ${r.type} before receiving "message_stop"`);return r.message}if(!n)throw new Pt(`Unexpected event order, got ${r.type} before "message_start"`);switch(r.type){case"message_stop":return n;case"message_delta":return n.container=r.delta.container,n.stop_reason=r.delta.stop_reason,n.stop_sequence=r.delta.stop_sequence,n.usage.output_tokens=r.usage.output_tokens,n.context_management=r.context_management,r.usage.input_tokens!=null&&(n.usage.input_tokens=r.usage.input_tokens),r.usage.cache_creation_input_tokens!=null&&(n.usage.cache_creation_input_tokens=r.usage.cache_creation_input_tokens),r.usage.cache_read_input_tokens!=null&&(n.usage.cache_read_input_tokens=r.usage.cache_read_input_tokens),r.usage.server_tool_use!=null&&(n.usage.server_tool_use=r.usage.server_tool_use),n;case"content_block_start":return n.content.push(r.content_block),n;case"content_block_delta":{let o=n.content.at(r.index);switch(r.delta.type){case"text_delta":{o?.type==="text"&&(n.content[r.index]={...o,text:(o.text||"")+r.delta.text});break}case"citations_delta":{o?.type==="text"&&(n.content[r.index]={...o,citations:[...o.citations??[],r.delta.citation]});break}case"input_json_delta":{if(o&&Mbt(o)){let s=o[Obt]||"";s+=r.delta.partial_json;let a={...o};if(Object.defineProperty(a,Obt,{value:s,enumerable:!1,writable:!0}),s)try{a.input=pQ(s)}catch(c){let l=new Pt(`Unable to parse tool parameter JSON from model. Please retry your request or adjust your prompt. Error: ${c}. JSON: ${s}`);re(this,EQ,"f").call(this,l)}n.content[r.index]=a}break}case"thinking_delta":{o?.type==="thinking"&&(n.content[r.index]={...o,thinking:o.thinking+r.delta.thinking});break}case"signature_delta":{o?.type==="thinking"&&(n.content[r.index]={...o,signature:r.delta.signature});break}default:r.delta}return n}case"content_block_stop":return n}},Symbol.asyncIterator)](){let e=[],r=[],n=!1;return this.on("streamEvent",o=>{let s=r.shift();s?s.resolve(o):e.push(o)}),this.on("end",()=>{n=!0;for(let o of r)o.resolve(void 0);r.length=0}),this.on("abort",o=>{n=!0;for(let s of r)s.reject(o);r.length=0}),this.on("error",o=>{n=!0;for(let s of r)s.reject(o);r.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((s,a)=>r.push({resolve:s,reject:a})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new ph(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}};var SQ={"claude-opus-4-20250514":8192,"claude-opus-4-0":8192,"claude-4-opus-20250514":8192,"anthropic.claude-opus-4-20250514-v1:0":8192,"claude-opus-4@20250514":8192,"claude-opus-4-1-20250805":8192,"anthropic.claude-opus-4-1-20250805-v1:0":8192,"claude-opus-4-1@20250805":8192};var bQ,dO,RC,Cl,sD,f0,$g,Ey,aD,yxe;function Nbt(){let t,e;return{promise:new Promise((n,o)=>{t=n,e=o}),resolve:t,reject:e}}var fO=class{constructor(e,r,n){bQ.add(this),this.client=e,dO.set(this,!1),RC.set(this,!1),Cl.set(this,void 0),sD.set(this,void 0),f0.set(this,void 0),$g.set(this,void 0),Ey.set(this,void 0),aD.set(this,0),Xe(this,Cl,{params:{...r,messages:structuredClone(r.messages)}},"f"),Xe(this,sD,{...n,headers:nr([{"x-stainless-helper":"BetaToolRunner"},n?.headers])},"f"),Xe(this,Ey,Nbt(),"f")}async*[(dO=new WeakMap,RC=new WeakMap,Cl=new WeakMap,sD=new WeakMap,f0=new WeakMap,$g=new WeakMap,Ey=new WeakMap,aD=new WeakMap,bQ=new WeakSet,Symbol.asyncIterator)](){var e;if(re(this,dO,"f"))throw new Pt("Cannot iterate over a consumed stream");Xe(this,dO,!0,"f"),Xe(this,RC,!0,"f"),Xe(this,$g,void 0,"f");try{for(;;){let r;try{if(re(this,Cl,"f").params.max_iterations&&re(this,aD,"f")>=re(this,Cl,"f").params.max_iterations)break;Xe(this,RC,!1,"f"),Xe(this,f0,void 0,"f"),Xe(this,$g,void 0,"f"),Xe(this,aD,(e=re(this,aD,"f"),e++,e),"f");let{max_iterations:n,...o}=re(this,Cl,"f").params;if(o.stream?(r=this.client.beta.messages.stream({...o},re(this,sD,"f")),Xe(this,f0,r.finalMessage(),"f"),re(this,f0,"f").catch(()=>{}),yield r):(Xe(this,f0,this.client.beta.messages.create({...o,stream:!1},re(this,sD,"f")),"f"),yield re(this,f0,"f")),!re(this,RC,"f")){let{role:a,content:c}=await re(this,f0,"f");re(this,Cl,"f").params.messages.push({role:a,content:c})}let s=await re(this,bQ,"m",yxe).call(this,re(this,Cl,"f").params.messages.at(-1));if(s&&re(this,Cl,"f").params.messages.push(s),!s&&!re(this,RC,"f"))break}finally{r&&r.abort()}}if(!re(this,f0,"f"))throw new Pt("ToolRunner concluded without a message from the server");re(this,Ey,"f").resolve(await re(this,f0,"f"))}catch(r){throw Xe(this,dO,!1,"f"),re(this,Ey,"f").promise.catch(()=>{}),re(this,Ey,"f").reject(r),Xe(this,Ey,Nbt(),"f"),r}}setMessagesParams(e){typeof e=="function"?re(this,Cl,"f").params=e(re(this,Cl,"f").params):re(this,Cl,"f").params=e,Xe(this,RC,!0,"f"),Xe(this,$g,void 0,"f")}async generateToolResponse(){let e=await re(this,f0,"f")??this.params.messages.at(-1);return e?re(this,bQ,"m",yxe).call(this,e):null}done(){return re(this,Ey,"f").promise}async runUntilDone(){if(!re(this,dO,"f"))for await(let e of this);return this.done()}get params(){return re(this,Cl,"f").params}pushMessages(...e){this.setMessagesParams(r=>({...r,messages:[...r.messages,...e]}))}then(e,r){return this.runUntilDone().then(e,r)}};yxe=async function(e){return re(this,$g,"f")!==void 0?re(this,$g,"f"):(Xe(this,$g,Ufn(re(this,Cl,"f").params,e),"f"),re(this,$g,"f"))};async function Ufn(t,e=t.messages.at(-1)){if(!e||e.role!=="assistant"||!e.content||typeof e.content=="string")return null;let r=e.content.filter(o=>o.type==="tool_use");return r.length===0?null:{role:"user",content:await Promise.all(r.map(async o=>{let s=t.tools.find(a=>a.name===o.name);if(!s||!("run"in s))return{type:"tool_result",tool_use_id:o.id,content:`Error: Tool '${o.name}' not found`,is_error:!0};try{let a=o.input;"parse"in s&&s.parse&&(a=s.parse(a));let c=await s.run(a);return{type:"tool_result",tool_use_id:o.id,content:c}}catch(a){return{type:"tool_result",tool_use_id:o.id,content:`Error: ${a instanceof Error?a.message:String(a)}`,is_error:!0}}}))}}var Lbt={"claude-1.3":"November 6th, 2024","claude-1.3-100k":"November 6th, 2024","claude-instant-1.1":"November 6th, 2024","claude-instant-1.1-100k":"November 6th, 2024","claude-instant-1.2":"November 6th, 2024","claude-3-sonnet-20240229":"July 21st, 2025","claude-3-opus-20240229":"January 5th, 2026","claude-2.1":"July 21st, 2025","claude-2.0":"July 21st, 2025","claude-3-5-sonnet-20241022":"October 22, 2025","claude-3-5-sonnet-20240620":"October 22, 2025"},Ty=class extends Ti{constructor(){super(...arguments),this.batches=new cO(this._client)}create(e,r){let{betas:n,...o}=e;o.model in Lbt&&console.warn(`The model '${o.model}' is deprecated and will reach end-of-life on ${Lbt[o.model]}
Please migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`);let s=this._client._options.timeout;if(!o.stream&&s==null){let a=SQ[o.model]??void 0;s=this._client.calculateNonstreamingTimeout(o.max_tokens,a)}return this._client.post("/v1/messages?beta=true",{body:o,timeout:s??6e5,...r,headers:nr([{...n?.toString()!=null?{"anthropic-beta":n?.toString()}:void 0},r?.headers]),stream:e.stream??!1})}stream(e,r){return TQ.createMessage(this,e,r)}countTokens(e,r){let{betas:n,...o}=e;return this._client.post("/v1/messages/count_tokens?beta=true",{body:o,...r,headers:nr([{"anthropic-beta":[...n??[],"token-counting-2024-11-01"].toString()},r?.headers])})}toolRunner(e,r){return new fO(this._client,e,r)}};Ty.Batches=cO;Ty.BetaToolRunner=fO;var pO=class extends Ti{create(e,r={},n){let{betas:o,...s}=r??{};return this._client.post(Si`/v1/skills/${e}/versions?beta=true`,iO({body:s,...n,headers:nr([{"anthropic-beta":[...o??[],"skills-2025-10-02"].toString()},n?.headers])},this._client))}retrieve(e,r,n){let{skill_id:o,betas:s}=r;return this._client.get(Si`/v1/skills/${o}/versions/${e}?beta=true`,{...n,headers:nr([{"anthropic-beta":[...s??[],"skills-2025-10-02"].toString()},n?.headers])})}list(e,r={},n){let{betas:o,...s}=r??{};return this._client.getAPIList(Si`/v1/skills/${e}/versions?beta=true`,nO,{query:s,...n,headers:nr([{"anthropic-beta":[...o??[],"skills-2025-10-02"].toString()},n?.headers])})}delete(e,r,n){let{skill_id:o,betas:s}=r;return this._client.delete(Si`/v1/skills/${o}/versions/${e}?beta=true`,{...n,headers:nr([{"anthropic-beta":[...s??[],"skills-2025-10-02"].toString()},n?.headers])})}};var OC=class extends Ti{constructor(){super(...arguments),this.versions=new pO(this._client)}create(e={},r){let{betas:n,...o}=e??{};return this._client.post("/v1/skills?beta=true",iO({body:o,...r,headers:nr([{"anthropic-beta":[...n??[],"skills-2025-10-02"].toString()},r?.headers])},this._client))}retrieve(e,r={},n){let{betas:o}=r??{};return this._client.get(Si`/v1/skills/${e}?beta=true`,{...n,headers:nr([{"anthropic-beta":[...o??[],"skills-2025-10-02"].toString()},n?.headers])})}list(e={},r){let{betas:n,...o}=e??{};return this._client.getAPIList("/v1/skills?beta=true",nO,{query:o,...r,headers:nr([{"anthropic-beta":[...n??[],"skills-2025-10-02"].toString()},r?.headers])})}delete(e,r={},n){let{betas:o}=r??{};return this._client.delete(Si`/v1/skills/${e}?beta=true`,{...n,headers:nr([{"anthropic-beta":[...o??[],"skills-2025-10-02"].toString()},n?.headers])})}};OC.Versions=pO;var p0=class extends Ti{constructor(){super(...arguments),this.models=new sO(this._client),this.messages=new Ty(this._client),this.files=new oO(this._client),this.skills=new OC(this._client)}};p0.Models=sO;p0.Messages=Ty;p0.Files=oO;p0.Skills=OC;var MC=class extends Ti{create(e,r){let{betas:n,...o}=e;return this._client.post("/v1/complete",{body:o,timeout:this._client._options.timeout??6e5,...r,headers:nr([{...n?.toString()!=null?{"anthropic-beta":n?.toString()}:void 0},r?.headers]),stream:e.stream??!1})}};var Pd,Sy,cD,CQ,lD,uD,AQ,dD,Vg,fD,xQ,wQ,hO,IQ,PQ,Exe,kbt,Txe,Sxe,bxe,Cxe,Dbt,Ubt="__json_buf";function qbt(t){return t.type==="tool_use"||t.type==="server_tool_use"}var RQ=class t{constructor(){Pd.add(this),this.messages=[],this.receivedMessages=[],Sy.set(this,void 0),this.controller=new AbortController,cD.set(this,void 0),CQ.set(this,()=>{}),lD.set(this,()=>{}),uD.set(this,void 0),AQ.set(this,()=>{}),dD.set(this,()=>{}),Vg.set(this,{}),fD.set(this,!1),xQ.set(this,!1),wQ.set(this,!1),hO.set(this,!1),IQ.set(this,void 0),PQ.set(this,void 0),Txe.set(this,e=>{if(Xe(this,xQ,!0,"f"),qg(e)&&(e=new Vs),e instanceof Vs)return Xe(this,wQ,!0,"f"),this._emit("abort",e);if(e instanceof Pt)return this._emit("error",e);if(e instanceof Error){let r=new Pt(e.message);return r.cause=e,this._emit("error",r)}return this._emit("error",new Pt(String(e)))}),Xe(this,cD,new Promise((e,r)=>{Xe(this,CQ,e,"f"),Xe(this,lD,r,"f")}),"f"),Xe(this,uD,new Promise((e,r)=>{Xe(this,AQ,e,"f"),Xe(this,dD,r,"f")}),"f"),re(this,cD,"f").catch(()=>{}),re(this,uD,"f").catch(()=>{})}get response(){return re(this,IQ,"f")}get request_id(){return re(this,PQ,"f")}async withResponse(){let e=await re(this,cD,"f");if(!e)throw new Error("Could not resolve a `Response` object");return{data:this,response:e,request_id:e.headers.get("request-id")}}static fromReadableStream(e){let r=new t;return r._run(()=>r._fromReadableStream(e)),r}static createMessage(e,r,n){let o=new t;for(let s of r.messages)o._addMessageParam(s);return o._run(()=>o._createMessage(e,{...r,stream:!0},{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),o}_run(e){e().then(()=>{this._emitFinal(),this._emit("end")},re(this,Txe,"f"))}_addMessageParam(e){this.messages.push(e)}_addMessage(e,r=!0){this.receivedMessages.push(e),r&&this._emit("message",e)}async _createMessage(e,r,n){let o=n?.signal,s;o&&(o.aborted&&this.controller.abort(),s=this.controller.abort.bind(this.controller),o.addEventListener("abort",s));try{re(this,Pd,"m",Sxe).call(this);let{response:a,data:c}=await e.create({...r,stream:!0},{...n,signal:this.controller.signal}).withResponse();this._connected(a);for await(let l of c)re(this,Pd,"m",bxe).call(this,l);if(c.controller.signal?.aborted)throw new Vs;re(this,Pd,"m",Cxe).call(this)}finally{o&&s&&o.removeEventListener("abort",s)}}_connected(e){this.ended||(Xe(this,IQ,e,"f"),Xe(this,PQ,e?.headers.get("request-id"),"f"),re(this,CQ,"f").call(this,e),this._emit("connect"))}get ended(){return re(this,fD,"f")}get errored(){return re(this,xQ,"f")}get aborted(){return re(this,wQ,"f")}abort(){this.controller.abort()}on(e,r){return(re(this,Vg,"f")[e]||(re(this,Vg,"f")[e]=[])).push({listener:r}),this}off(e,r){let n=re(this,Vg,"f")[e];if(!n)return this;let o=n.findIndex(s=>s.listener===r);return o>=0&&n.splice(o,1),this}once(e,r){return(re(this,Vg,"f")[e]||(re(this,Vg,"f")[e]=[])).push({listener:r,once:!0}),this}emitted(e){return new Promise((r,n)=>{Xe(this,hO,!0,"f"),e!=="error"&&this.once("error",n),this.once(e,r)})}async done(){Xe(this,hO,!0,"f"),await re(this,uD,"f")}get currentMessage(){return re(this,Sy,"f")}async finalMessage(){return await this.done(),re(this,Pd,"m",Exe).call(this)}async finalText(){return await this.done(),re(this,Pd,"m",kbt).call(this)}_emit(e,...r){if(re(this,fD,"f"))return;e==="end"&&(Xe(this,fD,!0,"f"),re(this,AQ,"f").call(this));let n=re(this,Vg,"f")[e];if(n&&(re(this,Vg,"f")[e]=n.filter(o=>!o.once),n.forEach(({listener:o})=>o(...r))),e==="abort"){let o=r[0];!re(this,hO,"f")&&!n?.length&&Promise.reject(o),re(this,lD,"f").call(this,o),re(this,dD,"f").call(this,o),this._emit("end");return}if(e==="error"){let o=r[0];!re(this,hO,"f")&&!n?.length&&Promise.reject(o),re(this,lD,"f").call(this,o),re(this,dD,"f").call(this,o),this._emit("end")}}_emitFinal(){this.receivedMessages.at(-1)&&this._emit("finalMessage",re(this,Pd,"m",Exe).call(this))}async _fromReadableStream(e,r){let n=r?.signal,o;n&&(n.aborted&&this.controller.abort(),o=this.controller.abort.bind(this.controller),n.addEventListener("abort",o));try{re(this,Pd,"m",Sxe).call(this),this._connected(null);let s=ph.fromReadableStream(e,this.controller);for await(let a of s)re(this,Pd,"m",bxe).call(this,a);if(s.controller.signal?.aborted)throw new Vs;re(this,Pd,"m",Cxe).call(this)}finally{n&&o&&n.removeEventListener("abort",o)}}[(Sy=new WeakMap,cD=new WeakMap,CQ=new WeakMap,lD=new WeakMap,uD=new WeakMap,AQ=new WeakMap,dD=new WeakMap,Vg=new WeakMap,fD=new WeakMap,xQ=new WeakMap,wQ=new WeakMap,hO=new WeakMap,IQ=new WeakMap,PQ=new WeakMap,Txe=new WeakMap,Pd=new WeakSet,Exe=function(){if(this.receivedMessages.length===0)throw new Pt("stream ended without producing a Message with role=assistant");return this.receivedMessages.at(-1)},kbt=function(){if(this.receivedMessages.length===0)throw new Pt("stream ended without producing a Message with role=assistant");let r=this.receivedMessages.at(-1).content.filter(n=>n.type==="text").map(n=>n.text);if(r.length===0)throw new Pt("stream ended without producing a content block with type=text");return r.join(" ")},Sxe=function(){this.ended||Xe(this,Sy,void 0,"f")},bxe=function(r){if(this.ended)return;let n=re(this,Pd,"m",Dbt).call(this,r);switch(this._emit("streamEvent",r,n),r.type){case"content_block_delta":{let o=n.content.at(-1);switch(r.delta.type){case"text_delta":{o.type==="text"&&this._emit("text",r.delta.text,o.text||"");break}case"citations_delta":{o.type==="text"&&this._emit("citation",r.delta.citation,o.citations??[]);break}case"input_json_delta":{qbt(o)&&o.input&&this._emit("inputJson",r.delta.partial_json,o.input);break}case"thinking_delta":{o.type==="thinking"&&this._emit("thinking",r.delta.thinking,o.thinking);break}case"signature_delta":{o.type==="thinking"&&this._emit("signature",o.signature);break}default:r.delta}break}case"message_stop":{this._addMessageParam(n),this._addMessage(n,!0);break}case"content_block_stop":{this._emit("contentBlock",n.content.at(-1));break}case"message_start":{Xe(this,Sy,n,"f");break}case"content_block_start":case"message_delta":break}},Cxe=function(){if(this.ended)throw new Pt("stream has ended, this shouldn't happen");let r=re(this,Sy,"f");if(!r)throw new Pt("request ended without sending any chunks");return Xe(this,Sy,void 0,"f"),r},Dbt=function(r){let n=re(this,Sy,"f");if(r.type==="message_start"){if(n)throw new Pt(`Unexpected event order, got ${r.type} before receiving "message_stop"`);return r.message}if(!n)throw new Pt(`Unexpected event order, got ${r.type} before "message_start"`);switch(r.type){case"message_stop":return n;case"message_delta":return n.stop_reason=r.delta.stop_reason,n.stop_sequence=r.delta.stop_sequence,n.usage.output_tokens=r.usage.output_tokens,r.usage.input_tokens!=null&&(n.usage.input_tokens=r.usage.input_tokens),r.usage.cache_creation_input_tokens!=null&&(n.usage.cache_creation_input_tokens=r.usage.cache_creation_input_tokens),r.usage.cache_read_input_tokens!=null&&(n.usage.cache_read_input_tokens=r.usage.cache_read_input_tokens),r.usage.server_tool_use!=null&&(n.usage.server_tool_use=r.usage.server_tool_use),n;case"content_block_start":return n.content.push({...r.content_block}),n;case"content_block_delta":{let o=n.content.at(r.index);switch(r.delta.type){case"text_delta":{o?.type==="text"&&(n.content[r.index]={...o,text:(o.text||"")+r.delta.text});break}case"citations_delta":{o?.type==="text"&&(n.content[r.index]={...o,citations:[...o.citations??[],r.delta.citation]});break}case"input_json_delta":{if(o&&qbt(o)){let s=o[Ubt]||"";s+=r.delta.partial_json;let a={...o};Object.defineProperty(a,Ubt,{value:s,enumerable:!1,writable:!0}),s&&(a.input=pQ(s)),n.content[r.index]=a}break}case"thinking_delta":{o?.type==="thinking"&&(n.content[r.index]={...o,thinking:o.thinking+r.delta.thinking});break}case"signature_delta":{o?.type==="thinking"&&(n.content[r.index]={...o,signature:r.delta.signature});break}default:r.delta}return n}case"content_block_stop":return n}},Symbol.asyncIterator)](){let e=[],r=[],n=!1;return this.on("streamEvent",o=>{let s=r.shift();s?s.resolve(o):e.push(o)}),this.on("end",()=>{n=!0;for(let o of r)o.resolve(void 0);r.length=0}),this.on("abort",o=>{n=!0;for(let s of r)s.reject(o);r.length=0}),this.on("error",o=>{n=!0;for(let s of r)s.reject(o);r.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((s,a)=>r.push({resolve:s,reject:a})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new ph(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}};var mO=class extends Ti{create(e,r){return this._client.post("/v1/messages/batches",{body:e,...r})}retrieve(e,r){return this._client.get(Si`/v1/messages/batches/${e}`,r)}list(e={},r){return this._client.getAPIList("/v1/messages/batches",wd,{query:e,...r})}delete(e,r){return this._client.delete(Si`/v1/messages/batches/${e}`,r)}cancel(e,r){return this._client.post(Si`/v1/messages/batches/${e}/cancel`,r)}async results(e,r){let n=await this.retrieve(e);if(!n.results_url)throw new Pt(`No batch \`results_url\`; Has it finished processing? ${n.processing_status} - ${n.id}`);return this._client.get(n.results_url,{...r,headers:nr([{Accept:"application/binary"},r?.headers]),stream:!0,__binaryResponse:!0})._thenUnwrap((o,s)=>aO.fromResponse(s.response,s.controller))}};var by=class extends Ti{constructor(){super(...arguments),this.batches=new mO(this._client)}create(e,r){e.model in Fbt&&console.warn(`The model '${e.model}' is deprecated and will reach end-of-life on ${Fbt[e.model]}
Please migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`);let n=this._client._options.timeout;if(!e.stream&&n==null){let o=SQ[e.model]??void 0;n=this._client.calculateNonstreamingTimeout(e.max_tokens,o)}return this._client.post("/v1/messages",{body:e,timeout:n??6e5,...r,stream:e.stream??!1})}stream(e,r){return RQ.createMessage(this,e,r)}countTokens(e,r){return this._client.post("/v1/messages/count_tokens",{body:e,...r})}},Fbt={"claude-1.3":"November 6th, 2024","claude-1.3-100k":"November 6th, 2024","claude-instant-1.1":"November 6th, 2024","claude-instant-1.1-100k":"November 6th, 2024","claude-instant-1.2":"November 6th, 2024","claude-3-sonnet-20240229":"July 21st, 2025","claude-3-opus-20240229":"January 5th, 2026","claude-2.1":"July 21st, 2025","claude-2.0":"July 21st, 2025","claude-3-5-sonnet-20241022":"October 22, 2025","claude-3-5-sonnet-20240620":"October 22, 2025"};by.Batches=mO;var NC=class extends Ti{retrieve(e,r={},n){let{betas:o}=r??{};return this._client.get(Si`/v1/models/${e}`,{...n,headers:nr([{...o?.toString()!=null?{"anthropic-beta":o?.toString()}:void 0},n?.headers])})}list(e={},r){let{betas:n,...o}=e??{};return this._client.getAPIList("/v1/models",wd,{query:o,...r,headers:nr([{...n?.toString()!=null?{"anthropic-beta":n?.toString()}:void 0},r?.headers])})}};var pD=t=>{if(typeof globalThis.process<"u")return globalThis.process.env?.[t]?.trim()??void 0;if(typeof globalThis.Deno<"u")return globalThis.Deno.env?.get?.(t)?.trim()};var Axe,xxe,OQ,jbt,Bbt="\\n\\nHuman:",$bt="\\n\\nAssistant:",ki=class{constructor({baseURL:e=pD("ANTHROPIC_BASE_URL"),apiKey:r=pD("ANTHROPIC_API_KEY")??null,authToken:n=pD("ANTHROPIC_AUTH_TOKEN")??null,...o}={}){Axe.add(this),OQ.set(this,void 0);let s={apiKey:r,authToken:n,...o,baseURL:e||"https://api.anthropic.com"};if(!s.dangerouslyAllowBrowser&&hbt())throw new Pt(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new Anthropic({ apiKey, dangerouslyAllowBrowser: true });
`);this.baseURL=s.baseURL,this.timeout=s.timeout??xxe.DEFAULT_TIMEOUT,this.logger=s.logger??console;let a="warn";this.logLevel=a,this.logLevel=cxe(s.logLevel,"ClientOptions.logLevel",this)??cxe(pD("ANTHROPIC_LOG"),"process.env['ANTHROPIC_LOG']",this)??a,this.fetchOptions=s.fetchOptions,this.maxRetries=s.maxRetries??2,this.fetch=s.fetch??gbt(),Xe(this,OQ,vbt,"f"),this._options=s,this.apiKey=r,this.authToken=n}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,authToken:this.authToken,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:r}){if(!(this.apiKey&&e.get("x-api-key"))&&!r.has("x-api-key")&&!(this.authToken&&e.get("authorization"))&&!r.has("authorization"))throw new Error('Could not resolve authentication method. Expected either apiKey or authToken to be set. Or for one of the "X-Api-Key" or "Authorization" headers to be explicitly omitted')}async authHeaders(e){return nr([await this.apiKeyAuth(e),await this.bearerAuth(e)])}async apiKeyAuth(e){if(this.apiKey!=null)return nr([{"X-Api-Key":this.apiKey}])}async bearerAuth(e){if(this.authToken!=null)return nr([{Authorization:`Bearer ${this.authToken}`}])}stringifyQuery(e){return Object.entries(e).filter(([r,n])=>typeof n<"u").map(([r,n])=>{if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")return`${encodeURIComponent(r)}=${encodeURIComponent(n)}`;if(n===null)return`${encodeURIComponent(r)}=`;throw new Pt(`Cannot stringify type ${typeof n}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${vy}`}defaultIdempotencyKey(){return`stainless-node-retry-${nxe()}`}makeStatusError(e,r,n,o){return ys.generate(e,r,n,o)}buildURL(e,r,n){let o=!re(this,Axe,"m",jbt).call(this)&&n||this.baseURL,s=sbt(e)?new URL(e):new URL(o+(o.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),a=this.defaultQuery();return abt(a)||(r={...a,...r}),typeof r=="object"&&r&&!Array.isArray(r)&&(s.search=this.stringifyQuery(r)),s.toString()}_calculateNonstreamingTimeout(e){if(3600*e/128e3>600)throw new Pt("Streaming is required for operations that may take longer than 10 minutes. See https://github.com/anthropics/anthropic-sdk-typescript#streaming-responses for more details");return 600*1e3}async prepareOptions(e){}async prepareRequest(e,{url:r,options:n}){}get(e,r){return this.methodRequest("get",e,r)}post(e,r){return this.methodRequest("post",e,r)}patch(e,r){return this.methodRequest("patch",e,r)}put(e,r){return this.methodRequest("put",e,r)}delete(e,r){return this.methodRequest("delete",e,r)}methodRequest(e,r,n){return this.request(Promise.resolve(n).then(o=>({method:e,path:r,...o})))}request(e,r=null){return new IC(this,this.makeRequest(e,r,void 0))}async makeRequest(e,r,n){let o=await e,s=o.maxRetries??this.maxRetries;r==null&&(r=s),await this.prepareOptions(o);let{req:a,url:c,timeout:l}=await this.buildRequest(o,{retryCount:s-r});await this.prepareRequest(a,{url:c,options:o});let u="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),d=n===void 0?"":`, retryOf: ${n}`,f=Date.now();if(Es(this).debug(`[${u}] sending request`,jg({retryOfRequestLogID:n,method:o.method,url:c,options:o,headers:a.headers})),o.signal?.aborted)throw new Vs;let p=new AbortController,h=await this.fetchWithTimeout(c,a,l,p).catch(Wk),_=Date.now();if(h instanceof globalThis.Error){let E=`retrying, ${r} attempts remaining`;if(o.signal?.aborted)throw new Vs;let y=qg(h)||/timed? ?out/i.test(String(h)+("cause"in h?String(h.cause):""));if(r)return Es(this).info(`[${u}] connection ${y?"timed out":"failed"} - ${E}`),Es(this).debug(`[${u}] connection ${y?"timed out":"failed"} (${E})`,jg({retryOfRequestLogID:n,url:c,durationMs:_-f,message:h.message})),this.retryRequest(o,r,n??u);throw Es(this).info(`[${u}] connection ${y?"timed out":"failed"} - error; no more retries left`),Es(this).debug(`[${u}] connection ${y?"timed out":"failed"} (error; no more retries left)`,jg({retryOfRequestLogID:n,url:c,durationMs:_-f,message:h.message})),y?new KR:new _y({cause:h})}let g=[...h.headers.entries()].filter(([E])=>E==="request-id").map(([E,y])=>", "+E+": "+JSON.stringify(y)).join(""),v=`[${u}${d}${g}] ${a.method} ${c} ${h.ok?"succeeded":"failed"} with status ${h.status} in ${_-f}ms`;if(!h.ok){let E=await this.shouldRetry(h);if(r&&E){let A=`retrying, ${r} attempts remaining`;return await _bt(h.body),Es(this).info(`${v} - ${A}`),Es(this).debug(`[${u}] response error (${A})`,jg({retryOfRequestLogID:n,url:h.url,status:h.status,headers:h.headers,durationMs:_-f})),this.retryRequest(o,r,n??u,h.headers)}let y=E?"error; no more retries left":"error; not retryable";Es(this).info(`${v} - ${y}`);let S=await h.text().catch(A=>Wk(A).message),b=oQ(S),w=b?void 0:S;throw Es(this).debug(`[${u}] response error (${y})`,jg({retryOfRequestLogID:n,url:h.url,status:h.status,headers:h.headers,message:w,durationMs:Date.now()-f})),this.makeStatusError(h.status,b,w,h.headers)}return Es(this).info(v),Es(this).debug(`[${u}] response start`,jg({retryOfRequestLogID:n,url:h.url,status:h.status,headers:h.headers,durationMs:_-f})),{response:h,options:o,controller:p,requestLogID:u,retryOfRequestLogID:n,startTime:f}}getAPIList(e,r,n){return this.requestAPIList(r,{method:"get",path:e,...n})}requestAPIList(e,r){let n=this.makeRequest(r,null,void 0);return new Xk(this,n,e)}async fetchWithTimeout(e,r,n,o){let{signal:s,method:a,...c}=r||{};s&&s.addEventListener("abort",()=>o.abort());let l=setTimeout(()=>o.abort(),n),u=globalThis.ReadableStream&&c.body instanceof globalThis.ReadableStream||typeof c.body=="object"&&c.body!==null&&Symbol.asyncIterator in c.body,d={signal:o.signal,...u?{duplex:"half"}:{},method:"GET",...c};a&&(d.method=a.toUpperCase());try{return await this.fetch.call(void 0,e,d)}finally{clearTimeout(l)}}async shouldRetry(e){let r=e.headers.get("x-should-retry");return r==="true"?!0:r==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,r,n,o){let s,a=o?.get("retry-after-ms");if(a){let l=parseFloat(a);Number.isNaN(l)||(s=l)}let c=o?.get("retry-after");if(c&&!s){let l=parseFloat(c);Number.isNaN(l)?s=Date.parse(c)-Date.now():s=l*1e3}if(!(s&&0<=s&&s<60*1e3)){let l=e.maxRetries??this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(r,l)}return await ubt(s),this.makeRequest(e,r-1,n)}calculateDefaultRetryTimeoutMillis(e,r){let s=r-e,a=Math.min(.5*Math.pow(2,s),8),c=1-Math.random()*.25;return a*c*1e3}calculateNonstreamingTimeout(e,r){if(36e5*e/128e3>6e5||r!=null&&e>r)throw new Pt("Streaming is required for operations that may take longer than 10 minutes. See https://github.com/anthropics/anthropic-sdk-typescript#long-requests for more details");return 6e5}async buildRequest(e,{retryCount:r=0}={}){let n={...e},{method:o,path:s,query:a,defaultBaseURL:c}=n,l=this.buildURL(s,a,c);"timeout"in n&&lbt("timeout",n.timeout),n.timeout=n.timeout??this.timeout;let{bodyHeaders:u,body:d}=this.buildBody({options:n}),f=await this.buildHeaders({options:e,method:o,bodyHeaders:u,retryCount:r});return{req:{method:o,headers:f,...n.signal&&{signal:n.signal},...globalThis.ReadableStream&&d instanceof globalThis.ReadableStream&&{duplex:"half"},...d&&{body:d},...this.fetchOptions??{},...n.fetchOptions??{}},url:l,timeout:n.timeout}}async buildHeaders({options:e,method:r,bodyHeaders:n,retryCount:o}){let s={};this.idempotencyHeader&&r!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=e.idempotencyKey);let a=nr([s,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(o),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...mbt(),...this._options.dangerouslyAllowBrowser?{"anthropic-dangerous-direct-browser-access":"true"}:void 0,"anthropic-version":"2023-06-01"},await this.authHeaders(e),this._options.defaultHeaders,n,e.headers]);return this.validateHeaders(a),a.values}buildBody({options:{body:e,headers:r}}){if(!e)return{bodyHeaders:void 0,body:void 0};let n=nr([r]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&n.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:sQ(e)}:re(this,OQ,"f").call(this,{body:e,headers:n})}};xxe=ki,OQ=new WeakMap,Axe=new WeakSet,jbt=function(){return this.baseURL!=="https://api.anthropic.com"};ki.Anthropic=xxe;ki.HUMAN_PROMPT=Bbt;ki.AI_PROMPT=$bt;ki.DEFAULT_TIMEOUT=6e5;ki.AnthropicError=Pt;ki.APIError=ys;ki.APIConnectionError=_y;ki.APIConnectionTimeoutError=KR;ki.APIUserAbortError=Vs;ki.NotFoundError=JR;ki.ConflictError=XR;ki.RateLimitError=tO;ki.BadRequestError=YR;ki.AuthenticationError=QR;ki.InternalServerError=rO;ki.PermissionDeniedError=ZR;ki.UnprocessableEntityError=eO;ki.toFile=fQ;var Hg=class extends ki{constructor(){super(...arguments),this.completions=new MC(this),this.messages=new by(this),this.models=new NC(this),this.beta=new p0(this)}};Hg.Completions=MC;Hg.Messages=by;Hg.Models=NC;Hg.Beta=p0;var vwe=yt(require("vscode"));gu();_u();bi();var TCt=yt(require("vscode")),h0=class t{static _version=null;static getVersion(){if(t._version===null){let e=TCt.extensions.getExtension("vicanent.copilot-helper-pro");t._version=e?.packageJSON?.version||"0.4.0"}return t._version}static getUserAgent(e){return`CHP-${e}/${t.getVersion()}`}static getClientInfo(){return{name:"Copilot ++",version:t.getVersion()}}static resetCache(){t._version=null}};function Tt(t,e,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(t,r):o?o.value=r:e.set(t,r),r}function Z(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}var Pxe=function(){let{crypto:t}=globalThis;if(t?.randomUUID)return Pxe=t.randomUUID.bind(t),t.randomUUID();let e=new Uint8Array(1),r=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,n=>(+n^r()&15>>+n/4).toString(16))};function hD(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}var mD=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){let e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};var ze=class extends Error{},Qo=class t extends ze{constructor(e,r,n,o){super(`${t.makeMessage(e,r,n)}`),this.status=e,this.headers=o,this.requestID=o?.get("x-request-id"),this.error=r;let s=r;this.code=s?.code,this.param=s?.param,this.type=s?.type}static makeMessage(e,r,n){let o=r?.message?typeof r.message=="string"?r.message:JSON.stringify(r.message):r?JSON.stringify(r):n;return e&&o?`${e} ${o}`:e?`${e} status code (no body)`:o||"(no status code or body)"}static generate(e,r,n,o){if(!e||!o)return new Cy({message:n,cause:mD(r)});let s=r?.error;return e===400?new _O(e,s,n,o):e===401?new vO(e,s,n,o):e===403?new yO(e,s,n,o):e===404?new EO(e,s,n,o):e===409?new TO(e,s,n,o):e===422?new SO(e,s,n,o):e===429?new bO(e,s,n,o):e>=500?new CO(e,s,n,o):new t(e,s,n,o)}},Uo=class extends Qo{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}},Cy=class extends Qo{constructor({message:e,cause:r}){super(void 0,void 0,e||"Connection error.",void 0),r&&(this.cause=r)}},Ay=class extends Cy{constructor({message:e}={}){super({message:e??"Request timed out."})}},_O=class extends Qo{},vO=class extends Qo{},yO=class extends Qo{},EO=class extends Qo{},TO=class extends Qo{},SO=class extends Qo{},bO=class extends Qo{},CO=class extends Qo{},AO=class extends ze{constructor(){super("Could not parse response content as the length limit was reached")}},xO=class extends ze{constructor(){super("Could not parse response content as the request was rejected by the content filter")}},hh=class extends Error{constructor(e){super(e)}};var a0n=/^[a-z][a-z0-9+.-]*:/i,SCt=t=>a0n.test(t),Ra=t=>(Ra=Array.isArray,Ra(t)),Rxe=Ra;function Oxe(t){return typeof t!="object"?{}:t??{}}function bCt(t){if(!t)return!0;for(let e in t)return!1;return!0}function CCt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function gD(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}var ACt=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new ze(`${t} must be an integer`);if(e<0)throw new ze(`${t} must be a positive integer`);return e};var xCt=t=>{try{return JSON.parse(t)}catch{return}};var mh=t=>new Promise(e=>setTimeout(e,t));var xy="6.15.0";var RCt=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function c0n(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}var l0n=()=>{let t=c0n();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":xy,"X-Stainless-OS":ICt(Deno.build.os),"X-Stainless-Arch":wCt(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":xy,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":xy,"X-Stainless-OS":ICt(globalThis.process.platform??"unknown"),"X-Stainless-Arch":wCt(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};let e=u0n();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":xy,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":xy,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function u0n(){if(typeof navigator>"u"||!navigator)return null;let t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(let{key:e,pattern:r}of t){let n=r.exec(navigator.userAgent);if(n){let o=n[1]||0,s=n[2]||0,a=n[3]||0;return{browser:e,version:`${o}.${s}.${a}`}}}return null}var wCt=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",ICt=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown"),PCt,OCt=()=>PCt??(PCt=l0n());function MCt(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Mxe(...t){let e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function MQ(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return Mxe({start(){},async pull(r){let{done:n,value:o}=await e.next();n?r.close():r.enqueue(o)},async cancel(){await e.return?.()}})}function Nxe(t){if(t[Symbol.asyncIterator])return t;let e=t.getReader();return{async next(){try{let r=await e.read();return r?.done&&e.releaseLock(),r}catch(r){throw e.releaseLock(),r}},async return(){let r=e.cancel();return e.releaseLock(),await r,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function NCt(t){if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await t[Symbol.asyncIterator]().return?.();return}let e=t.getReader(),r=e.cancel();e.releaseLock(),await r}var LCt=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});var NQ="RFC3986",Lxe=t=>String(t),LQ={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:Lxe},kxe="RFC1738";var kQ=(t,e)=>(kQ=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),kQ(t,e)),gh=(()=>{let t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})();var Dxe=1024,kCt=(t,e,r,n,o)=>{if(t.length===0)return t;let s=t;if(typeof t=="symbol"?s=Symbol.prototype.toString.call(t):typeof t!="string"&&(s=String(t)),r==="iso-8859-1")return escape(s).replace(/%u[0-9a-f]{4}/gi,function(c){return"%26%23"+parseInt(c.slice(2),16)+"%3B"});let a="";for(let c=0;c<s.length;c+=Dxe){let l=s.length>=Dxe?s.slice(c,c+Dxe):s,u=[];for(let d=0;d<l.length;++d){let f=l.charCodeAt(d);if(f===45||f===46||f===95||f===126||f>=48&&f<=57||f>=65&&f<=90||f>=97&&f<=122||o===kxe&&(f===40||f===41)){u[u.length]=l.charAt(d);continue}if(f<128){u[u.length]=gh[f];continue}if(f<2048){u[u.length]=gh[192|f>>6]+gh[128|f&63];continue}if(f<55296||f>=57344){u[u.length]=gh[224|f>>12]+gh[128|f>>6&63]+gh[128|f&63];continue}d+=1,f=65536+((f&1023)<<10|l.charCodeAt(d)&1023),u[u.length]=gh[240|f>>18]+gh[128|f>>12&63]+gh[128|f>>6&63]+gh[128|f&63]}a+=u.join("")}return a};function DCt(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function Uxe(t,e){if(Ra(t)){let r=[];for(let n=0;n<t.length;n+=1)r.push(e(t[n]));return r}return e(t)}var qCt={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},FCt=function(t,e){Array.prototype.push.apply(t,Ra(e)?e:[e])},UCt,Zo={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:kCt,encodeValuesOnly:!1,format:NQ,formatter:Lxe,indices:!1,serializeDate(t){return(UCt??(UCt=Function.prototype.call.bind(Date.prototype.toISOString)))(t)},skipNulls:!1,strictNullHandling:!1};function p0n(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}var qxe={};function jCt(t,e,r,n,o,s,a,c,l,u,d,f,p,h,_,g,v,E){let y=t,S=E,b=0,w=!1;for(;(S=S.get(qxe))!==void 0&&!w;){let j=S.get(t);if(b+=1,typeof j<"u"){if(j===b)throw new RangeError("Cyclic object value");w=!0}typeof S.get(qxe)>"u"&&(b=0)}if(typeof u=="function"?y=u(e,y):y instanceof Date?y=p?.(y):r==="comma"&&Ra(y)&&(y=Uxe(y,function(j){return j instanceof Date?p?.(j):j})),y===null){if(s)return l&&!g?l(e,Zo.encoder,v,"key",h):e;y=""}if(p0n(y)||DCt(y)){if(l){let j=g?e:l(e,Zo.encoder,v,"key",h);return[_?.(j)+"="+_?.(l(y,Zo.encoder,v,"value",h))]}return[_?.(e)+"="+_?.(String(y))]}let P=[];if(typeof y>"u")return P;let A;if(r==="comma"&&Ra(y))g&&l&&(y=Uxe(y,l)),A=[{value:y.length>0?y.join(",")||null:void 0}];else if(Ra(u))A=u;else{let j=Object.keys(y);A=d?j.sort(d):j}let O=c?String(e).replace(/\./g,"%2E"):String(e),L=n&&Ra(y)&&y.length===1?O+"[]":O;if(o&&Ra(y)&&y.length===0)return L+"[]";for(let j=0;j<A.length;++j){let $=A[j],Q=typeof $=="object"&&typeof $.value<"u"?$.value:y[$];if(a&&Q===null)continue;let K=f&&c?$.replace(/\./g,"%2E"):$,N=Ra(y)?typeof r=="function"?r(L,K):L:L+(f?"."+K:"["+K+"]");E.set(t,b);let G=new WeakMap;G.set(qxe,E),FCt(P,jCt(Q,N,r,n,o,s,a,c,r==="comma"&&g&&Ra(y)?null:l,u,d,f,p,h,_,g,v,G))}return P}function h0n(t=Zo){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");let e=t.charset||Zo.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let r=NQ;if(typeof t.format<"u"){if(!kQ(LQ,t.format))throw new TypeError("Unknown format option provided.");r=t.format}let n=LQ[r],o=Zo.filter;(typeof t.filter=="function"||Ra(t.filter))&&(o=t.filter);let s;if(t.arrayFormat&&t.arrayFormat in qCt?s=t.arrayFormat:"indices"in t?s=t.indices?"indices":"repeat":s=Zo.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");let a=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:Zo.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:Zo.addQueryPrefix,allowDots:a,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:Zo.allowEmptyArrays,arrayFormat:s,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Zo.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?Zo.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:Zo.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:Zo.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:Zo.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:Zo.encodeValuesOnly,filter:o,format:r,formatter:n,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:Zo.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:Zo.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Zo.strictNullHandling}}function Fxe(t,e={}){let r=t,n=h0n(e),o,s;typeof n.filter=="function"?(s=n.filter,r=s("",r)):Ra(n.filter)&&(s=n.filter,o=s);let a=[];if(typeof r!="object"||r===null)return"";let c=qCt[n.arrayFormat],l=c==="comma"&&n.commaRoundTrip;o||(o=Object.keys(r)),n.sort&&o.sort(n.sort);let u=new WeakMap;for(let p=0;p<o.length;++p){let h=o[p];n.skipNulls&&r[h]===null||FCt(a,jCt(r[h],h,c,l,n.allowEmptyArrays,n.strictNullHandling,n.skipNulls,n.encodeDotInKeys,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,u))}let d=a.join(n.delimiter),f=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?f+="utf8=%26%2310003%3B&":f+="utf8=%E2%9C%93&"),d.length>0?f+d:""}function VCt(t){let e=0;for(let o of t)e+=o.length;let r=new Uint8Array(e),n=0;for(let o of t)r.set(o,n),n+=o.length;return r}var BCt;function wO(t){let e;return(BCt??(e=new globalThis.TextEncoder,BCt=e.encode.bind(e)))(t)}var $Ct;function jxe(t){let e;return($Ct??(e=new globalThis.TextDecoder,$Ct=e.decode.bind(e)))(t)}var vu,yu,LC=class{constructor(){vu.set(this,void 0),yu.set(this,void 0),Tt(this,vu,new Uint8Array,"f"),Tt(this,yu,null,"f")}decode(e){if(e==null)return[];let r=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?wO(e):e;Tt(this,vu,VCt([Z(this,vu,"f"),r]),"f");let n=[],o;for(;(o=g0n(Z(this,vu,"f"),Z(this,yu,"f")))!=null;){if(o.carriage&&Z(this,yu,"f")==null){Tt(this,yu,o.index,"f");continue}if(Z(this,yu,"f")!=null&&(o.index!==Z(this,yu,"f")+1||o.carriage)){n.push(jxe(Z(this,vu,"f").subarray(0,Z(this,yu,"f")-1))),Tt(this,vu,Z(this,vu,"f").subarray(Z(this,yu,"f")),"f"),Tt(this,yu,null,"f");continue}let s=Z(this,yu,"f")!==null?o.preceding-1:o.preceding,a=jxe(Z(this,vu,"f").subarray(0,s));n.push(a),Tt(this,vu,Z(this,vu,"f").subarray(o.index),"f"),Tt(this,yu,null,"f")}return n}flush(){return Z(this,vu,"f").length?this.decode(`
`):[]}};vu=new WeakMap,yu=new WeakMap;LC.NEWLINE_CHARS=new Set([`
`,"\r"]);LC.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function g0n(t,e){for(let o=e??0;o<t.length;o++){if(t[o]===10)return{preceding:o,index:o+1,carriage:!1};if(t[o]===13)return{preceding:o,index:o+1,carriage:!0}}return null}function HCt(t){for(let n=0;n<t.length-1;n++){if(t[n]===10&&t[n+1]===10||t[n]===13&&t[n+1]===13)return n+2;if(t[n]===13&&t[n+1]===10&&n+3<t.length&&t[n+2]===13&&t[n+3]===10)return n+4}return-1}var UQ={off:0,error:200,warn:300,info:400,debug:500},Bxe=(t,e,r)=>{if(t){if(CCt(UQ,t))return t;go(r).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(UQ))}`)}};function _D(){}function DQ(t,e,r){return!e||UQ[t]>UQ[r]?_D:e[t].bind(e)}var _0n={error:_D,warn:_D,info:_D,debug:_D},GCt=new WeakMap;function go(t){let e=t.logger,r=t.logLevel??"off";if(!e)return _0n;let n=GCt.get(e);if(n&&n[0]===r)return n[1];let o={error:DQ("error",e,r),warn:DQ("warn",e,r),info:DQ("info",e,r),debug:DQ("debug",e,r)};return GCt.set(e,[r,o]),o}var zg=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,r])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":r]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var vD,_h=class t{constructor(e,r,n){this.iterator=e,vD.set(this,void 0),this.controller=r,Tt(this,vD,n,"f")}static fromSSEResponse(e,r,n){let o=!1,s=n?go(n):console;async function*a(){if(o)throw new ze("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let c=!1;try{for await(let l of v0n(e,r))if(!c){if(l.data.startsWith("[DONE]")){c=!0;continue}if(l.event===null||!l.event.startsWith("thread.")){let u;try{u=JSON.parse(l.data)}catch(d){throw s.error("Could not parse message into JSON:",l.data),s.error("From chunk:",l.raw),d}if(u&&u.error)throw new Qo(void 0,u.error,void 0,e.headers);yield u}else{let u;try{u=JSON.parse(l.data)}catch(d){throw console.error("Could not parse message into JSON:",l.data),console.error("From chunk:",l.raw),d}if(l.event=="error")throw new Qo(void 0,u.error,u.message,void 0);yield{event:l.event,data:u}}}c=!0}catch(l){if(hD(l))return;throw l}finally{c||r.abort()}}return new t(a,r,n)}static fromReadableStream(e,r,n){let o=!1;async function*s(){let c=new LC,l=Nxe(e);for await(let u of l)for(let d of c.decode(u))yield d;for(let u of c.flush())yield u}async function*a(){if(o)throw new ze("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let c=!1;try{for await(let l of s())c||l&&(yield JSON.parse(l));c=!0}catch(l){if(hD(l))return;throw l}finally{c||r.abort()}}return new t(a,r,n)}[(vD=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){let e=[],r=[],n=this.iterator(),o=s=>({next:()=>{if(s.length===0){let a=n.next();e.push(a),r.push(a)}return s.shift()}});return[new t(()=>o(e),this.controller,Z(this,vD,"f")),new t(()=>o(r),this.controller,Z(this,vD,"f"))]}toReadableStream(){let e=this,r;return Mxe({async start(){r=e[Symbol.asyncIterator]()},async pull(n){try{let{value:o,done:s}=await r.next();if(s)return n.close();let a=wO(JSON.stringify(o)+`
`);n.enqueue(a)}catch(o){n.error(o)}},async cancel(){await r.return?.()}})}};async function*v0n(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new ze("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new ze("Attempted to iterate over a response with no body");let r=new $xe,n=new LC,o=Nxe(t.body);for await(let s of y0n(o))for(let a of n.decode(s)){let c=r.decode(a);c&&(yield c)}for(let s of n.flush()){let a=r.decode(s);a&&(yield a)}}async function*y0n(t){let e=new Uint8Array;for await(let r of t){if(r==null)continue;let n=r instanceof ArrayBuffer?new Uint8Array(r):typeof r=="string"?wO(r):r,o=new Uint8Array(e.length+n.length);o.set(e),o.set(n,e.length),e=o;let s;for(;(s=HCt(e))!==-1;)yield e.slice(0,s),e=e.slice(s)}e.length>0&&(yield e)}var $xe=class{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;let s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[r,n,o]=E0n(e,":");return o.startsWith(" ")&&(o=o.substring(1)),r==="event"?this.event=o:r==="data"&&this.data.push(o),null}};function E0n(t,e){let r=t.indexOf(e);return r!==-1?[t.substring(0,r),e,t.substring(r+e.length)]:[t,"",""]}async function qQ(t,e){let{response:r,requestLogID:n,retryOfRequestLogID:o,startTime:s}=e,a=await(async()=>{if(e.options.stream)return go(t).debug("response",r.status,r.url,r.headers,r.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(r,e.controller,t):_h.fromSSEResponse(r,e.controller,t);if(r.status===204)return null;if(e.options.__binaryResponse)return r;let l=r.headers.get("content-type")?.split(";")[0]?.trim();if(l?.includes("application/json")||l?.endsWith("+json")){let f=await r.json();return Vxe(f,r)}return await r.text()})();return go(t).debug(`[${n}] response parsed`,zg({retryOfRequestLogID:o,url:r.url,status:r.status,body:a,durationMs:Date.now()-s})),a}function Vxe(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var yD,kC=class t extends Promise{constructor(e,r,n=qQ){super(o=>{o(null)}),this.responsePromise=r,this.parseResponse=n,yD.set(this,void 0),Tt(this,yD,e,"f")}_thenUnwrap(e){return new t(Z(this,yD,"f"),this.responsePromise,async(r,n)=>Vxe(e(await this.parseResponse(r,n),n),n.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){let[e,r]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:r,request_id:r.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(Z(this,yD,"f"),e))),this.parsedPromise}then(e,r){return this.parse().then(e,r)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}};yD=new WeakMap;var FQ,ED=class{constructor(e,r,n,o){FQ.set(this,void 0),Tt(this,FQ,e,"f"),this.options=o,this.response=r,this.body=n}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){let e=this.nextPageRequestOptions();if(!e)throw new ze("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await Z(this,FQ,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(FQ=new WeakMap,Symbol.asyncIterator)](){for await(let e of this.iterPages())for(let r of e.getPaginatedItems())yield r}},TD=class extends kC{constructor(e,r,n){super(e,r,async(o,s)=>new n(o,s.response,await qQ(o,s),s.options))}async*[Symbol.asyncIterator](){let e=await this;for await(let r of e)yield r}},vh=class extends ED{constructor(e,r,n,o){super(e,r,n,o),this.data=n.data||[],this.object=n.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}},mr=class extends ED{constructor(e,r,n,o){super(e,r,n,o),this.data=n.data||[],this.has_more=n.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){let e=this.getPaginatedItems(),r=e[e.length-1]?.id;return r?{...this.options,query:{...Oxe(this.options.query),after:r}}:null}},Wg=class extends ED{constructor(e,r,n,o){super(e,r,n,o),this.data=n.data||[],this.has_more=n.has_more||!1,this.last_id=n.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){let e=this.last_id;return e?{...this.options,query:{...Oxe(this.options.query),after:e}}:null}};var zxe=()=>{if(typeof File>"u"){let{process:t}=globalThis,e=typeof t?.versions?.node=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(e?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function IO(t,e,r){return zxe(),new File(t,e??"unknown_file",r)}function SD(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}var jQ=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",Wxe=async(t,e)=>Hxe(t.body)?{...t,body:await WCt(t.body,e)}:t,Eu=async(t,e)=>({...t,body:await WCt(t.body,e)}),zCt=new WeakMap;function S0n(t){let e=typeof t=="function"?t:t.fetch,r=zCt.get(e);if(r)return r;let n=(async()=>{try{let o="Response"in e?e.Response:(await e("data:,")).constructor,s=new FormData;return s.toString()!==await new o(s).text()}catch{return!0}})();return zCt.set(e,n),n}var WCt=async(t,e)=>{if(!await S0n(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");let r=new FormData;return await Promise.all(Object.entries(t||{}).map(([n,o])=>Gxe(r,n,o))),r},KCt=t=>t instanceof Blob&&"name"in t,b0n=t=>typeof t=="object"&&t!==null&&(t instanceof Response||jQ(t)||KCt(t)),Hxe=t=>{if(b0n(t))return!0;if(Array.isArray(t))return t.some(Hxe);if(t&&typeof t=="object"){for(let e in t)if(Hxe(t[e]))return!0}return!1},Gxe=async(t,e,r)=>{if(r!==void 0){if(r==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")t.append(e,String(r));else if(r instanceof Response)t.append(e,IO([await r.blob()],SD(r)));else if(jQ(r))t.append(e,IO([await new Response(MQ(r)).blob()],SD(r)));else if(KCt(r))t.append(e,r,SD(r));else if(Array.isArray(r))await Promise.all(r.map(n=>Gxe(t,e+"[]",n)));else if(typeof r=="object")await Promise.all(Object.entries(r).map(([n,o])=>Gxe(t,`${e}[${n}]`,o)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${r} instead`)}};var YCt=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",C0n=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&YCt(t),A0n=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function BQ(t,e,r){if(zxe(),t=await t,C0n(t))return t instanceof File?t:IO([await t.arrayBuffer()],t.name);if(A0n(t)){let o=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),IO(await Kxe(o),e,r)}let n=await Kxe(t);if(e||(e=SD(t)),!r?.type){let o=n.find(s=>typeof s=="object"&&"type"in s&&s.type);typeof o=="string"&&(r={...r,type:o})}return IO(n,e,r)}async function Kxe(t){let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(YCt(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(jQ(t))for await(let r of t)e.push(...await Kxe(r));else{let r=t?.constructor?.name;throw new Error(`Unexpected data type: ${typeof t}${r?`; constructor: ${r}`:""}${x0n(t)}`)}return e}function x0n(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(r=>`"${r}"`).join(", ")}]`}var he=class{constructor(e){this._client=e}};function ZCt(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}var QCt=Object.freeze(Object.create(null)),I0n=(t=ZCt)=>function(r,...n){if(r.length===1)return r[0];let o=!1,s=[],a=r.reduce((d,f,p)=>{/[?#]/.test(f)&&(o=!0);let h=n[p],_=(o?encodeURIComponent:t)(""+h);return p!==n.length&&(h==null||typeof h=="object"&&h.toString===Object.getPrototypeOf(Object.getPrototypeOf(h.hasOwnProperty??QCt)??QCt)?.toString)&&(_=h+"",s.push({start:d.length+f.length,length:_.length,error:`Value of type ${Object.prototype.toString.call(h).slice(8,-1)} is not a valid path parameter`})),d+f+(p===n.length?"":_)},""),c=a.split(/[?#]/,1)[0],l=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi,u;for(;(u=l.exec(c))!==null;)s.push({start:u.index,length:u[0].length,error:`Value "${u[0]}" can't be safely passed as a path parameter`});if(s.sort((d,f)=>d.start-f.start),s.length>0){let d=0,f=s.reduce((p,h)=>{let _=" ".repeat(h.start-d),g="^".repeat(h.length);return d=h.start+h.length,p+_+g},"");throw new ze(`Path parameters result in path with invalid segments:
${s.map(p=>p.error).join(`
`)}
${a}
${f}`)}return a},ae=I0n(ZCt);var DC=class extends he{list(e,r={},n){return this._client.getAPIList(ae`/chat/completions/${e}/messages`,mr,{query:r,...n})}};function bD(t){return t!==void 0&&"function"in t&&t.function!==void 0}function CD(t){return t?.$brand==="auto-parseable-response-format"}function UC(t){return t?.$brand==="auto-parseable-tool"}function JCt(t,e){return!e||!Yxe(e)?{...t,choices:t.choices.map(r=>(eAt(r.message.tool_calls),{...r,message:{...r.message,parsed:null,...r.message.tool_calls?{tool_calls:r.message.tool_calls}:void 0}}))}:AD(t,e)}function AD(t,e){let r=t.choices.map(n=>{if(n.finish_reason==="length")throw new AO;if(n.finish_reason==="content_filter")throw new xO;return eAt(n.message.tool_calls),{...n,message:{...n.message,...n.message.tool_calls?{tool_calls:n.message.tool_calls?.map(o=>M0n(e,o))??void 0}:void 0,parsed:n.message.content&&!n.message.refusal?O0n(e,n.message.content):null}}});return{...t,choices:r}}function O0n(t,e){return t.response_format?.type!=="json_schema"?null:t.response_format?.type==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function M0n(t,e){let r=t.tools?.find(n=>bD(n)&&n.function?.name===e.function.name);return{...e,function:{...e.function,parsed_arguments:UC(r)?r.$parseRaw(e.function.arguments):r?.function.strict?JSON.parse(e.function.arguments):null}}}function XCt(t,e){if(!t||!("tools"in t)||!t.tools)return!1;let r=t.tools?.find(n=>bD(n)&&n.function?.name===e.function.name);return bD(r)&&(UC(r)||r?.function.strict||!1)}function Yxe(t){return CD(t.response_format)?!0:t.tools?.some(e=>UC(e)||e.type==="function"&&e.function.strict===!0)??!1}function eAt(t){for(let e of t||[])if(e.type!=="function")throw new ze(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function tAt(t){for(let e of t??[]){if(e.type!=="function")throw new ze(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new ze(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var PO=t=>t?.role==="assistant",Qxe=t=>t?.role==="tool";var Zxe,$Q,VQ,xD,wD,HQ,ID,Kg,PD,GQ,zQ,RO,rAt,wy=class{constructor(){Zxe.add(this),this.controller=new AbortController,$Q.set(this,void 0),VQ.set(this,()=>{}),xD.set(this,()=>{}),wD.set(this,void 0),HQ.set(this,()=>{}),ID.set(this,()=>{}),Kg.set(this,{}),PD.set(this,!1),GQ.set(this,!1),zQ.set(this,!1),RO.set(this,!1),Tt(this,$Q,new Promise((e,r)=>{Tt(this,VQ,e,"f"),Tt(this,xD,r,"f")}),"f"),Tt(this,wD,new Promise((e,r)=>{Tt(this,HQ,e,"f"),Tt(this,ID,r,"f")}),"f"),Z(this,$Q,"f").catch(()=>{}),Z(this,wD,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},Z(this,Zxe,"m",rAt).bind(this))},0)}_connected(){this.ended||(Z(this,VQ,"f").call(this),this._emit("connect"))}get ended(){return Z(this,PD,"f")}get errored(){return Z(this,GQ,"f")}get aborted(){return Z(this,zQ,"f")}abort(){this.controller.abort()}on(e,r){return(Z(this,Kg,"f")[e]||(Z(this,Kg,"f")[e]=[])).push({listener:r}),this}off(e,r){let n=Z(this,Kg,"f")[e];if(!n)return this;let o=n.findIndex(s=>s.listener===r);return o>=0&&n.splice(o,1),this}once(e,r){return(Z(this,Kg,"f")[e]||(Z(this,Kg,"f")[e]=[])).push({listener:r,once:!0}),this}emitted(e){return new Promise((r,n)=>{Tt(this,RO,!0,"f"),e!=="error"&&this.once("error",n),this.once(e,r)})}async done(){Tt(this,RO,!0,"f"),await Z(this,wD,"f")}_emit(e,...r){if(Z(this,PD,"f"))return;e==="end"&&(Tt(this,PD,!0,"f"),Z(this,HQ,"f").call(this));let n=Z(this,Kg,"f")[e];if(n&&(Z(this,Kg,"f")[e]=n.filter(o=>!o.once),n.forEach(({listener:o})=>o(...r))),e==="abort"){let o=r[0];!Z(this,RO,"f")&&!n?.length&&Promise.reject(o),Z(this,xD,"f").call(this,o),Z(this,ID,"f").call(this,o),this._emit("end");return}if(e==="error"){let o=r[0];!Z(this,RO,"f")&&!n?.length&&Promise.reject(o),Z(this,xD,"f").call(this,o),Z(this,ID,"f").call(this,o),this._emit("end")}}_emitFinal(){}};$Q=new WeakMap,VQ=new WeakMap,xD=new WeakMap,wD=new WeakMap,HQ=new WeakMap,ID=new WeakMap,Kg=new WeakMap,PD=new WeakMap,GQ=new WeakMap,zQ=new WeakMap,RO=new WeakMap,Zxe=new WeakSet,rAt=function(e){if(Tt(this,GQ,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new Uo),e instanceof Uo)return Tt(this,zQ,!0,"f"),this._emit("abort",e);if(e instanceof ze)return this._emit("error",e);if(e instanceof Error){let r=new ze(e.message);return r.cause=e,this._emit("error",r)}return this._emit("error",new ze(String(e)))};function nAt(t){return typeof t.parse=="function"}var pc,Jxe,WQ,Xxe,ewe,twe,iAt,oAt,N0n=10,OO=class extends wy{constructor(){super(...arguments),pc.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);let r=e.choices[0]?.message;return r&&this._addMessage(r),e}_addMessage(e,r=!0){if("content"in e||(e.content=null),this.messages.push(e),r){if(this._emit("message",e),Qxe(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(PO(e)&&e.tool_calls)for(let n of e.tool_calls)n.type==="function"&&this._emit("functionToolCall",n.function)}}async finalChatCompletion(){await this.done();let e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new ze("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),Z(this,pc,"m",Jxe).call(this)}async finalMessage(){return await this.done(),Z(this,pc,"m",WQ).call(this)}async finalFunctionToolCall(){return await this.done(),Z(this,pc,"m",Xxe).call(this)}async finalFunctionToolCallResult(){return await this.done(),Z(this,pc,"m",ewe).call(this)}async totalUsage(){return await this.done(),Z(this,pc,"m",twe).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){let e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);let r=Z(this,pc,"m",WQ).call(this);r&&this._emit("finalMessage",r);let n=Z(this,pc,"m",Jxe).call(this);n&&this._emit("finalContent",n);let o=Z(this,pc,"m",Xxe).call(this);o&&this._emit("finalFunctionToolCall",o);let s=Z(this,pc,"m",ewe).call(this);s!=null&&this._emit("finalFunctionToolCallResult",s),this._chatCompletions.some(a=>a.usage)&&this._emit("totalUsage",Z(this,pc,"m",twe).call(this))}async _createChatCompletion(e,r,n){let o=n?.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort())),Z(this,pc,"m",iAt).call(this,r);let s=await e.chat.completions.create({...r,stream:!1},{...n,signal:this.controller.signal});return this._connected(),this._addChatCompletion(AD(s,r))}async _runChatCompletion(e,r,n){for(let o of r.messages)this._addMessage(o,!1);return await this._createChatCompletion(e,r,n)}async _runTools(e,r,n){let o="tool",{tool_choice:s="auto",stream:a,...c}=r,l=typeof s!="string"&&s.type==="function"&&s?.function?.name,{maxChatCompletions:u=N0n}=n||{},d=r.tools.map(h=>{if(UC(h)){if(!h.$callback)throw new ze("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:h.$callback,name:h.function.name,description:h.function.description||"",parameters:h.function.parameters,parse:h.$parseRaw,strict:!0}}}return h}),f={};for(let h of d)h.type==="function"&&(f[h.function.name||h.function.function.name]=h.function);let p="tools"in r?d.map(h=>h.type==="function"?{type:"function",function:{name:h.function.name||h.function.function.name,parameters:h.function.parameters,description:h.function.description,strict:h.function.strict}}:h):void 0;for(let h of r.messages)this._addMessage(h,!1);for(let h=0;h<u;++h){let g=(await this._createChatCompletion(e,{...c,tool_choice:s,tools:p,messages:[...this.messages]},n)).choices[0]?.message;if(!g)throw new ze("missing message in ChatCompletion response");if(!g.tool_calls?.length)return;for(let v of g.tool_calls){if(v.type!=="function")continue;let E=v.id,{name:y,arguments:S}=v.function,b=f[y];if(b){if(l&&l!==y){let O=`Invalid tool_call: ${JSON.stringify(y)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:o,tool_call_id:E,content:O});continue}}else{let O=`Invalid tool_call: ${JSON.stringify(y)}. Available options are: ${Object.keys(f).map(L=>JSON.stringify(L)).join(", ")}. Please try again`;this._addMessage({role:o,tool_call_id:E,content:O});continue}let w;try{w=nAt(b)?await b.parse(S):S}catch(O){let L=O instanceof Error?O.message:String(O);this._addMessage({role:o,tool_call_id:E,content:L});continue}let P=await b.function(w,this),A=Z(this,pc,"m",oAt).call(this,P);if(this._addMessage({role:o,tool_call_id:E,content:A}),l)return}}}};pc=new WeakSet,Jxe=function(){return Z(this,pc,"m",WQ).call(this).content??null},WQ=function(){let e=this.messages.length;for(;e-- >0;){let r=this.messages[e];if(PO(r))return{...r,content:r.content??null,refusal:r.refusal??null}}throw new ze("stream ended without producing a ChatCompletionMessage with role=assistant")},Xxe=function(){for(let e=this.messages.length-1;e>=0;e--){let r=this.messages[e];if(PO(r)&&r?.tool_calls?.length)return r.tool_calls.filter(n=>n.type==="function").at(-1)?.function}},ewe=function(){for(let e=this.messages.length-1;e>=0;e--){let r=this.messages[e];if(Qxe(r)&&r.content!=null&&typeof r.content=="string"&&this.messages.some(n=>n.role==="assistant"&&n.tool_calls?.some(o=>o.type==="function"&&o.id===r.tool_call_id)))return r.content}},twe=function(){let e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(let{usage:r}of this._chatCompletions)r&&(e.completion_tokens+=r.completion_tokens,e.prompt_tokens+=r.prompt_tokens,e.total_tokens+=r.total_tokens);return e},iAt=function(e){if(e.n!=null&&e.n>1)throw new ze("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},oAt=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};var RD=class t extends OO{static runTools(e,r,n){let o=new t,s={...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"runTools"}};return o._run(()=>o._runTools(e,r,s)),o}_addMessage(e,r=!0){super._addMessage(e,r),PO(e)&&e.content&&this._emit("content",e.content)}};var Ts={STR:1,NUM:2,ARR:4,OBJ:8,NULL:16,BOOL:32,NAN:64,INFINITY:128,MINUS_INFINITY:256,INF:384,SPECIAL:496,ATOM:499,COLLECTION:12,ALL:511},rwe=class extends Error{},nwe=class extends Error{};function L0n(t,e=Ts.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return k0n(t.trim(),e)}var k0n=(t,e)=>{let r=t.length,n=0,o=p=>{throw new rwe(`${p} at position ${n}`)},s=p=>{throw new nwe(`${p} at position ${n}`)},a=()=>(f(),n>=r&&o("Unexpected end of input"),t[n]==='"'?c():t[n]==="{"?l():t[n]==="["?u():t.substring(n,n+4)==="null"||Ts.NULL&e&&r-n<4&&"null".startsWith(t.substring(n))?(n+=4,null):t.substring(n,n+4)==="true"||Ts.BOOL&e&&r-n<4&&"true".startsWith(t.substring(n))?(n+=4,!0):t.substring(n,n+5)==="false"||Ts.BOOL&e&&r-n<5&&"false".startsWith(t.substring(n))?(n+=5,!1):t.substring(n,n+8)==="Infinity"||Ts.INFINITY&e&&r-n<8&&"Infinity".startsWith(t.substring(n))?(n+=8,1/0):t.substring(n,n+9)==="-Infinity"||Ts.MINUS_INFINITY&e&&1<r-n&&r-n<9&&"-Infinity".startsWith(t.substring(n))?(n+=9,-1/0):t.substring(n,n+3)==="NaN"||Ts.NAN&e&&r-n<3&&"NaN".startsWith(t.substring(n))?(n+=3,NaN):d()),c=()=>{let p=n,h=!1;for(n++;n<r&&(t[n]!=='"'||h&&t[n-1]==="\\");)h=t[n]==="\\"?!h:!1,n++;if(t.charAt(n)=='"')try{return JSON.parse(t.substring(p,++n-Number(h)))}catch(_){s(String(_))}else if(Ts.STR&e)try{return JSON.parse(t.substring(p,n-Number(h))+'"')}catch{return JSON.parse(t.substring(p,t.lastIndexOf("\\"))+'"')}o("Unterminated string literal")},l=()=>{n++,f();let p={};try{for(;t[n]!=="}";){if(f(),n>=r&&Ts.OBJ&e)return p;let h=c();f(),n++;try{let _=a();Object.defineProperty(p,h,{value:_,writable:!0,enumerable:!0,configurable:!0})}catch(_){if(Ts.OBJ&e)return p;throw _}f(),t[n]===","&&n++}}catch{if(Ts.OBJ&e)return p;o("Expected '}' at end of object")}return n++,p},u=()=>{n++;let p=[];try{for(;t[n]!=="]";)p.push(a()),f(),t[n]===","&&n++}catch{if(Ts.ARR&e)return p;o("Expected ']' at end of array")}return n++,p},d=()=>{if(n===0){t==="-"&&Ts.NUM&e&&o("Not sure what '-' is");try{return JSON.parse(t)}catch(h){if(Ts.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}s(String(h))}}let p=n;for(t[n]==="-"&&n++;t[n]&&!",]}".includes(t[n]);)n++;n==r&&!(Ts.NUM&e)&&o("Unterminated number literal");try{return JSON.parse(t.substring(p,n))}catch{t.substring(p,n)==="-"&&Ts.NUM&e&&o("Not sure what '-' is");try{return JSON.parse(t.substring(p,t.lastIndexOf("e")))}catch(_){s(String(_))}}},f=()=>{for(;n<r&&` 
\r	`.includes(t[n]);)n++};return a()},iwe=t=>L0n(t,Ts.ALL^Ts.NUM);var Jo,Yg,MO,Iy,owe,KQ,swe,awe,cwe,YQ,lwe,sAt,qC=class t extends OO{constructor(e){super(),Jo.add(this),Yg.set(this,void 0),MO.set(this,void 0),Iy.set(this,void 0),Tt(this,Yg,e,"f"),Tt(this,MO,[],"f")}get currentChatCompletionSnapshot(){return Z(this,Iy,"f")}static fromReadableStream(e){let r=new t(null);return r._run(()=>r._fromReadableStream(e)),r}static createChatCompletion(e,r,n){let o=new t(r);return o._run(()=>o._runChatCompletion(e,{...r,stream:!0},{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),o}async _createChatCompletion(e,r,n){super._createChatCompletion;let o=n?.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort())),Z(this,Jo,"m",owe).call(this);let s=await e.chat.completions.create({...r,stream:!0},{...n,signal:this.controller.signal});this._connected();for await(let a of s)Z(this,Jo,"m",swe).call(this,a);if(s.controller.signal?.aborted)throw new Uo;return this._addChatCompletion(Z(this,Jo,"m",YQ).call(this))}async _fromReadableStream(e,r){let n=r?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),Z(this,Jo,"m",owe).call(this),this._connected();let o=_h.fromReadableStream(e,this.controller),s;for await(let a of o)s&&s!==a.id&&this._addChatCompletion(Z(this,Jo,"m",YQ).call(this)),Z(this,Jo,"m",swe).call(this,a),s=a.id;if(o.controller.signal?.aborted)throw new Uo;return this._addChatCompletion(Z(this,Jo,"m",YQ).call(this))}[(Yg=new WeakMap,MO=new WeakMap,Iy=new WeakMap,Jo=new WeakSet,owe=function(){this.ended||Tt(this,Iy,void 0,"f")},KQ=function(r){let n=Z(this,MO,"f")[r.index];return n||(n={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},Z(this,MO,"f")[r.index]=n,n)},swe=function(r){if(this.ended)return;let n=Z(this,Jo,"m",sAt).call(this,r);this._emit("chunk",r,n);for(let o of r.choices){let s=n.choices[o.index];o.delta.content!=null&&s.message?.role==="assistant"&&s.message?.content&&(this._emit("content",o.delta.content,s.message.content),this._emit("content.delta",{delta:o.delta.content,snapshot:s.message.content,parsed:s.message.parsed})),o.delta.refusal!=null&&s.message?.role==="assistant"&&s.message?.refusal&&this._emit("refusal.delta",{delta:o.delta.refusal,snapshot:s.message.refusal}),o.logprobs?.content!=null&&s.message?.role==="assistant"&&this._emit("logprobs.content.delta",{content:o.logprobs?.content,snapshot:s.logprobs?.content??[]}),o.logprobs?.refusal!=null&&s.message?.role==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:o.logprobs?.refusal,snapshot:s.logprobs?.refusal??[]});let a=Z(this,Jo,"m",KQ).call(this,s);s.finish_reason&&(Z(this,Jo,"m",cwe).call(this,s),a.current_tool_call_index!=null&&Z(this,Jo,"m",awe).call(this,s,a.current_tool_call_index));for(let c of o.delta.tool_calls??[])a.current_tool_call_index!==c.index&&(Z(this,Jo,"m",cwe).call(this,s),a.current_tool_call_index!=null&&Z(this,Jo,"m",awe).call(this,s,a.current_tool_call_index)),a.current_tool_call_index=c.index;for(let c of o.delta.tool_calls??[]){let l=s.message.tool_calls?.[c.index];l?.type&&(l?.type==="function"?this._emit("tool_calls.function.arguments.delta",{name:l.function?.name,index:c.index,arguments:l.function.arguments,parsed_arguments:l.function.parsed_arguments,arguments_delta:c.function?.arguments??""}):(l?.type,void 0))}}},awe=function(r,n){if(Z(this,Jo,"m",KQ).call(this,r).done_tool_calls.has(n))return;let s=r.message.tool_calls?.[n];if(!s)throw new Error("no tool call snapshot");if(!s.type)throw new Error("tool call snapshot missing `type`");if(s.type==="function"){let a=Z(this,Yg,"f")?.tools?.find(c=>bD(c)&&c.function.name===s.function.name);this._emit("tool_calls.function.arguments.done",{name:s.function.name,index:n,arguments:s.function.arguments,parsed_arguments:UC(a)?a.$parseRaw(s.function.arguments):a?.function.strict?JSON.parse(s.function.arguments):null})}else s.type},cwe=function(r){let n=Z(this,Jo,"m",KQ).call(this,r);if(r.message.content&&!n.content_done){n.content_done=!0;let o=Z(this,Jo,"m",lwe).call(this);this._emit("content.done",{content:r.message.content,parsed:o?o.$parseRaw(r.message.content):null})}r.message.refusal&&!n.refusal_done&&(n.refusal_done=!0,this._emit("refusal.done",{refusal:r.message.refusal})),r.logprobs?.content&&!n.logprobs_content_done&&(n.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:r.logprobs.content})),r.logprobs?.refusal&&!n.logprobs_refusal_done&&(n.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:r.logprobs.refusal}))},YQ=function(){if(this.ended)throw new ze("stream has ended, this shouldn't happen");let r=Z(this,Iy,"f");if(!r)throw new ze("request ended without sending any chunks");return Tt(this,Iy,void 0,"f"),Tt(this,MO,[],"f"),D0n(r,Z(this,Yg,"f"))},lwe=function(){let r=Z(this,Yg,"f")?.response_format;return CD(r)?r:null},sAt=function(r){var n,o,s,a;let c=Z(this,Iy,"f"),{choices:l,...u}=r;c?Object.assign(c,u):c=Tt(this,Iy,{...u,choices:[]},"f");for(let{delta:d,finish_reason:f,index:p,logprobs:h=null,..._}of r.choices){let g=c.choices[p];if(g||(g=c.choices[p]={finish_reason:f,index:p,message:{},logprobs:h,..._}),h)if(!g.logprobs)g.logprobs=Object.assign({},h);else{let{content:P,refusal:A,...O}=h;Object.assign(g.logprobs,O),P&&((n=g.logprobs).content??(n.content=[]),g.logprobs.content.push(...P)),A&&((o=g.logprobs).refusal??(o.refusal=[]),g.logprobs.refusal.push(...A))}if(f&&(g.finish_reason=f,Z(this,Yg,"f")&&Yxe(Z(this,Yg,"f")))){if(f==="length")throw new AO;if(f==="content_filter")throw new xO}if(Object.assign(g,_),!d)continue;let{content:v,refusal:E,function_call:y,role:S,tool_calls:b,...w}=d;if(Object.assign(g.message,w),E&&(g.message.refusal=(g.message.refusal||"")+E),S&&(g.message.role=S),y&&(g.message.function_call?(y.name&&(g.message.function_call.name=y.name),y.arguments&&((s=g.message.function_call).arguments??(s.arguments=""),g.message.function_call.arguments+=y.arguments)):g.message.function_call=y),v&&(g.message.content=(g.message.content||"")+v,!g.message.refusal&&Z(this,Jo,"m",lwe).call(this)&&(g.message.parsed=iwe(g.message.content))),b){g.message.tool_calls||(g.message.tool_calls=[]);for(let{index:P,id:A,type:O,function:L,...j}of b){let $=(a=g.message.tool_calls)[P]??(a[P]={});Object.assign($,j),A&&($.id=A),O&&($.type=O),L&&($.function??($.function={name:L.name??"",arguments:""})),L?.name&&($.function.name=L.name),L?.arguments&&($.function.arguments+=L.arguments,XCt(Z(this,Yg,"f"),$)&&($.function.parsed_arguments=iwe($.function.arguments)))}}}return c},Symbol.asyncIterator)](){let e=[],r=[],n=!1;return this.on("chunk",o=>{let s=r.shift();s?s.resolve(o):e.push(o)}),this.on("end",()=>{n=!0;for(let o of r)o.resolve(void 0);r.length=0}),this.on("abort",o=>{n=!0;for(let s of r)s.reject(o);r.length=0}),this.on("error",o=>{n=!0;for(let s of r)s.reject(o);r.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((s,a)=>r.push({resolve:s,reject:a})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new _h(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}};function D0n(t,e){let{id:r,choices:n,created:o,model:s,system_fingerprint:a,...c}=t,l={...c,id:r,choices:n.map(({message:u,finish_reason:d,index:f,logprobs:p,...h})=>{if(!d)throw new ze(`missing finish_reason for choice ${f}`);let{content:_=null,function_call:g,tool_calls:v,...E}=u,y=u.role;if(!y)throw new ze(`missing role for choice ${f}`);if(g){let{arguments:S,name:b}=g;if(S==null)throw new ze(`missing function_call.arguments for choice ${f}`);if(!b)throw new ze(`missing function_call.name for choice ${f}`);return{...h,message:{content:_,function_call:{arguments:S,name:b},role:y,refusal:u.refusal??null},finish_reason:d,index:f,logprobs:p}}return v?{...h,index:f,finish_reason:d,logprobs:p,message:{...E,role:y,content:_,refusal:u.refusal??null,tool_calls:v.map((S,b)=>{let{function:w,type:P,id:A,...O}=S,{arguments:L,name:j,...$}=w||{};if(A==null)throw new ze(`missing choices[${f}].tool_calls[${b}].id
${QQ(t)}`);if(P==null)throw new ze(`missing choices[${f}].tool_calls[${b}].type
${QQ(t)}`);if(j==null)throw new ze(`missing choices[${f}].tool_calls[${b}].function.name
${QQ(t)}`);if(L==null)throw new ze(`missing choices[${f}].tool_calls[${b}].function.arguments
${QQ(t)}`);return{...O,id:A,type:P,function:{...$,name:j,arguments:L}}})}}:{...h,message:{...E,content:_,role:y,refusal:u.refusal??null},finish_reason:d,index:f,logprobs:p}}),created:o,model:s,object:"chat.completion",...a?{system_fingerprint:a}:{}};return JCt(l,e)}function QQ(t){return JSON.stringify(t)}var OD=class t extends qC{static fromReadableStream(e){let r=new t(null);return r._run(()=>r._fromReadableStream(e)),r}static runTools(e,r,n){let o=new t(r),s={...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"runTools"}};return o._run(()=>o._runTools(e,r,s)),o}};var Qg=class extends he{constructor(){super(...arguments),this.messages=new DC(this._client)}create(e,r){return this._client.post("/chat/completions",{body:e,...r,stream:e.stream??!1})}retrieve(e,r){return this._client.get(ae`/chat/completions/${e}`,r)}update(e,r,n){return this._client.post(ae`/chat/completions/${e}`,{body:r,...n})}list(e={},r){return this._client.getAPIList("/chat/completions",mr,{query:e,...r})}delete(e,r){return this._client.delete(ae`/chat/completions/${e}`,r)}parse(e,r){return tAt(e.tools),this._client.chat.completions.create(e,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(n=>AD(n,e))}runTools(e,r){return e.stream?OD.runTools(this._client,e,r):RD.runTools(this._client,e,r)}stream(e,r){return qC.createChatCompletion(this._client,e,r)}};Qg.Messages=DC;var Py=class extends he{constructor(){super(...arguments),this.completions=new Qg(this._client)}};Py.Completions=Qg;var aAt=Symbol("brand.privateNullableHeaders");function*q0n(t){if(!t)return;if(aAt in t){let{values:n,nulls:o}=t;yield*n.entries();for(let s of o)yield[s,null];return}let e=!1,r;t instanceof Headers?r=t.entries():Rxe(t)?r=t:(e=!0,r=Object.entries(t??{}));for(let n of r){let o=n[0];if(typeof o!="string")throw new TypeError("expected header name to be a string");let s=Rxe(n[1])?n[1]:[n[1]],a=!1;for(let c of s)c!==void 0&&(e&&!a&&(a=!0,yield[o,null]),yield[o,c])}}var Re=t=>{let e=new Headers,r=new Set;for(let n of t){let o=new Set;for(let[s,a]of q0n(n)){let c=s.toLowerCase();o.has(c)||(e.delete(s),o.add(c)),a===null?(e.delete(s),r.add(c)):(e.append(s,a),r.delete(c))}}return{[aAt]:!0,values:e,nulls:r}};var NO=class extends he{create(e,r){return this._client.post("/audio/speech",{body:e,...r,headers:Re([{Accept:"application/octet-stream"},r?.headers]),__binaryResponse:!0})}};var LO=class extends he{create(e,r){return this._client.post("/audio/transcriptions",Eu({body:e,...r,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}};var kO=class extends he{create(e,r){return this._client.post("/audio/translations",Eu({body:e,...r,__metadata:{model:e.model}},this._client))}};var yh=class extends he{constructor(){super(...arguments),this.transcriptions=new LO(this._client),this.translations=new kO(this._client),this.speech=new NO(this._client)}};yh.Transcriptions=LO;yh.Translations=kO;yh.Speech=NO;var FC=class extends he{create(e,r){return this._client.post("/batches",{body:e,...r})}retrieve(e,r){return this._client.get(ae`/batches/${e}`,r)}list(e={},r){return this._client.getAPIList("/batches",mr,{query:e,...r})}cancel(e,r){return this._client.post(ae`/batches/${e}/cancel`,r)}};var DO=class extends he{create(e,r){return this._client.post("/assistants",{body:e,...r,headers:Re([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,r){return this._client.get(ae`/assistants/${e}`,{...r,headers:Re([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,r,n){return this._client.post(ae`/assistants/${e}`,{body:r,...n,headers:Re([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}list(e={},r){return this._client.getAPIList("/assistants",mr,{query:e,...r,headers:Re([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,r){return this._client.delete(ae`/assistants/${e}`,{...r,headers:Re([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}};var UO=class extends he{create(e,r){return this._client.post("/realtime/sessions",{body:e,...r,headers:Re([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}};var qO=class extends he{create(e,r){return this._client.post("/realtime/transcription_sessions",{body:e,...r,headers:Re([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}};var Ry=class extends he{constructor(){super(...arguments),this.sessions=new UO(this._client),this.transcriptionSessions=new qO(this._client)}};Ry.Sessions=UO;Ry.TranscriptionSessions=qO;var FO=class extends he{create(e,r){return this._client.post("/chatkit/sessions",{body:e,...r,headers:Re([{"OpenAI-Beta":"chatkit_beta=v1"},r?.headers])})}cancel(e,r){return this._client.post(ae`/chatkit/sessions/${e}/cancel`,{...r,headers:Re([{"OpenAI-Beta":"chatkit_beta=v1"},r?.headers])})}};var jO=class extends he{retrieve(e,r){return this._client.get(ae`/chatkit/threads/${e}`,{...r,headers:Re([{"OpenAI-Beta":"chatkit_beta=v1"},r?.headers])})}list(e={},r){return this._client.getAPIList("/chatkit/threads",Wg,{query:e,...r,headers:Re([{"OpenAI-Beta":"chatkit_beta=v1"},r?.headers])})}delete(e,r){return this._client.delete(ae`/chatkit/threads/${e}`,{...r,headers:Re([{"OpenAI-Beta":"chatkit_beta=v1"},r?.headers])})}listItems(e,r={},n){return this._client.getAPIList(ae`/chatkit/threads/${e}/items`,Wg,{query:r,...n,headers:Re([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}};var Oy=class extends he{constructor(){super(...arguments),this.sessions=new FO(this._client),this.threads=new jO(this._client)}};Oy.Sessions=FO;Oy.Threads=jO;var BO=class extends he{create(e,r,n){return this._client.post(ae`/threads/${e}/messages`,{body:r,...n,headers:Re([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,r,n){let{thread_id:o}=r;return this._client.get(ae`/threads/${o}/messages/${e}`,{...n,headers:Re([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,r,n){let{thread_id:o,...s}=r;return this._client.post(ae`/threads/${o}/messages/${e}`,{body:s,...n,headers:Re([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}list(e,r={},n){return this._client.getAPIList(ae`/threads/${e}/messages`,mr,{query:r,...n,headers:Re([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,r,n){let{thread_id:o}=r;return this._client.delete(ae`/threads/${o}/messages/${e}`,{...n,headers:Re([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}};var $O=class extends he{retrieve(e,r,n){let{thread_id:o,run_id:s,...a}=r;return this._client.get(ae`/threads/${o}/runs/${s}/steps/${e}`,{query:a,...n,headers:Re([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}list(e,r,n){let{thread_id:o,...s}=r;return this._client.getAPIList(ae`/threads/${o}/runs/${e}/steps`,mr,{query:s,...n,headers:Re([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}};var cAt=t=>{if(typeof Buffer<"u"){let e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{let e=atob(t),r=e.length,n=new Uint8Array(r);for(let o=0;o<r;o++)n[o]=e.charCodeAt(o);return Array.from(new Float32Array(n.buffer))}};var My=t=>{if(typeof globalThis.process<"u")return globalThis.process.env?.[t]?.trim()??void 0;if(typeof globalThis.Deno<"u")return globalThis.Deno.env?.get?.(t)?.trim()};var Gs,BC,uwe,Eh,ZQ,m0,$C,VO,jC,eZ,Tu,JQ,XQ,LD,MD,ND,lAt,uAt,dAt,fAt,pAt,hAt,mAt,Zg=class extends wy{constructor(){super(...arguments),Gs.add(this),uwe.set(this,[]),Eh.set(this,{}),ZQ.set(this,{}),m0.set(this,void 0),$C.set(this,void 0),VO.set(this,void 0),jC.set(this,void 0),eZ.set(this,void 0),Tu.set(this,void 0),JQ.set(this,void 0),XQ.set(this,void 0),LD.set(this,void 0)}[(uwe=new WeakMap,Eh=new WeakMap,ZQ=new WeakMap,m0=new WeakMap,$C=new WeakMap,VO=new WeakMap,jC=new WeakMap,eZ=new WeakMap,Tu=new WeakMap,JQ=new WeakMap,XQ=new WeakMap,LD=new WeakMap,Gs=new WeakSet,Symbol.asyncIterator)](){let e=[],r=[],n=!1;return this.on("event",o=>{let s=r.shift();s?s.resolve(o):e.push(o)}),this.on("end",()=>{n=!0;for(let o of r)o.resolve(void 0);r.length=0}),this.on("abort",o=>{n=!0;for(let s of r)s.reject(o);r.length=0}),this.on("error",o=>{n=!0;for(let s of r)s.reject(o);r.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((s,a)=>r.push({resolve:s,reject:a})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){let r=new BC;return r._run(()=>r._fromReadableStream(e)),r}async _fromReadableStream(e,r){let n=r?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),this._connected();let o=_h.fromReadableStream(e,this.controller);for await(let s of o)Z(this,Gs,"m",MD).call(this,s);if(o.controller.signal?.aborted)throw new Uo;return this._addRun(Z(this,Gs,"m",ND).call(this))}toReadableStream(){return new _h(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,r,n,o){let s=new BC;return s._run(()=>s._runToolAssistantStream(e,r,n,{...o,headers:{...o?.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createToolAssistantStream(e,r,n,o){let s=o?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));let a={...n,stream:!0},c=await e.submitToolOutputs(r,a,{...o,signal:this.controller.signal});this._connected();for await(let l of c)Z(this,Gs,"m",MD).call(this,l);if(c.controller.signal?.aborted)throw new Uo;return this._addRun(Z(this,Gs,"m",ND).call(this))}static createThreadAssistantStream(e,r,n){let o=new BC;return o._run(()=>o._threadAssistantStream(e,r,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),o}static createAssistantStream(e,r,n,o){let s=new BC;return s._run(()=>s._runAssistantStream(e,r,n,{...o,headers:{...o?.headers,"X-Stainless-Helper-Method":"stream"}})),s}currentEvent(){return Z(this,JQ,"f")}currentRun(){return Z(this,XQ,"f")}currentMessageSnapshot(){return Z(this,m0,"f")}currentRunStepSnapshot(){return Z(this,LD,"f")}async finalRunSteps(){return await this.done(),Object.values(Z(this,Eh,"f"))}async finalMessages(){return await this.done(),Object.values(Z(this,ZQ,"f"))}async finalRun(){if(await this.done(),!Z(this,$C,"f"))throw Error("Final run was not received.");return Z(this,$C,"f")}async _createThreadAssistantStream(e,r,n){let o=n?.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));let s={...r,stream:!0},a=await e.createAndRun(s,{...n,signal:this.controller.signal});this._connected();for await(let c of a)Z(this,Gs,"m",MD).call(this,c);if(a.controller.signal?.aborted)throw new Uo;return this._addRun(Z(this,Gs,"m",ND).call(this))}async _createAssistantStream(e,r,n,o){let s=o?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));let a={...n,stream:!0},c=await e.create(r,a,{...o,signal:this.controller.signal});this._connected();for await(let l of c)Z(this,Gs,"m",MD).call(this,l);if(c.controller.signal?.aborted)throw new Uo;return this._addRun(Z(this,Gs,"m",ND).call(this))}static accumulateDelta(e,r){for(let[n,o]of Object.entries(r)){if(!e.hasOwnProperty(n)){e[n]=o;continue}let s=e[n];if(s==null){e[n]=o;continue}if(n==="index"||n==="type"){e[n]=o;continue}if(typeof s=="string"&&typeof o=="string")s+=o;else if(typeof s=="number"&&typeof o=="number")s+=o;else if(gD(s)&&gD(o))s=this.accumulateDelta(s,o);else if(Array.isArray(s)&&Array.isArray(o)){if(s.every(a=>typeof a=="string"||typeof a=="number")){s.push(...o);continue}for(let a of o){if(!gD(a))throw new Error(`Expected array delta entry to be an object but got: ${a}`);let c=a.index;if(c==null)throw console.error(a),new Error("Expected array delta entry to have an `index` property");if(typeof c!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${c}`);let l=s[c];l==null?s.push(a):s[c]=this.accumulateDelta(l,a)}continue}else throw Error(`Unhandled record type: ${n}, deltaValue: ${o}, accValue: ${s}`);e[n]=s}return e}_addRun(e){return e}async _threadAssistantStream(e,r,n){return await this._createThreadAssistantStream(r,e,n)}async _runAssistantStream(e,r,n,o){return await this._createAssistantStream(r,e,n,o)}async _runToolAssistantStream(e,r,n,o){return await this._createToolAssistantStream(r,e,n,o)}};BC=Zg,MD=function(e){if(!this.ended)switch(Tt(this,JQ,e,"f"),Z(this,Gs,"m",dAt).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":Z(this,Gs,"m",mAt).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Z(this,Gs,"m",uAt).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":Z(this,Gs,"m",lAt).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier");default:}},ND=function(){if(this.ended)throw new ze("stream has ended, this shouldn't happen");if(!Z(this,$C,"f"))throw Error("Final run has not been received");return Z(this,$C,"f")},lAt=function(e){let[r,n]=Z(this,Gs,"m",pAt).call(this,e,Z(this,m0,"f"));Tt(this,m0,r,"f"),Z(this,ZQ,"f")[r.id]=r;for(let o of n){let s=r.content[o.index];s?.type=="text"&&this._emit("textCreated",s.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,r),e.data.delta.content)for(let o of e.data.delta.content){if(o.type=="text"&&o.text){let s=o.text,a=r.content[o.index];if(a&&a.type=="text")this._emit("textDelta",s,a.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(o.index!=Z(this,VO,"f")){if(Z(this,jC,"f"))switch(Z(this,jC,"f").type){case"text":this._emit("textDone",Z(this,jC,"f").text,Z(this,m0,"f"));break;case"image_file":this._emit("imageFileDone",Z(this,jC,"f").image_file,Z(this,m0,"f"));break}Tt(this,VO,o.index,"f")}Tt(this,jC,r.content[o.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(Z(this,VO,"f")!==void 0){let o=e.data.content[Z(this,VO,"f")];if(o)switch(o.type){case"image_file":this._emit("imageFileDone",o.image_file,Z(this,m0,"f"));break;case"text":this._emit("textDone",o.text,Z(this,m0,"f"));break}}Z(this,m0,"f")&&this._emit("messageDone",e.data),Tt(this,m0,void 0,"f")}},uAt=function(e){let r=Z(this,Gs,"m",fAt).call(this,e);switch(Tt(this,LD,r,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":let n=e.data.delta;if(n.step_details&&n.step_details.type=="tool_calls"&&n.step_details.tool_calls&&r.step_details.type=="tool_calls")for(let s of n.step_details.tool_calls)s.index==Z(this,eZ,"f")?this._emit("toolCallDelta",s,r.step_details.tool_calls[s.index]):(Z(this,Tu,"f")&&this._emit("toolCallDone",Z(this,Tu,"f")),Tt(this,eZ,s.index,"f"),Tt(this,Tu,r.step_details.tool_calls[s.index],"f"),Z(this,Tu,"f")&&this._emit("toolCallCreated",Z(this,Tu,"f")));this._emit("runStepDelta",e.data.delta,r);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Tt(this,LD,void 0,"f"),e.data.step_details.type=="tool_calls"&&Z(this,Tu,"f")&&(this._emit("toolCallDone",Z(this,Tu,"f")),Tt(this,Tu,void 0,"f")),this._emit("runStepDone",e.data,r);break;case"thread.run.step.in_progress":break}},dAt=function(e){Z(this,uwe,"f").push(e),this._emit("event",e)},fAt=function(e){switch(e.event){case"thread.run.step.created":return Z(this,Eh,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let r=Z(this,Eh,"f")[e.data.id];if(!r)throw Error("Received a RunStepDelta before creation of a snapshot");let n=e.data;if(n.delta){let o=BC.accumulateDelta(r,n.delta);Z(this,Eh,"f")[e.data.id]=o}return Z(this,Eh,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":Z(this,Eh,"f")[e.data.id]=e.data;break}if(Z(this,Eh,"f")[e.data.id])return Z(this,Eh,"f")[e.data.id];throw new Error("No snapshot available")},pAt=function(e,r){let n=[];switch(e.event){case"thread.message.created":return[e.data,n];case"thread.message.delta":if(!r)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let o=e.data;if(o.delta.content)for(let s of o.delta.content)if(s.index in r.content){let a=r.content[s.index];r.content[s.index]=Z(this,Gs,"m",hAt).call(this,s,a)}else r.content[s.index]=s,n.push(s);return[r,n];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(r)return[r,n];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},hAt=function(e,r){return BC.accumulateDelta(r,e)},mAt=function(e){switch(Tt(this,XQ,e.data,"f"),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":Tt(this,$C,e.data,"f"),Z(this,Tu,"f")&&(this._emit("toolCallDone",Z(this,Tu,"f")),Tt(this,Tu,void 0,"f"));break;case"thread.run.cancelling":break}};var VC=class extends he{constructor(){super(...arguments),this.steps=new $O(this._client)}create(e,r,n){let{include:o,...s}=r;return this._client.post(ae`/threads/${e}/runs`,{query:{include:o},body:s,...n,headers:Re([{"OpenAI-Beta":"assistants=v2"},n?.headers]),stream:r.stream??!1})}retrieve(e,r,n){let{thread_id:o}=r;return this._client.get(ae`/threads/${o}/runs/${e}`,{...n,headers:Re([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,r,n){let{thread_id:o,...s}=r;return this._client.post(ae`/threads/${o}/runs/${e}`,{body:s,...n,headers:Re([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}list(e,r={},n){return this._client.getAPIList(ae`/threads/${e}/runs`,mr,{query:r,...n,headers:Re([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}cancel(e,r,n){let{thread_id:o}=r;return this._client.post(ae`/threads/${o}/runs/${e}/cancel`,{...n,headers:Re([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}async createAndPoll(e,r,n){let o=await this.create(e,r,n);return await this.poll(o.id,{thread_id:e},n)}createAndStream(e,r,n){return Zg.createAssistantStream(e,this._client.beta.threads.runs,r,n)}async poll(e,r,n){let o=Re([n?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":n?.pollIntervalMs?.toString()??void 0}]);for(;;){let{data:s,response:a}=await this.retrieve(e,r,{...n,headers:{...n?.headers,...o}}).withResponse();switch(s.status){case"queued":case"in_progress":case"cancelling":let c=5e3;if(n?.pollIntervalMs)c=n.pollIntervalMs;else{let l=a.headers.get("openai-poll-after-ms");if(l){let u=parseInt(l);isNaN(u)||(c=u)}}await mh(c);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return s}}}stream(e,r,n){return Zg.createAssistantStream(e,this._client.beta.threads.runs,r,n)}submitToolOutputs(e,r,n){let{thread_id:o,...s}=r;return this._client.post(ae`/threads/${o}/runs/${e}/submit_tool_outputs`,{body:s,...n,headers:Re([{"OpenAI-Beta":"assistants=v2"},n?.headers]),stream:r.stream??!1})}async submitToolOutputsAndPoll(e,r,n){let o=await this.submitToolOutputs(e,r,n);return await this.poll(o.id,r,n)}submitToolOutputsStream(e,r,n){return Zg.createToolAssistantStream(e,this._client.beta.threads.runs,r,n)}};VC.Steps=$O;var Ny=class extends he{constructor(){super(...arguments),this.runs=new VC(this._client),this.messages=new BO(this._client)}create(e={},r){return this._client.post("/threads",{body:e,...r,headers:Re([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,r){return this._client.get(ae`/threads/${e}`,{...r,headers:Re([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,r,n){return this._client.post(ae`/threads/${e}`,{body:r,...n,headers:Re([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,r){return this._client.delete(ae`/threads/${e}`,{...r,headers:Re([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}createAndRun(e,r){return this._client.post("/threads/runs",{body:e,...r,headers:Re([{"OpenAI-Beta":"assistants=v2"},r?.headers]),stream:e.stream??!1})}async createAndRunPoll(e,r){let n=await this.createAndRun(e,r);return await this.runs.poll(n.id,{thread_id:n.thread_id},r)}createAndRunStream(e,r){return Zg.createThreadAssistantStream(e,this._client.beta.threads,r)}};Ny.Runs=VC;Ny.Messages=BO;var g0=class extends he{constructor(){super(...arguments),this.realtime=new Ry(this._client),this.chatkit=new Oy(this._client),this.assistants=new DO(this._client),this.threads=new Ny(this._client)}};g0.Realtime=Ry;g0.ChatKit=Oy;g0.Assistants=DO;g0.Threads=Ny;var HC=class extends he{create(e,r){return this._client.post("/completions",{body:e,...r,stream:e.stream??!1})}};var HO=class extends he{retrieve(e,r,n){let{container_id:o}=r;return this._client.get(ae`/containers/${o}/files/${e}/content`,{...n,headers:Re([{Accept:"application/binary"},n?.headers]),__binaryResponse:!0})}};var GC=class extends he{constructor(){super(...arguments),this.content=new HO(this._client)}create(e,r,n){return this._client.post(ae`/containers/${e}/files`,Eu({body:r,...n},this._client))}retrieve(e,r,n){let{container_id:o}=r;return this._client.get(ae`/containers/${o}/files/${e}`,n)}list(e,r={},n){return this._client.getAPIList(ae`/containers/${e}/files`,mr,{query:r,...n})}delete(e,r,n){let{container_id:o}=r;return this._client.delete(ae`/containers/${o}/files/${e}`,{...n,headers:Re([{Accept:"*/*"},n?.headers])})}};GC.Content=HO;var Ly=class extends he{constructor(){super(...arguments),this.files=new GC(this._client)}create(e,r){return this._client.post("/containers",{body:e,...r})}retrieve(e,r){return this._client.get(ae`/containers/${e}`,r)}list(e={},r){return this._client.getAPIList("/containers",mr,{query:e,...r})}delete(e,r){return this._client.delete(ae`/containers/${e}`,{...r,headers:Re([{Accept:"*/*"},r?.headers])})}};Ly.Files=GC;var GO=class extends he{create(e,r,n){let{include:o,...s}=r;return this._client.post(ae`/conversations/${e}/items`,{query:{include:o},body:s,...n})}retrieve(e,r,n){let{conversation_id:o,...s}=r;return this._client.get(ae`/conversations/${o}/items/${e}`,{query:s,...n})}list(e,r={},n){return this._client.getAPIList(ae`/conversations/${e}/items`,Wg,{query:r,...n})}delete(e,r,n){let{conversation_id:o}=r;return this._client.delete(ae`/conversations/${o}/items/${e}`,n)}};var ky=class extends he{constructor(){super(...arguments),this.items=new GO(this._client)}create(e={},r){return this._client.post("/conversations",{body:e,...r})}retrieve(e,r){return this._client.get(ae`/conversations/${e}`,r)}update(e,r,n){return this._client.post(ae`/conversations/${e}`,{body:r,...n})}delete(e,r){return this._client.delete(ae`/conversations/${e}`,r)}};ky.Items=GO;var zC=class extends he{create(e,r){let n=!!e.encoding_format,o=n?e.encoding_format:"base64";n&&go(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);let s=this._client.post("/embeddings",{body:{...e,encoding_format:o},...r});return n?s:(go(this._client).debug("embeddings/decoding base64 embeddings from base64"),s._thenUnwrap(a=>(a&&a.data&&a.data.forEach(c=>{let l=c.embedding;c.embedding=cAt(l)}),a)))}};var zO=class extends he{retrieve(e,r,n){let{eval_id:o,run_id:s}=r;return this._client.get(ae`/evals/${o}/runs/${s}/output_items/${e}`,n)}list(e,r,n){let{eval_id:o,...s}=r;return this._client.getAPIList(ae`/evals/${o}/runs/${e}/output_items`,mr,{query:s,...n})}};var WC=class extends he{constructor(){super(...arguments),this.outputItems=new zO(this._client)}create(e,r,n){return this._client.post(ae`/evals/${e}/runs`,{body:r,...n})}retrieve(e,r,n){let{eval_id:o}=r;return this._client.get(ae`/evals/${o}/runs/${e}`,n)}list(e,r={},n){return this._client.getAPIList(ae`/evals/${e}/runs`,mr,{query:r,...n})}delete(e,r,n){let{eval_id:o}=r;return this._client.delete(ae`/evals/${o}/runs/${e}`,n)}cancel(e,r,n){let{eval_id:o}=r;return this._client.post(ae`/evals/${o}/runs/${e}`,n)}};WC.OutputItems=zO;var Dy=class extends he{constructor(){super(...arguments),this.runs=new WC(this._client)}create(e,r){return this._client.post("/evals",{body:e,...r})}retrieve(e,r){return this._client.get(ae`/evals/${e}`,r)}update(e,r,n){return this._client.post(ae`/evals/${e}`,{body:r,...n})}list(e={},r){return this._client.getAPIList("/evals",mr,{query:e,...r})}delete(e,r){return this._client.delete(ae`/evals/${e}`,r)}};Dy.Runs=WC;var KC=class extends he{create(e,r){return this._client.post("/files",Eu({body:e,...r},this._client))}retrieve(e,r){return this._client.get(ae`/files/${e}`,r)}list(e={},r){return this._client.getAPIList("/files",mr,{query:e,...r})}delete(e,r){return this._client.delete(ae`/files/${e}`,r)}content(e,r){return this._client.get(ae`/files/${e}/content`,{...r,headers:Re([{Accept:"application/binary"},r?.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:r=5e3,maxWait:n=1800*1e3}={}){let o=new Set(["processed","error","deleted"]),s=Date.now(),a=await this.retrieve(e);for(;!a.status||!o.has(a.status);)if(await mh(r),a=await this.retrieve(e),Date.now()-s>n)throw new Ay({message:`Giving up on waiting for file ${e} to finish processing after ${n} milliseconds.`});return a}};var WO=class extends he{};var KO=class extends he{run(e,r){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...r})}validate(e,r){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...r})}};var YC=class extends he{constructor(){super(...arguments),this.graders=new KO(this._client)}};YC.Graders=KO;var YO=class extends he{create(e,r,n){return this._client.getAPIList(ae`/fine_tuning/checkpoints/${e}/permissions`,vh,{body:r,method:"post",...n})}retrieve(e,r={},n){return this._client.get(ae`/fine_tuning/checkpoints/${e}/permissions`,{query:r,...n})}delete(e,r,n){let{fine_tuned_model_checkpoint:o}=r;return this._client.delete(ae`/fine_tuning/checkpoints/${o}/permissions/${e}`,n)}};var QC=class extends he{constructor(){super(...arguments),this.permissions=new YO(this._client)}};QC.Permissions=YO;var QO=class extends he{list(e,r={},n){return this._client.getAPIList(ae`/fine_tuning/jobs/${e}/checkpoints`,mr,{query:r,...n})}};var ZC=class extends he{constructor(){super(...arguments),this.checkpoints=new QO(this._client)}create(e,r){return this._client.post("/fine_tuning/jobs",{body:e,...r})}retrieve(e,r){return this._client.get(ae`/fine_tuning/jobs/${e}`,r)}list(e={},r){return this._client.getAPIList("/fine_tuning/jobs",mr,{query:e,...r})}cancel(e,r){return this._client.post(ae`/fine_tuning/jobs/${e}/cancel`,r)}listEvents(e,r={},n){return this._client.getAPIList(ae`/fine_tuning/jobs/${e}/events`,mr,{query:r,...n})}pause(e,r){return this._client.post(ae`/fine_tuning/jobs/${e}/pause`,r)}resume(e,r){return this._client.post(ae`/fine_tuning/jobs/${e}/resume`,r)}};ZC.Checkpoints=QO;var _0=class extends he{constructor(){super(...arguments),this.methods=new WO(this._client),this.jobs=new ZC(this._client),this.checkpoints=new QC(this._client),this.alpha=new YC(this._client)}};_0.Methods=WO;_0.Jobs=ZC;_0.Checkpoints=QC;_0.Alpha=YC;var ZO=class extends he{};var Uy=class extends he{constructor(){super(...arguments),this.graderModels=new ZO(this._client)}};Uy.GraderModels=ZO;var JC=class extends he{createVariation(e,r){return this._client.post("/images/variations",Eu({body:e,...r},this._client))}edit(e,r){return this._client.post("/images/edits",Eu({body:e,...r,stream:e.stream??!1},this._client))}generate(e,r){return this._client.post("/images/generations",{body:e,...r,stream:e.stream??!1})}};var XC=class extends he{retrieve(e,r){return this._client.get(ae`/models/${e}`,r)}list(e){return this._client.getAPIList("/models",vh,e)}delete(e,r){return this._client.delete(ae`/models/${e}`,r)}};var eA=class extends he{create(e,r){return this._client.post("/moderations",{body:e,...r})}};var JO=class extends he{accept(e,r,n){return this._client.post(ae`/realtime/calls/${e}/accept`,{body:r,...n,headers:Re([{Accept:"*/*"},n?.headers])})}hangup(e,r){return this._client.post(ae`/realtime/calls/${e}/hangup`,{...r,headers:Re([{Accept:"*/*"},r?.headers])})}refer(e,r,n){return this._client.post(ae`/realtime/calls/${e}/refer`,{body:r,...n,headers:Re([{Accept:"*/*"},n?.headers])})}reject(e,r={},n){return this._client.post(ae`/realtime/calls/${e}/reject`,{body:r,...n,headers:Re([{Accept:"*/*"},n?.headers])})}};var XO=class extends he{create(e,r){return this._client.post("/realtime/client_secrets",{body:e,...r})}};var Jg=class extends he{constructor(){super(...arguments),this.clientSecrets=new XO(this._client),this.calls=new JO(this._client)}};Jg.ClientSecrets=XO;Jg.Calls=JO;function gAt(t,e){return!e||!mpn(e)?{...t,output_parsed:null,output:t.output.map(r=>r.type==="function_call"?{...r,parsed_arguments:null}:r.type==="message"?{...r,content:r.content.map(n=>({...n,parsed:null}))}:r)}:dwe(t,e)}function dwe(t,e){let r=t.output.map(o=>{if(o.type==="function_call")return{...o,parsed_arguments:vpn(e,o)};if(o.type==="message"){let s=o.content.map(a=>a.type==="output_text"?{...a,parsed:hpn(e,a.text)}:a);return{...o,content:s}}return o}),n=Object.assign({},t,{output:r});return Object.getOwnPropertyDescriptor(t,"output_text")||tZ(n),Object.defineProperty(n,"output_parsed",{enumerable:!0,get(){for(let o of n.output)if(o.type==="message"){for(let s of o.content)if(s.type==="output_text"&&s.parsed!==null)return s.parsed}return null}}),n}function hpn(t,e){return t.text?.format?.type!=="json_schema"?null:"$parseRaw"in t.text?.format?(t.text?.format).$parseRaw(e):JSON.parse(e)}function mpn(t){return!!CD(t.text?.format)}function gpn(t){return t?.$brand==="auto-parseable-tool"}function _pn(t,e){return t.find(r=>r.type==="function"&&r.name===e)}function vpn(t,e){let r=_pn(t.tools??[],e.name);return{...e,...e,parsed_arguments:gpn(r)?r.$parseRaw(e.arguments):r?.strict?JSON.parse(e.arguments):null}}function tZ(t){let e=[];for(let r of t.output)if(r.type==="message")for(let n of r.content)n.type==="output_text"&&e.push(n.text);t.output_text=e.join("")}var e2,rZ,qy,nZ,_At,vAt,yAt,EAt,iZ=class t extends wy{constructor(e){super(),e2.add(this),rZ.set(this,void 0),qy.set(this,void 0),nZ.set(this,void 0),Tt(this,rZ,e,"f")}static createResponse(e,r,n){let o=new t(r);return o._run(()=>o._createOrRetrieveResponse(e,r,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),o}async _createOrRetrieveResponse(e,r,n){let o=n?.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort())),Z(this,e2,"m",_At).call(this);let s,a=null;"response_id"in r?(s=await e.responses.retrieve(r.response_id,{stream:!0},{...n,signal:this.controller.signal,stream:!0}),a=r.starting_after??null):s=await e.responses.create({...r,stream:!0},{...n,signal:this.controller.signal}),this._connected();for await(let c of s)Z(this,e2,"m",vAt).call(this,c,a);if(s.controller.signal?.aborted)throw new Uo;return Z(this,e2,"m",yAt).call(this)}[(rZ=new WeakMap,qy=new WeakMap,nZ=new WeakMap,e2=new WeakSet,_At=function(){this.ended||Tt(this,qy,void 0,"f")},vAt=function(r,n){if(this.ended)return;let o=(a,c)=>{(n==null||c.sequence_number>n)&&this._emit(a,c)},s=Z(this,e2,"m",EAt).call(this,r);switch(o("event",r),r.type){case"response.output_text.delta":{let a=s.output[r.output_index];if(!a)throw new ze(`missing output at index ${r.output_index}`);if(a.type==="message"){let c=a.content[r.content_index];if(!c)throw new ze(`missing content at index ${r.content_index}`);if(c.type!=="output_text")throw new ze(`expected content to be 'output_text', got ${c.type}`);o("response.output_text.delta",{...r,snapshot:c.text})}break}case"response.function_call_arguments.delta":{let a=s.output[r.output_index];if(!a)throw new ze(`missing output at index ${r.output_index}`);a.type==="function_call"&&o("response.function_call_arguments.delta",{...r,snapshot:a.arguments});break}default:o(r.type,r);break}},yAt=function(){if(this.ended)throw new ze("stream has ended, this shouldn't happen");let r=Z(this,qy,"f");if(!r)throw new ze("request ended without sending any events");Tt(this,qy,void 0,"f");let n=ypn(r,Z(this,rZ,"f"));return Tt(this,nZ,n,"f"),n},EAt=function(r){let n=Z(this,qy,"f");if(!n){if(r.type!=="response.created")throw new ze(`When snapshot hasn't been set yet, expected 'response.created' event, got ${r.type}`);return n=Tt(this,qy,r.response,"f"),n}switch(r.type){case"response.output_item.added":{n.output.push(r.item);break}case"response.content_part.added":{let o=n.output[r.output_index];if(!o)throw new ze(`missing output at index ${r.output_index}`);let s=o.type,a=r.part;s==="message"&&a.type!=="reasoning_text"?o.content.push(a):s==="reasoning"&&a.type==="reasoning_text"&&(o.content||(o.content=[]),o.content.push(a));break}case"response.output_text.delta":{let o=n.output[r.output_index];if(!o)throw new ze(`missing output at index ${r.output_index}`);if(o.type==="message"){let s=o.content[r.content_index];if(!s)throw new ze(`missing content at index ${r.content_index}`);if(s.type!=="output_text")throw new ze(`expected content to be 'output_text', got ${s.type}`);s.text+=r.delta}break}case"response.function_call_arguments.delta":{let o=n.output[r.output_index];if(!o)throw new ze(`missing output at index ${r.output_index}`);o.type==="function_call"&&(o.arguments+=r.delta);break}case"response.reasoning_text.delta":{let o=n.output[r.output_index];if(!o)throw new ze(`missing output at index ${r.output_index}`);if(o.type==="reasoning"){let s=o.content?.[r.content_index];if(!s)throw new ze(`missing content at index ${r.content_index}`);if(s.type!=="reasoning_text")throw new ze(`expected content to be 'reasoning_text', got ${s.type}`);s.text+=r.delta}break}case"response.completed":{Tt(this,qy,r.response,"f");break}}return n},Symbol.asyncIterator)](){let e=[],r=[],n=!1;return this.on("event",o=>{let s=r.shift();s?s.resolve(o):e.push(o)}),this.on("end",()=>{n=!0;for(let o of r)o.resolve(void 0);r.length=0}),this.on("abort",o=>{n=!0;for(let s of r)s.reject(o);r.length=0}),this.on("error",o=>{n=!0;for(let s of r)s.reject(o);r.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((s,a)=>r.push({resolve:s,reject:a})).then(s=>s?{value:s,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();let e=Z(this,nZ,"f");if(!e)throw new ze("stream ended without producing a ChatCompletion");return e}};function ypn(t,e){return gAt(t,e)}var t2=class extends he{list(e,r={},n){return this._client.getAPIList(ae`/responses/${e}/input_items`,mr,{query:r,...n})}};var r2=class extends he{count(e={},r){return this._client.post("/responses/input_tokens",{body:e,...r})}};var Xg=class extends he{constructor(){super(...arguments),this.inputItems=new t2(this._client),this.inputTokens=new r2(this._client)}create(e,r){return this._client.post("/responses",{body:e,...r,stream:e.stream??!1})._thenUnwrap(n=>("object"in n&&n.object==="response"&&tZ(n),n))}retrieve(e,r={},n){return this._client.get(ae`/responses/${e}`,{query:r,...n,stream:r?.stream??!1})._thenUnwrap(o=>("object"in o&&o.object==="response"&&tZ(o),o))}delete(e,r){return this._client.delete(ae`/responses/${e}`,{...r,headers:Re([{Accept:"*/*"},r?.headers])})}parse(e,r){return this._client.responses.create(e,r)._thenUnwrap(n=>dwe(n,e))}stream(e,r){return iZ.createResponse(this._client,e,r)}cancel(e,r){return this._client.post(ae`/responses/${e}/cancel`,r)}compact(e,r){return this._client.post("/responses/compact",{body:e,...r})}};Xg.InputItems=t2;Xg.InputTokens=r2;var n2=class extends he{create(e,r,n){return this._client.post(ae`/uploads/${e}/parts`,Eu({body:r,...n},this._client))}};var Fy=class extends he{constructor(){super(...arguments),this.parts=new n2(this._client)}create(e,r){return this._client.post("/uploads",{body:e,...r})}cancel(e,r){return this._client.post(ae`/uploads/${e}/cancel`,r)}complete(e,r,n){return this._client.post(ae`/uploads/${e}/complete`,{body:r,...n})}};Fy.Parts=n2;var TAt=async t=>{let e=await Promise.allSettled(t),r=e.filter(o=>o.status==="rejected");if(r.length){for(let o of r)console.error(o.reason);throw new Error(`${r.length} promise(s) failed - see the above errors`)}let n=[];for(let o of e)o.status==="fulfilled"&&n.push(o.value);return n};var i2=class extends he{create(e,r,n){return this._client.post(ae`/vector_stores/${e}/file_batches`,{body:r,...n,headers:Re([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,r,n){let{vector_store_id:o}=r;return this._client.get(ae`/vector_stores/${o}/file_batches/${e}`,{...n,headers:Re([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}cancel(e,r,n){let{vector_store_id:o}=r;return this._client.post(ae`/vector_stores/${o}/file_batches/${e}/cancel`,{...n,headers:Re([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}async createAndPoll(e,r,n){let o=await this.create(e,r);return await this.poll(e,o.id,n)}listFiles(e,r,n){let{vector_store_id:o,...s}=r;return this._client.getAPIList(ae`/vector_stores/${o}/file_batches/${e}/files`,mr,{query:s,...n,headers:Re([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}async poll(e,r,n){let o=Re([n?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":n?.pollIntervalMs?.toString()??void 0}]);for(;;){let{data:s,response:a}=await this.retrieve(r,{vector_store_id:e},{...n,headers:o}).withResponse();switch(s.status){case"in_progress":let c=5e3;if(n?.pollIntervalMs)c=n.pollIntervalMs;else{let l=a.headers.get("openai-poll-after-ms");if(l){let u=parseInt(l);isNaN(u)||(c=u)}}await mh(c);break;case"failed":case"cancelled":case"completed":return s}}}async uploadAndPoll(e,{files:r,fileIds:n=[]},o){if(r==null||r.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");let s=o?.maxConcurrency??5,a=Math.min(s,r.length),c=this._client,l=r.values(),u=[...n];async function d(p){for(let h of p){let _=await c.files.create({file:h,purpose:"assistants"},o);u.push(_.id)}}let f=Array(a).fill(l).map(d);return await TAt(f),await this.createAndPoll(e,{file_ids:u})}};var o2=class extends he{create(e,r,n){return this._client.post(ae`/vector_stores/${e}/files`,{body:r,...n,headers:Re([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,r,n){let{vector_store_id:o}=r;return this._client.get(ae`/vector_stores/${o}/files/${e}`,{...n,headers:Re([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,r,n){let{vector_store_id:o,...s}=r;return this._client.post(ae`/vector_stores/${o}/files/${e}`,{body:s,...n,headers:Re([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}list(e,r={},n){return this._client.getAPIList(ae`/vector_stores/${e}/files`,mr,{query:r,...n,headers:Re([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,r,n){let{vector_store_id:o}=r;return this._client.delete(ae`/vector_stores/${o}/files/${e}`,{...n,headers:Re([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}async createAndPoll(e,r,n){let o=await this.create(e,r,n);return await this.poll(e,o.id,n)}async poll(e,r,n){let o=Re([n?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":n?.pollIntervalMs?.toString()??void 0}]);for(;;){let s=await this.retrieve(r,{vector_store_id:e},{...n,headers:o}).withResponse(),a=s.data;switch(a.status){case"in_progress":let c=5e3;if(n?.pollIntervalMs)c=n.pollIntervalMs;else{let l=s.response.headers.get("openai-poll-after-ms");if(l){let u=parseInt(l);isNaN(u)||(c=u)}}await mh(c);break;case"failed":case"completed":return a}}}async upload(e,r,n){let o=await this._client.files.create({file:r,purpose:"assistants"},n);return this.create(e,{file_id:o.id},n)}async uploadAndPoll(e,r,n){let o=await this.upload(e,r,n);return await this.poll(e,o.id,n)}content(e,r,n){let{vector_store_id:o}=r;return this._client.getAPIList(ae`/vector_stores/${o}/files/${e}/content`,vh,{...n,headers:Re([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}};var e_=class extends he{constructor(){super(...arguments),this.files=new o2(this._client),this.fileBatches=new i2(this._client)}create(e,r){return this._client.post("/vector_stores",{body:e,...r,headers:Re([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,r){return this._client.get(ae`/vector_stores/${e}`,{...r,headers:Re([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,r,n){return this._client.post(ae`/vector_stores/${e}`,{body:r,...n,headers:Re([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}list(e={},r){return this._client.getAPIList("/vector_stores",mr,{query:e,...r,headers:Re([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,r){return this._client.delete(ae`/vector_stores/${e}`,{...r,headers:Re([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}search(e,r,n){return this._client.getAPIList(ae`/vector_stores/${e}/search`,vh,{body:r,method:"post",...n,headers:Re([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}};e_.Files=o2;e_.FileBatches=i2;var tA=class extends he{create(e,r){return this._client.post("/videos",Wxe({body:e,...r},this._client))}retrieve(e,r){return this._client.get(ae`/videos/${e}`,r)}list(e={},r){return this._client.getAPIList("/videos",Wg,{query:e,...r})}delete(e,r){return this._client.delete(ae`/videos/${e}`,r)}downloadContent(e,r={},n){return this._client.get(ae`/videos/${e}/content`,{query:r,...n,headers:Re([{Accept:"application/binary"},n?.headers]),__binaryResponse:!0})}remix(e,r,n){return this._client.post(ae`/videos/${e}/remix`,Wxe({body:r,...n},this._client))}};var s2,SAt,oZ,rA=class extends he{constructor(){super(...arguments),s2.add(this)}async unwrap(e,r,n=this._client.webhookSecret,o=300){return await this.verifySignature(e,r,n,o),JSON.parse(e)}async verifySignature(e,r,n=this._client.webhookSecret,o=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");Z(this,s2,"m",SAt).call(this,n);let s=Re([r]).values,a=Z(this,s2,"m",oZ).call(this,s,"webhook-signature"),c=Z(this,s2,"m",oZ).call(this,s,"webhook-timestamp"),l=Z(this,s2,"m",oZ).call(this,s,"webhook-id"),u=parseInt(c,10);if(isNaN(u))throw new hh("Invalid webhook timestamp format");let d=Math.floor(Date.now()/1e3);if(d-u>o)throw new hh("Webhook timestamp is too old");if(u>d+o)throw new hh("Webhook timestamp is too new");let f=a.split(" ").map(g=>g.startsWith("v1,")?g.substring(3):g),p=n.startsWith("whsec_")?Buffer.from(n.replace("whsec_",""),"base64"):Buffer.from(n,"utf-8"),h=l?`${l}.${c}.${e}`:`${c}.${e}`,_=await crypto.subtle.importKey("raw",p,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(let g of f)try{let v=Buffer.from(g,"base64");if(await crypto.subtle.verify("HMAC",_,v,new TextEncoder().encode(h)))return}catch{continue}throw new hh("The given webhook signature does not match the expected signature")}};s2=new WeakSet,SAt=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},oZ=function(e,r){if(!e)throw new Error("Headers are required");let n=e.get(r);if(n==null)throw new Error(`Missing required header: ${r}`);return n};var fwe,pwe,sZ,bAt,Zt=class{constructor({baseURL:e=My("OPENAI_BASE_URL"),apiKey:r=My("OPENAI_API_KEY"),organization:n=My("OPENAI_ORG_ID")??null,project:o=My("OPENAI_PROJECT_ID")??null,webhookSecret:s=My("OPENAI_WEBHOOK_SECRET")??null,...a}={}){if(fwe.add(this),sZ.set(this,void 0),this.completions=new HC(this),this.chat=new Py(this),this.embeddings=new zC(this),this.files=new KC(this),this.images=new JC(this),this.audio=new yh(this),this.moderations=new eA(this),this.models=new XC(this),this.fineTuning=new _0(this),this.graders=new Uy(this),this.vectorStores=new e_(this),this.webhooks=new rA(this),this.beta=new g0(this),this.batches=new FC(this),this.uploads=new Fy(this),this.responses=new Xg(this),this.realtime=new Jg(this),this.conversations=new ky(this),this.evals=new Dy(this),this.containers=new Ly(this),this.videos=new tA(this),r===void 0)throw new ze("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");let c={apiKey:r,organization:n,project:o,webhookSecret:s,...a,baseURL:e||"https://api.openai.com/v1"};if(!c.dangerouslyAllowBrowser&&RCt())throw new ze(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=c.baseURL,this.timeout=c.timeout??pwe.DEFAULT_TIMEOUT,this.logger=c.logger??console;let l="warn";this.logLevel=l,this.logLevel=Bxe(c.logLevel,"ClientOptions.logLevel",this)??Bxe(My("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??l,this.fetchOptions=c.fetchOptions,this.maxRetries=c.maxRetries??2,this.fetch=c.fetch??MCt(),Tt(this,sZ,LCt,"f"),this._options=c,this.apiKey=typeof r=="string"?r:"Missing Key",this.organization=n,this.project=o,this.webhookSecret=s}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:r}){}async authHeaders(e){return Re([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return Fxe(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${xy}`}defaultIdempotencyKey(){return`stainless-node-retry-${Pxe()}`}makeStatusError(e,r,n,o){return Qo.generate(e,r,n,o)}async _callApiKey(){let e=this._options.apiKey;if(typeof e!="function")return!1;let r;try{r=await e()}catch(n){throw n instanceof ze?n:new ze(`Failed to get token from 'apiKey' function: ${n.message}`,{cause:n})}if(typeof r!="string"||!r)throw new ze(`Expected 'apiKey' function argument to return a string but it returned ${r}`);return this.apiKey=r,!0}buildURL(e,r,n){let o=!Z(this,fwe,"m",bAt).call(this)&&n||this.baseURL,s=SCt(e)?new URL(e):new URL(o+(o.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),a=this.defaultQuery();return bCt(a)||(r={...a,...r}),typeof r=="object"&&r&&!Array.isArray(r)&&(s.search=this.stringifyQuery(r)),s.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:r,options:n}){}get(e,r){return this.methodRequest("get",e,r)}post(e,r){return this.methodRequest("post",e,r)}patch(e,r){return this.methodRequest("patch",e,r)}put(e,r){return this.methodRequest("put",e,r)}delete(e,r){return this.methodRequest("delete",e,r)}methodRequest(e,r,n){return this.request(Promise.resolve(n).then(o=>({method:e,path:r,...o})))}request(e,r=null){return new kC(this,this.makeRequest(e,r,void 0))}async makeRequest(e,r,n){let o=await e,s=o.maxRetries??this.maxRetries;r==null&&(r=s),await this.prepareOptions(o);let{req:a,url:c,timeout:l}=await this.buildRequest(o,{retryCount:s-r});await this.prepareRequest(a,{url:c,options:o});let u="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),d=n===void 0?"":`, retryOf: ${n}`,f=Date.now();if(go(this).debug(`[${u}] sending request`,zg({retryOfRequestLogID:n,method:o.method,url:c,options:o,headers:a.headers})),o.signal?.aborted)throw new Uo;let p=new AbortController,h=await this.fetchWithTimeout(c,a,l,p).catch(mD),_=Date.now();if(h instanceof globalThis.Error){let E=`retrying, ${r} attempts remaining`;if(o.signal?.aborted)throw new Uo;let y=hD(h)||/timed? ?out/i.test(String(h)+("cause"in h?String(h.cause):""));if(r)return go(this).info(`[${u}] connection ${y?"timed out":"failed"} - ${E}`),go(this).debug(`[${u}] connection ${y?"timed out":"failed"} (${E})`,zg({retryOfRequestLogID:n,url:c,durationMs:_-f,message:h.message})),this.retryRequest(o,r,n??u);throw go(this).info(`[${u}] connection ${y?"timed out":"failed"} - error; no more retries left`),go(this).debug(`[${u}] connection ${y?"timed out":"failed"} (error; no more retries left)`,zg({retryOfRequestLogID:n,url:c,durationMs:_-f,message:h.message})),y?new Ay:new Cy({cause:h})}let g=[...h.headers.entries()].filter(([E])=>E==="x-request-id").map(([E,y])=>", "+E+": "+JSON.stringify(y)).join(""),v=`[${u}${d}${g}] ${a.method} ${c} ${h.ok?"succeeded":"failed"} with status ${h.status} in ${_-f}ms`;if(!h.ok){let E=await this.shouldRetry(h);if(r&&E){let A=`retrying, ${r} attempts remaining`;return await NCt(h.body),go(this).info(`${v} - ${A}`),go(this).debug(`[${u}] response error (${A})`,zg({retryOfRequestLogID:n,url:h.url,status:h.status,headers:h.headers,durationMs:_-f})),this.retryRequest(o,r,n??u,h.headers)}let y=E?"error; no more retries left":"error; not retryable";go(this).info(`${v} - ${y}`);let S=await h.text().catch(A=>mD(A).message),b=xCt(S),w=b?void 0:S;throw go(this).debug(`[${u}] response error (${y})`,zg({retryOfRequestLogID:n,url:h.url,status:h.status,headers:h.headers,message:w,durationMs:Date.now()-f})),this.makeStatusError(h.status,b,w,h.headers)}return go(this).info(v),go(this).debug(`[${u}] response start`,zg({retryOfRequestLogID:n,url:h.url,status:h.status,headers:h.headers,durationMs:_-f})),{response:h,options:o,controller:p,requestLogID:u,retryOfRequestLogID:n,startTime:f}}getAPIList(e,r,n){return this.requestAPIList(r,{method:"get",path:e,...n})}requestAPIList(e,r){let n=this.makeRequest(r,null,void 0);return new TD(this,n,e)}async fetchWithTimeout(e,r,n,o){let{signal:s,method:a,...c}=r||{};s&&s.addEventListener("abort",()=>o.abort());let l=setTimeout(()=>o.abort(),n),u=globalThis.ReadableStream&&c.body instanceof globalThis.ReadableStream||typeof c.body=="object"&&c.body!==null&&Symbol.asyncIterator in c.body,d={signal:o.signal,...u?{duplex:"half"}:{},method:"GET",...c};a&&(d.method=a.toUpperCase());try{return await this.fetch.call(void 0,e,d)}finally{clearTimeout(l)}}async shouldRetry(e){let r=e.headers.get("x-should-retry");return r==="true"?!0:r==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,r,n,o){let s,a=o?.get("retry-after-ms");if(a){let l=parseFloat(a);Number.isNaN(l)||(s=l)}let c=o?.get("retry-after");if(c&&!s){let l=parseFloat(c);Number.isNaN(l)?s=Date.parse(c)-Date.now():s=l*1e3}if(!(s&&0<=s&&s<60*1e3)){let l=e.maxRetries??this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(r,l)}return await mh(s),this.makeRequest(e,r-1,n)}calculateDefaultRetryTimeoutMillis(e,r){let s=r-e,a=Math.min(.5*Math.pow(2,s),8),c=1-Math.random()*.25;return a*c*1e3}async buildRequest(e,{retryCount:r=0}={}){let n={...e},{method:o,path:s,query:a,defaultBaseURL:c}=n,l=this.buildURL(s,a,c);"timeout"in n&&ACt("timeout",n.timeout),n.timeout=n.timeout??this.timeout;let{bodyHeaders:u,body:d}=this.buildBody({options:n}),f=await this.buildHeaders({options:e,method:o,bodyHeaders:u,retryCount:r});return{req:{method:o,headers:f,...n.signal&&{signal:n.signal},...globalThis.ReadableStream&&d instanceof globalThis.ReadableStream&&{duplex:"half"},...d&&{body:d},...this.fetchOptions??{},...n.fetchOptions??{}},url:l,timeout:n.timeout}}async buildHeaders({options:e,method:r,bodyHeaders:n,retryCount:o}){let s={};this.idempotencyHeader&&r!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=e.idempotencyKey);let a=Re([s,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(o),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...OCt(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,n,e.headers]);return this.validateHeaders(a),a.values}buildBody({options:{body:e,headers:r}}){if(!e)return{bodyHeaders:void 0,body:void 0};let n=Re([r]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&n.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:MQ(e)}:Z(this,sZ,"f").call(this,{body:e,headers:n})}};pwe=Zt,sZ=new WeakMap,fwe=new WeakSet,bAt=function(){return this.baseURL!=="https://api.openai.com/v1"};Zt.OpenAI=pwe;Zt.DEFAULT_TIMEOUT=6e5;Zt.OpenAIError=ze;Zt.APIError=Qo;Zt.APIConnectionError=Cy;Zt.APIConnectionTimeoutError=Ay;Zt.APIUserAbortError=Uo;Zt.NotFoundError=EO;Zt.ConflictError=TO;Zt.RateLimitError=bO;Zt.BadRequestError=_O;Zt.AuthenticationError=vO;Zt.InternalServerError=CO;Zt.PermissionDeniedError=yO;Zt.UnprocessableEntityError=SO;Zt.InvalidWebhookSignatureError=hh;Zt.toFile=BQ;Zt.Completions=HC;Zt.Chat=Py;Zt.Embeddings=zC;Zt.Files=KC;Zt.Images=JC;Zt.Audio=yh;Zt.Moderations=eA;Zt.Models=XC;Zt.FineTuning=_0;Zt.Graders=Uy;Zt.VectorStores=e_;Zt.Webhooks=rA;Zt.Beta=g0;Zt.Batches=FC;Zt.Uploads=Fy;Zt.Responses=Xg;Zt.Realtime=Jg;Zt.Conversations=ky;Zt.Evals=Dy;Zt.Containers=Ly;Zt.Videos=tA;var jy=yt(require("vscode"));a2();gu();_u();bi();bi();var hwe=yt(O$()),kD=yt(require("vscode")),xpn=require("vscode");bi();var wpn=yt(require("vscode"));var DD=yt(require("vscode"));bi();Ewe();var nA=yt(require("vscode"));a2();_u();bi();var MAt=yt(require("vscode"));var cZ=yt(require("vscode"));aZ();bi();OAt();a2();var lZ=yt(require("vscode"));Ewe();var uZ=yt(require("vscode"));var coi=1800*1e3,loi=600*1e3,uoi=120*1e3;var bwe=yt(require("vscode"));gu();_u();bi();var Swe=yt(require("vscode"));gu();_u();bi();var c2=yt(require("vscode"));a2();gu();_u();bi();var Npn=yt(require("vscode"));gu();bi();var Cwe=yt(require("vscode"));gu();_u();bi();gu();Awe();var FAt=yt(require("vscode")),qD=class t{static outputChannel;static initialize(e="CHP-Completion"){t.outputChannel=FAt.window.createOutputChannel(e,{log:!0})}static trace(e,...r){t.outputChannel&&t.outputChannel.trace(e,...r)}static debug(e,...r){t.outputChannel&&t.outputChannel.debug(e,...r)}static info(e,...r){t.outputChannel&&t.outputChannel.info(e,...r)}static warn(e,...r){t.outputChannel&&t.outputChannel.warn(e,...r)}static error(e,...r){t.outputChannel&&t.outputChannel.error(e,...r)}static dispose(){t.outputChannel&&t.outputChannel.dispose()}};_u();var pZ=yt(require("vscode"));Gg();Awe();_u();UD();bi();UD();bi();var xwe=Object.freeze({status:"aborted"});function se(t,e,r){function n(c,l){var u;Object.defineProperty(c,"_zod",{value:c._zod??{},enumerable:!1}),(u=c._zod).traits??(u.traits=new Set),c._zod.traits.add(t),e(c,l);for(let d in a.prototype)d in c||Object.defineProperty(c,d,{value:a.prototype[d].bind(c)});c._zod.constr=a,c._zod.def=l}let o=r?.Parent??Object;class s extends o{}Object.defineProperty(s,"name",{value:t});function a(c){var l;let u=r?.Parent?new s:this;n(u,c),(l=u._zod).deferred??(l.deferred=[]);for(let d of u._zod.deferred)d();return u}return Object.defineProperty(a,"init",{value:n}),Object.defineProperty(a,Symbol.hasInstance,{value:c=>r?.Parent&&c instanceof r.Parent?!0:c?._zod?.traits?.has(t)}),Object.defineProperty(a,"name",{value:t}),a}var kpn=Symbol("zod_brand"),t_=class extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}},hZ={};function Su(t){return t&&Object.assign(hZ,t),hZ}var dn={};Xs(dn,{BIGINT_FORMAT_RANGES:()=>BAt,Class:()=>Iwe,NUMBER_FORMAT_RANGES:()=>Dwe,aborted:()=>sA,allowsEval:()=>Nwe,assert:()=>jpn,assertEqual:()=>Dpn,assertIs:()=>qpn,assertNever:()=>Fpn,assertNotEqual:()=>Upn,assignProp:()=>Mwe,cached:()=>jD,captureStackTrace:()=>gZ,cleanEnum:()=>Xpn,cleanRegex:()=>$D,clone:()=>v0,createTransparentProxy:()=>zpn,defineLazy:()=>Jn,esc:()=>oA,escapeRegex:()=>$y,extend:()=>Ypn,finalizeIssue:()=>y0,floatSafeRemainder:()=>Owe,getElementAtPath:()=>Bpn,getEnumValues:()=>Pwe,getLengthableOrigin:()=>VD,getParsedType:()=>Gpn,getSizableOrigin:()=>$At,isObject:()=>l2,isPlainObject:()=>u2,issue:()=>Uwe,joinValues:()=>mZ,jsonStringifyReplacer:()=>Rwe,merge:()=>Qpn,normalizeParams:()=>At,nullish:()=>BD,numKeys:()=>Hpn,omit:()=>Kpn,optionalKeys:()=>kwe,partial:()=>Zpn,pick:()=>Wpn,prefixIssues:()=>Th,primitiveTypes:()=>jAt,promiseAllObject:()=>$pn,propertyKeyTypes:()=>Lwe,randomString:()=>Vpn,required:()=>Jpn,stringifyPrimitive:()=>_Z,unwrapMessage:()=>FD});function Dpn(t){return t}function Upn(t){return t}function qpn(t){}function Fpn(t){throw new Error}function jpn(t){}function Pwe(t){let e=Object.values(t).filter(n=>typeof n=="number");return Object.entries(t).filter(([n,o])=>e.indexOf(+n)===-1).map(([n,o])=>o)}function mZ(t,e="|"){return t.map(r=>_Z(r)).join(e)}function Rwe(t,e){return typeof e=="bigint"?e.toString():e}function jD(t){return{get value(){{let r=t();return Object.defineProperty(this,"value",{value:r}),r}throw new Error("cached value already set")}}}function BD(t){return t==null}function $D(t){let e=t.startsWith("^")?1:0,r=t.endsWith("$")?t.length-1:t.length;return t.slice(e,r)}function Owe(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,o=r>n?r:n,s=Number.parseInt(t.toFixed(o).replace(".","")),a=Number.parseInt(e.toFixed(o).replace(".",""));return s%a/10**o}function Jn(t,e,r){Object.defineProperty(t,e,{get(){{let o=r();return t[e]=o,o}throw new Error("cached value already set")},set(o){Object.defineProperty(t,e,{value:o})},configurable:!0})}function Mwe(t,e,r){Object.defineProperty(t,e,{value:r,writable:!0,enumerable:!0,configurable:!0})}function Bpn(t,e){return e?e.reduce((r,n)=>r?.[n],t):t}function $pn(t){let e=Object.keys(t),r=e.map(n=>t[n]);return Promise.all(r).then(n=>{let o={};for(let s=0;s<e.length;s++)o[e[s]]=n[s];return o})}function Vpn(t=10){let e="abcdefghijklmnopqrstuvwxyz",r="";for(let n=0;n<t;n++)r+=e[Math.floor(Math.random()*e.length)];return r}function oA(t){return JSON.stringify(t)}var gZ=Error.captureStackTrace?Error.captureStackTrace:(...t)=>{};function l2(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}var Nwe=jD(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{let t=Function;return new t(""),!0}catch{return!1}});function u2(t){if(l2(t)===!1)return!1;let e=t.constructor;if(e===void 0)return!0;let r=e.prototype;return!(l2(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}function Hpn(t){let e=0;for(let r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}var Gpn=t=>{let e=typeof t;switch(e){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(t)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":return Array.isArray(t)?"array":t===null?"null":t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?"promise":typeof Map<"u"&&t instanceof Map?"map":typeof Set<"u"&&t instanceof Set?"set":typeof Date<"u"&&t instanceof Date?"date":typeof File<"u"&&t instanceof File?"file":"object";default:throw new Error(`Unknown data type: ${e}`)}},Lwe=new Set(["string","number","symbol"]),jAt=new Set(["string","number","bigint","boolean","symbol","undefined"]);function $y(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function v0(t,e,r){let n=new t._zod.constr(e??t._zod.def);return(!e||r?.parent)&&(n._zod.parent=t),n}function At(t){let e=t;if(!e)return{};if(typeof e=="string")return{error:()=>e};if(e?.message!==void 0){if(e?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function zpn(t){let e;return new Proxy({},{get(r,n,o){return e??(e=t()),Reflect.get(e,n,o)},set(r,n,o,s){return e??(e=t()),Reflect.set(e,n,o,s)},has(r,n){return e??(e=t()),Reflect.has(e,n)},deleteProperty(r,n){return e??(e=t()),Reflect.deleteProperty(e,n)},ownKeys(r){return e??(e=t()),Reflect.ownKeys(e)},getOwnPropertyDescriptor(r,n){return e??(e=t()),Reflect.getOwnPropertyDescriptor(e,n)},defineProperty(r,n,o){return e??(e=t()),Reflect.defineProperty(e,n,o)}})}function _Z(t){return typeof t=="bigint"?t.toString()+"n":typeof t=="string"?`"${t}"`:`${t}`}function kwe(t){return Object.keys(t).filter(e=>t[e]._zod.optin==="optional"&&t[e]._zod.optout==="optional")}var Dwe={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},BAt={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function Wpn(t,e){let r={},n=t._zod.def;for(let o in e){if(!(o in n.shape))throw new Error(`Unrecognized key: "${o}"`);e[o]&&(r[o]=n.shape[o])}return v0(t,{...t._zod.def,shape:r,checks:[]})}function Kpn(t,e){let r={...t._zod.def.shape},n=t._zod.def;for(let o in e){if(!(o in n.shape))throw new Error(`Unrecognized key: "${o}"`);e[o]&&delete r[o]}return v0(t,{...t._zod.def,shape:r,checks:[]})}function Ypn(t,e){if(!u2(e))throw new Error("Invalid input to extend: expected a plain object");let r={...t._zod.def,get shape(){let n={...t._zod.def.shape,...e};return Mwe(this,"shape",n),n},checks:[]};return v0(t,r)}function Qpn(t,e){return v0(t,{...t._zod.def,get shape(){let r={...t._zod.def.shape,...e._zod.def.shape};return Mwe(this,"shape",r),r},catchall:e._zod.def.catchall,checks:[]})}function Zpn(t,e,r){let n=e._zod.def.shape,o={...n};if(r)for(let s in r){if(!(s in n))throw new Error(`Unrecognized key: "${s}"`);r[s]&&(o[s]=t?new t({type:"optional",innerType:n[s]}):n[s])}else for(let s in n)o[s]=t?new t({type:"optional",innerType:n[s]}):n[s];return v0(e,{...e._zod.def,shape:o,checks:[]})}function Jpn(t,e,r){let n=e._zod.def.shape,o={...n};if(r)for(let s in r){if(!(s in o))throw new Error(`Unrecognized key: "${s}"`);r[s]&&(o[s]=new t({type:"nonoptional",innerType:n[s]}))}else for(let s in n)o[s]=new t({type:"nonoptional",innerType:n[s]});return v0(e,{...e._zod.def,shape:o,checks:[]})}function sA(t,e=0){for(let r=e;r<t.issues.length;r++)if(t.issues[r]?.continue!==!0)return!0;return!1}function Th(t,e){return e.map(r=>{var n;return(n=r).path??(n.path=[]),r.path.unshift(t),r})}function FD(t){return typeof t=="string"?t:t?.message}function y0(t,e,r){let n={...t,path:t.path??[]};if(!t.message){let o=FD(t.inst?._zod.def?.error?.(t))??FD(e?.error?.(t))??FD(r.customError?.(t))??FD(r.localeError?.(t))??"Invalid input";n.message=o}return delete n.inst,delete n.continue,e?.reportInput||delete n.input,n}function $At(t){return t instanceof Set?"set":t instanceof Map?"map":t instanceof File?"file":"unknown"}function VD(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function Uwe(...t){let[e,r,n]=t;return typeof e=="string"?{message:e,code:"custom",input:r,inst:n}:{...e}}function Xpn(t){return Object.entries(t).filter(([e,r])=>Number.isNaN(Number.parseInt(e,10))).map(e=>e[1])}var Iwe=class{constructor(...e){}};var VAt=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),Object.defineProperty(t,"message",{get(){return JSON.stringify(e,Rwe,2)},enumerable:!0}),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},vZ=se("$ZodError",VAt),qwe=se("$ZodError",VAt,{Parent:Error});function Fwe(t,e=r=>r.message){let r={},n=[];for(let o of t.issues)o.path.length>0?(r[o.path[0]]=r[o.path[0]]||[],r[o.path[0]].push(e(o))):n.push(e(o));return{formErrors:n,fieldErrors:r}}function jwe(t,e){let r=e||function(s){return s.message},n={_errors:[]},o=s=>{for(let a of s.issues)if(a.code==="invalid_union"&&a.errors.length)a.errors.map(c=>o({issues:c}));else if(a.code==="invalid_key")o({issues:a.issues});else if(a.code==="invalid_element")o({issues:a.issues});else if(a.path.length===0)n._errors.push(r(a));else{let c=n,l=0;for(;l<a.path.length;){let u=a.path[l];l===a.path.length-1?(c[u]=c[u]||{_errors:[]},c[u]._errors.push(r(a))):c[u]=c[u]||{_errors:[]},c=c[u],l++}}};return o(t),n}var HAt=t=>(e,r,n,o)=>{let s=n?Object.assign(n,{async:!1}):{async:!1},a=e._zod.run({value:r,issues:[]},s);if(a instanceof Promise)throw new t_;if(a.issues.length){let c=new(o?.Err??t)(a.issues.map(l=>y0(l,s,Su())));throw gZ(c,o?.callee),c}return a.value};var GAt=t=>async(e,r,n,o)=>{let s=n?Object.assign(n,{async:!0}):{async:!0},a=e._zod.run({value:r,issues:[]},s);if(a instanceof Promise&&(a=await a),a.issues.length){let c=new(o?.Err??t)(a.issues.map(l=>y0(l,s,Su())));throw gZ(c,o?.callee),c}return a.value};var Bwe=t=>(e,r,n)=>{let o=n?{...n,async:!1}:{async:!1},s=e._zod.run({value:r,issues:[]},o);if(s instanceof Promise)throw new t_;return s.issues.length?{success:!1,error:new(t??vZ)(s.issues.map(a=>y0(a,o,Su())))}:{success:!0,data:s.value}},zAt=Bwe(qwe),$we=t=>async(e,r,n)=>{let o=n?Object.assign(n,{async:!0}):{async:!0},s=e._zod.run({value:r,issues:[]},o);return s instanceof Promise&&(s=await s),s.issues.length?{success:!1,error:new t(s.issues.map(a=>y0(a,o,Su())))}:{success:!0,data:s.value}},WAt=$we(qwe);var KAt=/^[cC][^\s-]{8,}$/,YAt=/^[0-9a-z]+$/,QAt=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,ZAt=/^[0-9a-vA-V]{20}$/,JAt=/^[A-Za-z0-9]{27}$/,XAt=/^[a-zA-Z0-9_-]{21}$/,ext=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/;var txt=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Vwe=t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/;var rxt=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/;var thn="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function nxt(){return new RegExp(thn,"u")}var ixt=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,oxt=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,sxt=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,axt=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,cxt=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,Hwe=/^[A-Za-z0-9_-]*$/,lxt=/^([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+$/;var uxt=/^\+(?:[0-9]){6,14}[0-9]$/,dxt="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",fxt=new RegExp(`^${dxt}$`);function pxt(t){let e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${e}`:t.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${t.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function hxt(t){return new RegExp(`^${pxt(t)}$`)}function mxt(t){let e=pxt({precision:t.precision}),r=["Z"];t.local&&r.push(""),t.offset&&r.push("([+-]\\d{2}:\\d{2})");let n=`${e}(?:${r.join("|")})`;return new RegExp(`^${dxt}T(?:${n})$`)}var gxt=t=>{let e=t?`[\\s\\S]{${t?.minimum??0},${t?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},_xt=/^\d+n?$/,vxt=/^\d+$/,yxt=/^-?\d+(?:\.\d+)?/i,Ext=/true|false/i,Txt=/null/i;var Sxt=/^[^A-Z]*$/,bxt=/^[^a-z]*$/;var Oa=se("$ZodCheck",(t,e)=>{var r;t._zod??(t._zod={}),t._zod.def=e,(r=t._zod).onattach??(r.onattach=[])}),Cxt={number:"number",bigint:"bigint",object:"date"},Gwe=se("$ZodCheckLessThan",(t,e)=>{Oa.init(t,e);let r=Cxt[typeof e.value];t._zod.onattach.push(n=>{let o=n._zod.bag,s=(e.inclusive?o.maximum:o.exclusiveMaximum)??Number.POSITIVE_INFINITY;e.value<s&&(e.inclusive?o.maximum=e.value:o.exclusiveMaximum=e.value)}),t._zod.check=n=>{(e.inclusive?n.value<=e.value:n.value<e.value)||n.issues.push({origin:r,code:"too_big",maximum:e.value,input:n.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),zwe=se("$ZodCheckGreaterThan",(t,e)=>{Oa.init(t,e);let r=Cxt[typeof e.value];t._zod.onattach.push(n=>{let o=n._zod.bag,s=(e.inclusive?o.minimum:o.exclusiveMinimum)??Number.NEGATIVE_INFINITY;e.value>s&&(e.inclusive?o.minimum=e.value:o.exclusiveMinimum=e.value)}),t._zod.check=n=>{(e.inclusive?n.value>=e.value:n.value>e.value)||n.issues.push({origin:r,code:"too_small",minimum:e.value,input:n.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),Axt=se("$ZodCheckMultipleOf",(t,e)=>{Oa.init(t,e),t._zod.onattach.push(r=>{var n;(n=r._zod.bag).multipleOf??(n.multipleOf=e.value)}),t._zod.check=r=>{if(typeof r.value!=typeof e.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof r.value=="bigint"?r.value%e.value===BigInt(0):Owe(r.value,e.value)===0)||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:e.value,input:r.value,inst:t,continue:!e.abort})}}),xxt=se("$ZodCheckNumberFormat",(t,e)=>{Oa.init(t,e),e.format=e.format||"float64";let r=e.format?.includes("int"),n=r?"int":"number",[o,s]=Dwe[e.format];t._zod.onattach.push(a=>{let c=a._zod.bag;c.format=e.format,c.minimum=o,c.maximum=s,r&&(c.pattern=vxt)}),t._zod.check=a=>{let c=a.value;if(r){if(!Number.isInteger(c)){a.issues.push({expected:n,format:e.format,code:"invalid_type",input:c,inst:t});return}if(!Number.isSafeInteger(c)){c>0?a.issues.push({input:c,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:n,continue:!e.abort}):a.issues.push({input:c,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:n,continue:!e.abort});return}}c<o&&a.issues.push({origin:"number",input:c,code:"too_small",minimum:o,inclusive:!0,inst:t,continue:!e.abort}),c>s&&a.issues.push({origin:"number",input:c,code:"too_big",maximum:s,inst:t})}});var wxt=se("$ZodCheckMaxLength",(t,e)=>{var r;Oa.init(t,e),(r=t._zod.def).when??(r.when=n=>{let o=n.value;return!BD(o)&&o.length!==void 0}),t._zod.onattach.push(n=>{let o=n._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<o&&(n._zod.bag.maximum=e.maximum)}),t._zod.check=n=>{let o=n.value;if(o.length<=e.maximum)return;let a=VD(o);n.issues.push({origin:a,code:"too_big",maximum:e.maximum,inclusive:!0,input:o,inst:t,continue:!e.abort})}}),Ixt=se("$ZodCheckMinLength",(t,e)=>{var r;Oa.init(t,e),(r=t._zod.def).when??(r.when=n=>{let o=n.value;return!BD(o)&&o.length!==void 0}),t._zod.onattach.push(n=>{let o=n._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>o&&(n._zod.bag.minimum=e.minimum)}),t._zod.check=n=>{let o=n.value;if(o.length>=e.minimum)return;let a=VD(o);n.issues.push({origin:a,code:"too_small",minimum:e.minimum,inclusive:!0,input:o,inst:t,continue:!e.abort})}}),Pxt=se("$ZodCheckLengthEquals",(t,e)=>{var r;Oa.init(t,e),(r=t._zod.def).when??(r.when=n=>{let o=n.value;return!BD(o)&&o.length!==void 0}),t._zod.onattach.push(n=>{let o=n._zod.bag;o.minimum=e.length,o.maximum=e.length,o.length=e.length}),t._zod.check=n=>{let o=n.value,s=o.length;if(s===e.length)return;let a=VD(o),c=s>e.length;n.issues.push({origin:a,...c?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:n.value,inst:t,continue:!e.abort})}}),HD=se("$ZodCheckStringFormat",(t,e)=>{var r,n;Oa.init(t,e),t._zod.onattach.push(o=>{let s=o._zod.bag;s.format=e.format,e.pattern&&(s.patterns??(s.patterns=new Set),s.patterns.add(e.pattern))}),e.pattern?(r=t._zod).check??(r.check=o=>{e.pattern.lastIndex=0,!e.pattern.test(o.value)&&o.issues.push({origin:"string",code:"invalid_format",format:e.format,input:o.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:t,continue:!e.abort})}):(n=t._zod).check??(n.check=()=>{})}),Rxt=se("$ZodCheckRegex",(t,e)=>{HD.init(t,e),t._zod.check=r=>{e.pattern.lastIndex=0,!e.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:e.pattern.toString(),inst:t,continue:!e.abort})}}),Oxt=se("$ZodCheckLowerCase",(t,e)=>{e.pattern??(e.pattern=Sxt),HD.init(t,e)}),Mxt=se("$ZodCheckUpperCase",(t,e)=>{e.pattern??(e.pattern=bxt),HD.init(t,e)}),Nxt=se("$ZodCheckIncludes",(t,e)=>{Oa.init(t,e);let r=$y(e.includes),n=new RegExp(typeof e.position=="number"?`^.{${e.position}}${r}`:r);e.pattern=n,t._zod.onattach.push(o=>{let s=o._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),t._zod.check=o=>{o.value.includes(e.includes,e.position)||o.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:o.value,inst:t,continue:!e.abort})}}),Lxt=se("$ZodCheckStartsWith",(t,e)=>{Oa.init(t,e);let r=new RegExp(`^${$y(e.prefix)}.*`);e.pattern??(e.pattern=r),t._zod.onattach.push(n=>{let o=n._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(r)}),t._zod.check=n=>{n.value.startsWith(e.prefix)||n.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:n.value,inst:t,continue:!e.abort})}}),kxt=se("$ZodCheckEndsWith",(t,e)=>{Oa.init(t,e);let r=new RegExp(`.*${$y(e.suffix)}$`);e.pattern??(e.pattern=r),t._zod.onattach.push(n=>{let o=n._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(r)}),t._zod.check=n=>{n.value.endsWith(e.suffix)||n.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:n.value,inst:t,continue:!e.abort})}});var Dxt=se("$ZodCheckOverwrite",(t,e)=>{Oa.init(t,e),t._zod.check=r=>{r.value=e.tx(r.value)}});var EZ=class{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}let n=e.split(`
`).filter(a=>a),o=Math.min(...n.map(a=>a.length-a.trimStart().length)),s=n.map(a=>a.slice(o)).map(a=>" ".repeat(this.indent*2)+a);for(let a of s)this.content.push(a)}compile(){let e=Function,r=this?.args,o=[...(this?.content??[""]).map(s=>`  ${s}`)];return new e(...r,o.join(`
`))}};var qxt={major:4,minor:0,patch:0};var Cn=se("$ZodType",(t,e)=>{var r;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=qxt;let n=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&n.unshift(t);for(let o of n)for(let s of o._zod.onattach)s(t);if(n.length===0)(r=t._zod).deferred??(r.deferred=[]),t._zod.deferred?.push(()=>{t._zod.run=t._zod.parse});else{let o=(s,a,c)=>{let l=sA(s),u;for(let d of a){if(d._zod.def.when){if(!d._zod.def.when(s))continue}else if(l)continue;let f=s.issues.length,p=d._zod.check(s);if(p instanceof Promise&&c?.async===!1)throw new t_;if(u||p instanceof Promise)u=(u??Promise.resolve()).then(async()=>{await p,s.issues.length!==f&&(l||(l=sA(s,f)))});else{if(s.issues.length===f)continue;l||(l=sA(s,f))}}return u?u.then(()=>s):s};t._zod.run=(s,a)=>{let c=t._zod.parse(s,a);if(c instanceof Promise){if(a.async===!1)throw new t_;return c.then(l=>o(l,n,a))}return o(c,n,a)}}t["~standard"]={validate:o=>{try{let s=zAt(t,o);return s.success?{value:s.data}:{issues:s.error?.issues}}catch{return WAt(t,o).then(a=>a.success?{value:a.data}:{issues:a.error?.issues})}},vendor:"zod",version:1}}),SZ=se("$ZodString",(t,e)=>{Cn.init(t,e),t._zod.pattern=[...t?._zod.bag?.patterns??[]].pop()??gxt(t._zod.bag),t._zod.parse=(r,n)=>{if(e.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:t}),r}}),fi=se("$ZodStringFormat",(t,e)=>{HD.init(t,e),SZ.init(t,e)}),Kxt=se("$ZodGUID",(t,e)=>{e.pattern??(e.pattern=txt),fi.init(t,e)}),Yxt=se("$ZodUUID",(t,e)=>{if(e.version){let n={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(n===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=Vwe(n))}else e.pattern??(e.pattern=Vwe());fi.init(t,e)}),Qxt=se("$ZodEmail",(t,e)=>{e.pattern??(e.pattern=rxt),fi.init(t,e)}),Zxt=se("$ZodURL",(t,e)=>{fi.init(t,e),t._zod.check=r=>{try{let n=r.value,o=new URL(n),s=o.href;e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(o.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:lxt.source,input:r.value,inst:t,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(o.protocol.endsWith(":")?o.protocol.slice(0,-1):o.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:r.value,inst:t,continue:!e.abort})),!n.endsWith("/")&&s.endsWith("/")?r.value=s.slice(0,-1):r.value=s;return}catch{r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:t,continue:!e.abort})}}}),Jxt=se("$ZodEmoji",(t,e)=>{e.pattern??(e.pattern=nxt()),fi.init(t,e)}),Xxt=se("$ZodNanoID",(t,e)=>{e.pattern??(e.pattern=XAt),fi.init(t,e)}),ewt=se("$ZodCUID",(t,e)=>{e.pattern??(e.pattern=KAt),fi.init(t,e)}),twt=se("$ZodCUID2",(t,e)=>{e.pattern??(e.pattern=YAt),fi.init(t,e)}),rwt=se("$ZodULID",(t,e)=>{e.pattern??(e.pattern=QAt),fi.init(t,e)}),nwt=se("$ZodXID",(t,e)=>{e.pattern??(e.pattern=ZAt),fi.init(t,e)}),iwt=se("$ZodKSUID",(t,e)=>{e.pattern??(e.pattern=JAt),fi.init(t,e)}),owt=se("$ZodISODateTime",(t,e)=>{e.pattern??(e.pattern=mxt(e)),fi.init(t,e)}),swt=se("$ZodISODate",(t,e)=>{e.pattern??(e.pattern=fxt),fi.init(t,e)}),awt=se("$ZodISOTime",(t,e)=>{e.pattern??(e.pattern=hxt(e)),fi.init(t,e)}),cwt=se("$ZodISODuration",(t,e)=>{e.pattern??(e.pattern=ext),fi.init(t,e)}),lwt=se("$ZodIPv4",(t,e)=>{e.pattern??(e.pattern=ixt),fi.init(t,e),t._zod.onattach.push(r=>{let n=r._zod.bag;n.format="ipv4"})}),uwt=se("$ZodIPv6",(t,e)=>{e.pattern??(e.pattern=oxt),fi.init(t,e),t._zod.onattach.push(r=>{let n=r._zod.bag;n.format="ipv6"}),t._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:t,continue:!e.abort})}}}),dwt=se("$ZodCIDRv4",(t,e)=>{e.pattern??(e.pattern=sxt),fi.init(t,e)}),fwt=se("$ZodCIDRv6",(t,e)=>{e.pattern??(e.pattern=axt),fi.init(t,e),t._zod.check=r=>{let[n,o]=r.value.split("/");try{if(!o)throw new Error;let s=Number(o);if(`${s}`!==o)throw new Error;if(s<0||s>128)throw new Error;new URL(`http://[${n}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:t,continue:!e.abort})}}});function pwt(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}var hwt=se("$ZodBase64",(t,e)=>{e.pattern??(e.pattern=cxt),fi.init(t,e),t._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64"}),t._zod.check=r=>{pwt(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:t,continue:!e.abort})}});function rhn(t){if(!Hwe.test(t))return!1;let e=t.replace(/[-_]/g,n=>n==="-"?"+":"/"),r=e.padEnd(Math.ceil(e.length/4)*4,"=");return pwt(r)}var mwt=se("$ZodBase64URL",(t,e)=>{e.pattern??(e.pattern=Hwe),fi.init(t,e),t._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64url"}),t._zod.check=r=>{rhn(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:t,continue:!e.abort})}}),gwt=se("$ZodE164",(t,e)=>{e.pattern??(e.pattern=uxt),fi.init(t,e)});function nhn(t,e=null){try{let r=t.split(".");if(r.length!==3)return!1;let[n]=r;if(!n)return!1;let o=JSON.parse(atob(n));return!("typ"in o&&o?.typ!=="JWT"||!o.alg||e&&(!("alg"in o)||o.alg!==e))}catch{return!1}}var _wt=se("$ZodJWT",(t,e)=>{fi.init(t,e),t._zod.check=r=>{nhn(r.value,e.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:t,continue:!e.abort})}});var Kwe=se("$ZodNumber",(t,e)=>{Cn.init(t,e),t._zod.pattern=t._zod.bag.pattern??yxt,t._zod.parse=(r,n)=>{if(e.coerce)try{r.value=Number(r.value)}catch{}let o=r.value;if(typeof o=="number"&&!Number.isNaN(o)&&Number.isFinite(o))return r;let s=typeof o=="number"?Number.isNaN(o)?"NaN":Number.isFinite(o)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:o,inst:t,...s?{received:s}:{}}),r}}),vwt=se("$ZodNumber",(t,e)=>{xxt.init(t,e),Kwe.init(t,e)}),ywt=se("$ZodBoolean",(t,e)=>{Cn.init(t,e),t._zod.pattern=Ext,t._zod.parse=(r,n)=>{if(e.coerce)try{r.value=!!r.value}catch{}let o=r.value;return typeof o=="boolean"||r.issues.push({expected:"boolean",code:"invalid_type",input:o,inst:t}),r}}),Ewt=se("$ZodBigInt",(t,e)=>{Cn.init(t,e),t._zod.pattern=_xt,t._zod.parse=(r,n)=>{if(e.coerce)try{r.value=BigInt(r.value)}catch{}return typeof r.value=="bigint"||r.issues.push({expected:"bigint",code:"invalid_type",input:r.value,inst:t}),r}});var Twt=se("$ZodNull",(t,e)=>{Cn.init(t,e),t._zod.pattern=Txt,t._zod.values=new Set([null]),t._zod.parse=(r,n)=>{let o=r.value;return o===null||r.issues.push({expected:"null",code:"invalid_type",input:o,inst:t}),r}}),Swt=se("$ZodAny",(t,e)=>{Cn.init(t,e),t._zod.parse=r=>r}),bwt=se("$ZodUnknown",(t,e)=>{Cn.init(t,e),t._zod.parse=r=>r}),Cwt=se("$ZodNever",(t,e)=>{Cn.init(t,e),t._zod.parse=(r,n)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:t}),r)});var Awt=se("$ZodDate",(t,e)=>{Cn.init(t,e),t._zod.parse=(r,n)=>{if(e.coerce)try{r.value=new Date(r.value)}catch{}let o=r.value,s=o instanceof Date;return s&&!Number.isNaN(o.getTime())||r.issues.push({expected:"date",code:"invalid_type",input:o,...s?{received:"Invalid Date"}:{},inst:t}),r}});function Fxt(t,e,r){t.issues.length&&e.issues.push(...Th(r,t.issues)),e.value[r]=t.value}var xwt=se("$ZodArray",(t,e)=>{Cn.init(t,e),t._zod.parse=(r,n)=>{let o=r.value;if(!Array.isArray(o))return r.issues.push({expected:"array",code:"invalid_type",input:o,inst:t}),r;r.value=Array(o.length);let s=[];for(let a=0;a<o.length;a++){let c=o[a],l=e.element._zod.run({value:c,issues:[]},n);l instanceof Promise?s.push(l.then(u=>Fxt(u,r,a))):Fxt(l,r,a)}return s.length?Promise.all(s).then(()=>r):r}});function TZ(t,e,r){t.issues.length&&e.issues.push(...Th(r,t.issues)),e.value[r]=t.value}function jxt(t,e,r,n){t.issues.length?n[r]===void 0?r in n?e.value[r]=void 0:e.value[r]=t.value:e.issues.push(...Th(r,t.issues)):t.value===void 0?r in n&&(e.value[r]=void 0):e.value[r]=t.value}var wwt=se("$ZodObject",(t,e)=>{Cn.init(t,e);let r=jD(()=>{let f=Object.keys(e.shape);for(let h of f)if(!(e.shape[h]instanceof Cn))throw new Error(`Invalid element at key "${h}": expected a Zod schema`);let p=kwe(e.shape);return{shape:e.shape,keys:f,keySet:new Set(f),numKeys:f.length,optionalKeys:new Set(p)}});Jn(t._zod,"propValues",()=>{let f=e.shape,p={};for(let h in f){let _=f[h]._zod;if(_.values){p[h]??(p[h]=new Set);for(let g of _.values)p[h].add(g)}}return p});let n=f=>{let p=new EZ(["shape","payload","ctx"]),h=r.value,_=y=>{let S=oA(y);return`shape[${S}]._zod.run({ value: input[${S}], issues: [] }, ctx)`};p.write("const input = payload.value;");let g=Object.create(null),v=0;for(let y of h.keys)g[y]=`key_${v++}`;p.write("const newResult = {}");for(let y of h.keys)if(h.optionalKeys.has(y)){let S=g[y];p.write(`const ${S} = ${_(y)};`);let b=oA(y);p.write(`
        if (${S}.issues.length) {
          if (input[${b}] === undefined) {
            if (${b} in input) {
              newResult[${b}] = undefined;
            }
          } else {
            payload.issues = payload.issues.concat(
              ${S}.issues.map((iss) => ({
                ...iss,
                path: iss.path ? [${b}, ...iss.path] : [${b}],
              }))
            );
          }
        } else if (${S}.value === undefined) {
          if (${b} in input) newResult[${b}] = undefined;
        } else {
          newResult[${b}] = ${S}.value;
        }
        `)}else{let S=g[y];p.write(`const ${S} = ${_(y)};`),p.write(`
          if (${S}.issues.length) payload.issues = payload.issues.concat(${S}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${oA(y)}, ...iss.path] : [${oA(y)}]
          })));`),p.write(`newResult[${oA(y)}] = ${S}.value`)}p.write("payload.value = newResult;"),p.write("return payload;");let E=p.compile();return(y,S)=>E(f,y,S)},o,s=l2,a=!hZ.jitless,l=a&&Nwe.value,u=e.catchall,d;t._zod.parse=(f,p)=>{d??(d=r.value);let h=f.value;if(!s(h))return f.issues.push({expected:"object",code:"invalid_type",input:h,inst:t}),f;let _=[];if(a&&l&&p?.async===!1&&p.jitless!==!0)o||(o=n(e.shape)),f=o(f,p);else{f.value={};let S=d.shape;for(let b of d.keys){let w=S[b],P=w._zod.run({value:h[b],issues:[]},p),A=w._zod.optin==="optional"&&w._zod.optout==="optional";P instanceof Promise?_.push(P.then(O=>A?jxt(O,f,b,h):TZ(O,f,b))):A?jxt(P,f,b,h):TZ(P,f,b)}}if(!u)return _.length?Promise.all(_).then(()=>f):f;let g=[],v=d.keySet,E=u._zod,y=E.def.type;for(let S of Object.keys(h)){if(v.has(S))continue;if(y==="never"){g.push(S);continue}let b=E.run({value:h[S],issues:[]},p);b instanceof Promise?_.push(b.then(w=>TZ(w,f,S))):TZ(b,f,S)}return g.length&&f.issues.push({code:"unrecognized_keys",keys:g,input:h,inst:t}),_.length?Promise.all(_).then(()=>f):f}});function Bxt(t,e,r,n){for(let o of t)if(o.issues.length===0)return e.value=o.value,e;return e.issues.push({code:"invalid_union",input:e.value,inst:r,errors:t.map(o=>o.issues.map(s=>y0(s,n,Su())))}),e}var Ywe=se("$ZodUnion",(t,e)=>{Cn.init(t,e),Jn(t._zod,"optin",()=>e.options.some(r=>r._zod.optin==="optional")?"optional":void 0),Jn(t._zod,"optout",()=>e.options.some(r=>r._zod.optout==="optional")?"optional":void 0),Jn(t._zod,"values",()=>{if(e.options.every(r=>r._zod.values))return new Set(e.options.flatMap(r=>Array.from(r._zod.values)))}),Jn(t._zod,"pattern",()=>{if(e.options.every(r=>r._zod.pattern)){let r=e.options.map(n=>n._zod.pattern);return new RegExp(`^(${r.map(n=>$D(n.source)).join("|")})$`)}}),t._zod.parse=(r,n)=>{let o=!1,s=[];for(let a of e.options){let c=a._zod.run({value:r.value,issues:[]},n);if(c instanceof Promise)s.push(c),o=!0;else{if(c.issues.length===0)return c;s.push(c)}}return o?Promise.all(s).then(a=>Bxt(a,r,t,n)):Bxt(s,r,t,n)}}),Iwt=se("$ZodDiscriminatedUnion",(t,e)=>{Ywe.init(t,e);let r=t._zod.parse;Jn(t._zod,"propValues",()=>{let o={};for(let s of e.options){let a=s._zod.propValues;if(!a||Object.keys(a).length===0)throw new Error(`Invalid discriminated union option at index "${e.options.indexOf(s)}"`);for(let[c,l]of Object.entries(a)){o[c]||(o[c]=new Set);for(let u of l)o[c].add(u)}}return o});let n=jD(()=>{let o=e.options,s=new Map;for(let a of o){let c=a._zod.propValues[e.discriminator];if(!c||c.size===0)throw new Error(`Invalid discriminated union option at index "${e.options.indexOf(a)}"`);for(let l of c){if(s.has(l))throw new Error(`Duplicate discriminator value "${String(l)}"`);s.set(l,a)}}return s});t._zod.parse=(o,s)=>{let a=o.value;if(!l2(a))return o.issues.push({code:"invalid_type",expected:"object",input:a,inst:t}),o;let c=n.value.get(a?.[e.discriminator]);return c?c._zod.run(o,s):e.unionFallback?r(o,s):(o.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",input:a,path:[e.discriminator],inst:t}),o)}}),Pwt=se("$ZodIntersection",(t,e)=>{Cn.init(t,e),t._zod.parse=(r,n)=>{let o=r.value,s=e.left._zod.run({value:o,issues:[]},n),a=e.right._zod.run({value:o,issues:[]},n);return s instanceof Promise||a instanceof Promise?Promise.all([s,a]).then(([l,u])=>$xt(r,l,u)):$xt(r,s,a)}});function Wwe(t,e){if(t===e)return{valid:!0,data:t};if(t instanceof Date&&e instanceof Date&&+t==+e)return{valid:!0,data:t};if(u2(t)&&u2(e)){let r=Object.keys(e),n=Object.keys(t).filter(s=>r.indexOf(s)!==-1),o={...t,...e};for(let s of n){let a=Wwe(t[s],e[s]);if(!a.valid)return{valid:!1,mergeErrorPath:[s,...a.mergeErrorPath]};o[s]=a.data}return{valid:!0,data:o}}if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return{valid:!1,mergeErrorPath:[]};let r=[];for(let n=0;n<t.length;n++){let o=t[n],s=e[n],a=Wwe(o,s);if(!a.valid)return{valid:!1,mergeErrorPath:[n,...a.mergeErrorPath]};r.push(a.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function $xt(t,e,r){if(e.issues.length&&t.issues.push(...e.issues),r.issues.length&&t.issues.push(...r.issues),sA(t))return t;let n=Wwe(e.value,r.value);if(!n.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(n.mergeErrorPath)}`);return t.value=n.data,t}var Rwt=se("$ZodRecord",(t,e)=>{Cn.init(t,e),t._zod.parse=(r,n)=>{let o=r.value;if(!u2(o))return r.issues.push({expected:"record",code:"invalid_type",input:o,inst:t}),r;let s=[];if(e.keyType._zod.values){let a=e.keyType._zod.values;r.value={};for(let l of a)if(typeof l=="string"||typeof l=="number"||typeof l=="symbol"){let u=e.valueType._zod.run({value:o[l],issues:[]},n);u instanceof Promise?s.push(u.then(d=>{d.issues.length&&r.issues.push(...Th(l,d.issues)),r.value[l]=d.value})):(u.issues.length&&r.issues.push(...Th(l,u.issues)),r.value[l]=u.value)}let c;for(let l in o)a.has(l)||(c=c??[],c.push(l));c&&c.length>0&&r.issues.push({code:"unrecognized_keys",input:o,inst:t,keys:c})}else{r.value={};for(let a of Reflect.ownKeys(o)){if(a==="__proto__")continue;let c=e.keyType._zod.run({value:a,issues:[]},n);if(c instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(c.issues.length){r.issues.push({origin:"record",code:"invalid_key",issues:c.issues.map(u=>y0(u,n,Su())),input:a,path:[a],inst:t}),r.value[c.value]=c.value;continue}let l=e.valueType._zod.run({value:o[a],issues:[]},n);l instanceof Promise?s.push(l.then(u=>{u.issues.length&&r.issues.push(...Th(a,u.issues)),r.value[c.value]=u.value})):(l.issues.length&&r.issues.push(...Th(a,l.issues)),r.value[c.value]=l.value)}}return s.length?Promise.all(s).then(()=>r):r}});var Owt=se("$ZodEnum",(t,e)=>{Cn.init(t,e);let r=Pwe(e.entries);t._zod.values=new Set(r),t._zod.pattern=new RegExp(`^(${r.filter(n=>Lwe.has(typeof n)).map(n=>typeof n=="string"?$y(n):n.toString()).join("|")})$`),t._zod.parse=(n,o)=>{let s=n.value;return t._zod.values.has(s)||n.issues.push({code:"invalid_value",values:r,input:s,inst:t}),n}}),Mwt=se("$ZodLiteral",(t,e)=>{Cn.init(t,e),t._zod.values=new Set(e.values),t._zod.pattern=new RegExp(`^(${e.values.map(r=>typeof r=="string"?$y(r):r?r.toString():String(r)).join("|")})$`),t._zod.parse=(r,n)=>{let o=r.value;return t._zod.values.has(o)||r.issues.push({code:"invalid_value",values:e.values,input:o,inst:t}),r}});var Nwt=se("$ZodTransform",(t,e)=>{Cn.init(t,e),t._zod.parse=(r,n)=>{let o=e.transform(r.value,r);if(n.async)return(o instanceof Promise?o:Promise.resolve(o)).then(a=>(r.value=a,r));if(o instanceof Promise)throw new t_;return r.value=o,r}}),Lwt=se("$ZodOptional",(t,e)=>{Cn.init(t,e),t._zod.optin="optional",t._zod.optout="optional",Jn(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),Jn(t._zod,"pattern",()=>{let r=e.innerType._zod.pattern;return r?new RegExp(`^(${$D(r.source)})?$`):void 0}),t._zod.parse=(r,n)=>e.innerType._zod.optin==="optional"?e.innerType._zod.run(r,n):r.value===void 0?r:e.innerType._zod.run(r,n)}),kwt=se("$ZodNullable",(t,e)=>{Cn.init(t,e),Jn(t._zod,"optin",()=>e.innerType._zod.optin),Jn(t._zod,"optout",()=>e.innerType._zod.optout),Jn(t._zod,"pattern",()=>{let r=e.innerType._zod.pattern;return r?new RegExp(`^(${$D(r.source)}|null)$`):void 0}),Jn(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),t._zod.parse=(r,n)=>r.value===null?r:e.innerType._zod.run(r,n)}),Dwt=se("$ZodDefault",(t,e)=>{Cn.init(t,e),t._zod.optin="optional",Jn(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(r,n)=>{if(r.value===void 0)return r.value=e.defaultValue,r;let o=e.innerType._zod.run(r,n);return o instanceof Promise?o.then(s=>Vxt(s,e)):Vxt(o,e)}});function Vxt(t,e){return t.value===void 0&&(t.value=e.defaultValue),t}var Uwt=se("$ZodPrefault",(t,e)=>{Cn.init(t,e),t._zod.optin="optional",Jn(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(r,n)=>(r.value===void 0&&(r.value=e.defaultValue),e.innerType._zod.run(r,n))}),qwt=se("$ZodNonOptional",(t,e)=>{Cn.init(t,e),Jn(t._zod,"values",()=>{let r=e.innerType._zod.values;return r?new Set([...r].filter(n=>n!==void 0)):void 0}),t._zod.parse=(r,n)=>{let o=e.innerType._zod.run(r,n);return o instanceof Promise?o.then(s=>Hxt(s,t)):Hxt(o,t)}});function Hxt(t,e){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:e}),t}var Fwt=se("$ZodCatch",(t,e)=>{Cn.init(t,e),t._zod.optin="optional",Jn(t._zod,"optout",()=>e.innerType._zod.optout),Jn(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(r,n)=>{let o=e.innerType._zod.run(r,n);return o instanceof Promise?o.then(s=>(r.value=s.value,s.issues.length&&(r.value=e.catchValue({...r,error:{issues:s.issues.map(a=>y0(a,n,Su()))},input:r.value}),r.issues=[]),r)):(r.value=o.value,o.issues.length&&(r.value=e.catchValue({...r,error:{issues:o.issues.map(s=>y0(s,n,Su()))},input:r.value}),r.issues=[]),r)}});var jwt=se("$ZodPipe",(t,e)=>{Cn.init(t,e),Jn(t._zod,"values",()=>e.in._zod.values),Jn(t._zod,"optin",()=>e.in._zod.optin),Jn(t._zod,"optout",()=>e.out._zod.optout),t._zod.parse=(r,n)=>{let o=e.in._zod.run(r,n);return o instanceof Promise?o.then(s=>Gxt(s,e,n)):Gxt(o,e,n)}});function Gxt(t,e,r){return sA(t)?t:e.out._zod.run({value:t.value,issues:t.issues},r)}var Bwt=se("$ZodReadonly",(t,e)=>{Cn.init(t,e),Jn(t._zod,"propValues",()=>e.innerType._zod.propValues),Jn(t._zod,"values",()=>e.innerType._zod.values),Jn(t._zod,"optin",()=>e.innerType._zod.optin),Jn(t._zod,"optout",()=>e.innerType._zod.optout),t._zod.parse=(r,n)=>{let o=e.innerType._zod.run(r,n);return o instanceof Promise?o.then(zxt):zxt(o)}});function zxt(t){return t.value=Object.freeze(t.value),t}var $wt=se("$ZodCustom",(t,e)=>{Oa.init(t,e),Cn.init(t,e),t._zod.parse=(r,n)=>r,t._zod.check=r=>{let n=r.value,o=e.fn(n);if(o instanceof Promise)return o.then(s=>Wxt(s,r,n,t));Wxt(o,r,n,t)}});function Wxt(t,e,r,n){if(!t){let o={code:"custom",input:r,inst:n,path:[...n._zod.def.path??[]],continue:!n._zod.def.abort};n._zod.def.params&&(o.params=n._zod.def.params),e.issues.push(Uwe(o))}}var ihn=t=>{let e=typeof t;switch(e){case"number":return Number.isNaN(t)?"NaN":"number";case"object":{if(Array.isArray(t))return"array";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return e},ohn=()=>{let t={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"}};function e(n){return t[n]??null}let r={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return n=>{switch(n.code){case"invalid_type":return`Invalid input: expected ${n.expected}, received ${ihn(n.input)}`;case"invalid_value":return n.values.length===1?`Invalid input: expected ${_Z(n.values[0])}`:`Invalid option: expected one of ${mZ(n.values,"|")}`;case"too_big":{let o=n.inclusive?"<=":"<",s=e(n.origin);return s?`Too big: expected ${n.origin??"value"} to have ${o}${n.maximum.toString()} ${s.unit??"elements"}`:`Too big: expected ${n.origin??"value"} to be ${o}${n.maximum.toString()}`}case"too_small":{let o=n.inclusive?">=":">",s=e(n.origin);return s?`Too small: expected ${n.origin} to have ${o}${n.minimum.toString()} ${s.unit}`:`Too small: expected ${n.origin} to be ${o}${n.minimum.toString()}`}case"invalid_format":{let o=n;return o.format==="starts_with"?`Invalid string: must start with "${o.prefix}"`:o.format==="ends_with"?`Invalid string: must end with "${o.suffix}"`:o.format==="includes"?`Invalid string: must include "${o.includes}"`:o.format==="regex"?`Invalid string: must match pattern ${o.pattern}`:`Invalid ${r[o.format]??n.format}`}case"not_multiple_of":return`Invalid number: must be a multiple of ${n.divisor}`;case"unrecognized_keys":return`Unrecognized key${n.keys.length>1?"s":""}: ${mZ(n.keys,", ")}`;case"invalid_key":return`Invalid key in ${n.origin}`;case"invalid_union":return"Invalid input";case"invalid_element":return`Invalid value in ${n.origin}`;default:return"Invalid input"}}};function Vwt(){return{localeError:ohn()}}var shn=Symbol("ZodOutput"),ahn=Symbol("ZodInput"),Qwe=class{constructor(){this._map=new Map,this._idmap=new Map}add(e,...r){let n=r[0];if(this._map.set(e,n),n&&typeof n=="object"&&"id"in n){if(this._idmap.has(n.id))throw new Error(`ID ${n.id} already exists in the registry`);this._idmap.set(n.id,e)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(e){let r=this._map.get(e);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(e),this}get(e){let r=e._zod.parent;if(r){let n={...this.get(r)??{}};return delete n.id,{...n,...this._map.get(e)}}return this._map.get(e)}has(e){return this._map.has(e)}};function Hwt(){return new Qwe}var d2=Hwt();function Gwt(t,e){return new t({type:"string",...At(e)})}function zwt(t,e){return new t({type:"string",coerce:!0,...At(e)})}function Wwt(t,e){return new t({type:"string",format:"email",check:"string_format",abort:!1,...At(e)})}function Zwe(t,e){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...At(e)})}function Kwt(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...At(e)})}function Ywt(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...At(e)})}function Qwt(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...At(e)})}function Zwt(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...At(e)})}function Jwe(t,e){return new t({type:"string",format:"url",check:"string_format",abort:!1,...At(e)})}function Jwt(t,e){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...At(e)})}function Xwt(t,e){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...At(e)})}function eIt(t,e){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...At(e)})}function tIt(t,e){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...At(e)})}function rIt(t,e){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...At(e)})}function nIt(t,e){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...At(e)})}function iIt(t,e){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...At(e)})}function oIt(t,e){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...At(e)})}function sIt(t,e){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...At(e)})}function aIt(t,e){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...At(e)})}function cIt(t,e){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...At(e)})}function lIt(t,e){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...At(e)})}function uIt(t,e){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...At(e)})}function dIt(t,e){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...At(e)})}function fIt(t,e){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...At(e)})}function pIt(t,e){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...At(e)})}function hIt(t,e){return new t({type:"string",format:"date",check:"string_format",...At(e)})}function mIt(t,e){return new t({type:"string",format:"time",check:"string_format",precision:null,...At(e)})}function gIt(t,e){return new t({type:"string",format:"duration",check:"string_format",...At(e)})}function _It(t,e){return new t({type:"number",checks:[],...At(e)})}function vIt(t,e){return new t({type:"number",coerce:!0,checks:[],...At(e)})}function yIt(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"safeint",...At(e)})}function EIt(t,e){return new t({type:"boolean",...At(e)})}function TIt(t,e){return new t({type:"boolean",coerce:!0,...At(e)})}function SIt(t,e){return new t({type:"bigint",coerce:!0,...At(e)})}function bIt(t,e){return new t({type:"null",...At(e)})}function CIt(t){return new t({type:"any"})}function AIt(t){return new t({type:"unknown"})}function xIt(t,e){return new t({type:"never",...At(e)})}function wIt(t,e){return new t({type:"date",coerce:!0,...At(e)})}function f2(t,e){return new Gwe({check:"less_than",...At(e),value:t,inclusive:!1})}function r_(t,e){return new Gwe({check:"less_than",...At(e),value:t,inclusive:!0})}function p2(t,e){return new zwe({check:"greater_than",...At(e),value:t,inclusive:!1})}function E0(t,e){return new zwe({check:"greater_than",...At(e),value:t,inclusive:!0})}function GD(t,e){return new Axt({check:"multiple_of",...At(e),value:t})}function bZ(t,e){return new wxt({check:"max_length",...At(e),maximum:t})}function h2(t,e){return new Ixt({check:"min_length",...At(e),minimum:t})}function CZ(t,e){return new Pxt({check:"length_equals",...At(e),length:t})}function Xwe(t,e){return new Rxt({check:"string_format",format:"regex",...At(e),pattern:t})}function eIe(t){return new Oxt({check:"string_format",format:"lowercase",...At(t)})}function tIe(t){return new Mxt({check:"string_format",format:"uppercase",...At(t)})}function rIe(t,e){return new Nxt({check:"string_format",format:"includes",...At(e),includes:t})}function nIe(t,e){return new Lxt({check:"string_format",format:"starts_with",...At(e),prefix:t})}function iIe(t,e){return new kxt({check:"string_format",format:"ends_with",...At(e),suffix:t})}function aA(t){return new Dxt({check:"overwrite",tx:t})}function oIe(t){return aA(e=>e.normalize(t))}function sIe(){return aA(t=>t.trim())}function aIe(){return aA(t=>t.toLowerCase())}function cIe(){return aA(t=>t.toUpperCase())}function IIt(t,e,r){return new t({type:"array",element:e,...At(r)})}function PIt(t,e,r){let n=At(r);return n.abort??(n.abort=!0),new t({type:"custom",check:"custom",fn:e,...n})}function RIt(t,e,r){return new t({type:"custom",check:"custom",fn:e,...At(r)})}var zD={};Xs(zD,{ZodISODate:()=>MIt,ZodISODateTime:()=>OIt,ZodISODuration:()=>LIt,ZodISOTime:()=>NIt,date:()=>uIe,datetime:()=>lIe,duration:()=>fIe,time:()=>dIe});var OIt=se("ZodISODateTime",(t,e)=>{owt.init(t,e),Ci.init(t,e)});function lIe(t){return pIt(OIt,t)}var MIt=se("ZodISODate",(t,e)=>{swt.init(t,e),Ci.init(t,e)});function uIe(t){return hIt(MIt,t)}var NIt=se("ZodISOTime",(t,e)=>{awt.init(t,e),Ci.init(t,e)});function dIe(t){return mIt(NIt,t)}var LIt=se("ZodISODuration",(t,e)=>{cwt.init(t,e),Ci.init(t,e)});function fIe(t){return gIt(LIt,t)}var DIt=(t,e)=>{vZ.init(t,e),t.name="ZodError",Object.defineProperties(t,{format:{value:r=>jwe(t,r)},flatten:{value:r=>Fwe(t,r)},addIssue:{value:r=>t.issues.push(r)},addIssues:{value:r=>t.issues.push(...r)},isEmpty:{get(){return t.issues.length===0}}})},Gsi=se("ZodError",DIt),WD=se("ZodError",DIt,{Parent:Error});var UIt=HAt(WD),qIt=GAt(WD),FIt=Bwe(WD),jIt=$we(WD);var Xn=se("ZodType",(t,e)=>(Cn.init(t,e),t.def=e,Object.defineProperty(t,"_def",{value:e}),t.check=(...r)=>t.clone({...e,checks:[...e.checks??[],...r.map(n=>typeof n=="function"?{_zod:{check:n,def:{check:"custom"},onattach:[]}}:n)]}),t.clone=(r,n)=>v0(t,r,n),t.brand=()=>t,t.register=((r,n)=>(r.add(t,n),t)),t.parse=(r,n)=>UIt(t,r,n,{callee:t.parse}),t.safeParse=(r,n)=>FIt(t,r,n),t.parseAsync=async(r,n)=>qIt(t,r,n,{callee:t.parseAsync}),t.safeParseAsync=async(r,n)=>jIt(t,r,n),t.spa=t.safeParseAsync,t.refine=(r,n)=>t.check(tmn(r,n)),t.superRefine=r=>t.check(rmn(r)),t.overwrite=r=>t.check(aA(r)),t.optional=()=>Di(t),t.nullable=()=>VIt(t),t.nullish=()=>Di(VIt(t)),t.nonoptional=r=>Khn(t,r),t.array=()=>De(t),t.or=r=>ei([t,r]),t.and=r=>wZ(t,r),t.transform=r=>hIe(t,JIt(r)),t.default=r=>Ghn(t,r),t.prefault=r=>Whn(t,r),t.catch=r=>Qhn(t,r),t.pipe=r=>hIe(t,r),t.readonly=()=>Xhn(t),t.describe=r=>{let n=t.clone();return d2.add(n,{description:r}),n},Object.defineProperty(t,"description",{get(){return d2.get(t)?.description},configurable:!0}),t.meta=(...r)=>{if(r.length===0)return d2.get(t);let n=t.clone();return d2.add(n,r[0]),n},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t)),HIt=se("_ZodString",(t,e)=>{SZ.init(t,e),Xn.init(t,e);let r=t._zod.bag;t.format=r.format??null,t.minLength=r.minimum??null,t.maxLength=r.maximum??null,t.regex=(...n)=>t.check(Xwe(...n)),t.includes=(...n)=>t.check(rIe(...n)),t.startsWith=(...n)=>t.check(nIe(...n)),t.endsWith=(...n)=>t.check(iIe(...n)),t.min=(...n)=>t.check(h2(...n)),t.max=(...n)=>t.check(bZ(...n)),t.length=(...n)=>t.check(CZ(...n)),t.nonempty=(...n)=>t.check(h2(1,...n)),t.lowercase=n=>t.check(eIe(n)),t.uppercase=n=>t.check(tIe(n)),t.trim=()=>t.check(sIe()),t.normalize=(...n)=>t.check(oIe(...n)),t.toLowerCase=()=>t.check(aIe()),t.toUpperCase=()=>t.check(cIe())}),mIe=se("ZodString",(t,e)=>{SZ.init(t,e),HIt.init(t,e),t.email=r=>t.check(Wwt(mhn,r)),t.url=r=>t.check(Jwe(GIt,r)),t.jwt=r=>t.check(fIt(Rhn,r)),t.emoji=r=>t.check(Jwt(ghn,r)),t.guid=r=>t.check(Zwe(BIt,r)),t.uuid=r=>t.check(Kwt(AZ,r)),t.uuidv4=r=>t.check(Ywt(AZ,r)),t.uuidv6=r=>t.check(Qwt(AZ,r)),t.uuidv7=r=>t.check(Zwt(AZ,r)),t.nanoid=r=>t.check(Xwt(_hn,r)),t.guid=r=>t.check(Zwe(BIt,r)),t.cuid=r=>t.check(eIt(vhn,r)),t.cuid2=r=>t.check(tIt(yhn,r)),t.ulid=r=>t.check(rIt(Ehn,r)),t.base64=r=>t.check(lIt(whn,r)),t.base64url=r=>t.check(uIt(Ihn,r)),t.xid=r=>t.check(nIt(Thn,r)),t.ksuid=r=>t.check(iIt(Shn,r)),t.ipv4=r=>t.check(oIt(bhn,r)),t.ipv6=r=>t.check(sIt(Chn,r)),t.cidrv4=r=>t.check(aIt(Ahn,r)),t.cidrv6=r=>t.check(cIt(xhn,r)),t.e164=r=>t.check(dIt(Phn,r)),t.datetime=r=>t.check(lIe(r)),t.date=r=>t.check(uIe(r)),t.time=r=>t.check(dIe(r)),t.duration=r=>t.check(fIe(r))});function V(t){return Gwt(mIe,t)}var Ci=se("ZodStringFormat",(t,e)=>{fi.init(t,e),HIt.init(t,e)}),mhn=se("ZodEmail",(t,e)=>{Qxt.init(t,e),Ci.init(t,e)});var BIt=se("ZodGUID",(t,e)=>{Kxt.init(t,e),Ci.init(t,e)});var AZ=se("ZodUUID",(t,e)=>{Yxt.init(t,e),Ci.init(t,e)});var GIt=se("ZodURL",(t,e)=>{Zxt.init(t,e),Ci.init(t,e)});function zIt(t){return Jwe(GIt,t)}var ghn=se("ZodEmoji",(t,e)=>{Jxt.init(t,e),Ci.init(t,e)});var _hn=se("ZodNanoID",(t,e)=>{Xxt.init(t,e),Ci.init(t,e)});var vhn=se("ZodCUID",(t,e)=>{ewt.init(t,e),Ci.init(t,e)});var yhn=se("ZodCUID2",(t,e)=>{twt.init(t,e),Ci.init(t,e)});var Ehn=se("ZodULID",(t,e)=>{rwt.init(t,e),Ci.init(t,e)});var Thn=se("ZodXID",(t,e)=>{nwt.init(t,e),Ci.init(t,e)});var Shn=se("ZodKSUID",(t,e)=>{iwt.init(t,e),Ci.init(t,e)});var bhn=se("ZodIPv4",(t,e)=>{lwt.init(t,e),Ci.init(t,e)});var Chn=se("ZodIPv6",(t,e)=>{uwt.init(t,e),Ci.init(t,e)});var Ahn=se("ZodCIDRv4",(t,e)=>{dwt.init(t,e),Ci.init(t,e)});var xhn=se("ZodCIDRv6",(t,e)=>{fwt.init(t,e),Ci.init(t,e)});var whn=se("ZodBase64",(t,e)=>{hwt.init(t,e),Ci.init(t,e)});var Ihn=se("ZodBase64URL",(t,e)=>{mwt.init(t,e),Ci.init(t,e)});var Phn=se("ZodE164",(t,e)=>{gwt.init(t,e),Ci.init(t,e)});var Rhn=se("ZodJWT",(t,e)=>{_wt.init(t,e),Ci.init(t,e)});var xZ=se("ZodNumber",(t,e)=>{Kwe.init(t,e),Xn.init(t,e),t.gt=(n,o)=>t.check(p2(n,o)),t.gte=(n,o)=>t.check(E0(n,o)),t.min=(n,o)=>t.check(E0(n,o)),t.lt=(n,o)=>t.check(f2(n,o)),t.lte=(n,o)=>t.check(r_(n,o)),t.max=(n,o)=>t.check(r_(n,o)),t.int=n=>t.check($It(n)),t.safe=n=>t.check($It(n)),t.positive=n=>t.check(p2(0,n)),t.nonnegative=n=>t.check(E0(0,n)),t.negative=n=>t.check(f2(0,n)),t.nonpositive=n=>t.check(r_(0,n)),t.multipleOf=(n,o)=>t.check(GD(n,o)),t.step=(n,o)=>t.check(GD(n,o)),t.finite=()=>t;let r=t._zod.bag;t.minValue=Math.max(r.minimum??Number.NEGATIVE_INFINITY,r.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,t.maxValue=Math.min(r.maximum??Number.POSITIVE_INFINITY,r.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,t.isInt=(r.format??"").includes("int")||Number.isSafeInteger(r.multipleOf??.5),t.isFinite=!0,t.format=r.format??null});function fn(t){return _It(xZ,t)}var Ohn=se("ZodNumberFormat",(t,e)=>{vwt.init(t,e),xZ.init(t,e)});function $It(t){return yIt(Ohn,t)}var gIe=se("ZodBoolean",(t,e)=>{ywt.init(t,e),Xn.init(t,e)});function Vn(t){return EIt(gIe,t)}var WIt=se("ZodBigInt",(t,e)=>{Ewt.init(t,e),Xn.init(t,e),t.gte=(n,o)=>t.check(E0(n,o)),t.min=(n,o)=>t.check(E0(n,o)),t.gt=(n,o)=>t.check(p2(n,o)),t.gte=(n,o)=>t.check(E0(n,o)),t.min=(n,o)=>t.check(E0(n,o)),t.lt=(n,o)=>t.check(f2(n,o)),t.lte=(n,o)=>t.check(r_(n,o)),t.max=(n,o)=>t.check(r_(n,o)),t.positive=n=>t.check(p2(BigInt(0),n)),t.negative=n=>t.check(f2(BigInt(0),n)),t.nonpositive=n=>t.check(r_(BigInt(0),n)),t.nonnegative=n=>t.check(E0(BigInt(0),n)),t.multipleOf=(n,o)=>t.check(GD(n,o));let r=t._zod.bag;t.minValue=r.minimum??null,t.maxValue=r.maximum??null,t.format=r.format??null});var Mhn=se("ZodNull",(t,e)=>{Twt.init(t,e),Xn.init(t,e)});function _Ie(t){return bIt(Mhn,t)}var Nhn=se("ZodAny",(t,e)=>{Swt.init(t,e),Xn.init(t,e)});function KIt(){return CIt(Nhn)}var Lhn=se("ZodUnknown",(t,e)=>{bwt.init(t,e),Xn.init(t,e)});function Ai(){return AIt(Lhn)}var khn=se("ZodNever",(t,e)=>{Cwt.init(t,e),Xn.init(t,e)});function Dhn(t){return xIt(khn,t)}var YIt=se("ZodDate",(t,e)=>{Awt.init(t,e),Xn.init(t,e),t.min=(n,o)=>t.check(E0(n,o)),t.max=(n,o)=>t.check(r_(n,o));let r=t._zod.bag;t.minDate=r.minimum?new Date(r.minimum):null,t.maxDate=r.maximum?new Date(r.maximum):null});var Uhn=se("ZodArray",(t,e)=>{xwt.init(t,e),Xn.init(t,e),t.element=e.element,t.min=(r,n)=>t.check(h2(r,n)),t.nonempty=r=>t.check(h2(1,r)),t.max=(r,n)=>t.check(bZ(r,n)),t.length=(r,n)=>t.check(CZ(r,n)),t.unwrap=()=>t.element});function De(t,e){return IIt(Uhn,t,e)}var QIt=se("ZodObject",(t,e)=>{wwt.init(t,e),Xn.init(t,e),dn.defineLazy(t,"shape",()=>e.shape),t.keyof=()=>xl(Object.keys(t._zod.def.shape)),t.catchall=r=>t.clone({...t._zod.def,catchall:r}),t.passthrough=()=>t.clone({...t._zod.def,catchall:Ai()}),t.loose=()=>t.clone({...t._zod.def,catchall:Ai()}),t.strict=()=>t.clone({...t._zod.def,catchall:Dhn()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=r=>dn.extend(t,r),t.merge=r=>dn.merge(t,r),t.pick=r=>dn.pick(t,r),t.omit=r=>dn.omit(t,r),t.partial=(...r)=>dn.partial(XIt,t,r[0]),t.required=(...r)=>dn.required(ePt,t,r[0])});function Be(t,e){let r={type:"object",get shape(){return dn.assignProp(this,"shape",{...t}),this.shape},...dn.normalizeParams(e)};return new QIt(r)}function Xo(t,e){return new QIt({type:"object",get shape(){return dn.assignProp(this,"shape",{...t}),this.shape},catchall:Ai(),...dn.normalizeParams(e)})}var ZIt=se("ZodUnion",(t,e)=>{Ywe.init(t,e),Xn.init(t,e),t.options=e.options});function ei(t,e){return new ZIt({type:"union",options:t,...dn.normalizeParams(e)})}var qhn=se("ZodDiscriminatedUnion",(t,e)=>{ZIt.init(t,e),Iwt.init(t,e)});function vIe(t,e,r){return new qhn({type:"union",options:e,discriminator:t,...dn.normalizeParams(r)})}var Fhn=se("ZodIntersection",(t,e)=>{Pwt.init(t,e),Xn.init(t,e)});function wZ(t,e){return new Fhn({type:"intersection",left:t,right:e})}var jhn=se("ZodRecord",(t,e)=>{Rwt.init(t,e),Xn.init(t,e),t.keyType=e.keyType,t.valueType=e.valueType});function xi(t,e,r){return new jhn({type:"record",keyType:t,valueType:e,...dn.normalizeParams(r)})}var pIe=se("ZodEnum",(t,e)=>{Owt.init(t,e),Xn.init(t,e),t.enum=e.entries,t.options=Object.values(e.entries);let r=new Set(Object.keys(e.entries));t.extract=(n,o)=>{let s={};for(let a of n)if(r.has(a))s[a]=e.entries[a];else throw new Error(`Key ${a} not found in enum`);return new pIe({...e,checks:[],...dn.normalizeParams(o),entries:s})},t.exclude=(n,o)=>{let s={...e.entries};for(let a of n)if(r.has(a))delete s[a];else throw new Error(`Key ${a} not found in enum`);return new pIe({...e,checks:[],...dn.normalizeParams(o),entries:s})}});function xl(t,e){let r=Array.isArray(t)?Object.fromEntries(t.map(n=>[n,n])):t;return new pIe({type:"enum",entries:r,...dn.normalizeParams(e)})}var Bhn=se("ZodLiteral",(t,e)=>{Mwt.init(t,e),Xn.init(t,e),t.values=new Set(e.values),Object.defineProperty(t,"value",{get(){if(e.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return e.values[0]}})});function ft(t,e){return new Bhn({type:"literal",values:Array.isArray(t)?t:[t],...dn.normalizeParams(e)})}var $hn=se("ZodTransform",(t,e)=>{Nwt.init(t,e),Xn.init(t,e),t._zod.parse=(r,n)=>{r.addIssue=s=>{if(typeof s=="string")r.issues.push(dn.issue(s,r.value,e));else{let a=s;a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=r.value),a.inst??(a.inst=t),a.continue??(a.continue=!0),r.issues.push(dn.issue(a))}};let o=e.transform(r.value,r);return o instanceof Promise?o.then(s=>(r.value=s,r)):(r.value=o,r)}});function JIt(t){return new $hn({type:"transform",transform:t})}var XIt=se("ZodOptional",(t,e)=>{Lwt.init(t,e),Xn.init(t,e),t.unwrap=()=>t._zod.def.innerType});function Di(t){return new XIt({type:"optional",innerType:t})}var Vhn=se("ZodNullable",(t,e)=>{kwt.init(t,e),Xn.init(t,e),t.unwrap=()=>t._zod.def.innerType});function VIt(t){return new Vhn({type:"nullable",innerType:t})}var Hhn=se("ZodDefault",(t,e)=>{Dwt.init(t,e),Xn.init(t,e),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function Ghn(t,e){return new Hhn({type:"default",innerType:t,get defaultValue(){return typeof e=="function"?e():e}})}var zhn=se("ZodPrefault",(t,e)=>{Uwt.init(t,e),Xn.init(t,e),t.unwrap=()=>t._zod.def.innerType});function Whn(t,e){return new zhn({type:"prefault",innerType:t,get defaultValue(){return typeof e=="function"?e():e}})}var ePt=se("ZodNonOptional",(t,e)=>{qwt.init(t,e),Xn.init(t,e),t.unwrap=()=>t._zod.def.innerType});function Khn(t,e){return new ePt({type:"nonoptional",innerType:t,...dn.normalizeParams(e)})}var Yhn=se("ZodCatch",(t,e)=>{Fwt.init(t,e),Xn.init(t,e),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function Qhn(t,e){return new Yhn({type:"catch",innerType:t,catchValue:typeof e=="function"?e:()=>e})}var Zhn=se("ZodPipe",(t,e)=>{jwt.init(t,e),Xn.init(t,e),t.in=e.in,t.out=e.out});function hIe(t,e){return new Zhn({type:"pipe",in:t,out:e})}var Jhn=se("ZodReadonly",(t,e)=>{Bwt.init(t,e),Xn.init(t,e)});function Xhn(t){return new Jhn({type:"readonly",innerType:t})}var tPt=se("ZodCustom",(t,e)=>{$wt.init(t,e),Xn.init(t,e)});function emn(t){let e=new Oa({check:"custom"});return e._zod.check=t,e}function rPt(t,e){return PIt(tPt,t??(()=>!0),e)}function tmn(t,e={}){return RIt(tPt,t,e)}function rmn(t){let e=emn(r=>(r.addIssue=n=>{if(typeof n=="string")r.issues.push(dn.issue(n,r.value,e._zod.def));else{let o=n;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=r.value),o.inst??(o.inst=e),o.continue??(o.continue=!e._zod.def.abort),r.issues.push(dn.issue(o))}},t(r.value,r)));return e}function yIe(t,e){return hIe(JIt(t),e)}var nPt={invalid_type:"invalid_type",too_big:"too_big",too_small:"too_small",invalid_format:"invalid_format",not_multiple_of:"not_multiple_of",unrecognized_keys:"unrecognized_keys",invalid_union:"invalid_union",invalid_key:"invalid_key",invalid_element:"invalid_element",invalid_value:"invalid_value",custom:"custom"};var IZ={};Xs(IZ,{bigint:()=>smn,boolean:()=>omn,date:()=>amn,number:()=>imn,string:()=>nmn});function nmn(t){return zwt(mIe,t)}function imn(t){return vIt(xZ,t)}function omn(t){return TIt(gIe,t)}function smn(t){return SIt(WIt,t)}function amn(t){return wIt(YIt,t)}Su(Vwt());var iPt="io.modelcontextprotocol/related-task",RZ="2.0",zs=rPt(t=>t!==null&&(typeof t=="object"||typeof t=="function")),oPt=ei([V(),fn().int()]),sPt=V(),Fai=Xo({ttl:ei([fn(),_Ie()]).optional(),pollInterval:fn().optional()}),lmn=Be({ttl:fn().optional()}),umn=Be({taskId:V()}),EIe=Xo({progressToken:oPt.optional(),[iPt]:umn.optional()}),bu=Be({_meta:EIe.optional()}),OZ=bu.extend({task:lmn.optional()});var Ws=Be({method:V(),params:bu.loose().optional()}),Md=Be({_meta:EIe.optional()}),Nd=Be({method:V(),params:Md.loose().optional()}),Ks=Xo({_meta:EIe.optional()}),MZ=ei([V(),fn().int()]),dmn=Be({jsonrpc:ft(RZ),id:MZ,...Ws.shape}).strict();var fmn=Be({jsonrpc:ft(RZ),...Nd.shape}).strict();var aPt=Be({jsonrpc:ft(RZ),id:MZ,result:Ks}).strict();var KD;(function(t){t[t.ConnectionClosed=-32e3]="ConnectionClosed",t[t.RequestTimeout=-32001]="RequestTimeout",t[t.ParseError=-32700]="ParseError",t[t.InvalidRequest=-32600]="InvalidRequest",t[t.MethodNotFound=-32601]="MethodNotFound",t[t.InvalidParams=-32602]="InvalidParams",t[t.InternalError=-32603]="InternalError",t[t.UrlElicitationRequired=-32042]="UrlElicitationRequired"})(KD||(KD={}));var cPt=Be({jsonrpc:ft(RZ),id:MZ.optional(),error:Be({code:fn().int(),message:V(),data:Ai().optional()})}).strict();var pmn=ei([dmn,fmn,aPt,cPt]),jai=ei([aPt,cPt]),TIe=Ks.strict(),hmn=Md.extend({requestId:MZ.optional(),reason:V().optional()}),SIe=Nd.extend({method:ft("notifications/cancelled"),params:hmn}),mmn=Be({src:V(),mimeType:V().optional(),sizes:De(V()).optional(),theme:xl(["light","dark"]).optional()}),YD=Be({icons:De(mmn).optional()}),g2=Be({name:V(),title:V().optional()}),lPt=g2.extend({...g2.shape,...YD.shape,version:V(),websiteUrl:V().optional(),description:V().optional()}),gmn=wZ(Be({applyDefaults:Vn().optional()}),xi(V(),Ai())),_mn=yIe(t=>t&&typeof t=="object"&&!Array.isArray(t)&&Object.keys(t).length===0?{form:{}}:t,wZ(Be({form:gmn.optional(),url:zs.optional()}),xi(V(),Ai()).optional())),vmn=Xo({list:zs.optional(),cancel:zs.optional(),requests:Xo({sampling:Xo({createMessage:zs.optional()}).optional(),elicitation:Xo({create:zs.optional()}).optional()}).optional()}),ymn=Xo({list:zs.optional(),cancel:zs.optional(),requests:Xo({tools:Xo({call:zs.optional()}).optional()}).optional()}),Emn=Be({experimental:xi(V(),zs).optional(),sampling:Be({context:zs.optional(),tools:zs.optional()}).optional(),elicitation:_mn.optional(),roots:Be({listChanged:Vn().optional()}).optional(),tasks:vmn.optional()}),Tmn=bu.extend({protocolVersion:V(),capabilities:Emn,clientInfo:lPt}),Smn=Ws.extend({method:ft("initialize"),params:Tmn});var bmn=Be({experimental:xi(V(),zs).optional(),logging:zs.optional(),completions:zs.optional(),prompts:Be({listChanged:Vn().optional()}).optional(),resources:Be({subscribe:Vn().optional(),listChanged:Vn().optional()}).optional(),tools:Be({listChanged:Vn().optional()}).optional(),tasks:ymn.optional()}),uPt=Ks.extend({protocolVersion:V(),capabilities:bmn,serverInfo:lPt,instructions:V().optional()}),Cmn=Nd.extend({method:ft("notifications/initialized"),params:Md.optional()});var bIe=Ws.extend({method:ft("ping"),params:bu.optional()}),Amn=Be({progress:fn(),total:Di(fn()),message:Di(V())}),xmn=Be({...Md.shape,...Amn.shape,progressToken:oPt}),CIe=Nd.extend({method:ft("notifications/progress"),params:xmn}),wmn=bu.extend({cursor:sPt.optional()}),QD=Ws.extend({params:wmn.optional()}),ZD=Ks.extend({nextCursor:sPt.optional()}),Imn=xl(["working","input_required","completed","failed","cancelled"]),JD=Be({taskId:V(),status:Imn,ttl:ei([fn(),_Ie()]),createdAt:V(),lastUpdatedAt:V(),pollInterval:Di(fn()),statusMessage:Di(V())}),NZ=Ks.extend({task:JD}),Pmn=Md.merge(JD),AIe=Nd.extend({method:ft("notifications/tasks/status"),params:Pmn}),xIe=Ws.extend({method:ft("tasks/get"),params:bu.extend({taskId:V()})}),wIe=Ks.merge(JD),IIe=Ws.extend({method:ft("tasks/result"),params:bu.extend({taskId:V()})}),Bai=Ks.loose(),PIe=QD.extend({method:ft("tasks/list")}),RIe=ZD.extend({tasks:De(JD)}),OIe=Ws.extend({method:ft("tasks/cancel"),params:bu.extend({taskId:V()})}),Rmn=Ks.merge(JD),dPt=Be({uri:V(),mimeType:Di(V()),_meta:xi(V(),Ai()).optional()}),fPt=dPt.extend({text:V()}),MIe=V().refine(t=>{try{return atob(t),!0}catch{return!1}},{message:"Invalid Base64 string"}),pPt=dPt.extend({blob:MIe}),XD=xl(["user","assistant"]),_2=Be({audience:De(XD).optional(),priority:fn().min(0).max(1).optional(),lastModified:zD.datetime({offset:!0}).optional()}),hPt=Be({...g2.shape,...YD.shape,uri:V(),description:Di(V()),mimeType:Di(V()),annotations:_2.optional(),_meta:Di(Xo({}))}),Omn=Be({...g2.shape,...YD.shape,uriTemplate:V(),description:Di(V()),mimeType:Di(V()),annotations:_2.optional(),_meta:Di(Xo({}))}),Mmn=QD.extend({method:ft("resources/list")}),mPt=ZD.extend({resources:De(hPt)}),Nmn=QD.extend({method:ft("resources/templates/list")}),gPt=ZD.extend({resourceTemplates:De(Omn)}),NIe=bu.extend({uri:V()}),Lmn=NIe,kmn=Ws.extend({method:ft("resources/read"),params:Lmn}),_Pt=Ks.extend({contents:De(ei([fPt,pPt]))}),vPt=Nd.extend({method:ft("notifications/resources/list_changed"),params:Md.optional()}),Dmn=NIe,Umn=Ws.extend({method:ft("resources/subscribe"),params:Dmn}),qmn=NIe,Fmn=Ws.extend({method:ft("resources/unsubscribe"),params:qmn}),jmn=Md.extend({uri:V()}),Bmn=Nd.extend({method:ft("notifications/resources/updated"),params:jmn}),$mn=Be({name:V(),description:Di(V()),required:Di(Vn())}),Vmn=Be({...g2.shape,...YD.shape,description:Di(V()),arguments:Di(De($mn)),_meta:Di(Xo({}))}),Hmn=QD.extend({method:ft("prompts/list")}),yPt=ZD.extend({prompts:De(Vmn)}),Gmn=bu.extend({name:V(),arguments:xi(V(),V()).optional()}),zmn=Ws.extend({method:ft("prompts/get"),params:Gmn}),LIe=Be({type:ft("text"),text:V(),annotations:_2.optional(),_meta:xi(V(),Ai()).optional()}),kIe=Be({type:ft("image"),data:MIe,mimeType:V(),annotations:_2.optional(),_meta:xi(V(),Ai()).optional()}),DIe=Be({type:ft("audio"),data:MIe,mimeType:V(),annotations:_2.optional(),_meta:xi(V(),Ai()).optional()}),Wmn=Be({type:ft("tool_use"),name:V(),id:V(),input:xi(V(),Ai()),_meta:xi(V(),Ai()).optional()}),Kmn=Be({type:ft("resource"),resource:ei([fPt,pPt]),annotations:_2.optional(),_meta:xi(V(),Ai()).optional()}),Ymn=hPt.extend({type:ft("resource_link")}),UIe=ei([LIe,kIe,DIe,Ymn,Kmn]),Qmn=Be({role:XD,content:UIe}),EPt=Ks.extend({description:V().optional(),messages:De(Qmn)}),TPt=Nd.extend({method:ft("notifications/prompts/list_changed"),params:Md.optional()}),Zmn=Be({title:V().optional(),readOnlyHint:Vn().optional(),destructiveHint:Vn().optional(),idempotentHint:Vn().optional(),openWorldHint:Vn().optional()}),Jmn=Be({taskSupport:xl(["required","optional","forbidden"]).optional()}),SPt=Be({...g2.shape,...YD.shape,description:V().optional(),inputSchema:Be({type:ft("object"),properties:xi(V(),zs).optional(),required:De(V()).optional()}).catchall(Ai()),outputSchema:Be({type:ft("object"),properties:xi(V(),zs).optional(),required:De(V()).optional()}).catchall(Ai()).optional(),annotations:Zmn.optional(),execution:Jmn.optional(),_meta:xi(V(),Ai()).optional()}),Xmn=QD.extend({method:ft("tools/list")}),bPt=ZD.extend({tools:De(SPt)}),LZ=Ks.extend({content:De(UIe).default([]),structuredContent:xi(V(),Ai()).optional(),isError:Vn().optional()}),$ai=LZ.or(Ks.extend({toolResult:Ai()})),egn=OZ.extend({name:V(),arguments:xi(V(),Ai()).optional()}),tgn=Ws.extend({method:ft("tools/call"),params:egn}),CPt=Nd.extend({method:ft("notifications/tools/list_changed"),params:Md.optional()}),rgn=Be({autoRefresh:Vn().default(!0),debounceMs:fn().int().nonnegative().default(300)}),APt=xl(["debug","info","notice","warning","error","critical","alert","emergency"]),ngn=bu.extend({level:APt}),ign=Ws.extend({method:ft("logging/setLevel"),params:ngn}),ogn=Md.extend({level:APt,logger:V().optional(),data:Ai()}),sgn=Nd.extend({method:ft("notifications/message"),params:ogn}),agn=Be({name:V().optional()}),cgn=Be({hints:De(agn).optional(),costPriority:fn().min(0).max(1).optional(),speedPriority:fn().min(0).max(1).optional(),intelligencePriority:fn().min(0).max(1).optional()}),lgn=Be({mode:xl(["auto","required","none"]).optional()}),ugn=Be({type:ft("tool_result"),toolUseId:V().describe("The unique identifier for the corresponding tool call."),content:De(UIe).default([]),structuredContent:Be({}).loose().optional(),isError:Vn().optional(),_meta:xi(V(),Ai()).optional()}),dgn=vIe("type",[LIe,kIe,DIe]),PZ=vIe("type",[LIe,kIe,DIe,Wmn,ugn]),fgn=Be({role:XD,content:ei([PZ,De(PZ)]),_meta:xi(V(),Ai()).optional()}),pgn=OZ.extend({messages:De(fgn),modelPreferences:cgn.optional(),systemPrompt:V().optional(),includeContext:xl(["none","thisServer","allServers"]).optional(),temperature:fn().optional(),maxTokens:fn().int(),stopSequences:De(V()).optional(),metadata:zs.optional(),tools:De(SPt).optional(),toolChoice:lgn.optional()}),xPt=Ws.extend({method:ft("sampling/createMessage"),params:pgn}),wPt=Ks.extend({model:V(),stopReason:Di(xl(["endTurn","stopSequence","maxTokens"]).or(V())),role:XD,content:dgn}),hgn=Ks.extend({model:V(),stopReason:Di(xl(["endTurn","stopSequence","maxTokens","toolUse"]).or(V())),role:XD,content:ei([PZ,De(PZ)])}),mgn=Be({type:ft("boolean"),title:V().optional(),description:V().optional(),default:Vn().optional()}),ggn=Be({type:ft("string"),title:V().optional(),description:V().optional(),minLength:fn().optional(),maxLength:fn().optional(),format:xl(["email","uri","date","date-time"]).optional(),default:V().optional()}),_gn=Be({type:xl(["number","integer"]),title:V().optional(),description:V().optional(),minimum:fn().optional(),maximum:fn().optional(),default:fn().optional()}),vgn=Be({type:ft("string"),title:V().optional(),description:V().optional(),enum:De(V()),default:V().optional()}),ygn=Be({type:ft("string"),title:V().optional(),description:V().optional(),oneOf:De(Be({const:V(),title:V()})),default:V().optional()}),Egn=Be({type:ft("string"),title:V().optional(),description:V().optional(),enum:De(V()),enumNames:De(V()).optional(),default:V().optional()}),Tgn=ei([vgn,ygn]),Sgn=Be({type:ft("array"),title:V().optional(),description:V().optional(),minItems:fn().optional(),maxItems:fn().optional(),items:Be({type:ft("string"),enum:De(V())}),default:De(V()).optional()}),bgn=Be({type:ft("array"),title:V().optional(),description:V().optional(),minItems:fn().optional(),maxItems:fn().optional(),items:Be({anyOf:De(Be({const:V(),title:V()}))}),default:De(V()).optional()}),Cgn=ei([Sgn,bgn]),Agn=ei([Egn,Tgn,Cgn]),xgn=ei([Agn,mgn,ggn,_gn]),wgn=OZ.extend({mode:ft("form").optional(),message:V(),requestedSchema:Be({type:ft("object"),properties:xi(V(),xgn),required:De(V()).optional()})}),Ign=OZ.extend({mode:ft("url"),message:V(),elicitationId:V(),url:V().url()}),Pgn=ei([wgn,Ign]),IPt=Ws.extend({method:ft("elicitation/create"),params:Pgn}),Rgn=Md.extend({elicitationId:V()}),Ogn=Nd.extend({method:ft("notifications/elicitation/complete"),params:Rgn}),PPt=Ks.extend({action:xl(["accept","decline","cancel"]),content:yIe(t=>t===null?void 0:t,xi(V(),ei([V(),fn(),Vn(),De(V())])).optional())}),Mgn=Be({type:ft("ref/resource"),uri:V()});var Ngn=Be({type:ft("ref/prompt"),name:V()}),Lgn=bu.extend({ref:ei([Ngn,Mgn]),argument:Be({name:V(),value:V()}),context:Be({arguments:xi(V(),V()).optional()}).optional()}),kgn=Ws.extend({method:ft("completion/complete"),params:Lgn});var RPt=Ks.extend({completion:Xo({values:De(V()).max(100),total:Di(fn().int()),hasMore:Di(Vn())})}),Dgn=Be({uri:V().startsWith("file://"),name:V().optional(),_meta:xi(V(),Ai()).optional()}),Ugn=Ws.extend({method:ft("roots/list"),params:bu.optional()}),qgn=Ks.extend({roots:De(Dgn)}),Fgn=Nd.extend({method:ft("notifications/roots/list_changed"),params:Md.optional()}),Vai=ei([bIe,Smn,kgn,ign,zmn,Hmn,Mmn,Nmn,kmn,Umn,Fmn,tgn,Xmn,xIe,IIe,PIe,OIe]),Hai=ei([SIe,CIe,Cmn,Fgn,AIe]),Gai=ei([TIe,wPt,hgn,PPt,qgn,wIe,RIe,NZ]),zai=ei([bIe,xPt,IPt,Ugn,xIe,IIe,PIe,OIe]),Wai=ei([SIe,CIe,sgn,Bmn,vPt,CPt,TPt,AIe,Ogn]),Kai=ei([TIe,uPt,RPt,EPt,yPt,mPt,gPt,_Pt,LZ,bPt,wIe,RIe,NZ]);var jgn=Symbol("Let zodToJsonSchema decide on which parser to use");var wci=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");var FTn=yt(SRe(),1),jTn=yt(_2t(),1);var $Tn;$Tn=globalThis.crypto?.webcrypto??globalThis.crypto??import("node:crypto").then(t=>t.webcrypto);var Js=zIt().superRefine((t,e)=>{if(!URL.canParse(t))return e.addIssue({code:nPt.custom,message:"URL must be parseable",fatal:!0}),xwe}).refine(t=>{let e=new URL(t);return e.protocol!=="javascript:"&&e.protocol!=="data:"&&e.protocol!=="vbscript:"},{message:"URL cannot use javascript:, data:, or vbscript: scheme"}),VTn=Xo({resource:V().url(),authorization_servers:De(Js).optional(),jwks_uri:V().url().optional(),scopes_supported:De(V()).optional(),bearer_methods_supported:De(V()).optional(),resource_signing_alg_values_supported:De(V()).optional(),resource_name:V().optional(),resource_documentation:V().optional(),resource_policy_uri:V().url().optional(),resource_tos_uri:V().url().optional(),tls_client_certificate_bound_access_tokens:Vn().optional(),authorization_details_types_supported:De(V()).optional(),dpop_signing_alg_values_supported:De(V()).optional(),dpop_bound_access_tokens_required:Vn().optional()}),y2t=Xo({issuer:V(),authorization_endpoint:Js,token_endpoint:Js,registration_endpoint:Js.optional(),scopes_supported:De(V()).optional(),response_types_supported:De(V()),response_modes_supported:De(V()).optional(),grant_types_supported:De(V()).optional(),token_endpoint_auth_methods_supported:De(V()).optional(),token_endpoint_auth_signing_alg_values_supported:De(V()).optional(),service_documentation:Js.optional(),revocation_endpoint:Js.optional(),revocation_endpoint_auth_methods_supported:De(V()).optional(),revocation_endpoint_auth_signing_alg_values_supported:De(V()).optional(),introspection_endpoint:V().optional(),introspection_endpoint_auth_methods_supported:De(V()).optional(),introspection_endpoint_auth_signing_alg_values_supported:De(V()).optional(),code_challenge_methods_supported:De(V()).optional(),client_id_metadata_document_supported:Vn().optional()}),HTn=Xo({issuer:V(),authorization_endpoint:Js,token_endpoint:Js,userinfo_endpoint:Js.optional(),jwks_uri:Js,registration_endpoint:Js.optional(),scopes_supported:De(V()).optional(),response_types_supported:De(V()),response_modes_supported:De(V()).optional(),grant_types_supported:De(V()).optional(),acr_values_supported:De(V()).optional(),subject_types_supported:De(V()),id_token_signing_alg_values_supported:De(V()),id_token_encryption_alg_values_supported:De(V()).optional(),id_token_encryption_enc_values_supported:De(V()).optional(),userinfo_signing_alg_values_supported:De(V()).optional(),userinfo_encryption_alg_values_supported:De(V()).optional(),userinfo_encryption_enc_values_supported:De(V()).optional(),request_object_signing_alg_values_supported:De(V()).optional(),request_object_encryption_alg_values_supported:De(V()).optional(),request_object_encryption_enc_values_supported:De(V()).optional(),token_endpoint_auth_methods_supported:De(V()).optional(),token_endpoint_auth_signing_alg_values_supported:De(V()).optional(),display_values_supported:De(V()).optional(),claim_types_supported:De(V()).optional(),claims_supported:De(V()).optional(),service_documentation:V().optional(),claims_locales_supported:De(V()).optional(),ui_locales_supported:De(V()).optional(),claims_parameter_supported:Vn().optional(),request_parameter_supported:Vn().optional(),request_uri_parameter_supported:Vn().optional(),require_request_uri_registration:Vn().optional(),op_policy_uri:Js.optional(),op_tos_uri:Js.optional(),client_id_metadata_document_supported:Vn().optional()}),GTn=Be({...HTn.shape,...y2t.pick({code_challenge_methods_supported:!0}).shape}),zTn=Be({access_token:V(),id_token:V().optional(),token_type:V(),expires_in:IZ.number().optional(),scope:V().optional(),refresh_token:V().optional()}).strip(),WTn=Be({error:V(),error_description:V().optional(),error_uri:V().optional()}),v2t=Js.optional().or(ft("").transform(()=>{})),KTn=Be({redirect_uris:De(Js),token_endpoint_auth_method:V().optional(),grant_types:De(V()).optional(),response_types:De(V()).optional(),client_name:V().optional(),client_uri:Js.optional(),logo_uri:v2t,scope:V().optional(),contacts:De(V()).optional(),tos_uri:v2t,policy_uri:V().optional(),jwks_uri:Js.optional(),jwks:KIt().optional(),software_id:V().optional(),software_version:V().optional(),software_statement:V().optional()}).strip(),YTn=Be({client_id:V(),client_secret:V().optional(),client_id_issued_at:fn().optional(),client_secret_expires_at:fn().optional()}).strip(),QTn=KTn.merge(YTn),p0i=Be({error:V(),error_description:V().optional()}).strip(),h0i=Be({token:V(),token_type_hint:V().optional()}).strip();var qo=class extends Error{constructor(e,r){super(e),this.errorUri=r,this.name=this.constructor.name}toResponseObject(){let e={error:this.errorCode,error_description:this.message};return this.errorUri&&(e.error_uri=this.errorUri),e}get errorCode(){return this.constructor.errorCode}},R6=class extends qo{};R6.errorCode="invalid_request";var L2=class extends qo{};L2.errorCode="invalid_client";var k2=class extends qo{};k2.errorCode="invalid_grant";var D2=class extends qo{};D2.errorCode="unauthorized_client";var O6=class extends qo{};O6.errorCode="unsupported_grant_type";var M6=class extends qo{};M6.errorCode="invalid_scope";var N6=class extends qo{};N6.errorCode="access_denied";var U2=class extends qo{};U2.errorCode="server_error";var L6=class extends qo{};L6.errorCode="temporarily_unavailable";var k6=class extends qo{};k6.errorCode="unsupported_response_type";var D6=class extends qo{};D6.errorCode="unsupported_token_type";var U6=class extends qo{};U6.errorCode="invalid_token";var q6=class extends qo{};q6.errorCode="method_not_allowed";var F6=class extends qo{};F6.errorCode="too_many_requests";var q2=class extends qo{};q2.errorCode="invalid_client_metadata";var j6=class extends qo{};j6.errorCode="insufficient_scope";var B6=class extends qo{};B6.errorCode="invalid_target";var ZTn={[R6.errorCode]:R6,[L2.errorCode]:L2,[k2.errorCode]:k2,[D2.errorCode]:D2,[O6.errorCode]:O6,[M6.errorCode]:M6,[N6.errorCode]:N6,[U2.errorCode]:U2,[L6.errorCode]:L6,[k6.errorCode]:k6,[D6.errorCode]:D6,[U6.errorCode]:U6,[q6.errorCode]:q6,[F6.errorCode]:F6,[q2.errorCode]:q2,[j6.errorCode]:j6,[B6.errorCode]:B6};var RRe=yt(require("vscode"));gu();_u();bi();var E2t=yt(require("vscode"));Gg();bi();bi();bi();var JTn=yt(require("vscode"));var F2=yt(Fi()),T2t=yt(Ar()),_J=class extends T2t.Disposable{_onDidChangeTextDocument=this._register(new F2.Emitter);onDidChangeTextDocument=this._onDidChangeTextDocument.event;_onDidOpenTextDocument=this._register(new F2.Emitter);onDidOpenTextDocument=this._onDidOpenTextDocument.event;_onDidCloseTextDocument=this._register(new F2.Emitter);onDidCloseTextDocument=this._onDidCloseTextDocument.event;_onDidFocusTextDocument=this._register(new F2.Emitter);onDidFocusTextDocument=this._onDidFocusTextDocument.event;_onDidChangeWorkspaceFolders=this._register(new F2.Emitter);onDidChangeWorkspaceFolders=this._onDidChangeWorkspaceFolders.event;getTextDocumentsUnsafe(){return[]}findNotebook(e){}getWorkspaceFolders(){return[]}};var ORe=require("node:stream");gu();_u();function gc(){return globalThis.__chp_singletons?.CompletionLogger||qD}function S2t(){return globalThis.__chp_singletons?.ApiKeyManager||Hs}function vA(){return globalThis.__chp_singletons?.ConfigManager||fc}var vJ=class{constructor(e,r,n,o,s,a,c){this.status=e;this.statusText=r;this.headers=n;this.getText=o;this.getJson=s;this.getBody=a;this.fetcher=c;this.ok=e>=200&&e<300}ok;async text(){return this.getText()}async json(){return this.getJson()}async body(){return this.getBody()}},yJ=class{getUserAgentLibrary(){return"Fetcher"}async fetch(e,r){let n=gc(),o=S2t();if(r?.method==="GET"&&e.endsWith("/models")){let p={object:"list",data:[]},h={get:_=>_.toLowerCase()==="content-type"?"application/json":null,[Symbol.iterator]:function*(){yield["content-type","application/json"]}};return new vJ(200,"OK",h,async()=>JSON.stringify(p),async()=>p,async()=>null,"fetcher")}if(r?.method!=="POST"||e.endsWith("/completions")===!1)throw new Error("Not Support Request");let s={...r.json},a=vA(),c;if(e.endsWith("/chat/completions")){if(c=a.getNESConfig().modelConfig,!c||!c.baseUrl)throw n.error("[Fetcher] NES model configuration missing"),new Error("NES model configuration is missing");e=`${c.baseUrl}/chat/completions`}else if(e.endsWith("/completions")){if(c=a.getFIMConfig().modelConfig,!c||!c.baseUrl)throw n.error("[Fetcher] FIM model configuration missing"),new Error("FIM model configuration is missing");e=`${c.baseUrl}/completions`}else throw new Error("Not Support Request URL");let{provider:l,model:u,maxTokens:d,extraBody:f}=c;try{let p=await o.getApiKey(l);if(!p)throw n.error(`[Fetcher] ${l} API key not configured`),new Error("API key not configured");let h={...r.headers||{},"Content-Type":"application/json","User-Agent":h0.getUserAgent(l),Authorization:`Bearer ${p}`};if(f)for(let w in f)s[w]=f[w];let _={method:"POST",headers:h,body:JSON.stringify({...s,model:u,max_tokens:d}),signal:r.signal};n.info(`[Fetcher] Sending request: ${e}`);let g=await fetch(e,_);n.debug(`[Fetcher] Received response - Status code: ${g.status} ${g.statusText}`);let v=null,E=!1,y=async()=>{if(v!==null)return v;if(E)throw new Error("Response body has already been consumed as stream");return E=!0,v=await g.text(),n.trace(`[Fetcher] Response body length: ${v.length} characters`),v},S=async()=>{let w=await y();try{return JSON.parse(w)}catch(P){throw n.error("[Fetcher.ResponseWrapper] JSON parsing failed:",P),P}},b=async()=>{if(E){if(v!==null)return ORe.Readable.from([v]);throw new Error("Response body has already been consumed")}if(E=!0,!g.body)return null;let w=g.body.getReader();return new ORe.Readable({async read(){try{let{done:A,value:O}=await w.read();A?this.push(null):this.push(Buffer.from(O))}catch(A){this.destroy(A)}}})};return new vJ(g.status,g.statusText,g.headers,y,S,b,"node-fetch")}catch(p){throw this.isAbortError(p)||n.error("[Fetcher] Exception:",p),p}}fetchWithPagination(e,r){throw new Error("Method not implemented.")}async disconnectAll(){return Promise.resolve()}makeAbortController(){return new AbortController}isAbortError(e){return!!e&&typeof e=="object"&&"name"in e&&e.name==="AbortError"}isInternetDisconnectedError(e){return!1}isFetcherError(e){return!1}getUserMessageForFetcherError(e){return`Fetcher error: ${e instanceof Error?e.message:String(e)}`}};var EJ=yt(JAe());var TJ=class{logIt(e,r,...n){let o=gc();switch(e){case EJ.LogLevel.Error:o.error(`[CopilotLogTarget] ${r}`,...n);return;case EJ.LogLevel.Warning:o.warn(`[CopilotLogTarget] ${r}`,...n);return;case EJ.LogLevel.Info:o.debug(`[CopilotLogTarget] ${r}`,...n);return}}};var b2t=yt(tB()),$6=yt(Fi()),C2t=yt(Ar()),SJ=class extends C2t.Disposable{_serviceBrand;isMinimalMode=!0;anyGitHubSession=void 0;permissiveGitHubSession=void 0;copilotToken=new b2t.CopilotToken({token:`chp-token-${Math.ceil(Math.random()*100)}`,refresh_in:0,expires_at:0,username:"chpuser",isVscodeTeamMember:!1,copilot_plan:"individual"});speculativeDecodingEndpointToken;_onDidCopilotTokenRefresh=this._register(new $6.Emitter);onDidCopilotTokenRefresh=this._onDidCopilotTokenRefresh.event;_onDidAuthenticationChange=this._register(new $6.Emitter);onDidAuthenticationChange=this._onDidAuthenticationChange.event;_onDidAccessTokenChange=this._register(new $6.Emitter);onDidAccessTokenChange=this._onDidAccessTokenChange.event;_onDidAdoAuthenticationChange=this._register(new $6.Emitter);onDidAdoAuthenticationChange=this._onDidAdoAuthenticationChange.event;async getAnyGitHubSession(e){}async getPermissiveGitHubSession(e){}async getCopilotToken(e){return this.copilotToken}resetCopilotToken(e){this._onDidCopilotTokenRefresh.fire()}async getAdoAccessTokenBase64(e){}},bJ=class{sendTelemetryEvent(e,r,n){}},CJ=class{_serviceBrand;async getAllCompletionModels(e){return[]}async getAllChatEndpoints(){return[]}async getChatEndpoint(e){throw new Error("Method not implemented.")}async getEmbeddingsEndpoint(e){throw new Error("Method not implemented.")}};var MRe=yt(nK()),A2t=yt(XAe()),x2t=yt(rxe()),w2t=yt(Bi()),I2t=yt(zi()),P2t=yt(up()),yA=yt(require("vscode"));var AJ=class{workspace;documentMap=new Map;disposables=[];pendingDocumentChanges=new Set;documentChangeTimer=null;constructor(){this.workspace=new x2t.MutableObservableWorkspace,this.disposables.push(yA.workspace.onDidOpenTextDocument(e=>{this.syncDocument(e)})),this.disposables.push(yA.workspace.onDidCloseTextDocument(e=>{let r=gc(),n=e.uri.toString(),o=this.documentMap.get(n);o&&(o.dispose(),this.documentMap.delete(n),r.trace(`[VSCodeWorkspaceAdapter] Remove document: ${n}`))})),this.disposables.push(yA.window.onDidChangeTextEditorSelection(e=>{let r=this.documentMap.get(e.textEditor.document.uri.toString());if(r){let n=e.selections.map(o=>{let s=e.textEditor.document.offsetAt(o.start),a=e.textEditor.document.offsetAt(o.end);return new I2t.OffsetRange(s,a)});r.setSelection(n)}}));for(let e of yA.workspace.textDocuments)this.syncDocument(e)}getWorkspace(){return this.workspace}syncDocument(e){let r=gc(),n=e.uri.toString(),o=this.documentMap.get(n);if(o){let l=e.getText();return o.value.get().getValue()!==l&&o.setValue(new P2t.StringText(l),void 0,e.version),o}let s=MRe.DocumentId.create(n),a=A2t.LanguageId.create(e.languageId),c=yA.workspace.getWorkspaceFolder(e.uri);return o=this.workspace.addDocument({id:s,workspaceRoot:c?w2t.URI.parse(c.uri.toString()):void 0,initialValue:e.getText(),initialVersionId:e.version,languageId:a}),this.documentMap.set(n,o),r.trace(`[VSCodeWorkspaceAdapter] Sync document: ${e.fileName}`),o}getDocumentId(e){return MRe.DocumentId.create(e.toString())}dispose(){this.documentChangeTimer&&(clearTimeout(this.documentChangeTimer),this.documentChangeTimer=null),this.pendingDocumentChanges.clear();for(let e of this.disposables)e.dispose();this.disposables.length=0;for(let e of this.documentMap.values())e.dispose();this.documentMap.clear(),this.workspace.clear()}};var xJ=class{constructor(e){this._context=e;this.disposables.push(this.onDidChangeEmitter)}disposables=[];onDidChangeEmitter=new Xi.EventEmitter;onDidChange=this.onDidChangeEmitter.event;_fimProvider=null;_nesProvider=null;nesWorkspaceAdapter=null;_fetcher=null;_logTarget=null;_authService=null;_telemetrySender=null;debounceTimer=null;pendingDebounceRequest=null;invocationCount=0;get fimProvider(){return this._fimProvider||this.initializeProviders(),this._fimProvider}get nesProvider(){return this._nesProvider||this.initializeProviders(),this._nesProvider}initializeProviders(){if(this._fimProvider&&this._nesProvider)return;let e=gc();e.trace("[InlineCompletionProvider] Lazy load initialization FIM/NES provider");try{this._fetcher=new yJ,this._logTarget=new TJ,this._authService=new SJ,this._telemetrySender=new bJ,this.nesWorkspaceAdapter||(this.nesWorkspaceAdapter=new AJ,this.disposables.push(this.nesWorkspaceAdapter),e.trace("[InlineCompletionProvider] WorkspaceAdapter initialization complete (documents have been synchronized in constructor)")),this._fimProvider=(0,wJ.createInlineCompletionsProvider)({fetcher:this._fetcher,authService:this._authService,telemetrySender:this._telemetrySender,logTarget:this._logTarget,isRunningInTest:!1,contextProviderMatch:async()=>0,statusHandler:new class{didChange(r){}},documentManager:new _J,workspace:new O2t.MutableObservableWorkspace,urlOpener:new class{async open(r){}},editorInfo:{name:"vscode",version:Xi.version},editorPluginInfo:{name:"copilot-helper-pro",version:h0.getVersion()},relatedPluginInfo:[],editorSession:{sessionId:`chp-session-${Date.now()}`,machineId:`chp-machine-${Math.random().toString(36).substring(7)}`},notificationSender:new class{async showWarningMessage(r,...n){}},endpointProvider:new CJ}),this._nesProvider=(0,wJ.createNESProvider)({workspace:this.nesWorkspaceAdapter.getWorkspace(),fetcher:this._fetcher,copilotTokenManager:this._authService,telemetrySender:this._telemetrySender,logTarget:this._logTarget,waitForTreatmentVariables:!1}),e.info("[InlineCompletionProvider] FIM/NES provider lazy loading complete")}catch(r){throw e.error("[InlineCompletionProvider] Lazy load initialization provider failed:",r),r}}activate(){let e=gc();e.trace("[InlineCompletionProvider.activate] Activation started");try{let r=Xi.languages.registerInlineCompletionItemProvider({pattern:"**/*"},this);this.disposables.push(r),e.info("[InlineCompletionProvider] Activated (using lazy loading)")}catch(r){throw e.error("[InlineCompletionProvider.activate] Activation failed:",r),r}}async provideInlineCompletionItems(e,r,n,o){let s=gc(),a=vA(),c=a.getFIMConfig(),l=a.getNESConfig();if(!c.enabled&&!l.enabled){s.trace("[InlineCompletionProvider] Completion feature not enabled");return}let{triggerKind:u}=n,d=u===Xi.InlineCompletionTriggerKind.Invoke?"Manual":"Auto";if(s.trace(`[InlineCompletionProvider] Completion request (${d} trigger) - ${e.fileName}`),u!==Xi.InlineCompletionTriggerKind.Invoke)return new Promise(h=>{this.pendingDebounceRequest&&this.pendingDebounceRequest.resolve(void 0),this.debounceTimer&&clearTimeout(this.debounceTimer),this.pendingDebounceRequest={document:e,position:r,context:n,token:o,resolve:h};let _=Math.min(c.debounceMs,l.debounceMs);this.debounceTimer=setTimeout(()=>{if(this.pendingDebounceRequest?.token===o){this.debounceTimer=null,this.pendingDebounceRequest=null;let g=++this.invocationCount;s.trace(`[InlineCompletionProvider] Request #${g} started`);let v=new Xi.CancellationTokenSource,E=new Xi.CancellationTokenSource,y=o.onCancellationRequested(()=>{v.cancel(),E.cancel()});this._provideInlineCompletionItems(e,r,{coreToken:o,completionsCts:v,nesCts:E}).then(S=>{h(S)}).catch(()=>{h(void 0)}).finally(()=>{y.dispose(),v.dispose(),E.dispose(),setTimeout(()=>this.onDidChangeEmitter.fire(),200)})}},_)});let f=new Xi.CancellationTokenSource,p=o.onCancellationRequested(()=>{f.cancel()});try{let h=++this.invocationCount;return s.trace(`[InlineCompletionProvider] Request #${h} started`),this._invokeNESProvider(e,{nesCts:f})}finally{p.dispose(),f.dispose(),setTimeout(()=>this.onDidChangeEmitter.fire(),200)}}async _provideInlineCompletionItems(e,r,n){let o=gc(),s=vA(),a=s.getFIMConfig(),c=s.getNESConfig();if(a.enabled&&c.enabled){if(c.manualOnly)return o.trace("[InlineCompletionProvider] FIM and NES enabled, but NES manual trigger, use FIM"),this._invokeFIMProvider(e,r,n);let l=e.lineAt(r.line).text,u=l.length-1;for(;u>=0&&/\s/.test(l[u]);)u--;if(r.character>=u+1)return o.trace("[InlineCompletionProvider] Cursor at end of line, use FIM"),this._invokeFIMProvider(e,r,n);{o.trace("[InlineCompletionProvider] Cursor not at end of line, use NES");let f=await this._invokeNESProvider(e,n);if(f){let p=!1;if(f.items.length>0)for(let h of f.items){if(!h.range){p=!0;break}if(typeof h.insertText!="string"){p=!0;break}let _=e.getText(h.range);if(_===h.insertText)continue;let g=h.insertText.split(`
`),v=_.split(`
`);if(h.range.start.character===0&&h.range.end.character===e.lineAt(h.range.end.line).text.length&&g.length>v.length+2){o.trace(`[InlineCompletionProvider] NES generated abnormal content (cross-multi-line replacement), might have misunderstood context:\r
Original text=\r
${_}\r
Inserted text=\r
${h.insertText}`);continue}o.trace(`[InlineCompletionProvider] NES suggestion differs from original text, considered meaningful edit:\r
Original text=\r
${_}\r
Inserted text=\r
${h.insertText}`),p=!0;break}return p?(o.trace("[InlineCompletionProvider] NES meaningful result, return NES result"),f):(o.trace("[InlineCompletionProvider] NES result meaningless or over-generated, fallback to FIM"),this._invokeFIMProvider(e,r,n))}return o.trace("[InlineCompletionProvider] NES no result, fallback to FIM"),this._invokeFIMProvider(e,r,n)}}if(a.enabled)return o.trace("[InlineCompletionProvider] Only FIM enabled, use FIM"),this._invokeFIMProvider(e,r,n);if(c.enabled){if(c.manualOnly){o.trace("[InlineCompletionProvider] Only NES enabled but manual trigger mode, ignore auto request");return}return o.trace("[InlineCompletionProvider] Only NES enabled, use NES"),this._invokeNESProvider(e,n)}o.trace("[InlineCompletionProvider] Neither FIM nor NES enabled")}async _invokeFIMProvider(e,r,n){let o=gc(),a=vA().getFIMConfig();if(!a.enabled||!this.fimProvider)return;o.trace("[InlineCompletionProvider] Call FIM");let c=Date.now();try{let l=R2t.CopilotTextDocument.create(e.uri.toString(),e.languageId,e.version,e.getText()),u=new Promise((_,g)=>{setTimeout(()=>{g(new Error(`FIM request timeout (${a.timeoutMs}ms)`))},a.timeoutMs)}),d=this.fimProvider.getInlineCompletions(l,{line:r.line,character:r.character},n.completionsCts.token),f=await Promise.race([d,u]),p=Date.now()-c;if(o.trace(`[InlineCompletionProvider] FIM request completed, elapsed: ${p}ms`),!f||!f.length)return;let h=f.map((_,g)=>{let v=new Xi.Range(_.range.start.line,_.range.start.character,_.range.end.line,_.range.end.character);return o.info(`[InlineCompletionProvider] Return FIM suggestion [${g}]: insertText=\r
${_.insertText}`),new Xi.InlineCompletionItem(_.insertText,v)});return new Xi.InlineCompletionList(h)}catch(l){let u=Date.now()-c;if(l instanceof Error&&l.message.includes("timeout")){o.warn(`[InlineCompletionProvider] ${l.message}`);return}if(l instanceof Error&&l.name==="AbortError")return;o.error(`[InlineCompletionProvider] FIM request exception (${u}ms):`,l);return}}async _invokeNESProvider(e,r){let n=gc(),s=vA().getNESConfig();if(!s.enabled||!this.nesProvider||!this.nesWorkspaceAdapter)return;n.trace("[InlineCompletionProvider] Call NES");let a=Date.now();try{this.nesWorkspaceAdapter.syncDocument(e);let c=new Promise((E,y)=>{setTimeout(()=>{y(new Error(`NES request timeout (${s.timeoutMs}ms)`))},s.timeoutMs)}),l=this.nesProvider.getNextEdit(e.uri,r.nesCts.token),u=await Promise.race([l,c]),d=Date.now()-a;if(n.trace(`[InlineCompletionProvider] NES request completed, elapsed: ${d}ms`),!u||!u.result)return;let{newText:f,range:p}=u.result;if(!f)return;let h=e.positionAt(p.start),_=e.positionAt(p.endExclusive),g=new Xi.Range(h,_),v=new Xi.InlineCompletionItem(f,g);return this.nesProvider.handleShown(u),n.info(`[InlineCompletionProvider] Return NES suggestion: insertText=\r
${v?.insertText}`),new Xi.InlineCompletionList([v])}catch(c){let l=Date.now()-a;if(c instanceof Error&&c.message.includes("timeout")){n.warn(`[InlineCompletionProvider] ${c.message}`);return}if(c instanceof Error&&c.name==="AbortError")return;n.error(`[InlineCompletionProvider] NES request exception (${l}ms):`,c);return}}dispose(){let e=gc();e.trace("[InlineCompletionProvider.dispose] Start releasing resources"),this.debounceTimer&&(clearTimeout(this.debounceTimer),this.debounceTimer=null),this.pendingDebounceRequest&&(this.pendingDebounceRequest.resolve(void 0),this.pendingDebounceRequest=null),this._fimProvider&&(this._fimProvider.dispose(),this._fimProvider=null),this._nesProvider&&(this._nesProvider.dispose(),this._nesProvider=null),this.disposables.forEach(r=>{try{r.dispose()}catch(n){e.warn("[InlineCompletionProvider.dispose] Error releasing resources:",n)}}),this.disposables.length=0,e.info("[InlineCompletionProvider] All resources released")}};0&&(module.exports={InlineCompletionProvider});
/*! Bundled license information:

@vscode/chat-lib/dist/src/_internal/util/vs/platform/instantiation/common/instantiation.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/collections.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/errors.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/functional.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/arraysFind.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/arrays.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/map.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/assert.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/types.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/iterator.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/lifecycle.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/linkedList.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/stopwatch.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/event.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/cancellation.js:
@vscode/chat-lib/dist/src/_internal/util/vs/nls.messages.js:
@vscode/chat-lib/dist/src/_internal/util/vs/nls.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/platform.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/process.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/path.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/cache.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/lazy.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/strings.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/extpath.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/uri.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/network.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/resources.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/symbols.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/async.js:
@vscode/chat-lib/dist/src/_internal/util/vs/platform/instantiation/common/descriptors.js:
@vscode/chat-lib/dist/src/_internal/util/vs/platform/instantiation/common/graph.js:
@vscode/chat-lib/dist/src/_internal/util/vs/platform/instantiation/common/serviceCollection.js:
@vscode/chat-lib/dist/src/_internal/util/vs/platform/instantiation/common/instantiationService.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/uuid.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/observableInternal/debugName.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/equals.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/observableInternal/commonFacade/deps.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/observableInternal/base.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/observableInternal/logging/logging.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/observableInternal/transaction.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/observableInternal/debugLocation.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/observableInternal/observables/baseObservable.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/observableInternal/observables/observableValue.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/observableInternal/observables/lazyObservableValue.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/observableInternal/observables/observableValueOpts.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/observableInternal/reactions/autorunImpl.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/observableInternal/reactions/autorun.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/observableInternal/observables/derivedImpl.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/observableInternal/observables/derived.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/observableInternal/utils/promise.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/observableInternal/commonFacade/cancellation.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/observableInternal/utils/utilsCancellation.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/observableInternal/observables/observableFromEvent.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/observableInternal/observables/observableSignal.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/observableInternal/utils/utils.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/observableInternal/changeTracker.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/observableInternal/observables/constObservable.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/observableInternal/observables/observableSignalFromEvent.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/observableInternal/utils/valueWithChangeEvent.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/observableInternal/utils/runOnChange.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/observableInternal/experimental/utils.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/observableInternal/set.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/observableInternal/map.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/observableInternal/logging/consoleObservableLogger.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/observableInternal/logging/debugger/rpc.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/observableInternal/logging/debugger/debuggerRpc.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/observableInternal/logging/debugger/utils.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/observableInternal/logging/debugger/devToolsLogger.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/observableInternal/logging/debugGetDependencyGraph.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/observableInternal/index.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/objects.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/observable.js:
@vscode/chat-lib/dist/src/_internal/util/vs/editor/common/core/ranges/offsetRange.js:
@vscode/chat-lib/dist/src/_internal/util/vs/editor/common/core/position.js:
@vscode/chat-lib/dist/src/_internal/util/vs/editor/common/core/range.js:
@vscode/chat-lib/dist/src/_internal/util/vs/editor/common/core/ranges/lineRange.js:
@vscode/chat-lib/dist/src/_internal/util/vs/editor/common/core/text/textLength.js:
@vscode/chat-lib/dist/src/_internal/util/vs/editor/common/core/text/positionToOffsetImpl.js:
@vscode/chat-lib/dist/src/_internal/util/vs/editor/common/core/text/abstractText.js:
@vscode/chat-lib/dist/src/_internal/util/vs/editor/common/core/edits/edit.js:
@vscode/chat-lib/dist/src/_internal/util/vs/editor/common/core/edits/stringEdit.js:
@vscode/chat-lib/dist/src/_internal/util/vs/editor/common/core/edits/textEdit.js:
@vscode/chat-lib/dist/src/_internal/util/vs/editor/common/core/edits/lineEdit.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/stream.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/buffer.js:
@vscode/chat-lib/dist/src/_internal/util/vs/editor/common/core/text/positionToOffset.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/codiconsUtil.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/codiconsLibrary.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/codicons.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/themables.js:
@vscode/prompt-tsx/dist/base/util/vs/nls.js:
@vscode/prompt-tsx/dist/base/util/vs/common/platform.js:
@vscode/prompt-tsx/dist/base/util/vs/common/process.js:
@vscode/prompt-tsx/dist/base/util/vs/common/path.js:
@vscode/prompt-tsx/dist/base/util/vs/common/uri.js:
@vscode/chat-lib/dist/src/_internal/util/vs/editor/common/diff/linesDiffComputer.js:
@vscode/chat-lib/dist/src/_internal/util/vs/editor/common/diff/rangeMapping.js:
@vscode/chat-lib/dist/src/_internal/util/vs/editor/common/diff/defaultLinesDiffComputer/algorithms/diffAlgorithm.js:
@vscode/chat-lib/dist/src/_internal/util/vs/editor/common/diff/defaultLinesDiffComputer/utils.js:
@vscode/chat-lib/dist/src/_internal/util/vs/editor/common/diff/defaultLinesDiffComputer/algorithms/dynamicProgrammingDiffing.js:
@vscode/chat-lib/dist/src/_internal/util/vs/editor/common/diff/defaultLinesDiffComputer/algorithms/myersDiffAlgorithm.js:
@vscode/chat-lib/dist/src/_internal/util/vs/editor/common/diff/defaultLinesDiffComputer/linesSliceCharSequence.js:
@vscode/chat-lib/dist/src/_internal/util/vs/editor/common/diff/defaultLinesDiffComputer/computeMovedLines.js:
@vscode/chat-lib/dist/src/_internal/util/vs/editor/common/diff/defaultLinesDiffComputer/heuristicSequenceOptimizations.js:
@vscode/chat-lib/dist/src/_internal/util/vs/editor/common/diff/defaultLinesDiffComputer/lineSequence.js:
@vscode/chat-lib/dist/src/_internal/util/vs/editor/common/diff/defaultLinesDiffComputer/defaultLinesDiffComputer.js:
@vscode/chat-lib/dist/src/_internal/util/vs/workbench/api/common/extHostTypes/es5ClassCompat.js:
@vscode/chat-lib/dist/src/_internal/util/vs/workbench/api/common/extHostTypes/position.js:
@vscode/chat-lib/dist/src/_internal/util/vs/workbench/api/common/extHostTypes/range.js:
@vscode/chat-lib/dist/src/_internal/util/vs/workbench/api/common/extHostTypes/diagnostic.js:
@vscode/chat-lib/dist/src/_internal/util/vs/workbench/api/common/extHostTypes/location.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/naturalLanguage/korean.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/filters.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/iconLabels.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/htmlContent.js:
@vscode/chat-lib/dist/src/_internal/util/vs/workbench/api/common/extHostTypes/markdownString.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/mime.js:
@vscode/chat-lib/dist/src/_internal/util/vs/workbench/api/common/extHostTypes/notebooks.js:
@vscode/chat-lib/dist/src/_internal/util/vs/workbench/api/common/extHostTypes/selection.js:
@vscode/chat-lib/dist/src/_internal/util/vs/workbench/api/common/extHostTypes/snippetString.js:
@vscode/chat-lib/dist/src/_internal/util/vs/workbench/api/common/extHostTypes/snippetTextEdit.js:
@vscode/chat-lib/dist/src/_internal/util/vs/workbench/api/common/extHostTypes/symbolInformation.js:
@vscode/chat-lib/dist/src/_internal/util/vs/workbench/api/common/extHostTypes/textEdit.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/glob.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/numbers.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/hash.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/sseParser.js:
@vscode/chat-lib/dist/src/_internal/util/vs/editor/common/core/wordHelper.js:
@vscode/chat-lib/dist/src/_internal/util/vs/base/common/uint.js:
@vscode/chat-lib/dist/src/_internal/util/vs/editor/common/model/prefixSumComputer.js:
  (*!!! DO NOT modify, this file was COPIED from 'microsoft/vscode' *)

@microsoft/applicationinsights-web-snippet/dist/esm/applicationinsights-web-snippet.js:
  (*!
   * Application Insights JavaScript SDK - Web Snippet, 1.0.1
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)
*/
