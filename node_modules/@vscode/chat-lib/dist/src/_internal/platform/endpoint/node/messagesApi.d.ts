import { ContentBlockParam, RedactedThinkingBlockParam, ThinkingBlockParam } from '@anthropic-ai/sdk/resources';
import { Response } from '../../../platform/networking/common/fetcherService';
import { AsyncIterableObject } from '../../../util/vs/base/common/async';
import { IInstantiationService, ServicesAccessor } from '../../../util/vs/platform/instantiation/common/instantiation';
import { ILogService } from '../../log/common/logService';
import { FinishedCallback } from '../../networking/common/fetch';
import { IChatEndpoint, ICreateEndpointBodyOptions, IEndpointBody } from '../../networking/common/networking';
import { ChatCompletion } from '../../networking/common/openai';
import { ITelemetryService } from '../../telemetry/common/telemetry';
import { TelemetryData } from '../../telemetry/common/telemetryData';
interface AnthropicStreamEvent {
    type: string;
    message?: {
        id: string;
        type: string;
        role: string;
        content: ContentBlockParam[];
        model: string;
        stop_reason: string | null;
        stop_sequence: string | null;
        usage: {
            input_tokens: number;
            output_tokens: number;
            cache_creation_input_tokens?: number;
            cache_read_input_tokens?: number;
        };
    };
    index?: number;
    content_block?: ContentBlockParam | ThinkingBlockParam | RedactedThinkingBlockParam;
    delta?: {
        type: string;
        text?: string;
        partial_json?: string;
        thinking?: string;
        signature?: string;
        stop_reason?: string;
        stop_sequence?: string;
    };
    usage?: {
        output_tokens: number;
        input_tokens?: number;
        cache_creation_input_tokens?: number;
        cache_read_input_tokens?: number;
    };
}
export declare function createMessagesRequestBody(accessor: ServicesAccessor, options: ICreateEndpointBodyOptions, model: string, endpoint: IChatEndpoint): IEndpointBody;
export declare function processResponseFromMessagesEndpoint(instantiationService: IInstantiationService, telemetryService: ITelemetryService, logService: ILogService, response: Response, expectedNumChoices: number, finishCallback: FinishedCallback, telemetryData: TelemetryData): Promise<AsyncIterableObject<ChatCompletion>>;
export declare class AnthropicMessagesProcessor {
    private readonly telemetryData;
    private readonly requestId;
    private readonly ghRequestId;
    private textAccumulator;
    private toolCallAccumulator;
    private thinkingAccumulator;
    private completedToolCalls;
    private messageId;
    private model;
    private inputTokens;
    private outputTokens;
    private cachedTokens;
    constructor(telemetryData: TelemetryData, requestId: string, ghRequestId: string);
    push(chunk: AnthropicStreamEvent, _onProgress: FinishedCallback): ChatCompletion | undefined;
}
export {};
//# sourceMappingURL=messagesApi.d.ts.map