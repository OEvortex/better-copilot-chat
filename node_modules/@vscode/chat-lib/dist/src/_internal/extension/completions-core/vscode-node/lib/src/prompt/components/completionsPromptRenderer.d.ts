/** @jsxRuntime automatic */
/** @jsxImportSource ../../../../prompt/jsx-runtime/ */
import { CancellationToken } from 'vscode-languageserver-protocol';
import { ComponentStatistics, PromptOk, PromptRenderer, PromptRenderOptions, PromptSnapshotNode, StatusNotOk } from '../../../../prompt/src/components/components';
import { WalkContextTransformer } from '../../../../prompt/src/components/walker';
import { ElidedBlock, WeightedBlock } from './elision';
export type CompletionsPromptOk = PromptOk & {
    prefix: string;
    prefixTokens: number;
    suffix: string;
    suffixTokens: number;
    context: string[] | undefined;
};
type CompletionsPrompt = CompletionsPromptOk | StatusNotOk;
export interface CompletionsPromptRenderOptions extends PromptRenderOptions {
    promptTokenLimit: number;
    suffixPercent: number;
    languageId: string;
    delimiter?: string;
}
export declare class CompletionsPromptRenderer implements PromptRenderer<CompletionsPrompt, CompletionsPromptRenderOptions> {
    private renderId;
    /**
     * Function used to format the prefix blocks into a string.
     * If implementing a renderer subclass, override this to control how the prefix is formatted, otherwise defaults to `makePrompt`.
     */
    protected formatPrefix: (elidedBlocks: ElidedBlock[]) => string;
    /**
     * Function used to format the context blocks into a string array.
     * Context is optional, so leave this as `undefined` if you do not want to include context in the rendered prompt.
     * If implementing a renderer subclass, override this to control how the context is formatted, otherwise defaults to `undefined`.
     */
    protected formatContext: undefined | ((elidedBlocks: ElidedBlock[]) => string[]);
    render(snapshot: PromptSnapshotNode, options: CompletionsPromptRenderOptions, cancellationToken?: CancellationToken): CompletionsPrompt;
    private getPromptLimits;
    protected processSnapshot(snapshot: PromptSnapshotNode, delimiter: string, languageId: string): {
        prefixBlocks: WeightedBlock[];
        suffixBlock: WeightedBlock;
        componentStatistics: ComponentStatistics[];
    };
}
export declare const transformers: WalkContextTransformer[];
export declare function normalizeLineEndings(text: string): string;
export {};
//# sourceMappingURL=completionsPromptRenderer.d.ts.map